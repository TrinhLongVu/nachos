/*! For license information please see extension.web.bundle.js.LICENSE.txt */
(()=>{var __webpack_modules__={68295:(e,t,n)=>{"use strict";function r(e){return{formatNow:()=>{try{return e.toLocaleString()}catch{return`${e}`}},format:()=>{try{return e.toLocaleTimeString()}catch{return`${e}`}}}}n.r(t),n.d(t,{default:()=>r})},47542:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityMonitor=void 0;const r=n(4016);t.ActivityMonitor=class{constructor(e){this._timer=-1,this._timeout=-1,this._isDisposed=!1,this._activityStopped=new r.Signal(this),e.signal.connect(this._onSignalFired,this),this._timeout=e.timeout||1e3}get activityStopped(){return this._activityStopped}get timeout(){return this._timeout}set timeout(e){this._timeout=e}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,r.Signal.clearData(this))}_onSignalFired(e,t){clearTimeout(this._timer),this._sender=e,this._args=t,this._timer=setTimeout((()=>{this._activityStopped.emit({sender:this._sender,args:this._args})}),this._timeout)}}},79622:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(47542),t),i(n(92086),t),i(n(47390),t),i(n(99458),t),i(n(20176),t),i(n(47846),t),i(n(32533),t),i(n(57319),t)},92086:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},47390:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MarkdownCodeBlocks=void 0,function(e){e.CODE_BLOCK_MARKER="```";const t=[".markdown",".mdown",".mkdn",".md",".mkd",".mdwn",".mdtxt",".mdtext",".text",".txt",".Rmd"];class n{constructor(e){this.startLine=e,this.code="",this.endLine=-1}}e.MarkdownCodeBlock=n,e.isMarkdown=function(e){return t.indexOf(e)>-1},e.findMarkdownCodeBlocks=function(t){if(!t||""===t)return[];const r=t.split("\n"),i=[];let o=null;for(let t=0;t<r.length;t++){const s=r[t],a=0===s.indexOf(e.CODE_BLOCK_MARKER),c=null!=o;if(a||c)if(c)o&&(a?(o.endLine=t-1,i.push(o),o=null):o.code+=s+"\n");else{o=new n(t);const r=s.indexOf(e.CODE_BLOCK_MARKER),a=s.lastIndexOf(e.CODE_BLOCK_MARKER);r!==a&&(o.code=s.substring(r+e.CODE_BLOCK_MARKER.length,a),o.endLine=t,i.push(o),o=null)}}return i}}(t.MarkdownCodeBlocks||(t.MarkdownCodeBlocks={}))},99458:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var process=__webpack_require__(34155),__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PageConfig=void 0;const coreutils_1=__webpack_require__(95082),minimist_1=__importDefault(__webpack_require__(96562)),url_1=__webpack_require__(57319);var PageConfig;(function(PageConfig){function getOption(name){if(configData)return configData[name]||getBodyData(name);configData=Object.create(null);let found=!1;if("undefined"!=typeof document&&document){const e=document.getElementById("jupyter-config-data");e&&(configData=JSON.parse(e.textContent||""),found=!0)}if(!found&&process.argv)try{const cli=minimist_1.default(process.argv.slice(2)),path=__webpack_require__(26470);let fullPath="";"jupyter-config-data"in cli?fullPath=path.resolve(cli["jupyter-config-data"]):"JUPYTER_CONFIG_DATA"in process.env&&(fullPath=path.resolve(process.env.JUPYTER_CONFIG_DATA)),fullPath&&(configData=eval("require")(fullPath))}catch(e){console.error(e)}if(coreutils_1.JSONExt.isObject(configData))for(const e in configData)"string"!=typeof configData[e]&&(configData[e]=JSON.stringify(configData[e]));else configData=Object.create(null);return configData[name]||getBodyData(name)}function setOption(e,t){const n=getOption(e);return configData[e]=t,n}function getBaseUrl(){return url_1.URLExt.normalize(getOption("baseUrl")||"/")}function getTreeUrl(){return url_1.URLExt.join(getBaseUrl(),getOption("treeUrl"))}function getShareUrl(){return url_1.URLExt.normalize(getOption("shareUrl")||getBaseUrl())}function getTreeShareUrl(){return url_1.URLExt.normalize(url_1.URLExt.join(getShareUrl(),getOption("treeUrl")))}function getUrl(e){var t,n,r;let i=getOption("baseUrl")||"/";const o=null!==(t=e.mode)&&void 0!==t?t:getOption("mode"),s=null!==(n=e.workspace)&&void 0!==n?n:getOption("workspace"),a="multiple-document"===o?"lab":"doc";i=url_1.URLExt.join(i,a),s!==PageConfig.defaultWorkspace&&(i=url_1.URLExt.join(i,"workspaces",encodeURIComponent(getOption("workspace"))));const c=null!==(r=e.treePath)&&void 0!==r?r:getOption("treePath");return c&&(i=url_1.URLExt.join(i,"tree",url_1.URLExt.encodeParts(c))),i}function getWsUrl(e){let t=getOption("wsUrl");if(!t){if(0!==(e=e?url_1.URLExt.normalize(e):getBaseUrl()).indexOf("http"))return"";t="ws"+e.slice(4)}return url_1.URLExt.normalize(t)}function getNBConvertURL({path:e,format:t,download:n}){const r=url_1.URLExt.encodeParts(e),i=url_1.URLExt.join(getBaseUrl(),"nbconvert",t,r);return n?i+"?download=true":i}function getToken(){return getOption("token")||getBodyData("jupyterApiToken")}function getNotebookVersion(){const e=getOption("notebookVersion");return""===e?[0,0,0]:JSON.parse(e)}PageConfig.getOption=getOption,PageConfig.setOption=setOption,PageConfig.getBaseUrl=getBaseUrl,PageConfig.getTreeUrl=getTreeUrl,PageConfig.getShareUrl=getShareUrl,PageConfig.getTreeShareUrl=getTreeShareUrl,PageConfig.getUrl=getUrl,PageConfig.defaultWorkspace="default",PageConfig.getWsUrl=getWsUrl,PageConfig.getNBConvertURL=getNBConvertURL,PageConfig.getToken=getToken,PageConfig.getNotebookVersion=getNotebookVersion;let configData=null,Extension;function getBodyData(e){if("undefined"==typeof document||!document.body)return"";const t=document.body.dataset[e];return void 0===t?"":decodeURIComponent(t)}!function(e){function t(e){try{const t=getOption(e);if(t)return JSON.parse(t)}catch(t){console.warn(`Unable to parse ${e}.`,t)}return[]}e.deferred=t("deferredExtensions"),e.disabled=t("disabledExtensions"),e.isDeferred=function(t){const n=t.indexOf(":");let r="";return-1!==n&&(r=t.slice(0,n)),e.deferred.some((e=>e===t||r&&e===r))},e.isDisabled=function(t){const n=t.indexOf(":");let r="";return-1!==n&&(r=t.slice(0,n)),e.disabled.some((e=>e===t||r&&e===r))}}(Extension=PageConfig.Extension||(PageConfig.Extension={}))})(PageConfig=exports.PageConfig||(exports.PageConfig={}))},20176:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathExt=void 0;const r=n(26470);!function(e){function t(e){return 0===e.indexOf("/")&&(e=e.slice(1)),e}e.join=function(...e){const n=r.posix.join(...e);return"."===n?"":t(n)},e.basename=function(e,t){return r.posix.basename(e,t)},e.dirname=function(e){const n=t(r.posix.dirname(e));return"."===n?"":n},e.extname=function(e){return r.posix.extname(e)},e.normalize=function(e){return""===e?"":t(r.posix.normalize(e))},e.resolve=function(...e){return t(r.posix.resolve(...e))},e.relative=function(e,n){return t(r.posix.relative(e,n))},e.normalizeExtension=function(e){return e.length>0&&0!==e.indexOf(".")&&(e=`.${e}`),e},e.removeSlash=t}(t.PathExt||(t.PathExt={}))},47846:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Text=void 0,function(e){const t="𝐚".length>1;e.jsIndexToCharIndex=function(e,n){if(t)return e;let r=e;for(let t=0;t+1<n.length&&t<e;t++){const e=n.charCodeAt(t);if(e>=55296&&e<=56319){const e=n.charCodeAt(t+1);e>=56320&&e<=57343&&(r--,t++)}}return r},e.charIndexToJsIndex=function(e,n){if(t)return e;let r=e;for(let e=0;e+1<n.length&&e<r;e++){const t=n.charCodeAt(e);if(t>=55296&&t<=56319){const t=n.charCodeAt(e+1);t>=56320&&t<=57343&&(r++,e++)}}return r},e.camelCase=function(e,t=!1){return e.replace(/^(\w)|[\s-_:]+(\w)/g,(function(e,n,r){return r?r.toUpperCase():t?n.toUpperCase():n.toLowerCase()}))},e.titleCase=function(e){return(e||"").toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}}(t.Text||(t.Text={}))},32533:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Time=void 0;const i=r(n(68295));var o;(o=t.Time||(t.Time={})).formatHuman=function(e){i.default.locale(document.documentElement.lang);let t=i.default(e).fromNow();return t="a few seconds ago"===t?"seconds ago":t,t},o.format=function(e,t="YYYY-MM-DD HH:mm"){return i.default(e).format(t)}},57319:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.URLExt=void 0;const i=n(26470),o=r(n(84564));!function(e){function t(e){if("undefined"!=typeof document&&document){const t=document.createElement("a");return t.href=e,t}return o.default(e)}function n(...e){const t=o.default(e[0],{}),n=`${t.protocol}${t.slashes?"//":""}${t.auth}${t.auth?"@":""}${t.host}`,r=i.posix.join(`${n&&"/"!==t.pathname[0]?"/":""}${t.pathname}`,...e.slice(1));return`${n}${"."===r?"":r}`}e.parse=t,e.getHostName=function(e){return o.default(e).hostname},e.normalize=function(e){return e&&t(e).toString()},e.join=n,e.encodeParts=function(e){return n(...e.split("/").map(encodeURIComponent))},e.objectToQueryString=function(e){const t=Object.keys(e).filter((e=>e.length>0));return t.length?"?"+t.map((t=>{const n=encodeURIComponent(String(e[t]));return t+(n?"="+n:"")})).join("&"):""},e.queryStringToObject=function(e){return e.replace(/^\?/,"").split("&").reduce(((e,t)=>{const[n,r]=t.split("=");return n.length>0&&(e[n]=decodeURIComponent(r||"")),e}),{})},e.isLocal=function(e){const{protocol:n}=t(e);return(!n||0!==e.toLowerCase().indexOf(n))&&0!==e.indexOf("/")}}(t.URLExt||(t.URLExt={}))},50591:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseManager=void 0;const r=n(4016),i=n(28477);t.BaseManager=class{constructor(e){var t;this._isDisposed=!1,this._disposed=new r.Signal(this),this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:i.ServerConnection.makeSettings()}get disposed(){return this._disposed}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._disposed.emit(void 0),r.Signal.clearData(this))}}},33227:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BuildManager=void 0;const r=n(79622),i=n(28477);t.BuildManager=class{constructor(e={}){var t;this._url="",this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:i.ServerConnection.makeSettings();const{baseUrl:n,appUrl:o}=this.serverSettings;this._url=r.URLExt.join(n,o,"api/build")}get isAvailable(){return"true"===r.PageConfig.getOption("buildAvailable").toLowerCase()}get shouldCheck(){return"true"===r.PageConfig.getOption("buildCheck").toLowerCase()}getStatus(){const{_url:e,serverSettings:t}=this;return i.ServerConnection.makeRequest(e,{},t).then((e=>{if(200!==e.status)throw new i.ServerConnection.ResponseError(e);return e.json()})).then((e=>{if("string"!=typeof e.status)throw new Error("Invalid data");if("string"!=typeof e.message)throw new Error("Invalid data");return e}))}build(){const{_url:e,serverSettings:t}=this;return i.ServerConnection.makeRequest(e,{method:"POST"},t).then((e=>{if(400===e.status)throw new i.ServerConnection.ResponseError(e,"Build aborted");if(200!==e.status){const t=`Build failed with ${e.status}, please run 'jupyter lab build' on the server for full output`;throw new i.ServerConnection.ResponseError(e,t)}}))}cancel(){const{_url:e,serverSettings:t}=this;return i.ServerConnection.makeRequest(e,{method:"DELETE"},t).then((e=>{if(204!==e.status)throw new i.ServerConnection.ResponseError(e)}))}}},95077:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigWithDefaults=t.ConfigSection=void 0;const r=n(79622),i=n(76240);(t.ConfigSection||(t.ConfigSection={})).create=function(e){const t=new o(e);return t.load().then((()=>t))};class o{constructor(e){var t;this._url="unknown";const n=this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:i.ServerConnection.makeSettings();this._url=r.URLExt.join(n.baseUrl,"api/config",encodeURIComponent(e.name))}get data(){return this._data}async load(){const e=await i.ServerConnection.makeRequest(this._url,{},this.serverSettings);if(200!==e.status)throw await i.ServerConnection.ResponseError.create(e);this._data=await e.json()}async update(e){this._data=Object.assign(Object.assign({},this._data),e);const t={method:"PATCH",body:JSON.stringify(e)},n=await i.ServerConnection.makeRequest(this._url,t,this.serverSettings);if(200!==n.status)throw await i.ServerConnection.ResponseError.create(n);return this._data=await n.json(),this._data}}t.ConfigWithDefaults=class{constructor(e){var t,n;this._className="",this._section=e.section,this._defaults=null!==(t=e.defaults)&&void 0!==t?t:{},this._className=null!==(n=e.className)&&void 0!==n?n:""}get(e){const t=this._classData();return e in t?t[e]:this._defaults[e]}set(e,t){const n={};if(n[e]=t,this._className){const e={};return e[this._className]=n,this._section.update(e)}return this._section.update(n)}_classData(){const e=this._section.data;return this._className&&this._className in e?e[this._className]:e}}},63644:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Drive=t.ContentsManager=t.Contents=void 0;const s=n(79622),a=n(35259),c=n(4016),l=n(76240),u=o(n(65460));var d,p;(p=t.Contents||(t.Contents={})).validateContentsModel=function(e){u.validateContentsModel(e)},p.validateCheckpointModel=function(e){u.validateCheckpointModel(e)},t.ContentsManager=class{constructor(e={}){var t,n;this._isDisposed=!1,this._additionalDrives=new Map,this._fileChanged=new c.Signal(this);const r=this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:l.ServerConnection.makeSettings();this._defaultDrive=null!==(n=e.defaultDrive)&&void 0!==n?n:new h({serverSettings:r}),this._defaultDrive.fileChanged.connect(this._onFileChanged,this)}get fileChanged(){return this._fileChanged}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,c.Signal.clearData(this))}addDrive(e){this._additionalDrives.set(e.name,e),e.fileChanged.connect(this._onFileChanged,this)}getModelDBFactory(e){var t;const[n]=this._driveForPath(e);return null!==(t=null==n?void 0:n.modelDBFactory)&&void 0!==t?t:null}localPath(e){const t=e.split("/"),n=t[0].split(":");return 1!==n.length&&this._additionalDrives.has(n[0])?s.PathExt.join(n.slice(1).join(":"),...t.slice(1)):s.PathExt.removeSlash(e)}normalize(e){const t=e.split(":");return 1===t.length?s.PathExt.normalize(e):`${t[0]}:${s.PathExt.normalize(t.slice(1).join(":"))}`}resolvePath(e,t){const n=this.driveName(e),r=this.localPath(e),i=s.PathExt.resolve("/",r,t);return n?`${n}:${i}`:i}driveName(e){const t=e.split("/")[0].split(":");return 1===t.length?"":this._additionalDrives.has(t[0])?t[0]:""}get(e,t){const[n,r]=this._driveForPath(e);return n.get(r,t).then((e=>{const t=[];return"directory"===e.type&&e.content?(a.each(e.content,(e=>{t.push(Object.assign(Object.assign({},e),{path:this._toGlobalPath(n,e.path)}))})),Object.assign(Object.assign({},e),{path:this._toGlobalPath(n,r),content:t})):Object.assign(Object.assign({},e),{path:this._toGlobalPath(n,r)})}))}getDownloadUrl(e){const[t,n]=this._driveForPath(e);return t.getDownloadUrl(n)}newUntitled(e={}){if(e.path){const t=this.normalize(e.path),[n,r]=this._driveForPath(t);return n.newUntitled(Object.assign(Object.assign({},e),{path:r})).then((e=>Object.assign(Object.assign({},e),{path:s.PathExt.join(t,e.name)})))}return this._defaultDrive.newUntitled(e)}delete(e){const[t,n]=this._driveForPath(e);return t.delete(n)}rename(e,t){const[n,r]=this._driveForPath(e),[i,o]=this._driveForPath(t);if(n!==i)throw Error("ContentsManager: renaming files must occur within a Drive");return n.rename(r,o).then((e=>Object.assign(Object.assign({},e),{path:this._toGlobalPath(n,o)})))}save(e,t={}){const n=this.normalize(e),[r,i]=this._driveForPath(e);return r.save(i,Object.assign(Object.assign({},t),{path:i})).then((e=>Object.assign(Object.assign({},e),{path:n})))}copy(e,t){const[n,r]=this._driveForPath(e),[i,o]=this._driveForPath(t);if(n===i)return n.copy(r,o).then((e=>Object.assign(Object.assign({},e),{path:this._toGlobalPath(n,e.path)})));throw Error("Copying files between drives is not currently implemented")}createCheckpoint(e){const[t,n]=this._driveForPath(e);return t.createCheckpoint(n)}listCheckpoints(e){const[t,n]=this._driveForPath(e);return t.listCheckpoints(n)}restoreCheckpoint(e,t){const[n,r]=this._driveForPath(e);return n.restoreCheckpoint(r,t)}deleteCheckpoint(e,t){const[n,r]=this._driveForPath(e);return n.deleteCheckpoint(r,t)}_toGlobalPath(e,t){return e===this._defaultDrive?s.PathExt.removeSlash(t):`${e.name}:${s.PathExt.removeSlash(t)}`}_driveForPath(e){const t=this.driveName(e),n=this.localPath(e);return t?[this._additionalDrives.get(t),n]:[this._defaultDrive,n]}_onFileChanged(e,t){var n,r;if(e===this._defaultDrive)this._fileChanged.emit(t);else{let i=null,o=null;(null===(n=t.newValue)||void 0===n?void 0:n.path)&&(i=Object.assign(Object.assign({},t.newValue),{path:this._toGlobalPath(e,t.newValue.path)})),(null===(r=t.oldValue)||void 0===r?void 0:r.path)&&(o=Object.assign(Object.assign({},t.oldValue),{path:this._toGlobalPath(e,t.oldValue.path)})),this._fileChanged.emit({type:t.type,newValue:i,oldValue:o})}}};class h{constructor(e={}){var t,n,r;this._isDisposed=!1,this._fileChanged=new c.Signal(this),this.name=null!==(t=e.name)&&void 0!==t?t:"Default",this._apiEndpoint=null!==(n=e.apiEndpoint)&&void 0!==n?n:"api/contents",this.serverSettings=null!==(r=e.serverSettings)&&void 0!==r?r:l.ServerConnection.makeSettings()}get fileChanged(){return this._fileChanged}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,c.Signal.clearData(this))}async get(e,t){let n=this._getUrl(e);if(t){"notebook"===t.type&&delete t.format;const e=t.content?"1":"0",r=Object.assign(Object.assign({},t),{content:e});n+=s.URLExt.objectToQueryString(r)}const r=this.serverSettings,i=await l.ServerConnection.makeRequest(n,{},r);if(200!==i.status)throw await l.ServerConnection.ResponseError.create(i);const o=await i.json();return u.validateContentsModel(o),o}getDownloadUrl(e){const t=this.serverSettings.baseUrl;let n=s.URLExt.join(t,"files",s.URLExt.encodeParts(e));const r=document.cookie.match("\\b_xsrf=([^;]*)\\b");if(r){const e=new URL(n);e.searchParams.append("_xsrf",r[1]),n=e.toString()}return Promise.resolve(n)}async newUntitled(e={}){var t;let n="{}";e&&(e.ext&&(e.ext=d.normalizeExtension(e.ext)),n=JSON.stringify(e));const r=this.serverSettings,i=this._getUrl(null!==(t=e.path)&&void 0!==t?t:""),o={method:"POST",body:n},s=await l.ServerConnection.makeRequest(i,o,r);if(201!==s.status)throw await l.ServerConnection.ResponseError.create(s);const a=await s.json();return u.validateContentsModel(a),this._fileChanged.emit({type:"new",oldValue:null,newValue:a}),a}async delete(e){const t=this._getUrl(e),n=this.serverSettings,r=await l.ServerConnection.makeRequest(t,{method:"DELETE"},n);if(204!==r.status)throw await l.ServerConnection.ResponseError.create(r);this._fileChanged.emit({type:"delete",oldValue:{path:e},newValue:null})}async rename(e,t){const n=this.serverSettings,r=this._getUrl(e),i={method:"PATCH",body:JSON.stringify({path:t})},o=await l.ServerConnection.makeRequest(r,i,n);if(200!==o.status)throw await l.ServerConnection.ResponseError.create(o);const s=await o.json();return u.validateContentsModel(s),this._fileChanged.emit({type:"rename",oldValue:{path:e},newValue:s}),s}async save(e,t={}){const n=this.serverSettings,r=this._getUrl(e),i={method:"PUT",body:JSON.stringify(t)},o=await l.ServerConnection.makeRequest(r,i,n);if(200!==o.status&&201!==o.status)throw await l.ServerConnection.ResponseError.create(o);const s=await o.json();return u.validateContentsModel(s),this._fileChanged.emit({type:"save",oldValue:null,newValue:s}),s}async copy(e,t){const n=this.serverSettings,r=this._getUrl(t),i={method:"POST",body:JSON.stringify({copy_from:e})},o=await l.ServerConnection.makeRequest(r,i,n);if(201!==o.status)throw await l.ServerConnection.ResponseError.create(o);const s=await o.json();return u.validateContentsModel(s),this._fileChanged.emit({type:"new",oldValue:null,newValue:s}),s}async createCheckpoint(e){const t=this._getUrl(e,"checkpoints"),n=await l.ServerConnection.makeRequest(t,{method:"POST"},this.serverSettings);if(201!==n.status)throw await l.ServerConnection.ResponseError.create(n);const r=await n.json();return u.validateCheckpointModel(r),r}async listCheckpoints(e){const t=this._getUrl(e,"checkpoints"),n=await l.ServerConnection.makeRequest(t,{},this.serverSettings);if(200!==n.status)throw await l.ServerConnection.ResponseError.create(n);const r=await n.json();if(!Array.isArray(r))throw new Error("Invalid Checkpoint list");for(let e=0;e<r.length;e++)u.validateCheckpointModel(r[e]);return r}async restoreCheckpoint(e,t){const n=this._getUrl(e,"checkpoints",t),r=await l.ServerConnection.makeRequest(n,{method:"POST"},this.serverSettings);if(204!==r.status)throw await l.ServerConnection.ResponseError.create(r)}async deleteCheckpoint(e,t){const n=this._getUrl(e,"checkpoints",t),r=await l.ServerConnection.makeRequest(n,{method:"DELETE"},this.serverSettings);if(204!==r.status)throw await l.ServerConnection.ResponseError.create(r)}_getUrl(...e){const t=e.map((e=>s.URLExt.encodeParts(e))),n=this.serverSettings.baseUrl;return s.URLExt.join(n,this._apiEndpoint,...t)}}t.Drive=h,function(e){e.normalizeExtension=function(e){return e.length>0&&0!==e.indexOf(".")&&(e=`.${e}`),e}}(d||(d={}))},65460:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateCheckpointModel=t.validateContentsModel=void 0;const r=n(46901);t.validateContentsModel=function(e){r.validateProperty(e,"name","string"),r.validateProperty(e,"path","string"),r.validateProperty(e,"type","string"),r.validateProperty(e,"created","string"),r.validateProperty(e,"last_modified","string"),r.validateProperty(e,"mimetype","object"),r.validateProperty(e,"content","object"),r.validateProperty(e,"format","object")},t.validateCheckpointModel=function(e){r.validateProperty(e,"id","string"),r.validateProperty(e,"last_modified","string")}},76240:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(95077),t),i(n(63644),t),i(n(62604),t),i(n(12902),t),i(n(93079),t),i(n(28477),t),i(n(41874),t),i(n(92726),t),i(n(93247),t),i(n(45399),t),i(n(4574),t)},54500:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CommHandler=void 0;const s=n(70725),a=o(n(75253));class c extends s.DisposableDelegate{constructor(e,t,n,r){super(r),this._target="",this._id="",this._id=t,this._target=e,this._kernel=n}get commId(){return this._id}get targetName(){return this._target}get onClose(){return this._onClose}set onClose(e){this._onClose=e}get onMsg(){return this._onMsg}set onMsg(e){this._onMsg=e}open(e,t,n=[]){if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot open");const r=a.createMessage({msgType:"comm_open",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,target_name:this._target,data:null!=e?e:{}},metadata:t,buffers:n});return this._kernel.sendShellMessage(r,!1,!0)}send(e,t,n=[],r=!0){if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot send");const i=a.createMessage({msgType:"comm_msg",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,data:e},metadata:t,buffers:n});return this._kernel.sendShellMessage(i,!1,r)}close(e,t,n=[]){if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot close");const r=a.createMessage({msgType:"comm_close",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,data:null!=e?e:{}},metadata:t,buffers:n}),i=this._kernel.sendShellMessage(r,!1,!0),o=this._onClose;return o&&o(a.createMessage({msgType:"comm_close",channel:"iopub",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,data:null!=e?e:{}},metadata:t,buffers:n})),this.dispose(),i}}t.CommHandler=c},19883:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelConnection=void 0;const s=n(79622),a=n(95082),c=n(4016),l=n(76240),u=n(54500),d=o(n(75253)),p=n(38707),h=o(n(86002)),f=o(n(96512)),g=n(12902),m=o(n(2183)),y="_RESTARTING_";class v{constructor(e){var t,n,r,i;this._createSocket=()=>{this._errorIfDisposed(),this._clearSocket(),this._updateConnectionStatus("connecting");const e=this.serverSettings,t=s.URLExt.join(e.wsUrl,m.KERNEL_SERVICE_URL,encodeURIComponent(this._id)),n=t.replace(/^((?:\w+:)?\/\/)(?:[^@\/]+@)/,"$1");console.debug(`Starting WebSocket: ${n}`);let r=s.URLExt.join(t,"channels?session_id="+encodeURIComponent(this._clientId));const i=e.token;e.appendToken&&""!==i&&(r+=`&token=${encodeURIComponent(i)}`),this._ws=new e.WebSocket(r),this._ws.binaryType="arraybuffer",this._ws.onmessage=this._onWSMessage,this._ws.onopen=this._onWSOpen,this._ws.onclose=this._onWSClose,this._ws.onerror=this._onWSClose},this._onWSOpen=e=>{this._updateConnectionStatus("connected")},this._onWSMessage=e=>{let t;try{t=h.deserialize(e.data),f.validateMessage(t)}catch(e){throw e.message=`Kernel message validation error: ${e.message}`,e}this._kernelSession=t.header.session,this._msgChain=this._msgChain.then((()=>this._handleMessage(t))).catch((e=>{e.message.startsWith("Canceled future for ")&&console.error(e)})),this._anyMessage.emit({msg:t,direction:"recv"})},this._onWSClose=e=>{this.isDisposed||this._reconnect()},this._id="",this._name="",this._status="unknown",this._connectionStatus="connecting",this._kernelSession="",this._isDisposed=!1,this._ws=null,this._username="",this._reconnectLimit=7,this._reconnectAttempt=0,this._reconnectTimeout=null,this._futures=new Map,this._comms=new Map,this._targetRegistry=Object.create(null),this._info=new a.PromiseDelegate,this._pendingMessages=[],this._statusChanged=new c.Signal(this),this._connectionStatusChanged=new c.Signal(this),this._disposed=new c.Signal(this),this._iopubMessage=new c.Signal(this),this._anyMessage=new c.Signal(this),this._unhandledMessage=new c.Signal(this),this._displayIdToParentIds=new Map,this._msgIdToDisplayIds=new Map,this._msgChain=Promise.resolve(),this._noOp=()=>{},this._name=e.model.name,this._id=e.model.id,this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:l.ServerConnection.makeSettings(),this._clientId=null!==(n=e.clientId)&&void 0!==n?n:a.UUID.uuid4(),this._username=null!==(r=e.username)&&void 0!==r?r:"",this.handleComms=null===(i=e.handleComms)||void 0===i||i,this._createSocket()}get disposed(){return this._disposed}get statusChanged(){return this._statusChanged}get connectionStatusChanged(){return this._connectionStatusChanged}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get model(){return{id:this.id,name:this.name}}get anyMessage(){return this._anyMessage}get id(){return this._id}get name(){return this._name}get username(){return this._username}get clientId(){return this._clientId}get status(){return this._status}get connectionStatus(){return this._connectionStatus}get isDisposed(){return this._isDisposed}get info(){return this._info.promise}get spec(){return this._specPromise||(this._specPromise=g.KernelSpecAPI.getSpecs(this.serverSettings).then((e=>e.kernelspecs[this._name]))),this._specPromise}clone(e={}){return new v(Object.assign({model:this.model,username:this.username,serverSettings:this.serverSettings,handleComms:!1},e))}dispose(){this.isDisposed||(this._isDisposed=!0,this._disposed.emit(),this._updateConnectionStatus("disconnected"),this._clearKernelState(),this._pendingMessages=[],this._clearSocket(),c.Signal.clearData(this))}sendShellMessage(e,t=!1,n=!0){return this._sendKernelShellControl(p.KernelShellFutureHandler,e,t,n)}sendControlMessage(e,t=!1,n=!0){return this._sendKernelShellControl(p.KernelControlFutureHandler,e,t,n)}_sendKernelShellControl(e,t,n=!1,r=!0){this._sendMessage(t),this._anyMessage.emit({msg:t,direction:"send"});const i=new e((()=>{const e=t.header.msg_id;this._futures.delete(e);const n=this._msgIdToDisplayIds.get(e);n&&(n.forEach((t=>{const n=this._displayIdToParentIds.get(t);if(n){const r=n.indexOf(e);if(-1===r)return;1===n.length?this._displayIdToParentIds.delete(t):(n.splice(r,1),this._displayIdToParentIds.set(t,n))}})),this._msgIdToDisplayIds.delete(e))}),t,n,r,this);return this._futures.set(t.header.msg_id,i),i}_sendMessage(e,t=!0){if("dead"===this.status)throw new Error("Kernel is dead");if((""===this._kernelSession||this._kernelSession===y)&&d.isInfoRequestMsg(e)){if("connected"===this.connectionStatus)return void this._ws.send(h.serialize(e));throw new Error("Could not send message: status is not connected")}if(t&&this._pendingMessages.length>0)this._pendingMessages.push(e);else if("connected"===this.connectionStatus&&this._kernelSession!==y)this._ws.send(h.serialize(e));else{if(!t)throw new Error("Could not send message");this._pendingMessages.push(e)}}async interrupt(){if("dead"===this.status)throw new Error("Kernel is dead");return m.interruptKernel(this.id,this.serverSettings)}async restart(){if("dead"===this.status)throw new Error("Kernel is dead");this._updateStatus("restarting"),this._clearKernelState(),this._kernelSession=y,await m.restartKernel(this.id,this.serverSettings),await this.reconnect()}reconnect(){this._errorIfDisposed();const e=new a.PromiseDelegate,t=(n,r)=>{"connected"===r?(e.resolve(),this.connectionStatusChanged.disconnect(t,this)):"disconnected"===r&&(e.reject(new Error("Kernel connection disconnected")),this.connectionStatusChanged.disconnect(t,this))};return this.connectionStatusChanged.connect(t,this),this._reconnectAttempt=0,this._reconnect(),e.promise}async shutdown(){"dead"!==this.status&&await m.shutdownKernel(this.id,this.serverSettings),this.handleShutdown()}handleShutdown(){this._updateStatus("dead"),this.dispose()}async requestKernelInfo(){const e=d.createMessage({msgType:"kernel_info_request",channel:"shell",username:this._username,session:this._clientId,content:{}});let t;try{t=await b.handleShellMessage(this,e)}catch(e){if(this.isDisposed)return;throw e}if(this._errorIfDisposed(),t)return void 0===t.content.status&&(t.content.status="ok"),"ok"!==t.content.status?(this._info.reject("Kernel info reply errored"),t):(this._info.resolve(t.content),this._kernelSession=t.header.session,t)}requestComplete(e){const t=d.createMessage({msgType:"complete_request",channel:"shell",username:this._username,session:this._clientId,content:e});return b.handleShellMessage(this,t)}requestInspect(e){const t=d.createMessage({msgType:"inspect_request",channel:"shell",username:this._username,session:this._clientId,content:e});return b.handleShellMessage(this,t)}requestHistory(e){const t=d.createMessage({msgType:"history_request",channel:"shell",username:this._username,session:this._clientId,content:e});return b.handleShellMessage(this,t)}requestExecute(e,t=!0,n){const r=d.createMessage({msgType:"execute_request",channel:"shell",username:this._username,session:this._clientId,content:Object.assign(Object.assign({},{silent:!1,store_history:!0,user_expressions:{},allow_stdin:!0,stop_on_error:!1}),e),metadata:n});return this.sendShellMessage(r,!0,t)}requestDebug(e,t=!0){const n=d.createMessage({msgType:"debug_request",channel:"control",username:this._username,session:this._clientId,content:e});return this.sendControlMessage(n,!0,t)}requestIsComplete(e){const t=d.createMessage({msgType:"is_complete_request",channel:"shell",username:this._username,session:this._clientId,content:e});return b.handleShellMessage(this,t)}requestCommInfo(e){const t=d.createMessage({msgType:"comm_info_request",channel:"shell",username:this._username,session:this._clientId,content:e});return b.handleShellMessage(this,t)}sendInputReply(e){const t=d.createMessage({msgType:"input_reply",channel:"stdin",username:this._username,session:this._clientId,content:e});this._sendMessage(t),this._anyMessage.emit({msg:t,direction:"send"})}createComm(e,t=a.UUID.uuid4()){if(!this.handleComms)throw new Error("Comms are disabled on this kernel connection");if(this._comms.has(t))throw new Error("Comm is already created");const n=new u.CommHandler(e,t,this,(()=>{this._unregisterComm(t)}));return this._comms.set(t,n),n}hasComm(e){return this._comms.has(e)}registerCommTarget(e,t){this.handleComms&&(this._targetRegistry[e]=t)}removeCommTarget(e,t){this.handleComms&&(this.isDisposed||this._targetRegistry[e]!==t||delete this._targetRegistry[e])}registerMessageHook(e,t){var n;const r=null===(n=this._futures)||void 0===n?void 0:n.get(e);r&&r.registerMessageHook(t)}removeMessageHook(e,t){var n;const r=null===(n=this._futures)||void 0===n?void 0:n.get(e);r&&r.removeMessageHook(t)}async _handleDisplayId(e,t){var n,r;const i=t.parent_header.msg_id;let o=this._displayIdToParentIds.get(e);if(o){const e={header:a.JSONExt.deepCopy(t.header),parent_header:a.JSONExt.deepCopy(t.parent_header),metadata:a.JSONExt.deepCopy(t.metadata),content:a.JSONExt.deepCopy(t.content),channel:t.channel,buffers:t.buffers?t.buffers.slice():[]};e.header.msg_type="update_display_data",await Promise.all(o.map((async t=>{const n=this._futures&&this._futures.get(t);n&&await n.handleMsg(e)})))}if("update_display_data"===t.header.msg_type)return!0;o=null!==(n=this._displayIdToParentIds.get(e))&&void 0!==n?n:[],-1===o.indexOf(i)&&o.push(i),this._displayIdToParentIds.set(e,o);const s=null!==(r=this._msgIdToDisplayIds.get(i))&&void 0!==r?r:[];return-1===s.indexOf(i)&&s.push(i),this._msgIdToDisplayIds.set(i,s),!1}_clearSocket(){null!==this._ws&&(this._ws.onopen=this._noOp,this._ws.onclose=this._noOp,this._ws.onerror=this._noOp,this._ws.onmessage=this._noOp,this._ws.close(),this._ws=null)}_updateStatus(e){this._status!==e&&"dead"!==this._status&&(this._status=e,b.logKernelStatus(this),this._statusChanged.emit(e),"dead"===e&&this.dispose())}_sendPending(){for(;"connected"===this.connectionStatus&&this._kernelSession!==y&&this._pendingMessages.length>0;)this._sendMessage(this._pendingMessages[0],!1),this._pendingMessages.shift()}_clearKernelState(){this._kernelSession="",this._pendingMessages=[],this._futures.forEach((e=>{e.dispose()})),this._comms.forEach((e=>{e.dispose()})),this._msgChain=Promise.resolve(),this._futures=new Map,this._comms=new Map,this._displayIdToParentIds.clear(),this._msgIdToDisplayIds.clear()}_assertCurrentMessage(e){if(this._errorIfDisposed(),e.header.session!==this._kernelSession)throw new Error(`Canceling handling of old message: ${e.header.msg_type}`)}async _handleCommOpen(e){this._assertCurrentMessage(e);const t=e.content,n=new u.CommHandler(t.target_name,t.comm_id,this,(()=>{this._unregisterComm(t.comm_id)}));this._comms.set(t.comm_id,n);try{const r=await b.loadObject(t.target_name,t.target_module,this._targetRegistry);await r(n,e)}catch(e){throw n.close(),console.error("Exception opening new comm"),e}}async _handleCommClose(e){this._assertCurrentMessage(e);const t=e.content,n=this._comms.get(t.comm_id);if(!n)return void console.error("Comm not found for comm id "+t.comm_id);this._unregisterComm(n.commId);const r=n.onClose;r&&await r(e),n.dispose()}async _handleCommMsg(e){this._assertCurrentMessage(e);const t=e.content,n=this._comms.get(t.comm_id);if(!n)return;const r=n.onMsg;r&&await r(e)}_unregisterComm(e){this._comms.delete(e)}_updateConnectionStatus(e){if(this._connectionStatus!==e){if(this._connectionStatus=e,"connecting"!==e&&(this._reconnectAttempt=0,clearTimeout(this._reconnectTimeout)),"dead"!==this.status)if("connected"===e){let e=this._kernelSession===y,t=this.requestKernelInfo(),n=!1,r=()=>{n||(n=!0,e&&this._kernelSession===y&&(this._kernelSession=""),clearTimeout(i),this._pendingMessages.length>0&&this._sendPending())};t.then(r);let i=setTimeout(r,3e3)}else this._updateStatus("unknown");this._connectionStatusChanged.emit(e)}}async _handleMessage(e){var t,n;let r=!1;if(e.parent_header&&"iopub"===e.channel&&(d.isDisplayDataMsg(e)||d.isUpdateDisplayDataMsg(e)||d.isExecuteResultMsg(e))){const n=(null!==(t=e.content.transient)&&void 0!==t?t:{}).display_id;n&&(r=await this._handleDisplayId(n,e),this._assertCurrentMessage(e))}if(!r&&e.parent_header){const t=e.parent_header,r=null===(n=this._futures)||void 0===n?void 0:n.get(t.msg_id);if(r)await r.handleMsg(e),this._assertCurrentMessage(e);else{const n=t.session===this.clientId;"iopub"!==e.channel&&n&&this._unhandledMessage.emit(e)}}if("iopub"===e.channel){switch(e.header.msg_type){case"status":{const t=e.content.execution_state;"restarting"===t&&Promise.resolve().then((async()=>{this._updateStatus("autorestarting"),this._clearKernelState(),await this.reconnect()})),this._updateStatus(t);break}case"comm_open":this.handleComms&&await this._handleCommOpen(e);break;case"comm_msg":this.handleComms&&await this._handleCommMsg(e);break;case"comm_close":this.handleComms&&await this._handleCommClose(e)}this.isDisposed||(this._assertCurrentMessage(e),this._iopubMessage.emit(e))}}_reconnect(){if(this._errorIfDisposed(),clearTimeout(this._reconnectTimeout),this._reconnectAttempt<this._reconnectLimit){this._updateConnectionStatus("connecting");const e=b.getRandomIntInclusive(0,1e3*(Math.pow(2,this._reconnectAttempt)-1));console.warn(`Connection lost, reconnecting in ${Math.floor(e/1e3)} seconds.`),this._reconnectTimeout=setTimeout(this._createSocket,e),this._reconnectAttempt+=1}else this._updateConnectionStatus("disconnected");this._clearSocket()}_errorIfDisposed(){if(this.isDisposed)throw new Error("Kernel connection is disposed")}}var b;t.KernelConnection=v,function(e){e.logKernelStatus=function(e){switch(e.status){case"idle":case"busy":case"unknown":return;default:console.debug(`Kernel: ${e.status} (${e.id})`)}},e.handleShellMessage=async function(e,t){return e.sendShellMessage(t,!0).done},e.loadObject=function(e,t,n){return new Promise(((r,i)=>{if(t){if("undefined"==typeof requirejs)throw new Error("requirejs not found");requirejs([t],(n=>{void 0===n[e]?i(new Error(`Object '${e}' not found in module '${t}'`)):r(n[e])}),i)}else(null==n?void 0:n[e])?r(n[e]):i(new Error(`Object '${e}' not found in registry`))}))},e.getRandomIntInclusive=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}}(b||(b={}))},38707:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelShellFutureHandler=t.KernelControlFutureHandler=t.KernelFutureHandler=void 0;const s=n(95082),a=n(70725),c=o(n(75253));class l extends a.DisposableDelegate{constructor(e,t,n,r,i){super(e),this._status=0,this._stdin=u.noOp,this._iopub=u.noOp,this._reply=u.noOp,this._done=new s.PromiseDelegate,this._hooks=new u.HookList,this._disposeOnDone=!0,this._msg=t,n||this._setFlag(u.KernelFutureFlag.GotReply),this._disposeOnDone=r,this._kernel=i}get msg(){return this._msg}get done(){return this._done.promise}get onReply(){return this._reply}set onReply(e){this._reply=e}get onIOPub(){return this._iopub}set onIOPub(e){this._iopub=e}get onStdin(){return this._stdin}set onStdin(e){this._stdin=e}registerMessageHook(e){if(this.isDisposed)throw new Error("Kernel future is disposed");this._hooks.add(e)}removeMessageHook(e){this.isDisposed||this._hooks.remove(e)}sendInputReply(e){this._kernel.sendInputReply(e)}dispose(){this._stdin=u.noOp,this._iopub=u.noOp,this._reply=u.noOp,this._hooks=null,this._testFlag(u.KernelFutureFlag.IsDone)||(this._done.promise.catch((()=>{})),this._done.reject(new Error(`Canceled future for ${this.msg.header.msg_type} message before replies were done`))),super.dispose()}async handleMsg(e){switch(e.channel){case"control":case"shell":e.channel===this.msg.channel&&e.parent_header.msg_id===this.msg.header.msg_id&&await this._handleReply(e);break;case"stdin":await this._handleStdin(e);break;case"iopub":await this._handleIOPub(e)}}async _handleReply(e){const t=this._reply;t&&await t(e),this._replyMsg=e,this._setFlag(u.KernelFutureFlag.GotReply),this._testFlag(u.KernelFutureFlag.GotIdle)&&this._handleDone()}async _handleStdin(e){const t=this._stdin;t&&await t(e)}async _handleIOPub(e){const t=await this._hooks.process(e),n=this._iopub;t&&n&&await n(e),c.isStatusMsg(e)&&"idle"===e.content.execution_state&&(this._setFlag(u.KernelFutureFlag.GotIdle),this._testFlag(u.KernelFutureFlag.GotReply)&&this._handleDone())}_handleDone(){this._testFlag(u.KernelFutureFlag.IsDone)||(this._setFlag(u.KernelFutureFlag.IsDone),this._done.resolve(this._replyMsg),this._disposeOnDone&&this.dispose())}_testFlag(e){return 0!=(this._status&e)}_setFlag(e){this._status|=e}}var u;t.KernelFutureHandler=l,t.KernelControlFutureHandler=class extends l{},t.KernelShellFutureHandler=class extends l{},function(e){e.noOp=()=>{};const t="function"==typeof requestAnimationFrame?requestAnimationFrame:setImmediate;let n;e.HookList=class{constructor(){this._hooks=[]}add(e){this.remove(e),this._hooks.push(e)}remove(e){const t=this._hooks.indexOf(e);t>=0&&(this._hooks[t]=null,this._scheduleCompact())}async process(e){await this._processing;const t=new s.PromiseDelegate;let n;this._processing=t.promise;for(let r=this._hooks.length-1;r>=0;r--){const i=this._hooks[r];if(null!==i){try{n=await i(e)}catch(e){n=!0,console.error(e)}if(!1===n)return t.resolve(void 0),!1}}return t.resolve(void 0),!0}_scheduleCompact(){this._compactScheduled||(this._compactScheduled=!0,t((()=>{this._processing=this._processing.then((()=>{this._compactScheduled=!1,this._compact()}))})))}_compact(){let e=0;for(let t=0,n=this._hooks.length;t<n;t++){const n=this._hooks[t];null===this._hooks[t]?e++:this._hooks[t-e]=n}this._hooks.length-=e}},function(e){e[e.GotReply=1]="GotReply",e[e.GotIdle=2]="GotIdle",e[e.IsDone=4]="IsDone",e[e.DisposeOnDone=8]="DisposeOnDone"}(n=e.KernelFutureFlag||(e.KernelFutureFlag={}))}(u||(u={}))},62604:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelAPI=t.KernelMessage=t.Kernel=void 0;const a=o(n(38868));t.Kernel=a;const c=o(n(75253));t.KernelMessage=c;const l=o(n(2183));t.KernelAPI=l,s(n(71825),t)},38868:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},71825:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelManager=void 0;const r=n(35259),i=n(23114),o=n(4016),s=n(76240),a=n(50591),c=n(2183),l=n(19883);class u extends a.BaseManager{constructor(e={}){var t;super(e),this._isReady=!1,this._kernelConnections=new Set,this._models=new Map,this._runningChanged=new o.Signal(this),this._connectionFailure=new o.Signal(this),this._pollModels=new i.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:1e4,backoff:!0,max:3e5},name:"@jupyterlab/services:KernelManager#models",standby:null!==(t=e.standby)&&void 0!==t?t:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._models.clear(),this._kernelConnections.forEach((e=>e.dispose())),this._pollModels.dispose(),super.dispose())}connectTo(e){var t;const{id:n}=e.model;let r=null===(t=e.handleComms)||void 0===t||t;if(void 0===e.handleComms)for(const e of this._kernelConnections)if(e.id===n&&e.handleComms){r=!1;break}const i=new l.KernelConnection(Object.assign(Object.assign({handleComms:r},e),{serverSettings:this.serverSettings}));return this._onStarted(i),this._models.has(n)||this.refreshRunning().catch((()=>{})),i}running(){return r.iter([...this._models.values()])}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(e={},t={}){const n=await c.startNew(e,this.serverSettings);return this.connectTo(Object.assign(Object.assign({},t),{model:n}))}async shutdown(e){await c.shutdownKernel(e,this.serverSettings),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all([...this._models.keys()].map((e=>c.shutdownKernel(e,this.serverSettings)))),await this.refreshRunning()}async findById(e){return this._models.has(e)||await this.refreshRunning(),this._models.get(e)}async requestRunning(){var e,t;let n;try{n=await c.listRunning(this.serverSettings)}catch(n){throw(n instanceof s.ServerConnection.NetworkError||503===(null===(e=n.response)||void 0===e?void 0:e.status)||424===(null===(t=n.response)||void 0===t?void 0:t.status))&&this._connectionFailure.emit(n),n}this.isDisposed||this._models.size===n.length&&r.every(n,(e=>{const t=this._models.get(e.id);return!!t&&t.name===e.name}))||(this._models=new Map(n.map((e=>[e.id,e]))),this._kernelConnections.forEach((e=>{this._models.has(e.id)||e.handleShutdown()})),this._runningChanged.emit(n))}_onStarted(e){this._kernelConnections.add(e),e.statusChanged.connect(this._onStatusChanged,this),e.disposed.connect(this._onDisposed,this)}_onDisposed(e){this._kernelConnections.delete(e),this.refreshRunning().catch((()=>{}))}_onStatusChanged(e,t){"dead"===t&&this.refreshRunning().catch((()=>{}))}}t.KernelManager=u},75253:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInputReplyMsg=t.isInputRequestMsg=t.isDebugReplyMsg=t.isDebugRequestMsg=t.isExecuteReplyMsg=t.isInfoRequestMsg=t.isCommMsgMsg=t.isCommCloseMsg=t.isCommOpenMsg=t.isDebugEventMsg=t.isClearOutputMsg=t.isStatusMsg=t.isErrorMsg=t.isExecuteResultMsg=t.isExecuteInputMsg=t.isUpdateDisplayDataMsg=t.isDisplayDataMsg=t.isStreamMsg=t.createMessage=void 0;const r=n(95082);t.createMessage=function(e){var t,n,i,o,s;return{buffers:null!==(t=e.buffers)&&void 0!==t?t:[],channel:e.channel,content:e.content,header:{date:(new Date).toISOString(),msg_id:null!==(n=e.msgId)&&void 0!==n?n:r.UUID.uuid4(),msg_type:e.msgType,session:e.session,username:null!==(i=e.username)&&void 0!==i?i:"",version:"5.2"},metadata:null!==(o=e.metadata)&&void 0!==o?o:{},parent_header:null!==(s=e.parentHeader)&&void 0!==s?s:{}}},t.isStreamMsg=function(e){return"stream"===e.header.msg_type},t.isDisplayDataMsg=function(e){return"display_data"===e.header.msg_type},t.isUpdateDisplayDataMsg=function(e){return"update_display_data"===e.header.msg_type},t.isExecuteInputMsg=function(e){return"execute_input"===e.header.msg_type},t.isExecuteResultMsg=function(e){return"execute_result"===e.header.msg_type},t.isErrorMsg=function(e){return"error"===e.header.msg_type},t.isStatusMsg=function(e){return"status"===e.header.msg_type},t.isClearOutputMsg=function(e){return"clear_output"===e.header.msg_type},t.isDebugEventMsg=function(e){return"debug_event"===e.header.msg_type},t.isCommOpenMsg=function(e){return"comm_open"===e.header.msg_type},t.isCommCloseMsg=function(e){return"comm_close"===e.header.msg_type},t.isCommMsgMsg=function(e){return"comm_msg"===e.header.msg_type},t.isInfoRequestMsg=function(e){return"kernel_info_request"===e.header.msg_type},t.isExecuteReplyMsg=function(e){return"execute_reply"===e.header.msg_type},t.isDebugRequestMsg=function(e){return"debug_request"===e.header.msg_type},t.isDebugReplyMsg=function(e){return"debug_reply"===e.header.msg_type},t.isInputRequestMsg=function(e){return"input_request"===e.header.msg_type},t.isInputReplyMsg=function(e){return"input_reply"===e.header.msg_type}},2183:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getKernelModel=t.shutdownKernel=t.interruptKernel=t.restartKernel=t.startNew=t.listRunning=t.KERNEL_SERVICE_URL=void 0;const r=n(28477),i=n(79622),o=n(96512);t.KERNEL_SERVICE_URL="api/kernels",t.listRunning=async function(e=r.ServerConnection.makeSettings()){const n=i.URLExt.join(e.baseUrl,t.KERNEL_SERVICE_URL),s=await r.ServerConnection.makeRequest(n,{},e);if(200!==s.status)throw await r.ServerConnection.ResponseError.create(s);const a=await s.json();return o.validateModels(a),a},t.startNew=async function(e={},n=r.ServerConnection.makeSettings()){const s=i.URLExt.join(n.baseUrl,t.KERNEL_SERVICE_URL),a={method:"POST",body:JSON.stringify(e)},c=await r.ServerConnection.makeRequest(s,a,n);if(201!==c.status)throw await r.ServerConnection.ResponseError.create(c);const l=await c.json();return o.validateModel(l),l},t.restartKernel=async function(e,n=r.ServerConnection.makeSettings()){const s=i.URLExt.join(n.baseUrl,t.KERNEL_SERVICE_URL,encodeURIComponent(e),"restart"),a=await r.ServerConnection.makeRequest(s,{method:"POST"},n);if(200!==a.status)throw await r.ServerConnection.ResponseError.create(a);const c=await a.json();o.validateModel(c)},t.interruptKernel=async function(e,n=r.ServerConnection.makeSettings()){const o=i.URLExt.join(n.baseUrl,t.KERNEL_SERVICE_URL,encodeURIComponent(e),"interrupt"),s=await r.ServerConnection.makeRequest(o,{method:"POST"},n);if(204!==s.status)throw await r.ServerConnection.ResponseError.create(s)},t.shutdownKernel=async function(e,n=r.ServerConnection.makeSettings()){const o=i.URLExt.join(n.baseUrl,t.KERNEL_SERVICE_URL,encodeURIComponent(e)),s=await r.ServerConnection.makeRequest(o,{method:"DELETE"},n);if(404===s.status){const t=`The kernel "${e}" does not exist on the server`;console.warn(t)}else if(204!==s.status)throw await r.ServerConnection.ResponseError.create(s)},t.getKernelModel=async function(e,n=r.ServerConnection.makeSettings()){const s=i.URLExt.join(n.baseUrl,t.KERNEL_SERVICE_URL,encodeURIComponent(e)),a=await r.ServerConnection.makeRequest(s,{},n);if(404===a.status)return;if(200!==a.status)throw await r.ServerConnection.ResponseError.create(a);const c=await a.json();return o.validateModel(c),c}},86002:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=t.deserialize=void 0,t.deserialize=function(e){let t;return t="string"==typeof e?JSON.parse(e):function(e){const t=new DataView(e),n=t.getUint32(0),r=[];if(n<2)throw new Error("Invalid incoming Kernel Message");for(let e=1;e<=n;e++)r.push(t.getUint32(4*e));const i=new Uint8Array(e.slice(r[0],r[1])),o=JSON.parse(new TextDecoder("utf8").decode(i));o.buffers=[];for(let t=1;t<n;t++){const n=r[t],i=r[t+1]||e.byteLength;o.buffers.push(new DataView(e.slice(n,i)))}return o}(e),t},t.serialize=function(e){var t;let n;return n=(null===(t=e.buffers)||void 0===t?void 0:t.length)?function(e){const t=[],n=[],r=new TextEncoder;let i=[];void 0!==e.buffers&&(i=e.buffers,delete e.buffers);const o=r.encode(JSON.stringify(e));n.push(o.buffer);for(let e=0;e<i.length;e++){const t=i[e];n.push(ArrayBuffer.isView(t)?t.buffer:t)}const s=n.length;t.push(4*(s+1));for(let e=0;e+1<n.length;e++)t.push(t[t.length-1]+n[e].byteLength);const a=new Uint8Array(t[t.length-1]+n[n.length-1].byteLength),c=new DataView(a.buffer);c.setUint32(0,s);for(let e=0;e<t.length;e++)c.setUint32(4*(e+1),t[e]);for(let e=0;e<n.length;e++)a.set(new Uint8Array(n[e]),t[e]);return a.buffer}(e):JSON.stringify(e),n}},96512:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateModels=t.validateModel=t.validateMessage=void 0;const r=n(46901),i=["username","version","session","msg_id","msg_type"],o={stream:{name:"string",text:"string"},display_data:{data:"object",metadata:"object"},execute_input:{code:"string",execution_count:"number"},execute_result:{execution_count:"number",data:"object",metadata:"object"},error:{ename:"string",evalue:"string",traceback:"object"},status:{execution_state:["string",["starting","idle","busy","restarting","dead"]]},clear_output:{wait:"boolean"},comm_open:{comm_id:"string",target_name:"string",data:"object"},comm_msg:{comm_id:"string",data:"object"},comm_close:{comm_id:"string"},shutdown_reply:{restart:"boolean"}};function s(e){r.validateProperty(e,"name","string"),r.validateProperty(e,"id","string")}t.validateMessage=function(e){r.validateProperty(e,"metadata","object"),r.validateProperty(e,"content","object"),r.validateProperty(e,"channel","string"),function(e){for(let t=0;t<i.length;t++)r.validateProperty(e,i[t],"string")}(e.header),"iopub"===e.channel&&function(e){if("iopub"===e.channel){const t=o[e.header.msg_type];if(void 0===t)return;const n=Object.keys(t),i=e.content;for(let e=0;e<n.length;e++){let o=t[n[e]];Array.isArray(o)||(o=[o]),r.validateProperty(i,n[e],...o)}}}(e)},t.validateModel=s,t.validateModels=function(e){if(!Array.isArray(e))throw new Error("Invalid kernel list");e.forEach((e=>s(e)))}},12902:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelSpecAPI=t.KernelSpec=void 0;const a=o(n(79453));t.KernelSpec=a;const c=o(n(33415));t.KernelSpecAPI=c,s(n(54936),t)},79453:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},54936:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelSpecManager=void 0;const s=n(95082),a=n(23114),c=n(4016),l=o(n(33415)),u=n(50591);class d extends u.BaseManager{constructor(e={}){var t;super(e),this._isReady=!1,this._connectionFailure=new c.Signal(this),this._specs=null,this._specsChanged=new c.Signal(this),this._ready=Promise.all([this.requestSpecs()]).then((e=>{})).catch((e=>{})).then((()=>{this.isDisposed||(this._isReady=!0)})),this._pollSpecs=new a.Poll({auto:!1,factory:()=>this.requestSpecs(),frequency:{interval:61e3,backoff:!0,max:3e5},name:"@jupyterlab/services:KernelSpecManager#specs",standby:null!==(t=e.standby)&&void 0!==t?t:"when-hidden"}),this.ready.then((()=>{this._pollSpecs.start()}))}get isReady(){return this._isReady}get ready(){return this._ready}get specs(){return this._specs}get specsChanged(){return this._specsChanged}get connectionFailure(){return this._connectionFailure}dispose(){this._pollSpecs.dispose(),super.dispose()}async refreshSpecs(){await this._pollSpecs.refresh(),await this._pollSpecs.tick}async requestSpecs(){const e=await l.getSpecs(this.serverSettings);this.isDisposed||s.JSONExt.deepEqual(e,this._specs)||(this._specs=e,this._specsChanged.emit(e))}}t.KernelSpecManager=d},33415:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSpecs=void 0;const r=n(28477),i=n(73103),o=n(79622);t.getSpecs=async function(e=r.ServerConnection.makeSettings()){const t=o.URLExt.join(e.baseUrl,"api/kernelspecs"),n=await r.ServerConnection.makeRequest(t,{},e);if(200!==n.status)throw await r.ServerConnection.ResponseError.create(n);const s=await n.json();return i.validateSpecModels(s)}},73103:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSpecModels=t.validateSpecModel=void 0;const r=n(46901);function i(e){const t=e.spec;if(!t)throw new Error("Invalid kernel spec");r.validateProperty(e,"name","string"),r.validateProperty(e,"resources","object"),r.validateProperty(t,"language","string"),r.validateProperty(t,"display_name","string"),r.validateProperty(t,"argv","array");let n=null;t.hasOwnProperty("metadata")&&(r.validateProperty(t,"metadata","object"),n=t.metadata);let i=null;return t.hasOwnProperty("env")&&(r.validateProperty(t,"env","object"),i=t.env),{name:e.name,resources:e.resources,language:t.language,display_name:t.display_name,argv:t.argv,metadata:n,env:i}}t.validateSpecModel=i,t.validateSpecModels=function(e){if(!e.hasOwnProperty("kernelspecs"))throw new Error("No kernelspecs found");let t=Object.keys(e.kernelspecs);const n=Object.create(null);let r=e.default;for(let r=0;r<t.length;r++){const o=e.kernelspecs[t[r]];try{n[t[r]]=i(o)}catch(e){console.warn(`Removing errant kernel spec: ${t[r]}`)}}if(t=Object.keys(n),!t.length)throw new Error("No valid kernelspecs found");return r&&"string"==typeof r&&r in n||(r=t[0],console.warn(`Default kernel not found, using '${t[0]}'`)),{default:r,kernelspecs:n}}},93079:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceManager=void 0;const r=n(4016),i=n(33227),o=n(4574),s=n(63644),a=n(12902),c=n(41874),l=n(92726),u=n(93247),d=n(28477),p=n(45399),h=n(62604);t.ServiceManager=class{constructor(e={}){var t,n;this._isDisposed=!1,this._connectionFailure=new r.Signal(this),this._isReady=!1;const f=e.defaultDrive,g=null!==(t=e.serverSettings)&&void 0!==t?t:d.ServerConnection.makeSettings(),m={defaultDrive:f,serverSettings:g,standby:null!==(n=e.standby)&&void 0!==n?n:"when-hidden"},y=new h.KernelManager(m);this.serverSettings=g,this.contents=new s.ContentsManager(m),this.sessions=new c.SessionManager(Object.assign(Object.assign({},m),{kernelManager:y})),this.settings=new l.SettingManager(m),this.terminals=new u.TerminalManager(m),this.builder=new i.BuildManager(m),this.workspaces=new p.WorkspaceManager(m),this.nbconvert=new o.NbConvertManager(m),this.kernelspecs=new a.KernelSpecManager(m),this.kernelspecs.connectionFailure.connect(this._onConnectionFailure,this),this.sessions.connectionFailure.connect(this._onConnectionFailure,this),this.terminals.connectionFailure.connect(this._onConnectionFailure,this);const v=[this.sessions.ready,this.kernelspecs.ready];this.terminals.isAvailable()&&v.push(this.terminals.ready),this._readyPromise=Promise.all(v).then((()=>{this._isReady=!0}))}get connectionFailure(){return this._connectionFailure}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,r.Signal.clearData(this),this.contents.dispose(),this.sessions.dispose(),this.terminals.dispose())}get isReady(){return this._isReady}get ready(){return this._readyPromise}_onConnectionFailure(e,t){this._connectionFailure.emit(t)}}},4574:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NbConvertManager=void 0;const r=n(79622),i=n(28477);t.NbConvertManager=class{constructor(e={}){var t;this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:i.ServerConnection.makeSettings()}async getExportFormats(){const e=this.serverSettings.baseUrl,t=r.URLExt.join(e,"api/nbconvert"),{serverSettings:n}=this,o=await i.ServerConnection.makeRequest(t,{},n);if(200!==o.status)throw await i.ServerConnection.ResponseError.create(o);const s=await o.json(),a={};return Object.keys(s).forEach((function(e){const t=s[e].output_mimetype;a[e]={output_mimetype:t}})),a}}},28477:(e,t,n)=>{"use strict";var r,i,o,s=n(34155);Object.defineProperty(t,"__esModule",{value:!0}),t.ServerConnection=void 0;const a=n(79622);let c,l,u,d;if("undefined"==typeof window){const e=n(21763);c=null!==(r=n.g.fetch)&&void 0!==r?r:e,u=null!==(i=n.g.Request)&&void 0!==i?i:e.Request,l=null!==(o=n.g.Headers)&&void 0!==o?o:e.Headers,d=n(12447)}else c=fetch,u=Request,l=Headers,d=WebSocket;var p,h;!function(e){e.makeSettings=function(e){return h.makeSettings(e)},e.makeRequest=function(e,t,n){return h.handleRequest(e,t,n)};class t extends Error{constructor(e,t=`Invalid response: ${e.status} ${e.statusText}`,n=""){super(t),this.response=e,this.traceback=n}static async create(e){try{const n=await e.json();return n.traceback&&console.error(n.traceback),n.message?new t(e,n.message):new t(e)}catch(n){return console.debug(n),new t(e)}}}e.ResponseError=t;class n extends TypeError{constructor(e){super(e.message),this.stack=e.stack}}e.NetworkError=n}(p=t.ServerConnection||(t.ServerConnection={})),function(e){e.makeSettings=function(e={}){const t=a.PageConfig.getBaseUrl(),n=a.PageConfig.getWsUrl(),r=a.URLExt.normalize(e.baseUrl)||t;let i=e.wsUrl;return i||r!==t||(i=n),i||0!==r.indexOf("http")||(i="ws"+r.slice(4)),i=null!=i?i:n,Object.assign(Object.assign({init:{cache:"no-store",credentials:"same-origin"},fetch:c,Headers:l,Request:u,WebSocket:d,token:a.PageConfig.getToken(),appUrl:a.PageConfig.getOption("appUrl"),appendToken:"undefined"==typeof window||void 0!==s.env.JEST_WORKER_ID||a.URLExt.getHostName(t)!==a.URLExt.getHostName(i)},e),{baseUrl:r,wsUrl:i})},e.handleRequest=function(e,t,n){var r;if(0!==e.indexOf(n.baseUrl))throw new Error("Can only be used for notebook server requests");"no-store"===(null!==(r=t.cache)&&void 0!==r?r:n.init.cache)&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());const i=new n.Request(e,Object.assign(Object.assign({},n.init),t));let o=!1;if(n.token&&(o=!0,i.headers.append("Authorization",`token ${n.token}`)),"undefined"!=typeof document&&(null===document||void 0===document?void 0:document.cookie)){const e=function(e){const t=document.cookie.match("\\b_xsrf=([^;]*)\\b");return null==t?void 0:t[1]}();void 0!==e&&(o=!0,i.headers.append("X-XSRFToken",e))}return!i.headers.has("Content-Type")&&o&&i.headers.set("Content-Type","application/json"),n.fetch.call(null,i).catch((e=>{throw new p.NetworkError(e)}))}}(h||(h={}))},35410:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionConnection=void 0;const r=n(4016),i=n(76240),o=n(56807),s=n(95082);t.SessionConnection=class{constructor(e){var t,n,o,a;this._id="",this._path="",this._name="",this._type="",this._kernel=null,this._isDisposed=!1,this._disposed=new r.Signal(this),this._kernelChanged=new r.Signal(this),this._statusChanged=new r.Signal(this),this._connectionStatusChanged=new r.Signal(this),this._iopubMessage=new r.Signal(this),this._unhandledMessage=new r.Signal(this),this._anyMessage=new r.Signal(this),this._propertyChanged=new r.Signal(this),this._id=e.model.id,this._name=e.model.name,this._path=e.model.path,this._type=e.model.type,this._username=null!==(t=e.username)&&void 0!==t?t:"",this._clientId=null!==(n=e.clientId)&&void 0!==n?n:s.UUID.uuid4(),this._connectToKernel=e.connectToKernel,this._kernelConnectionOptions=null!==(o=e.kernelConnectionOptions)&&void 0!==o?o:{},this.serverSettings=null!==(a=e.serverSettings)&&void 0!==a?a:i.ServerConnection.makeSettings(),this.setupKernel(e.model.kernel)}get disposed(){return this._disposed}get kernelChanged(){return this._kernelChanged}get statusChanged(){return this._statusChanged}get connectionStatusChanged(){return this._connectionStatusChanged}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get anyMessage(){return this._anyMessage}get propertyChanged(){return this._propertyChanged}get id(){return this._id}get kernel(){return this._kernel}get path(){return this._path}get type(){return this._type}get name(){return this._name}get model(){return{id:this.id,kernel:this.kernel&&{id:this.kernel.id,name:this.kernel.name},path:this._path,type:this._type,name:this._name}}get isDisposed(){return this._isDisposed}update(e){const t=this.model;if(this._path=e.path,this._name=e.name,this._type=e.type,null===this._kernel&&null!==e.kernel||null!==this._kernel&&null===e.kernel||null!==this._kernel&&null!==e.kernel&&this._kernel.id!==e.kernel.id){null!==this._kernel&&this._kernel.dispose();const t=this._kernel||null;this.setupKernel(e.kernel);const n=this._kernel||null;this._kernelChanged.emit({name:"kernel",oldValue:t,newValue:n})}this._handleModelChange(t)}dispose(){if(!this.isDisposed){if(this._isDisposed=!0,this._disposed.emit(),this._kernel){this._kernel.dispose();const e=this._kernel;this._kernel=null;const t=this._kernel;this._kernelChanged.emit({name:"kernel",oldValue:e,newValue:t})}r.Signal.clearData(this)}}async setPath(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({path:e})}async setName(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({name:e})}async setType(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({type:e})}async changeKernel(e){if(this.isDisposed)throw new Error("Session is disposed");return await this._patch({kernel:e}),this.kernel}async shutdown(){if(this.isDisposed)throw new Error("Session is disposed");await o.shutdownSession(this.id,this.serverSettings),this.dispose()}setupKernel(e){if(null===e)return void(this._kernel=null);const t=this._connectToKernel(Object.assign(Object.assign({},this._kernelConnectionOptions),{model:e,username:this._username,clientId:this._clientId,serverSettings:this.serverSettings}));this._kernel=t,t.statusChanged.connect(this.onKernelStatus,this),t.connectionStatusChanged.connect(this.onKernelConnectionStatus,this),t.unhandledMessage.connect(this.onUnhandledMessage,this),t.iopubMessage.connect(this.onIOPubMessage,this),t.anyMessage.connect(this.onAnyMessage,this)}onKernelStatus(e,t){this._statusChanged.emit(t)}onKernelConnectionStatus(e,t){this._connectionStatusChanged.emit(t)}onIOPubMessage(e,t){this._iopubMessage.emit(t)}onUnhandledMessage(e,t){this._unhandledMessage.emit(t)}onAnyMessage(e,t){this._anyMessage.emit(t)}async _patch(e){const t=await o.updateSession(Object.assign(Object.assign({},e),{id:this._id}),this.serverSettings);return this.update(t),t}_handleModelChange(e){e.name!==this._name&&this._propertyChanged.emit("name"),e.type!==this._type&&this._propertyChanged.emit("type"),e.path!==this._path&&this._propertyChanged.emit("path")}}},41874:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionAPI=t.Session=void 0;const a=o(n(11372));t.Session=a;const c=o(n(56807));t.SessionAPI=c,s(n(57847),t)},57847:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionManager=void 0;const r=n(35259),i=n(23114),o=n(4016),s=n(28477),a=n(50591),c=n(35410),l=n(56807);class u extends a.BaseManager{constructor(e){var t;super(e),this._isReady=!1,this._sessionConnections=new Set,this._models=new Map,this._runningChanged=new o.Signal(this),this._connectionFailure=new o.Signal(this),this._connectToKernel=e=>this._kernelManager.connectTo(e),this._kernelManager=e.kernelManager,this._pollModels=new i.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:1e4,backoff:!0,max:3e5},name:"@jupyterlab/services:SessionManager#models",standby:null!==(t=e.standby)&&void 0!==t?t:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,await this._kernelManager.ready,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._models.clear(),this._sessionConnections.forEach((e=>e.dispose())),this._pollModels.dispose(),super.dispose())}connectTo(e){const t=new c.SessionConnection(Object.assign(Object.assign({},e),{connectToKernel:this._connectToKernel,serverSettings:this.serverSettings}));return this._onStarted(t),this._models.has(e.model.id)||this.refreshRunning().catch((()=>{})),t}running(){return r.iter([...this._models.values()])}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(e,t={}){const n=await l.startSession(e,this.serverSettings);return await this.refreshRunning(),this.connectTo(Object.assign(Object.assign({},t),{model:n}))}async shutdown(e){await l.shutdownSession(e,this.serverSettings),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all([...this._models.keys()].map((e=>l.shutdownSession(e,this.serverSettings)))),await this.refreshRunning()}async stopIfNeeded(e){try{const t=(await l.listRunning(this.serverSettings)).filter((t=>t.path===e));if(1===t.length){const e=t[0].id;await this.shutdown(e)}}catch(e){}}async findById(e){return this._models.has(e)||await this.refreshRunning(),this._models.get(e)}async findByPath(e){for(const t of this._models.values())if(t.path===e)return t;await this.refreshRunning();for(const t of this._models.values())if(t.path===e)return t}async requestRunning(){var e,t;let n;try{n=await l.listRunning(this.serverSettings)}catch(n){throw(n instanceof s.ServerConnection.NetworkError||503===(null===(e=n.response)||void 0===e?void 0:e.status)||424===(null===(t=n.response)||void 0===t?void 0:t.status))&&this._connectionFailure.emit(n),n}this.isDisposed||this._models.size===n.length&&r.every(n,(e=>{var t,n,r,i;const o=this._models.get(e.id);return!!o&&(null===(t=o.kernel)||void 0===t?void 0:t.id)===(null===(n=e.kernel)||void 0===n?void 0:n.id)&&(null===(r=o.kernel)||void 0===r?void 0:r.name)===(null===(i=e.kernel)||void 0===i?void 0:i.name)&&o.name===e.name&&o.path===e.path&&o.type===e.type}))||(this._models=new Map(n.map((e=>[e.id,e]))),this._sessionConnections.forEach((e=>{this._models.has(e.id)?e.update(this._models.get(e.id)):e.dispose()})),this._runningChanged.emit(n))}_onStarted(e){this._sessionConnections.add(e),e.disposed.connect(this._onDisposed,this),e.propertyChanged.connect(this._onChanged,this),e.kernelChanged.connect(this._onChanged,this)}_onDisposed(e){this._sessionConnections.delete(e),this.refreshRunning().catch((()=>{}))}_onChanged(){this.refreshRunning().catch((()=>{}))}}t.SessionManager=u},56807:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateSession=t.startSession=t.getSessionModel=t.shutdownSession=t.getSessionUrl=t.listRunning=t.SESSION_SERVICE_URL=void 0;const r=n(28477),i=n(79622),o=n(29145);function s(e,n){return i.URLExt.join(e,t.SESSION_SERVICE_URL,n)}t.SESSION_SERVICE_URL="api/sessions",t.listRunning=async function(e=r.ServerConnection.makeSettings()){const n=i.URLExt.join(e.baseUrl,t.SESSION_SERVICE_URL),s=await r.ServerConnection.makeRequest(n,{},e);if(200!==s.status)throw await r.ServerConnection.ResponseError.create(s);const a=await s.json();if(!Array.isArray(a))throw new Error("Invalid Session list");return a.forEach((e=>{o.updateLegacySessionModel(e),o.validateModel(e)})),a},t.getSessionUrl=s,t.shutdownSession=async function(e,t=r.ServerConnection.makeSettings()){var n;const i=s(t.baseUrl,e),o=await r.ServerConnection.makeRequest(i,{method:"DELETE"},t);if(404===o.status){const t=null!==(n=(await o.json()).message)&&void 0!==n?n:`The session "${e}"" does not exist on the server`;console.warn(t)}else{if(410===o.status)throw new r.ServerConnection.ResponseError(o,"The kernel was deleted but the session was not");if(204!==o.status)throw await r.ServerConnection.ResponseError.create(o)}},t.getSessionModel=async function(e,t=r.ServerConnection.makeSettings()){const n=s(t.baseUrl,e),i=await r.ServerConnection.makeRequest(n,{},t);if(200!==i.status)throw await r.ServerConnection.ResponseError.create(i);const a=await i.json();return o.updateLegacySessionModel(a),o.validateModel(a),a},t.startSession=async function(e,n=r.ServerConnection.makeSettings()){const s=i.URLExt.join(n.baseUrl,t.SESSION_SERVICE_URL),a={method:"POST",body:JSON.stringify(e)},c=await r.ServerConnection.makeRequest(s,a,n);if(201!==c.status)throw await r.ServerConnection.ResponseError.create(c);const l=await c.json();return o.updateLegacySessionModel(l),o.validateModel(l),l},t.updateSession=async function(e,t=r.ServerConnection.makeSettings()){const n=s(t.baseUrl,e.id),i={method:"PATCH",body:JSON.stringify(e)},a=await r.ServerConnection.makeRequest(n,i,t);if(200!==a.status)throw await r.ServerConnection.ResponseError.create(a);const c=await a.json();return o.updateLegacySessionModel(c),o.validateModel(c),c}},11372:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},29145:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateModels=t.updateLegacySessionModel=t.validateModel=void 0;const r=n(96512),i=n(46901);function o(e){i.validateProperty(e,"id","string"),i.validateProperty(e,"type","string"),i.validateProperty(e,"name","string"),i.validateProperty(e,"path","string"),i.validateProperty(e,"kernel","object"),r.validateModel(e.kernel)}t.validateModel=o,t.updateLegacySessionModel=function(e){void 0===e.path&&void 0!==e.notebook&&(e.path=e.notebook.path,e.type="notebook",e.name="")},t.validateModels=function(e){if(!Array.isArray(e))throw new Error("Invalid session list");e.forEach((e=>o(e)))}},92726:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingManager=void 0;const r=n(79622),i=n(17266),o=n(28477);class s extends i.DataConnector{constructor(e={}){var t;super(),this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:o.ServerConnection.makeSettings()}async fetch(e){if(!e)throw new Error("Plugin `id` parameter is required for settings fetch.");const{serverSettings:t}=this,{baseUrl:n,appUrl:r}=t,{makeRequest:i,ResponseError:s}=o.ServerConnection,c=n+r,l=a.url(c,e),u=await i(l,{},t);if(200!==u.status)throw await s.create(u);return u.json()}async list(){var e,t;const{serverSettings:n}=this,{baseUrl:r,appUrl:i}=n,{makeRequest:s,ResponseError:c}=o.ServerConnection,l=r+i,u=a.url(l,""),d=await s(u,{},n);if(200!==d.status)throw new c(d);const p=await d.json(),h=null!==(t=null===(e=null==p?void 0:p.settings)||void 0===e?void 0:e.map((e=>(e.data={composite:{},user:{}},e))))&&void 0!==t?t:[];return{ids:h.map((e=>e.id)),values:h}}async save(e,t){const{serverSettings:n}=this,{baseUrl:r,appUrl:i}=n,{makeRequest:s,ResponseError:c}=o.ServerConnection,l=r+i,u=a.url(l,e),d={body:JSON.stringify({raw:t}),method:"PUT"},p=await s(u,d,n);if(204!==p.status)throw new c(p)}}var a;t.SettingManager=s,function(e){e.url=function(e,t){return r.URLExt.join(e,"api/settings",t)}}(a||(a={}))},12447:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=WebSocket},71146:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalConnection=void 0;const r=n(79622),i=n(95082),o=n(4016),s=n(76240),a=n(43286);class c{constructor(e){var t;this._createSocket=()=>{this._errorIfDisposed(),this._clearSocket(),this._updateConnectionStatus("connecting");const e=this._name,t=this.serverSettings;let n=r.URLExt.join(t.wsUrl,"terminals","websocket",encodeURIComponent(e));const i=t.token;t.appendToken&&""!==i&&(n+=`?token=${encodeURIComponent(i)}`),this._ws=new t.WebSocket(n),this._ws.onmessage=this._onWSMessage,this._ws.onclose=this._onWSClose,this._ws.onerror=this._onWSClose},this._onWSMessage=e=>{if(this._isDisposed)return;const t=JSON.parse(e.data);"disconnect"===t[0]&&this.dispose(),"connecting"!==this._connectionStatus?this._messageReceived.emit({type:t[0],content:t.slice(1)}):"setup"===t[0]&&this._updateConnectionStatus("connected")},this._onWSClose=e=>{console.warn(`Terminal websocket closed: ${e.code}`),this.isDisposed||this._reconnect()},this._connectionStatus="connecting",this._connectionStatusChanged=new o.Signal(this),this._isDisposed=!1,this._disposed=new o.Signal(this),this._messageReceived=new o.Signal(this),this._reconnectTimeout=null,this._ws=null,this._noOp=()=>{},this._reconnectLimit=7,this._reconnectAttempt=0,this._pendingMessages=[],this._name=e.model.name,this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:s.ServerConnection.makeSettings(),this._createSocket()}get disposed(){return this._disposed}get messageReceived(){return this._messageReceived}get name(){return this._name}get model(){return{name:this._name}}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,this._disposed.emit(),this._updateConnectionStatus("disconnected"),this._clearSocket(),o.Signal.clearData(this))}send(e){this._sendMessage(e)}_sendMessage(e,t=!0){if(!this._isDisposed&&e.content)if("connected"===this.connectionStatus&&this._ws){const t=[e.type,...e.content];this._ws.send(JSON.stringify(t))}else{if(!t)throw new Error(`Could not send message: ${JSON.stringify(e)}`);this._pendingMessages.push(e)}}_sendPending(){for(;"connected"===this.connectionStatus&&this._pendingMessages.length>0;)this._sendMessage(this._pendingMessages[0],!1),this._pendingMessages.shift()}reconnect(){this._errorIfDisposed();const e=new i.PromiseDelegate,t=(n,r)=>{"connected"===r?(e.resolve(),this.connectionStatusChanged.disconnect(t,this)):"disconnected"===r&&(e.reject(new Error("Terminal connection disconnected")),this.connectionStatusChanged.disconnect(t,this))};return this.connectionStatusChanged.connect(t,this),this._reconnectAttempt=0,this._reconnect(),e.promise}_reconnect(){if(this._errorIfDisposed(),clearTimeout(this._reconnectTimeout),this._reconnectAttempt<this._reconnectLimit){this._updateConnectionStatus("connecting");const e=l.getRandomIntInclusive(0,1e3*(Math.pow(2,this._reconnectAttempt)-1));console.error(`Connection lost, reconnecting in ${Math.floor(e/1e3)} seconds.`),this._reconnectTimeout=setTimeout(this._createSocket,e),this._reconnectAttempt+=1}else this._updateConnectionStatus("disconnected");this._clearSocket()}_clearSocket(){null!==this._ws&&(this._ws.onopen=this._noOp,this._ws.onclose=this._noOp,this._ws.onerror=this._noOp,this._ws.onmessage=this._noOp,this._ws.close(),this._ws=null)}async shutdown(){await a.shutdownTerminal(this.name,this.serverSettings),this.dispose()}clone(){return new c(this)}_updateConnectionStatus(e){this._connectionStatus!==e&&(this._connectionStatus=e,"connecting"!==e&&(this._reconnectAttempt=0,clearTimeout(this._reconnectTimeout)),"connected"===e&&this._sendPending(),this._connectionStatusChanged.emit(e))}_errorIfDisposed(){if(this.isDisposed)throw new Error("Terminal connection is disposed")}get connectionStatusChanged(){return this._connectionStatusChanged}get connectionStatus(){return this._connectionStatus}}var l;t.TerminalConnection=c,function(e){e.getTermUrl=function(e,t){return r.URLExt.join(e,a.TERMINAL_SERVICE_URL,encodeURIComponent(t))},e.getRandomIntInclusive=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}}(l||(l={}))},93247:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalAPI=t.Terminal=void 0;const a=o(n(58353));t.Terminal=a;const c=o(n(43286));t.TerminalAPI=c,s(n(61546),t)},61546:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalManager=void 0;const r=n(35259),i=n(23114),o=n(4016),s=n(76240),a=n(50591),c=n(43286),l=n(71146);class u extends a.BaseManager{constructor(e={}){var t;if(super(e),this._isReady=!1,this._names=[],this._terminalConnections=new Set,this._runningChanged=new o.Signal(this),this._connectionFailure=new o.Signal(this),!this.isAvailable())return this._ready=Promise.reject("Terminals unavailable"),void this._ready.catch((e=>{}));this._pollModels=new i.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:1e4,backoff:!0,max:3e5},name:"@jupyterlab/services:TerminalManager#models",standby:null!==(t=e.standby)&&void 0!==t?t:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._names.length=0,this._terminalConnections.forEach((e=>e.dispose())),this._pollModels.dispose(),super.dispose())}isAvailable(){return c.isAvailable()}connectTo(e){const t=new l.TerminalConnection(Object.assign(Object.assign({},e),{serverSettings:this.serverSettings}));return this._onStarted(t),this._names.includes(e.model.name)||this.refreshRunning().catch((()=>{})),t}running(){return r.iter(this._models)}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(){const e=await c.startNew(this.serverSettings);return await this.refreshRunning(),this.connectTo({model:e})}async shutdown(e){await c.shutdownTerminal(e,this.serverSettings),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all(this._names.map((e=>c.shutdownTerminal(e,this.serverSettings)))),await this.refreshRunning()}async requestRunning(){var e,t;let n;try{n=await c.listRunning(this.serverSettings)}catch(n){throw(n instanceof s.ServerConnection.NetworkError||503===(null===(e=n.response)||void 0===e?void 0:e.status)||424===(null===(t=n.response)||void 0===t?void 0:t.status))&&this._connectionFailure.emit(n),n}if(this.isDisposed)return;const r=n.map((({name:e})=>e)).sort();r!==this._names&&(this._names=r,this._terminalConnections.forEach((e=>{r.includes(e.name)||e.dispose()})),this._runningChanged.emit(this._models))}_onStarted(e){this._terminalConnections.add(e),e.disposed.connect(this._onDisposed,this)}_onDisposed(e){this._terminalConnections.delete(e),this.refreshRunning().catch((()=>{}))}get _models(){return this._names.map((e=>({name:e})))}}t.TerminalManager=u},43286:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shutdownTerminal=t.listRunning=t.startNew=t.isAvailable=t.TERMINAL_SERVICE_URL=void 0;const r=n(79622),i=n(28477);function o(){return"true"===String(r.PageConfig.getOption("terminalsAvailable")).toLowerCase()}var s;t.TERMINAL_SERVICE_URL="api/terminals",t.isAvailable=o,t.startNew=async function(e=i.ServerConnection.makeSettings()){s.errorIfNotAvailable();const n=r.URLExt.join(e.baseUrl,t.TERMINAL_SERVICE_URL),o=await i.ServerConnection.makeRequest(n,{method:"POST"},e);if(200!==o.status)throw await i.ServerConnection.ResponseError.create(o);return await o.json()},t.listRunning=async function(e=i.ServerConnection.makeSettings()){s.errorIfNotAvailable();const n=r.URLExt.join(e.baseUrl,t.TERMINAL_SERVICE_URL),o=await i.ServerConnection.makeRequest(n,{},e);if(200!==o.status)throw await i.ServerConnection.ResponseError.create(o);const a=await o.json();if(!Array.isArray(a))throw new Error("Invalid terminal list");return a},t.shutdownTerminal=async function(e,n=i.ServerConnection.makeSettings()){var o;s.errorIfNotAvailable();const a=r.URLExt.join(n.baseUrl,t.TERMINAL_SERVICE_URL,e),c=await i.ServerConnection.makeRequest(a,{method:"DELETE"},n);if(404===c.status){const t=null!==(o=(await c.json()).message)&&void 0!==o?o:`The terminal session "${e}"" does not exist on the server`;console.warn(t)}else if(204!==c.status)throw await i.ServerConnection.ResponseError.create(c)},function(e){e.errorIfNotAvailable=function(){if(!o())throw new Error("Terminals Unavailable")}}(s||(s={}))},58353:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAvailable=void 0;const r=n(43286);Object.defineProperty(t,"isAvailable",{enumerable:!0,get:function(){return r.isAvailable}})},46901:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateProperty=void 0,t.validateProperty=function(e,t,n,r=[]){if(!e.hasOwnProperty(t))throw Error(`Missing property '${t}'`);const i=e[t];if(void 0!==n){let e=!0;switch(n){case"array":e=Array.isArray(i);break;case"object":e=void 0!==i;break;default:e=typeof i===n}if(!e)throw new Error(`Property '${t}' is not of type '${n}'`);if(r.length>0){let e=!0;switch(n){case"string":case"number":case"boolean":e=r.includes(i);break;default:e=r.findIndex((e=>e===i))>=0}if(!e)throw new Error(`Property '${t}' is not one of the valid values ${JSON.stringify(r)}`)}}}},45399:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceManager=void 0;const r=n(79622),i=n(17266),o=n(28477);class s extends i.DataConnector{constructor(e={}){var t;super(),this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:o.ServerConnection.makeSettings()}async fetch(e){const{serverSettings:t}=this,{baseUrl:n,appUrl:r}=t,{makeRequest:i,ResponseError:s}=o.ServerConnection,c=n+r,l=a.url(c,e),u=await i(l,{},t);if(200!==u.status)throw await s.create(u);return u.json()}async list(){const{serverSettings:e}=this,{baseUrl:t,appUrl:n}=e,{makeRequest:r,ResponseError:i}=o.ServerConnection,s=t+n,c=a.url(s,""),l=await r(c,{},e);if(200!==l.status)throw await i.create(l);return(await l.json()).workspaces}async remove(e){const{serverSettings:t}=this,{baseUrl:n,appUrl:r}=t,{makeRequest:i,ResponseError:s}=o.ServerConnection,c=n+r,l=a.url(c,e),u=await i(l,{method:"DELETE"},t);if(204!==u.status)throw await s.create(u)}async save(e,t){const{serverSettings:n}=this,{baseUrl:r,appUrl:i}=n,{makeRequest:s,ResponseError:c}=o.ServerConnection,l=r+i,u=a.url(l,e),d={body:JSON.stringify(t),method:"PUT"},p=await s(u,d,n);if(204!==p.status)throw await c.create(p)}}var a;t.WorkspaceManager=s,function(e){e.url=function(e,t){return r.URLExt.join(e,"api/workspaces",t)}}(a||(a={}))},89525:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataConnector=void 0,t.DataConnector=class{async list(e){throw new Error("DataConnector#list method has not been implemented.")}async remove(e){throw new Error("DataConnector#remove method has not been implemented.")}async save(e,t){throw new Error("DataConnector#save method has not been implemented.")}}},17266:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(89525),t),i(n(14623),t),i(n(51156),t),i(n(64962),t),i(n(7263),t)},14623:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},51156:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestorablePool=void 0;const r=n(95082),i=n(39770),o=n(4016);var s;t.RestorablePool=class{constructor(e){this._added=new o.Signal(this),this._current=null,this._currentChanged=new o.Signal(this),this._hasRestored=!1,this._isDisposed=!1,this._objects=new Set,this._restore=null,this._restored=new r.PromiseDelegate,this._updated=new o.Signal(this),this.namespace=e.namespace}get added(){return this._added}get current(){return this._current}set current(e){this._current!==e&&null!==e&&this._objects.has(e)&&(this._current=e,this._currentChanged.emit(this._current))}get currentChanged(){return this._currentChanged}get isDisposed(){return this._isDisposed}get restored(){return this._restored.promise}get size(){return this._objects.size}get updated(){return this._updated}async add(e){var t,n;if(e.isDisposed){const t="A disposed object cannot be added.";throw console.warn(t,e),new Error(t)}if(this._objects.has(e)){const t="This object already exists in the pool.";throw console.warn(t,e),new Error(t)}if(this._objects.add(e),e.disposed.connect(this._onInstanceDisposed,this),!s.injectedProperty.get(e)){if(this._restore){const{connector:r}=this._restore,i=this._restore.name(e);if(i){const o=`${this.namespace}:${i}`,a=null===(n=(t=this._restore).args)||void 0===n?void 0:n.call(t,e);s.nameProperty.set(e,o),await r.save(o,{data:a})}}this._added.emit(e)}}dispose(){this.isDisposed||(this._current=null,this._isDisposed=!0,this._objects.clear(),o.Signal.clearData(this))}find(e){const t=this._objects.values();for(const n of t)if(e(n))return n}forEach(e){this._objects.forEach(e)}filter(e){const t=[];return this.forEach((n=>{e(n)&&t.push(n)})),t}inject(e){return s.injectedProperty.set(e,!0),this.add(e)}has(e){return this._objects.has(e)}async restore(e){if(this._hasRestored)throw new Error("This pool has already been restored.");this._hasRestored=!0;const{command:t,connector:n,registry:r,when:i}=e,o=this.namespace,s=i?[n.list(o)].concat(i):[n.list(o)];this._restore=e;const[a]=await Promise.all(s),c=await Promise.all(a.ids.map((async(e,i)=>{const o=a.values[i],s=o&&o.data;return void 0===s?n.remove(e):r.execute(t,s).catch((()=>n.remove(e)))})));return this._restored.resolve(),c}async save(e){var t,n;const r=s.injectedProperty.get(e);if(!this._restore||!this.has(e)||r)return;const{connector:i}=this._restore,o=this._restore.name(e),a=s.nameProperty.get(e),c=o?`${this.namespace}:${o}`:"";if(a&&a!==c&&await i.remove(a),s.nameProperty.set(e,c),c){const r=null===(n=(t=this._restore).args)||void 0===n?void 0:n.call(t,e);await i.save(c,{data:r})}a!==c&&this._updated.emit(e)}_onInstanceDisposed(e){if(this._objects.delete(e),e===this._current&&(this._current=null,this._currentChanged.emit(this._current)),s.injectedProperty.get(e))return;if(!this._restore)return;const{connector:t}=this._restore,n=s.nameProperty.get(e);n&&t.remove(n)}},function(e){e.injectedProperty=new i.AttachedProperty({name:"injected",create:()=>!1}),e.nameProperty=new i.AttachedProperty({name:"name",create:()=>""})}(s||(s={}))},64962:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateDB=void 0;const r=n(4016);class i{constructor(e={}){this._changed=new r.Signal(this);const{connector:t,transform:n}=e;this._connector=t||new i.Connector,this._ready=n?n.then((e=>{const{contents:t,type:n}=e;switch(n){case"cancel":default:return;case"clear":return this._clear();case"merge":return this._merge(t||{});case"overwrite":return this._overwrite(t||{})}})):Promise.resolve(void 0)}get changed(){return this._changed}async clear(){await this._ready,await this._clear()}async fetch(e){return await this._ready,this._fetch(e)}async list(e){return await this._ready,this._list(e)}async remove(e){await this._ready,await this._remove(e),this._changed.emit({id:e,type:"remove"})}async save(e,t){await this._ready,await this._save(e,t),this._changed.emit({id:e,type:"save"})}async toJSON(){await this._ready;const{ids:e,values:t}=await this._list();return t.reduce(((t,n,r)=>(t[e[r]]=n,t)),{})}async _clear(){await Promise.all((await this._list()).ids.map((e=>this._remove(e))))}async _fetch(e){const t=await this._connector.fetch(e);if(t)return JSON.parse(t).v}async _list(e=""){const{ids:t,values:n}=await this._connector.list(e);return{ids:t,values:n.map((e=>JSON.parse(e).v))}}async _merge(e){await Promise.all(Object.keys(e).map((t=>e[t]&&this._save(t,e[t]))))}async _overwrite(e){await this._clear(),await this._merge(e)}async _remove(e){return this._connector.remove(e)}async _save(e,t){return this._connector.save(e,JSON.stringify({v:t}))}}t.StateDB=i,function(e){e.Connector=class{constructor(){this._storage={}}async fetch(e){return this._storage[e]}async list(e=""){return Object.keys(this._storage).reduce(((t,n)=>(""!==e&&e!==n.split(":")[0]||(t.ids.push(n),t.values.push(this._storage[n])),t)),{ids:[],values:[]})}async remove(e){delete this._storage[e]}async save(e,t){this._storage[e]=t}}}(i=t.StateDB||(t.StateDB={}))},7263:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IStateDB=void 0;const r=n(95082);t.IStateDB=new r.Token("@jupyterlab/coreutils:IStateDB")},35259:(e,t,n)=>{"use strict";var r;function i(e){return"function"==typeof e.iter?e.iter():new f(e)}function o(e){return new g(e)}function s(e){return new m(e)}function a(e){return new y(e)}function c(e){return new v(e)}function l(e,t){for(var n,r=0,o=i(e);void 0!==(n=o.next());)if(!1===t(n,r++))return}function u(e,t){for(var n,r=0,o=i(e);void 0!==(n=o.next());)if(!t(n,r++))return!1;return!0}function d(e,t){for(var n,r=0,o=i(e);void 0!==(n=o.next());)if(t(n,r++))return!0;return!1}function p(e){for(var t,n=0,r=[],o=i(e);void 0!==(t=o.next());)r[n++]=t;return r}function h(e){for(var t,n=i(e),r={};void 0!==(t=n.next());)r[t[0]]=t[1];return r}n.r(t),n.d(t,{ArrayExt:()=>r,ArrayIterator:()=>f,ChainIterator:()=>w,EmptyIterator:()=>S,EnumerateIterator:()=>k,FilterIterator:()=>I,FnIterator:()=>v,ItemIterator:()=>y,KeyIterator:()=>g,MapIterator:()=>N,RangeIterator:()=>A,RepeatIterator:()=>K,RetroArrayIterator:()=>V,StrideIterator:()=>J,StringExt:()=>q,TakeIterator:()=>G,ValueIterator:()=>m,ZipIterator:()=>Y,chain:()=>b,each:()=>l,empty:()=>C,enumerate:()=>_,every:()=>u,filter:()=>P,find:()=>E,findIndex:()=>T,iter:()=>i,iterFn:()=>c,iterItems:()=>a,iterKeys:()=>o,iterValues:()=>s,map:()=>j,max:()=>x,min:()=>D,minmax:()=>R,once:()=>U,range:()=>M,reduce:()=>L,repeat:()=>F,retro:()=>W,some:()=>d,stride:()=>B,take:()=>$,toArray:()=>p,toObject:()=>h,topologicSort:()=>H,zip:()=>z}),function(e){function t(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=-1);var i,o=e.length;if(0===o)return-1;n=n<0?Math.max(0,n+o):Math.min(n,o-1),i=(r=r<0?Math.max(0,r+o):Math.min(r,o-1))<n?r+1+(o-n):r-n+1;for(var s=0;s<i;++s){var a=(n+s)%o;if(e[a]===t)return a}return-1}function n(e,t,n,r){void 0===n&&(n=-1),void 0===r&&(r=0);var i,o=e.length;if(0===o)return-1;i=(n=n<0?Math.max(0,n+o):Math.min(n,o-1))<(r=r<0?Math.max(0,r+o):Math.min(r,o-1))?n+1+(o-r):n-r+1;for(var s=0;s<i;++s){var a=(n-s+o)%o;if(e[a]===t)return a}return-1}function r(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=-1);var i,o=e.length;if(0===o)return-1;n=n<0?Math.max(0,n+o):Math.min(n,o-1),i=(r=r<0?Math.max(0,r+o):Math.min(r,o-1))<n?r+1+(o-n):r-n+1;for(var s=0;s<i;++s){var a=(n+s)%o;if(t(e[a],a))return a}return-1}function i(e,t,n,r){void 0===n&&(n=-1),void 0===r&&(r=0);var i,o=e.length;if(0===o)return-1;i=(n=n<0?Math.max(0,n+o):Math.min(n,o-1))<(r=r<0?Math.max(0,r+o):Math.min(r,o-1))?n+1+(o-r):n-r+1;for(var s=0;s<i;++s){var a=(n-s+o)%o;if(t(e[a],a))return a}return-1}function o(e,t,n){void 0===t&&(t=0),void 0===n&&(n=-1);var r=e.length;if(!(r<=1))for(t=t<0?Math.max(0,t+r):Math.min(t,r-1),n=n<0?Math.max(0,n+r):Math.min(n,r-1);t<n;){var i=e[t],o=e[n];e[t++]=o,e[n--]=i}}function s(e,t){var n=e.length;if(t<0&&(t+=n),!(t<0||t>=n)){for(var r=e[t],i=t+1;i<n;++i)e[i-1]=e[i];return e.length=n-1,r}}e.firstIndexOf=t,e.lastIndexOf=n,e.findFirstIndex=r,e.findLastIndex=i,e.findFirstValue=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=-1);var o=r(e,t,n,i);return-1!==o?e[o]:void 0},e.findLastValue=function(e,t,n,r){void 0===n&&(n=-1),void 0===r&&(r=0);var o=i(e,t,n,r);return-1!==o?e[o]:void 0},e.lowerBound=function(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=-1);var o=e.length;if(0===o)return 0;for(var s=r=r<0?Math.max(0,r+o):Math.min(r,o-1),a=(i=i<0?Math.max(0,i+o):Math.min(i,o-1))-r+1;a>0;){var c=a>>1,l=s+c;n(e[l],t)<0?(s=l+1,a-=c+1):a=c}return s},e.upperBound=function(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=-1);var o=e.length;if(0===o)return 0;for(var s=r=r<0?Math.max(0,r+o):Math.min(r,o-1),a=(i=i<0?Math.max(0,i+o):Math.min(i,o-1))-r+1;a>0;){var c=a>>1,l=s+c;n(e[l],t)>0?a=c:(s=l+1,a-=c+1)}return s},e.shallowEqual=function(e,t,n){if(e===t)return!0;if(e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;++r)if(n?!n(e[r],t[r]):e[r]!==t[r])return!1;return!0},e.slice=function(e,t){void 0===t&&(t={});var n=t.start,r=t.stop,i=t.step;if(void 0===i&&(i=1),0===i)throw new Error("Slice `step` cannot be zero.");var o,s=e.length;void 0===n?n=i<0?s-1:0:n<0?n=Math.max(n+s,i<0?-1:0):n>=s&&(n=i<0?s-1:s),void 0===r?r=i<0?-1:s:r<0?r=Math.max(r+s,i<0?-1:0):r>=s&&(r=i<0?s-1:s),o=i<0&&r>=n||i>0&&n>=r?0:i<0?Math.floor((r-n+1)/i+1):Math.floor((r-n-1)/i+1);for(var a=[],c=0;c<o;++c)a[c]=e[n+c*i];return a},e.move=function(e,t,n){var r=e.length;if(!(r<=1)&&(t=t<0?Math.max(0,t+r):Math.min(t,r-1))!==(n=n<0?Math.max(0,n+r):Math.min(n,r-1))){for(var i=e[t],o=t<n?1:-1,s=t;s!==n;s+=o)e[s]=e[s+o];e[n]=i}},e.reverse=o,e.rotate=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=-1);var i=e.length;if(!(i<=1||(n=n<0?Math.max(0,n+i):Math.min(n,i-1))>=(r=r<0?Math.max(0,r+i):Math.min(r,i-1)))){var s=r-n+1;if(t>0?t%=s:t<0&&(t=(t%s+s)%s),0!==t){var a=n+t;o(e,n,a-1),o(e,a,r),o(e,n,r)}}},e.fill=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=-1);var i=e.length;if(0!==i){var o;n=n<0?Math.max(0,n+i):Math.min(n,i-1),o=(r=r<0?Math.max(0,r+i):Math.min(r,i-1))<n?r+1+(i-n):r-n+1;for(var s=0;s<o;++s)e[(n+s)%i]=t}},e.insert=function(e,t,n){var r=e.length;t=t<0?Math.max(0,t+r):Math.min(t,r);for(var i=r;i>t;--i)e[i]=e[i-1];e[t]=n},e.removeAt=s,e.removeFirstOf=function(e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=-1);var o=t(e,n,r,i);return-1!==o&&s(e,o),o},e.removeLastOf=function(e,t,r,i){void 0===r&&(r=-1),void 0===i&&(i=0);var o=n(e,t,r,i);return-1!==o&&s(e,o),o},e.removeAllOf=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=-1);var i=e.length;if(0===i)return 0;n=n<0?Math.max(0,n+i):Math.min(n,i-1),r=r<0?Math.max(0,r+i):Math.min(r,i-1);for(var o=0,s=0;s<i;++s)n<=r&&s>=n&&s<=r&&e[s]===t||r<n&&(s<=r||s>=n)&&e[s]===t?o++:o>0&&(e[s-o]=e[s]);return o>0&&(e.length=i-o),o},e.removeFirstWhere=function(e,t,n,i){var o;void 0===n&&(n=0),void 0===i&&(i=-1);var a=r(e,t,n,i);return-1!==a&&(o=s(e,a)),{index:a,value:o}},e.removeLastWhere=function(e,t,n,r){var o;void 0===n&&(n=-1),void 0===r&&(r=0);var a=i(e,t,n,r);return-1!==a&&(o=s(e,a)),{index:a,value:o}},e.removeAllWhere=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=-1);var i=e.length;if(0===i)return 0;n=n<0?Math.max(0,n+i):Math.min(n,i-1),r=r<0?Math.max(0,r+i):Math.min(r,i-1);for(var o=0,s=0;s<i;++s)n<=r&&s>=n&&s<=r&&t(e[s],s)||r<n&&(s<=r||s>=n)&&t(e[s],s)?o++:o>0&&(e[s-o]=e[s]);return o>0&&(e.length=i-o),o}}(r||(r={}));var f=function(){function e(e){this._index=0,this._source=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},e}(),g=function(){function e(e,t){void 0===t&&(t=Object.keys(e)),this._index=0,this._source=e,this._keys=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?e:this.next()}},e}(),m=function(){function e(e,t){void 0===t&&(t=Object.keys(e)),this._index=0,this._source=e,this._keys=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?this._source[e]:this.next()}},e}(),y=function(){function e(e,t){void 0===t&&(t=Object.keys(e)),this._index=0,this._source=e,this._keys=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?[e,this._source[e]]:this.next()}},e}(),v=function(){function e(e){this._fn=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},e.prototype.next=function(){return this._fn.call(void 0)},e}();function b(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new w(i(e.map(i)))}var w=function(){function e(e){this._cloned=!1,this._source=e,this._active=void 0}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone());return t._active=this._active&&this._active.clone(),t._cloned=!0,this._cloned=!0,t},e.prototype.next=function(){if(void 0===this._active){var e=this._source.next();if(void 0===e)return;this._active=this._cloned?e.clone():e}var t=this._active.next();return void 0!==t?t:(this._active=void 0,this.next())},e}();function C(){return new S}var S=function(){function e(){}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e},e.prototype.next=function(){},e}();function _(e,t){return void 0===t&&(t=0),new k(i(e),t)}var k=function(){function e(e,t){this._source=e,this._index=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._index)},e.prototype.next=function(){var e=this._source.next();if(void 0!==e)return[this._index++,e]},e}();function P(e,t){return new I(i(e),t)}var I=function(){function e(e,t){this._index=0,this._source=e,this._fn=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){for(var e,t=this._fn,n=this._source;void 0!==(e=n.next());)if(t(e,this._index++))return e},e}();function E(e,t){for(var n,r=0,o=i(e);void 0!==(n=o.next());)if(t(n,r++))return n}function T(e,t){for(var n,r=0,o=i(e);void 0!==(n=o.next());)if(t(n,r++))return r-1;return-1}function D(e,t){var n=i(e),r=n.next();if(void 0!==r){for(var o=r;void 0!==(r=n.next());)t(r,o)<0&&(o=r);return o}}function x(e,t){var n=i(e),r=n.next();if(void 0!==r){for(var o=r;void 0!==(r=n.next());)t(r,o)>0&&(o=r);return o}}function R(e,t){var n=i(e),r=n.next();if(void 0!==r){for(var o=r,s=r;void 0!==(r=n.next());)t(r,o)<0?o=r:t(r,s)>0&&(s=r);return[o,s]}}function j(e,t){return new N(i(e),t)}var N=function(){function e(e,t){this._index=0,this._source=e,this._fn=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){var e=this._source.next();if(void 0!==e)return this._fn.call(void 0,e,this._index++)},e}();function M(e,t,n){return void 0===t?new A(0,e,1):new A(e,t,void 0===n?1:n)}var O,A=function(){function e(e,t,n){this._index=0,this._start=e,this._stop=t,this._step=n,this._length=O.rangeLength(e,t,n)}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._start,this._stop,this._step);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},e}();function L(e,t,n){var r=0,o=i(e),s=o.next();if(void 0===s&&void 0===n)throw new TypeError("Reduce of empty iterable with no initial value.");if(void 0===s)return n;var a,c,l=o.next();if(void 0===l&&void 0===n)return s;if(void 0===l)return t(n,s,r++);for(a=t(void 0===n?s:t(n,s,r++),l,r++);void 0!==(c=o.next());)a=t(a,c,r++);return a}function F(e,t){return new K(e,t)}function U(e){return new K(e,1)}!function(e){e.rangeLength=function(e,t,n){return 0===n?1/0:e>t&&n>0||e<t&&n<0?0:Math.ceil((t-e)/n)}}(O||(O={}));var K=function(){function e(e,t){this._value=e,this._count=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._value,this._count)},e.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},e}();function W(e){return"function"==typeof e.retro?e.retro():new V(e)}var V=function(){function e(e){this._source=e,this._index=e.length-1}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},e}();function H(e){var t=[],n=new Set,r=new Map;return l(e,(function(e){var t=e[0],n=e[1],i=r.get(n);i?i.push(t):r.set(n,[t])})),r.forEach((function(e,t){i(t)})),t;function i(e){if(!n.has(e)){n.add(e);var o=r.get(e);o&&o.forEach(i),t.push(e)}}}function B(e,t){return new J(i(e),t)}var q,J=function(){function e(e,t){this._source=e,this._step=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._step)},e.prototype.next=function(){for(var e=this._source.next(),t=this._step-1;t>0;--t)this._source.next();return e},e}();function $(e,t){return new G(i(e),t)}!function(e){function t(e,t,n){void 0===n&&(n=0);for(var r=new Array(t.length),i=0,o=n,s=t.length;i<s;++i,++o){if(-1===(o=e.indexOf(t[i],o)))return null;r[i]=o}return r}e.findIndices=t,e.matchSumOfSquares=function(e,n,r){void 0===r&&(r=0);var i=t(e,n,r);if(!i)return null;for(var o=0,s=0,a=i.length;s<a;++s){var c=i[s]-r;o+=c*c}return{score:o,indices:i}},e.matchSumOfDeltas=function(e,n,r){void 0===r&&(r=0);var i=t(e,n,r);if(!i)return null;for(var o=0,s=r-1,a=0,c=i.length;a<c;++a){var l=i[a];o+=l-s-1,s=l}return{score:o,indices:i}},e.highlight=function(e,t,n){for(var r=[],i=0,o=0,s=t.length;i<s;){for(var a=t[i],c=t[i];++i<s&&t[i]===c+1;)c++;o<a&&r.push(e.slice(o,a)),a<c+1&&r.push(n(e.slice(a,c+1))),o=c+1}return o<e.length&&r.push(e.slice(o)),r},e.cmp=function(e,t){return e<t?-1:e>t?1:0}}(q||(q={}));var G=function(){function e(e,t){this._source=e,this._count=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._count)},e.prototype.next=function(){if(!(this._count<=0)){var e=this._source.next();if(void 0!==e)return this._count--,e}},e}();function z(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Y(e.map(i))}var Y=function(){function e(e){this._source=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.map((function(e){return e.clone()})))},e.prototype.next=function(){for(var e=new Array(this._source.length),t=0,n=this._source.length;t<n;++t){var r=this._source[t].next();if(void 0===r)return;e[t]=r}return e},e}()},95082:function(e,t){!function(e){"use strict";e.JSONExt=void 0,function(e){function t(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e}function n(e){return Array.isArray(e)}function r(e,i){if(e===i)return!0;if(t(e)||t(i))return!1;var o=n(e),s=n(i);return o===s&&(o&&s?function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;++n)if(!r(e[n],t[n]))return!1;return!0}(e,i):function(e,t){if(e===t)return!0;for(var n in e)if(void 0!==e[n]&&!(n in t))return!1;for(var n in t)if(void 0!==t[n]&&!(n in e))return!1;for(var n in e){var i=e[n],o=t[n];if(void 0!==i||void 0!==o){if(void 0===i||void 0===o)return!1;if(!r(i,o))return!1}}return!0}(e,i))}function i(e){return t(e)?e:n(e)?function(e){for(var t=new Array(e.length),n=0,r=e.length;n<r;++n)t[n]=i(e[n]);return t}(e):function(e){var t={};for(var n in e){var r=e[n];void 0!==r&&(t[n]=i(r))}return t}(e)}e.emptyObject=Object.freeze({}),e.emptyArray=Object.freeze([]),e.isPrimitive=t,e.isArray=n,e.isObject=function(e){return!t(e)&&!n(e)},e.deepEqual=r,e.deepCopy=i}(e.JSONExt||(e.JSONExt={}));var t=function(){function e(){this._types=[],this._values=[]}return e.prototype.types=function(){return this._types.slice()},e.prototype.hasData=function(e){return-1!==this._types.indexOf(e)},e.prototype.getData=function(e){var t=this._types.indexOf(e);return-1!==t?this._values[t]:void 0},e.prototype.setData=function(e,t){this.clearData(e),this._types.push(e),this._values.push(t)},e.prototype.clearData=function(e){var t=this._types.indexOf(e);-1!==t&&(this._types.splice(t,1),this._values.splice(t,1))},e.prototype.clear=function(){this._types.length=0,this._values.length=0},e}(),n=function(){function e(){var e=this;this.promise=new Promise((function(t,n){e._resolve=t,e._reject=n}))}return e.prototype.resolve=function(e){(0,this._resolve)(e)},e.prototype.reject=function(e){(0,this._reject)(e)},e}(),r=function(e){this.name=e,this._tokenStructuralPropertyT=null};function i(e){for(var t=0,n=0,r=e.length;n<r;++n)n%4==0&&(t=4294967295*Math.random()>>>0),e[n]=255&t,t>>>=8}e.Random=void 0,(e.Random||(e.Random={})).getRandomValues=function(){var e="undefined"!=typeof window&&(window.crypto||window.msCrypto)||null;return e&&"function"==typeof e.getRandomValues?function(t){return e.getRandomValues(t)}:i}(),e.UUID=void 0,(e.UUID||(e.UUID={})).uuid4=function(e){for(var t=new Uint8Array(16),n=new Array(256),r=0;r<16;++r)n[r]="0"+r.toString(16);for(r=16;r<256;++r)n[r]=r.toString(16);return function(){return e(t),t[6]=64|15&t[6],t[8]=128|63&t[8],n[t[0]]+n[t[1]]+n[t[2]]+n[t[3]]+"-"+n[t[4]]+n[t[5]]+"-"+n[t[6]]+n[t[7]]+"-"+n[t[8]]+n[t[9]]+"-"+n[t[10]]+n[t[11]]+n[t[12]]+n[t[13]]+n[t[14]]+n[t[15]]}}(e.Random.getRandomValues),e.MimeData=t,e.PromiseDelegate=n,e.Token=r,Object.defineProperty(e,"__esModule",{value:!0})}(t)},70725:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DisposableDelegate:()=>a,DisposableSet:()=>l,ObservableDisposableDelegate:()=>c,ObservableDisposableSet:()=>u});var r=n(35259),i=n(4016),o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)};function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){function e(e){this._fn=e}return Object.defineProperty(e.prototype,"isDisposed",{get:function(){return!this._fn},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){if(this._fn){var e=this._fn;this._fn=null,e()}},e}(),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._disposed=new i.Signal(t),t}return s(t,e),Object.defineProperty(t.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(e.prototype.dispose.call(this),this._disposed.emit(void 0),i.Signal.clearData(this))},t}(a),l=function(){function e(){this._isDisposed=!1,this._items=new Set}return Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._items.forEach((function(e){e.dispose()})),this._items.clear())},e.prototype.contains=function(e){return this._items.has(e)},e.prototype.add=function(e){this._items.add(e)},e.prototype.remove=function(e){this._items.delete(e)},e.prototype.clear=function(){this._items.clear()},e}();!function(e){e.from=function(t){var n=new e;return(0,r.each)(t,(function(e){n.add(e)})),n}}(l||(l={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._disposed=new i.Signal(t),t}return s(t,e),Object.defineProperty(t.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(e.prototype.dispose.call(this),this._disposed.emit(void 0),i.Signal.clearData(this))},t}(l);!function(e){e.from=function(t){var n=new e;return(0,r.each)(t,(function(e){n.add(e)})),n}}(u||(u={}))},23114:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Debouncer:()=>g,Poll:()=>h,RateLimiter:()=>f,Throttler:()=>m});var r=n(95082),i=n(4016),o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)};function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};function c(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function l(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var u,d="function"==typeof requestAnimationFrame?requestAnimationFrame:setImmediate,p="function"==typeof cancelAnimationFrame?cancelAnimationFrame:clearImmediate,h=function(){function e(e){var t=this;this._disposed=new i.Signal(this),this._tick=new r.PromiseDelegate,this._ticked=new i.Signal(this),this._timeout=-1,this._factory=e.factory,this._standby=e.standby||u.DEFAULT_STANDBY,this._state=a(a({},u.DEFAULT_STATE),{timestamp:(new Date).getTime()});var n=e.frequency||{},o=Math.max(n.interval||0,n.max||0,u.DEFAULT_FREQUENCY.max);this.frequency=a(a(a({},u.DEFAULT_FREQUENCY),n),{max:o}),this.name=e.name||u.DEFAULT_NAME,"auto"in e&&!e.auto||d((function(){t.start()}))}return Object.defineProperty(e.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frequency",{get:function(){return this._frequency},set:function(t){if(!this.isDisposed&&!r.JSONExt.deepEqual(t,this.frequency||{})){var n=t.backoff,i=t.interval,o=t.max;if(i=Math.round(i),o=Math.round(o),"number"==typeof n&&n<1)throw new Error("Poll backoff growth factor must be at least 1");if((i<0||i>o)&&i!==e.NEVER)throw new Error("Poll interval must be between 0 and max");if(o>e.MAX_INTERVAL&&o!==e.NEVER)throw new Error("Max interval must be less than "+e.MAX_INTERVAL);this._frequency={backoff:n,interval:i,max:o}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDisposed",{get:function(){return"disposed"===this.state.phase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"standby",{get:function(){return this._standby},set:function(e){this.isDisposed||this.standby===e||(this._standby=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tick",{get:function(){return this._tick.promise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ticked",{get:function(){return this._ticked},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.isDisposed||(this._state=a(a({},u.DISPOSED_STATE),{timestamp:(new Date).getTime()}),this._tick.promise.catch((function(e){})),this._tick.reject(new Error("Poll ("+this.name+") is disposed.")),this._disposed.emit(void 0),i.Signal.clearData(this))},e.prototype.refresh=function(){return this.schedule({cancel:function(e){return"refreshed"===e.phase},interval:e.IMMEDIATE,phase:"refreshed"})},e.prototype.schedule=function(t){return void 0===t&&(t={}),c(this,void 0,void 0,(function(){var n,i,o,s,c,u=this;return l(this,(function(l){switch(l.label){case 0:return this.isDisposed||t.cancel&&t.cancel(this.state)?[2]:(n=this.state,i=this._tick,o=new r.PromiseDelegate,s=a({interval:this.frequency.interval,payload:null,phase:"standby",timestamp:(new Date).getTime()},t),this._state=s,this._tick=o,n.interval===e.IMMEDIATE?p(this._timeout):clearTimeout(this._timeout),this._ticked.emit(this.state),i.resolve(this),[4,i.promise]);case 1:return l.sent(),c=function(){u.isDisposed||u.tick!==o.promise||u._execute()},this._timeout=s.interval===e.IMMEDIATE?d(c):s.interval===e.NEVER?-1:setTimeout(c,s.interval),[2]}}))}))},e.prototype.start=function(){return this.schedule({cancel:function(e){var t=e.phase;return"constructed"!==t&&"standby"!==t&&"stopped"!==t},interval:e.IMMEDIATE,phase:"started"})},e.prototype.stop=function(){return this.schedule({cancel:function(e){return"stopped"===e.phase},interval:e.NEVER,phase:"stopped"})},e.prototype._execute=function(){var e=this,t="function"==typeof this.standby?this.standby():this.standby;if(t="never"!==t&&("when-hidden"===t?!("undefined"==typeof document||!document||!document.hidden):t))this.schedule();else{var n=this.tick;this._factory(this.state).then((function(t){e.isDisposed||e.tick!==n||e.schedule({payload:t,phase:"rejected"===e.state.phase?"reconnected":"resolved"})})).catch((function(t){e.isDisposed||e.tick!==n||e.schedule({interval:u.sleep(e.frequency,e.state),payload:t,phase:"rejected"})}))}},e}();!function(e){e.IMMEDIATE=0,e.MAX_INTERVAL=2147483647,e.NEVER=1/0}(h||(h={})),function(e){e.DEFAULT_BACKOFF=3,e.DEFAULT_FREQUENCY={backoff:!0,interval:1e3,max:3e4},e.DEFAULT_NAME="unknown",e.DEFAULT_STANDBY="when-hidden",e.DEFAULT_STATE={interval:h.NEVER,payload:null,phase:"constructed",timestamp:new Date(0).getTime()},e.DISPOSED_STATE={interval:h.NEVER,payload:null,phase:"disposed",timestamp:new Date(0).getTime()},e.sleep=function(t,n){var r=t.backoff,i=t.interval,o=t.max;if(i===h.NEVER)return i;var s=!0===r?e.DEFAULT_BACKOFF:!1===r?1:r,a=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}(i,n.interval*s);return Math.min(o,a)}}(u||(u={}));var f=function(){function e(e,t){var n=this;void 0===t&&(t=500),this.payload=null,this.limit=t,this.poll=new h({auto:!1,factory:function(){return c(n,void 0,void 0,(function(){return l(this,(function(t){switch(t.label){case 0:return[4,e()];case 1:return[2,t.sent()]}}))}))},frequency:{backoff:!1,interval:h.NEVER,max:h.NEVER},standby:"never"}),this.payload=new r.PromiseDelegate,this.poll.ticked.connect((function(e,t){var i=n.payload;return"resolved"===t.phase?(n.payload=new r.PromiseDelegate,void i.resolve(t.payload)):"rejected"===t.phase||"stopped"===t.phase?(n.payload=new r.PromiseDelegate,i.promise.catch((function(e){})),void i.reject(t.payload)):void 0}),this)}return Object.defineProperty(e.prototype,"isDisposed",{get:function(){return null===this.payload},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.isDisposed||(this.payload=null,this.poll.dispose())},e.prototype.stop=function(){return c(this,void 0,void 0,(function(){return l(this,(function(e){return[2,this.poll.stop()]}))}))},e}(),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.invoke=function(){return this.poll.schedule({interval:this.limit,phase:"invoked"}),this.payload.promise},t}(f),m=function(e){function t(t,n){var r=e.call(this,t,"number"==typeof n?n:n&&n.limit)||this,i="leading";return"number"!=typeof n&&(i="edge"in(n=n||{})?n.edge:i),r._interval="trailing"===i?r.limit:h.IMMEDIATE,r}return s(t,e),t.prototype.invoke=function(){return"invoked"!==this.poll.state.phase&&this.poll.schedule({interval:this._interval,phase:"invoked"}),this.payload.promise},t}(f)},39770:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AttachedProperty:()=>i});var r,i=function(){function e(e){this._pid=r.nextPID(),this.name=e.name,this._create=e.create,this._coerce=e.coerce||null,this._compare=e.compare||null,this._changed=e.changed||null}return e.prototype.get=function(e){var t=r.ensureMap(e);return this._pid in t?t[this._pid]:t[this._pid]=this._createValue(e)},e.prototype.set=function(e,t){var n,i=r.ensureMap(e);n=this._pid in i?i[this._pid]:i[this._pid]=this._createValue(e);var o=this._coerceValue(e,t);this._maybeNotify(e,n,i[this._pid]=o)},e.prototype.coerce=function(e){var t,n=r.ensureMap(e);t=this._pid in n?n[this._pid]:n[this._pid]=this._createValue(e);var i=this._coerceValue(e,t);this._maybeNotify(e,t,n[this._pid]=i)},e.prototype._createValue=function(e){return(0,this._create)(e)},e.prototype._coerceValue=function(e,t){var n=this._coerce;return n?n(e,t):t},e.prototype._compareValue=function(e,t){var n=this._compare;return n?n(e,t):e===t},e.prototype._maybeNotify=function(e,t,n){var r=this._changed;r&&!this._compareValue(t,n)&&r(e,t,n)},e}();!function(e){e.clearData=function(e){r.ownerData.delete(e)}}(i||(i={})),function(e){var t;e.ownerData=new WeakMap,e.nextPID=(t=0,function(){return"pid-"+(""+Math.random()).slice(2)+"-"+t++}),e.ensureMap=function(t){var n=e.ownerData.get(t);return n||(n=Object.create(null),e.ownerData.set(t,n),n)}}(r||(r={}))},4016:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Signal:()=>s});var r,i=n(35259),o=n(39770),s=function(){function e(e){this._blockedCount=0,this.sender=e}return e.prototype.block=function(e){this._blockedCount++;try{e()}finally{this._blockedCount--}},e.prototype.connect=function(e,t){return r.connect(this,e,t)},e.prototype.disconnect=function(e,t){return r.disconnect(this,e,t)},e.prototype.emit=function(e){this._blockedCount||r.emit(this,e)},e}();!function(e){e.blockAll=function(e,t){var n=r.blockedProperty;n.set(e,n.get(e)+1);try{t()}finally{n.set(e,n.get(e)-1)}},e.disconnectBetween=function(e,t){r.disconnectBetween(e,t)},e.disconnectSender=function(e){r.disconnectSender(e)},e.disconnectReceiver=function(e){r.disconnectReceiver(e)},e.disconnectAll=function(e){r.disconnectAll(e)},e.clearData=function(e){r.disconnectAll(e)},e.getExceptionHandler=function(){return r.exceptionHandler},e.setExceptionHandler=function(e){var t=r.exceptionHandler;return r.exceptionHandler=e,t}}(s||(s={})),function(e){function t(e){var t=r.get(e);t&&0!==t.length&&((0,i.each)(t,(function(e){if(e.signal){var t=e.thisArg||e.slot;e.signal=null,d(s.get(t))}})),d(t))}function n(e){var t=s.get(e);t&&0!==t.length&&((0,i.each)(t,(function(e){if(e.signal){var t=e.signal.sender;e.signal=null,d(r.get(t))}})),d(t))}e.exceptionHandler=function(e){console.error(e)},e.connect=function(e,t,n){n=n||void 0;var i=r.get(e.sender);if(i||(i=[],r.set(e.sender,i)),l(i,e,t,n))return!1;var o=n||t,a=s.get(o);a||(a=[],s.set(o,a));var c={signal:e,slot:t,thisArg:n};return i.push(c),a.push(c),!0},e.disconnect=function(e,t,n){n=n||void 0;var i=r.get(e.sender);if(!i||0===i.length)return!1;var o=l(i,e,t,n);if(!o)return!1;var a=n||t,c=s.get(a);return o.signal=null,d(i),d(c),!0},e.disconnectBetween=function(e,t){var n=r.get(e);if(n&&0!==n.length){var o=s.get(t);o&&0!==o.length&&((0,i.each)(o,(function(t){t.signal&&t.signal.sender===e&&(t.signal=null)})),d(n),d(o))}},e.disconnectSender=t,e.disconnectReceiver=n,e.disconnectAll=function(e){t(e),n(e)},e.emit=function(t,n){if(!(e.blockedProperty.get(t.sender)>0)){var i=r.get(t.sender);if(i&&0!==i.length)for(var o=0,s=i.length;o<s;++o){var a=i[o];a.signal===t&&u(a,n)}}};var r=new WeakMap,s=new WeakMap,a=new Set,c="function"==typeof requestAnimationFrame?requestAnimationFrame:setImmediate;function l(e,t,n,r){return(0,i.find)(e,(function(e){return e.signal===t&&e.slot===n&&e.thisArg===r}))}function u(t,n){var r=t.signal,i=t.slot,o=t.thisArg;try{i.call(o,r.sender,n)}catch(t){e.exceptionHandler(t)}}function d(e){0===a.size&&c(p),a.add(e)}function p(){a.forEach(h),a.clear()}function h(e){i.ArrayExt.removeAllWhere(e,f)}function f(e){return null===e.signal}e.blockedProperty=new o.AttachedProperty({name:"blocked",create:function(){return 0}})}(r||(r={}))},67164:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AppInsightsCore:()=>V,BaseCore:()=>B,BaseTelemetryPlugin:()=>E.i,CoreUtils:()=>K.Tr,DiagnosticLogger:()=>f.AQ,ESPromise:()=>$,ESPromiseScheduler:()=>Z,EventHelper:()=>re.zB,EventLatency:()=>l,EventPersistence:()=>d,EventPropertyType:()=>u,EventsDiscardedReason:()=>ne.h,FullVersionString:()=>K.vs,InternalAppInsightsCore:()=>U,InternalBaseCore:()=>A,LoggingSeverity:()=>s,MinChannelPriorty:()=>te,NotificationManager:()=>F,PerfEvent:()=>g.zn,PerfManager:()=>g.Jk,ProcessTelemetryContext:()=>b.Vi,TraceLevel:()=>p,Undefined:()=>se.jA,Utils:()=>K.cQ,ValueKind:()=>c,ValueSanitizer:()=>ee,Version:()=>K.Gf,_ExtendedInternalMessageId:()=>h,_InternalLogMessage:()=>f.lQ,_InternalMessageId:()=>a,__getRegisteredEvents:()=>ie.um,_throwInternal:()=>f.kP,addEventHandler:()=>ie.Ib,addEventListeners:()=>ie.yw,addPageHideEventListener:()=>ie.TJ,addPageShowEventListener:()=>ie.nD,addPageUnloadEventListener:()=>ie.c9,areCookiesSupported:()=>C.p7,arrForEach:()=>o.tO,arrIndexOf:()=>o.UA,arrMap:()=>o.Mr,arrReduce:()=>o.Xz,attachEvent:()=>ie.pZ,cookieAvailable:()=>C.p7,createCookieMgr:()=>C.Nz,createEnumStyle:()=>i.By,createGuid:()=>K.cm,createProcessTelemetryContext:()=>b.CD,createTraceParent:()=>ae.SU,createUniqueNamespace:()=>D.J,createUnloadHandlerContainer:()=>x.Y,dateNow:()=>o.m6,deleteCookie:()=>K.kT,detachEvent:()=>ie.pD,disableCookies:()=>K.oF,disallowsSameSiteNone:()=>C.UY,doPerf:()=>g.Lm,dumpObj:()=>m.eU,eventOff:()=>ie.QY,eventOn:()=>ie.XO,extend:()=>K.l7,findW3cTraceParent:()=>ae.lq,formatTraceParent:()=>ae.aR,generateW3CId:()=>re.DO,getCommonSchemaMetaData:()=>K.Vv,getConsole:()=>m.dr,getCookie:()=>K.ej,getCookieValue:()=>K.Do,getCrypto:()=>m.MX,getDocument:()=>m.Me,getExceptionName:()=>o.jj,getFieldValueType:()=>K.Sy,getGlobal:()=>y.Rd,getGlobalInst:()=>m.a8,getHistory:()=>m.s1,getIEVersion:()=>m.sA,getISOString:()=>o.Y6,getJSON:()=>m.xA,getLocation:()=>m.k$,getMsCrypto:()=>m.gz,getNavigator:()=>m.jW,getPerformance:()=>m.r,getSetValue:()=>o.qK,getTenantId:()=>K.jM,getTime:()=>K.hK,getWindow:()=>m.Jj,hasDocument:()=>m.Nv,hasHistory:()=>m.fE,hasJSON:()=>m.nS,hasNavigator:()=>m.d6,hasOwnProperty:()=>o.nr,hasWindow:()=>m.Ym,isArray:()=>o.kJ,isArrayValid:()=>K.JT,isBeaconsSupported:()=>m.MF,isBoolean:()=>o.jn,isChromium:()=>K.mJ,isDate:()=>o.J_,isDocumentObjectAvailable:()=>K.x9,isError:()=>o.VZ,isFetchSupported:()=>m.JO,isFunction:()=>o.mf,isIE:()=>m.w1,isLatency:()=>K.r7,isNotTruthy:()=>o.F,isNullOrUndefined:()=>o.le,isNumber:()=>o.hj,isObject:()=>o.Kn,isReactNative:()=>m.b$,isSampledFlag:()=>ae.Pn,isString:()=>o.HD,isTruthy:()=>o.fQ,isTypeof:()=>o.Ym,isUint8ArrayAvailable:()=>K.IZ,isUndefined:()=>o.o8,isValidSpanId:()=>ae.Lc,isValidTraceId:()=>ae.jN,isValidTraceParent:()=>ae.J6,isValueAssigned:()=>K.Sn,isValueKind:()=>K.oS,isWindowObjectAvailable:()=>K.dH,isXhrSupported:()=>m.Z3,mergeEvtNamespace:()=>ie.jU,newGuid:()=>re.GW,newId:()=>oe.pZ,normalizeJsName:()=>o.Gf,objCreate:()=>y.pu,objDefineAccessors:()=>o.l_,objForEachKey:()=>o.rW,objFreeze:()=>o.FL,objKeys:()=>o.FY,objSeal:()=>o.Xi,openXhr:()=>K.ot,optimizeObject:()=>o.Ax,parseTraceParent:()=>ae.j_,perfNow:()=>re.Jj,proxyAssign:()=>o.cf,proxyFunctionAs:()=>o.Oi,proxyFunctions:()=>o.Vb,random32:()=>oe._l,randomValue:()=>oe.az,removeEventHandler:()=>ie.C1,removeEventListeners:()=>ie.nJ,removePageHideEventListener:()=>ie.C9,removePageShowEventListener:()=>ie.Yl,removePageUnloadEventListener:()=>ie.JA,safeGetCookieMgr:()=>C.JP,safeGetLogger:()=>f.vH,sanitizeProperty:()=>K.yj,setCookie:()=>K.d8,setEnableEnvMocks:()=>m.dI,setProcessTelemetryTimings:()=>K.if,setValue:()=>o.sO,strContains:()=>o._Q,strEndsWith:()=>o.Id,strFunction:()=>se.cb,strObject:()=>se.fK,strPrototype:()=>se.hB,strStartsWith:()=>o.xe,strTrim:()=>o.nd,strUndefined:()=>se.jA,throwError:()=>o._y,toISOString:()=>o.Y6,useXDomainRequest:()=>m.cp});var r=n(27421),i=n(50951),o=n(24869),s=(0,i.By)({CRITICAL:1,WARNING:2}),a=(0,i.By)({BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103,FailedAddingCustomDefinedRequestContext:104,InMemoryStorageBufferFull:105,InstrumentationKeyDeprecation:106}),c=(0,i.By)({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),l=(0,i.By)({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),u=(0,i.By)({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),d=(0,i.By)({Normal:1,Critical:2}),p=(0,i.By)({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),h=(0,o.FL)((0,r.uc)((0,r.uc)({},a),(0,i.By)({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520}))),f=n(29339),g=n(81782),m=n(49251),y=n(30175),v=n(29141),b=n(31030),w=n(69031),C=n(88140),S=n(61733),_=n(28341),k=n(96335),P=500;function I(e,t,n,r){t&&(0,o.kJ)(t)&&t.length>0&&(t=t.sort((function(e,t){return e.priority-t.priority})),(0,o.tO)(t,(function(e){e.priority<P&&(0,o._y)("Channel has invalid priority - "+e.identifier)})),e.push({queue:(0,o.FL)(t),chain:(0,b.jV)(t,n,r)}))}var E=n(87951),T=function(e){function t(){var n,r,i=e.call(this)||this;function s(){n=0,r=[]}return i.identifier="TelemetryInitializerPlugin",i.priority=199,s(),(0,v.Z)(t,i,(function(e,t){e.addTelemetryInitializer=function(e){var t={id:n++,fn:e};return r.push(t),{remove:function(){(0,o.tO)(r,(function(e,n){if(e.id===t.id)return r.splice(n,1),-1}))}}},e.processTelemetry=function(t,n){for(var i=!1,s=r.length,a=0;a<s;++a){var c=r[a];if(c)try{if(!1===c.fn.apply(null,[t])){i=!0;break}}catch(e){(0,f.kP)(n.diagLog(),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,o.jj)(e),{exception:(0,m.eU)(e)},!0)}}i||e.processNext(t,n)},e[k.Ho]=function(){s()}})),i}return(0,r.ne)(t,e),t}(E.i),D=n(87624),x=n(38593),R="Plugins must provide initialize method",j="SDK is still unloading...",N={loggingLevelConsole:1};function M(e,t){return new g.Jk(t)}function O(e,t){var n=!1;return(0,o.tO)(t,(function(t){if(t===e)return n=!0,-1})),n}var A=function e(){var t,n,i,s,a,c,l,u,d,p,h,m,E,A,L,F,U,K,W,V=0;(0,v.Z)(e,this,(function(e){function v(){t=!1,e.config=(0,o.mm)(!0,{},N),e.logger=new f.AQ(e.config),e._extensions=[],A=new T,n=[],i=null,s=null,a=null,c=null,l=null,d=null,u=[],p=null,h=null,m=null,E=!1,L=null,F=(0,D.J)("AIBaseCore",!0),U=(0,x.Y)(),W=null}function H(){return(0,b.CD)(J(),e.config,e)}function B(t,n){var r=function(e,t,n){var r=[],i={};return(0,o.tO)(n,(function(t){((0,o.le)(t)||(0,o.le)(t.initialize))&&(0,o._y)(R);var n=t.priority,s=t.identifier;t&&n&&((0,o.le)(i[n])?i[n]=s:(0,f.jV)(e,"Two extensions have same priority #"+n+" - "+i[n]+", "+s)),(!n||n<500)&&r.push(t)})),{all:n,core:r}}(e.logger,0,u);d=r.core,l=null;var i=r.all;if(m=(0,o.FL)(function(e,t,n,r){var i=[];if(e&&(0,o.tO)(e,(function(e){return I(i,e,n,r)})),t){var s=[];(0,o.tO)(t,(function(e){e.priority>P&&s.push(e)})),I(i,s,n,r)}return i}(h,i,t,e)),p){var s=(0,o.UA)(i,p);-1!==s&&i.splice(s,1),-1!==(s=(0,o.UA)(d,p))&&d.splice(s,1),p._setQueue(m)}else p=function(e,t){var n;function r(){return(0,b.CD)(null,t.config,t,null)}function i(e,t,n,r){var i=e?e.length+1:1;function s(){0==--i&&(r&&r(),r=null)}i>0&&(0,o.tO)(e,(function(e){if(e&&e.queue.length>0){var r=e.chain,o=t.createNew(r);o.onComplete(s),n(o)}else i--})),s()}var s=!1,a=(n={identifier:"ChannelControllerPlugin",priority:P,initialize:function(t,n,r,i){s=!0,(0,o.tO)(e,(function(e){e&&e.queue.length>0&&(0,w.bP)((0,b.CD)(e.chain,t,n),r)}))},isInitialized:function(){return s},processTelemetry:function(t,n){i(e,n||r(),(function(e){e[k.Z_](t)}),(function(){n[k.Z_](t)}))},update:function(t,n){var r=n||{reason:0};return i(e,t,(function(e){e[k.Z_](r)}),(function(){t[k.Z_](r)})),!0}},n[k.nE]=function(){i(e,r(),(function(e){e.iterate((function(e){e[k.nE]&&e[k.nE]()}))}),null)},n[k.Mf]=function(){i(e,r(),(function(e){e.iterate((function(e){e[k.Mf]&&e[k.Mf]()}))}),null)},n[k.vE]=function(t,n){var r=n||{reason:0,isAsync:!1};return i(e,t,(function(e){e[k.Z_](r)}),(function(){t[k.Z_](r),s=!1})),!0},n.getChannel=function(t){var n=null;return e&&e.length>0&&(0,o.tO)(e,(function(e){if(e&&e.queue.length>0&&((0,o.tO)(e.queue,(function(e){if(e.identifier===t)return n=e,-1})),n))return-1})),n},n.flush=function(t,n,o,s){var a=1,c=!1,l=null;function u(){a--,c&&0===a&&(l&&(clearTimeout(l),l=null),n&&n(c),n=null)}return s=s||5e3,i(e,r(),(function(e){e.iterate((function(e){if(e.flush){a++;var n=!1;e.flush(t,(function(){n=!0,u()}),o)||n||(t&&null==l?l=setTimeout((function(){l=null,u()}),s):u())}}))}),(function(){c=!0,u()})),!0},n._setQueue=function(t){e=t},n);return a}(m,e);i.push(p),d.push(p),e._extensions=(0,w.AA)(i),p.initialize(t,e,i),(0,w.bP)(H(),i),e._extensions=(0,o.FL)((0,w.AA)(d||[])).slice(),n&&function(t){var n=(0,b.xy)(J(),e);e._updateHook&&!0===e._updateHook(n,t)||n.processNext(t)}(n)}function q(t){var n=null,r=null;return(0,o.tO)(e._extensions,(function(e){if(e.identifier===t&&e!==p&&e!==A)return r=e,-1})),!r&&p&&(r=p.getChannel(t)),r&&(n={plugin:r,setEnabled:function(e){(0,w.OY)(r)[k.C0]=!e},isEnabled:function(){var e=(0,w.OY)(r);return!e[k.vE]&&!e[k.C0]},remove:function(t,n){void 0===t&&(t=!0);var i=[r];$(i,{reason:1,isAsync:t},(function(t){t&&B(e.config,{reason:32,removed:i}),n&&n(t)}))}}),n}function J(){if(!l){var t=(d||[]).slice();-1===(0,o.UA)(t,A)&&t.push(A),l=(0,b.jV)((0,w.AA)(t),e.config,e)}return l}function $(t,n,r){if(t&&t.length>0){var i=(0,b.jV)(t,e.config,e),s=(0,b.Bt)(i,e);s.onComplete((function(){var e=!1,n=[];(0,o.tO)(u,(function(r,i){O(r,t)?e=!0:n.push(r)})),u=n;var i=[];h&&((0,o.tO)(h,(function(n,r){var s=[];(0,o.tO)(n,(function(n){O(n,t)?e=!0:s.push(n)})),i.push(s)})),h=i),r&&r(e)})),s.processNext(n)}else r(!1)}function G(){var t=e.logger?e.logger.queue:[];t&&((0,o.tO)(t,(function(t){var n={name:L||"InternalMessageId: "+t.messageId,iKey:e.config.instrumentationKey,time:(0,o.Y6)(new Date),baseType:f.lQ.dataType,baseData:{message:t.message}};e.track(n)})),t.length=0)}function z(e,t,n,r){return p?p.flush(e,t,n||6,r):(t&&t(!1),!0)}function Y(t){var n=e.logger;n?(0,f.kP)(n,2,73,t):(0,o._y)(t)}v(),e.isInitialized=function(){return t},e.initialize=function(n,s,c,l){E&&(0,o._y)(j),e.isInitialized()&&(0,o._y)("Core should not be initialized more than once"),n&&!(0,o.le)(n.instrumentationKey)||(0,o._y)("Please provide instrumentation key"),i=l,e._notificationManager=l,e.config=n||{},function(e){!0===e.disableDbgExt&&K&&(i[k.XP](K),K=null),i&&!K&&!0!==e.disableDbgExt&&(K=(0,_.p)(e),i[k.dV](K))}(n),function(t){!t.enablePerfMgr&&a&&(a=null),t.enablePerfMgr&&(0,o.sO)(e.config,"createPerfMgr",M)}(n),n.extensions=(0,o.le)(n.extensions)?[]:n.extensions,function(e){(0,o.qK)(e,S.F).NotificationManager=i}(n),c&&(e.logger=c),(u=[]).push.apply(u,(0,r.$h)((0,r.$h)([],s,!1),n.extensions,!1)),h=(n||{}).channels,B(n,null),m&&0!==m.length||(0,o._y)("No channels available"),t=!0,e.releaseQueue()},e.getTransmissionControls=function(){var e=[];return m&&(0,o.tO)(m,(function(t){e.push(t.queue)})),(0,o.FL)(e)},e.track=function(t){(0,o.sO)(t,S.z,e.config.instrumentationKey,null,o.F),(0,o.sO)(t,"time",(0,o.Y6)(new Date),null,o.F),(0,o.sO)(t,"ver","4.0",null,o.le),!E&&e.isInitialized()?H().processNext(t):n.push(t)},e.getProcessTelContext=H,e.getNotifyMgr=function(){var t;return i||(i=(0,y.pu)(((t={})[k.dV]=function(e){},t[k.XP]=function(e){},t[k.eO]=function(e){},t[k.H4]=function(e,t){},t[k.rX]=function(e,t){},t)),e._notificationManager=i),i},e[k.dV]=function(e){i&&i[k.dV](e)},e[k.XP]=function(e){i&&i[k.XP](e)},e.getCookieMgr=function(){return c||(c=(0,C.Nz)(e.config,e.logger)),c},e.setCookieMgr=function(e){c=e},e.getPerfMgr=function(){return s||a||e.config&&e.config.enablePerfMgr&&(0,o.mf)(e.config.createPerfMgr)&&(a=e.config.createPerfMgr(e,e.getNotifyMgr())),s||a||(0,g.j5)()},e.setPerfMgr=function(e){s=e},e.eventCnt=function(){return n.length},e.releaseQueue=function(){if(t&&n.length>0){var e=n;n=[],(0,o.tO)(e,(function(e){H().processNext(e)}))}},e.pollInternalLogs=function(t){L=t||null;var n=e.config.diagnosticLogInterval;return n&&n>0||(n=1e4),V&&clearInterval(V),V=setInterval((function(){G()}),n)},e.stopPollingInternalLogs=function(){V&&(clearInterval(V),V=0,G())},(0,o.Vb)(e,(function(){return A}),["addTelemetryInitializer"]),e.unload=function(n,r,i){void 0===n&&(n=!0),t||(0,o._y)("SDK is not initialized"),E&&(0,o._y)(j);var s={reason:50,isAsync:n,flushComplete:!1},a=(0,b.Bt)(J(),e);function c(t){s.flushComplete=t,E=!0,U.run(a,s),e.stopPollingInternalLogs(),a.processNext(s)}a.onComplete((function(){v(),r&&r(s)}),e),z(n,c,6,i)||c(!1)},e.getPlugin=q,e.addPlugin=function(t,n,r,i){if(!t)return i&&i(!1),void Y(R);var o=q(t.identifier);if(o&&!n)return i&&i(!1),void Y("Plugin ["+t.identifier+"] is already loaded!");var s={reason:16};function a(n){u.push(t),s.added=[t],B(e.config,s),i&&i(!0)}if(o){var c=[o.plugin];$(c,{reason:2,isAsync:!!r},(function(e){e?(s.removed=c,s.reason|=32,a()):i&&i(!1)}))}else a()},e.evtNamespace=function(){return F},e.flush=z,e.getTraceCtx=function(e){return W||(W=(0,w.Yn)()),W},e.setTraceCtx=function(e){W=e||null},(0,o.Oi)(e,"addUnloadCb",(function(){return U}),"add")}))};function L(e,t,n,r){(0,o.tO)(e,(function(e){if(e&&e[t])if(n)setTimeout((function(){return r(e)}),0);else try{r(e)}catch(e){}}))}var F=function e(t){this.listeners=[];var n=!!(t||{}).perfEvtsSendAll;(0,v.Z)(e,this,(function(e){e[k.dV]=function(t){e.listeners.push(t)},e[k.XP]=function(t){for(var n=(0,o.UA)(e.listeners,t);n>-1;)e.listeners.splice(n,1),n=(0,o.UA)(e.listeners,t)},e[k.eO]=function(t){L(e.listeners,k.eO,!0,(function(e){e[k.eO](t)}))},e[k.H4]=function(t,n){L(e.listeners,k.H4,!0,(function(e){e[k.H4](t,n)}))},e[k.rX]=function(t,n){L(e.listeners,k.rX,n,(function(e){e[k.rX](t,n)}))},e[k.SN]=function(t){t&&(!n&&t.isChildEvt()||L(e.listeners,k.SN,!1,(function(e){t.isAsync?setTimeout((function(){return e[k.SN](t)}),0):e[k.SN](t)})))}}))},U=function(e){function t(){var n=e.call(this)||this;return(0,v.Z)(t,n,(function(e,t){function n(t){var n=e.getNotifyMgr();n&&n.eventsDiscarded([t],2)}e.initialize=function(e,n,r,i){t.initialize(e,n,r||new f.AQ(e),i||new F(e))},e.track=function(r){(0,g.Lm)(e.getPerfMgr(),(function(){return"AppInsightsCore:track"}),(function(){null===r&&(n(r),(0,o._y)("Invalid telemetry item")),function(e){(0,o.le)(e.name)&&(n(e),(0,o._y)("telemetry name required"))}(r),t.track(r)}),(function(){return{item:r}}),!r.sync)}})),n}return(0,r.ne)(t,e),t}(A),K=n(65705),W=function(e){function t(){var n=e.call(this)||this;return n.pluginVersionStringArr=[],n.pluginVersionString="",(0,v.Z)(t,n,(function(e,t){e.logger&&e.logger.queue||(e.logger=new f.AQ({loggingLevelConsole:1})),e.initialize=function(n,r,i,s){(0,g.Lm)(e,(function(){return"AppInsightsCore.initialize"}),(function(){if(n){n.endpointUrl||(n.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/");var a=n.propertyStorageOverride;if(a&&(!a.getProperty||!a.setProperty))throw new Error("Invalid property storage override passed.");n.channels&&(0,o.tO)(n.channels,(function(t){t&&(0,o.tO)(t,(function(t){if(t.identifier&&t.version){var n=t.identifier+"="+t.version;e.pluginVersionStringArr.push(n)}}))}))}e.getWParam=function(){return"undefined"!=typeof document?0:-1},r&&(0,o.tO)(r,(function(t){if(t&&t.identifier&&t.version){var n=t.identifier+"="+t.version;e.pluginVersionStringArr.push(n)}})),e.pluginVersionString=e.pluginVersionStringArr.join(";");try{t.initialize(n,r,i,s),e.pollInternalLogs("InternalLog")}catch(t){var c=e.logger,l=(0,m.eU)(t);-1!==l.indexOf("channels")&&(l+="\n - Channels must be provided through config.channels only!"),c.throwInternal(1,514,"SDK Initialization Failed - no telemetry will be sent: "+l)}}),(function(){return{config:n,extensions:r,logger:i,notificationManager:s}}))},e.track=function(n){(0,g.Lm)(e,(function(){return"AppInsightsCore.track"}),(function(){var r=n;if(r){r.timings=r.timings||{},r.timings.trackStart=(0,K.hK)(),(0,K.r7)(r.latency)||(r.latency=1);var i=r.ext=r.ext||{};i.sdk=i.sdk||{},i.sdk.ver=K.vs;var o=r.baseData=r.baseData||{};o.properties||(o.properties={});var s=o.properties;s.version||(s.version=""),""!==e.pluginVersionString&&(s.version=e.pluginVersionString)}t.track(r)}),(function(){return{item:n}}),!n.sync)}})),n}return(0,r.ne)(t,e),t}(U);const V=W;var H=function(e){function t(){var n=e.call(this)||this;return(0,v.Z)(t,n,(function(e,t){e.initialize=function(n,r,i,o){n&&!n.endpointUrl&&(n.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/"),e.getWParam=function(){return K.x9?0:-1};try{t.initialize(n,r,i,o)}catch(t){(0,f.kP)(e.logger,1,514,"Initialization Failed: "+(0,m.eU)(t)+"\n - Note: Channels must be provided through config.channels only")}},e.track=function(e){var n=e;if(n){var r=n.ext=n.ext||{};r.sdk=r.sdk||{},r.sdk.ver=K.vs}t.track(n)}})),n}return(0,r.ne)(t,e),t}(A);const B=H;var q=o.mf;function J(e,t,n){return function(r){e[t]=r,n()}}const $=function(){function e(t){var n=0,r=null,i=[];function o(){if(i.length>0){var e=i.slice();i=[],setTimeout((function(){for(var t=0,n=e.length;t<n;++t)try{e[t]()}catch(e){}}),0)}}function s(e){0===n&&(r=e,n=1,o())}function a(e){0===n&&(r=e,n=2,o())}(0,v.Z)(e,this,(function(t){t.then=function(t,s){return new e((function(a,c){!function(t,s,a,c){i.push((function(){var i;try{(i=1===n?q(t)?t(r):r:q(s)?s(r):r)instanceof e?i.then(a,c):2!==n||q(s)?a(i):c(i)}catch(e){return void c(e)}})),0!==n&&o()}(t,s,a,c)}))},t.catch=function(e){return t.then(null,e)}})),function(){if(!q(t))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{t(s,a)}catch(e){a(e)}}()}return e.resolve=function(t){return t instanceof e?t:t&&q(t.then)?new e((function(e,n){try{t.then(e,n)}catch(e){n(e)}})):new e((function(e){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.all=function(t){if(t&&t.length)return new e((function(e,n){try{for(var r=[],i=0,o=0;o<t.length;o++){var s=t[o];s&&q(s.then)?(i++,s.then(J(r,o,(function(){0==--i&&e(r)})),n)):r[o]=s}0===i&&setTimeout((function(){e(r)}),0)}catch(e){n(e)}}))},e.race=function(t){return new e((function(e,n){if(t&&t.length)try{for(var r=function(r){var i=t[r];i&&q(i.then)?i.then(e,n):setTimeout((function(){e(i)}),0)},i=0;i<t.length;i++)r(i)}catch(e){n(e)}}))},e}();var G=0,z=[],Y=[],Q=[];function X(){return(new Date).getTime()}const Z=function(){function e(t,n){var r=0,i=(t||"<unnamed>")+"."+G;function o(e){var t=(0,y.Rd)();t&&t.QUnit&&console&&console.log("ESPromiseScheduler["+i+"] "+e)}function s(e){n&&n.warnToConsole("ESPromiseScheduler["+i+"] "+e)}G++,(0,v.Z)(e,this,(function(e){var t=null,n=0;function a(e,t){for(var n=0;n<e.length;n++)if(e[n].id===t)return e.splice(n,1)[0];return null}e.scheduleEvent=function(e,c,l){var u=i+"."+n;n++,c&&(u+="-("+c+")");var d=u+"{"+r+"}";r++;var p,h,f,g={evt:null,tm:X(),id:d,isRunning:!1,isAborted:!1};return g.evt=t?(p=g,h=t,f=new $((function(e,t){var n=X()-h.tm,r=h.id;o("["+u+"] is waiting for ["+r+":"+n+" ms] to complete before starting -- ["+Y.length+"] waiting and ["+z.length+"] running"),p.abort=function(e){p.abort=null,a(Y,u),p.isAborted=!0,t(new Error(e))},h.evt.then((function(n){a(Y,u),C(p).then(e,t)}),(function(n){a(Y,u),C(p).then(e,t)}))})),Y.push(p),f):C(g),(t=g).evt._schId=d,g.evt;function m(e){for(var t=X(),n=t-6e5,r=e.length,i=0;i<r;){var o=e[i];if(o&&o.tm<n){var a=null;o.abort?(a="Aborting ["+o.id+"] due to Excessive runtime ("+(t-o.tm)+" ms)",o.abort(a)):a="Removing ["+o.id+"] due to Excessive runtime ("+(t-o.tm)+" ms)",s(a),e.splice(i,1),r--}else i++}}function y(e,n){var r=!1,i=a(z,e);if(i||(i=a(Q,e),r=!0),i){i.to&&(clearTimeout(i.to),i.to=null);var c=X()-i.tm;n?r?s("Timed out event ["+e+"] finally complete -- "+c+" ms"):o("Promise ["+e+"] Complete -- "+c+" ms"):(Q.push(i),s("Event ["+e+"] Timed out and removed -- "+c+" ms"))}else o("Failed to remove ["+e+"] from running queue");t&&t.id===e&&(t=null),m(z),m(Y),m(Q)}function v(e,t){return function(n){return y(e,!0),t&&t(n),n}}function b(e,t,n,r){t.then((function(t){return t instanceof $?(o("Event ["+e+"] returned a promise -- waiting"),b(e,t,n,r),t):v(e,n)(t)}),v(e,r))}function w(e,t){var n=e.id;return new $((function(r,i){o("Event ["+n+"] Starting -- waited for "+(e.wTm||"--")+" ms"),e.isRunning=!0,e.abort=function(t){e.abort=null,e.isAborted=!0,y(n,!1),i(new Error(t))};var s=t(n);s instanceof $?(l&&(e.to=setTimeout((function(){y(n,!1),i(new Error("Timed out after ["+l+"] ms"))}),l)),b(n,s,(function(t){o("Event ["+n+"] Resolving after "+(X()-e.tm)+" ms"),r(t)}),i)):(o("Promise ["+n+"] Auto completed as the start action did not return a promise"),r())}))}function C(t){var n=X();return t.wTm=n-t.tm,t.tm=n,t.isAborted?$.reject(new Error("["+u+"] was aborted")):(z.push(t),w(t,e))}}}))}return e.incomplete=function(){return z},e.waitingToStart=function(){return Y},e}();var ee=function(){function e(e){var t=this,n={},r=[],i=[];function s(e,t){var s,a=n[e];if(a&&(s=a[t]),!s&&null!==s){if((0,o.HD)(e)&&(0,o.HD)(t))if(i.length>0){for(var c=0;c<i.length;c++)if(i[c].handleField(e,t)){s={canHandle:!0,fieldHandler:i[c]};break}}else 0===r.length&&(s={canHandle:!0});if(!s&&null!==s)for(s=null,c=0;c<r.length;c++)if(r[c].handleField(e,t)){s={canHandle:!0,handler:r[c],fieldHandler:null};break}a||(a=n[e]={}),a[t]=s}return s}function a(e,t,n,r,i,s){if(e.handler)return e.handler.property(t,n,i,s);if(!(0,o.le)(i.kind)){if(4096==(4096&r)||!(0,K.oS)(i.kind))return null;i.value=i.value.toString()}return l(e.fieldHandler,t,n,r,i)}function c(e,t,n){return(0,K.Sn)(n)?{value:n}:null}function l(e,n,r,i,s){if(s&&e){var a=e.getSanitizer(n,r,i,s.kind,s.propertyType);if(a)if(4===i){var u={},d=s.value;(0,o.rW)(d,(function(t,i){var o=n+"."+r;if((0,K.Sn)(i)){var s=c(0,0,i);(s=l(e,o,t,(0,K.Sy)(i),s))&&(u[t]=s.value)}})),s.value=u}else{var p={path:n,name:r,type:i,prop:s,sanitizer:t};s=a.call(t,p)}}return s}e&&i.push(e),t.addSanitizer=function(e){e&&(r.push(e),n={})},t.addFieldSanitizer=function(e){e&&(i.push(e),n={})},t.handleField=function(e,t){var n=s(e,t);return!!n&&n.canHandle},t.value=function(e,t,n,r){var i=s(e,t);if(i&&i.canHandle){if(!i||!i.canHandle)return null;if(i.handler)return i.handler.value(e,t,n,r);if(!(0,o.HD)(t)||(0,o.le)(n)||""===n)return null;var l=null,u=(0,K.Sy)(n);if(8192==(8192&u)){var d=-8193&u;if(l=n,!(0,K.Sn)(l.value)||1!==d&&2!==d&&3!==d&&4096!=(4096&d))return null}else 1===u||2===u||3===u||4096==(4096&u)?l=c(0,0,n):4===u&&(l=c(0,0,r?JSON.stringify(n):n));if(l)return a(i,e,t,u,l,r)}return null},t.property=function(e,t,n,r){var i=s(e,t);if(!i||!i.canHandle)return null;if(!(0,o.HD)(t)||(0,o.le)(n)||!(0,K.Sn)(n.value))return null;var c=(0,K.Sy)(n.value);return 0===c?null:a(i,e,t,c,n,r)}}return e.getFieldType=K.Sy,e}(),te=100,ne=n(28452),re=n(28956),ie=n(47954),oe=n(19406),se=n(1550),ae=n(56207)},65705:(e,t,n)=>{"use strict";n.d(t,{Do:()=>D,Gf:()=>p,IZ:()=>C,JT:()=>M,Sn:()=>b,Sy:()=>A,Tr:()=>F,Vv:()=>k,cQ:()=>L,cm:()=>x,d8:()=>I,dH:()=>v,ej:()=>T,hK:()=>j,if:()=>O,jM:()=>w,kT:()=>E,l7:()=>R,mJ:()=>U,oF:()=>P,oS:()=>N,ot:()=>K,r7:()=>S,vs:()=>h,x9:()=>y,yj:()=>_});var r,i=n(1550),o=n(30175),s=n(49251),a=n(24869),c=n(88140),l=n(28956),u=n(47954),d=n(19406),p="3.2.3",h="1DS-Web-JS-"+p,f="withCredentials",g=((r={})[0]=0,r[2]=6,r[1]=1,r[3]=7,r[4098]=6,r[4097]=1,r[4099]=7,r),m=null,y=Boolean((0,s.Me)()),v=Boolean((0,s.Jj)());function b(e){return!(""===e||(0,a.le)(e))}function w(e){if(e){var t=e.indexOf("-");if(t>-1)return e.substring(0,t)}return""}function C(){return null===m&&(m=!(0,a.o8)(Uint8Array)&&!function(){var e=(0,s.jW)();if(!(0,a.o8)(e)&&e.userAgent){var t=e.userAgent.toLowerCase();if((t.indexOf("safari")>=0||t.indexOf("firefox")>=0)&&t.indexOf("chrome")<0)return!0}return!1}()&&!(0,s.b$)()),m}function S(e){return!!(e&&(0,a.hj)(e)&&e>=1&&e<=4)}function _(e,t,n){if(!t&&!b(t)||"string"!=typeof e)return null;var r=typeof t;if("string"===r||"number"===r||"boolean"===r||(0,a.kJ)(t))t={value:t};else if("object"!==r||t.hasOwnProperty("value")){if((0,a.le)(t.value)||""===t.value||!(0,a.HD)(t.value)&&!(0,a.hj)(t.value)&&!(0,a.jn)(t.value)&&!(0,a.kJ)(t.value))return null}else t={value:n?JSON.stringify(t):t};if((0,a.kJ)(t.value)&&!M(t.value))return null;if(!(0,a.le)(t.kind)){if((0,a.kJ)(t.value)||!N(t.kind))return null;t.value=t.value.toString()}return t}function k(e,t,n){var r=-1;if(!(0,a.o8)(e))if(t>0&&(32===t?r=8192:t<=13&&(r=t<<5)),function(e){return e>=0&&e<=9}(n))-1===r&&(r=0),r|=n;else{var i=g[A(e)]||-1;-1!==r&&-1!==i?r|=i:6===i&&(r=i)}return r}function P(){(0,c.JP)(null).setEnabled(!1)}function I(e,t,n){(0,c.p7)(null)&&(0,c.JP)(null).set(e,t,86400*n,null,"/")}function E(e){(0,c.p7)(null)&&(0,c.JP)(null).del(e)}function T(e){return(0,c.p7)(null)?D((0,c.JP)(null),e):""}function D(e,t,n){var r;return void 0===n&&(n=!0),e&&(r=e.get(t),n&&r&&decodeURIComponent&&(r=decodeURIComponent(r))),r||""}function x(e){void 0===e&&(e="D");var t=(0,l.GW)();return"B"===e?t="{"+t+"}":"P"===e?t="("+t+")":"N"===e&&(t=t.replace(/-/g,"")),t}function R(e,t,n,r,o){var s={},c=!1,l=0,u=arguments.length,d=Object[i.hB],p=arguments;for("[object Boolean]"===d.toString.call(p[0])&&(c=p[0],l++);l<u;l++)e=p[l],(0,a.rW)(e,(function(e,t){c&&t&&(0,a.Kn)(t)?(0,a.kJ)(t)?(s[e]=s[e]||[],(0,a.tO)(t,(function(t,n){t&&(0,a.Kn)(t)?s[e][n]=R(!0,s[e][n],t):s[e][n]=t}))):s[e]=R(!0,s[e],t):s[e]=t}));return s}var j=l.Jj;function N(e){return 0===e||e>0&&e<=13||32===e}function M(e){return e.length>0}function O(e,t){var n=e;n.timings=n.timings||{},n.timings.processTelemetryStart=n.timings.processTelemetryStart||{},n.timings.processTelemetryStart[t]=j()}function A(e){var t=0;if(null!=e){var n=typeof e;"string"===n?t=1:"number"===n?t=2:"boolean"===n?t=3:n===i.fK&&(t=4,(0,a.kJ)(e)?(t=4096,e.length>0&&(t|=A(e[0]))):(0,a.nr)(e,"value")&&(t=8192|A(e.value)))}return t}var L={Version:p,FullVersionString:h,strUndefined:i.jA,strObject:i.fK,Undefined:i.jA,arrForEach:a.tO,arrIndexOf:a.UA,arrMap:a.Mr,arrReduce:a.Xz,objKeys:a.FY,toISOString:a.Y6,isReactNative:s.b$,isString:a.HD,isNumber:a.hj,isBoolean:a.jn,isFunction:a.mf,isArray:a.kJ,isObject:a.Kn,strTrim:a.nd,isDocumentObjectAvailable:y,isWindowObjectAvailable:v,isValueAssigned:b,getTenantId:w,isBeaconsSupported:s.MF,isUint8ArrayAvailable:C,isLatency:S,sanitizeProperty:_,getISOString:a.Y6,useXDomainRequest:s.cp,getCommonSchemaMetaData:k,cookieAvailable:c.p7,disallowsSameSiteNone:c.UY,setCookie:I,deleteCookie:E,getCookie:T,createGuid:x,extend:R,getTime:j,isValueKind:N,isArrayValid:M,objDefineAccessors:a.l_,addPageUnloadEventListener:u.c9,setProcessTelemetryTimings:O,addEventHandler:u.Ib,getFieldValueType:A,strEndsWith:a.Id,objForEachKey:a.rW},F={_canUseCookies:void 0,isTypeof:a.Ym,isUndefined:a.o8,isNullOrUndefined:a.le,hasOwnProperty:a.nr,isFunction:a.mf,isObject:a.Kn,isDate:a.J_,isArray:a.kJ,isError:a.VZ,isString:a.HD,isNumber:a.hj,isBoolean:a.jn,toISOString:a.Y6,arrForEach:a.tO,arrIndexOf:a.UA,arrMap:a.Mr,arrReduce:a.Xz,strTrim:a.nd,objCreate:o.pu,objKeys:a.FY,objDefineAccessors:a.l_,addEventHandler:u.Ib,dateNow:a.m6,isIE:s.w1,disableCookies:P,newGuid:l.GW,perfNow:l.Jj,newId:d.pZ,randomValue:d.az,random32:d._l,mwcRandomSeed:d.CN,mwcRandom32:d.F6,generateW3CId:l.DO};function U(){return!!(0,s.a8)("chrome")}function K(e,t,n,r,i,o){function s(e,t,n){try{e[t]=n}catch(e){}}void 0===r&&(r=!1),void 0===i&&(i=!1);var a=new XMLHttpRequest;return r&&s(a,"Microsoft_ApplicationInsights_BypassAjaxInstrumentation",r),n&&s(a,f,n),a.open(e,t,!i),n&&s(a,f,n),!i&&o&&s(a,"timeout",o),a}},63391:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BE_PROFILE:()=>m,NRT_PROFILE:()=>g,PostChannel:()=>re,RT_PROFILE:()=>f});var r=n(27421),i=n(29141),o=n(81782),s=n(47954),a=n(87624),c=n(65705),l=n(24869),u=n(49251),d=n(28452),p=n(29339),h=n(87951),f="REAL_TIME",g="NEAR_REAL_TIME",m="BEST_EFFORT",y="POST",v="drop",b="requeue",w="application/x-json-stream",C="cache-control",S="content-type",_="time-delta-millis",k="client-version",P="client-id",I="time-delta-to-apply-millis",E="upload-time",T="apikey",D="AuthMsaDeviceTicket",x="AuthXToken";function R(e){var t=(e.ext||{}).intweb;return t&&(0,c.Sn)(t.msfpc)?t.msfpc:null}function j(e){for(var t=null,n=0;null===t&&n<e.length;n++)t=R(e[n]);return t}var N=function(){function e(t,n){var r=n?[].concat(n):[],i=this,o=j(r);i.iKey=function(){return t},i.Msfpc=function(){return o||""},i.count=function(){return r.length},i.events=function(){return r},i.addEvent=function(e){return!!e&&(r.push(e),o||(o=R(e)),!0)},i.split=function(n,i){var s;if(n<r.length){var a=r.length-n;(0,l.le)(i)||(a=i<a?i:a),s=r.splice(n,a),o=j(r)}return new e(t,s)}}return e.create=function(t,n){return new e(t,n)},e}(),M=n(1550),O=2e6,A=Math.min(O,65e3),L=/\./,F=function e(t,n,r,s){var a="baseData",u=!!s,d=n,p={};(0,i.Z)(e,this,(function(e){function n(e,t,i,o,s,a,h){(0,l.rW)(e,(function(e,f){var g=null;if(f||(0,c.Sn)(f)){var m=i,y=e,v=s,b=t;if(u&&!o&&L.test(e)){var w=e.split("."),C=w.length;if(C>1){v&&(v=v.slice());for(var S=0;S<C-1;S++){var _=w[S];b=b[_]=b[_]||{},m+="."+_,v&&v.push(_)}y=w[C-1]}}var k=o&&function(e,t){var n=p[e];return void 0===n&&(e.length>=7&&(n=(0,l.xe)(e,"ext.metadata")||(0,l.xe)(e,"ext.web")),p[e]=n),n}(m);if(g=!k&&d&&d.handleField(m,y)?d.value(m,y,f,r):(0,c.yj)(y,f,r)){var P=g.value;if(b[y]=P,a&&a(v,y,g),h&&"object"==typeof P&&!(0,l.kJ)(P)){var I=v;I&&(I=I.slice()).push(y),n(f,P,m+"."+y,o,I,a,h)}}}}))}e.createPayload=function(e,t,n,r,i,o){return{apiKeys:[],payloadBlob:"",overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:e,isTeardown:t,isSync:n,isBeacon:r,sendType:o,sendReason:i}},e.appendPayload=function(n,r,i){var s=n&&r&&!n.overflow;return s&&(0,o.Lm)(t,(function(){return"Serializer:appendPayload"}),(function(){for(var t=r.events(),o=n.payloadBlob,s=n.numEvents,a=!1,c=[],u=[],d=n.isBeacon,p=d?65e3:3984588,h=d?A:O,f=0,g=0;f<t.length;){var m=t[f];if(m){if(s>=i){n.overflow=r.split(f);break}var y=e.getEventBlob(m);if(y&&y.length<=h){var v=y.length;if(o.length+v>p){n.overflow=r.split(f);break}o&&(o+="\n"),o+=y,++g>20&&(o.substr(0,1),g=0),a=!0,s++}else y?c.push(m):u.push(m),t.splice(f,1),f--}f++}if(c&&c.length>0&&n.sizeExceed.push(N.create(r.iKey(),c)),u&&u.length>0&&n.failedEvts.push(N.create(r.iKey(),u)),a){n.batches.push(r),n.payloadBlob=o,n.numEvents=s;var b=r.iKey();-1===(0,l.UA)(n.apiKeys,b)&&n.apiKeys.push(b)}}),(function(){return{payload:n,theBatch:{iKey:r.iKey(),evts:r.events()},max:i}})),s},e.getEventBlob=function(e){try{return(0,o.Lm)(t,(function(){return"Serializer.getEventBlob"}),(function(){var t={};t.name=e.name,t.time=e.time,t.ver=e.ver,t.iKey="o:"+(0,c.jM)(e.iKey);var r={},i=e.ext;i&&(t.ext=r,(0,l.rW)(i,(function(e,t){n(t,r[e]={},"ext."+e,!0,null,null,!0)})));var o=t.data={};o.baseType=e.baseType;var s=o.baseData={};return n(e.baseData,s,a,!1,[a],(function(e,t,n){U(r,e,t,n)}),!0),n(e.data,o,"data",!1,[],(function(e,t,n){U(r,e,t,n)}),!0),JSON.stringify(t)}),(function(){return{item:e}}))}catch(e){return null}}}))};function U(e,t,n,r){if(r&&e){var i=(0,c.Vv)(r.value,r.kind,r.propertyType);if(i>-1){var o=e.metadata;o||(o=e.metadata={f:{}});var s=o.f;if(s||(s=o.f={}),t)for(var a=0;a<t.length;a++){var u=t[a];s[u]||(s[u]={f:{}});var d=s[u].f;d||(d=s[u].f={}),s=d}s=s[n]={},(0,l.kJ)(r.value)?s.a={t:i}:s.t=i}}}function K(e){var t,n=Math.floor(1200*Math.random())+2400;return t=Math.pow(2,e)*n,Math.min(t,6e5)}const W=function e(){var t={};(0,i.Z)(e,this,(function(e){e.setKillSwitchTenants=function(e,n){if(e&&n)try{var r=(s=e.split(","),a=[],s&&(0,l.tO)(s,(function(e){a.push((0,l.nd)(e))})),a);if("this-request-only"===n)return r;for(var i=1e3*parseInt(n,10),o=0;o<r.length;++o)t[r[o]]=(0,l.m6)()+i}catch(e){return[]}var s,a;return[]},e.isTenantKilled=function(e){var n=t,r=(0,l.nd)(e);return void 0!==n[r]&&n[r]>(0,l.m6)()||(delete n[r],!1)}}))},V=function e(){var t=!0,n=!0,r=!0,o="use-collector-delta",s=!1;(0,i.Z)(e,this,(function(e){e.allowRequestSending=function(){return t},e.firstRequestSent=function(){r&&(r=!1,s||(t=!1))},e.shouldAddClockSkewHeaders=function(){return n},e.getClockSkewHeaderValue=function(){return o},e.setClockSkew=function(e){s||(e?(o=e,n=!0,s=!0):n=!1,t=!0)}}))};var H,B="&NoResponseBody=true",q=((H={})[1]=b,H[100]=b,H[200]="sent",H[8004]=v,H[8003]=v,H),J={},$={};function G(e,t,n){J[e]=t,!1!==n&&($[t]=e)}function z(e){try{return e.responseText}catch(e){}return""}function Y(e,t){var n=!1;if(e&&t){var r=(0,l.FY)(e);if(r&&r.length>0)for(var i=t.toLowerCase(),o=0;o<r.length;o++){var s=r[o];if(s&&(0,l.nr)(t,s)&&s.toLowerCase()===i){n=!0;break}}}return n}function Q(e,t,n,r){t&&n&&n.length>0&&(r&&J[t]?(e.hdrs[J[t]]=n,e.useHdrs=!0):e.url+="&"+t+"="+n)}G(D,D,!1),G(k,k),G(P,"Client-Id"),G(T,T),G(I,I),G(E,E),G(x,x);var X=function e(t,n,r,s,a){this._responseHandlers=[];var d,h,f,g,m,b,D="?cors=true&"+S.toLowerCase()+"="+w,x=new W,R=!1,j=new V,N=!1,O=0,A=!0,L=[],U={},H=[],J=null,G=!1,X=!1,Z=!1;(0,i.Z)(e,this,(function(e){var i=!0;function W(e,t){for(var n=0,r=null,i=0;null==r&&i<e.length;)1===(n=e[i])?(0,u.cp)()?r=V:(0,u.Z3)()&&(r=te):2===n&&(0,u.JO)(t)?r=ee:N&&3===n&&(0,u.MF)()&&(r=re),i++;return r?{_transport:n,_isSync:t,sendPOST:r}:null}function V(e,t,n){var r=new XDomainRequest;r.open(y,e.urlString),e.timeout&&(r.timeout=e.timeout),r.onload=function(){var e=z(r);ne(t,200,{},e),fe(e)},r.onerror=function(){ne(t,400,{})},r.ontimeout=function(){ne(t,500,{})},r.onprogress=function(){},n?r.send(e.data):a.set((function(){r.send(e.data)}),0)}function ee(e,t,n){var r,o=e.urlString,s=!1,c=!1,u=((r={body:e.data,method:y}).Microsoft_ApplicationInsights_BypassAjaxInstrumentation=!0,r);n&&(u.keepalive=!0,2===e._sendReason&&(s=!0,o+=B)),i&&(u.credentials="include"),e.headers&&(0,l.FY)(e.headers).length>0&&(u.headers=e.headers),fetch(o,u).then((function(e){var n={},r="";e.headers&&e.headers.forEach((function(e,t){n[t]=e})),e.body&&e.text().then((function(e){r=e})),c||(c=!0,ne(t,e.status,n,r),fe(r))})).catch((function(e){c||(c=!0,ne(t,0,{}))})),s&&!c&&(c=!0,ne(t,200,{})),!c&&e.timeout>0&&a.set((function(){c||(c=!0,ne(t,500,{}))}),e.timeout)}function te(e,t,n){var r=e.urlString;function o(e,t,n){if(!e[n]&&t&&t.getResponseHeader){var r=t.getResponseHeader(n);r&&(e[n]=(0,l.nd)(r))}return e}function s(e,n){ne(t,e.status,function(e){var t={};return e.getAllResponseHeaders?t=function(e){var t={};if((0,l.HD)(e)){var n=(0,l.nd)(e).split(/[\r\n]+/);(0,l.tO)(n,(function(e){if(e){var n=e.indexOf(": ");if(-1!==n){var r=(0,l.nd)(e.substring(0,n)).toLowerCase(),i=(0,l.nd)(e.substring(n+1));t[r]=i}else t[(0,l.nd)(e)]=1}}))}return t}(e.getAllResponseHeaders()):(t=o(t,e,_),t=o(t,e,"kill-duration"),t=o(t,e,"kill-duration-seconds")),t}(e),n)}n&&e.disableXhrSync&&(n=!1);var a=(0,c.ot)(y,r,i,!0,n,e.timeout);(0,l.rW)(e.headers,(function(e,t){a.setRequestHeader(e,t)})),a.onload=function(){var e=z(a);s(a,e),fe(e)},a.onerror=function(){s(a)},a.ontimeout=function(){s(a)},a.send(e.data)}function ne(e,t,n,r){try{e(t,n,r)}catch(e){(0,p.kP)(d.diagLog(),2,518,(0,u.eU)(e))}}function re(e,t,n){var r=200,i=e._thePayload,o=e.urlString+B;try{var s=(0,u.jW)();if(!s.sendBeacon(o,e.data))if(i){var a=[];(0,l.tO)(i.batches,(function(e){if(a&&e&&e.count()>0){for(var t=e.events(),n=0;n<t.length;n++)if(!s.sendBeacon(o,J.getEventBlob(t[n]))){a.push(e.split(n));break}}else a.push(e.split(0))})),ge(a,8003,i.sendType,!0)}else r=0}catch(e){d.diagLog().warnToConsole("Failed to send telemetry using sendBeacon API. Ex:"+(0,u.eU)(e)),r=0}finally{ne(t,r,{},"")}}function ie(e){return 2===e||3===e}function oe(e){return X&&ie(e)&&(e=2),e}function se(){return!R&&O<n}function ae(){var e=H;return H=[],e}function ce(e,t,n){var r=!1;return e&&e.length>0&&!R&&h[t]&&J&&(r=0!==t||se()&&(n>0||j.allowRequestSending())),r}function le(e){var t={};return e&&(0,l.tO)(e,(function(e,n){t[n]={iKey:e.iKey(),evts:e.events()}})),t}function ue(e,n,r,i,s){if(e&&0!==e.length)if(R)ge(e,1,i);else{i=oe(i);try{var a=e,l=0!==i;(0,o.Lm)(f,(function(){return"HttpManager:_sendBatches"}),(function(o){o&&(e=e.slice(0));for(var a=[],d=null,p=(0,c.hK)(),f=h[i]||(l?h[1]:h[0]),g=(X||ie(i)||f&&3===f._transport)&&!A&&N&&(0,u.MF)();ce(e,i,n);){var m=e.shift();m&&m.count()>0&&(x.isTenantKilled(m.iKey())?a.push(m):(d=d||J.createPayload(n,r,l,g,s,i),J.appendPayload(d,m,t)?null!==d.overflow&&(e=[d.overflow].concat(e),d.overflow=null,pe(d,p,(0,c.hK)(),s),p=(0,c.hK)(),d=null):(pe(d,p,(0,c.hK)(),s),p=(0,c.hK)(),e=[m].concat(e),d=null)))}d&&pe(d,p,(0,c.hK)(),s),e.length>0&&(H=e.concat(H)),ge(a,8004,i)}),(function(){return{batches:le(a),retryCount:n,isTeardown:r,isSynchronous:l,sendReason:s,useSendBeacon:ie(i),sendType:i}}),!l)}catch(e){(0,p.kP)(d.diagLog(),2,48,"Unexpected Exception sending batch: "+(0,u.eU)(e))}}}function de(e,t,n){e[t]=e[t]||{},e[t][d.identifier]=n}function pe(t,n,i,s){if(t&&t.payloadBlob&&t.payloadBlob.length>0){var a=!!e.sendHook,p=h[t.sendType];!ie(t.sendType)&&t.isBeacon&&2===t.sendReason&&(p=h[2]||h[3]||p);var g=Z;(t.isBeacon||3===p._transport)&&(g=!1);var y=function(e,t){var n={url:D,hdrs:{},useHdrs:!1};t?(n.hdrs=(0,c.l7)(n.hdrs,U),n.useHdrs=(0,l.FY)(n.hdrs).length>0):(0,l.rW)(U,(function(e,t){$[e]?Q(n,$[e],t,!1):(n.hdrs[e]=t,n.useHdrs=!0)})),Q(n,P,"NO_AUTH",t),Q(n,k,c.vs,t);var r="";(0,l.tO)(e.apiKeys,(function(e){r.length>0&&(r+=","),r+=e})),Q(n,T,r,t),Q(n,E,(0,l.m6)().toString(),t);var i=function(e){for(var t=0;t<e.batches.length;t++){var n=e.batches[t].Msfpc();if(n)return encodeURIComponent(n)}return""}(e);if((0,c.Sn)(i)&&(n.url+="&ext.intweb.msfpc="+i),j.shouldAddClockSkewHeaders()&&Q(n,I,j.getClockSkewHeaderValue(),t),f.getWParam){var o=f.getWParam();o>=0&&(n.url+="&w="+o)}for(var s=0;s<L.length;s++)n.url+="&"+L[s].name+"="+L[s].value;return n}(t,g);g=g||y.useHdrs;var v=(0,c.hK)();(0,o.Lm)(f,(function(){return"HttpManager:_doPayloadSend"}),(function(){for(var h=0;h<t.batches.length;h++)for(var k=t.batches[h].events(),P=0;P<k.length;P++){var I=k[P];if(G){var E=I.timings=I.timings||{};de(E,"sendEventStart",v),de(E,"serializationStart",n),de(E,"serializationCompleted",i)}I.sendAttempt>0?I.sendAttempt++:I.sendAttempt=1}ge(t.batches,1e3+(s||0),t.sendType,!0);var T={data:t.payloadBlob,urlString:y.url,headers:y.hdrs,_thePayload:t,_sendReason:s,timeout:m};(0,l.o8)(b)||(T.disableXhrSync=!!b),g&&(Y(T.headers,C)||(T.headers[C]="no-cache, no-store"),Y(T.headers,S)||(T.headers["content-type"]=w));var D=null;p&&(D=function(n){j.firstRequestSent();var i=function(n,i){!function(t,n,i,o){var s,a=9e3,u=null,p=!1,h=!1;try{var f=!0;if(typeof t!==M.jA){if(n){j.setClockSkew(n[_]);var g=n["kill-duration"]||n["kill-duration-seconds"];(0,l.tO)(x.setKillSwitchTenants(n["kill-tokens"],g),(function(e){(0,l.tO)(i.batches,(function(t){if(t.iKey()===e){u=u||[];var n=t.split(0);i.numEvents-=n.count(),u.push(n)}}))}))}if(200==t||204==t)return void(a=200);((s=t)>=300&&s<500&&408!=s&&429!=s||501==s||505==s||i.numEvents<=0)&&(f=!1),a=9e3+t%1e3}if(f){a=100;var m=i.retryCnt;0===i.sendType&&(m<r?(p=!0,he((function(){0===i.sendType&&O--,ue(i.batches,m+1,i.isTeardown,X?2:i.sendType,5)}),X,K(m))):(h=!0,X&&(a=8001)))}}finally{p||(j.setClockSkew(),function(t,n,r,i){try{i&&d._backOffTransmission(),200===n&&(i||t.isSync||d._clearBackOff(),function(e){if(G){var t=(0,c.hK)();(0,l.tO)(e,(function(e){e&&e.count()>0&&function(e,t){G&&(0,l.tO)(e,(function(e){de(e.timings=e.timings||{},"sendEventCompleted",t)}))}(e.events(),t)}))}}(t.batches)),ge(t.batches,n,t.sendType,!0)}finally{0===t.sendType&&(O--,5!==r&&e.sendQueuedRequests(t.sendType,r))}}(i,a,o,h)),ge(u,8004,i.sendType)}}(n,i,t,s)},o=t.isTeardown||t.isSync;try{p.sendPOST(n,i,o),e.sendListener&&e.sendListener(T,n,o,t.isBeacon)}catch(e){d.diagLog().warnToConsole("Unexpected exception sending payload. Ex:"+(0,u.eU)(e)),ne(i,0,{})}}),(0,o.Lm)(f,(function(){return"HttpManager:_doPayloadSend.sender"}),(function(){if(D)if(0===t.sendType&&O++,a&&!t.isBeacon&&3!==p._transport){var n={data:T.data,urlString:T.urlString,headers:(0,c.l7)({},T.headers),timeout:T.timeout,disableXhrSync:T.disableXhrSync},r=!1;(0,o.Lm)(f,(function(){return"HttpManager:_doPayloadSend.sendHook"}),(function(){try{e.sendHook(n,(function(e){r=!0,A||e._thePayload||(e._thePayload=e._thePayload||T._thePayload,e._sendReason=e._sendReason||T._sendReason),D(e)}),t.isSync||t.isTeardown)}catch(e){r||D(T)}}))}else D(T)}))}),(function(){return{thePayload:t,serializationStart:n,serializationCompleted:i,sendReason:s}}),t.isSync)}t.sizeExceed&&t.sizeExceed.length>0&&ge(t.sizeExceed,8003,t.sendType),t.failedEvts&&t.failedEvts.length>0&&ge(t.failedEvts,8002,t.sendType)}function he(e,t,n){t?e():a.set(e,n)}function fe(t){var n=e._responseHandlers;try{for(var r=0;r<n.length;r++)try{n[r](t)}catch(e){(0,p.kP)(d.diagLog(),1,519,"Response handler failed: "+e)}if(t){var i=JSON.parse(t);(0,c.Sn)(i.webResult)&&(0,c.Sn)(i.webResult.msfpc)&&g.set("MSFPC",i.webResult.msfpc,31536e3)}}catch(e){}}function ge(e,t,n,r){if(e&&e.length>0&&s){var i=s[(l=t,u=q[l],(0,c.Sn)(u)||(u="oth",l>=9e3&&l<=9999?u="rspFail":l>=8e3&&l<=8999?u=v:l>=1e3&&l<=1999&&(u="send")),u)];if(i){var a=0!==n;(0,o.Lm)(f,(function(){return"HttpManager:_sendBatchesNotification"}),(function(){he((function(){try{i.call(s,e,t,a,n)}catch(e){(0,p.kP)(d.diagLog(),1,74,"send request notification failed: "+e)}}),r||a,0)}),(function(){return{batches:le(e),reason:t,isSync:a,sendSync:r,sendType:n}}),!a)}}var l,u}e.initialize=function(e,t,n,r,o){var s;o||(o={}),D=e+D,Z=!!(0,l.o8)(o.avoidOptions)||!o.avoidOptions,f=t,g=t.getCookieMgr(),G=!f.config.disableEventTimings;var a=!!f.config.enableCompoundKey;d=n;var c=o.valueSanitizer,p=o.stringifyObjects;(0,l.o8)(o.enableCompoundKey)||(a=!!o.enableCompoundKey),m=o.xhrTimeout,b=o.disableXhrSync,N=!(0,u.b$)(),J=new F(f,c,p,a);var y=r,v=o.alwaysUseXhrOverride?r:null,w=o.alwaysUseXhrOverride?r:null;if(!r){A=!1;var C=(0,u.k$)();C&&C.protocol&&"file:"===C.protocol.toLowerCase()&&(i=!1);var S=[];S=(0,u.b$)()?[2,1]:[1,2,3];var _=o.transports;_&&((0,l.hj)(_)?S=[_].concat(S):(0,l.kJ)(_)&&(S=_.concat(S))),r=W(S,!1),y=W(S,!0),r||d.diagLog().warnToConsole("No available transport to send events")}(s={})[0]=r,s[1]=y||W([1,2,3],!0),s[2]=v||W([3,2],!0)||y||W([1],!0),s[3]=w||W([2,3],!0)||y||W([1],!0),h=s},e._getDbgPlgTargets=function(){return[h[0],x,J,h]},e.addQueryStringParameter=function(e,t){for(var n=0;n<L.length;n++)if(L[n].name===e)return void(L[n].value=t);L.push({name:e,value:t})},e.addHeader=function(e,t){U[e]=t},e.canSendRequest=function(){return se()&&j.allowRequestSending()},e.sendQueuedRequests=function(e,t){(0,l.o8)(e)&&(e=0),X&&(e=oe(e),t=2),ce(H,e,0)&&ue(ae(),0,!1,e,t||0)},e.isCompletelyIdle=function(){return!R&&0===O&&0===H.length},e.setUnloading=function(e){X=e},e.addBatch=function(e){if(e&&e.count()>0){if(x.isTenantKilled(e.iKey()))return!1;H.push(e)}return!0},e.teardown=function(){H.length>0&&ue(ae(),0,!0,2,2)},e.pause=function(){R=!0},e.resume=function(){R=!1,e.sendQueuedRequests(0,4)},e.sendSynchronousBatch=function(e,t,n){e&&e.count()>0&&((0,l.le)(t)&&(t=1),X&&(t=oe(t),n=2),ue([e],0,!1,t,n||0))}}))};function Z(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout(e,t,n)}function ee(e){clearTimeout(e)}function te(e,t){return{set:e||Z,clear:t||ee}}var ne="eventsDiscarded";const re=function(e){function t(){var n,r=e.call(this)||this;r.identifier="PostChannel",r.priority=1011,r.version="3.2.3";var h,y,v,b,w,C,S,_=!1,k=[],P=null,I=!1,E=0,T=500,x=0,R=1e4,j={},M=f,O=null,A=null,L=0,F=0,U={},W=-1,V=!0,H=!1,B=6,q=2;return(0,i.Z)(t,r,(function(e,t){function r(e){"beforeunload"!==(e||(0,u.Jj)().event).type&&(H=!0,y.setUnloading(H)),ee(2,2)}function i(e){H=!1,y.setUnloading(H)}function J(e,t){if(e.sendAttempt||(e.sendAttempt=0),e.latency||(e.latency=1),e.ext&&e.ext.trace&&delete e.ext.trace,e.ext&&e.ext.user&&e.ext.user.id&&delete e.ext.user.id,V&&(e.ext=(0,l.Ax)(e.ext),e.baseData&&(e.baseData=(0,l.Ax)(e.baseData)),e.data&&(e.data=(0,l.Ax)(e.data))),e.sync)if(L||I)e.latency=3,e.sync=!1;else if(y)return V&&(e=(0,l.Ax)(e)),void y.sendSynchronousBatch(N.create(e.iKey,[e]),!0===e.sync?1:e.sync,3);var n=e.latency,r=x,i=R;4===n&&(r=E,i=T);var o=!1;if(r<i)o=!oe(e,t);else{var s=1,a=20;4===n&&(s=4,a=1),o=!0,function(e,t,n,r){for(;n<=t;){var i=re(e,t,!0);if(i&&i.count()>0){var o=i.split(0,r),s=o.count();if(s>0)return 4===n?E-=s:x-=s,fe(ne,[o],d.h.QueueFull),!0}n++}return se(),!1}(e.iKey,e.latency,s,a)&&(o=!oe(e,t))}o&&he(ne,[e],d.h.QueueFull)}function $(e,t,n){var r=ae(e,t,n);return y.sendQueuedRequests(t,n),r}function G(){return x>0}function z(){if(W>=0&&ae(W,0,w)&&y.sendQueuedRequests(0,w),E>0&&!A&&!I){var e=j[M][2];e>=0&&(A=Q((function(){A=null,$(4,0,1),z()}),e))}var t=j[M][1];!O&&!P&&t>=0&&!I&&(G()?O=Q((function(){O=null,$(0===F?3:1,0,1),F++,F%=2,z()}),t):F=0)}function Y(){n=null,_=!1,k=[],P=null,I=!1,E=0,T=500,x=0,R=1e4,j={},M=f,O=null,A=null,L=0,F=0,h=null,U={},v=void 0,b=0,W=-1,w=null,V=!0,H=!1,B=6,q=2,C=null,S=te(),y=new X(500,2,1,{requeue:de,send:ge,sent:me,drop:ye,rspFail:ve,oth:be},S),ue(),U[4]={batches:[],iKeyMap:{}},U[3]={batches:[],iKeyMap:{}},U[2]={batches:[],iKeyMap:{}},U[1]={batches:[],iKeyMap:{}},we()}function Q(e,t){0===t&&L&&(t=1);var n=1e3;return L&&(n=K(L-1)),S.set(e,t*n)}function Z(){return null!==O&&(S.clear(O),O=null,F=0,!0)}function ee(e,t){Z(),P&&(S.clear(P),P=null),I||$(1,e,t)}function re(e,t,n){var r=U[t];r||(r=U[t=1]);var i=r.iKeyMap[e];return!i&&n&&(i=N.create(e),r.batches.push(i),r.iKeyMap[e]=i),i}function ie(t,n){y.canSendRequest()&&!L&&(v>0&&x>v&&(n=!0),n&&null==P&&e.flush(t,null,20))}function oe(e,t){V&&(e=(0,l.Ax)(e));var n=e.latency,r=re(e.iKey,n,!0);return!!r.addEvent(e)&&(4!==n?(x++,t&&0===e.sendAttempt&&ie(!e.sync,b>0&&r.count()>=b)):E++,!0)}function se(){for(var e=0,t=0,n=function(n){var r=U[n];r&&r.batches&&(0,l.tO)(r.batches,(function(r){4===n?e+=r.count():t+=r.count()}))},r=1;r<=4;r++)n(r);x=t,E=e}function ae(t,n,r){var i=!1,s=0===n;return!s||y.canSendRequest()?(0,o.Lm)(e.core,(function(){return"PostChannel._queueBatches"}),(function(){for(var e=[],n=4;n>=t;){var r=U[n];r&&r.batches&&r.batches.length>0&&((0,l.tO)(r.batches,(function(t){y.addBatch(t)?i=i||t&&t.count()>0:e=e.concat(t.events()),4===n?E-=t.count():x-=t.count()})),r.batches=[],r.iKeyMap={}),n--}e.length>0&&he(ne,e,d.h.KillSwitch),i&&W>=t&&(W=-1,w=0)}),(function(){return{latency:t,sendType:n,sendReason:r}}),!s):(W=W>=0?Math.min(W,t):t,w=Math.max(w,r)),i}function ce(e,t){$(1,0,t),se(),le((function(){e&&e(),k.length>0?P=Q((function(){P=null,ce(k.shift(),t)}),0):(P=null,z())}))}function le(e){y.isCompletelyIdle()?e():P=Q((function(){P=null,le(e)}),.25)}function ue(){(j={})[f]=[2,1,0],j[g]=[6,3,0],j[m]=[18,9,0]}function de(t,n){var r=[],i=B;H&&(i=q),(0,l.tO)(t,(function(t){t&&t.count()>0&&(0,l.tO)(t.events(),(function(t){t&&(t.sync&&(t.latency=4,t.sync=!1),t.sendAttempt<i?((0,c.if)(t,e.identifier),J(t,!1)):r.push(t))}))})),r.length>0&&he(ne,r,d.h.NonRetryableStatus),H&&ee(2,2)}function pe(t,n){var r=e._notificationManager||{},i=r[t];if(i)try{i.apply(r,n)}catch(n){(0,p.kP)(e.diagLog(),1,74,t+" notification failed: "+n)}}function he(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t&&t.length>0&&pe(e,[t].concat(n))}function fe(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t&&t.length>0&&(0,l.tO)(t,(function(t){t&&t.count()>0&&pe(e,[t.events()].concat(n))}))}function ge(e,t,n){e&&e.length>0&&pe("eventsSendRequest",[t>=1e3&&t<=1999?t-1e3:0,!0!==n])}function me(e,t){fe("eventsSent",e,t),z()}function ye(e,t){fe(ne,e,t>=8e3&&t<=8999?t-8e3:d.h.Unknown)}function ve(e){fe(ne,e,d.h.NonRetryableStatus),z()}function be(e,t){fe(ne,e,d.h.Unknown),z()}function we(){b=n&&n.disableAutoBatchFlushLimit?0:Math.max(1500,R/6)}Y(),e._getDbgPlgTargets=function(){return[y]},e.initialize=function(u,d,p){(0,o.Lm)(d,(function(){return"PostChannel:initialize"}),(function(){var o=d;t.initialize(u,d,p);try{d.addUnloadCb,C=(0,s.jU)((0,a.J)(e.identifier),d.evtNamespace&&d.evtNamespace());var f=e._getTelCtx();u.extensionConfig[e.identifier]=u.extensionConfig[e.identifier]||{},n=f.getExtCfg(e.identifier),S=te(n.setTimeoutOverride,n.clearTimeoutOverride),V=!n.disableOptimizeObj&&(0,c.mJ)(),function(e){var t=e.getWParam;e.getWParam=function(){var e=0;return n.ignoreMc1Ms0CookieProcessing&&(e|=2),e|t()}}(o),n.eventsLimitInMem>0&&(R=n.eventsLimitInMem),n.immediateEventLimit>0&&(T=n.immediateEventLimit),n.autoFlushEventsLimit>0&&(v=n.autoFlushEventsLimit),(0,l.hj)(n.maxEventRetryAttempts)&&(B=n.maxEventRetryAttempts),(0,l.hj)(n.maxUnloadEventRetryAttempts)&&(q=n.maxUnloadEventRetryAttempts),we(),n.httpXHROverride&&n.httpXHROverride.sendPOST&&(h=n.httpXHROverride),(0,c.Sn)(u.anonCookieName)&&y.addQueryStringParameter("anoncknm",u.anonCookieName),y.sendHook=n.payloadPreprocessor,y.sendListener=n.payloadListener;var g=n.overrideEndpointUrl?n.overrideEndpointUrl:u.endpointUrl;e._notificationManager=u.extensionConfig.NotificationManager,y.initialize(g,e.core,e,h,n);var m=u.disablePageUnloadEvents||[];(0,s.c9)(r,m,C),(0,s.TJ)(r,m,C),(0,s.nD)(i,u.disablePageShowEvents,C)}catch(t){throw e.setInitialized(!1),t}}),(function(){return{coreConfig:u,core:d,extensions:p}}))},e.processTelemetry=function(t,r){(0,c.if)(t,e.identifier);var i=(r=e._getTelCtx(r)).getExtCfg(e.identifier),o=!!n.disableTelemetry;i&&(o=o||!!i.disableTelemetry);var s=t;o||_||(n.overrideInstrumentationKey&&(s.iKey=n.overrideInstrumentationKey),i&&i.overrideInstrumentationKey&&(s.iKey=i.overrideInstrumentationKey),J(s,!0),H?ee(2,2):z()),e.processNext(s,r)},e._doTeardown=function(e,t){ee(2,2),_=!0,y.teardown(),(0,s.JA)(null,C),(0,s.C9)(null,C),(0,s.Yl)(null,C),Y()},e.setEventQueueLimits=function(e,t){R=e>0?e:1e4,v=t>0?t:0,we();var n=x>e;if(!n&&b>0)for(var r=1;!n&&r<=3;r++){var i=U[r];i&&i.batches&&(0,l.tO)(i.batches,(function(e){e&&e.count()>=b&&(n=!0)}))}ie(!0,n)},e.pause=function(){Z(),I=!0,y.pause()},e.resume=function(){I=!1,y.resume(),z()},e.addResponseHandler=function(e){y._responseHandlers.push(e)},e._loadTransmitProfiles=function(e){Z(),ue(),M=f,z(),(0,l.rW)(e,(function(e,t){var n=t.length;if(n>=2){var r=n>2?t[2]:0;if(t.splice(0,n-2),t[1]<0&&(t[0]=-1),t[1]>0&&t[0]>0){var i=t[0]/t[1];t[0]=Math.ceil(i)*t[1]}r>=0&&t[1]>=0&&r>t[1]&&(r=t[1]),t.push(r),j[e]=t}}))},e.flush=function(e,t,n){if(void 0===e&&(e=!0),!I)if(n=n||1,e)null==P?(Z(),ae(1,0,n),P=Q((function(){P=null,ce(t,n)}),0)):k.push(t);else{var r=Z();$(1,1,n),null!=t&&t(),r&&z()}},e.setMsaAuthTicket=function(e){y.addHeader(D,e)},e.hasEvents=G,e._setTransmitProfile=function(e){M!==e&&void 0!==j[e]&&(Z(),M=e,z())},e._backOffTransmission=function(){L<4&&(L++,Z(),z())},e._clearBackOff=function(){L&&(L=0,Z(),z())},(0,l.l_)(e,"_setTimeoutOverride",(function(){return S.set}),(function(e){S=te(e,S.clear)})),(0,l.l_)(e,"_clearTimeoutOverride",(function(){return S.clear}),(function(e){S=te(S.set,e)}))})),r}return(0,r.ne)(t,e),t}(h.i)},50951:(e,t,n)=>{"use strict";n.d(t,{By:()=>i});var r=n(24869);function i(e){var t={};return(0,r.rW)(e,(function(e,n){t[e]=n,t[n]=e})),(0,r._A)(t)}},28452:(e,t,n)=>{"use strict";n.d(t,{h:()=>r});var r=(0,n(50951).By)({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5})},87951:(e,t,n)=>{"use strict";n.d(t,{i:()=>l});var r=n(29141),i=n(31030),o=n(24869),s=n(61733),a=n(38593),c=n(96335),l=function e(){var t,n,l,u,d,p=this;function h(e){void 0===e&&(e=null);var t=e;if(!t){var r=n||(0,i.CD)(null,{},p.core);t=l&&l.getPlugin?r.createNew(null,l.getPlugin):r.createNew(null,l)}return t}function f(e,t,r){e&&(0,o.sO)(e,s.F,[],null,o.le),!r&&t&&(r=t.getProcessTelContext().getNext());var a=l;l&&l.getPlugin&&(a=l.getPlugin()),p.core=t,n=(0,i.CD)(r,e,t,a)}function g(){t=!1,p.core=null,n=null,l=null,d=[],u=(0,a.Y)()}g(),(0,r.Z)(e,p,(function(e){e.initialize=function(e,n,r,i){f(e,n,i),t=!0},e.teardown=function(t,n){var r=e.core;if(r&&(!t||r===t.core())){var s,a=!1,p=t||(0,i.Bt)(null,r,l&&l.getPlugin?l.getPlugin():l),h=n||{reason:0,isAsync:!1};return e[c.Ho]&&!0===e[c.Ho](p,h,f)?s=!0:f(),s}function f(){a||(a=!0,u.run(p,n),(0,o.tO)(d,(function(e){e.rm()})),d=[],!0===s&&p.processNext(h),g())}},e.update=function(t,n){var r=e.core;if(r&&(!t||r===t.core())){var o,s=!1,a=t||(0,i.xy)(null,r,l&&l.getPlugin?l.getPlugin():l),c=n||{reason:0};return e._doUpdate&&!0===e._doUpdate(a,c,u)?o=!0:u(),o}function u(){s||(s=!0,f(a.getCfg(),a.core(),a.getNext()))}},e._addHook=function(e){e&&((0,o.kJ)(e)?d=d.concat(e):d.push(e))},(0,o.Oi)(e,"_addUnloadCb",(function(){return u}),"add")})),p.diagLog=function(e){return h(e).diagLog()},p[c.Vr]=function(){return t},p.setInitialized=function(e){t=e},p[c.El]=function(e){l=e},p.processNext=function(e,t){t?t.processNext(e):l&&(0,o.mf)(l.processTelemetry)&&l.processTelemetry(e,null)},p._getTelCtx=h}},61733:(e,t,n)=>{"use strict";n.d(t,{F:()=>i,z:()=>r});var r="iKey",i="extensionConfig"},88140:(e,t,n)=>{"use strict";n.d(t,{JP:()=>y,Nz:()=>v,UY:()=>P,kj:()=>g,p7:()=>b});var r=n(49251),i=n(24869),o=n(96335),s=n(29339),a="toGMTString",c="toUTCString",l=null,u=null,d=null,p=(0,r.Me)(),h={},f={};function g(e,t){var n=v._ckMgr||f._ckMgr;return n||(n=v._ckMgr=v(e,t),f._ckMgr=n),n}function m(e){return!e||e.isEnabled()}function y(e,t){var n;if(e)n=e.getCookieMgr();else if(t){var r=t.cookieCfg;n=r._ckMgr?r._ckMgr:v(t)}return n||(n=g(t,(e||{}).logger)),n}function v(e,t){var n=function(e){var t=e.cookieCfg=e.cookieCfg||{};if((0,i.sO)(t,"domain",e.cookieDomain,i.BX,i.le),(0,i.sO)(t,"path",e.cookiePath||"/",null,i.le),(0,i.le)(t.enabled)){var n=void 0;(0,i.o8)(e.isCookieUseDisabled)||(n=!e.isCookieUseDisabled),(0,i.o8)(e.disableCookiesUsage)||(n=!e.disableCookiesUsage),t.enabled=n}return t}(e||f),s=n.path||"/",l=n.domain,d=!1!==n.enabled,p={isEnabled:function(){var e=d&&b(t),n=f._ckMgr;return e&&n&&p!==n&&(e=m(n)),e},setEnabled:function(e){d=!1!==e},set:function(e,t,d,h,f){var g=!1;if(m(p)){var y={},v=(0,i.nd)(t||o.SM),b=v.indexOf(";");if(-1!==b&&(v=(0,i.nd)(t.substring(0,b)),y=w(t.substring(b+1))),(0,i.sO)(y,"domain",h||l,i.fQ,i.o8),!(0,i.le)(d)){var _=(0,r.w1)();if((0,i.o8)(y.expires)){var I=(0,i.m6)()+1e3*d;if(I>0){var E=new Date;E.setTime(I),(0,i.sO)(y,"expires",C(E,_?a:c)||C(E,_?a:c)||o.SM,i.fQ)}}_||(0,i.sO)(y,"max-age",o.SM+d,null,i.o8)}var T=(0,r.k$)();T&&"https:"===T.protocol&&((0,i.sO)(y,"secure",null,null,i.o8),null===u&&(u=!P(((0,r.jW)()||{}).userAgent)),u&&(0,i.sO)(y,"SameSite","None",null,i.o8)),(0,i.sO)(y,"path",f||s,null,i.o8),(n.setCookie||k)(e,S(v,y)),g=!0}return g},get:function(e){var t=o.SM;return m(p)&&(t=(n.getCookie||_)(e)),t},del:function(e,t){var n=!1;return m(p)&&(n=p.purge(e,t)),n},purge:function(e,i){var s,a=!1;if(b(t)){var c=((s={}).path=i||"/",s.expires="Thu, 01 Jan 1970 00:00:01 GMT",s);(0,r.w1)()||(c["max-age"]="0"),(n.delCookie||k)(e,S(o.SM,c)),a=!0}return a}};return p._ckMgr=p,p}function b(e){if(null===l){l=!1;try{l=void 0!==(p||{}).cookie}catch(t){(0,s.kP)(e,2,68,"Cannot access document.cookie - "+(0,i.jj)(t),{exception:(0,r.eU)(t)})}}return l}function w(e){var t={};if(e&&e.length){var n=(0,i.nd)(e).split(";");(0,i.tO)(n,(function(e){if(e=(0,i.nd)(e||o.SM)){var n=e.indexOf("=");-1===n?t[e]=null:t[(0,i.nd)(e.substring(0,n))]=(0,i.nd)(e.substring(n+1))}}))}return t}function C(e,t){return(0,i.mf)(e[t])?e[t]():null}function S(e,t){var n=e||o.SM;return(0,i.rW)(t,(function(e,t){n+="; "+e+((0,i.le)(t)?o.SM:"="+t)})),n}function _(e){var t=o.SM;if(p){var n=p.cookie||o.SM;d!==n&&(h=w(n),d=n),t=(0,i.nd)(h[e]||o.SM)}return t}function k(e,t){p&&(p.cookie=e+"="+t)}function P(e){return!(!(0,i.HD)(e)||!(0,i._Q)(e,"CPU iPhone OS 12")&&!(0,i._Q)(e,"iPad; CPU OS 12")&&!((0,i._Q)(e,"Macintosh; Intel Mac OS X 10_14")&&(0,i._Q)(e,"Version/")&&(0,i._Q)(e,"Safari"))&&(!(0,i._Q)(e,"Macintosh; Intel Mac OS X 10_14")||!(0,i.Id)(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)"))&&!(0,i._Q)(e,"Chrome/5")&&!(0,i._Q)(e,"Chrome/6")&&(!(0,i._Q)(e,"UnrealEngine")||(0,i._Q)(e,"Chrome"))&&!(0,i._Q)(e,"UCBrowser/12")&&!(0,i._Q)(e,"UCBrowser/11"))}},28956:(e,t,n)=>{"use strict";n.d(t,{DO:()=>f,GW:()=>p,Jj:()=>h,zB:()=>y});var r,i=n(30175),o=n(88140),s=n(49251),a=n(24869),c=n(47954),l=n(19406),u=n(96335),d=null;function p(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(m,(function(e){var t=0|(0,l.az)(15);return("x"===e?t:3&t|8).toString(16)}))}function h(){var e=(0,s.r)();return e&&e.now?e.now():(0,a.m6)()}function f(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=u.SM,r=0;r<4;r++)n+=t[15&(e=(0,l._l)())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var i=t[8+(3&(0,l._l)())|0];return n.substr(0,8)+n.substr(9,4)+"4"+n.substr(13,3)+i+n.substr(16,3)+n.substr(19,12)}var g={_canUseCookies:void 0,isTypeof:a.Ym,isUndefined:a.o8,isNullOrUndefined:a.le,hasOwnProperty:a.nr,isFunction:a.mf,isObject:a.Kn,isDate:a.J_,isArray:a.kJ,isError:a.VZ,isString:a.HD,isNumber:a.hj,isBoolean:a.jn,toISOString:a.Y6,arrForEach:a.tO,arrIndexOf:a.UA,arrMap:a.Mr,arrReduce:a.Xz,strTrim:a.nd,objCreate:i.pu,objKeys:a.FY,objDefineAccessors:a.l_,addEventHandler:c.Ib,dateNow:a.m6,isIE:s.w1,disableCookies:function(){var e,t,n,i;(n=(0,o.kj)(e,t),i=g._canUseCookies,null===d&&(d=[],r=i,(0,a.l_)(g,"_canUseCookies",(function(){return r}),(function(e){r=e,(0,a.tO)(d,(function(t){t.setEnabled(e)}))}))),-1===(0,a.UA)(d,n)&&d.push(n),(0,a.jn)(i)&&n.setEnabled(i),(0,a.jn)(r)&&n.setEnabled(r),n).setEnabled(!1)},newGuid:p,perfNow:h,newId:l.pZ,randomValue:l.az,random32:l._l,mwcRandomSeed:l.CN,mwcRandom32:l.F6,generateW3CId:f},m=/[xy]/g,y={Attach:c.pZ,AttachEvent:c.pZ,Detach:c.pD,DetachEvent:c.pD}},87624:(e,t,n)=>{"use strict";n.d(t,{J:()=>u,K:()=>d});var r=n(1550),i=n(24869),o=n(19406),s=r.RJ,a="."+(0,o.pZ)(6),c=0;function l(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function u(e,t){return void 0===t&&(t=!1),(0,i.Gf)(e+c+++(t?".2.8.4":"")+a)}function d(e){var t={id:u("_aiData-"+(e||"")+".2.8.4"),accept:function(e){return l(e)},get:function(e,n,r,o){var a=e[t.id];return a?a[(0,i.Gf)(n)]:(o&&((a=function(e,t){var n=t[e.id];if(!n){n={};try{l(t)&&(function(e,t,n){if(s)try{return s(e,t,{value:n,enumerable:!1,configurable:!0}),!0}catch(e){}return!1}(t,e.id,n)||(t[e.id]=n))}catch(e){}}return n}(t,e))[(0,i.Gf)(n)]=r),r)},kill:function(e,t){if(e&&e[t])try{delete e[t]}catch(e){}}};return t}},28341:(e,t,n)=>{"use strict";n.d(t,{j:()=>c,p:()=>l});var r,i=n(49251),o=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],s=null;function a(e,t){return function(){var n=arguments,r=c(t);if(r){var i=r.listener;i&&i[e]&&i[e].apply(i,n)}}}function c(e){var t,n=s;return n||!0===e.disableDbgExt||(n=s||((t=(0,i.a8)("Microsoft"))&&(s=t.ApplicationInsights),s)),n?n.ChromeDbgExt:null}function l(e){if(!r){r={};for(var t=0;t<o.length;t++)r[o[t]]=a(o[t],e)}return r}},29339:(e,t,n)=>{"use strict";n.d(t,{AQ:()=>p,jV:()=>f,kP:()=>h,lQ:()=>u,vH:()=>d});var r=n(49251),i=n(29141),o=n(24869),s=n(28341),a=n(96335);function c(e){return e?'"'+e.replace(/\"/g,a.SM)+'"':a.SM}function l(e,t){var n=(0,r.dr)();if(n){var i="log";n[e]&&(i=e),(0,o.mf)(n[i])&&n[i](t)}}var u=function(){function e(e,t,n,i){void 0===n&&(n=!1);var o=this;o.messageId=e,o.message=(n?"AI: ":"AI (Internal): ")+e;var s=a.SM;(0,r.nS)()&&(s=(0,r.xA)().stringify(i));var l=(t?" message:"+c(t):a.SM)+(i?" props:"+c(s):a.SM);o.message+=l}return e.dataType="MessageData",e}();function d(e,t){return(e||{}).logger||new p(t)}var p=function e(t){this.identifier="DiagnosticLogger",this.queue=[];var n=0,a={};(0,i.Z)(e,this,(function(e){function i(e,n){var r=t[e];return(0,o.le)(r)?n:r}function c(e,n){var r=(0,s.j)(t);r&&r.diagLog&&r.diagLog(e,n)}(0,o.le)(t)&&(t={}),e.consoleLoggingLevel=function(){return i("loggingLevelConsole",0)},e.telemetryLoggingLevel=function(){return i("loggingLevelTelemetry",1)},e.maxInternalMessageLimit=function(){return i("maxMessageLimit",25)},e.enableDebugExceptions=function(){return i("enableDebugExceptions",!1)},e.throwInternal=function(t,n,i,s,l){void 0===l&&(l=!1);var d=new u(n,i,l,s);if(e.enableDebugExceptions())throw(0,r.eU)(d);var p=1===t?"errorToConsole":"warnToConsole";if((0,o.o8)(d.message))c("throw"+(1===t?"Critical":"Warning"),d);else{var h=e.consoleLoggingLevel();if(l){var f=+d.messageId;!a[f]&&h>=t&&(e[p](d.message),a[f]=!0)}else h>=t&&e[p](d.message);e.logInternalMessage(t,d)}},e.warnToConsole=function(e){l("warn",e),c("warning",e)},e.errorToConsole=function(e){l("error",e),c("error",e)},e.resetInternalMessageCount=function(){n=0,a={}},e.logInternalMessage=function(t,r){if(!(n>=e.maxInternalMessageLimit())){var i=!0,o="AITR_"+r.messageId;if(a[o]?i=!1:a[o]=!0,i&&(t<=e.telemetryLoggingLevel()&&(e.queue.push(r),n++,c(1===t?"error":"warn",r)),n===e.maxInternalMessageLimit())){var s="Internal events throttle limit per PageView reached for this app.",l=new u(23,s,!1);e.queue.push(l),1===t?e.errorToConsole(s):e.warnToConsole(s)}}}}))};function h(e,t,n,r,i,o){void 0===o&&(o=!1),(e||new p).throwInternal(t,n,r,i,o)}function f(e,t){(function(e){return e||new p})(e).warnToConsole(t)}},49251:(e,t,n)=>{"use strict";n.d(t,{JO:()=>K,Jj:()=>C,MF:()=>U,MX:()=>N,Me:()=>_,Nv:()=>S,Ym:()=>w,Z3:()=>V,a8:()=>b,b$:()=>O,cp:()=>W,d6:()=>k,dI:()=>v,dr:()=>D,eU:()=>F,ed:()=>B,fE:()=>I,gz:()=>M,jW:()=>P,k$:()=>T,nS:()=>R,pI:()=>q,r:()=>x,s1:()=>E,sA:()=>L,w1:()=>A,xA:()=>j});var r=n(1550),i=n(30175),o=n(96335),s=n(24869),a="window",c="JSON",l="msie",u="trident/",d="XMLHttpRequest",p=null,h=null,f=!1,g=null,m=null;function y(e,t){var n=!1;if(e){try{if(!(n=t in e)){var i=e[r.hB];i&&(n=t in i)}}catch(e){}if(!n)try{var o=new e;n=!(0,s.o8)(o[t])}catch(e){}}return n}function v(e){f=e}function b(e){var t=(0,i.Rd)();return t&&t[e]?t[e]:e===a&&w()?window:null}function w(){return Boolean(typeof window===r.fK&&window)}function C(){return w()?window:b(a)}function S(){return Boolean(typeof document===r.fK&&document)}function _(){return S()?document:b("document")}function k(){return Boolean(typeof navigator===r.fK&&navigator)}function P(){return k()?navigator:b("navigator")}function I(){return Boolean(typeof history===r.fK&&history)}function E(){return I()?history:b("history")}function T(e){if(e&&f){var t=b("__mockLocation");if(t)return t}return typeof location===r.fK&&location?location:b("location")}function D(){return typeof console!==r.jA?console:b("console")}function x(){return b("performance")}function R(){return Boolean(typeof JSON===r.fK&&JSON||null!==b(c))}function j(){return R()?JSON||b(c):null}function N(){return b("crypto")}function M(){return b("msCrypto")}function O(){var e=P();return!(!e||!e.product)&&"ReactNative"===e.product}function A(){var e=P();if(e&&(e.userAgent!==h||null===p)){var t=((h=e.userAgent)||o.SM).toLowerCase();p=(0,s._Q)(t,l)||(0,s._Q)(t,u)}return p}function L(e){if(void 0===e&&(e=null),!e){var t=P()||{};e=t?(t.userAgent||o.SM).toLowerCase():o.SM}var n=(e||o.SM).toLowerCase();if((0,s._Q)(n,l)){var r=_()||{};return Math.max(parseInt(n.split(l)[1]),r.documentMode||0)}if((0,s._Q)(n,u)){var i=parseInt(n.split(u)[1]);if(i)return i+4}return null}function F(e){var t=Object[r.hB].toString.call(e),n=o.SM;return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":R()&&(n=j().stringify(e)),t+n}function U(){return null===m&&(m=k()&&Boolean(P().sendBeacon)),m}function K(e){var t=!1;try{t=!!b("fetch");var n=b("Request");t&&e&&n&&(t=y(n,"keepalive"))}catch(e){}return t}function W(){return null===g&&(g=typeof XDomainRequest!==r.jA)&&V()&&(g=g&&!y(b(d),"withCredentials")),g}function V(){var e=!1;try{e=!!b(d)}catch(e){}return e}function H(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n];if(r.name&&r.name===t)return r}return{}}function B(e){var t=_();return t&&e?H(t.querySelectorAll("meta"),e).content:null}function q(e){var t,n=x();if(n){var r=n.getEntriesByType("navigation")||[];t=H((r.length>0?r[0]:{}).serverTiming,e).description}return t}},47954:(e,t,n)=>{"use strict";n.d(t,{C1:()=>R,C9:()=>F,Ib:()=>x,JA:()=>A,QY:()=>E,TJ:()=>L,XO:()=>I,Yl:()=>K,c9:()=>O,jU:()=>P,nD:()=>U,nJ:()=>M,pD:()=>D,pZ:()=>T,um:()=>C,yw:()=>N});var r=n(87624),i=n(49251),o=n(24869),s="events",a="visibilitychange",c="pagehide",l="pageshow",u="unload",d="beforeunload",p=(0,r.J)("aiEvtPageHide"),h=(0,r.J)("aiEvtPageShow"),f=/\.[\.]+/g,g=/[\.]+$/,m=1,y=(0,r.K)("events"),v=/^([^.]*)(?:\.(.+)|)/;function b(e){return e&&e.replace?e.replace(/^\s*\.*|\.*\s*$/g,""):e}function w(e,t){if(t){var n="";(0,o.kJ)(t)?(n="",(0,o.tO)(t,(function(e){(e=b(e))&&("."!==e[0]&&(e="."+e),n+=e)}))):n=b(t),n&&("."!==n[0]&&(n="."+n),e=(e||"")+n)}var r=v.exec(e||"")||[];return{type:r[1],ns:(r[2]||"").replace(f,".").replace(g,"").split(".").sort().join(".")}}function C(e,t,n){var r=[],i=y.get(e,s,{},!1),a=w(t,n);return(0,o.rW)(i,(function(e,t){(0,o.tO)(t,(function(e){a.type&&a.type!==e.evtName.type||a.ns&&a.ns!=a.ns||r.push({name:e.evtName.type+(e.evtName.ns?"."+e.evtName.ns:""),handler:e.handler})}))})),r}function S(e,t,n){void 0===n&&(n=!0);var r=y.get(e,s,{},n),i=r[t];return i||(i=r[t]=[]),i}function _(e,t,n,r){e&&t&&t.type&&(e.removeEventListener?e.removeEventListener(t.type,n,r):e.detachEvent&&e.detachEvent("on"+t.type,n))}function k(e,t,n,r){for(var i=t.length;i--;){var o=t[i];o&&(n.ns&&n.ns!==o.evtName.ns||r&&!r(o)||(_(e,o.evtName,o.handler,o.capture),t.splice(i,1)))}}function P(e,t){return t?w("xx",(0,o.kJ)(t)?[e].concat(t):[e,t]).ns.split("."):e}function I(e,t,n,r,i){void 0===i&&(i=!1);var o=!1;if(e)try{var s=w(t,r);if(o=function(e,t,n,r){var i=!1;return e&&t&&t.type&&n&&(e.addEventListener?(e.addEventListener(t.type,n,r),i=!0):e.attachEvent&&(e.attachEvent("on"+t.type,n),i=!0)),i}(e,s,n,i),o&&y.accept(e)){var a={guid:m++,evtName:s,handler:n,capture:i};S(e,s.type).push(a)}}catch(e){}return o}function E(e,t,n,r,i){if(void 0===i&&(i=!1),e)try{var a=w(t,r),c=!1;!function(e,t,n){if(t.type)k(e,S(e,t.type),t,n);else{var r=y.get(e,s,{});(0,o.rW)(r,(function(r,i){k(e,i,t,n)})),0===(0,o.FY)(r).length&&y.kill(e,s)}}(e,a,(function(e){return!((!a.ns||n)&&e.handler!==n||(c=!0,0))})),c||_(e,a,n,i)}catch(e){}}function T(e,t,n,r){return void 0===r&&(r=!1),I(e,t,n,null,r)}function D(e,t,n,r){void 0===r&&(r=!1),E(e,t,n,null,r)}function x(e,t,n){var r=!1,o=(0,i.Jj)();o&&(r=I(o,e,t,n),r=I(o.body,e,t,n)||r);var s=(0,i.Me)();return s&&(r=I(s,e,t,n)||r),r}function R(e,t,n){var r=(0,i.Jj)();r&&(E(r,e,t,n),E(r.body,e,t,n));var o=(0,i.Me)();o&&E(o,e,t,n)}function j(e,t,n,r){var i=!1;return t&&e&&e.length>0&&(0,o.tO)(e,(function(e){e&&(n&&-1!==(0,o.UA)(n,e)||(i=x(e,t,r)||i))})),i}function N(e,t,n,r){var i=!1;return t&&e&&(0,o.kJ)(e)&&!(i=j(e,t,n,r))&&n&&n.length>0&&(i=j(e,t,null,r)),i}function M(e,t,n){e&&(0,o.kJ)(e)&&(0,o.tO)(e,(function(e){e&&R(e,t,n)}))}function O(e,t,n){return N([d,u,c],e,t,n)}function A(e,t){M([d,u,c],e,t)}function L(e,t,n){var r=P(p,n),s=j([c],e,t,r);return t&&-1!==(0,o.UA)(t,a)||(s=j([a],(function(t){var n=(0,i.Me)();e&&n&&"hidden"===n.visibilityState&&e(t)}),t,r)||s),!s&&t&&(s=L(e,null,n)),s}function F(e,t){var n=P(p,t);M([c],e,n),M([a],null,n)}function U(e,t,n){var r=P(h,n),o=j([l],e,t,r);return!(o=j([a],(function(t){var n=(0,i.Me)();e&&n&&"visible"===n.visibilityState&&e(t)}),t,r)||o)&&t&&(o=U(e,null,n)),o}function K(e,t){var n=P(h,t);M([l],e,n),M([a],null,n)}},24869:(e,t,n)=>{"use strict";n.d(t,{Ax:()=>he,BX:()=>I,F:()=>se,FL:()=>ee,FY:()=>Y,Gf:()=>x,HD:()=>F,Id:()=>j,J_:()=>O,Kn:()=>T,Mr:()=>q,Oi:()=>de,UA:()=>B,VZ:()=>L,Vb:()=>pe,Xi:()=>te,Xz:()=>J,Y6:()=>V,Ym:()=>_,_A:()=>Z,_Q:()=>M,_y:()=>ce,cf:()=>ue,fQ:()=>ae,hj:()=>U,jj:()=>re,jn:()=>K,kJ:()=>A,l_:()=>Q,le:()=>P,m6:()=>ne,mf:()=>D,mm:()=>fe,nd:()=>$,nr:()=>E,o8:()=>k,qK:()=>oe,rW:()=>R,sO:()=>ie,tO:()=>H,xe:()=>N});var r=n(1550),i=n(30175),o=n(96335),s=r.RJ,a=r.Pw.freeze,c=r.Pw.seal,l=r.Pw.keys,u=String[r.hB],d=u.trim,p=u.endsWith,h=u.startsWith,f=Date[r.hB].toISOString,g=Array.isArray,m=r.V4.toString,y=r.CY.toString,v=y.call(r.Pw),b=/-([a-z])/g,w=/([^\w\d_$])/g,C=/^(\d+[\w\d_$])/,S=Object.getPrototypeOf;function _(e,t){return typeof e===t}function k(e){return void 0===e||typeof e===r.jA}function P(e){return null===e||k(e)}function I(e){return!P(e)}function E(e,t){return!(!e||!r.CY.call(e,t))}function T(e){return!(!e||typeof e!==r.fK)}function D(e){return!(!e||typeof e!==r.cb)}function x(e){var t=e;return t&&F(t)&&(t=(t=(t=t.replace(b,(function(e,t){return t.toUpperCase()}))).replace(w,"_")).replace(C,(function(e,t){return"_"+t}))),t}function R(e,t){if(e)for(var n in e)r.CY.call(e,n)&&t.call(e,n,e[n])}function j(e,t){var n=!1;return e&&t&&!(n=e===t)&&(n=p?e.endsWith(t):function(e,t){var n=!1,r=t?t.length:0,i=e?e.length:0;if(r&&i&&i>=r&&!(n=e===t)){for(var o=i-1,s=r-1;s>=0;s--){if(e[o]!=t[s])return!1;o--}n=!0}return n}(e,t)),n}function N(e,t){var n=!1;return e&&t&&!(n=e===t)&&(n=h?e.startsWith(t):function(e,t){var n=!1,r=t?t.length:0;if(e&&r&&e.length>=r&&!(n=e===t)){for(var i=0;i<r;i++)if(e[i]!==t[i])return!1;n=!0}return n}(e,t)),n}function M(e,t){return!(!e||!t)&&-1!==e.indexOf(t)}function O(e){return!(!e||"[object Date]"!==m.call(e))}var A=g||function(e){return!(!e||"[object Array]"!==m.call(e))};function L(e){return!(!e||"[object Error]"!==m.call(e))}function F(e){return"string"==typeof e}function U(e){return"number"==typeof e}function K(e){return"boolean"==typeof e}function W(e){var t=!1;if(e&&"object"==typeof e){var n=S?S(e):function(e){if(e){if(S)return S(e);var t=e.__proto__||e[r.hB]||e.constructor;if(t)return t}return null}(e);n?(n.constructor&&r.CY.call(n,"constructor")&&(n=n.constructor),t=typeof n===r.cb&&y.call(n)===v):t=!0}return t}function V(e){if(e)return f?e.toISOString():function(e){if(e&&e.getUTCFullYear){var t=function(e){var t=String(e);return 1===t.length&&(t="0"+t),t};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(e)}function H(e,t,n){var r=e.length;try{for(var i=0;i<r&&(!(i in e)||-1!==t.call(n||e,e[i],i,e));i++);}catch(e){}}function B(e,t,n){if(e){if(e.indexOf)return e.indexOf(t,n);var r=e.length,i=n||0;try{for(var o=Math.max(i>=0?i:r-Math.abs(i),0);o<r;o++)if(o in e&&e[o]===t)return o}catch(e){}}return-1}function q(e,t,n){var r;if(e){if(e.map)return e.map(t,n);var i=e.length,o=n||e;r=new Array(i);try{for(var s=0;s<i;s++)s in e&&(r[s]=t.call(o,e[s],e))}catch(e){}}return r}function J(e,t,n){var r;if(e){if(e.reduce)return e.reduce(t,n);var i=e.length,o=0;if(arguments.length>=3)r=arguments[2];else{for(;o<i&&!(o in e);)o++;r=e[o++]}for(;o<i;)o in e&&(r=t(r,e[o],o,e)),o++}return r}function $(e){return e&&(e=d&&e.trim?e.trim():e.replace?e.replace(/^\s+|\s+$/g,""):e),e}var G=!{toString:null}.propertyIsEnumerable("toString"),z=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function Y(e){var t=typeof e;if(t===r.cb||t===r.fK&&null!==e||(0,i.ZU)("objKeys called on non-object"),!G&&l)return l(e);var n=[];for(var o in e)e&&r.CY.call(e,o)&&n.push(o);if(G)for(var s=z.length,a=0;a<s;a++)e&&r.CY.call(e,z[a])&&n.push(z[a]);return n}function Q(e,t,n,r){if(s)try{var i={enumerable:!0,configurable:!0};return n&&(i.get=n),r&&(i.set=r),s(e,t,i),!0}catch(e){}return!1}function X(e){return e}function Z(e){return a&&R(e,(function(e,t){(A(t)||T(t))&&a(t)})),ee(e)}var ee=a||X,te=c||X;function ne(){var e=Date;return e.now?e.now():(new e).getTime()}function re(e){return L(e)?e.name:o.SM}function ie(e,t,n,r,i){var o=n;return e&&((o=e[t])===n||i&&!i(o)||r&&!r(n)||(o=n,e[t]=o)),o}function oe(e,t,n){var r;return e?!(r=e[t])&&P(r)&&(r=k(n)?{}:n,e[t]=r):r=k(n)?{}:n,r}function se(e){return!e}function ae(e){return!!e}function ce(e){throw new Error(e)}function le(e,t){var n=null,r=null;return D(e)?n=e:r=e,function(){var e=arguments;if(n&&(r=n()),r)return r[t].apply(r,e)}}function ue(e,t,n){if(e&&t&&T(e)&&T(t)){var r=function(r){if(F(r)){var i=t[r];D(i)?n&&!n(r,!0,t,e)||(e[r]=le(t,r)):n&&!n(r,!1,t,e)||(E(e,r)&&delete e[r],Q(e,r,(function(){return t[r]}),(function(e){t[r]=e}))||(e[r]=i))}};for(var i in t)r(i)}return e}function de(e,t,n,r,i){e&&t&&n&&(!1!==i||k(e[t]))&&(e[t]=le(n,r))}function pe(e,t,n,r){return e&&t&&T(e)&&A(n)&&H(n,(function(n){F(n)&&de(e,n,t,n,r)})),e}function he(e){return e&&r.rl&&(e=(0,r.Pw)((0,r.rl)({},e))),e}function fe(e,t,n,i,o,s){var a=arguments,c=a[0]||{},l=a.length,u=!1,d=1;for(l>0&&K(c)&&(u=c,c=a[d]||{},d++),T(c)||(c={});d<l;d++){var p=a[d],h=A(p),f=T(p);for(var g in p){var m=h&&g in p||f&&r.CY.call(p,g);if(m){var y=p[g],v=void 0;if(u&&y&&((v=A(y))||W(y))){var b=c[g];v?A(b)||(b=[]):W(b)||(b={}),y=fe(u,b,y)}void 0!==y&&(c[g]=y)}}}return c}},96335:(e,t,n)=>{"use strict";n.d(t,{C0:()=>d,El:()=>s,Gc:()=>l,H4:()=>b,Ho:()=>p,Mf:()=>f,Nz:()=>o,Rw:()=>u,SM:()=>r,SN:()=>C,Vr:()=>a,XP:()=>y,Z_:()=>h,dV:()=>m,eO:()=>v,i9:()=>i,nE:()=>g,rX:()=>w,vE:()=>c});var r="",i="processTelemetry",o="priority",s="setNextPlugin",a="isInitialized",c="teardown",l="core",u="update",d="disabled",p="_doTeardown",h="processNext",f="resume",g="pause",m="addNotificationListener",y="removeNotificationListener",v="eventsSent",b="eventsDiscarded",w="eventsSendRequest",C="perfEvent"},81782:(e,t,n)=>{"use strict";n.d(t,{Jk:()=>s,Lm:()=>c,j5:()=>l,zn:()=>o});var r=n(29141),i=n(24869),o=function(){function e(t,n,r){var o,s=this,a=!1;s.start=(0,i.m6)(),s.name=t,s.isAsync=r,s.isChildEvt=function(){return!1},(0,i.mf)(n)&&(a=(0,i.l_)(s,"payload",(function(){return!o&&(0,i.mf)(n)&&(o=n(),n=null),o}))),s.getCtx=function(t){return t?t===e.ParentContextKey||t===e.ChildrenContextKey?s[t]:(s.ctx||{})[t]:null},s.setCtx=function(t,n){t&&(t===e.ParentContextKey?(s[t]||(s.isChildEvt=function(){return!0}),s[t]=n):t===e.ChildrenContextKey?s[t]=n:(s.ctx=s.ctx||{})[t]=n)},s.complete=function(){var t=0,r=s.getCtx(e.ChildrenContextKey);if((0,i.kJ)(r))for(var o=0;o<r.length;o++){var c=r[o];c&&(t+=c.time)}s.time=(0,i.m6)()-s.start,s.exTime=s.time-t,s.complete=function(){},!a&&(0,i.mf)(n)&&(s.payload=n())}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),s=function e(t){this.ctx={},(0,r.Z)(e,this,(function(e){e.create=function(e,t,n){return new o(e,t,n)},e.fire=function(e){e&&(e.complete(),t&&(0,i.mf)(t.perfEvent)&&t.perfEvent(e))},e.setCtx=function(t,n){t&&((e.ctx=e.ctx||{})[t]=n)},e.getCtx=function(t){return(e.ctx||{})[t]}}))},a="CoreUtils.doPerf";function c(e,t,n,r,s){if(e){var c=e;if((0,i.mf)(c.getPerfMgr)&&(c=c.getPerfMgr()),c){var l=void 0,u=c.getCtx(a);try{if(l=c.create(t(),r,s)){if(u&&l.setCtx&&(l.setCtx(o.ParentContextKey,u),u.getCtx&&u.setCtx)){var d=u.getCtx(o.ChildrenContextKey);d||(d=[],u.setCtx(o.ChildrenContextKey,d)),d.push(l)}return c.setCtx(a,l),n(l)}}catch(e){l&&l.setCtx&&l.setCtx("exception",e)}finally{l&&c.fire(l),c.setCtx(a,u)}}}return n()}function l(){return null}},31030:(e,t,n)=>{"use strict";n.d(t,{Bt:()=>p,CD:()=>d,Vi:()=>g,jV:()=>f,xy:()=>h});var r=n(29339),i=n(24869),o=n(81782),s=n(49251),a=n(96335),c=n(69031),l=0;function u(e,t,n,o){var a=null,c=[];null!==o&&(a=o?function(e,t,n){for(;e;){if(e.getPlugin()===n)return e;e=e.getNext()}return f([n],t.config||{},t)}(e,n,o):e);var l={_next:function(){var e=a;if(a=e?e.getNext():null,!e){var t=c;t&&t.length>0&&((0,i.tO)(t,(function(e){try{e.func.call(e.self,e.args)}catch(e){(0,r.kP)(n.logger,2,73,"Unexpected Exception during onComplete - "+(0,s.eU)(e))}})),c=[])}return e},ctx:{core:function(){return n},diagLog:function(){return(0,r.vH)(n,t)},getCfg:function(){return t},getExtCfg:u,getConfig:function(e,n,r){void 0===r&&(r=!1);var o,s=u(e,null);return s&&!(0,i.le)(s[n])?o=s[n]:t&&!(0,i.le)(t[n])&&(o=t[n]),(0,i.le)(o)?r:o},hasNext:function(){return!!a},getNext:function(){return a},setNext:function(e){a=e},iterate:function(e){for(var t;t=l._next();){var n=t.getPlugin();n&&e(n)}},onComplete:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];e&&c.push({func:e,self:(0,i.o8)(t)?l.ctx:t,args:n})}}};function u(e,n,r){var o;if(void 0===n&&(n={}),void 0===r&&(r=0),t){var s=t.extensionConfig;s&&e&&(o=s[e])}if(o){if((0,i.Kn)(n)&&0!==r){var a=(0,i.mm)(!0,n,o);t&&2===r&&(0,i.rW)(n,(function(e){if((0,i.le)(a[e])){var n=t[e];(0,i.le)(n)||(a[e]=n)}})),o=a}}else o=n;return o}return l}function d(e,t,n,r){var o=u(e,t,n,r),s=o.ctx;return s.processNext=function(e){var t=o._next();return t&&t.processTelemetry(e,s),!t},s.createNew=function(e,r){return void 0===e&&(e=null),(0,i.kJ)(e)&&(e=f(e,t,n,r)),d(e||s.getNext(),t,n,r)},s}function p(e,t,n){var r=t.config||{},o=u(e,r,t,n),s=o.ctx;return s.processNext=function(e){var t=o._next();return t&&t.unload(s,e),!t},s.createNew=function(e,n){return void 0===e&&(e=null),(0,i.kJ)(e)&&(e=f(e,r,t,n)),p(e||s.getNext(),t,n)},s}function h(e,t,n){var r=t.config||{},o=u(e,r,t,n).ctx;return o.processNext=function(e){return o.iterate((function(t){(0,i.mf)(t.update)&&t.update(o,e)}))},o.createNew=function(e,n){return void 0===e&&(e=null),(0,i.kJ)(e)&&(e=f(e,r,t,n)),h(e||o.getNext(),t,n)},o}function f(e,t,n,u){var p=null,h=!u;if((0,i.kJ)(e)&&e.length>0){var g=null;(0,i.tO)(e,(function(e){if(h||u!==e||(h=!0),h&&e&&(0,i.mf)(e.processTelemetry)){var f=function(e,t,n){var u,p=null,h=(0,i.mf)(e.processTelemetry),f=(0,i.mf)(e.setNextPlugin),g={getPlugin:function(){return e},getNext:function(){return p},processTelemetry:function(r,o){m(o=o||function(){var r;return e&&(0,i.mf)(e._getTelCtx)&&(r=e._getTelCtx()),r||(r=d(g,t,n)),r}(),(function(t){if(!e||!h)return!1;var n=(0,c.OY)(e);return!n.teardown&&!n[a.C0]&&(f&&e.setNextPlugin(p),e.processTelemetry(r,t),!0)}),"processTelemetry",(function(){return{item:r}}),!r.sync)||o.processNext(r)},unload:function(t,n){m(t,(function(){var r=!1;if(e){var i=(0,c.OY)(e),o=e[a.Gc]||i.core;!e||o&&o!==t[a.Gc]()||i[a.vE]||(i[a.Gc]=null,i[a.vE]=!0,i[a.Vr]=!1,e[a.vE]&&!0===e[a.vE](t,n)&&(r=!0))}return r}),"unload",(function(){}),n.isAsync)||t.processNext(n)},update:function(t,n){m(t,(function(){var r=!1;if(e){var i=(0,c.OY)(e),o=e[a.Gc]||i.core;!e||o&&o!==t[a.Gc]()||i[a.vE]||e[a.Rw]&&!0===e[a.Rw](t,n)&&(r=!0)}return r}),"update",(function(){}),!1)||t.processNext(n)},_id:u=e?e.identifier+"-"+e.priority+"-"+l++:"Unknown-0-"+l++,_setNext:function(e){p=e}};function m(t,n,i,c,l){var d=!1,h=e?e.identifier:"TelemetryPluginChain",f=t._hasRun;return f||(f=t._hasRun={}),t.setNext(p),e&&(0,o.Lm)(t[a.Gc](),(function(){return h+":"+i}),(function(){f[u]=!0;try{var e=p?p._id:a.SM;e&&(f[e]=!1),d=n(t)}catch(e){var o=!p||f[p._id];o&&(d=!0),p&&o||(0,r.kP)(t.diagLog(),1,73,"Plugin ["+h+"] failed during "+i+" - "+(0,s.eU)(e)+", run flags: "+(0,s.eU)(f))}}),c,l),d}return(0,i.FL)(g)}(e,t,n);p||(p=f),g&&g._setNext(f),g=f}}))}return u&&!p?f([u],t,n):p}var g=function(e,t,n,r){var o=d(e,t,n,r);(0,i.Vb)(this,o,(0,i.FY)(o))}},19406:(e,t,n)=>{"use strict";n.d(t,{CN:()=>g,F6:()=>m,_l:()=>f,az:()=>h,pZ:()=>y});var r=n(49251),i=n(24869),o=n(96335),s=4294967296,a=4294967295,c=!1,l=123456789,u=987654321;function d(e){e<0&&(e>>>=0),l=123456789+e&a,u=987654321-e&a,c=!0}function p(){try{var e=2147483647&(0,i.m6)();d((Math.random()*s^e)+e)}catch(e){}}function h(e){return e>0?Math.floor(f()/a*(e+1))>>>0:0}function f(e){var t=0,n=(0,r.MX)()||(0,r.gz)();return n&&n.getRandomValues&&(t=n.getRandomValues(new Uint32Array(1))[0]&a),0===t&&(0,r.w1)()&&(c||p(),t=m()&a),0===t&&(t=Math.floor(s*Math.random()|0)),e||(t>>>=0),t}function g(e){e?d(e):p()}function m(e){var t=((u=36969*(65535&u)+(u>>16)&a)<<16)+(65535&(l=18e3*(65535&l)+(l>>16)&a))>>>0&a|0;return e||(t>>>=0),t}function y(e){void 0===e&&(e=22);for(var t=f()>>>0,n=0,r=o.SM;r.length<e;)n++,r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===n&&(t=(f()<<2&4294967295|3&t)>>>0,n=0);return r}},69031:(e,t,n)=>{"use strict";n.d(t,{AA:()=>u,OY:()=>c,Yn:()=>d,bP:()=>l});var r=n(24869),i=n(96335),o=n(87624),s=n(56207),a=(0,o.K)("plugin");function c(e){return a.get(e,"state",{},!0)}function l(e,t){for(var n,o=[],s=null,a=e.getNext();a;){var l=a.getPlugin();l&&(s&&(0,r.mf)(s[i.El])&&(0,r.mf)(l[i.i9])&&s[i.El](l),((0,r.mf)(l[i.Vr])?l[i.Vr]():(n=c(l))[i.Vr])||o.push(l),s=l,a=a.getNext())}(0,r.tO)(o,(function(r){var o=e.core();r.initialize(e.getCfg(),o,t,e.getNext()),n=c(r),r[i.Gc]||n[i.Gc]||(n[i.Gc]=o),n[i.Vr]=!0,delete n[i.vE]}))}function u(e){return e.sort((function(e,t){var n=0;if(t){var o=(0,r.mf)(t[i.i9]);(0,r.mf)(e[i.i9])?n=o?e[i.Nz]-t[i.Nz]:1:o&&(n=-1)}else n=e?1:-1;return n}))}function d(e){var t={};return{getName:function(){return t.name},setName:function(n){e&&e.setName(n),t.name=n},getTraceId:function(){return t.traceId},setTraceId:function(n){e&&e.setTraceId(n),(0,s.jN)(n)&&(t.traceId=n)},getSpanId:function(){return t.spanId},setSpanId:function(n){e&&e.setSpanId(n),(0,s.Lc)(n)&&(t.spanId=n)},getTraceFlags:function(){return t.traceFlags},setTraceFlags:function(n){e&&e.setTraceFlags(n),t.traceFlags=n}}}},38593:(e,t,n)=>{"use strict";n.d(t,{Y:()=>s});var r=n(29339),i=n(49251),o=n(24869);function s(){var e=[];return{add:function(t){t&&e.push(t)},run:function(t,n){(0,o.tO)(e,(function(e){try{e(t,n)}catch(e){(0,r.kP)(t.diagLog(),2,73,"Unexpected error calling unload handler - "+(0,i.eU)(e))}})),e=[]}}}},56207:(e,t,n)=>{"use strict";n.d(t,{J6:()=>v,Lc:()=>y,Pn:()=>b,SU:()=>f,aR:()=>w,jN:()=>m,j_:()=>g,lq:()=>C});var r=n(28956),i=n(49251),o=n(24869),s=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,a="00",c="ff",l="00000000000000000000000000000000",u="0000000000000000";function d(e,t,n){return!(!e||e.length!==t||e===n||!e.match(/^[\da-f]*$/))}function p(e,t,n){return d(e,t)?e:n}function h(e){(isNaN(e)||e<0||e>255)&&(e=1);for(var t=e.toString(16);t.length<2;)t="0"+t;return t}function f(e,t,n,i){return{version:d(i,2,c)?i:a,traceId:m(e)?e:(0,r.DO)(),spanId:y(t)?t:(0,r.DO)().substr(0,16),traceFlags:n>=0&&n<=255?n:1}}function g(e){if(!e)return null;if((0,o.kJ)(e)&&(e=e[0]||""),!e||!(0,o.HD)(e)||e.length>8192)return null;var t=s.exec((0,o.nd)(e));return t&&t[1]!==c&&t[2]!==l&&t[3]!==u?{version:t[1],traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}:null}function m(e){return d(e,32,l)}function y(e){return d(e,16,u)}function v(e){return!!(e&&d(e.version,2,c)&&d(e.traceId,32,l)&&d(e.spanId,16,u)&&d(h(e.traceFlags),2))}function b(e){return!!v(e)&&1==(1&e.traceFlags)}function w(e){if(e){var t=h(e.traceFlags);d(t,2)||(t="01");var n=e.version||a;return"00"!==n&&"ff"!==n&&(n=a),"".concat(n,"-").concat(p(e.traceId,32,l),"-").concat(p(e.spanId,16,u),"-").concat(t)}return""}function C(){var e="traceparent",t=g((0,i.ed)(e));return t||(t=g((0,i.pI)(e))),t}},1550:(e,t,n)=>{"use strict";n.d(t,{CY:()=>h,Pw:()=>c,RJ:()=>p,V4:()=>l,bO:()=>a,cb:()=>r,fK:()=>i,hB:()=>s,jA:()=>o,rl:()=>u,yu:()=>d});var r="function",i="object",o="undefined",s="prototype",a="hasOwnProperty",c=Object,l=c[s],u=c.assign,d=c.create,p=c.defineProperty,h=l[a]},30175:(e,t,n)=>{"use strict";n.d(t,{Rd:()=>o,ZU:()=>s,pu:()=>a});var r=n(1550),i=null;function o(e){return void 0===e&&(e=!0),i&&e||(typeof globalThis!==r.jA&&globalThis&&(i=globalThis),typeof self!==r.jA&&self&&(i=self),typeof window!==r.jA&&window&&(i=window),typeof n.g!==r.jA&&n.g&&(i=n.g)),i}function s(e){throw new TypeError(e)}function a(e){var t=r.yu;if(t)return t(e);if(null==e)return{};var n=typeof e;function i(){}return n!==r.fK&&n!==r.cb&&s("Object prototype may only be an Object:"+e),i[r.hB]=e,new i}},27421:(e,t,n)=>{"use strict";n.d(t,{$h:()=>c,ne:()=>a,uc:()=>o});var r=n(1550),i=n(30175),o=(((0,i.Rd)()||{}).Symbol,((0,i.Rd)()||{}).Reflect,r.rl||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])r.V4[r.bO].call(t,o)&&(e[o]=t[o]);return e}),s=function(e,t){return s=r.Pw.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[r.bO](n)&&(e[n]=t[n])},s(e,t)};function a(e,t){function n(){this.constructor=e}typeof t!==r.cb&&null!==t&&(0,i.ZU)("Class extends value "+String(t)+" is not a constructor or null"),s(e,t),e[r.hB]=null===t?(0,i.pu)(t):(n[r.hB]=t[r.hB],new n)}function c(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}},29141:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var r="prototype",i="function",o="_dynClass",s="_unknown_",a=Object,c=a.getPrototypeOf,l=a.getOwnPropertyNames,u=0;function d(e,t){return e&&a.prototype.hasOwnProperty.call(e,t)}function p(e){return e&&(e===a.prototype||e===Array.prototype)}function h(e){return p(e)||e===Function.prototype}function f(e){var t;if(e){if(c)return c(e);var n=e.__proto__||e.prototype||(e.constructor?e.constructor.prototype:null);t=e._dyn__proto__||n,d(e,"_dyn__proto__")||(delete e._dynInstProto,t=e._dyn__proto__=e._dynInstProto||e._dyn__proto__,e._dynInstProto=n)}return t}function g(e,t){var n=[];if(l)n=l(e);else for(var r in e)"string"==typeof r&&d(e,r)&&n.push(r);if(n&&n.length>0)for(var i=0;i<n.length;i++)t(n[i])}function m(e,t,n){return"constructor"!==t&&typeof e[t]===i&&(n||d(e,t))}function y(e){throw new TypeError("DynamicProto: "+e)}function v(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0;return!1}function b(e,t,n,r){var s=null;if(e&&d(n,o)){var a=e._dynInstFuncs||{};if((s=(a[n._dynClass]||{})[t])||y("Missing ["+t+"] "+i),!s._dynInstChk&&!1!==a._dynInstChk){for(var c=!d(e,t),l=f(e),u=[];c&&l&&!h(l)&&!v(u,l);){var p=l[t];if(p){c=p===r;break}u.push(l),l=f(l)}try{c&&(e[t]=s),s._dynInstChk=1}catch(e){a._dynInstChk=!1}}}return s}function w(e,t,n){var r=t[e];return r===n&&(r=f(t)[e]),typeof r!==i&&y("["+e+"] is not a "+i),r}function C(e,t){return d(e,r)?e.name||t||s:((e||{}).constructor||{}).name||t||s}function S(e,t,n,i){d(e,r)||y("theClass is an invalid class definition.");var s=e.prototype;(function(e,t){if(c){for(var n=[],r=f(t);r&&!h(r)&&!v(n,r);){if(r===e)return!0;n.push(r),r=f(r)}return!1}return!0})(s,t)||y("["+C(e)+"] is not in class hierarchy of ["+C(t)+"]");var a=null;d(s,o)?a=s._dynClass:(a="_dynCls$"+C(e,"_")+"$"+u,u++,s._dynClass=a);var l=S._dfOpts,_=!!l.useBaseInst;_&&i&&void 0!==i.useBaseInst&&(_=!!i.useBaseInst);var k=function(e){var t={};return g(e,(function(n){!t[n]&&m(e,n,!1)&&(t[n]=e[n])})),t}(t),P=function(e,t,n,r){function i(e,t,n){var i=t[n];if(i._isDynProxy&&r){var o=e._dynInstFuncs||{};!1!==o._dynInstChk&&(i=(o[t._dynClass]||{})[n]||i)}return function(){return i.apply(e,arguments)}}var o={};g(n,(function(e){o[e]=i(t,n,e)}));for(var s=f(e),a=[];s&&!h(s)&&!v(a,s);)g(s,(function(e){!o[e]&&m(s,e,!c)&&(o[e]=i(t,s,e))})),a.push(s),s=f(s);return o}(s,t,k,_);n(t,P);var I=!!c&&!!l.setInstFuncs;I&&i&&(I=!!i.setInstFuncs),function(e,t,n,r,i){if(!p(e)){var o=n._dynInstFuncs=n._dynInstFuncs||{},s=o[t]=o[t]||{};!1!==o._dynInstChk&&(o._dynInstChk=!!i),g(n,(function(t){m(n,t,!1)&&n[t]!==r[t]&&(s[t]=n[t],delete n[t],(!d(e,t)||e[t]&&!e[t]._isDynProxy)&&(e[t]=function(e,t){var n=function(){return(b(this,t,e,n)||w(t,e,n)).apply(this,arguments)};return n._isDynProxy=1,n}(e,t)))}))}}(s,a,t,k,!1!==I)}S._dfOpts={setInstFuncs:!0,useBaseInst:!0}},58331:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Ac});var r,i,o,s,a,c,l,u,d,p,h,f,g=n(66828),m=Object.defineProperty,y=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,w=(e,t,n)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,C=(e,t)=>{for(var n in t||(t={}))v.call(t,n)&&w(e,n,t[n]);if(y)for(var n of y(t))b.call(t,n)&&w(e,n,t[n]);return e},S=(e,t)=>()=>(e&&(t=e(e=0)),t),_=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{a(n.next(e))}catch(e){i(e)}},s=e=>{try{a(n.throw(e))}catch(e){i(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())})),k=S((()=>{r={Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}})),P=S((()=>{i="function",o="object",s="undefined",a="prototype",c="hasOwnProperty",u=(l=Object)[a],d=l.assign,p=l.create,h=l.defineProperty,f=u[c]}));function I(){return typeof globalThis!==s&&globalThis?globalThis:typeof self!==s&&self?self:typeof window!==s&&window?window:typeof n.g!==s&&n.g?n.g:null}function E(e){throw new TypeError(e)}function T(e){if(p)return p(e);if(null==e)return{};var t=typeof e;function n(){}return t!==o&&t!==i&&E("Object prototype may only be an Object:"+e),n[a]=e,new n}var D=S((()=>{P()}));function x(e,t){function n(){this.constructor=e}typeof t!==i&&null!==t&&E("Class extends value "+String(t)+" is not a constructor or null"),N(e,t),e[a]=null===t?T(t):(n[a]=t[a],new n)}var R,j,N,M=S((()=>{P(),D(),(I()||{}).Symbol,(I()||{}).Reflect,R=function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])u[c].call(t,i)&&(e[i]=t[i]);return e},j=d||R,N=function(e,t){return(N=l.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[c](n)&&(e[n]=t[n])})(e,t)}})),O=S((()=>{})),A=S((()=>{P(),D(),M(),O()}));function L(e,t){return e&&de[Y].hasOwnProperty.call(e,t)}function F(e){return e&&(e===de[Y]||e===Array[Y])}function U(e){return F(e)||e===Function[Y]}function K(e){var t;if(e){if(pe)return pe(e);var n=e[se]||e[Y]||(e[z]?e[z][Y]:null);t=e[ae]||n,L(e,ae)||(delete e[ce],t=e[ae]=e[ce]||e[ae],e[ce]=n)}return t}function W(e,t){var n=[];if(he)n=he(e);else for(var r in e)"string"==typeof r&&L(e,r)&&n.push(r);if(n&&n.length>0)for(var i=0;i<n.length;i++)t(n[i])}function V(e,t,n){return t!==z&&typeof e[t]===Q&&(n||L(e,t))}function H(e){throw new TypeError("DynamicProto: "+e)}function B(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0;return!1}function q(e,t,n,r){var i=null;if(e&&L(n,ee)){var o=e[X]||{};if((i=(o[n[ee]]||{})[t])||H("Missing ["+t+"] "+Q),!i[ne]&&!1!==o[re]){for(var s=!L(e,t),a=K(e),c=[];s&&a&&!U(a)&&!B(c,a);){var l=a[t];if(l){s=l===r;break}c.push(a),a=K(a)}try{s&&(e[t]=i),i[ne]=1}catch(e){o[re]=!1}}}return i}function J(e,t,n){var r=t[e];return r===n&&(r=K(t)[e]),typeof r!==Q&&H("["+e+"] is not a "+Q),r}function $(e,t){return L(e,Y)?e.name||t||oe:((e||{})[z]||{}).name||t||oe}function G(e,t,n,r){L(e,Y)||H("theClass is an invalid class definition.");var i=e[Y];(function(e,t){if(pe){for(var n=[],r=K(t);r&&!U(r)&&!B(n,r);){if(r===e)return!0;n.push(r),r=K(r)}return!1}return!0})(i,t)||H("["+$(e)+"] is not in class hierarchy of ["+$(t)+"]");var o=null;L(i,ee)?o=i[ee]:(o=te+$(e,"_")+"$"+fe,fe++,i[ee]=o);var s=G[ie],a=!!s[le];a&&r&&void 0!==r[le]&&(a=!!r[le]);var c=function(e){var t={};return W(e,(function(n){!t[n]&&V(e,n,!1)&&(t[n]=e[n])})),t}(t),l=function(e,t,n,r){function i(e,t,n){var i=t[n];if(i[Z]&&r){var o=e[X]||{};!1!==o[re]&&(i=(o[t[ee]]||{})[n]||i)}return function(){return i.apply(e,arguments)}}var o={};W(n,(function(e){o[e]=i(t,n,e)}));for(var s=K(e),a=[];s&&!U(s)&&!B(a,s);)W(s,(function(e){!o[e]&&V(s,e,!pe)&&(o[e]=i(t,s,e))})),a.push(s),s=K(s);return o}(i,t,c,a);n(t,l);var u=!!pe&&!!s[ue];u&&r&&(u=!!r[ue]),function(e,t,n,r,i){if(!F(e)){var o=n[X]=n[X]||{},s=o[t]=o[t]||{};!1!==o[re]&&(o[re]=!!i),W(n,(function(t){V(n,t,!1)&&n[t]!==r[t]&&(s[t]=n[t],delete n[t],(!L(e,t)||e[t]&&!e[t][Z])&&(e[t]=function(e,t){var n=function(){return(q(this,t,e,n)||J(t,e,n)).apply(this,arguments)};return n[Z]=1,n}(e,t)))}))}}(i,o,t,c,!1!==u)}var z,Y,Q,X,Z,ee,te,ne,re,ie,oe,se,ae,ce,le,ue,de,pe,he,fe,ge,me,ye,ve=S((()=>{z="constructor",Y="prototype",Q="function",X="_dynInstFuncs",Z="_isDynProxy",ee="_dynClass",te="_dynCls$",re=ne="_dynInstChk",ie="_dfOpts",oe="_unknown_",ae="_dyn"+(se="__proto__"),ce="_dynInstProto",le="useBaseInst",ue="setInstFuncs",pe=(de=Object).getPrototypeOf,he=de.getOwnPropertyNames,fe=0,ge={setInstFuncs:!0,useBaseInst:!0},G[ie]=ge})),be=S((()=>{var e;(e=me||(me={}))[e.CRITICAL=1]="CRITICAL",e[e.WARNING=2]="WARNING",ye={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103}}));function we(e){return u.toString.call(e)}function Ce(e,t){return typeof e===t}function Se(e){return void 0===e||typeof e===s}function _e(e){return null===e||Se(e)}function ke(e){return!_e(e)}function Pe(e,t){return e&&f.call(e,t)}function Ie(e){return typeof e===o}function Ee(e){return typeof e===i}function Te(e,t,n,r){void 0===r&&(r=!1);var i=!1;if(!_e(e))try{_e(e[rt])?_e(e[nt])||(e[nt](tt+t,n),i=!0):(e[rt](t,n,r),i=!0)}catch(e){}return i}function De(e,t,n,r){if(void 0===r&&(r=!1),!_e(e))try{_e(e[ot])?_e(e[it])||e[it](tt+t,n):e[ot](t,n,r)}catch(e){}}function xe(e,t){if(e)for(var n in e)f.call(e,n)&&t.call(e,n,e[n])}function Re(e,t){return!(!e||!t)&&-1!==e.indexOf(t)}function je(e){return"[object Date]"===we(e)}function Ne(e){return"[object Array]"===we(e)}function Me(e){return"[object Error]"===we(e)}function Oe(e){return"string"==typeof e}function Ae(e){return"number"==typeof e}function Le(e){return"boolean"==typeof e}function Fe(e){if(je(e)){var t=function(e){var t=String(e);return 1===t.length&&(t="0"+t),t};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}function Ue(e,t,n){for(var r=e.length,i=0;i<r&&(!(i in e)||-1!==t.call(n||e,e[i],i,e));i++);}function Ke(e,t,n){for(var r=e.length,i=n||0,o=Math.max(i>=0?i:r-Math.abs(i),0);o<r;o++)if(o in e&&e[o]===t)return o;return-1}function We(e,t,n){for(var r=e.length,i=n||e,o=new Array(r),s=0;s<r;s++)s in e&&(o[s]=t.call(i,e[s],e));return o}function Ve(e,t,n){var r,i=e.length,o=0;if(arguments.length>=3)r=arguments[2];else{for(;o<i&&!(o in e);)o++;r=e[o++]}for(;o<i;)o in e&&(r=t(r,e[o],o,e)),o++;return r}function He(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"")}function Be(e){var t=typeof e;t!==i&&(t!==o||null===e)&&E("objKeys called on non-object");var n=[];for(var r in e)e&&f.call(e,r)&&n.push(r);if(at)for(var s=ct.length,a=0;a<s;a++)e&&f.call(e,ct[a])&&n.push(ct[a]);return n}function qe(e,t,n,r){if(st)try{var i={enumerable:!0,configurable:!0};return n&&(i.get=n),r&&(i.set=r),st(e,t,i),!0}catch(e){}return!1}function Je(){var e=Date;return e.now?e.now():(new e).getTime()}function $e(e){return Me(e)?e.name:""}function Ge(e,t,n,r,i){var o=n;return e&&(o=e[t])!==n&&(!i||i(o))&&(!r||r(n))&&(o=n,e[t]=o),o}function ze(e,t,n){var r;return e?!(r=e[t])&&_e(r)&&(r=Se(n)?{}:n,e[t]=r):r=Se(n)?{}:n,r}function Ye(e){return!e}function Qe(e){return!!e}function Xe(e){throw new Error(e)}function Ze(e,t,n){if(e&&t&&e!==t&&Ie(e)&&Ie(t)){var r=function(r){if(Oe(r)){var i=t[r];Ee(i)?(!n||n(r,!0,t,e))&&(e[r]=(o=r,function(){var e=arguments;return t[o].apply(t,e)})):(!n||n(r,!1,t,e))&&(Pe(e,r)&&delete e[r],qe(e,r,(function(){return t[r]}),(function(e){t[r]=e}))||(e[r]=i))}var o};for(var i in t)r(i)}return e}function et(e){return e&&(e=l(d?d({},e):e)),e}var tt,nt,rt,it,ot,st,at,ct,lt=S((()=>{A(),tt="on",nt="attachEvent",rt="addEventListener",it="detachEvent",ot="removeEventListener",st=h,l.freeze,l.seal,at=!{toString:null}.propertyIsEnumerable("toString"),ct=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]}));function ut(e){var t=I();return t&&t[e]?t[e]:e===_t&&dt()?window:null}function dt(){return Boolean(typeof window===o&&window)}function pt(){return dt()?window:ut(_t)}function ht(){return Boolean(typeof document===o&&document)}function ft(){return ht()?document:ut(kt)}function gt(){return Boolean(typeof navigator===o&&navigator)?navigator:ut(Pt)}function mt(e){if(e&&Ft){var t=ut("__mockLocation");if(t)return t}return typeof location===o&&location?location:ut(Et)}function yt(){return ut(Dt)}function vt(){return Boolean(typeof JSON===o&&JSON||null!==ut(xt))}function bt(){return vt()?JSON||ut(xt):null}function wt(){var e=gt();if(e&&(e.userAgent!==Lt||null===At)){var t=((Lt=e.userAgent)||"").toLowerCase();At=Re(t,Mt)||Re(t,Ot)}return At}function Ct(e){if(void 0===e&&(e=null),!e){var t=gt()||{};e=t?(t.userAgent||"").toLowerCase():""}var n=(e||"").toLowerCase();if(Re(n,Mt))return parseInt(n.split(Mt)[1]);if(Re(n,Ot)){var r=parseInt(n.split(Ot)[1]);if(r)return r+4}return null}function St(e){var t=Object[a].toString.call(e),n="";return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":vt()&&(n=bt().stringify(e)),t+n}var _t,kt,Pt,It,Et,Tt,Dt,xt,Rt,jt,Nt,Mt,Ot,At,Lt,Ft,Ut=S((()=>{A(),lt(),_t="window",kt="document",Pt="navigator",It="history",Et="location",Tt="console",Dt="performance",xt="JSON",Rt="crypto",jt="msCrypto",Nt="ReactNative",Mt="msie",Ot="trident/",At=null,Lt=null,Ft=!1}));function Kt(e){return e?'"'+e.replace(/\"/g,"")+'"':""}function Wt(e,t){return(e||{}).logger||new Ht(t)}var Vt,Ht,Bt=S((()=>{be(),Ut(),ve(),lt(),Vt=function(){function e(e,t,n,r){void 0===n&&(n=!1);var i=this;i.messageId=e,i.message=(n?"AI: ":"AI (Internal): ")+e;var o="";vt()&&(o=bt().stringify(r));var s=(t?" message:"+Kt(t):"")+(r?" props:"+Kt(o):"");i.message+=s}return e.dataType="MessageData",e}(),Ht=function e(t){this.identifier="DiagnosticLogger",this.queue=[];var n=0,r={};G(e,this,(function(e){function i(e,n){var r=t[e];return _e(r)?n:r}_e(t)&&(t={}),e.consoleLoggingLevel=function(){return i("loggingLevelConsole",0)},e.telemetryLoggingLevel=function(){return i("loggingLevelTelemetry",1)},e.maxInternalMessageLimit=function(){return i("maxMessageLimit",25)},e.enableDebugExceptions=function(){return i("enableDebugExceptions",!1)},e.throwInternal=function(t,n,i,o,s){void 0===s&&(s=!1);var a=new Vt(n,i,s,o);if(e.enableDebugExceptions())throw a;if(!Se(a.message)){var c=e.consoleLoggingLevel();if(s){var l=+a.messageId;!r[l]&&c>=me.WARNING&&(e.warnToConsole(a.message),r[l]=!0)}else c>=me.WARNING&&e.warnToConsole(a.message);e.logInternalMessage(t,a)}},e.warnToConsole=function(e){var t=typeof console!==s?console:ut(Tt);if(t){var n="log";t.warn&&(n="warn"),Ee(t[n])&&t[n](e)}},e.resetInternalMessageCount=function(){n=0,r={}},e.logInternalMessage=function(t,i){if(!(n>=e.maxInternalMessageLimit())){var o=!0,s="AITR_"+i.messageId;if(r[s]?o=!1:r[s]=!0,o&&(t<=e.telemetryLoggingLevel()&&(e.queue.push(i),n++),n===e.maxInternalMessageLimit())){var a="Internal events throttle limit per PageView reached for this app.",c=new Vt(ye.MessageLimitPerPVExceeded,a,!1);e.queue.push(c),e.warnToConsole(a)}}}}))}}));function qt(e,t,n,r,i){if(e){var o=e;if(Ee(o.getPerfMgr)&&(o=o.getPerfMgr()),o){var s=void 0,a=o.getCtx(Gt);try{if(s=o.create(t(),r,i)){if(a&&s.setCtx&&(s.setCtx(Jt.ParentContextKey,a),a.getCtx&&a.setCtx)){var c=a.getCtx(Jt.ChildrenContextKey);c||(c=[],a.setCtx(Jt.ChildrenContextKey,c)),c.push(s)}return o.setCtx(Gt,s),n(s)}}catch(e){s&&s.setCtx&&s.setCtx("exception",e)}finally{s&&o.fire(s),o.setCtx(Gt,a)}}}return n()}var Jt,$t,Gt,zt,Yt=S((()=>{ve(),lt(),Jt=function(){function e(t,n,r){var i,o=this,s=!1;o.start=Je(),o.name=t,o.isAsync=r,o.isChildEvt=function(){return!1},Ee(n)&&(s=qe(o,"payload",(function(){return!i&&Ee(n)&&(i=n(),n=null),i}))),o.getCtx=function(t){return t?t===e.ParentContextKey||t===e.ChildrenContextKey?o[t]:(o.ctx||{})[t]:null},o.setCtx=function(t,n){t&&(t===e.ParentContextKey?(o[t]||(o.isChildEvt=function(){return!0}),o[t]=n):t===e.ChildrenContextKey?o[t]=n:(o.ctx=o.ctx||{})[t]=n)},o.complete=function(){var t=0,r=o.getCtx(e.ChildrenContextKey);if(Ne(r))for(var i=0;i<r.length;i++){var a=r[i];a&&(t+=a.time)}o.time=Je()-o.start,o.exTime=o.time-t,o.complete=function(){},!s&&Ee(n)&&(o.payload=n())}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),$t=function e(t){this.ctx={},G(e,this,(function(e){e.create=function(e,t,n){return new Jt(e,t,n)},e.fire=function(e){e&&(e.complete(),t&&t.perfEvent(e))},e.setCtx=function(t,n){t&&((e.ctx=e.ctx||{})[t]=n)},e.getCtx=function(t){return(e.ctx||{})[t]}}))},Gt="CoreUtils.doPerf"})),Qt=S((()=>{Yt(),be(),lt(),zt=function(e,t){var n=this,r=null,i=Ee(e.processTelemetry),o=Ee(e.setNextPlugin);n._hasRun=!1,n.getPlugin=function(){return e},n.getNext=function(){return r},n.setNext=function(e){r=e},n.processTelemetry=function(s,a){a||(a=t);var c=e?e.identifier:"TelemetryPluginChain";qt(a?a.core():null,(function(){return c+":processTelemetry"}),(function(){if(e&&i){n._hasRun=!0;try{a.setNext(r),o&&e.setNextPlugin(r),r&&(r._hasRun=!1),e.processTelemetry(s,a)}catch(n){var t=r&&r._hasRun;(!r||!t)&&a.diagLog().throwInternal(me.CRITICAL,ye.PluginException,"Plugin ["+e.identifier+"] failed during processTelemetry - "+n),r&&!t&&r.processTelemetry(s,a)}}else r&&(n._hasRun=!0,r.processTelemetry(s,a))}),(function(){return{item:s}}),!s.sync)}}}));function Xt(e,t){var n=[];if(e&&e.length>0)for(var r=null,i=0;i<e.length;i++){var o=e[i];if(o&&Ee(o.processTelemetry)){var s=new zt(o,t);n.push(s),r&&r.setNext(s),r=s}}return n.length>0?n[0]:null}var Zt,en,tn,nn,rn,on=S((()=>{Bt(),Qt(),lt(),Zt=function e(t,n,r,i){var o=this,s=null;null!==i&&(t&&Ee(t.getPlugin)?s=function(e,t,n){var r=[],i=!n;if(e)for(;e;){var o=e.getPlugin();(i||o===n)&&(i=!0,r.push(o)),e=e.getNext()}return i||r.push(n),Xt(r,t)}(t,o,i||t.getPlugin()):i?s=function(e,t,n){var r=e,i=!1;return n&&e&&(r=[],Ue(e,(function(e){(i||e===n)&&(i=!0,r.push(e))}))),n&&!i&&(r||(r=[]),r.push(n)),Xt(r,t)}(t,o,i):Se(i)&&(s=Xt(t,o))),o.core=function(){return r},o.diagLog=function(){return Wt(r,n)},o.getCfg=function(){return n},o.getExtCfg=function(e,t){var r;if(void 0===t&&(t={}),n){var i=n.extensionConfig;i&&e&&(r=i[e])}return r||t},o.getConfig=function(e,t,r){void 0===r&&(r=!1);var i,s=o.getExtCfg(e,null);return s&&!_e(s[t])?i=s[t]:n&&!_e(n[t])&&(i=n[t]),_e(i)?r:i},o.hasNext=function(){return null!=s},o.getNext=function(){return s},o.setNext=function(e){s=e},o.processNext=function(e){var t=s;t&&(s=t.getNext(),t.processTelemetry(e,o))},o.createNew=function(t,i){return void 0===t&&(t=null),new e(t||s,n,r,i)}}})),sn=S((()=>{en="iKey",tn="extensionConfig"})),an=S((()=>{on(),lt(),sn(),nn="getPlugin",rn=function(){function e(){var e=this,t=!1,n=null,r=null;e.core=null,e.diagLog=function(t){return e._getTelCtx(t).diagLog()},e.isInitialized=function(){return t},e.setInitialized=function(e){t=e},e.setNextPlugin=function(e){r=e},e.processNext=function(e,t){t?t.processNext(e):r&&Ee(r.processTelemetry)&&r.processTelemetry(e,null)},e._getTelCtx=function(t){void 0===t&&(t=null);var i=t;if(!i){var o=n||new Zt(null,{},e.core);i=r&&r[nn]?o.createNew(null,r[nn]):o.createNew(null,r)}return i},e._baseTelInit=function(i,o,s,a){i&&Ge(i,tn,[],null,_e),!a&&o&&(a=o.getProcessTelContext().getNext());var c=r;r&&r[nn]&&(c=r[nn]()),e.core=o,n=new Zt(a,i,o,c),t=!0}}return e.prototype.initialize=function(e,t,n,r){this._baseTelInit(e,t,n,r)},e}()}));function cn(e,t){for(var n=[],r=null,i=e.getNext();i;){var o=i.getPlugin();o&&(r&&Ee(r[pn])&&Ee(o[un])&&r[pn](o),(!Ee(o[hn])||!o[hn]())&&n.push(o),r=o,i=i.getNext())}Ue(n,(function(n){n.initialize(e.getCfg(),e.core(),t,e.getNext())}))}function ln(e){return e.sort((function(e,t){var n=0,r=Ee(t[un]);return Ee(e[un])?n=r?e[dn]-t[dn]:1:r&&(n=-1),n}))}var un,dn,pn,hn,fn,gn=S((()=>{lt(),un="processTelemetry",dn="priority",pn="setNextPlugin",hn="isInitialized"})),mn=S((()=>{A(),ve(),an(),on(),gn(),lt(),500,fn=function(e){function t(){var n,r=e.call(this)||this;function i(e){e&&e.length>0&&(function(e){Ue(e,(function(e){e.priority<500&&Xe("Channel has invalid priority"+e.identifier)}))}(e=e.sort((function(e,t){return e.priority-t.priority}))),n.push(e))}return r.identifier="ChannelControllerPlugin",r.priority=500,G(t,r,(function(e,t){e.setNextPlugin=function(e){},e.processTelemetry=function(e,t){n&&Ue(n,(function(n){n.length>0&&r._getTelCtx(t).createNew(n).processNext(e)}))},e.getChannelControls=function(){return n},e.initialize=function(r,o,s){e.isInitialized()||(t.initialize(r,o,s),function(e,t){if(n=[],e&&Ue(e,(function(e){return i(e)})),t){var r=[];Ue(t,(function(e){e.priority>500&&r.push(e)})),i(r)}}((r||{}).channels,s),Ue(n,(function(e){return cn(new Zt(e,r,o),s)})))}})),r}return x(t,e),t._staticInit=(qe(n=t.prototype,"ChannelControls",n.getChannelControls),void qe(n,"channelQueue",n.getChannelControls)),t;var n}(rn)}));function yn(e,t){var n=wn[On]||Vn[On];return n||(n=wn[On]=wn(e,t),Vn[On]=n),n}function vn(e){return!e||e.isEnabled()}function bn(e,t){var n;if(e)n=e.getCookieMgr();else if(t){var r=t.cookieCfg;n=r[On]?r[On]:wn(t)}return n||(n=yn(t,(e||{}).logger)),n}function wn(e,t){var n=function(e){var t=e.cookieCfg=e.cookieCfg||{};if(Ge(t,"domain",e.cookieDomain,ke,_e),Ge(t,"path",e.cookiePath||"/",null,_e),_e(t[jn])){var n=void 0;Se(e[Nn])||(n=!e[Nn]),Se(e[Mn])||(n=!e[Mn]),t[jn]=n}return t}(e||Vn),r=n.path||"/",i=n.domain,o=!1!==n[jn],s={isEnabled:function(){var e=o&&Cn(t),n=Vn[On];return e&&n&&s!==n&&(e=vn(n)),e},setEnabled:function(e){o=!1!==e},set:function(e,t,o,a,c){if(vn(s)){var l={},u=He(t||An),d=u.indexOf(";");if(-1!==d&&(u=He(t.substring(0,d)),l=Sn(t.substring(d+1))),Ge(l,"domain",a||i,Qe,Se),!_e(o)){var p=wt();if(Se(l[Rn])){var h=Je()+1e3*o;if(h>0){var f=new Date;f.setTime(h),Ge(l,Rn,_n(f,p?Tn:Dn)||_n(f,p?Tn:Dn)||An,Qe)}}p||Ge(l,"max-age",An+o,null,Se)}var g=mt();g&&"https:"===g.protocol&&(Ge(l,"secure",null,null,Se),null===Fn&&(Fn=!En((gt()||{}).userAgent)),Fn&&Ge(l,"SameSite","None",null,Se)),Ge(l,"path",c||r,null,Se),(n.setCookie||In)(e,kn(u,l))}},get:function(e){var t=An;return vn(s)&&(t=(n.getCookie||Pn)(e)),t},del:function(e,t){vn(s)&&s.purge(e,t)},purge:function(e,r){if(Cn(t)){var i=((o={}).path=r||"/",o[Rn]="Thu, 01 Jan 1970 00:00:01 GMT",o);wt()||(i["max-age"]="0"),(n.delCookie||In)(e,kn(An,i))}var o}};return s[On]=s,s}function Cn(e){if(null===Ln){Ln=!1;try{Ln=void 0!==(Kn||{})[xn]}catch(t){e&&e.throwInternal(me.WARNING,ye.CannotAccessCookie,"Cannot access document.cookie - "+$e(t),{exception:St(t)})}}return Ln}function Sn(e){var t={};return e&&e.length&&Ue(He(e).split(";"),(function(e){if(e=He(e||An)){var n=e.indexOf("=");-1===n?t[e]=null:t[He(e.substring(0,n))]=He(e.substring(n+1))}})),t}function _n(e,t){return Ee(e[t])?e[t]():null}function kn(e,t){var n=e||An;return xe(t,(function(e,t){n+="; "+e+(_e(t)?An:"="+t)})),n}function Pn(e){var t=An;if(Kn){var n=Kn[xn]||An;Un!==n&&(Wn=Sn(n),Un=n),t=He(Wn[e]||An)}return t}function In(e,t){Kn&&(Kn[xn]=e+"="+t)}function En(e){return!!Oe(e)&&!!(Re(e,"CPU iPhone OS 12")||Re(e,"iPad; CPU OS 12")||Re(e,"Macintosh; Intel Mac OS X 10_14")&&Re(e,"Version/")&&Re(e,"Safari")||Re(e,"Macintosh; Intel Mac OS X 10_14")&&function(e,t){if(e){var n=t.length,r=e.length;if(e===t)return!0;if(r>=n){for(var i=r-1,o=n-1;o>=0;o--){if(e[i]!=t[o])return!1;i--}return!0}}return!1}(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Re(e,"Chrome/5")||Re(e,"Chrome/6")||Re(e,"UnrealEngine")&&!Re(e,"Chrome")||Re(e,"UCBrowser/12")||Re(e,"UCBrowser/11"))}var Tn,Dn,xn,Rn,jn,Nn,Mn,On,An,Ln,Fn,Un,Kn,Wn,Vn,Hn,Bn,qn,Jn,$n=S((()=>{be(),Ut(),lt(),Tn="toGMTString",Dn="toUTCString",xn="cookie",Rn="expires",jn="enabled",Nn="isCookieUseDisabled",Mn="disableCookiesUsage",On="_ckMgr",An="",Ln=null,Fn=null,Un=null,Kn=ft(),Wn={},Vn={}})),Gn=S((()=>{A(),ve(),mn(),on(),gn(),Yt(),$n(),lt(),sn(),Hn="_notificationManager",Bn=function e(){var t,n,r,i,o,s=!1;G(e,this,(function(e){e._extensions=new Array,n=new fn,e.logger=T({throwInternal:function(e,t,n,r,i){void 0===i&&(i=!1)},warnToConsole:function(e){},resetInternalMessageCount:function(){}}),t=[],e.isInitialized=function(){return s},e.initialize=function(t,i,o,a){e.isInitialized()&&Xe("Core should not be initialized more than once"),(!t||_e(t.instrumentationKey))&&Xe("Please provide instrumentation key"),r=a,e[Hn]=a,e.config=t||{},t.extensions=_e(t.extensions)?[]:t.extensions,ze(t,tn).NotificationManager=a,o&&(e.logger=o);var c=[];c.push.apply(c,i.concat(t.extensions)),c=ln(c);var l=[],u=[],d={};Ue(c,(function(e){(_e(e)||_e(e.initialize))&&Xe("Extensions must provide callback to initialize");var t=e.priority,r=e.identifier;e&&t&&(_e(d[t])?d[t]=r:o.warnToConsole("Two extensions have same priority #"+t+" - "+d[t]+", "+r)),!t||t<n.priority?l.push(e):u.push(e)})),c.push(n),l.push(n),c=ln(c),e._extensions=c,cn(new Zt([n],t,e),c),cn(new Zt(l,t,e),c),e._extensions=l,0===e.getTransmissionControls().length&&Xe("No channels available"),s=!0,e.releaseQueue()},e.getTransmissionControls=function(){return n.getChannelControls()},e.track=function(n){Ge(n,en,e.config.instrumentationKey,null,Ye),Ge(n,"time",Fe(new Date),null,Ye),Ge(n,"ver","4.0",null,_e),e.isInitialized()?e.getProcessTelContext().processNext(n):t.push(n)},e.getProcessTelContext=function(){var t=e._extensions,r=t;return(!t||0===t.length)&&(r=[n]),new Zt(r,e.config,e)},e.getNotifyMgr=function(){return r||(r=T({addNotificationListener:function(e){},removeNotificationListener:function(e){},eventsSent:function(e){},eventsDiscarded:function(e,t){},eventsSendRequest:function(e,t){}}),e[Hn]=r),r},e.getCookieMgr=function(){return o||(o=wn(e.config,e.logger)),o},e.setCookieMgr=function(e){o=e},e.getPerfMgr=function(){return i||e.config&&e.config.enablePerfMgr&&(i=new $t(e.getNotifyMgr())),i},e.setPerfMgr=function(e){i=e},e.eventCnt=function(){return t.length},e.releaseQueue=function(){t.length>0&&(Ue(t,(function(t){e.getProcessTelContext().processNext(t)})),t=[])}}))}})),zn=S((()=>{ve(),lt(),qn=function e(t){this.listeners=[];var n=!!(t||{}).perfEvtsSendAll;G(e,this,(function(e){e.addNotificationListener=function(t){e.listeners.push(t)},e.removeNotificationListener=function(t){for(var n=Ke(e.listeners,t);n>-1;)e.listeners.splice(n,1),n=Ke(e.listeners,t)},e.eventsSent=function(t){Ue(e.listeners,(function(e){e&&e.eventsSent&&setTimeout((function(){return e.eventsSent(t)}),0)}))},e.eventsDiscarded=function(t,n){Ue(e.listeners,(function(e){e&&e.eventsDiscarded&&setTimeout((function(){return e.eventsDiscarded(t,n)}),0)}))},e.eventsSendRequest=function(t,n){Ue(e.listeners,(function(e){if(e&&e.eventsSendRequest)if(n)setTimeout((function(){return e.eventsSendRequest(t,n)}),0);else try{e.eventsSendRequest(t,n)}catch(e){}}))},e.perfEvent=function(t){t&&(n||!t.isChildEvt())&&Ue(e.listeners,(function(e){if(e&&e.perfEvent)if(t.isAsync)setTimeout((function(){return e.perfEvent(t)}),0);else try{e.perfEvent(t)}catch(e){}}))}}))}})),Yn=S((()=>{A(),Gn(),k(),zn(),Yt(),Bt(),ve(),lt(),Jn=function(e){function t(){var n=e.call(this)||this;return G(t,n,(function(e,t){function n(t){var n=e.getNotifyMgr();n&&n.eventsDiscarded([t],r.InvalidEvent)}e.initialize=function(e,n,r,i){t.initialize(e,n,r||new Ht(e),i||new qn(e))},e.track=function(r){qt(e.getPerfMgr(),(function(){return"AppInsightsCore:track"}),(function(){null===r&&(n(r),Xe("Invalid telemetry item")),function(e){if(_e(e.name))throw n(e),Error("telemetry name required")}(r),t.track(r)}),(function(){return{item:r}}),!r.sync)},e.addNotificationListener=function(t){var n=e.getNotifyMgr();n&&n.addNotificationListener(t)},e.removeNotificationListener=function(t){var n=e.getNotifyMgr();n&&n.removeNotificationListener(t)},e.pollInternalLogs=function(t){var n=e.config.diagnosticLogInterval;return(!n||!(n>0))&&(n=1e4),setInterval((function(){var n=e.logger?e.logger.queue:[];Ue(n,(function(n){var r={name:t||"InternalMessageId: "+n.messageId,iKey:e.config.instrumentationKey,time:Fe(new Date),baseType:Vt.dataType,baseData:{message:n.message}};e.track(r)})),n.length=0}),n)}})),n}return x(t,e),t}(Bn)}));function Qn(e){e<0&&(e>>>=0),sr=123456789+e&ir,ar=987654321-e&ir,or=!0}function Xn(){try{var e=2147483647&Je();Qn((Math.random()*rr^e)+e)}catch(e){}}function Zn(e){return e>0?Math.floor(er()/ir*(e+1))>>>0:0}function er(e){var t,n=ut(Rt)||ut(jt);return n&&n.getRandomValues?t=n.getRandomValues(new Uint32Array(1))[0]&ir:wt()?(or||Xn(),t=nr()&ir):t=Math.floor(rr*Math.random()|0),e||(t>>>=0),t}function tr(e){e?Qn(e):Xn()}function nr(e){var t=((ar=36969*(65535&ar)+(ar>>16)&ir)<<16)+(65535&(sr=18e3*(65535&sr)+(sr>>16)&ir))>>>0&ir|0;return e||(t>>>=0),t}var rr,ir,or,sr,ar,cr=S((()=>{Ut(),lt(),rr=4294967296,ir=4294967295,or=!1,sr=123456789,ar=987654321}));function lr(e,t){var n=!1,r=pt();r&&(n=Te(r,e,t),n=Te(r.body,e,t)||n);var i=ft();return i&&(n=kr.Attach(i,e,t)||n),n}function ur(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(_r,(function(e){var t=0|Zn(15);return("x"===e?t:3&t|8).toString(16)}))}function dr(){var e=yt();return e&&e.now?e.now():Je()}function pr(e){void 0===e&&(e=22);for(var t=er()>>>0,n=0,r="";r.length<e;)n++,r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===n&&(t=(er()<<2&4294967295|3&t)>>>0,n=0);return r}function hr(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n="",r=0;r<4;r++)n+=t[15&(e=er())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var i=t[8+(3&er())|0];return n.substr(0,8)+n.substr(9,4)+"4"+n.substr(13,3)+i+n.substr(16,3)+n.substr(19,12)}function fr(e,t){var n=yn(e,t),r=Sr._canUseCookies;return null===wr&&(wr=[],Cr=r,qe(Sr,"_canUseCookies",(function(){return Cr}),(function(e){Cr=e,Ue(wr,(function(t){t.setEnabled(e)}))}))),-1===Ke(wr,n)&&wr.push(n),Le(r)&&n.setEnabled(r),Le(Cr)&&n.setEnabled(Cr),n}function gr(){fr().setEnabled(!1)}function mr(e){return fr(null,e).isEnabled()}function yr(e,t){return fr(null,e).get(t)}function vr(e,t,n,r){fr(null,e).set(t,n,null,r)}function br(e,t){return fr(null,e).del(t)}var wr,Cr,Sr,_r,kr,Pr=S((()=>{A(),$n(),Ut(),lt(),cr(),wr=null,Sr={_canUseCookies:void 0,isTypeof:Ce,isUndefined:Se,isNullOrUndefined:_e,hasOwnProperty:Pe,isFunction:Ee,isObject:Ie,isDate:je,isArray:Ne,isError:Me,isString:Oe,isNumber:Ae,isBoolean:Le,toISOString:Fe,arrForEach:Ue,arrIndexOf:Ke,arrMap:We,arrReduce:Ve,strTrim:He,objCreate:T,objKeys:Be,objDefineAccessors:qe,addEventHandler:lr,dateNow:Je,isIE:wt,disableCookies:gr,newGuid:ur,perfNow:dr,newId:pr,randomValue:Zn,random32:er,mwcRandomSeed:tr,mwcRandom32:nr,generateW3CId:hr},_r=/[xy]/g,kr={Attach:Te,AttachEvent:Te,Detach:De,DetachEvent:De}}));function Ir(e,t){if(e)for(var n=0;n<e.length&&!t(e[n],n);n++);}function Er(e,t,n,r,i){i>=0&&i<=2&&Ir(e,(function(e,o){var s=e.cbks,a=s[Rr[i]];if(a){t.ctx=function(){return r[o]=r[o]||{}};try{a.apply(t.inst,n)}catch(e){var c=t.err;try{var l=s[Rr[2]];l&&(t.err=e,l.apply(t.inst,n))}catch(e){}finally{t.err=c}}}}))}function Tr(e,t,n){var r=null;return e&&(Pe(e,t)?r=e:n&&(r=Tr(function(e){if(e){if(Mr)return Mr(e);var t=e[jr]||e[a]||e[Nr];if(t)return t}return null}(e),t,!1))),r}function Dr(e,t,n,r){if(void 0===r&&(r=!0),e&&t&&n){var o=Tr(e,t,r);if(o){var s=o[t];if(typeof s===i){var a=s[xr];if(!a){var c=function(e){return function(){var t=this,n=arguments,r=e.h,i={name:e.n,inst:t,ctx:null,set:c},o=[],s=a([i],n);function a(e,t){return Ir(t,(function(t){e.push(t)})),e}function c(e,t){(n=a([],n))[e]=t,s=a([i],n)}Er(r,i,s,o,0);var l=e.f;try{i.rslt=l.apply(t,n)}catch(e){throw i.err=e,Er(r,i,s,o,3),e}return Er(r,i,s,o,1),i.rslt}}(a={i:0,n:t,f:s,h:[]});c[xr]=a,o[t]=c}var l={id:a.i,cbks:n,rm:function(){var e=this.id;Ir(a.h,(function(t,n){if(t.id===e)return a.h.splice(n,1),1}))}};return a.i++,a.h.push(l),l}}}return null}var xr,Rr,jr,Nr,Mr,Or,Ar=S((()=>{A(),lt(),xr="_aiHooks",Rr=["req","rsp","hkErr","fnErr"],jr="__proto__",Nr="constructor",Mr=Object.getPrototypeOf})),Lr=S((()=>{Yn(),Gn(),an(),cr(),Pr(),lt(),Ut(),A(),zn(),Yt(),Bt(),be(),Ar(),$n()})),Fr=S((()=>{Or={requestContextHeader:"Request-Context",requestContextTargetKey:"appId",requestContextAppIdFormat:"appId=cid-v1:",requestIdHeader:"Request-Id",traceParentHeader:"traceparent",traceStateHeader:"tracestate",sdkContextHeader:"Sdk-Context",sdkContextHeaderAppIdRequest:"appId",requestContextHeaderLowerCase:"request-context"}}));function Ur(e,t,n){var r=t.length,i=Kr(e,t);if(i.length!==r){for(var o=0,s=i;void 0!==n[s];)o++,s=i.substring(0,147)+zr(o);i=s}return i}function Kr(e,t){var n;return t&&(t=He(t.toString())).length>150&&(n=t.substring(0,150),e.throwInternal(me.WARNING,ye.NameTooLong,"name is too long.  It has been truncated to 150 characters.",{name:t},!0)),n||t}function Wr(e,t,n){var r;return void 0===n&&(n=1024),t&&(n=n||1024,(t=He(t)).toString().length>n&&(r=t.toString().substring(0,n),e.throwInternal(me.WARNING,ye.StringValueTooLong,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0))),r||t}function Vr(e,t){return Gr(e,t,2048,ye.UrlTooLong)}function Hr(e,t){var n;return t&&t.length>32768&&(n=t.substring(0,32768),e.throwInternal(me.WARNING,ye.MessageTruncated,"message is too long, it has been truncated to 32768 characters.",{message:t},!0)),n||t}function Br(e,t){var n;if(t){var r=""+t;r.length>32768&&(n=r.substring(0,32768),e.throwInternal(me.WARNING,ye.ExceptionTruncated,"exception is too long, it has been truncated to 32768 characters.",{exception:t},!0))}return n||t}function qr(e,t){if(t){var n={};xe(t,(function(t,r){if(Ie(r)&&vt())try{r=bt().stringify(r)}catch(t){e.throwInternal(me.WARNING,ye.CannotSerializeObjectNonSerializable,"custom property is not valid",{exception:t},!0)}r=Wr(e,r,8192),t=Ur(e,t,n),n[t]=r})),t=n}return t}function Jr(e,t){if(t){var n={};xe(t,(function(t,r){t=Ur(e,t,n),n[t]=r})),t=n}return t}function $r(e,t){return t&&Gr(e,t,128,ye.IdTooLong).toString()}function Gr(e,t,n,r){var i;return t&&(t=He(t)).length>n&&(i=t.substring(0,n),e.throwInternal(me.WARNING,r,"input is too long, it has been truncated to "+n+" characters.",{data:t},!0)),i||t}function zr(e){var t="00"+e;return t.substr(t.length-3)}var Yr,Qr=S((()=>{Lr(),Yr={MAX_NAME_LENGTH:150,MAX_ID_LENGTH:128,MAX_PROPERTY_LENGTH:8192,MAX_STRING_LENGTH:1024,MAX_URL_LENGTH:2048,MAX_MESSAGE_LENGTH:32768,MAX_EXCEPTION_LENGTH:32768,sanitizeKeyAndAddUniqueness:Ur,sanitizeKey:Kr,sanitizeString:Wr,sanitizeUrl:Vr,sanitizeMessage:Hr,sanitizeException:Br,sanitizeProperties:qr,sanitizeMeasurements:Jr,sanitizeId:$r,sanitizeInput:Gr,padNumber:zr,trim:He}}));function Xr(e){var t=null;if(Ee(Event))t=new Event(e);else{var n=ft();n&&n.createEvent&&(t=n.createEvent("Event")).initEvent(e,!0,!0)}return t}var Zr=S((()=>{Lr()}));function ei(e,t){return void 0===t&&(t=!1),null==e?t:"true"===e.toString().toLowerCase()}function ti(e){(isNaN(e)||e<0)&&(e=0);var t=""+(e=Math.round(e))%1e3,n=""+Math.floor(e/1e3)%60,r=""+Math.floor(e/6e4)%60,i=""+Math.floor(e/36e5)%24,o=Math.floor(e/864e5);return t=1===t.length?"00"+t:2===t.length?"0"+t:t,n=n.length<2?"0"+n:n,r=r.length<2?"0"+r:r,(o>0?o+".":"")+(i=i.length<2?"0"+i:i)+":"+r+":"+n+"."+t}function ni(){var e=gt();return"sendBeacon"in e&&e.sendBeacon}function ri(e,t){var n=null;return Ue(e,(function(e){if(e.identifier===t)return n=e,-1})),n}function ii(e,t,n,r,i){return!i&&Oe(e)&&("Script error."===e||"Script error"===e)}var oi,si,ai,ci,li,ui,di,pi,hi=S((()=>{Lr()})),fi=S((()=>{oi="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",si="sampleRate",ai="ProcessLegacy",ci="http.method",li="https://dc.services.visualstudio.com",ui="not_specified"})),gi=S((()=>{var e;(e=di||(di={}))[e.LocalStorage=0]="LocalStorage",e[e.SessionStorage=1]="SessionStorage",function(e){e[e.AI=0]="AI",e[e.AI_AND_W3C=1]="AI_AND_W3C",e[e.W3C=2]="W3C"}(pi||(pi={}))}));function mi(){return wi()?yi(di.LocalStorage):null}function yi(e){try{if(_e(I()))return null;var t=new Date,n=ut(e===di.LocalStorage?"localStorage":"sessionStorage");n.setItem(t.toString(),t.toString());var r=n.getItem(t.toString())!==t.toString();if(n.removeItem(t.toString()),!r)return n}catch(e){}return null}function vi(){return ki()?yi(di.SessionStorage):null}function bi(){Di=!1,xi=!1}function wi(){return void 0===Di&&(Di=!!yi(di.LocalStorage)),Di}function Ci(e,t){var n=mi();if(null!==n)try{return n.getItem(t)}catch(t){Di=!1,e.throwInternal(me.WARNING,ye.BrowserCannotReadLocalStorage,"Browser failed read of local storage. "+$e(t),{exception:St(t)})}return null}function Si(e,t,n){var r=mi();if(null!==r)try{return r.setItem(t,n),!0}catch(t){Di=!1,e.throwInternal(me.WARNING,ye.BrowserCannotWriteLocalStorage,"Browser failed write to local storage. "+$e(t),{exception:St(t)})}return!1}function _i(e,t){var n=mi();if(null!==n)try{return n.removeItem(t),!0}catch(t){Di=!1,e.throwInternal(me.WARNING,ye.BrowserFailedRemovalFromLocalStorage,"Browser failed removal of local storage item. "+$e(t),{exception:St(t)})}return!1}function ki(){return void 0===xi&&(xi=!!yi(di.SessionStorage)),xi}function Pi(){var e=[];return ki()&&xe(ut("sessionStorage"),(function(t){e.push(t)})),e}function Ii(e,t){var n=vi();if(null!==n)try{return n.getItem(t)}catch(t){xi=!1,e.throwInternal(me.WARNING,ye.BrowserCannotReadSessionStorage,"Browser failed read of session storage. "+$e(t),{exception:St(t)})}return null}function Ei(e,t,n){var r=vi();if(null!==r)try{return r.setItem(t,n),!0}catch(t){xi=!1,e.throwInternal(me.WARNING,ye.BrowserCannotWriteSessionStorage,"Browser failed write to session storage. "+$e(t),{exception:St(t)})}return!1}function Ti(e,t){var n=vi();if(null!==n)try{return n.removeItem(t),!0}catch(t){xi=!1,e.throwInternal(me.WARNING,ye.BrowserFailedRemovalFromSessionStorage,"Browser failed removal of session storage item. "+$e(t),{exception:St(t)})}return!1}var Di,xi,Ri=S((()=>{Lr(),gi(),Di=void 0,xi=void 0}));function ji(e){var t=Ui,n=Ki,r=n[t];return Fi.createElement?n[t]||(r=n[t]=Fi.createElement("a")):r={host:Ai(e,!0)},r.href=e,++t>=n.length&&(t=0),Ui=t,r}function Ni(e){var t,n=ji(e);return n&&(t=n.href),t}function Mi(e){var t,n=ji(e);return n&&(t=n.pathname),t}function Oi(e,t){return e?e.toUpperCase()+" "+t:t}function Ai(e,t){var n=Li(e,t)||"";if(n){var r=n.match(/(www[0-9]?\.)?(.[^/:]+)(\:[\d]+)?/i);if(null!=r&&r.length>3&&Oe(r[2])&&r[2].length>0)return r[2]+(r[3]||"")}return n}function Li(e,t){var n=null;if(e){var r=e.match(/(\w*):\/\/(.[^/:]+)(\:[\d]+)?/i);if(null!=r&&r.length>2&&Oe(r[2])&&r[2].length>0&&(n=r[2]||"",t&&r.length>2)){var i=(r[1]||"").toLowerCase(),o=r[3]||"";("http"===i&&":80"===o||"https"===i&&":443"===o)&&(o=""),n+=o}}return n}var Fi,Ui,Ki,Wi=S((()=>{Lr(),Fi=ft()||{},Ui=0,Ki=[null,null,null,null,null]}));function Vi(e){return-1!==qi.indexOf(e.toLowerCase())}function Hi(){var e=yt();if(e&&e.now&&e.timing){var t=e.now()+e.timing.navigationStart;if(t>0)return t}return Je()}function Bi(e,t){var n=null;return 0!==e&&0!==t&&!_e(e)&&!_e(t)&&(n=t-e),n}var qi,Ji,$i,Gi,zi,Yi=S((()=>{Lr(),Fr(),Qr(),Zr(),hi(),fi(),Ri(),Wi(),qi=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"],Ji={NotSpecified:ui,createDomEvent:Xr,disableStorage:bi,isInternalApplicationInsightsEndpoint:Vi,canUseLocalStorage:wi,getStorage:Ci,setStorage:Si,removeStorage:_i,canUseSessionStorage:ki,getSessionStorageKeys:Pi,getSessionStorage:Ii,setSessionStorage:Ei,removeSessionStorage:Ti,disableCookies:gr,canUseCookies:mr,disallowsSameSiteNone:En,setCookie:vr,stringToBoolOrDefault:ei,getCookie:yr,deleteCookie:br,trim:He,newId:pr,random32:function(){return er(!0)},generateW3CId:hr,isArray:Ne,isError:Me,isDate:je,toISOStringForIE8:Fe,getIEVersion:Ct,msToTimeSpan:ti,isCrossOriginError:ii,dump:St,getExceptionName:$e,addEventHandler:Te,IsBeaconApiSupported:ni,getExtension:ri},$i={parseUrl:ji,getAbsoluteUrl:Ni,getPathName:Mi,getCompleteUrl:Oi,parseHost:Ai,parseFullHost:Li},Gi={correlationIdPrefix:"cid-v1:",canIncludeCorrelationHeader:function(e,t,n){if(!t||e&&e.disableCorrelationHeaders)return!1;if(e&&e.correlationHeaderExcludePatterns)for(var r=0;r<e.correlationHeaderExcludePatterns.length;r++)if(e.correlationHeaderExcludePatterns[r].test(t))return!1;var i=ji(t).host.toLowerCase();if(i&&(-1!==i.indexOf(":443")||-1!==i.indexOf(":80"))&&(i=(Li(t,!0)||"").toLowerCase()),(!e||!e.enableCorsCorrelation)&&i&&i!==n)return!1;var o,s=e&&e.correlationHeaderDomains;if(s&&(Ue(s,(function(e){var t=new RegExp(e.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));o=o||t.test(i)})),!o))return!1;var a=e&&e.correlationHeaderExcludedDomains;if(!a||0===a.length)return!0;for(r=0;r<a.length;r++)if(new RegExp(a[r].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")).test(i))return!1;return i&&i.length>0},getCorrelationContext:function(e){if(e){var t=Gi.getCorrelationContextValue(e,Or.requestContextTargetKey);if(t&&t!==Gi.correlationIdPrefix)return t}},getCorrelationContextValue:function(e,t){if(e)for(var n=e.split(","),r=0;r<n.length;++r){var i=n[r].split("=");if(2===i.length&&i[0]===t)return i[1]}}},zi={Now:Hi,GetDuration:Bi}}));function Qi(e){if(!e)return{};var t=Ve(e.split(Xi),(function(e,t){var n=t.split(Zi);if(2===n.length){var r=n[0].toLowerCase(),i=n[1];e[r]=i}return e}),{});if(Be(t).length>0){if(t.endpointsuffix){var n=t.location?t.location+".":"";t.ingestionendpoint=t.ingestionendpoint||"https://"+n+"dc."+t.endpointsuffix}t.ingestionendpoint=t.ingestionendpoint||li}return t}var Xi,Zi,eo,to,no,ro,io,oo,so,ao,co,lo,uo=S((()=>{fi(),Lr(),Xi=";",Zi="=",eo={parse:Qi}})),po=S((()=>{to=function(){}})),ho=S((()=>{A(),po(),no=function(e){function t(){return e.call(this)||this}return x(t,e),t}(to)})),fo=S((()=>{ro=function(){this.ver=1,this.sampleRate=100,this.tags={}}})),go=S((()=>{A(),fo(),Qr(),Lr(),fi(),io=function(e){function t(t,n,r){var i=e.call(this)||this;return i.name=Wr(t,r)||ui,i.data=n,i.time=Fe(new Date),i.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return 100===i.sampleRate?4:1},tags:1,data:1},i}return x(t,e),t}(ro)})),mo=S((()=>{oo=function(){this.ver=2,this.properties={},this.measurements={}}})),yo=S((()=>{A(),mo(),Qr(),fi(),so=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.aiDataContract={ver:1,name:1,properties:0,measurements:0},o.name=Wr(t,n)||ui,o.properties=qr(t,r),o.measurements=Jr(t,i),o}return x(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.Event",t.dataType="EventData",t}(oo)})),vo=S((()=>{ao=function(){}})),bo=S((()=>{co=function(){this.ver=2,this.exceptions=[],this.properties={},this.measurements={}}})),wo=S((()=>{lo=function(){this.hasFullStack=!0,this.parsedStack=[]}}));function Co(e,t){var n=e;return n&&!Oe(n)&&(JSON&&JSON.stringify?(n=JSON.stringify(e),t&&(!n||"{}"===n)&&(n=Ee(e.toString)?e.toString():""+e)):n=e+" - (Missing JSON.stringify)"),n||""}function So(e,t){var n=e;return e&&((n=e[jo]||e[No]||"")&&!Oe(n)&&(n=Co(n,!0)),e.filename&&(n=n+" @"+(e.filename||"")+":"+(e.lineno||"?")+":"+(e.colno||"?"))),t&&"String"!==t&&"Object"!==t&&"Error"!==t&&-1===(n||"").indexOf(t)&&(n=t+": "+n),n||""}function _o(e){return e&&e.src&&Oe(e.src)&&e.obj&&Ne(e.obj)}function ko(e){var t=e||"";Oe(t)||(t=Oe(t[Do])?t[Do]:""+t);var n=t.split("\n");return{src:t,obj:n}}function Po(e){var t=null;if(e)try{if(e[Do])t=ko(e[Do]);else if(e[To]&&e[To][Do])t=ko(e[To][Do]);else if(e.exception&&e.exception[Do])t=ko(e.exception[Do]);else if(_o(e))t=e;else if(_o(e[xo]))t=e[xo];else if(window.opera&&e[jo])t=function(e){for(var t=[],n=e.split("\n"),r=0;r<n.length;r++){var i=n[r];n[r+1]&&(i+="@"+n[r+1],r++),t.push(i)}return{src:e,obj:t}}(e.message);else if(Oe(e))t=ko(e);else{var n=e[jo]||e[No]||"";Oe(e[Ro])&&(n&&(n+="\n"),n+=" from "+e[Ro]),n&&(t=ko(n))}}catch(e){t=ko(e)}return t||{src:"",obj:null}}function Io(e){var t="";if(e&&!(t=e.typeName||e.name||""))try{var n=/function (.{1,200})\(/.exec(e.constructor.toString());t=n&&n.length>1?n[1]:""}catch(e){}return t}function Eo(e){if(e)try{if(!Oe(e)){var t=Io(e),n=Co(e,!1);return(!n||"{}"===n)&&(e[To]&&(t=Io(e=e[To])),n=Co(e,!0)),0!==n.indexOf(t)&&"String"!==t?t+":"+n:n}}catch(e){}return""+(e||"")}var To,Do,xo,Ro,jo,No,Mo,Oo,Ao,Lo,Fo,Uo,Ko,Wo,Vo,Ho,Bo,qo,Jo,$o,Go,zo,Yo,Qo,Xo,Zo=S((()=>{A(),vo(),bo(),wo(),Qr(),Lr(),fi(),To="error",Do="stack",xo="stackDetails",Ro="errorSrc",jo="message",No="description",Mo=function(e){function t(t,n,r,i,o,s){var a=e.call(this)||this;return a.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0},function(e){return!!Ie(e)&&"ver"in e&&"exceptions"in e&&"properties"in e}(n)?(a.exceptions=n.exceptions,a.properties=n.properties,a.measurements=n.measurements,n.severityLevel&&(a.severityLevel=n.severityLevel),n.id&&(a.id=n.id),n.problemGroup&&(a.problemGroup=n.problemGroup),a.ver=2,_e(n.isManual)||(a.isManual=n.isManual)):(r||(r={}),a.exceptions=[new Oo(t,n,r)],a.properties=qr(t,r),a.measurements=Jr(t,i),o&&(a.severityLevel=o),s&&(a.id=s)),a}return x(t,e),t.CreateAutoException=function(e,t,n,r,i,o,s,a){var c=Io(i||o||e);return{message:So(e,c),url:t,lineNumber:n,columnNumber:r,error:Eo(i||o||e),evt:Eo(o||e),typeName:c,stackDetails:Po(s||i||o),errorSrc:a}},t.CreateFromInterface=function(e,n,r,i){var o=n.exceptions&&We(n.exceptions,(function(t){return Oo.CreateFromInterface(e,t)}));return new t(e,j({},n,{exceptions:o}),r,i)},t.prototype.toInterface=function(){var e=this,t=e.exceptions,n=e.properties,r=e.measurements,i=e.severityLevel,o=(e.ver,e.problemGroup),s=e.id,a=e.isManual;return{ver:"4.0",exceptions:t instanceof Array&&We(t,(function(e){return e.toInterface()}))||void 0,severityLevel:i,properties:n,measurements:r,problemGroup:o,id:s,isManual:a}},t.CreateSimpleException=function(e,t,n,r,i,o){return{exceptions:[{hasFullStack:!0,message:e,stack:i,typeName:t}]}},t.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",t.dataType="ExceptionData",t.formatError=Eo,t}(co),Oo=function(e){function t(t,n,r){var i=e.call(this)||this;if(i.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2},function(e){return!!Ie(e)&&"hasFullStack"in e&&"typeName"in e}(n))i.typeName=n.typeName,i.message=n.message,i[Do]=n[Do],i.parsedStack=n.parsedStack,i.hasFullStack=n.hasFullStack;else{var o=n,s=o&&o.evt;Me(o)||(o=o[To]||s||o),i.typeName=Wr(t,Io(o))||ui,i.message=Hr(t,So(n||o,i.typeName))||ui;var a=n[xo]||Po(n);i.parsedStack=function(e){var t,n=e.obj;if(n&&n.length>0){t=[];var r=0,i=0;if(Ue(n,(function(e){var n=e.toString();if(Ao.regex.test(n)){var o=new Ao(n,r++);i+=o.sizeInBytes,t.push(o)}})),i>32768)for(var o=0,s=t.length-1,a=0,c=o,l=s;o<s;){if((a+=t[o].sizeInBytes+t[s].sizeInBytes)>32768){var u=l-c+1;t.splice(c,u);break}c=o,l=s,o++,s--}}return t}(a),i[Do]=Br(t,function(e){var t="";return e&&(e.obj?Ue(e.obj,(function(e){t+=e+"\n"})):t=e.src||""),t}(a)),i.hasFullStack=Ne(i.parsedStack)&&i.parsedStack.length>0,r&&(r.typeName=r.typeName||i.typeName)}return i}return x(t,e),t.prototype.toInterface=function(){var e=this.parsedStack instanceof Array&&We(this.parsedStack,(function(e){return e.toInterface()}));return{id:this.id,outerId:this.outerId,typeName:this.typeName,message:this.message,hasFullStack:this.hasFullStack,stack:this[Do],parsedStack:e||void 0}},t.CreateFromInterface=function(e,n){var r=n.parsedStack instanceof Array&&We(n.parsedStack,(function(e){return Ao.CreateFromInterface(e)}))||n.parsedStack;return new t(e,j({},n,{parsedStack:r}))},t}(lo),Ao=function(e){function t(n,r){var i=e.call(this)||this;if(i.sizeInBytes=0,i.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0},"string"==typeof n){var o=n;i.level=r,i.method="<no_method>",i.assembly=He(o),i.fileName="",i.line=0;var s=o.match(t.regex);s&&s.length>=5&&(i.method=He(s[2])||i.method,i.fileName=He(s[4]),i.line=parseInt(s[5])||0)}else i.level=n.level,i.method=n.method,i.assembly=n.assembly,i.fileName=n.fileName,i.line=n.line,i.sizeInBytes=0;return i.sizeInBytes+=i.method.length,i.sizeInBytes+=i.fileName.length,i.sizeInBytes+=i.assembly.length,i.sizeInBytes+=t.baseSize,i.sizeInBytes+=i.level.toString().length,i.sizeInBytes+=i.line.toString().length,i}return x(t,e),t.CreateFromInterface=function(e){return new t(e,null)},t.prototype.toInterface=function(){return{level:this.level,method:this.method,assembly:this.assembly,fileName:this.fileName,line:this.line}},t.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,t.baseSize=58,t}(ao)})),es=S((()=>{Lo=function(){this.ver=2,this.metrics=[],this.properties={},this.measurements={}}})),ts=S((()=>{var e;(e=Fo||(Fo={}))[e.Measurement=0]="Measurement",e[e.Aggregation=1]="Aggregation"})),ns=S((()=>{ts(),Uo=function(){this.kind=Fo.Measurement}})),rs=S((()=>{A(),ns(),Ko=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},t}return x(t,e),t}(Uo)})),is=S((()=>{A(),es(),Qr(),rs(),fi(),Wo=function(e){function t(t,n,r,i,o,s,a,c){var l=e.call(this)||this;l.aiDataContract={ver:1,metrics:1,properties:0};var u=new Ko;return u.count=i>0?i:void 0,u.max=isNaN(s)||null===s?void 0:s,u.min=isNaN(o)||null===o?void 0:o,u.name=Wr(t,n)||ui,u.value=r,l.metrics=[u],l.properties=qr(t,a),l.measurements=Jr(t,c),l}return x(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",t.dataType="MetricData",t}(Lo)})),os=S((()=>{A(),mo(),Vo=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return x(t,e),t}(oo)})),ss=S((()=>{A(),os(),Qr(),hi(),fi(),Ho=function(e){function t(t,n,r,i,o,s,a){var c=e.call(this)||this;return c.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0},c.id=$r(t,a),c.url=Vr(t,r),c.name=Wr(t,n)||ui,isNaN(i)||(c.duration=ti(i)),c.properties=qr(t,o),c.measurements=Jr(t,s),c}return x(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",t.dataType="PageviewData",t}(Vo)})),as=S((()=>{Bo=function(){this.ver=2,this.success=!0,this.properties={},this.measurements={}}})),cs=S((()=>{A(),Qr(),Yi(),as(),hi(),qo=function(e){function t(t,n,r,i,o,s,a,c,l,u,d,p){void 0===l&&(l="Ajax");var h=e.call(this)||this;h.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0},h.id=n,h.duration=ti(o),h.success=s,h.resultCode=a+"",h.type=Wr(t,l);var f=function(e,t,n,r){var i,o=r,s=r;if(t&&t.length>0){var a=ji(t);if(i=a.host,!o)if(null!=a.pathname){var c=0===a.pathname.length?"/":a.pathname;"/"!==c.charAt(0)&&(c="/"+c),s=a.pathname,o=Wr(e,n?n+" "+c:c)}else o=Wr(e,t)}else i=r,o=r;return{target:i,name:o,data:s}}(t,r,c,i);return h.data=Vr(t,i)||f.data,h.target=Wr(t,f.target),u&&(h.target=h.target+" | "+u),h.name=Wr(t,f.name),h.properties=qr(t,d),h.measurements=Jr(t,p),h}return x(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",t.dataType="RemoteDependencyData",t}(Bo)})),ls=S((()=>{Jo=function(){this.ver=2,this.properties={},this.measurements={}}})),us=S((()=>{A(),ls(),Qr(),fi(),$o=function(e){function t(t,n,r,i,o){var s=e.call(this)||this;return s.aiDataContract={ver:1,message:1,severityLevel:0,properties:0},n=n||ui,s.message=Hr(t,n),s.properties=qr(t,i),s.measurements=Jr(t,o),r&&(s.severityLevel=r),s}return x(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.Message",t.dataType="MessageData",t}(Jo)})),ds=S((()=>{A(),os(),Go=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return x(t,e),t}(Vo)})),ps=S((()=>{A(),ds(),Qr(),fi(),zo=function(e){function t(t,n,r,i,o,s,a){var c=e.call(this)||this;return c.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0},c.url=Vr(t,r),c.name=Wr(t,n)||ui,c.properties=qr(t,o),c.measurements=Jr(t,s),a&&(c.domProcessing=a.domProcessing,c.duration=a.duration,c.networkConnect=a.networkConnect,c.perfTotal=a.perfTotal,c.receivedResponse=a.receivedResponse,c.sentRequest=a.sentRequest),c}return x(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",t.dataType="PageviewPerformanceData",t}(Go)})),hs=S((()=>{A(),ho(),Yo=function(e){function t(t,n){var r=e.call(this)||this;return r.aiDataContract={baseType:1,baseData:1},r.baseType=t,r.baseData=n,r}return x(t,e),t}(no)})),fs=S((()=>{var e;(e=Qo||(Qo={}))[e.Verbose=0]="Verbose",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Critical=4]="Critical"})),gs=S((()=>{Lr(),Xo=function(){function e(){}return e.getConfig=function(e,t,n,r){var i;return void 0===r&&(r=!1),i=n&&e.extensionConfig&&e.extensionConfig[n]&&!_e(e.extensionConfig[n][t])?e.extensionConfig[n][t]:e[t],_e(i)?r:i},e}()}));function ms(e){var t="ai."+e+".";return function(e){return t+e}}var ys,vs,bs,ws,Cs,Ss,_s,ks,Ps,Is,Es,Ts,Ds,xs,Rs,js,Ns,Ms,Os,As=S((()=>{var e;A(),Lr(),ys=ms("application"),vs=ms("device"),bs=ms("location"),ws=ms("operation"),Cs=ms("session"),Ss=ms("user"),_s=ms("cloud"),ks=ms("internal"),Ps=function(e){function t(){return e.call(this)||this}return x(t,e),t}((e={applicationVersion:ys("ver"),applicationBuild:ys("build"),applicationTypeId:ys("typeId"),applicationId:ys("applicationId"),applicationLayer:ys("layer"),deviceId:vs("id"),deviceIp:vs("ip"),deviceLanguage:vs("language"),deviceLocale:vs("locale"),deviceModel:vs("model"),deviceFriendlyName:vs("friendlyName"),deviceNetwork:vs("network"),deviceNetworkName:vs("networkName"),deviceOEMName:vs("oemName"),deviceOS:vs("os"),deviceOSVersion:vs("osVersion"),deviceRoleInstance:vs("roleInstance"),deviceRoleName:vs("roleName"),deviceScreenResolution:vs("screenResolution"),deviceType:vs("type"),deviceMachineName:vs("machineName"),deviceVMName:vs("vmName"),deviceBrowser:vs("browser"),deviceBrowserVersion:vs("browserVersion"),locationIp:bs("ip"),locationCountry:bs("country"),locationProvince:bs("province"),locationCity:bs("city"),operationId:ws("id"),operationName:ws("name"),operationParentId:ws("parentId"),operationRootId:ws("rootId"),operationSyntheticSource:ws("syntheticSource"),operationCorrelationVector:ws("correlationVector"),sessionId:Cs("id"),sessionIsFirst:Cs("isFirst"),sessionIsNew:Cs("isNew"),userAccountAcquisitionDate:Ss("accountAcquisitionDate"),userAccountId:Ss("accountId"),userAgent:Ss("userAgent"),userId:Ss("id"),userStoreRegion:Ss("storeRegion"),userAuthUserId:Ss("authUserId"),userAnonymousUserAcquisitionDate:Ss("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Ss("authUserAcquisitionDate"),cloudName:_s("name"),cloudRole:_s("role"),cloudRoleVer:_s("roleVer"),cloudRoleInstance:_s("roleInstance"),cloudEnvironment:_s("environment"),cloudLocation:_s("location"),cloudDeploymentUnit:_s("deploymentUnit"),internalNodeName:ks("nodeName"),internalSdkVersion:ks("sdkVersion"),internalAgentVersion:ks("agentVersion"),internalSnippet:ks("snippet"),internalSdkSrc:ks("sdkSrc")},function(){var t=this;e&&xe(e,(function(e,n){t[e]=n}))}))})),Ls=S((()=>{Qr(),Lr(),fi(),Is=function(){function e(){}return e.create=function(e,t,n,r,i,o){if(n=Wr(r,n)||ui,_e(e)||_e(t)||_e(n))throw Error("Input doesn't contain all required fields");var s={name:n,time:Fe(new Date),iKey:"",ext:o||{},tags:[],data:{},baseType:t,baseData:e};return _e(i)||xe(i,(function(e,t){s.data[e]=t})),s},e}()})),Fs=S((()=>{As(),Es={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},Ts=new Ps})),Us=S((()=>{Yi(),uo(),Fr(),fi(),ho(),po(),go(),yo(),Zo(),is(),ss(),os(),cs(),us(),ps(),hs(),fs(),gs(),As(),Qr(),Ls(),Fs(),gi(),hi(),Zr(),Ri(),Wi(),Ds="AppInsightsPropertiesPlugin",xs="AppInsightsChannelPlugin",Rs="ApplicationInsightsAnalytics"})),Ks=S((()=>{Us(),Lr(),ve(),js=function e(t,n,r,i){G(e,this,(function(e){var o,s=null,a=[],c=!1;function l(){r&&Ue(r.getTransmissionControls(),(function(e){Ue(e,(function(e){return e.flush(!0)}))}))}r&&(o=r.logger),e.trackPageView=function(e,r){var u=e.name;if(_e(u)||"string"!=typeof u){var d=ft();u=e.name=d&&d.title||""}var p=e.uri;if(_e(p)||"string"!=typeof p){var h=mt();p=e.uri=h&&h.href||""}if(!i.isPerformanceTimingSupported())return t.sendPageViewInternal(e,r),l(),void o.throwInternal(me.WARNING,ye.NavigationTimingNotSupported,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info.");var f,g,m=!1,y=i.getPerformanceTiming().navigationStart;y>0&&(f=Bi(y,+new Date),i.shouldCollectDuration(f)||(f=void 0)),!_e(r)&&!_e(r.duration)&&(g=r.duration),(n||!isNaN(g))&&(isNaN(g)&&(r||(r={}),r.duration=f),t.sendPageViewInternal(e,r),l(),m=!0),r||(r={}),function(e){a.push(e),s||(s=setInterval((function(){var e=a.slice(0),t=!1;a=[],Ue(e,(function(e){e()?t=!0:a.push(e)})),0===a.length&&(clearInterval(s),s=null),t&&l()}),100))}((function(){var n=!1;try{if(i.isPerformanceTimingDataReady()){n=!0;var s={name:u,uri:p};i.populatePageViewPerformanceEvent(s),s.isValid||m?(m||(r.duration=s.durationMs,t.sendPageViewInternal(e,r)),c||(t.sendPageViewPerformanceInternal(s,r),c=!0)):(r.duration=f,t.sendPageViewInternal(e,r))}else y>0&&Bi(y,+new Date)>6e4&&(n=!0,m||(r.duration=6e4,t.sendPageViewInternal(e,r)))}catch(e){o.throwInternal(me.CRITICAL,ye.TrackPVFailedCalc,"trackPageView failed on page load calculation: "+$e(e),{exception:St(e)})}return n}))}}))}})),Ws=S((()=>{Us(),Lr(),Ns=function(){function e(e,t){this.prevPageVisitDataKeyName="prevPageVisitData",this.pageVisitTimeTrackingHandler=t,this._logger=e}return e.prototype.trackPreviousPageVisit=function(e,t){try{var n=this.restartPageVisitTimer(e,t);n&&this.pageVisitTimeTrackingHandler(n.pageName,n.pageUrl,n.pageVisitTime)}catch(e){this._logger.warnToConsole("Auto track page visit time failed, metric will not be collected: "+St(e))}},e.prototype.restartPageVisitTimer=function(e,t){try{var n=this.stopPageVisitTimer();return this.startPageVisitTimer(e,t),n}catch(e){return this._logger.warnToConsole("Call to restart failed: "+St(e)),null}},e.prototype.startPageVisitTimer=function(e,t){try{if(ki()){null!=Ii(this._logger,this.prevPageVisitDataKeyName)&&Xe("Cannot call startPageVisit consecutively without first calling stopPageVisit");var n=new Ms(e,t),r=bt().stringify(n);Ei(this._logger,this.prevPageVisitDataKeyName,r)}}catch(e){this._logger.warnToConsole("Call to start failed: "+St(e))}},e.prototype.stopPageVisitTimer=function(){try{if(ki()){var e=Je(),t=Ii(this._logger,this.prevPageVisitDataKeyName);if(t&&vt()){var n=bt().parse(t);return n.pageVisitTime=e-n.pageVisitStartTime,Ti(this._logger,this.prevPageVisitDataKeyName),n}return null}return null}catch(e){return this._logger.warnToConsole("Stop page visit timer failed: "+St(e)),null}},e}(),Ms=function(e,t){this.pageVisitStartTime=Je(),this.pageName=e,this.pageUrl=t}})),Vs=S((()=>{Us(),Lr(),Os=function(){function e(e){this.MAX_DURATION_ALLOWED=36e5,e&&(this._logger=e.logger)}return e.prototype.populatePageViewPerformanceEvent=function(e){e.isValid=!1;var t=this.getPerformanceNavigationTiming(),n=this.getPerformanceTiming(),r=0,i=0,o=0,s=0,a=0;(t||n)&&(t?(r=t.duration,i=0===t.startTime?t.connectEnd:Bi(t.startTime,t.connectEnd),o=Bi(t.requestStart,t.responseStart),s=Bi(t.responseStart,t.responseEnd),a=Bi(t.responseEnd,t.loadEventEnd)):(r=Bi(n.navigationStart,n.loadEventEnd),i=Bi(n.navigationStart,n.connectEnd),o=Bi(n.requestStart,n.responseStart),s=Bi(n.responseStart,n.responseEnd),a=Bi(n.responseEnd,n.loadEventEnd)),0===r?this._logger.throwInternal(me.WARNING,ye.ErrorPVCalc,"error calculating page view performance.",{total:r,network:i,request:o,response:s,dom:a}):this.shouldCollectDuration(r,i,o,s,a)?r<Math.floor(i)+Math.floor(o)+Math.floor(s)+Math.floor(a)?this._logger.throwInternal(me.WARNING,ye.ClientPerformanceMathError,"client performance math error.",{total:r,network:i,request:o,response:s,dom:a}):(e.durationMs=r,e.perfTotal=e.duration=ti(r),e.networkConnect=ti(i),e.sentRequest=ti(o),e.receivedResponse=ti(s),e.domProcessing=ti(a),e.isValid=!0):this._logger.throwInternal(me.WARNING,ye.InvalidDurationValue,"Invalid page load duration value. Browser perf data won't be sent.",{total:r,network:i,request:o,response:s,dom:a}))},e.prototype.getPerformanceTiming=function(){return this.isPerformanceTimingSupported()?yt().timing:null},e.prototype.getPerformanceNavigationTiming=function(){return this.isPerformanceNavigationTimingSupported()?yt().getEntriesByType("navigation")[0]:null},e.prototype.isPerformanceNavigationTimingSupported=function(){var e=yt();return e&&e.getEntriesByType&&e.getEntriesByType("navigation").length>0},e.prototype.isPerformanceTimingSupported=function(){var e=yt();return e&&e.timing},e.prototype.isPerformanceTimingDataReady=function(){var e=yt(),t=e?e.timing:0;return t&&t.domainLookupStart>0&&t.navigationStart>0&&t.responseStart>0&&t.requestStart>0&&t.loadEventEnd>0&&t.responseEnd>0&&t.connectEnd>0&&t.domLoading>0},e.prototype.shouldCollectDuration=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=gt()||{},r=["googlebot","adsbot-google","apis-google","mediapartners-google"],i=n.userAgent,o=!1;if(i)for(var s=0;s<r.length;s++)o=o||-1!==i.toLowerCase().indexOf(r[s]);if(o)return!1;for(s=0;s<e.length;s++)if(e[s]<0||e[s]>=this.MAX_DURATION_ALLOWED)return!1;return!0},e}()}));function Hs(e,t){e&&e.dispatchEvent&&t&&e.dispatchEvent(t)}var Bs,qs,Js,$s,Gs,zs,Ys=S((()=>{A(),Us(),Lr(),Ks(),Ws(),Vs(),ve(),Bs="duration",qs="event",Js=function(e){function t(){var n,r,i,s,a,c=e.call(this)||this;return c.identifier=Rs,c.priority=180,c.autoRoutePVDelay=500,G(t,c,(function(e,l){var u=mt(!0);s=u&&u.href||"",e.getCookieMgr=function(){return bn(e.core)},e.processTelemetry=function(t,n){qt(e.core,(function(){return e.identifier+":processTelemetry"}),(function(){var r=!1,i=e._telemetryInitializers.length;n=e._getTelCtx(n);for(var o=0;o<i;++o){var s=e._telemetryInitializers[o];if(s)try{if(!1===s.apply(null,[t])){r=!0;break}}catch(e){n.diagLog().throwInternal(me.CRITICAL,ye.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+$e(e),{exception:St(e)},!0)}}r||e.processNext(t,n)}),(function(){return{item:t}}),!t.sync)},e.trackEvent=function(t,n){try{var r=Is.create(t,so.dataType,so.envelopeType,e.diagLog(),n);e.core.track(r)}catch(t){e.diagLog().throwInternal(me.WARNING,ye.TrackTraceFailed,"trackTrace failed, trace will not be collected: "+$e(t),{exception:St(t)})}},e.startTrackEvent=function(t){try{n.start(t)}catch(t){e.diagLog().throwInternal(me.CRITICAL,ye.StartTrackEventFailed,"startTrackEvent failed, event will not be collected: "+$e(t),{exception:St(t)})}},e.stopTrackEvent=function(t,r,i){try{n.stop(t,void 0,r)}catch(t){e.diagLog().throwInternal(me.CRITICAL,ye.StopTrackEventFailed,"stopTrackEvent failed, event will not be collected: "+$e(t),{exception:St(t)})}},e.trackTrace=function(t,n){try{var r=Is.create(t,$o.dataType,$o.envelopeType,e.diagLog(),n);e.core.track(r)}catch(t){e.diagLog().throwInternal(me.WARNING,ye.TrackTraceFailed,"trackTrace failed, trace will not be collected: "+$e(t),{exception:St(t)})}},e.trackMetric=function(t,n){try{var r=Is.create(t,Wo.dataType,Wo.envelopeType,e.diagLog(),n);e.core.track(r)}catch(t){e.diagLog().throwInternal(me.CRITICAL,ye.TrackMetricFailed,"trackMetric failed, metric will not be collected: "+$e(t),{exception:St(t)})}},e.trackPageView=function(t,n){try{var r=t||{};e._pageViewManager.trackPageView(r,j({},r.properties,r.measurements,n)),e.config.autoTrackPageVisitTime&&e._pageVisitTimeManager.trackPreviousPageVisit(r.name,r.uri)}catch(t){e.diagLog().throwInternal(me.CRITICAL,ye.TrackPVFailed,"trackPageView failed, page view will not be collected: "+$e(t),{exception:St(t)})}},e.sendPageViewInternal=function(t,n,r){var i=ft();i&&(t.refUri=void 0===t.refUri?i.referrer:t.refUri);var o=Is.create(t,Ho.dataType,Ho.envelopeType,e.diagLog(),n,r);e.core.track(o)},e.sendPageViewPerformanceInternal=function(t,n,r){var i=Is.create(t,zo.dataType,zo.envelopeType,e.diagLog(),n,r);e.core.track(i)},e.trackPageViewPerformance=function(t,n){try{e._pageViewPerformanceManager.populatePageViewPerformanceEvent(t),e.sendPageViewPerformanceInternal(t,n)}catch(t){e.diagLog().throwInternal(me.CRITICAL,ye.TrackPVFailed,"trackPageViewPerformance failed, page view will not be collected: "+$e(t),{exception:St(t)})}},e.startTrackPage=function(t){try{if("string"!=typeof t){var n=ft();t=n&&n.title||""}r.start(t)}catch(t){e.diagLog().throwInternal(me.CRITICAL,ye.StartTrackFailed,"startTrackPage failed, page view may not be collected: "+$e(t),{exception:St(t)})}},e.stopTrackPage=function(t,n,i,o){try{if("string"!=typeof t){var s=ft();t=s&&s.title||""}if("string"!=typeof n){var a=mt();n=a&&a.href||""}r.stop(t,n,i,o),e.config.autoTrackPageVisitTime&&e._pageVisitTimeManager.trackPreviousPageVisit(t,n)}catch(t){e.diagLog().throwInternal(me.CRITICAL,ye.StopTrackFailed,"stopTrackPage failed, page view will not be collected: "+$e(t),{exception:St(t)})}},e.sendExceptionInternal=function(t,n,r){var i=t.exception||t.error||new Error(ui),o=new Mo(e.diagLog(),i,t.properties||n,t.measurements,t.severityLevel,t.id).toInterface(),s=Is.create(o,Mo.dataType,Mo.envelopeType,e.diagLog(),n,r);e.core.track(s)},e.trackException=function(t,n){try{e.sendExceptionInternal(t,n)}catch(t){e.diagLog().throwInternal(me.CRITICAL,ye.TrackExceptionFailed,"trackException failed, exception will not be collected: "+$e(t),{exception:St(t)})}},e._onerror=function(t){var n=t&&t.error,r=t&&t.evt;try{if(!r){var i=pt();i&&(r=i[qs])}var o=t&&t.url||(ft()||{}).URL,s=t.errorSrc||"window.onerror@"+o+":"+(t.lineNumber||0)+":"+(t.columnNumber||0),a={errorSrc:s,url:o,lineNumber:t.lineNumber||0,columnNumber:t.columnNumber||0,message:t.message};ii(t.message,t.url,t.lineNumber,t.columnNumber,t.error)?function(t,n){var r=Is.create(t,Mo.dataType,Mo.envelopeType,e.diagLog(),n);e.core.track(r)}(Mo.CreateAutoException("Script error: The browser's same-origin policy prevents us from getting the details of this exception. Consider using the 'crossorigin' attribute.",o,t.lineNumber||0,t.columnNumber||0,n,r,null,s),a):(t.errorSrc||(t.errorSrc=s),e.trackException({exception:t,severityLevel:Qo.Error},a))}catch(t){var c=n?n.name+", "+n.message:"null";e.diagLog().throwInternal(me.CRITICAL,ye.ExceptionWhileLoggingError,"_onError threw exception while logging error, error will not be collected: "+$e(t),{exception:St(t),errorString:c})}},e.addTelemetryInitializer=function(t){e._telemetryInitializers.push(t)},e.initialize=function(u,d,p,h){if(!e.isInitialized()){if(_e(d))throw Error("Error initializing");l.initialize(u,d,p,h),e.setInitialized(!1);var f=e._getTelCtx(),g=e.identifier;e.config=f.getExtCfg(g);var m=t.getDefaultConfig(u);void 0!==m&&xe(m,(function(t,n){e.config[t]=f.getConfig(g,t,n),void 0===e.config[t]&&(e.config[t]=n)})),e.config.isStorageUseDisabled&&bi();var y={instrumentationKey:function(){return u.instrumentationKey},accountId:function(){return e.config.accountId||u.accountId},sessionRenewalMs:function(){return e.config.sessionRenewalMs||u.sessionRenewalMs},sessionExpirationMs:function(){return e.config.sessionExpirationMs||u.sessionExpirationMs},sampleRate:function(){return e.config.samplingPercentage||u.samplingPercentage},sdkExtension:function(){return e.config.sdkExtension||u.sdkExtension},isBrowserLinkTrackingEnabled:function(){return e.config.isBrowserLinkTrackingEnabled||u.isBrowserLinkTrackingEnabled},appId:function(){return e.config.appId||u.appId}};e._pageViewPerformanceManager=new Os(e.core),e._pageViewManager=new js(c,e.config.overridePageViewDuration,e.core,e._pageViewPerformanceManager),e._pageVisitTimeManager=new Ns(e.diagLog(),(function(t,n,r){return function(t,n,r){var i={PageName:t,PageUrl:n};e.trackMetric({name:"PageVisitTime",average:r,max:r,min:r,sampleCount:1},i)}(t,n,r)})),e._telemetryInitializers=e._telemetryInitializers||[],function(t){if(!t.isBrowserLinkTrackingEnabled()){var n=["/browserLinkSignalR/","/__browserLink/"];!function(t){e._telemetryInitializers.push(t)}((function(e){if(e.baseType===qo.dataType){var t=e.baseData;if(t)for(var r=0;r<n.length;r++)if(t.target&&t.target.indexOf(n[r])>=0)return!1}return!0}))}}(y),(n=new $s(e.diagLog(),"trackEvent")).action=function(t,n,r,i){i||(i={}),i[Bs]=r.toString(),e.trackEvent({name:t,properties:i})},(r=new $s(e.diagLog(),"trackPageView")).action=function(t,n,r,i,o){_e(i)&&(i={}),i[Bs]=r.toString();var s={name:t,uri:n,properties:i,measurements:o};e.sendPageViewInternal(s,i)};var v=pt(),b=Boolean(typeof history===o&&history)?history:ut(It),w=mt(!0),C=c;if(!1===e.config.disableExceptionTracking&&!e.config.autoExceptionInstrumented&&v){var S=v.onerror;v.onerror=function(e,t,n,r,i){var o=v[qs],s=S&&S(e,t,n,r,i);return!0!==s&&C._onerror(Mo.CreateAutoException(e,t,n,r,i,o)),s},e.config.autoExceptionInstrumented=!0}if(!1===e.config.disableExceptionTracking&&!0===e.config.enableUnhandledPromiseRejectionTracking&&!e.config.autoUnhandledPromiseInstrumented&&v){var _="onunhandledrejection",k=v[_];v[_]=function(e){var t=v[qs],n=k&&k.call(v,e);return!0!==n&&C._onerror(Mo.CreateAutoException(e.reason.toString(),w?w.href:"",0,0,e,t)),n},e.config.autoUnhandledPromiseInstrumented=!0}if(!0===e.config.enableAutoRouteTracking&&b&&Ee(b.pushState)&&Ee(b.replaceState)&&v&&"undefined"!=typeof Event){var P=c;Ue(p,(function(e){e.identifier===Ds&&(i=e)})),b.pushState=(I=b.pushState,function(){var e=I.apply(this,arguments);return Hs(v,Xr(P.config.namePrefix+"pushState")),Hs(v,Xr(P.config.namePrefix+"locationchange")),e}),b.replaceState=function(e){return function(){var t=e.apply(this,arguments);return Hs(v,Xr(P.config.namePrefix+"replaceState")),Hs(v,Xr(P.config.namePrefix+"locationchange")),t}}(b.replaceState),v.addEventListener&&(v.addEventListener(P.config.namePrefix+"popstate",(function(){Hs(v,Xr(P.config.namePrefix+"locationchange"))})),v.addEventListener(P.config.namePrefix+"locationchange",(function(){if(i&&i.context&&i.context.telemetryTrace){i.context.telemetryTrace.traceID=hr();var e="_unknown_";w&&w.pathname&&(e=w.pathname+(w.hash||"")),i.context.telemetryTrace.name=e}a&&(s=a),a=w&&w.href||"",setTimeout(function(e){P.trackPageView({refUri:e,properties:{duration:0}})}.bind(c,s),P.autoRoutePVDelay)})))}e.setInitialized(!0)}var I}})),c}return x(t,e),t.getDefaultConfig=function(e){return e||(e={}),e.sessionRenewalMs=18e5,e.sessionExpirationMs=864e5,e.disableExceptionTracking=ei(e.disableExceptionTracking),e.autoTrackPageVisitTime=ei(e.autoTrackPageVisitTime),e.overridePageViewDuration=ei(e.overridePageViewDuration),e.enableUnhandledPromiseRejectionTracking=ei(e.enableUnhandledPromiseRejectionTracking),(isNaN(e.samplingPercentage)||e.samplingPercentage<=0||e.samplingPercentage>=100)&&(e.samplingPercentage=100),e.isStorageUseDisabled=ei(e.isStorageUseDisabled),e.isBrowserLinkTrackingEnabled=ei(e.isBrowserLinkTrackingEnabled),e.enableAutoRouteTracking=ei(e.enableAutoRouteTracking),e.namePrefix=e.namePrefix||"",e.enableDebug=ei(e.enableDebug),e.disableFlushOnBeforeUnload=ei(e.disableFlushOnBeforeUnload),e.disableFlushOnUnload=ei(e.disableFlushOnUnload,e.disableFlushOnBeforeUnload),e},t.Version="2.6.4",t}(rn),$s=function(e,t){var n=this,r={};n.start=function(t){void 0!==r[t]&&e.throwInternal(me.WARNING,ye.StartCalledMoreThanOnce,"start was called more than once for this event without calling stop.",{name:t,key:t},!0),r[t]=+new Date},n.stop=function(t,i,o,s){var a=r[t];if(isNaN(a))e.throwInternal(me.WARNING,ye.StopCalledWithoutStart,"stop was called without a corresponding start.",{name:t,key:t},!0);else{var c=Bi(a,+new Date);n.action(t,i,c,o,s)}delete r[t],r[t]=void 0}}})),Qs=S((()=>{Ys()})),Xs=S((()=>{Us(),Lr(),ve(),Gs=function e(t){var n=[];G(e,this,(function(e){e.enqueue=function(e){n.push(e)},e.count=function(){return n.length},e.clear=function(){n.length=0},e.getItems=function(){return n.slice(0)},e.batchPayloads=function(e){return e&&e.length>0?t.emitLineDelimitedJson()?e.join("\n"):"["+e.join(",")+"]":null},e.markAsSent=function(t){e.clear()},e.clearSent=function(e){}}))},zs=function(){function e(t,n){var r,i=!1;G(e,this,(function(o){var s=l(e.BUFFER_KEY),a=l(e.SENT_BUFFER_KEY);function c(e,t){var n=[];return Ue(t,(function(t){!Ee(t)&&-1===Ke(e,t)&&n.push(t)})),n}function l(e){var r=e;try{r=n.namePrefix&&n.namePrefix()?n.namePrefix()+"_"+r:r;var i=Ii(t,r);if(i){var o=bt().parse(i);if(Oe(o)&&(o=bt().parse(o)),o&&Ne(o))return o}}catch(e){t.throwInternal(me.CRITICAL,ye.FailedToRestoreStorageBuffer," storage key: "+r+", "+$e(e),{exception:St(e)})}return[]}function u(e,r){var i=e;try{i=n.namePrefix&&n.namePrefix()?n.namePrefix()+"_"+i:i;var o=JSON.stringify(r);Ei(t,i,o)}catch(e){Ei(t,i,JSON.stringify([])),t.throwInternal(me.WARNING,ye.FailedToSetStorageBuffer," storage key: "+i+", "+$e(e)+". Buffer cleared",{exception:St(e)})}}(r=s.concat(a)).length>e.MAX_BUFFER_SIZE&&(r.length=e.MAX_BUFFER_SIZE),u(e.SENT_BUFFER_KEY,[]),u(e.BUFFER_KEY,r),o.enqueue=function(n){r.length>=e.MAX_BUFFER_SIZE?i||(t.throwInternal(me.WARNING,ye.SessionStorageBufferFull,"Maximum buffer size reached: "+r.length,!0),i=!0):(r.push(n),u(e.BUFFER_KEY,r))},o.count=function(){return r.length},o.clear=function(){r=[],u(e.BUFFER_KEY,[]),u(e.SENT_BUFFER_KEY,[]),i=!1},o.getItems=function(){return r.slice(0)},o.batchPayloads=function(e){return e&&e.length>0?n.emitLineDelimitedJson()?e.join("\n"):"["+e.join(",")+"]":null},o.markAsSent=function(n){r=c(n,r),u(e.BUFFER_KEY,r);var i=l(e.SENT_BUFFER_KEY);i instanceof Array&&n instanceof Array&&((i=i.concat(n)).length>e.MAX_BUFFER_SIZE&&(t.throwInternal(me.CRITICAL,ye.SessionStorageBufferFull,"Sent buffer reached its maximum size: "+i.length,!0),i.length=e.MAX_BUFFER_SIZE),u(e.SENT_BUFFER_KEY,i))},o.clearSent=function(t){var n=l(e.SENT_BUFFER_KEY);n=c(t,n),u(e.SENT_BUFFER_KEY,n)}}))}return e.BUFFER_KEY="AI_buffer",e.SENT_BUFFER_KEY="AI_sentBuffer",e.MAX_BUFFER_SIZE=2e3,e}()}));function Zs(e,t,n){return Ge(e,t,n,Qe)}var ea,ta,na,ra,ia,oa,sa,aa,ca,la,ua,da,pa,ha,fa,ga,ma,ya,va=S((()=>{A(),Us(),Lr(),ea="baseType",ta="baseData",na="properties",ra="true",ia=function(){function e(){}return e.extractPropsAndMeasurements=function(e,t,n){_e(e)||xe(e,(function(e,r){Ae(r)?n[e]=r:Oe(r)?t[e]=r:vt()&&(t[e]=bt().stringify(r))}))},e.createEnvelope=function(t,n,r,i){var o=new io(t,i,n);Zs(o,"sampleRate",r[si]),(r[ta]||{}).startTime&&(o.time=Fe(r[ta].startTime)),o.iKey=r.iKey;var s=r.iKey.replace(/-/g,"");return o.name=o.name.replace("{0}",s),e.extractPartAExtensions(r,o),r.tags=r.tags||[],et(o)},e.extractPartAExtensions=function(t,n){var r=n.tags=n.tags||{},i=t.ext=t.ext||{},o=t.tags=t.tags||[],s=i.user;s&&(Zs(r,Ts.userAuthUserId,s.authId),Zs(r,Ts.userId,s.id||s.localId));var a=i.app;a&&Zs(r,Ts.sessionId,a.sesId);var c=i.device;c&&(Zs(r,Ts.deviceId,c.id||c.localId),Zs(r,Ts.deviceType,c.deviceClass),Zs(r,Ts.deviceIp,c.ip),Zs(r,Ts.deviceModel,c.model),Zs(r,Ts.deviceType,c.deviceType));var l=t.ext.web;if(l){Zs(r,Ts.deviceLanguage,l.browserLang),Zs(r,Ts.deviceBrowserVersion,l.browserVer),Zs(r,Ts.deviceBrowser,l.browser);var u=n.data=n.data||{},d=u[ta]=u[ta]||{},p=d[na]=d[na]||{};Zs(p,"domain",l.domain),Zs(p,"isManual",l.isManual?ra:null),Zs(p,"screenRes",l.screenRes),Zs(p,"userConsent",l.userConsent?ra:null)}var h=i.os;h&&Zs(r,Ts.deviceOS,h.name);var f=i.trace;f&&(Zs(r,Ts.operationParentId,f.parentID),Zs(r,Ts.operationName,f.name),Zs(r,Ts.operationId,f.traceID));for(var g={},m=o.length-1;m>=0;m--)xe(o[m],(function(e,t){g[e]=t})),o.splice(m,1);xe(o,(function(e,t){g[e]=t}));var y=j({},r,g);y[Ts.internalSdkVersion]||(y[Ts.internalSdkVersion]="javascript:"+e.Version),n.tags=et(y)},e.prototype.Init=function(e,t){this._logger=e,_e(t[ta])&&this._logger.throwInternal(me.CRITICAL,ye.TelemetryEnvelopeInvalid,"telemetryItem.baseData cannot be null.")},e.Version="2.6.4",e}(),oa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),t.prototype.Create=function(t,n){e.prototype.Init.call(this,t,n);var r=n[ta].measurements||{},i=n[ta][na]||{};ia.extractPropsAndMeasurements(n.data,i,r);var o=n[ta];if(_e(o))return t.warnToConsole("Invalid input for dependency data"),null;var s=o[na]&&o[na][ci]?o[na][ci]:"GET",a=new qo(t,o.id,o.target,o.name,o.duration,o.success,o.responseCode,s,o.type,o.correlationContext,i,r),c=new Yo(qo.dataType,a);return ia.createEnvelope(t,qo.envelopeType,n,c)},t.DependencyEnvelopeCreator=new t,t}(ia),sa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),t.prototype.Create=function(t,n){e.prototype.Init.call(this,t,n);var r={},i={};n[ea]!==so.dataType&&(r.baseTypeSource=n[ea]),n[ea]===so.dataType?(r=n[ta][na]||{},i=n[ta].measurements||{}):n[ta]&&ia.extractPropsAndMeasurements(n[ta],r,i),ia.extractPropsAndMeasurements(n.data,r,i);var o=n[ta].name,s=new so(t,o,r,i),a=new Yo(so.dataType,s);return ia.createEnvelope(t,so.envelopeType,n,a)},t.EventEnvelopeCreator=new t,t}(ia),aa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),t.prototype.Create=function(t,n){e.prototype.Init.call(this,t,n);var r=n[ta].measurements||{},i=n[ta][na]||{};ia.extractPropsAndMeasurements(n.data,i,r);var o=n[ta],s=Mo.CreateFromInterface(t,o,i,r),a=new Yo(Mo.dataType,s);return ia.createEnvelope(t,Mo.envelopeType,n,a)},t.ExceptionEnvelopeCreator=new t,t}(ia),ca=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),t.prototype.Create=function(t,n){e.prototype.Init.call(this,t,n);var r=n[ta],i=r[na]||{},o=r.measurements||{};ia.extractPropsAndMeasurements(n.data,i,o);var s=new Wo(t,r.name,r.average,r.sampleCount,r.min,r.max,i,o),a=new Yo(Wo.dataType,s);return ia.createEnvelope(t,Wo.envelopeType,n,a)},t.MetricEnvelopeCreator=new t,t}(ia),la=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),t.prototype.Create=function(t,n){e.prototype.Init.call(this,t,n);var r,i="duration",o=n[ta];_e(o)||_e(o[na])||_e(o[na][i])?!_e(n.data)&&!_e(n.data[i])&&(r=n.data[i],delete n.data[i]):(r=o[na][i],delete o[na][i]);var s,a=n[ta];((n.ext||{}).trace||{}).traceID&&(s=n.ext.trace.traceID);var c=a.id||s,l=a.name,u=a.uri,d=a[na]||{},p=a.measurements||{};_e(a.refUri)||(d.refUri=a.refUri),_e(a.pageType)||(d.pageType=a.pageType),_e(a.isLoggedIn)||(d.isLoggedIn=a.isLoggedIn.toString()),_e(a[na])||xe(a[na],(function(e,t){d[e]=t})),ia.extractPropsAndMeasurements(n.data,d,p);var h=new Ho(t,l,u,r,d,p,c),f=new Yo(Ho.dataType,h);return ia.createEnvelope(t,Ho.envelopeType,n,f)},t.PageViewEnvelopeCreator=new t,t}(ia),ua=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),t.prototype.Create=function(t,n){e.prototype.Init.call(this,t,n);var r=n[ta],i=r.name,o=r.uri||r.url,s=r[na]||{},a=r.measurements||{};ia.extractPropsAndMeasurements(n.data,s,a);var c=new zo(t,i,o,void 0,s,a,r),l=new Yo(zo.dataType,c);return ia.createEnvelope(t,zo.envelopeType,n,l)},t.PageViewPerformanceEnvelopeCreator=new t,t}(ia),da=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),t.prototype.Create=function(t,n){e.prototype.Init.call(this,t,n);var r=n[ta].message,i=n[ta].severityLevel,o=n[ta][na]||{},s=n[ta].measurements||{};ia.extractPropsAndMeasurements(n.data,o,s);var a=new $o(t,r,i,o,s),c=new Yo($o.dataType,a);return ia.createEnvelope(t,$o.envelopeType,n,c)},t.TraceEnvelopeCreator=new t,t}(ia)})),ba=S((()=>{Lr(),ve(),pa=function e(t){G(e,this,(function(e){function n(e,o){var s="__aiCircularRefCheck",a={};if(!e)return t.throwInternal(me.CRITICAL,ye.CannotSerializeObject,"cannot serialize object because it is null or undefined",{name:o},!0),a;if(e[s])return t.throwInternal(me.WARNING,ye.CircularReferenceDetected,"Circular reference detected while serializing object",{name:o},!0),a;if(!e.aiDataContract){if("measurements"===o)a=i(e,"number",o);else if("properties"===o)a=i(e,"string",o);else if("tags"===o)a=i(e,"string",o);else if(Ne(e))a=r(e,o);else{t.throwInternal(me.WARNING,ye.CannotSerializeObjectNonSerializable,"Attempting to serialize an object which does not implement ISerializable",{name:o},!0);try{bt().stringify(e),a=e}catch(e){t.throwInternal(me.CRITICAL,ye.CannotSerializeObject,e&&Ee(e.toString)?e.toString():"Error serializing object",null,!0)}}return a}return e[s]=!0,xe(e.aiDataContract,(function(i,s){var c=Ee(s)?1&s():1&s,l=Ee(s)?4&s():4&s,u=2&s,d=void 0!==e[i],p=Ie(e[i])&&null!==e[i];if(!c||d||u){if(!l){var h;void 0!==(h=p?u?r(e[i],i):n(e[i],i):e[i])&&(a[i]=h)}}else t.throwInternal(me.CRITICAL,ye.MissingRequiredFieldSpecification,"Missing required field specification. The field is required but not present on source",{field:i,name:o})})),delete e[s],a}function r(e,r){var i;if(e)if(Ne(e)){i=[];for(var o=0;o<e.length;o++){var s=n(e[o],r+"["+o+"]");i.push(s)}}else t.throwInternal(me.CRITICAL,ye.ItemNotInArray,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:r},!0);return i}function i(e,n,r){var i;return e&&(i={},xe(e,(function(e,o){if("string"===n)void 0===o?i[e]="undefined":null===o?i[e]="null":o.toString?i[e]=o.toString():i[e]="invalid field: toString() is not defined.";else if("number"===n)if(void 0===o)i[e]="undefined";else if(null===o)i[e]="null";else{var s=parseFloat(o);isNaN(s)?i[e]="NaN":i[e]=s}else i[e]="invalid field: "+r+" is of unknown type.",t.throwInternal(me.CRITICAL,i[e],null,!0)}))),i}e.serialize=function(e){var r=n(e,"root");try{return bt().stringify(r)}catch(e){t.throwInternal(me.CRITICAL,ye.CannotSerializeObject,e&&Ee(e.toString)?e.toString():"Error serializing object",null,!0)}}}))}})),wa=S((()=>{Lr(),ve(),ha=function(){function e(){var t=pt(),n=ft(),r=!1,i=!0;G(e,this,(function(e){try{if(t&&kr.Attach(t,"online",a)&&(kr.Attach(t,"offline",c),r=!0),n){var o=n.body||n;Se(o.ononline)||(o.ononline=a,o.onoffline=c,r=!0)}if(r){var s=gt();s&&!_e(s.onLine)&&(i=s.onLine)}}catch(e){r=!1}function a(){i=!0}function c(){i=!1}e.isListening=r,e.isOnline=function(){var e=!0,t=gt();return r?e=i:t&&!_e(t.onLine)&&(e=t.onLine),e},e.isOffline=function(){return!e.isOnline()}}))}return e.Offline=new e,e}(),fa=ha.Offline})),Ca=S((()=>{ga=function(){function e(){}return e.prototype.getHashCodeScore=function(t){return this.getHashCode(t)/e.INT_MAX_VALUE*100},e.prototype.getHashCode=function(t){if(""===t)return 0;for(;t.length<e.MIN_INPUT_LENGTH;)t=t.concat(t);for(var n=5381,r=0;r<t.length;++r)n=(n<<5)+n+t.charCodeAt(r),n&=n;return Math.abs(n)},e.INT_MAX_VALUE=2147483647,e.MIN_INPUT_LENGTH=8,e}()})),Sa=S((()=>{Ca(),Us(),ma=function(){function e(){this.hashCodeGeneragor=new ga,this.keys=new Ps}return e.prototype.getSamplingScore=function(e){return e.tags&&e.tags[this.keys.userId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.userId]):e.ext&&e.ext.user&&e.ext.user.id?this.hashCodeGeneragor.getHashCodeScore(e.ext.user.id):e.tags&&e.tags[this.keys.operationId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.operationId]):e.ext&&e.ext.telemetryTrace&&e.ext.telemetryTrace.traceID?this.hashCodeGeneragor.getHashCodeScore(e.ext.telemetryTrace.traceID):100*Math.random()},e}()})),_a=S((()=>{Sa(),Us(),Lr(),ya=function(){function e(e,t){this.INT_MAX_VALUE=2147483647,this._logger=t||Wt(null),(e>100||e<0)&&(this._logger.throwInternal(me.WARNING,ye.SampleRateOutOfRange,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this.sampleRate=e,this.samplingScoreGenerator=new ma}return e.prototype.isSampledIn=function(e){var t=this.sampleRate;return null==t||t>=100||e.baseType===Wo.dataType||this.samplingScoreGenerator.getSamplingScore(e)<t},e}()}));function ka(e){try{return e.responseText}catch(e){}return null}var Pa,Ia,Ea,Ta,Da,xa,Ra=S((()=>{A(),Xs(),va(),ba(),Us(),Lr(),wa(),_a(),ve(),Pa=function(e){function t(){var n=e.call(this)||this;n.priority=1001,n.identifier=xs,n._XMLHttpRequestSupported=!1;var r,i,o,a,c,l={};return G(t,n,(function(e,u){function d(){Xe("Method not implemented.")}function p(t,n,i,o,s,a){var c=null;if(e._appId||(c=y(a))&&c.appId&&(e._appId=c.appId),(t<200||t>=300)&&0!==t){if((301===t||307===t||308===t)&&!h(i))return void e._onError(n,s);!e._senderConfig.isRetryDisabled()&&w(t)?(v(n),e.diagLog().throwInternal(me.WARNING,ye.TransmissionFailed,". Response code "+t+". Will retry to send "+n.length+" items.")):e._onError(n,s)}else fa.isOffline()?e._senderConfig.isRetryDisabled()||(v(n,10),e.diagLog().throwInternal(me.WARNING,ye.TransmissionFailed,". Offline - Response Code: "+t+". Offline status: "+fa.isOffline()+". Will retry to send "+n.length+" items.")):(h(i),206===t?(c||(c=y(a)),c&&!e._senderConfig.isRetryDisabled()?e._onPartialSuccess(n,c):e._onError(n,s)):(r=0,e._onSuccess(n,o)))}function h(t){return!(c>=10||_e(t)||""===t||t===e._senderConfig.endpointUrl()||(e._senderConfig.endpointUrl=function(){return t},++c,0))}function f(t,n){var r=e._senderConfig.endpointUrl(),i=e._buffer.batchPayloads(t),o=new Blob([i],{type:"text/plain;charset=UTF-8"});gt().sendBeacon(r,o)?(e._buffer.markAsSent(t),e._onSuccess(t,t.length)):(g(t,!0),e.diagLog().throwInternal(me.WARNING,ye.TransmissionFailed,". Failed to send telemetry with Beacon API, retried with xhrSender."))}function g(t,n){var r=new XMLHttpRequest,i=e._senderConfig.endpointUrl();try{r[oi]=!0}catch(e){}r.open("POST",i,n),r.setRequestHeader("Content-type","application/json"),Vi(i)&&r.setRequestHeader(Or.sdkContextHeader,Or.sdkContextHeaderAppIdRequest),Ue(Be(l),(function(e){r.setRequestHeader(e,l[e])})),r.onreadystatechange=function(){return e._xhrReadyStateChange(r,t,t.length)},r.onerror=function(n){return e._onError(t,C(r),n)};var o=e._buffer.batchPayloads(t);r.send(o),e._buffer.markAsSent(t)}function m(t,n){var r=e._senderConfig.endpointUrl(),i=e._buffer.batchPayloads(t),o=new Blob([i],{type:"text/plain;charset=UTF-8"}),s=new Headers;Vi(r)&&s.append(Or.sdkContextHeader,Or.sdkContextHeaderAppIdRequest),Ue(Be(l),(function(e){s.append(e,l[e])}));var a=new Request(r,{method:"POST",headers:s,body:o});fetch(a).then((function(n){if(!n.ok)throw Error(n.statusText);n.text().then((function(e){p(n.status,t,n.url,t.length,n.statusText,e)})),e._buffer.markAsSent(t)})).catch((function(n){e._onError(t,n.message)}))}function y(t){try{if(t&&""!==t){var n=bt().parse(t);if(n&&n.itemsReceived&&n.itemsReceived>=n.itemsAccepted&&n.itemsReceived-n.itemsAccepted===n.errors.length)return n}}catch(n){e.diagLog().throwInternal(me.CRITICAL,ye.InvalidBackendResponse,"Cannot parse the response. "+$e(n),{response:t})}return null}function v(t,n){if(void 0===n&&(n=1),t&&0!==t.length){e._buffer.clearSent(t),r++;for(var o=0,s=t;o<s.length;o++){var a=s[o];e._buffer.enqueue(a)}(function(e){var t;if(r<=1)t=10;else{var n=(Math.pow(2,r)-1)/2,o=Math.floor(Math.random()*n*10)+1;o*=e,t=Math.max(Math.min(o,3600),10)}var s=Je()+1e3*t;i=s})(n),b()}}function b(){if(!o){var t=i?Math.max(0,i-Je()):0,n=Math.max(e._senderConfig.maxBatchInterval(),t);o=setTimeout((function(){e.triggerSend(!0,null,1)}),n)}}function w(e){return 408===e||429===e||500===e||503===e}function C(e,t){return e?"XMLHttpRequest,Status:"+e.status+",Response:"+ka(e)||0:t}function S(t,n){var r=pt(),i=new XDomainRequest;i.onload=function(){return e._xdrOnLoad(i,t)},i.onerror=function(n){return e._onError(t,_(i),n)};var o=r&&r.location&&r.location.protocol||"";if(0!==e._senderConfig.endpointUrl().lastIndexOf(o,0))return e.diagLog().throwInternal(me.WARNING,ye.TransmissionFailed,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),void e._buffer.clear();var s=e._senderConfig.endpointUrl().replace(/^(https?:)/,"");i.open("POST",s);var a=e._buffer.batchPayloads(t);i.send(a),e._buffer.markAsSent(t)}function _(e,t){return e?"XDomainRequest,Response:"+ka(e)||0:t}e.pause=d,e.resume=d,e.flush=function(){try{e.triggerSend(!0,null,1)}catch(t){e.diagLog().throwInternal(me.CRITICAL,ye.FlushFailed,"flush failed, telemetry will not be collected: "+$e(t),{exception:St(t)})}},e.onunloadFlush=function(){if(!1!==e._senderConfig.onunloadDisableBeacon()&&!1!==e._senderConfig.isBeaconApiDisabled()||!ni())e.flush();else try{e.triggerSend(!0,f,2)}catch(t){e.diagLog().throwInternal(me.CRITICAL,ye.FailedToSendQueuedTelemetry,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+$e(t),{exception:St(t)})}},e.teardown=d,e.addHeader=function(e,t){l[e]=t},e.initialize=function(o,l,d,p){u.initialize(o,l,d,p);var h=e._getTelCtx(),y=e.identifier;a=new pa(l.logger),r=0,i=null,e._sender=null,c=0;var v=t._getDefaultAppInsightsChannelConfig();if(e._senderConfig=t._getEmptyAppInsightsChannelConfig(),xe(v,(function(t,n){e._senderConfig[t]=function(){return h.getConfig(y,t,n())}})),e._buffer=e._senderConfig.enableSessionStorageBuffer()&&ki()?new zs(e.diagLog(),e._senderConfig):new Gs(e._senderConfig),e._sample=new ya(e._senderConfig.samplingPercentage(),e.diagLog()),function(e){return!(_e(e.disableInstrumentationKeyValidation)||!e.disableInstrumentationKeyValidation)||new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e.instrumentationKey)}(o)||e.diagLog().throwInternal(me.CRITICAL,ye.InvalidInstrumentationKey,"Invalid Instrumentation key "+o.instrumentationKey),!Vi(e._senderConfig.endpointUrl())&&e._senderConfig.customHeaders()&&e._senderConfig.customHeaders().length>0&&Ue(e._senderConfig.customHeaders(),(function(e){n.addHeader(e.header,e.value)})),!e._senderConfig.isBeaconApiDisabled()&&ni())e._sender=f;else{var b=ut("XMLHttpRequest");b?"withCredentials"in new b?(e._sender=g,e._XMLHttpRequestSupported=!0):typeof XDomainRequest!==s&&(e._sender=S):ut("fetch")&&(e._sender=m)}},e.processTelemetry=function(n,r){r=e._getTelCtx(r);try{if(e._senderConfig.disableTelemetry())return;if(!n)return void r.diagLog().throwInternal(me.CRITICAL,ye.CannotSendEmptyTelemetry,"Cannot send empty telemetry");if(n.baseData&&!n.baseType)return void r.diagLog().throwInternal(me.CRITICAL,ye.InvalidEvent,"Cannot send telemetry without baseData and baseType");if(n.baseType||(n.baseType="EventData"),!e._sender)return void r.diagLog().throwInternal(me.CRITICAL,ye.SenderNotInitialized,"Sender was not initialized");if(!function(t){return e._sample.isSampledIn(t)}(n))return void r.diagLog().throwInternal(me.WARNING,ye.TelemetrySampledAndNotSent,"Telemetry item was sampled out and not sent",{SampleRate:e._sample.sampleRate});n[si]=e._sample.sampleRate;var i=t.constructEnvelope(n,e._senderConfig.instrumentationKey(),r.diagLog());if(!i)return void r.diagLog().throwInternal(me.CRITICAL,ye.CreateEnvelopeError,"Unable to create an AppInsights envelope");var o=!1;if(n.tags&&n.tags[ai]&&(Ue(n.tags[ai],(function(e){try{e&&!1===e(i)&&(o=!0,r.diagLog().warnToConsole("Telemetry processor check returns false"))}catch(e){r.diagLog().throwInternal(me.CRITICAL,ye.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+$e(e),{exception:St(e)},!0)}})),delete n.tags[ai]),o)return;var s=a.serialize(i),c=e._buffer.getItems(),l=e._buffer.batchPayloads(c);l&&l.length+s.length>e._senderConfig.maxBatchSizeInBytes()&&e.triggerSend(!0,null,10),e._buffer.enqueue(s),b()}catch(e){r.diagLog().throwInternal(me.WARNING,ye.FailedAddingTelemetryToBuffer,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+$e(e),{exception:St(e)})}e.processNext(n,r)},e._xhrReadyStateChange=function(e,t,n){4===e.readyState&&p(e.status,t,e.responseURL,n,C(e),ka(e)||e.response)},e.triggerSend=function(t,r,s){void 0===t&&(t=!0);try{if(e._senderConfig.disableTelemetry())e._buffer.clear();else{if(e._buffer.count()>0){var a=e._buffer.getItems();(function(t,n){var r=function(){var t="getNotifyMgr";return e.core[t]?e.core[t]():e.core._notificationManager}();if(r&&r.eventsSendRequest)try{r.eventsSendRequest(t,n)}catch(t){e.diagLog().throwInternal(me.CRITICAL,ye.NotificationException,"send request notification failed: "+$e(t),{exception:St(t)})}})(s||0,t),r?r.call(n,a,t):e._sender(a,t)}new Date}clearTimeout(o),o=null,i=null}catch(t){var c=Ct();(!c||c>9)&&e.diagLog().throwInternal(me.CRITICAL,ye.TransmissionFailed,"Telemetry transmission failed, some telemetry will be lost: "+$e(t),{exception:St(t)})}},e._onError=function(t,n,r){e.diagLog().throwInternal(me.WARNING,ye.OnError,"Failed to send telemetry.",{message:n}),e._buffer.clearSent(t)},e._onPartialSuccess=function(t,n){for(var r=[],i=[],o=0,s=n.errors.reverse();o<s.length;o++){var a=s[o],c=t.splice(a.index,1)[0];w(a.statusCode)?i.push(c):r.push(c)}t.length>0&&e._onSuccess(t,n.itemsAccepted),r.length>0&&e._onError(r,C(null,["partial success",n.itemsAccepted,"of",n.itemsReceived].join(" "))),i.length>0&&(v(i),e.diagLog().throwInternal(me.WARNING,ye.TransmissionFailed,"Partial success. Delivered: "+t.length+", Failed: "+r.length+". Will retry to send "+i.length+" our of "+n.itemsReceived+" items"))},e._onSuccess=function(t,n){e._buffer.clearSent(t)},e._xdrOnLoad=function(t,n){var i=ka(t);if(!t||i+""!="200"&&""!==i){var o=y(i);o&&o.itemsReceived&&o.itemsReceived>o.itemsAccepted&&!e._senderConfig.isRetryDisabled()?e._onPartialSuccess(n,o):e._onError(n,_(t))}else r=0,e._onSuccess(n,0)}})),n}return x(t,e),t.constructEnvelope=function(e,t,n){var r;switch((r=t===e.iKey||_e(t)?e:j({},e,{iKey:t})).baseType){case so.dataType:return sa.EventEnvelopeCreator.Create(n,r);case $o.dataType:return da.TraceEnvelopeCreator.Create(n,r);case Ho.dataType:return la.PageViewEnvelopeCreator.Create(n,r);case zo.dataType:return ua.PageViewPerformanceEnvelopeCreator.Create(n,r);case Mo.dataType:return aa.ExceptionEnvelopeCreator.Create(n,r);case Wo.dataType:return ca.MetricEnvelopeCreator.Create(n,r);case qo.dataType:return oa.DependencyEnvelopeCreator.Create(n,r);default:return sa.EventEnvelopeCreator.Create(n,r)}},t._getDefaultAppInsightsChannelConfig=function(){return{endpointUrl:function(){return"https://dc.services.visualstudio.com/v2/track"},emitLineDelimitedJson:function(){return!1},maxBatchInterval:function(){return 15e3},maxBatchSizeInBytes:function(){return 102400},disableTelemetry:function(){return!1},enableSessionStorageBuffer:function(){return!0},isRetryDisabled:function(){return!1},isBeaconApiDisabled:function(){return!0},onunloadDisableBeacon:function(){return!1},instrumentationKey:function(){},namePrefix:function(){},samplingPercentage:function(){return 100},customHeaders:function(){}}},t._getEmptyAppInsightsChannelConfig=function(){return{endpointUrl:void 0,emitLineDelimitedJson:void 0,maxBatchInterval:void 0,maxBatchSizeInBytes:void 0,disableTelemetry:void 0,enableSessionStorageBuffer:void 0,isRetryDisabled:void 0,isBeaconApiDisabled:void 0,onunloadDisableBeacon:void 0,instrumentationKey:void 0,namePrefix:void 0,samplingPercentage:void 0,customHeaders:void 0}},t}(rn)})),ja=S((()=>{Ra()})),Na=S((()=>{ve(),Us(),Lr(),Ia=function(){},Ea=function(){function e(t,n){var r,i,o=Wt(n),s=bn(n);G(e,this,(function(n){t||(t={}),Ee(t.sessionExpirationMs)||(t.sessionExpirationMs=function(){return e.acquisitionSpan}),Ee(t.sessionRenewalMs)||(t.sessionRenewalMs=function(){return e.renewalSpan}),n.config=t;var a=n.config.sessionCookiePostfix&&n.config.sessionCookiePostfix()?n.config.sessionCookiePostfix():n.config.namePrefix&&n.config.namePrefix()?n.config.namePrefix():"";function c(e,t){var n=!1,r=", session will be reset",i=t.split("|");if(i.length>=2)try{var s=+i[1]||0,a=+i[2]||0;isNaN(s)||s<=0?o.throwInternal(me.WARNING,ye.SessionRenewalDateIsZero,"AI session acquisition date is 0"+r):isNaN(a)||a<=0?o.throwInternal(me.WARNING,ye.SessionRenewalDateIsZero,"AI session renewal date is 0"+r):i[0]&&(e.id=i[0],e.acquisitionDate=s,e.renewalDate=a,n=!0)}catch(e){o.throwInternal(me.CRITICAL,ye.ErrorParsingAISessionCookie,"Error parsing ai_session value ["+(t||"")+"]"+r+" - "+$e(e),{exception:St(e)})}return n}function l(e,t){var o=e.acquisitionDate;e.renewalDate=t;var a,c=n.config,l=c.sessionRenewalMs(),u=o+c.sessionExpirationMs()-t,d=[e.id,o,t];a=u<l?u/1e3:l/1e3;var p=c.cookieDomain?c.cookieDomain():null;s.set(r(),d.join("|"),c.sessionExpirationMs()>0?a:null,p),i=t}r=function(){return"ai_session"+a},n.automaticSession=new Ia,n.update=function(){var t=Je(),a=!1,u=n.automaticSession;u.id||(a=!function(e,t){var n=!1,i=s.get(r());if(i&&Ee(i.split))n=c(e,i);else{var a=Ci(o,r());a&&(n=c(e,a))}return n||!!e.id}(u));var d=n.config.sessionExpirationMs();if(!a&&d>0){var p=n.config.sessionRenewalMs(),h=t-u.acquisitionDate,f=t-u.renewalDate;a=(a=(a=h<0||f<0)||h>d)||f>p}a?function(e){var t=n.config||{},r=(t.getNewId?t.getNewId():null)||pr;n.automaticSession.id=r(t.idLength?t.idLength():22),n.automaticSession.acquisitionDate=e,l(n.automaticSession,e),wi()||o.throwInternal(me.WARNING,ye.BrowserDoesNotSupportLocalStorage,"Browser does not support local storage. Session durations will be inaccurate.")}(t):(!i||t-i>e.cookieUpdateInterval)&&l(u,t)},n.backup=function(){var e=n.automaticSession;!function(e,t,n){Si(o,r(),[e,t,n].join("|"))}(e.id,e.acquisitionDate,e.renewalDate)}}))}return e.acquisitionSpan=864e5,e.renewalSpan=18e5,e.cookieUpdateInterval=6e4,e}()})),Ma=S((()=>{Ta=function(){}})),Oa=S((()=>{Da=function(){this.id="browser",this.deviceClass="Browser"}})),Aa=S((()=>{xa=function(e){this.sdkVersion=(e.sdkExtension&&e.sdkExtension()?e.sdkExtension()+"_":"")+"javascript:2.6.4"}}));function La(e){return!("string"!=typeof e||!e||e.match(/,|;|=| |\|/))}var Fa,Ua,Ka,Wa=S((()=>{ve(),Us(),Lr(),Fa=function(){function e(t,n){this.isNewUser=!1;var r,i=Wt(n),o=bn(n);G(e,this,(function(n){n.config=t;var s=n.config.userCookiePostfix&&n.config.userCookiePostfix()?n.config.userCookiePostfix():"";r=function(){return e.userCookieName+s};var a=o.get(r());if(a){n.isNewUser=!1;var c=a.split(e.cookieSeparator);c.length>0&&(n.id=c[0])}if(!n.id){var l=t||{},u=(l.getNewId?l.getNewId():null)||pr;n.id=u(l.idLength?t.idLength():22);var d=Fe(new Date);n.accountAcquisitionDate=d,n.isNewUser=!0;var p=[n.id,d];o.set(r(),p.join(e.cookieSeparator),31536e3);var h=t.namePrefix&&t.namePrefix()?t.namePrefix()+"ai_session":"ai_session";_i(i,h)}n.accountId=t.accountId?t.accountId():void 0;var f=o.get(e.authUserCookieName);if(f){var g=(f=decodeURI(f)).split(e.cookieSeparator);g[0]&&(n.authenticatedId=g[0]),g.length>1&&g[1]&&(n.accountId=g[1])}n.setAuthenticatedUserContext=function(t,r,s){if(void 0===s&&(s=!1),!La(t)||r&&!La(r))i.throwInternal(me.WARNING,ye.SetAuthContextFailedAccountName,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0);else{n.authenticatedId=t;var a=n.authenticatedId;r&&(n.accountId=r,a=[n.authenticatedId,n.accountId].join(e.cookieSeparator)),s&&o.set(e.authUserCookieName,encodeURI(a))}},n.clearAuthenticatedUserContext=function(){n.authenticatedId=null,n.accountId=null,o.del(e.authUserCookieName)}}))}return e.cookieSeparator="|",e.userCookieName="ai_user",e.authUserCookieName="ai_authUser",e}()})),Va=S((()=>{Ua=function(){}})),Ha=S((()=>{Us(),Lr(),Ka=function(e,t,n,r){var i=this;i.traceID=e||hr(),i.parentID=t,i.name=n;var o=mt();!n&&o&&o.pathname&&(i.name=o.pathname),i.name=Wr(r,i.name)}}));function Ba(e,t){e&&e[t]&&0===Be(e[t]).length&&delete e[t]}var qa,Ja,$a,Ga,za,Ya=S((()=>{ve(),Lr(),Na(),Us(),Ma(),Oa(),Aa(),Wa(),Va(),Ha(),qa="ext",Ja="tags",$a=function e(t,n){var r=this,i=t.logger;this.appId=function(){return null},G(e,this,(function(e){e.application=new Ta,e.internal=new xa(n),dt()&&(e.sessionManager=new Ea(n,t),e.device=new Da,e.location=new Ua,e.user=new Fa(n,t),e.telemetryTrace=new Ka(void 0,void 0,void 0,i),e.session=new Ia),e.applySessionContext=function(t,n){var r=e.session,i=e.sessionManager;r&&Oe(r.id)?Ge(ze(t.ext,Es.AppExt),"sesId",r.id):i&&i.automaticSession&&Ge(ze(t.ext,Es.AppExt),"sesId",i.automaticSession.id,Oe)},e.applyOperatingSystemContxt=function(t,n){Ge(t.ext,Es.OSExt,e.os)},e.applyApplicationContext=function(t,n){var r=e.application;if(r){var i=ze(t,Ja);Ge(i,Ts.applicationVersion,r.ver,Oe),Ge(i,Ts.applicationBuild,r.build,Oe)}},e.applyDeviceContext=function(t,n){var r=e.device;if(r){var i=ze(ze(t,qa),Es.DeviceExt);Ge(i,"localId",r.id,Oe),Ge(i,"ip",r.ip,Oe),Ge(i,"model",r.model,Oe),Ge(i,"deviceClass",r.deviceClass,Oe)}},e.applyInternalContext=function(t,n){var r=e.internal;if(r){var i=ze(t,Ja);Ge(i,Ts.internalAgentVersion,r.agentVersion,Oe),Ge(i,Ts.internalSdkVersion,r.sdkVersion,Oe),(t.baseType===Vt.dataType||t.baseType===Ho.dataType)&&(Ge(i,Ts.internalSnippet,r.snippetVer,Oe),Ge(i,Ts.internalSdkSrc,r.sdkSrc,Oe))}},e.applyLocationContext=function(e,t){var n=r.location;n&&Ge(ze(e,Ja,[]),Ts.locationIp,n.ip,Oe)},e.applyOperationContext=function(t,n){var r=e.telemetryTrace;if(r){var i=ze(ze(t,qa),Es.TraceExt,{traceID:void 0,parentID:void 0});Ge(i,"traceID",r.traceID,Oe),Ge(i,"name",r.name,Oe),Ge(i,"parentID",r.parentID,Oe)}},e.applyWebContext=function(e,t){var n=r.web;n&&Ge(ze(e,qa),Es.WebExt,n)},e.applyUserContext=function(t,n){var r=e.user;if(r){Ge(ze(t,Ja,[]),Ts.userAccountId,r.accountId,Oe);var i=ze(ze(t,qa),Es.UserExt);Ge(i,"id",r.id,Oe),Ge(i,"authId",r.authenticatedId,Oe)}},e.cleanUp=function(e,t){var n=e.ext;n&&(Ba(n,Es.DeviceExt),Ba(n,Es.UserExt),Ba(n,Es.WebExt),Ba(n,Es.OSExt),Ba(n,Es.AppExt),Ba(n,Es.TraceExt))}}))}})),Qa=S((()=>{A(),ve(),Lr(),Ya(),Us(),Ga=function(e){function t(){var n,r,i=e.call(this)||this;return i.priority=110,i.identifier=Ds,G(t,i,(function(e,i){e.initialize=function(o,s,a,c){i.initialize(o,s,a,c);var l=e._getTelCtx(),u=e.identifier,d=t.getDefaultConfig();r=r||{},xe(d,(function(e,t){r[e]=function(){return l.getConfig(u,e,t())}})),e.context=new $a(s,r),n=ri(a,xs),e.context.appId=function(){return n?n._appId:null},e._extConfig=r},e.processTelemetry=function(t,n){if(!_e(t)){n=e._getTelCtx(n),t.name===Ho.envelopeType&&n.diagLog().resetInternalMessageCount();var r=e.context||{};if(r.session&&"string"!=typeof e.context.session.id&&r.sessionManager&&r.sessionManager.update(),function(t,n){ze(t,"tags",[]),ze(t,"ext",{});var r=e.context;r.applySessionContext(t,n),r.applyApplicationContext(t,n),r.applyDeviceContext(t,n),r.applyOperationContext(t,n),r.applyUserContext(t,n),r.applyOperatingSystemContxt(t,n),r.applyWebContext(t,n),r.applyLocationContext(t,n),r.applyInternalContext(t,n),r.cleanUp(t,n)}(t,n),r.user&&r.user.isNewUser){r.user.isNewUser=!1;var i=new Vt(ye.SendBrowserInfoOnUserInit,(gt()||{}).userAgent||"");n.diagLog().logInternalMessage(me.CRITICAL,i)}e.processNext(t,n)}}})),i}return x(t,e),t.getDefaultConfig=function(){return{instrumentationKey:function(){},accountId:function(){return null},sessionRenewalMs:function(){return 18e5},samplingPercentage:function(){return 100},sessionExpirationMs:function(){return 864e5},cookieDomain:function(){return null},sdkExtension:function(){return null},isBrowserLinkTrackingEnabled:function(){return!1},appId:function(){return null},namePrefix:function(){},sessionCookiePostfix:function(){},userCookiePostfix:function(){},idLength:function(){return 22},getNewId:function(){return null}}},t}(rn),za=Ga})),Xa=S((()=>{Qa()}));function Za(e,t,n){var r=0,i=e[t],o=e[n];return i&&o&&(r=Bi(i,o)),r}function ec(e,t,n,r,i){var o=0,s=Za(n,r,i);return s&&(o=tc(e,t,ti(s))),o}function tc(e,t,n){var r="ajaxPerf",i=0;return e&&t&&n&&((e[r]=e[r]||{})[t]=n,i=1),i}var nc,rc,ic,oc,sc=S((()=>{Us(),Lr(),ve(),nc="properties",rc=function(){var e=this;e.openDone=!1,e.setRequestHeaderDone=!1,e.sendDone=!1,e.abortDone=!1,e.stateChangeAttached=!1},ic=function e(t,n,r){var i=this,o=r,s="responseText";i.perfMark=null,i.completed=!1,i.requestHeadersSize=null,i.requestHeaders=null,i.responseReceivingDuration=null,i.callbackDuration=null,i.ajaxTotalDuration=null,i.aborted=0,i.pageUrl=null,i.requestUrl=null,i.requestSize=0,i.method=null,i.status=null,i.requestSentTime=null,i.responseStartedTime=null,i.responseFinishedTime=null,i.callbackFinishedTime=null,i.endTime=null,i.xhrMonitoringState=new rc,i.clientFailure=0,i.traceID=t,i.spanID=n,G(e,i,(function(e){e.getAbsoluteUrl=function(){return e.requestUrl?Ni(e.requestUrl):null},e.getPathName=function(){return e.requestUrl?Vr(o,Oi(e.method,e.requestUrl)):null},e.CreateTrackItem=function(t,n,r){if(e.ajaxTotalDuration=Math.round(1e3*Bi(e.requestSentTime,e.responseFinishedTime))/1e3,e.ajaxTotalDuration<0)return null;var i,o=((i={id:"|"+e.traceID+"."+e.spanID,target:e.getAbsoluteUrl(),name:e.getPathName(),type:t,startTime:null,duration:e.ajaxTotalDuration,success:+e.status>=200&&+e.status<400,responseCode:+e.status,method:e.method})[nc]={HttpMethod:e.method},i);if(e.requestSentTime&&(o.startTime=new Date,o.startTime.setTime(e.requestSentTime)),function(e,t){var n=e.perfTiming,r=t[nc]||{},i=0,o="name",s="Start",a="End",c="connect",l="redirect",u="request",d="response",p="duration",h="startTime",f=c+a,g=u+s,m=d+a,y=l+s,v=l=a,b="transferSize",w="encodedBodySize",C="decodedBodySize",S="serverTiming";if(n){i|=ec(r,l,n,y,v),i|=ec(r,"domainLookup",n,"domainLookupStart","domainLookupEnd"),i|=ec(r,c,n,"connectStart",f),i|=ec(r,u,n,g,"requestEnd"),i|=ec(r,d,n,"responseStart",m),i|=ec(r,"networkConnect",n,h,f),i|=ec(r,"sentRequest",n,g,m);var _=n[p];_||(_=Za(n,h,m)||0),i|=tc(r,p,_),i|=tc(r,"perfTotal",_);var k=n[S];if(k){var P={};Ue(k,(function(e,t){var n=function(e){var t=e,n=/([^\w\d_$])/g;return n.test(e)&&(t=e.replace(n,"_")),t}(e[o]||""+t),r=P[n]||{};xe(e,(function(e,t){(e!==o&&Oe(t)||Ae(t))&&(r[e]&&(t=r[e]+";"+t),(t||!Oe(t))&&(r[e]=t))})),P[n]=r})),i|=tc(r,S,P)}i|=tc(r,b,n[b]),i|=tc(r,w,n[w]),i|=tc(r,C,n[C])}else e.perfMark&&(i|=tc(r,"missing",e.perfAttempts));i&&(t[nc]=r)}(e,o),n&&Be(e.requestHeaders).length>0&&(o[nc]=o[nc]||{},o[nc].requestHeaders=e.requestHeaders),r){var a=r();if(a){var c=a.correlationContext;if(c&&(o.correlationContext=c),a.headerMap&&Be(a.headerMap).length>0&&(o[nc]=o[nc]||{},o[nc].responseHeaders=a.headerMap),e.status>=400){var l=a.type;o[nc]=o[nc]||{},(""===l||"text"===l)&&(o[nc][s]=a[s]?a.statusText+" - "+a[s]:a.statusText),"json"===l&&(o[nc][s]=a.response?a.statusText+" - "+JSON.stringify(a.response):a.statusText)}}}return o}}))}})),ac=S((()=>{Lr(),Lr(),function(){function e(){}e.GetLength=function(e){var t=0;if(!_e(e)){var n="";try{n=e.toString()}catch(e){}t=n.length,t=isNaN(t)?0:t}return t}}()})),cc=S((()=>{Lr(),oc=function(){function e(t,n){var r=this;r.traceFlag=e.DEFAULT_TRACE_FLAG,r.version=e.DEFAULT_VERSION,t&&e.isValidTraceId(t)?r.traceId=t:r.traceId=hr(),n&&e.isValidSpanId(n)?r.spanId=n:r.spanId=hr().substr(0,16)}return e.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&"00000000000000000000000000000000"!==e},e.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&"0000000000000000"!==e},e.prototype.toString=function(){var e=this;return e.version+"-"+e.traceId+"-"+e.spanId+"-"+e.traceFlag},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e}()}));function lc(e){var t="";try{!_e(e)&&!_e(e[mc])&&!_e(e[mc].requestUrl)&&(t+="(url: '"+e[mc].requestUrl+"')")}catch(e){}return t}function uc(e,t,n,r,i){e[gc]()[yc](me.CRITICAL,t,n,r,i)}function dc(e,t,n,r,i){e[gc]()[yc](me.WARNING,t,n,r,i)}function pc(e,t,n){return function(r){uc(e,t,n,{ajaxDiagnosticsMessage:lc(r.inst),exception:St(r.err)})}}function hc(e,t){return e&&t?e.indexOf(t):-1}var fc,gc,mc,yc,vc,bc,wc,Cc,Sc,_c,kc,Pc,Ic,Ec,Tc=S((()=>{A(),Us(),Lr(),sc(),ac(),cc(),ve(),fc="ai.ajxmn.",gc="diagLog",mc="ajaxData",yc="throwInternal",vc="fetch",bc=0,wc=function(e){function t(){var n=e.call(this)||this;n.identifier=t.identifier,n.priority=120;var r,i,o,c,l,u="trackDependencyDataInternal",d=mt(),p=!1,h=!1,f=d&&d.host&&d.host.toLowerCase(),g=t.getEmptyConfig(),m=!1,y=0,v=!1,b=0,w=!1,C=[],S={};return G(t,n,(function(e,n){function d(e){var t=!0;return(e||g.ignoreHeaders)&&Ue(g.ignoreHeaders,(function(n){if(n.toLowerCase()===e.toLowerCase())return t=!1,-1})),t}function _(e,t,n){C.push(function(e,t,n){return e?Dr(e[a],t,n,!1):null}(e,t,n))}function k(e,t,n){var r=!1,i=((Oe(t)?t:(t||{}).url||"")||"").toLowerCase();if(Ue(l,(function(e){var t=e;Oe(e)&&(t=new RegExp(e)),r||(r=t.test(i))})),r)return r;var o=hc(i,"?"),s=hc(i,"#");return(-1===o||-1!==s&&s<o)&&(o=s),-1!==o&&(i=i.substring(0,o)),_e(e)?_e(t)||(r="object"==typeof t&&!0===t[oi]||!!n&&!0===n[oi]):r=!0===e[oi]||!0===i[oi],r?S[i]||(S[i]=1):S[i]&&(r=!0),r}function P(e,t){var n=!0,r=h;return _e(e)||(n=!0===t||!_e(e[mc])),r&&n}function E(e){try{var t=e.responseType;if(""===t||"text"===t)return e.responseText}catch(e){}return null}function T(t){try{var n=t.getAllResponseHeaders();if(null!==n&&-1!==hc(n.toLowerCase(),Or.requestContextHeaderLowerCase)){var r=t.getResponseHeader(Or.requestContextHeader);return Gi.getCorrelationContext(r)}}catch(n){dc(e,ye.FailedMonitorAjaxGetCorrelationHeader,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{ajaxDiagnosticsMessage:lc(t),exception:St(n)})}}function D(e,t){if(t.requestUrl&&c&&v){var n=yt();if(n&&Ee(n.mark)){bc++;var r=c+e+"#"+bc;n.mark(r);var i=n.getEntriesByName(r);i&&1===i.length&&(t.perfMark=i[0])}}}function x(e,t,n,r){var i=t.perfMark,o=yt(),s=g.maxAjaxPerfLookupAttempts,a=g.ajaxPerfLookupDelay,c=t.requestUrl,l=0;!function u(){try{if(o&&i){l++;for(var d=null,p=o.getEntries(),h=p.length-1;h>=0;h--){var f=p[h];if(f){if("resource"===f.entryType)f.initiatorType===e&&(-1!==hc(f.name,c)||-1!==hc(c,f.name))&&(d=f);else if("mark"===f.entryType&&f.name===i.name){t.perfTiming=d;break}if(f.startTime<i.startTime-1e3)break}}}!i||t.perfTiming||l>=s||!1===t.async?(i&&Ee(o.clearMarks)&&o.clearMarks(i.name),t.perfAttempts=l,n()):setTimeout(u,a)}catch(e){r(e)}}()}function R(t){var n="";try{_e(t)||(n+="string"==typeof t?"(url: '"+t+"')":"(url: '"+t.url+"')")}catch(t){uc(e,ye.FailedMonitorAjaxOpen,"Failed to grab failed fetch diagnostics message",{exception:St(t)})}return n}function j(t,n,r,i,o,s){function a(t,n,i){var o=i||{};o.fetchDiagnosticsMessage=R(r),n&&(o.exception=St(n)),dc(e,t,"Failed to calculate the duration of the fetch call, monitoring data for this fetch call won't be sent.",o)}i&&(i.responseFinishedTime=Hi(),i.status=n,x("fetch",i,(function(){var t=i.CreateTrackItem("Fetch",m,o);t?e[u](t):a(ye.FailedMonitorAjaxDur,null,{requestSentTime:i.requestSentTime,responseFinishedTime:i.responseFinishedTime})}),(function(e){a(ye.FailedMonitorAjaxGetCorrelationHeader,e,null)})))}function N(t){if(t&&t.headers)try{var n=t.headers.get(Or.requestContextHeader);return Gi.getCorrelationContext(n)}catch(n){dc(e,ye.FailedMonitorAjaxGetCorrelationHeader,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{fetchDiagnosticsMessage:R(t),exception:St(n)})}}e.initialize=function(f,y,S,R){if(!e.isInitialized()){n.initialize(f,y,S,R);var M=e._getTelCtx();xe(t.getDefaultConfig(),(function(e,n){g[e]=M.getConfig(t.identifier,e,n)}));var O=g.distributedTracingMode;if(m=g.enableRequestHeaderTracking,v=g.enableAjaxPerfTracking,b=g.maxAjaxCallsPerView,w=g.enableResponseHeaderTracking,l=g.excludeRequestFromAutoTrackingPatterns,o=O===pi.AI||O===pi.AI_AND_W3C,i=O===pi.AI_AND_W3C||O===pi.W3C,v){var A=f.instrumentationKey||"unkwn";c=A.length>5?fc+A.substring(A.length-5)+".":fc+A+"."}if(!1===g.disableAjaxTracking&&function(e){var t=!1;if(typeof XMLHttpRequest!==s&&!_e(XMLHttpRequest)){var n=XMLHttpRequest[a];t=!(_e(n)||_e(n.open)||_e(n.send)||_e(n.abort))}var r=Ct();if(r&&r<9&&(t=!1),t)try{(new XMLHttpRequest)[mc]={};var i=XMLHttpRequest[a].open;XMLHttpRequest[a].open=i}catch(n){t=!1,uc(e,ye.FailedMonitorAjaxOpen,"Failed to enable XMLHttpRequest monitoring, extension is not supported",{exception:St(n)})}return t}(e)&&!h&&(_(XMLHttpRequest,"open",{req:function(t,n,i,o){var s=t.inst,a=s[mc];!k(s,i)&&P(s,!0)&&(!a||!a.xhrMonitoringState.openDone)&&function(t,n,i,o){var s=r&&r.telemetryTrace&&r.telemetryTrace.traceID||hr(),a=hr().substr(0,16),c=new ic(s,a,e[gc]());c.method=n,c.requestUrl=i,c.xhrMonitoringState.openDone=!0,c.requestHeaders={},c.async=o,t[mc]=c,function(t){t[mc].xhrMonitoringState.stateChangeAttached=kr.Attach(t,"readystatechange",(function(){try{t&&4===t.readyState&&P(t)&&function(t){var n=t[mc];function r(n,r){var i=r||{};i.ajaxDiagnosticsMessage=lc(t),n&&(i.exception=St(n)),dc(e,ye.FailedMonitorAjaxDur,"Failed to calculate the duration of the ajax call, monitoring data for this ajax call won't be sent.",i)}n.responseFinishedTime=Hi(),n.status=t.status,x("xmlhttprequest",n,(function(){try{var i=n.CreateTrackItem("Ajax",m,(function(){var e={statusText:t.statusText,headerMap:null,correlationContext:T(t),type:t.responseType,responseText:E(t),response:t.response};if(w){var n=t.getAllResponseHeaders();if(n){var r=He(n).split(/[\r\n]+/),i={};Ue(r,(function(e){var t=e.split(": "),n=t.shift(),r=t.join(": ");d(n)&&(i[n]=r)})),e.headerMap=i}}return e}));i?e[u](i):r(null,{requestSentTime:n.requestSentTime,responseFinishedTime:n.responseFinishedTime})}finally{try{t[mc]=null}catch(e){}}}),(function(e){r(e,null)}))}(t)}catch(r){var n=St(r);(!n||-1===hc(n.toLowerCase(),"c00c023f"))&&uc(e,ye.FailedMonitorAjaxRSC,"Failed to monitor XMLHttpRequest 'readystatechange' event handler, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:lc(t),exception:n})}}))}(t)}(s,n,i,o)},hkErr:pc(e,ye.FailedMonitorAjaxOpen,"Failed to monitor XMLHttpRequest.open, monitoring data for this ajax call may be incorrect.")}),_(XMLHttpRequest,"send",{req:function(t,n){var r=t.inst,i=r[mc];P(r)&&!i.xhrMonitoringState.sendDone&&(D("xhr",i),i.requestSentTime=Hi(),e.includeCorrelationHeaders(i,void 0,void 0,r),i.xhrMonitoringState.sendDone=!0)},hkErr:pc(e,ye.FailedMonitorAjaxSend,"Failed to monitor XMLHttpRequest, monitoring data for this ajax call may be incorrect.")}),_(XMLHttpRequest,"abort",{req:function(e){var t=e.inst,n=t[mc];P(t)&&!n.xhrMonitoringState.abortDone&&(n.aborted=1,n.xhrMonitoringState.abortDone=!0)},hkErr:pc(e,ye.FailedMonitorAjaxAbort,"Failed to monitor XMLHttpRequest.abort, monitoring data for this ajax call may be incorrect.")}),m&&_(XMLHttpRequest,"setRequestHeader",{req:function(e,t,n){var r=e.inst;P(r)&&d(t)&&(r[mc].requestHeaders[t]=n)},hkErr:pc(e,ye.FailedMonitorAjaxSetRequestHeader,"Failed to monitor XMLHttpRequest.setRequestHeader, monitoring data for this ajax call may be incorrect.")}),h=!0),function(){var t=function(){var e=I();return!e||_e(e.Request)||_e(e.Request[a])||_e(e[vc])?null:e[vc]}();if(t){var n=I(),i=t.polyfill;!1===g.disableFetchTracking?(C.push(Dr(n,vc,{req:function(t,n,o){var s;if(p&&!k(null,n,o)&&(!i||!h)){var a=t.ctx();s=function(t,n){var i=r&&r.telemetryTrace&&r.telemetryTrace.traceID||hr(),o=hr().substr(0,16),s=new ic(i,o,e[gc]());s.requestSentTime=Hi(),t instanceof Request?s.requestUrl=t?t.url:"":s.requestUrl=t;var a="GET";n&&n.method?a=n.method:t&&t instanceof Request&&(a=t.method),s.method=a;var c={};return m&&new Headers((n?n.headers:0)||t instanceof Request&&t.headers||{}).forEach((function(e,t){d(t)&&(c[t]=e)})),s.requestHeaders=c,D("fetch",s),s}(n,o);var c=e.includeCorrelationHeaders(s,n,o);c!==o&&t.set(1,c),a.data=s}},rsp:function(e,t){var n=e.ctx().data;n&&(e.rslt=e.rslt.then((function(e){return j(0,(e||{}).status,e,n,(function(){var t={statusText:e.statusText,headerMap:null,correlationContext:N(e)};if(w){var n={};e.headers.forEach((function(e,t){d(t)&&(n[t]=e)})),t.headerMap=n}return t})),e})).catch((function(e){throw j(0,0,t,n,null,e.message),e})))},hkErr:pc(e,ye.FailedMonitorAjaxOpen,"Failed to monitor Window.fetch, monitoring data for this fetch call may be incorrect.")})),p=!0):i&&C.push(Dr(n,vc,{req:function(e,t,n){k(null,t,n)}})),i&&(n[vc].polyfill=i)}}(),S.length>0&&S){for(var L=void 0,F=0;!L&&F<S.length;)S[F]&&S[F].identifier===Ds&&(L=S[F]),F++;L&&(r=L.context)}}},e.teardown=function(){Ue(C,(function(e){e.rm()})),C=[],p=!1,h=!1,e.setInitialized(!1)},e.trackDependencyData=function(t,n){e[u](t,n)},e.includeCorrelationHeaders=function(t,n,s,a){var c=e._currentWindowHost||f;if(n){if(Gi.canIncludeCorrelationHeader(g,t.getAbsoluteUrl(),c)){if(s||(s={}),s.headers=new Headers(s.headers||n instanceof Request&&n.headers||{}),o){var l="|"+t.traceID+"."+t.spanID;s.headers.set(Or.requestIdHeader,l),m&&(t.requestHeaders[Or.requestIdHeader]=l)}if((d=g.appId||r&&r.appId())&&(s.headers.set(Or.requestContextHeader,Or.requestContextAppIdFormat+d),m&&(t.requestHeaders[Or.requestContextHeader]=Or.requestContextAppIdFormat+d)),i){var u=new oc(t.traceID,t.spanID);s.headers.set(Or.traceParentHeader,u.toString()),m&&(t.requestHeaders[Or.traceParentHeader]=u.toString())}}return s}if(a){var d;if(Gi.canIncludeCorrelationHeader(g,t.getAbsoluteUrl(),c))o&&(l="|"+t.traceID+"."+t.spanID,a.setRequestHeader(Or.requestIdHeader,l),m&&(t.requestHeaders[Or.requestIdHeader]=l)),(d=g.appId||r&&r.appId())&&(a.setRequestHeader(Or.requestContextHeader,Or.requestContextAppIdFormat+d),m&&(t.requestHeaders[Or.requestContextHeader]=Or.requestContextAppIdFormat+d)),i&&(u=new oc(t.traceID,t.spanID),a.setRequestHeader(Or.traceParentHeader,u.toString()),m&&(t.requestHeaders[Or.traceParentHeader]=u.toString()));return a}},e[u]=function(t,n,r){if(-1===b||y<b){(g.distributedTracingMode===pi.W3C||g.distributedTracingMode===pi.AI_AND_W3C)&&"string"==typeof t.id&&"."!==t.id[t.id.length-1]&&(t.id+="."),_e(t.startTime)&&(t.startTime=new Date);var i=Is.create(t,qo.dataType,qo.envelopeType,e[gc](),n,r);e.core.track(i)}else y===b&&uc(e,ye.MaxAjaxPerPVExceeded,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0);++y}})),n}return x(t,e),t.getDefaultConfig=function(){return{maxAjaxCallsPerView:500,disableAjaxTracking:!1,disableFetchTracking:!0,excludeRequestFromAutoTrackingPatterns:void 0,disableCorrelationHeaders:!1,distributedTracingMode:pi.AI_AND_W3C,correlationHeaderExcludedDomains:["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],correlationHeaderDomains:void 0,correlationHeaderExcludePatterns:void 0,appId:void 0,enableCorsCorrelation:!1,enableRequestHeaderTracking:!1,enableResponseHeaderTracking:!1,enableAjaxErrorStatusText:!1,enableAjaxPerfTracking:!1,maxAjaxPerfLookupAttempts:3,ajaxPerfLookupDelay:25,ignoreHeaders:["Authorization","X-API-Key","WWW-Authenticate"]}},t.getEmptyConfig=function(){var e=this.getDefaultConfig();return xe(e,(function(t){e[t]=void 0})),e},t.prototype.processTelemetry=function(e,t){this.processNext(e,t)},t.identifier="AjaxDependencyPlugin",t}(rn)})),Dc=S((()=>{Tc()})),xc=S((()=>{Lr(),Qs(),ja(),Xa(),Dc(),Us(),Sc=["snippet","dependencies","properties","_snippetVersion","appInsightsNew","getSKUDefaults"],_c={__proto__:null,PropertiesPluginIdentifier:Ds,BreezeChannelIdentifier:xs,AnalyticsPluginIdentifier:Rs,Util:Ji,CorrelationIdHelper:Gi,UrlHelper:$i,DateTimeUtils:zi,ConnectionStringParser:eo,FieldType:{Default:0,Required:1,Array:2,Hidden:4},RequestHeaders:Or,DisabledPropertyName:oi,ProcessLegacy:ai,SampleRate:si,HttpMethod:ci,DEFAULT_BREEZE_ENDPOINT:li,AIData:no,AIBase:to,Envelope:io,Event:so,Exception:Mo,Metric:Wo,PageView:Ho,PageViewData:Vo,RemoteDependencyData:qo,Trace:$o,PageViewPerformance:zo,Data:Yo,SeverityLevel:Qo,ConfigurationManager:Xo,ContextTagKeys:Ps,DataSanitizer:Yr,TelemetryItemCreator:Is,CtxTagKeys:Ts,Extensions:Es,DistributedTracingModes:pi},kc=function(){function e(e){var t=this;t._snippetVersion=""+(e.sv||e.version||""),e.queue=e.queue||[],e.version=e.version||2;var n=e.config||{};if(n.connectionString){var r=Qi(n.connectionString),i=r.ingestionendpoint;n.endpointUrl=i?i+"/v2/track":n.endpointUrl,n.instrumentationKey=r.instrumentationkey||n.instrumentationKey}t.appInsights=new Js,t.properties=new za,t.dependencies=new wc,t.core=new Jn,t._sender=new Pa,t.snippet=e,t.config=n,t.getSKUDefaults()}return e.prototype.getCookieMgr=function(){return this.appInsights.getCookieMgr()},e.prototype.trackEvent=function(e,t){this.appInsights.trackEvent(e,t)},e.prototype.trackPageView=function(e){var t=e||{};this.appInsights.trackPageView(t)},e.prototype.trackPageViewPerformance=function(e){var t=e||{};this.appInsights.trackPageViewPerformance(t)},e.prototype.trackException=function(e){e&&!e.exception&&e.error&&(e.exception=e.error),this.appInsights.trackException(e)},e.prototype._onerror=function(e){this.appInsights._onerror(e)},e.prototype.trackTrace=function(e,t){this.appInsights.trackTrace(e,t)},e.prototype.trackMetric=function(e,t){this.appInsights.trackMetric(e,t)},e.prototype.startTrackPage=function(e){this.appInsights.startTrackPage(e)},e.prototype.stopTrackPage=function(e,t,n,r){this.appInsights.stopTrackPage(e,t,n,r)},e.prototype.startTrackEvent=function(e){this.appInsights.startTrackEvent(e)},e.prototype.stopTrackEvent=function(e,t,n){this.appInsights.stopTrackEvent(e,t,n)},e.prototype.addTelemetryInitializer=function(e){return this.appInsights.addTelemetryInitializer(e)},e.prototype.setAuthenticatedUserContext=function(e,t,n){void 0===n&&(n=!1),this.properties.context.user.setAuthenticatedUserContext(e,t,n)},e.prototype.clearAuthenticatedUserContext=function(){this.properties.context.user.clearAuthenticatedUserContext()},e.prototype.trackDependencyData=function(e){this.dependencies.trackDependencyData(e)},e.prototype.flush=function(e){var t=this;void 0===e&&(e=!0),qt(this.core,(function(){return"AISKU.flush"}),(function(){Ue(t.core.getTransmissionControls(),(function(t){Ue(t,(function(t){t.flush(e)}))}))}),null,e)},e.prototype.onunloadFlush=function(e){void 0===e&&(e=!0),Ue(this.core.getTransmissionControls(),(function(t){Ue(t,(function(t){t.onunloadFlush?t.onunloadFlush():t.flush(e)}))}))},e.prototype.loadAppInsights=function(e,t,n){var r=this;void 0===e&&(e=!1);var i=this;return e&&i.config.extensions&&i.config.extensions.length>0&&Xe("Extensions not allowed in legacy mode"),qt(i.core,(function(){return"AISKU.loadAppInsights"}),(function(){var o=[];o.push(i._sender),o.push(i.properties),o.push(i.dependencies),o.push(i.appInsights),i.core.initialize(i.config,o,t,n),i.context=i.properties.context,Cc&&i.context&&(i.context.internal.sdkSrc=Cc),function(t){if(t){var n="";_e(i._snippetVersion)||(n+=i._snippetVersion),e&&(n+=".lg"),i.context&&i.context.internal&&(i.context.internal.snippetVer=n||"-"),xe(i,(function(e,n){Oe(e)&&!Ee(n)&&e&&"_"!==e[0]&&-1===Sc.indexOf(e)&&(t[e]=n)}))}}(i.snippet),i.emptyQueue(),i.pollInternalLogs(),i.addHousekeepingBeforeUnload(r)})),i},e.prototype.updateSnippetDefinitions=function(e){Ze(e,this,(function(e){return e&&-1===Sc.indexOf(e)}))},e.prototype.emptyQueue=function(){var e=this;try{if(Ne(e.snippet.queue)){for(var t=e.snippet.queue.length,n=0;n<t;n++)(0,e.snippet.queue[n])();e.snippet.queue=void 0,delete e.snippet.queue}}catch(e){e&&Ee(e.toString)&&e.toString()}},e.prototype.pollInternalLogs=function(){this.core.pollInternalLogs()},e.prototype.addHousekeepingBeforeUnload=function(e){if(dt()||ht()){var t=function(){e.onunloadFlush(!1),Ue(e.appInsights.core._extensions,(function(e){if(e.identifier===Ds)return e&&e.context&&e.context._sessionManager&&e.context._sessionManager.backup(),-1}))};if(!e.appInsights.config.disableFlushOnBeforeUnload){var n=lr("beforeunload",t);n=lr("unload",t)||n,n=lr("pagehide",t)||n,!(n=lr("visibilitychange",t)||n)&&!function(){var e=gt();return!(!e||!e.product)&&e.product===Nt}()&&e.appInsights.core.logger.throwInternal(me.CRITICAL,ye.FailedToAddHandlerForOnBeforeUnload,"Could not add handler for beforeunload and pagehide")}e.appInsights.config.disableFlushOnUnload||(lr("pagehide",t),lr("visibilitychange",t))}},e.prototype.getSender=function(){return this._sender},e.prototype.getSKUDefaults=function(){var e=this;e.config.diagnosticLogInterval=e.config.diagnosticLogInterval&&e.config.diagnosticLogInterval>0?e.config.diagnosticLogInterval:1e4},e}(),function(){var e=null,t=["://js.monitor.azure.com/","://az416426.vo.msecnd.net/"];try{var n=(document||{}).currentScript;n&&(e=n.src)}catch(e){}if(e)try{var r=e.toLowerCase();if(r)for(var i="",o=0;o<t.length;o++)if(-1!==r.indexOf(t[o])){i="cdn"+(o+1),-1===r.indexOf("/scripts/")&&(-1!==r.indexOf("/next/")?i+="-next":-1!==r.indexOf("/beta/")&&(i+="-beta")),Cc=i+"";break}}catch(e){}}()})),Rc=S((()=>{Us(),Lr(),Pc=["snippet","getDefaultConfig","_hasLegacyInitializers","_queue","_processLegacyInitializers"],Ic=function(){function e(t,n){this._hasLegacyInitializers=!1,this._queue=[],this.config=e.getDefaultConfig(t.config),this.appInsightsNew=n,this.context={addTelemetryInitializer:this.addTelemetryInitializers.bind(this)}}return e.getDefaultConfig=function(e){return e||(e={}),e.endpointUrl=e.endpointUrl||"https://dc.services.visualstudio.com/v2/track",e.sessionRenewalMs=18e5,e.sessionExpirationMs=864e5,e.maxBatchSizeInBytes=e.maxBatchSizeInBytes>0?e.maxBatchSizeInBytes:102400,e.maxBatchInterval=isNaN(e.maxBatchInterval)?15e3:e.maxBatchInterval,e.enableDebug=ei(e.enableDebug),e.disableExceptionTracking=ei(e.disableExceptionTracking),e.disableTelemetry=ei(e.disableTelemetry),e.verboseLogging=ei(e.verboseLogging),e.emitLineDelimitedJson=ei(e.emitLineDelimitedJson),e.diagnosticLogInterval=e.diagnosticLogInterval||1e4,e.autoTrackPageVisitTime=ei(e.autoTrackPageVisitTime),(isNaN(e.samplingPercentage)||e.samplingPercentage<=0||e.samplingPercentage>=100)&&(e.samplingPercentage=100),e.disableAjaxTracking=ei(e.disableAjaxTracking),e.maxAjaxCallsPerView=isNaN(e.maxAjaxCallsPerView)?500:e.maxAjaxCallsPerView,e.isBeaconApiDisabled=ei(e.isBeaconApiDisabled,!0),e.disableCorrelationHeaders=ei(e.disableCorrelationHeaders),e.correlationHeaderExcludedDomains=e.correlationHeaderExcludedDomains||["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],e.disableFlushOnBeforeUnload=ei(e.disableFlushOnBeforeUnload),e.disableFlushOnUnload=ei(e.disableFlushOnUnload,e.disableFlushOnBeforeUnload),e.enableSessionStorageBuffer=ei(e.enableSessionStorageBuffer,!0),e.isRetryDisabled=ei(e.isRetryDisabled),e.isCookieUseDisabled=ei(e.isCookieUseDisabled),e.isStorageUseDisabled=ei(e.isStorageUseDisabled),e.isBrowserLinkTrackingEnabled=ei(e.isBrowserLinkTrackingEnabled),e.enableCorsCorrelation=ei(e.enableCorsCorrelation),e},e.prototype.addTelemetryInitializers=function(e){var t=this;this._hasLegacyInitializers||(this.appInsightsNew.addTelemetryInitializer((function(e){t._processLegacyInitializers(e)})),this._hasLegacyInitializers=!0),this._queue.push(e)},e.prototype.getCookieMgr=function(){return this.appInsightsNew.getCookieMgr()},e.prototype.startTrackPage=function(e){this.appInsightsNew.startTrackPage(e)},e.prototype.stopTrackPage=function(e,t,n,r){this.appInsightsNew.stopTrackPage(e,t,n)},e.prototype.trackPageView=function(e,t,n,r,i){var o={name:e,uri:t,properties:n,measurements:r};this.appInsightsNew.trackPageView(o)},e.prototype.trackEvent=function(e,t,n){this.appInsightsNew.trackEvent({name:e})},e.prototype.trackDependency=function(e,t,n,r,i,o,s){this.appInsightsNew.trackDependencyData({id:e,target:n,type:r,duration:i,properties:{HttpMethod:t},success:o,responseCode:s})},e.prototype.trackException=function(e,t,n,r,i){this.appInsightsNew.trackException({exception:e})},e.prototype.trackMetric=function(e,t,n,r,i,o){this.appInsightsNew.trackMetric({name:e,average:t,sampleCount:n,min:r,max:i})},e.prototype.trackTrace=function(e,t,n){this.appInsightsNew.trackTrace({message:e,severityLevel:n})},e.prototype.flush=function(e){this.appInsightsNew.flush(e)},e.prototype.setAuthenticatedUserContext=function(e,t,n){this.appInsightsNew.context.user.setAuthenticatedUserContext(e,t,n)},e.prototype.clearAuthenticatedUserContext=function(){this.appInsightsNew.context.user.clearAuthenticatedUserContext()},e.prototype._onerror=function(e,t,n,r,i){this.appInsightsNew._onerror({message:e,url:t,lineNumber:n,columnNumber:r,error:i})},e.prototype.startTrackEvent=function(e){this.appInsightsNew.startTrackEvent(e)},e.prototype.stopTrackEvent=function(e,t,n){this.appInsightsNew.stopTrackEvent(e,t,n)},e.prototype.downloadAndSetup=function(e){Xe("downloadAndSetup not implemented in web SKU")},e.prototype.updateSnippetDefinitions=function(e){Ze(e,this,(function(e){return e&&-1===Pc.indexOf(e)}))},e.prototype.loadAppInsights=function(){var e=this;if(this.config.iKey){var t=this.trackPageView;this.trackPageView=function(n,r,i){t.apply(e,[null,n,r,i])}}var n="logPageView";"function"==typeof this.snippet[n]&&(this[n]=function(t,n,r){e.trackPageView(null,t,n,r)});var r="logEvent";return"function"==typeof this.snippet[r]&&(this[r]=function(t,n,r){e.trackEvent(t,n,r)}),this},e.prototype._processLegacyInitializers=function(e){return e.tags[ai]=this._queue,e},e}()})),jc=S((()=>{Rc(),xc(),Lr(),Ec=function(){function e(){}return e.getAppInsights=function(e,t){var n=new kc(e),r=2!==t;if(fr(),2===t)return n.updateSnippetDefinitions(e),n.loadAppInsights(r),n;var i=new Ic(e,n);return i.updateSnippetDefinitions(e),n.loadAppInsights(r),i},e}()})),Nc={};((e,t)=>{for(var n in t)m(e,n,{get:t[n],enumerable:!0})})(Nc,{AppInsightsCore:()=>Jn,ApplicationAnalytics:()=>Js,ApplicationInsights:()=>kc,ApplicationInsightsContainer:()=>Ec,BaseCore:()=>Bn,BaseTelemetryPlugin:()=>rn,CoreUtils:()=>Sr,DependenciesPlugin:()=>wc,DistributedTracingModes:()=>pi,Event:()=>so,Exception:()=>Mo,LoggingSeverity:()=>me,Metric:()=>Wo,NotificationManager:()=>qn,PageView:()=>Ho,PageViewPerformance:()=>zo,PerfEvent:()=>Jt,PerfManager:()=>$t,PropertiesPlugin:()=>za,RemoteDependencyData:()=>qo,Sender:()=>Pa,SeverityLevel:()=>Qo,Telemetry:()=>_c,Trace:()=>$o,Util:()=>Ji,_InternalMessageId:()=>ye,doPerf:()=>qt});var Mc=S((()=>{xc(),jc(),Lr(),Us(),ja(),Qs(),Xa(),Dc()})),Oc=class{constructor(e){this.vscodeAPI=e}getTelemetryLevel(){try{let e=this.vscodeAPI.env.telemetryConfiguration;return e.isUsageEnabled&&e.isErrorsEnabled&&e.isCrashEnabled?"on":e.isErrorsEnabled&&e.isCrashEnabled?"error":"off"}catch(e){return void 0!==this.vscodeAPI.env.isTelemetryEnabled?this.vscodeAPI.env.isTelemetryEnabled?"on":"off":this.vscodeAPI.workspace.getConfiguration("telemetry").get("enableTelemetry")?"on":"off"}}static applyReplacements(e,t){for(let n of Object.keys(e))for(let r of t)r.lookup.test(n)&&(void 0!==r.replacementString?e[n]=r.replacementString:delete e[n])}static shouldUseOneDataSystemSDK(e){return 74===e.length&&"-"===e[32]&&"-"===e[41]&&"-"===e[46]&&"-"===e[51]&&"-"===e[56]&&"-"===e[69]}static getInstance(e){return Oc._instance||(Oc._instance=new Oc(e)),Oc._instance}},Ac=class extends class{constructor(e,t,n,r,i,o){this.extensionId=e,this.extensionVersion=t,this.telemetryAppender=n,this.osShim=r,this.vscodeAPI=i,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!o,this.updateUserOptStatus(),void 0!==i.env.onDidChangeTelemetryEnabled?(this.disposables.push(i.env.onDidChangeTelemetryEnabled((()=>this.updateUserOptStatus()))),this.disposables.push(i.workspace.onDidChangeConfiguration((()=>this.updateUserOptStatus())))):this.disposables.push(i.workspace.onDidChangeConfiguration((()=>this.updateUserOptStatus())))}updateUserOptStatus(){let e=Oc.getInstance(this.vscodeAPI).getTelemetryLevel();this.userOptIn="on"===e,this.errorOptIn="error"===e||this.userOptIn,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(e){if(!e)return"none";let t="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach((n=>{0===e.indexOf(`${n}`)&&(t=n)})),t}get extension(){return void 0===this._extension&&(this._extension=this.vscodeAPI.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(e,t){if(null===e||"object"!=typeof e||"function"!=typeof t)return e;let n={};for(let r in e)n[r]=t(r,e[r]);return n}shouldSendErrorTelemetry(){return!(!1===this.errorOptIn||this.firstParty&&this.vscodeAPI.env.remoteName&&"other"===this.cleanRemoteName(this.vscodeAPI.env.remoteName))}getCommonProperties(){let e={};if(e["common.os"]=this.osShim.platform,e["common.nodeArch"]=this.osShim.architecture,e["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,this.vscodeAPI&&this.vscodeAPI.env){switch(e["common.vscodemachineid"]=this.vscodeAPI.env.machineId,e["common.vscodesessionid"]=this.vscodeAPI.env.sessionId,e["common.vscodeversion"]=this.vscodeAPI.version,e["common.isnewappinstall"]=this.vscodeAPI.env.isNewAppInstall?this.vscodeAPI.env.isNewAppInstall.toString():"false",e["common.product"]=this.vscodeAPI.env.appHost,this.vscodeAPI.env.uiKind){case this.vscodeAPI.UIKind.Web:e["common.uikind"]="web";break;case this.vscodeAPI.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}e["common.remotename"]=this.cleanRemoteName(this.vscodeAPI.env.remoteName)}return e}anonymizeFilePaths(e,t){let n;if(null==e)return"";let r=[];""!==this.vscodeAPI.env.appRoot&&r.push(new RegExp(this.vscodeAPI.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&r.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let i=e;if(t){let t=[];for(let i of r)for(;(n=i.exec(e))&&n;)t.push([n.index,i.lastIndex]);let o=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,s=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,a=0;for(i="";(n=s.exec(e))&&n;)n[0]&&!o.test(n[0])&&t.every((([e,t])=>n.index<e||n.index>=t))&&(i+=e.substring(a,n.index)+"<REDACTED: user-file-path>",a=s.lastIndex);a<e.length&&(i+=e.substr(a))}for(let e of r)i=i.replace(e,"");return i}removePropertiesWithPossibleUserInfo(e){if("object"!=typeof e)return;let t={};for(let n of Object.keys(e)){let r=e[n];if(!r)continue;let i=/@[a-zA-Z0-9-.]+/,o=/xox[pbaors]-[a-zA-Z0-9]+-[a-zA-Z0-9-]+?/;/(key|token|sig|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/.test(r.toLowerCase())?t[n]="<REDACTED: secret>":i.test(r)?t[n]="<REDACTED: email>":o.test(r)?t[n]="<REDACTED: token>":t[n]=r}return t}get telemetryLevel(){switch(Oc.getInstance(this.vscodeAPI).getTelemetryLevel()){case"on":return"all";case"error":return"error";case"off":return"off"}}internalSendTelemetryEvent(e,t,n,r,i){if((this.userOptIn||i)&&""!==e){if(t=C(C({},t),this.getCommonProperties()),r){let e=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));t=this.removePropertiesWithPossibleUserInfo(e)}t=null!=t?t:{},n=null!=n?n:{},e=`${this.extensionId}/${e}`,this.telemetryAppender.logEvent(e,{properties:t,measurements:n})}}sendTelemetryEvent(e,t,n){this.internalSendTelemetryEvent(e,t,n,!0,!1)}sendRawTelemetryEvent(e,t,n){this.internalSendTelemetryEvent(e,t,n,!1,!1)}sendDangerousTelemetryEvent(e,t,n,r=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryEvent(e,t,n,r,!0)}internalSendTelemetryErrorEvent(e,t,n,r,i){if((this.shouldSendErrorTelemetry()||i)&&""!==e){if(t=C(C({},t),this.getCommonProperties()),r){let e=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));t=this.removePropertiesWithPossibleUserInfo(e)}t=null!=t?t:{},n=null!=n?n:{},e=`${this.extensionId}/${e}`,this.telemetryAppender.logEvent(e,{properties:t,measurements:n})}}sendTelemetryErrorEvent(e,t,n){this.internalSendTelemetryErrorEvent(e,t,n,!0,!1)}sendDangerousTelemetryErrorEvent(e,t,n,r=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryErrorEvent(e,t,n,r,!0)}internalSendTelemetryException(e,t,n,r,i){if((this.shouldSendErrorTelemetry()||i)&&e){if(t=C(C({},t),this.getCommonProperties()),r){let n=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));e.stack&&(e.stack=this.anonymizeFilePaths(e.stack,this.firstParty)),t=this.removePropertiesWithPossibleUserInfo(n)}t=null!=t?t:{},n=null!=n?n:{},this.telemetryAppender.logException(e,{properties:t,measurements:n})}}sendTelemetryException(e,t,n){this.internalSendTelemetryException(e,t,n,!0,!1)}sendDangerousTelemetryException(e,t,n,r=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryException(e,t,n,r,!0)}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map((e=>e.dispose())))}}{constructor(e,t,r,i,o){let s=e=>((e,t)=>_(void 0,null,(function*(){let n;try{let t,r=yield Promise.resolve().then((()=>(Mc(),Nc)));e&&0===e.indexOf("AIF-")&&(t="https://vscode.vortex.data.microsoft.com/collect/v1"),n=new r.ApplicationInsights({config:{instrumentationKey:e,endpointUrl:t,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!0,disableInstrumentationKeyValidation:!0}}),n.loadAppInsights(),t&&fetch(t).catch((()=>n=void 0))}catch(e){return Promise.reject(e)}return{logEvent:(e,r)=>{let i=C(C({},null==r?void 0:r.properties),null==r?void 0:r.measurements);null!=t&&t.length&&Oc.applyReplacements(i,t),null==n||n.trackEvent({name:e},i)},logException:(e,r)=>{let i=C(C({},null==r?void 0:r.properties),null==r?void 0:r.measurements);null!=t&&t.length&&Oc.applyReplacements(i,t),null==n||n.trackException({exception:e,properties:i})},flush:()=>_(void 0,null,(function*(){null==n||n.flush()}))}})))(e,o);Oc.shouldUseOneDataSystemSDK(r)&&(s=e=>((e,t,r)=>_(void 0,null,(function*(){let i=yield((e,t,r)=>_(void 0,null,(function*(){let i=yield Promise.resolve().then(n.bind(n,67164)),o=yield Promise.resolve().then(n.bind(n,63391)),s=new i.AppInsightsCore,a=new o.PostChannel,c={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[a]]};if(r){c.extensionConfig={};let e={alwaysUseXhrOverride:!0,httpXHROverride:r};c.extensionConfig[a.identifier]=e}let l=t.workspace.getConfiguration("telemetry").get("internalTesting");return s.initialize(c,[]),s.addTelemetryInitializer((e=>{var t,n;!l||(e.ext=null!=(t=e.ext)?t:{},e.ext.utc=null!=(n=e.ext.utc)?n:{},e.ext.utc.flags=8462029)})),s})))(e,t,r);return{logEvent:(e,t)=>{try{null==i||i.track({name:e,baseData:{name:e,properties:null==t?void 0:t.properties,measurements:null==t?void 0:t.measurements}})}catch(e){throw new Error("Failed to log event to app insights!\n"+e.message)}},logException:(e,t)=>{throw new Error("1DS SDK does not support logging exceptions, please use logEvent for exception tracking")},flush:()=>_(void 0,null,(function*(){try{null==i||i.unload()}catch(e){throw new Error("Failed to flush app insights!\n"+e.message)}}))}})))(e,g));let a=new class{constructor(e,t){this._instantiationStatus=0,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=t,this._key=e}logEvent(e,t){this._telemetryClient?this._telemetryClient.logEvent(e,t):2!==this._instantiationStatus&&this._eventQueue.push({eventName:e,data:t})}logException(e,t){this._telemetryClient?this._telemetryClient.logException(e,t):2!==this._instantiationStatus&&this._exceptionQueue.push({exception:e,data:t})}flush(){return _(this,null,(function*(){this._telemetryClient&&(yield this._telemetryClient.flush(),this._telemetryClient=void 0)}))}_flushQueues(){this._eventQueue.forEach((({eventName:e,data:t})=>this.logEvent(e,t))),this._eventQueue=[],this._exceptionQueue.forEach((({exception:e,data:t})=>this.logException(e,t))),this._exceptionQueue=[]}instantiateAppender(){0===this._instantiationStatus&&(this._instantiationStatus=1,this._clientFactory(this._key).then((e=>{this._telemetryClient=e,this._instantiationStatus=2,this._flushQueues()})).catch((e=>{console.error(e),this._instantiationStatus=2})))}}(r,s);r&&(0===r.indexOf("AIF-")||Oc.shouldUseOneDataSystemSDK(r))&&(i=!0),super(e,t,a,{release:navigator.appVersion,platform:"web",architecture:"web"},g,i)}}},14277:e=>{"use strict";e.exports=({onlyFirst:e=!1}={})=>{const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}},9669:(e,t,n)=>{e.exports=n(51609)},55448:(e,t,n)=>{"use strict";var r=n(64867),i=n(36026),o=n(4372),s=n(15327),a=n(94097),c=n(84109),l=n(67985),u=n(85061),d=n(45655),p=n(65263);e.exports=function(e){return new Promise((function(t,n){var h,f=e.data,g=e.headers,m=e.responseType;function y(){e.cancelToken&&e.cancelToken.unsubscribe(h),e.signal&&e.signal.removeEventListener("abort",h)}r.isFormData(f)&&delete g["Content-Type"];var v=new XMLHttpRequest;if(e.auth){var b=e.auth.username||"",w=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";g.Authorization="Basic "+btoa(b+":"+w)}var C=a(e.baseURL,e.url);function S(){if(v){var r="getAllResponseHeaders"in v?c(v.getAllResponseHeaders()):null,o={data:m&&"text"!==m&&"json"!==m?v.response:v.responseText,status:v.status,statusText:v.statusText,headers:r,config:e,request:v};i((function(e){t(e),y()}),(function(e){n(e),y()}),o),v=null}}if(v.open(e.method.toUpperCase(),s(C,e.params,e.paramsSerializer),!0),v.timeout=e.timeout,"onloadend"in v?v.onloadend=S:v.onreadystatechange=function(){v&&4===v.readyState&&(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(S)},v.onabort=function(){v&&(n(u("Request aborted",e,"ECONNABORTED",v)),v=null)},v.onerror=function(){n(u("Network Error",e,null,v)),v=null},v.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||d.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(u(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",v)),v=null},r.isStandardBrowserEnv()){var _=(e.withCredentials||l(C))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;_&&(g[e.xsrfHeaderName]=_)}"setRequestHeader"in v&&r.forEach(g,(function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete g[t]:v.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(v.withCredentials=!!e.withCredentials),m&&"json"!==m&&(v.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&v.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&v.upload&&v.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(h=function(e){v&&(n(!e||e&&e.type?new p("canceled"):e),v.abort(),v=null)},e.cancelToken&&e.cancelToken.subscribe(h),e.signal&&(e.signal.aborted?h():e.signal.addEventListener("abort",h))),f||(f=null),v.send(f)}))}},51609:(e,t,n)=>{"use strict";var r=n(64867),i=n(91849),o=n(30321),s=n(47185),a=function e(t){var n=new o(t),a=i(o.prototype.request,n);return r.extend(a,o.prototype,n),r.extend(a,n),a.create=function(n){return e(s(t,n))},a}(n(45655));a.Axios=o,a.Cancel=n(65263),a.CancelToken=n(14972),a.isCancel=n(26502),a.VERSION=n(97288).version,a.all=function(e){return Promise.all(e)},a.spread=n(8713),a.isAxiosError=n(16268),e.exports=a,e.exports.default=a},65263:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},14972:(e,t,n)=>{"use strict";var r=n(65263);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},26502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},30321:(e,t,n)=>{"use strict";var r=n(64867),i=n(15327),o=n(80782),s=n(13572),a=n(47185),c=n(54875),l=c.validators;function u(e){this.defaults=e,this.interceptors={request:new o,response:new o}}u.prototype.request=function(e,t){if("string"==typeof e?(t=t||{}).url=e:t=e||{},!t.url)throw new Error("Provided config url is not valid");(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var o,u=[];if(this.interceptors.response.forEach((function(e){u.push(e.fulfilled,e.rejected)})),!i){var d=[s,void 0];for(Array.prototype.unshift.apply(d,r),d=d.concat(u),o=Promise.resolve(t);d.length;)o=o.then(d.shift(),d.shift());return o}for(var p=t;r.length;){var h=r.shift(),f=r.shift();try{p=h(p)}catch(e){f(e);break}}try{o=s(p)}catch(e){return Promise.reject(e)}for(;u.length;)o=o.then(u.shift(),u.shift());return o},u.prototype.getUri=function(e){if(!e.url)throw new Error("Provided config url is not valid");return e=a(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,n,r){return this.request(a(r||{},{method:e,url:t,data:n}))}})),e.exports=u},80782:(e,t,n)=>{"use strict";var r=n(64867);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},94097:(e,t,n)=>{"use strict";var r=n(91793),i=n(7303);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},85061:(e,t,n)=>{"use strict";var r=n(80481);e.exports=function(e,t,n,i,o){var s=new Error(e);return r(s,t,n,i,o)}},13572:(e,t,n)=>{"use strict";var r=n(64867),i=n(18527),o=n(26502),s=n(45655),a=n(65263);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a("canceled")}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return c(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(c(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},80481:e=>{"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},47185:(e,t,n)=>{"use strict";var r=n(64867);e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function o(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function s(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function c(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=l[e]||o,i=t(e);r.isUndefined(i)&&t!==c||(n[e]=i)})),n}},36026:(e,t,n)=>{"use strict";var r=n(85061);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},18527:(e,t,n)=>{"use strict";var r=n(64867),i=n(45655);e.exports=function(e,t,n){var o=this||i;return r.forEach(n,(function(n){e=n.call(o,e,t)})),e}},45655:(e,t,n)=>{"use strict";var r=n(34155),i=n(64867),o=n(16016),s=n(80481),a={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l,u={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"[object process]"===Object.prototype.toString.call(r))&&(l=n(55448)),l),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)||t&&"application/json"===t["Content-Type"]?(c(t,"application/json"),function(e,t,n){if(i.isString(e))try{return(0,JSON.parse)(e),i.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||u.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||r&&i.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw s(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){u.headers[e]=i.merge(a)})),e.exports=u},97288:e=>{e.exports={version:"0.25.0"}},91849:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},15327:(e,t,n)=>{"use strict";var r=n(64867);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))})))})),o=s.join("&")}if(o){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},7303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4372:(e,t,n)=>{"use strict";var r=n(64867);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},91793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},16268:(e,t,n)=>{"use strict";var r=n(64867);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},67985:(e,t,n)=>{"use strict";var r=n(64867);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},16016:(e,t,n)=>{"use strict";var r=n(64867);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},84109:(e,t,n)=>{"use strict";var r=n(64867),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,s={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},8713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},54875:(e,t,n)=>{"use strict";var r=n(97288).version,i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw new Error(i(r," has been removed"+(t?" in "+t:"")));return t&&!o[r]&&(o[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],s=t[o];if(s){var a=e[o],c=void 0===a||s(a,o,e);if(!0!==c)throw new TypeError("option "+o+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:i}},64867:(e,t,n)=>{"use strict";var r=n(91849),i=Object.prototype.toString;function o(e){return Array.isArray(e)}function s(e){return void 0===e}function a(e){return"[object ArrayBuffer]"===i.call(e)}function c(e){return null!==e&&"object"==typeof e}function l(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===i.call(e)}function d(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:a,isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===i.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&a(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:c,isPlainObject:l,isUndefined:s,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:u,isStream:function(e){return c(e)&&u(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===i.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:d,merge:function e(){var t={};function n(n,r){l(t[r])&&l(n)?t[r]=e(t[r],n):l(n)?t[r]=e({},n):o(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)d(arguments[r],n);return t},extend:function(e,t,n){return d(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},79742:(e,t)=>{"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=c(e),s=o[0],a=o[1],l=new i(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),u=0,d=a>0?s-4:s;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===a&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[u++]=255&t),1===a&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],s=16383,a=0,c=r-i;a<c;a+=s)o.push(l(e,a,a+s>c?c:a+s));return 1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)n[s]=o[s],r[o.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,r){for(var i,o,s=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},48764:(e,t,n)=>{"use strict";var r=n(79742),i=n(80645),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50;var s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return l(e,t,n)}function l(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|g(e,t),r=a(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(W(e,Uint8Array)){var t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return p(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(W(e,ArrayBuffer)||e&&W(e.buffer,ArrayBuffer))return h(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(W(e,SharedArrayBuffer)||e&&W(e.buffer,SharedArrayBuffer)))return h(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return c.from(r,t,n);var i=function(e){if(c.isBuffer(e)){var t=0|f(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||V(e.length)?a(0):p(e):"Buffer"===e.type&&Array.isArray(e.data)?p(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return u(e),a(e<0?0:0|f(e))}function p(e){for(var t=e.length<0?0:0|f(e.length),n=a(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function h(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,c.prototype),r}function f(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function g(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||W(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(e).length;default:if(i)return r?-1:F(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return x(this,t,n);case"utf8":case"utf-8":return I(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return D(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),V(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,i){var o,s=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var u=-1;for(o=n;o<a;o++)if(l(e,o)===l(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===c)return u*s}else-1!==u&&(o-=o-u),u=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){for(var d=!0,p=0;p<c;p++)if(l(e,o+p)!==l(t,p)){d=!1;break}if(d)return o}return-1}function w(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(V(a))return s;e[n+s]=a}return s}function C(e,t,n,r){return K(F(t,e.length-n),e,n,r)}function S(e,t,n,r){return K(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function _(e,t,n,r){return K(U(t),e,n,r)}function k(e,t,n,r){return K(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function P(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function I(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,c,l=e[i],u=null,d=l>239?4:l>223?3:l>191?2:1;if(i+d<=n)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&l)<<6|63&o)>127&&(u=c);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(c=(15&l)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(c=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(u=c)}null===u?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=d}return function(e){var t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=E));return n}(r)}t.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)}(e,t,n)},c.allocUnsafe=function(e){return d(e)},c.allocUnsafeSlow=function(e){return d(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(W(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),W(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(W(o,Uint8Array))i+o.length>r.length?c.from(o).copy(r,i):Uint8Array.prototype.set.call(r,o,i);else{if(!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},c.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?I(this,0,e):m.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(e,t,n,r,i){if(W(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),l=this.slice(r,i),u=e.slice(t,n),d=0;d<a;++d)if(l[d]!==u[d]){o=l[d],s=u[d];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return C(this,e,t,n);case"ascii":case"latin1":case"binary":return S(this,e,t,n);case"base64":return _(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function D(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function x(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=H[e[o]];return i}function R(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function j(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function M(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function O(e,t,n,r,o){return t=+t,n>>>=0,o||M(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function A(e,t,n,r,o){return t=+t,n>>>=0,o||M(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||j(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||j(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||j(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||j(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||j(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return e>>>=0,t||j(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||j(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){e>>>=0,t||j(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||j(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||j(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return e>>>=0,t||j(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||j(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||j(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||j(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||N(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||N(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);N(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);N(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeFloatLE=function(e,t,n){return O(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return O(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return A(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return A(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=c.isBuffer(e)?e:c.from(e,r),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var L=/[^+/0-9A-Za-z-_]/g;function F(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function U(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(L,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function K(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function W(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function V(e){return e!=e}var H=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}()},54098:function(e,t){var n="undefined"!=typeof self?self:this,r=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in e,s="ArrayBuffer"in e;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function l(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function u(e){return"string"!=typeof e&&(e=String(e)),e}function d(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function h(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function g(e){var t=new FileReader,n=f(t);return t.readAsArrayBuffer(e),n}function m(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&i&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=m(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=m(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e,t,n,r=h(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=f(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=l(e),t=u(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},p.prototype.delete=function(e){delete this.map[l(e)]},p.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},p.prototype.set=function(e,t){this.map[l(e)]=u(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),d(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),d(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),d(e)},r&&(p.prototype[Symbol.iterator]=p.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(e,t){var n,r,i=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),v.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function C(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},y.call(b.prototype),y.call(C.prototype),C.prototype.clone=function(){return new C(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},C.error=function(){var e=new C(null,{status:0,statusText:""});return e.type="error",e};var S=[301,302,303,307,308];C.redirect=function(e,t){if(-1===S.indexOf(t))throw new RangeError("Invalid status code");return new C(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function _(e,n){return new Promise((function(r,o){var s=new b(e,n);if(s.signal&&s.signal.aborted)return o(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var e,t,n={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;r(new C(i,n))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.onabort=function(){o(new t.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),s.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),s.signal&&(s.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",c)}),a.send(void 0===s._bodyInit?null:s._bodyInit)}))}_.polyfill=!0,e.fetch||(e.fetch=_,e.Headers=p,e.Request=b,e.Response=C),t.Headers=p,t.Request=b,t.Response=C,t.fetch=_,Object.defineProperty(t,"__esModule",{value:!0})}({})}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t},66518:e=>{"use strict";e.exports=function(e){var t=void 0;t="string"==typeof e?[e]:e.raw;for(var n="",r=0;r<t.length;r++)n+=t[r].replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`"),r<(arguments.length<=1?0:arguments.length-1)&&(n+=arguments.length<=r+1?void 0:arguments[r+1]);var i=n.split("\n"),o=null;return i.forEach((function(e){var t=e.match(/^(\s+)\S+/);if(t){var n=t[1].length;o=o?Math.min(o,n):n}})),null!==o&&(n=i.map((function(e){return" "===e[0]?e.slice(o):e})).join("\n")),(n=n.trim()).replace(/\\n/g,"\n")}},17187:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var i,o,s,l;if(a(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=c(e))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=u.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):f(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function g(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var l=c.length,u=f(c,l);for(n=0;n<l;++n)r(u[n],this,t)}return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,s;if(a(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},64063:e=>{"use strict";var t=Array.isArray,n=Object.keys,r=Object.prototype.hasOwnProperty;e.exports=function e(i,o){if(i===o)return!0;if(i&&o&&"object"==typeof i&&"object"==typeof o){var s,a,c,l=t(i),u=t(o);if(l&&u){if((a=i.length)!=o.length)return!1;for(s=a;0!=s--;)if(!e(i[s],o[s]))return!1;return!0}if(l!=u)return!1;var d=i instanceof Date,p=o instanceof Date;if(d!=p)return!1;if(d&&p)return i.getTime()==o.getTime();var h=i instanceof RegExp,f=o instanceof RegExp;if(h!=f)return!1;if(h&&f)return i.toString()==o.toString();var g=n(i);if((a=g.length)!==n(o).length)return!1;for(s=a;0!=s--;)if(!r.call(o,g[s]))return!1;for(s=a;0!=s--;)if(!e(i[c=g[s]],o[c]))return!1;return!0}return i!=i&&o!=o}},35960:e=>{e.exports=function(e){var t=/(%?)(%([jds]))/g,n=Array.prototype.slice.call(arguments,1);return n.length&&(e=e.replace(t,(function(e,t,r,i){var o=n.shift();switch(i){case"s":o=""+o;break;case"d":o=Number(o);break;case"j":o=JSON.stringify(o)}return t?(n.unshift(o),e):o}))),n.length&&(e+=" "+n.join(" ")),""+e.replace(/%{2,2}/g,"%")}},80645:(e,t)=>{t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?i-1:0,p=n?-1:1,h=e[t+d];for(d+=p,o=h&(1<<-u)-1,h>>=-u,u+=a;u>0;o=256*o+e[t+d],d+=p,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+e[t+d],d+=p,u-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),o-=l}return(h?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,c,l=8*o-i-1,u=(1<<l)-1,d=u>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,f=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?p/c:p*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(t*c-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[n+h]=255&a,h+=f,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;e[n+h]=255&s,h+=f,s/=256,l-=8);e[n+h-f]|=128*g}},99934:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tagProperty=t.tagParameter=t.decorate=void 0;var r=n(16674),i=n(6867);function o(e,t,n,i,o){var s={},a="number"==typeof o,c=void 0!==o&&a?o.toString():n;if(a&&void 0!==n)throw new Error(r.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(e,t)&&(s=Reflect.getMetadata(e,t));var l=s[c];if(Array.isArray(l))for(var u=0,d=l;u<d.length;u++){var p=d[u];if(p.key===i.key)throw new Error(r.DUPLICATED_METADATA+" "+p.key.toString())}else l=[];l.push(i),s[c]=l,Reflect.defineMetadata(e,s,t)}function s(e,t){Reflect.decorate(e,t)}function a(e,t){return function(n,r){t(n,r,e)}}t.tagParameter=function(e,t,n,r){o(i.TAGGED,e,t,r,n)},t.tagProperty=function(e,t,n){o(i.TAGGED_PROP,e.constructor,t,n)},t.decorate=function(e,t,n){"number"==typeof n?s([a(n,e)],t):"string"==typeof n?Reflect.decorate([e],t,n):s([e],t)}},5744:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inject=t.LazyServiceIdentifer=void 0;var r=n(16674),i=n(6867),o=n(47738),s=n(99934),a=function(){function e(e){this._cb=e}return e.prototype.unwrap=function(){return this._cb()},e}();t.LazyServiceIdentifer=a,t.inject=function(e){return function(t,n,a){if(void 0===e)throw new Error(r.UNDEFINED_INJECT_ANNOTATION(t.name));var c=new o.Metadata(i.INJECT_TAG,e);"number"==typeof a?s.tagParameter(t,n,a,c):s.tagProperty(t,n,c)}}},64315:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectable=void 0;var r=n(16674),i=n(6867);t.injectable=function(){return function(e){if(Reflect.hasOwnMetadata(i.PARAM_TYPES,e))throw new Error(r.DUPLICATED_INJECTABLE_DECORATOR);var t=Reflect.getMetadata(i.DESIGN_PARAM_TYPES,e)||[];return Reflect.defineMetadata(i.PARAM_TYPES,t,e),e}}},71693:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiInject=void 0;var r=n(6867),i=n(47738),o=n(99934);t.multiInject=function(e){return function(t,n,s){var a=new i.Metadata(r.MULTI_INJECT_TAG,e);"number"==typeof s?o.tagParameter(t,n,s,a):o.tagProperty(t,n,a)}}},38085:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.named=void 0;var r=n(6867),i=n(47738),o=n(99934);t.named=function(e){return function(t,n,s){var a=new i.Metadata(r.NAMED_TAG,e);"number"==typeof s?o.tagParameter(t,n,s,a):o.tagProperty(t,n,a)}}},6515:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.optional=void 0;var r=n(6867),i=n(47738),o=n(99934);t.optional=function(){return function(e,t,n){var s=new i.Metadata(r.OPTIONAL_TAG,!0);"number"==typeof n?o.tagParameter(e,t,n,s):o.tagProperty(e,t,s)}}},7014:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.postConstruct=void 0;var r=n(16674),i=n(6867),o=n(47738);t.postConstruct=function(){return function(e,t,n){var s=new o.Metadata(i.POST_CONSTRUCT,t);if(Reflect.hasOwnMetadata(i.POST_CONSTRUCT,e.constructor))throw new Error(r.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(i.POST_CONSTRUCT,s,e.constructor)}}},32052:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tagged=void 0;var r=n(47738),i=n(99934);t.tagged=function(e,t){return function(n,o,s){var a=new r.Metadata(e,t);"number"==typeof s?i.tagParameter(n,o,s,a):i.tagProperty(n,o,a)}}},55638:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.targetName=void 0;var r=n(6867),i=n(47738),o=n(99934);t.targetName=function(e){return function(t,n,s){var a=new i.Metadata(r.NAME_TAG,e);o.tagParameter(t,n,s,a)}}},86757:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unmanaged=void 0;var r=n(6867),i=n(47738),o=n(99934);t.unmanaged=function(){return function(e,t,n){var s=new i.Metadata(r.UNMANAGED_TAG,!0);o.tagParameter(e,t,n,s)}}},44290:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Binding=void 0;var r=n(28421),i=n(37791),o=function(){function e(e,t){this.id=i.id(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=r.BindingTypeEnum.Invalid,this.constraint=function(e){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=t.scope===r.BindingScopeEnum.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},e}();t.Binding=o},23184:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingCount=void 0,t.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},16674:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STACK_OVERFLOW=t.CIRCULAR_DEPENDENCY_IN_FACTORY=t.POST_CONSTRUCT_ERROR=t.MULTIPLE_POST_CONSTRUCT_METHODS=t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=t.ARGUMENTS_LENGTH_MISMATCH=t.INVALID_DECORATOR_OPERATION=t.INVALID_TO_SELF_VALUE=t.INVALID_FUNCTION_BINDING=t.INVALID_MIDDLEWARE_RETURN=t.NO_MORE_SNAPSHOTS_AVAILABLE=t.INVALID_BINDING_TYPE=t.NOT_IMPLEMENTED=t.CIRCULAR_DEPENDENCY=t.UNDEFINED_INJECT_ANNOTATION=t.MISSING_INJECT_ANNOTATION=t.MISSING_INJECTABLE_ANNOTATION=t.NOT_REGISTERED=t.CANNOT_UNBIND=t.AMBIGUOUS_MATCH=t.KEY_NOT_FOUND=t.NULL_ARGUMENT=t.DUPLICATED_METADATA=t.DUPLICATED_INJECTABLE_DECORATOR=void 0,t.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",t.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",t.NULL_ARGUMENT="NULL argument",t.KEY_NOT_FOUND="Key Not Found",t.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",t.CANNOT_UNBIND="Could not unbind serviceIdentifier:",t.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",t.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",t.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",t.UNDEFINED_INJECT_ANNOTATION=function(e){return"@inject called with undefined this could mean that the class "+e+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},t.CIRCULAR_DEPENDENCY="Circular dependency found:",t.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",t.INVALID_BINDING_TYPE="Invalid binding type:",t.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",t.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",t.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",t.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",t.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",t.ARGUMENTS_LENGTH_MISMATCH=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+e[0]+" must be >= than the number of constructor arguments of its base class."},t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",t.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",t.POST_CONSTRUCT_ERROR=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"@postConstruct error in class "+e[0]+": "+e[1]},t.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"It looks like there is a circular dependency in one of the '"+e[0]+"' bindings. Please investigate bindings withservice identifier '"+e[1]+"'."},t.STACK_OVERFLOW="Maximum call stack size exceeded"},28421:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TargetTypeEnum=t.BindingTypeEnum=t.BindingScopeEnum=void 0,t.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"},t.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},t.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},6867:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NON_CUSTOM_TAG_KEYS=t.POST_CONSTRUCT=t.DESIGN_PARAM_TYPES=t.PARAM_TYPES=t.TAGGED_PROP=t.TAGGED=t.MULTI_INJECT_TAG=t.INJECT_TAG=t.OPTIONAL_TAG=t.UNMANAGED_TAG=t.NAME_TAG=t.NAMED_TAG=void 0,t.NAMED_TAG="named",t.NAME_TAG="name",t.UNMANAGED_TAG="unmanaged",t.OPTIONAL_TAG="optional",t.INJECT_TAG="inject",t.MULTI_INJECT_TAG="multi_inject",t.TAGGED="inversify:tagged",t.TAGGED_PROP="inversify:tagged_props",t.PARAM_TYPES="inversify:paramtypes",t.DESIGN_PARAM_TYPES="design:paramtypes",t.POST_CONSTRUCT="post_construct",t.NON_CUSTOM_TAG_KEYS=[t.INJECT_TAG,t.MULTI_INJECT_TAG,t.NAME_TAG,t.UNMANAGED_TAG,t.NAMED_TAG,t.OPTIONAL_TAG]},51389:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.Container=void 0;var s=n(44290),a=n(16674),c=n(28421),l=n(6867),u=n(51377),d=n(86311),p=n(31927),h=n(51860),f=n(37791),g=n(55800),m=n(85700),y=n(80175),v=function(){function e(e){this._appliedMiddleware=[];var t=e||{};if("object"!=typeof t)throw new Error(""+a.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===t.defaultScope)t.defaultScope=c.BindingScopeEnum.Transient;else if(t.defaultScope!==c.BindingScopeEnum.Singleton&&t.defaultScope!==c.BindingScopeEnum.Transient&&t.defaultScope!==c.BindingScopeEnum.Request)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=f.id(),this._bindingDictionary=new y.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new u.MetadataReader}return e.merge=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var s=new e,a=o([t,n],r).map((function(e){return d.getBindingDictionary(e)})),c=d.getBindingDictionary(s);function l(e,t){e.traverse((function(e,n){n.forEach((function(e){t.add(e.serviceIdentifier,e.clone())}))}))}return a.forEach((function(e){l(e,c)})),s},e.prototype.load=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=e;r<i.length;r++){var o=i[r],s=n(o.id);o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)}},e.prototype.loadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(this,void 0,void 0,(function(){var t,n,r,o,s;return i(this,(function(i){switch(i.label){case 0:t=this._getContainerModuleHelpersFactory(),n=0,r=e,i.label=1;case 1:return n<r.length?(o=r[n],s=t(o.id),[4,o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.unload=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(e){return function(t){return t.moduleId===e}};t.forEach((function(t){var n=r(t.id);e._bindingDictionary.removeByCondition(n)}))},e.prototype.bind=function(e){var t=this.options.defaultScope||c.BindingScopeEnum.Transient,n=new s.Binding(e,t);return this._bindingDictionary.add(e,n),new h.BindingToSyntax(n)},e.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},e.prototype.unbind=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error(a.CANNOT_UNBIND+" "+g.getServiceIdentifierAsString(e))}},e.prototype.unbindAll=function(){this._bindingDictionary=new y.Lookup},e.prototype.isBound=function(e){var t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t},e.prototype.isBoundNamed=function(e,t){return this.isBoundTagged(e,l.NAMED_TAG,t)},e.prototype.isBoundTagged=function(e,t,n){var r=!1;if(this._bindingDictionary.hasKey(e)){var i=this._bindingDictionary.get(e),o=d.createMockRequest(this,e,t,n);r=i.some((function(e){return e.constraint(o)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(e,t,n)),r},e.prototype.snapshot=function(){this._snapshots.push(m.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},e.prototype.restore=function(){var e=this._snapshots.pop();if(void 0===e)throw new Error(a.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=e.bindings,this._middleware=e.middleware},e.prototype.createChild=function(t){var n=new e(t||this.options);return n.parent=this,n},e.prototype.applyMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._appliedMiddleware=this._appliedMiddleware.concat(e);var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce((function(e,t){return t(e)}),n)},e.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},e.prototype.get=function(e){return this._get(!1,!1,c.TargetTypeEnum.Variable,e)},e.prototype.getTagged=function(e,t,n){return this._get(!1,!1,c.TargetTypeEnum.Variable,e,t,n)},e.prototype.getNamed=function(e,t){return this.getTagged(e,l.NAMED_TAG,t)},e.prototype.getAll=function(e){return this._get(!0,!0,c.TargetTypeEnum.Variable,e)},e.prototype.getAllTagged=function(e,t,n){return this._get(!1,!0,c.TargetTypeEnum.Variable,e,t,n)},e.prototype.getAllNamed=function(e,t){return this.getAllTagged(e,l.NAMED_TAG,t)},e.prototype.resolve=function(e){var t=this.createChild();return t.bind(e).toSelf(),this._appliedMiddleware.forEach((function(e){t.applyMiddleware(e)})),t.get(e)},e.prototype._getContainerModuleHelpersFactory=function(){var e=this,t=function(e,t){e._binding.moduleId=t},n=function(n){return function(r){var i=e.rebind.bind(e)(r);return t(i,n),i}};return function(r){return{bindFunction:(i=r,function(n){var r=e.bind.bind(e)(n);return t(r,i),r}),isboundFunction:function(t){return e.isBound.bind(e)(t)},rebindFunction:n(r),unbindFunction:function(t){e.unbind.bind(e)(t)}};var i}},e.prototype._get=function(e,t,n,r,i,o){var s=null,c={avoidConstraints:e,contextInterceptor:function(e){return e},isMultiInject:t,key:i,serviceIdentifier:r,targetType:n,value:o};if(this._middleware){if(null==(s=this._middleware(c)))throw new Error(a.INVALID_MIDDLEWARE_RETURN)}else s=this._planAndResolve()(c);return s},e.prototype._planAndResolve=function(){var e=this;return function(t){var n=d.plan(e._metadataReader,e,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints);return n=t.contextInterceptor(n),p.resolve(n)}},e}();t.Container=v},33244:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncContainerModule=t.ContainerModule=void 0;var r=n(37791);t.ContainerModule=function(e){this.id=r.id(),this.registry=e};t.AsyncContainerModule=function(e){this.id=r.id(),this.registry=e}},85700:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerSnapshot=void 0;var n=function(){function e(){}return e.of=function(t,n){var r=new e;return r.bindings=t,r.middleware=n,r},e}();t.ContainerSnapshot=n},80175:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lookup=void 0;var r=n(16674),i=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(e,t){if(null==e)throw new Error(r.NULL_ARGUMENT);if(null==t)throw new Error(r.NULL_ARGUMENT);var n=this._map.get(e);void 0!==n?(n.push(t),this._map.set(e,n)):this._map.set(e,[t])},e.prototype.get=function(e){if(null==e)throw new Error(r.NULL_ARGUMENT);var t=this._map.get(e);if(void 0!==t)return t;throw new Error(r.KEY_NOT_FOUND)},e.prototype.remove=function(e){if(null==e)throw new Error(r.NULL_ARGUMENT);if(!this._map.delete(e))throw new Error(r.KEY_NOT_FOUND)},e.prototype.removeByCondition=function(e){var t=this;this._map.forEach((function(n,r){var i=n.filter((function(t){return!e(t)}));i.length>0?t._map.set(r,i):t._map.delete(r)}))},e.prototype.hasKey=function(e){if(null==e)throw new Error(r.NULL_ARGUMENT);return this._map.has(e)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){e.forEach((function(e){return t.add(n,e.clone())}))})),t},e.prototype.traverse=function(e){this._map.forEach((function(t,n){e(n,t)}))},e}();t.Lookup=i},86700:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiBindToService=t.getServiceIdentifierAsString=t.typeConstraint=t.namedConstraint=t.taggedConstraint=t.traverseAncerstors=t.decorate=t.id=t.MetadataReader=t.postConstruct=t.targetName=t.multiInject=t.unmanaged=t.optional=t.LazyServiceIdentifer=t.inject=t.named=t.tagged=t.injectable=t.ContainerModule=t.AsyncContainerModule=t.TargetTypeEnum=t.BindingTypeEnum=t.BindingScopeEnum=t.Container=t.METADATA_KEY=void 0;var r=n(6867);t.METADATA_KEY=r;var i=n(51389);Object.defineProperty(t,"Container",{enumerable:!0,get:function(){return i.Container}});var o=n(28421);Object.defineProperty(t,"BindingScopeEnum",{enumerable:!0,get:function(){return o.BindingScopeEnum}}),Object.defineProperty(t,"BindingTypeEnum",{enumerable:!0,get:function(){return o.BindingTypeEnum}}),Object.defineProperty(t,"TargetTypeEnum",{enumerable:!0,get:function(){return o.TargetTypeEnum}});var s=n(33244);Object.defineProperty(t,"AsyncContainerModule",{enumerable:!0,get:function(){return s.AsyncContainerModule}}),Object.defineProperty(t,"ContainerModule",{enumerable:!0,get:function(){return s.ContainerModule}});var a=n(64315);Object.defineProperty(t,"injectable",{enumerable:!0,get:function(){return a.injectable}});var c=n(32052);Object.defineProperty(t,"tagged",{enumerable:!0,get:function(){return c.tagged}});var l=n(38085);Object.defineProperty(t,"named",{enumerable:!0,get:function(){return l.named}});var u=n(5744);Object.defineProperty(t,"inject",{enumerable:!0,get:function(){return u.inject}}),Object.defineProperty(t,"LazyServiceIdentifer",{enumerable:!0,get:function(){return u.LazyServiceIdentifer}});var d=n(6515);Object.defineProperty(t,"optional",{enumerable:!0,get:function(){return d.optional}});var p=n(86757);Object.defineProperty(t,"unmanaged",{enumerable:!0,get:function(){return p.unmanaged}});var h=n(71693);Object.defineProperty(t,"multiInject",{enumerable:!0,get:function(){return h.multiInject}});var f=n(55638);Object.defineProperty(t,"targetName",{enumerable:!0,get:function(){return f.targetName}});var g=n(7014);Object.defineProperty(t,"postConstruct",{enumerable:!0,get:function(){return g.postConstruct}});var m=n(51377);Object.defineProperty(t,"MetadataReader",{enumerable:!0,get:function(){return m.MetadataReader}});var y=n(37791);Object.defineProperty(t,"id",{enumerable:!0,get:function(){return y.id}});var v=n(99934);Object.defineProperty(t,"decorate",{enumerable:!0,get:function(){return v.decorate}});var b=n(80758);Object.defineProperty(t,"traverseAncerstors",{enumerable:!0,get:function(){return b.traverseAncerstors}}),Object.defineProperty(t,"taggedConstraint",{enumerable:!0,get:function(){return b.taggedConstraint}}),Object.defineProperty(t,"namedConstraint",{enumerable:!0,get:function(){return b.namedConstraint}}),Object.defineProperty(t,"typeConstraint",{enumerable:!0,get:function(){return b.typeConstraint}});var w=n(55800);Object.defineProperty(t,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return w.getServiceIdentifierAsString}});var C=n(70600);Object.defineProperty(t,"multiBindToService",{enumerable:!0,get:function(){return C.multiBindToService}})},95228:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Context=void 0;var r=n(37791),i=function(){function e(e){this.id=r.id(),this.container=e}return e.prototype.addPlan=function(e){this.plan=e},e.prototype.setCurrentRequest=function(e){this.currentRequest=e},e}();t.Context=i},47738:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var r=n(6867),i=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.toString=function(){return this.key===r.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},e}();t.Metadata=i},51377:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataReader=void 0;var r=n(6867),i=function(){function e(){}return e.prototype.getConstructorMetadata=function(e){return{compilerGeneratedMetadata:Reflect.getMetadata(r.PARAM_TYPES,e),userGeneratedMetadata:Reflect.getMetadata(r.TAGGED,e)||{}}},e.prototype.getPropertiesMetadata=function(e){return Reflect.getMetadata(r.TAGGED_PROP,e)||[]},e}();t.MetadataReader=i},55314:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Plan=void 0;t.Plan=function(e,t){this.parentContext=e,this.rootRequest=t}},86311:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBindingDictionary=t.createMockRequest=t.plan=void 0;var r=n(23184),i=n(16674),o=n(28421),s=n(6867),a=n(85265),c=n(55800),l=n(95228),u=n(47738),d=n(55314),p=n(6e3),h=n(6748),f=n(18924);function g(e){return e._bindingDictionary}function m(e,t,n,o,s){var a,l=v(n.container,s.serviceIdentifier);return l.length===r.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof s.serviceIdentifier&&e.getConstructorMetadata(s.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(s.serviceIdentifier).toSelf(),l=v(n.container,s.serviceIdentifier)),a=t?l:l.filter((function(e){var t=new h.Request(e.serviceIdentifier,n,o,e,s);return e.constraint(t)})),function(e,t,n,o){switch(t.length){case r.BindingCount.NoBindingsAvailable:if(n.isOptional())return t;var s=c.getServiceIdentifierAsString(e),a=i.NOT_REGISTERED;throw a+=c.listMetadataForTarget(s,n),a+=c.listRegisteredBindingsForServiceIdentifier(o,s,v),new Error(a);case r.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return t;case r.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return t;throw s=c.getServiceIdentifierAsString(e),a=i.AMBIGUOUS_MATCH+" "+s,a+=c.listRegisteredBindingsForServiceIdentifier(o,s,v),new Error(a)}}(s.serviceIdentifier,a,s,n.container),a}function y(e,t,n,r,s,a){var c,l;if(null===s){c=m(e,t,r,null,a),l=new h.Request(n,r,null,c,a);var u=new d.Plan(r,l);r.addPlan(u)}else c=m(e,t,r,s,a),l=s.addChildRequest(a.serviceIdentifier,c,a);c.forEach((function(t){var n=null;if(a.isArray())n=l.addChildRequest(t.serviceIdentifier,t,a);else{if(t.cache)return;n=l}if(t.type===o.BindingTypeEnum.Instance&&null!==t.implementationType){var s=p.getDependencies(e,t.implementationType);if(!r.container.options.skipBaseClassChecks){var c=p.getBaseClassDependencyCount(e,t.implementationType);if(s.length<c){var u=i.ARGUMENTS_LENGTH_MISMATCH(p.getFunctionName(t.implementationType));throw new Error(u)}}s.forEach((function(t){y(e,!1,t.serviceIdentifier,r,n,t)}))}}))}function v(e,t){var n=[],r=g(e);return r.hasKey(t)?n=r.get(t):null!==e.parent&&(n=v(e.parent,t)),n}t.getBindingDictionary=g,t.plan=function(e,t,n,r,i,o,d,p){void 0===p&&(p=!1);var h=new l.Context(t),g=function(e,t,n,r,i,o){var a=e?s.MULTI_INJECT_TAG:s.INJECT_TAG,c=new u.Metadata(a,n),l=new f.Target(t,"",n,c);if(void 0!==i){var d=new u.Metadata(i,o);l.metadata.push(d)}return l}(n,r,i,0,o,d);try{return y(e,p,i,h,null,g),h}catch(e){throw a.isStackOverflowExeption(e)&&h.plan&&c.circularDependencyToException(h.plan.rootRequest),e}},t.createMockRequest=function(e,t,n,r){var i=new f.Target(o.TargetTypeEnum.Variable,"",t,new u.Metadata(n,r)),s=new l.Context(e);return new h.Request(t,s,null,[],i)}},88460:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryableString=void 0;var n=function(){function e(e){this.str=e}return e.prototype.startsWith=function(e){return 0===this.str.indexOf(e)},e.prototype.endsWith=function(e){var t,n=e.split("").reverse().join("");return t=this.str.split("").reverse().join(""),this.startsWith.call({str:t},n)},e.prototype.contains=function(e){return-1!==this.str.indexOf(e)},e.prototype.equals=function(e){return this.str===e},e.prototype.value=function(){return this.str},e}();t.QueryableString=n},6e3:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.getFunctionName=t.getBaseClassDependencyCount=t.getDependencies=void 0;var i=n(5744),o=n(16674),s=n(28421),a=n(6867),c=n(55800);Object.defineProperty(t,"getFunctionName",{enumerable:!0,get:function(){return c.getFunctionName}});var l=n(18924);function u(e,t,n,i){var s=e.getConstructorMetadata(n),a=s.compilerGeneratedMetadata;if(void 0===a){var c=o.MISSING_INJECTABLE_ANNOTATION+" "+t+".";throw new Error(c)}var l=s.userGeneratedMetadata,u=Object.keys(l),h=0===n.length&&u.length>0,f=u.length>n.length,g=function(e,t,n,r,i){for(var o=[],s=0;s<i;s++){var a=d(s,e,t,n,r);null!==a&&o.push(a)}return o}(i,t,a,l,h||f?u.length:n.length),m=p(e,n);return r(r([],g),m)}function d(e,t,n,r,a){var c=a[e.toString()]||[],u=h(c),d=!0!==u.unmanaged,p=r[e];if((p=u.inject||u.multiInject||p)instanceof i.LazyServiceIdentifer&&(p=p.unwrap()),d){if(!t&&(p===Object||p===Function||void 0===p)){var f=o.MISSING_INJECT_ANNOTATION+" argument "+e+" in class "+n+".";throw new Error(f)}var g=new l.Target(s.TargetTypeEnum.ConstructorArgument,u.targetName,p);return g.metadata=c,g}return null}function p(e,t){for(var n=e.getPropertiesMetadata(t),i=[],o=0,a=Object.keys(n);o<a.length;o++){var c=a[o],u=n[c],d=h(n[c]),f=d.targetName||c,g=d.inject||d.multiInject,m=new l.Target(s.TargetTypeEnum.ClassProperty,f,g);m.metadata=u,i.push(m)}var y=Object.getPrototypeOf(t.prototype).constructor;if(y!==Object){var v=p(e,y);i=r(r([],i),v)}return i}function h(e){var t={};return e.forEach((function(e){t[e.key.toString()]=e.value})),{inject:t[a.INJECT_TAG],multiInject:t[a.MULTI_INJECT_TAG],targetName:t[a.NAME_TAG],unmanaged:t[a.UNMANAGED_TAG]}}t.getDependencies=function(e,t){return u(e,c.getFunctionName(t),t,!1)},t.getBaseClassDependencyCount=function e(t,n){var r=Object.getPrototypeOf(n.prototype).constructor;if(r!==Object){var i=u(t,c.getFunctionName(r),r,!0),o=i.map((function(e){return e.metadata.filter((function(e){return e.key===a.UNMANAGED_TAG}))})),s=[].concat.apply([],o).length,l=i.length-s;return l>0?l:e(t,r)}return 0}},6748:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Request=void 0;var r=n(37791),i=function(){function e(e,t,n,i,o){this.id=r.id(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=null===n?new Map:null}return e.prototype.addChildRequest=function(t,n,r){var i=new e(t,this.parentContext,this,n,r);return this.childRequests.push(i),i},e}();t.Request=i},18924:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Target=void 0;var r=n(6867),i=n(37791),o=n(47738),s=n(88460),a=function(){function e(e,t,n,a){this.id=i.id(),this.type=e,this.serviceIdentifier=n,this.name=new s.QueryableString(t||""),this.metadata=new Array;var c=null;"string"==typeof a?c=new o.Metadata(r.NAMED_TAG,a):a instanceof o.Metadata&&(c=a),null!==c&&this.metadata.push(c)}return e.prototype.hasTag=function(e){for(var t=0,n=this.metadata;t<n.length;t++)if(n[t].key===e)return!0;return!1},e.prototype.isArray=function(){return this.hasTag(r.MULTI_INJECT_TAG)},e.prototype.matchesArray=function(e){return this.matchesTag(r.MULTI_INJECT_TAG)(e)},e.prototype.isNamed=function(){return this.hasTag(r.NAMED_TAG)},e.prototype.isTagged=function(){return this.metadata.some((function(e){return r.NON_CUSTOM_TAG_KEYS.every((function(t){return e.key!==t}))}))},e.prototype.isOptional=function(){return this.matchesTag(r.OPTIONAL_TAG)(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(e){return e.key===r.NAMED_TAG}))[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(e){return r.NON_CUSTOM_TAG_KEYS.every((function(t){return e.key!==t}))})):null},e.prototype.matchesNamedTag=function(e){return this.matchesTag(r.NAMED_TAG)(e)},e.prototype.matchesTag=function(e){var t=this;return function(n){for(var r=0,i=t.metadata;r<i.length;r++){var o=i[r];if(o.key===e&&o.value===n)return!0}return!1}},e}();t.Target=a},52279:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.resolveInstance=void 0;var i=n(16674),o=n(28421),s=n(6867);t.resolveInstance=function(e,t,n){var a,c,l=null;t.length>0?(c=t.filter((function(e){return null!==e.target&&e.target.type===o.TargetTypeEnum.ConstructorArgument})).map(n),l=function(e,t,n){var r=t.filter((function(e){return null!==e.target&&e.target.type===o.TargetTypeEnum.ClassProperty})),i=r.map(n);return r.forEach((function(t,n){var r;r=t.target.name.value();var o=i[n];e[r]=o})),e}(l=new((a=e).bind.apply(a,r([void 0],c))),t,n)):l=new e;return function(e,t){if(Reflect.hasMetadata(s.POST_CONSTRUCT,e)){var n=Reflect.getMetadata(s.POST_CONSTRUCT,e);try{t[n.value]()}catch(t){throw new Error(i.POST_CONSTRUCT_ERROR(e.name,t.message))}}}(e,l),l}},31927:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolve=void 0;var r=n(16674),i=n(28421),o=n(85265),s=n(55800),a=n(52279),c=function(e,t,n){try{return n()}catch(n){throw o.isStackOverflowExeption(n)?new Error(r.CIRCULAR_DEPENDENCY_IN_FACTORY(e,t.toString())):n}},l=function(e){return function(t){t.parentContext.setCurrentRequest(t);var n=t.bindings,o=t.childRequests,u=t.target&&t.target.isArray(),d=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));if(u&&d)return o.map((function(t){return l(e)(t)}));var p=null;if(!t.target.isOptional()||0!==n.length){var h=n[0],f=h.scope===i.BindingScopeEnum.Singleton,g=h.scope===i.BindingScopeEnum.Request;if(f&&h.activated)return h.cache;if(g&&null!==e&&e.has(h.id))return e.get(h.id);if(h.type===i.BindingTypeEnum.ConstantValue)p=h.cache,h.activated=!0;else if(h.type===i.BindingTypeEnum.Function)p=h.cache,h.activated=!0;else if(h.type===i.BindingTypeEnum.Constructor)p=h.implementationType;else if(h.type===i.BindingTypeEnum.DynamicValue&&null!==h.dynamicValue)p=c("toDynamicValue",h.serviceIdentifier,(function(){return h.dynamicValue(t.parentContext)}));else if(h.type===i.BindingTypeEnum.Factory&&null!==h.factory)p=c("toFactory",h.serviceIdentifier,(function(){return h.factory(t.parentContext)}));else if(h.type===i.BindingTypeEnum.Provider&&null!==h.provider)p=c("toProvider",h.serviceIdentifier,(function(){return h.provider(t.parentContext)}));else{if(h.type!==i.BindingTypeEnum.Instance||null===h.implementationType){var m=s.getServiceIdentifierAsString(t.serviceIdentifier);throw new Error(r.INVALID_BINDING_TYPE+" "+m)}p=a.resolveInstance(h.implementationType,o,l(e))}return"function"==typeof h.onActivation&&(p=h.onActivation(t.parentContext,p)),f&&(h.cache=p,h.activated=!0),g&&null!==e&&!e.has(h.id)&&e.set(h.id,p),p}}};t.resolve=function(e){return l(e.plan.rootRequest.requestScope)(e.plan.rootRequest)}},83366:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingInSyntax=void 0;var r=n(28421),i=n(71325),o=function(){function e(e){this._binding=e}return e.prototype.inRequestScope=function(){return this._binding.scope=r.BindingScopeEnum.Request,new i.BindingWhenOnSyntax(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=r.BindingScopeEnum.Singleton,new i.BindingWhenOnSyntax(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=r.BindingScopeEnum.Transient,new i.BindingWhenOnSyntax(this._binding)},e}();t.BindingInSyntax=o},99812:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingInWhenOnSyntax=void 0;var r=n(83366),i=n(51811),o=n(98370),s=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding),this._bindingInSyntax=new r.BindingInSyntax(e)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();t.BindingInWhenOnSyntax=s},51811:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingOnSyntax=void 0;var r=n(98370),i=function(){function e(e){this._binding=e}return e.prototype.onActivation=function(e){return this._binding.onActivation=e,new r.BindingWhenSyntax(this._binding)},e}();t.BindingOnSyntax=i},51860:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingToSyntax=void 0;var r=n(16674),i=n(28421),o=n(99812),s=n(71325),a=function(){function e(e){this._binding=e}return e.prototype.to=function(e){return this._binding.type=i.BindingTypeEnum.Instance,this._binding.implementationType=e,new o.BindingInWhenOnSyntax(this._binding)},e.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+r.INVALID_TO_SELF_VALUE);var e=this._binding.serviceIdentifier;return this.to(e)},e.prototype.toConstantValue=function(e){return this._binding.type=i.BindingTypeEnum.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=i.BindingScopeEnum.Singleton,new s.BindingWhenOnSyntax(this._binding)},e.prototype.toDynamicValue=function(e){return this._binding.type=i.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new o.BindingInWhenOnSyntax(this._binding)},e.prototype.toConstructor=function(e){return this._binding.type=i.BindingTypeEnum.Constructor,this._binding.implementationType=e,this._binding.scope=i.BindingScopeEnum.Singleton,new s.BindingWhenOnSyntax(this._binding)},e.prototype.toFactory=function(e){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=e,this._binding.scope=i.BindingScopeEnum.Singleton,new s.BindingWhenOnSyntax(this._binding)},e.prototype.toFunction=function(e){if("function"!=typeof e)throw new Error(r.INVALID_FUNCTION_BINDING);var t=this.toConstantValue(e);return this._binding.type=i.BindingTypeEnum.Function,this._binding.scope=i.BindingScopeEnum.Singleton,t},e.prototype.toAutoFactory=function(e){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=function(t){return function(){return t.container.get(e)}},this._binding.scope=i.BindingScopeEnum.Singleton,new s.BindingWhenOnSyntax(this._binding)},e.prototype.toProvider=function(e){return this._binding.type=i.BindingTypeEnum.Provider,this._binding.provider=e,this._binding.scope=i.BindingScopeEnum.Singleton,new s.BindingWhenOnSyntax(this._binding)},e.prototype.toService=function(e){this.toDynamicValue((function(t){return t.container.get(e)}))},e}();t.BindingToSyntax=a},71325:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingWhenOnSyntax=void 0;var r=n(51811),i=n(98370),o=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding)}return e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();t.BindingWhenOnSyntax=o},98370:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingWhenSyntax=void 0;var r=n(51811),i=n(80758),o=function(){function e(e){this._binding=e}return e.prototype.when=function(e){return this._binding.constraint=e,new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetNamed=function(e){return this._binding.constraint=i.namedConstraint(e),new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){return null!==e.target&&!e.target.isNamed()&&!e.target.isTagged()},new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetTagged=function(e,t){return this._binding.constraint=i.taggedConstraint(e)(t),new r.BindingOnSyntax(this._binding)},e.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return i.typeConstraint(e)(t.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return i.namedConstraint(e)(t.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenParentTagged=function(e,t){return this._binding.constraint=function(n){return i.taggedConstraint(e)(t)(n.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return i.traverseAncerstors(t,i.typeConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return!i.traverseAncerstors(t,i.typeConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return i.traverseAncerstors(t,i.namedConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return!i.traverseAncerstors(t,i.namedConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._binding.constraint=function(n){return i.traverseAncerstors(n,i.taggedConstraint(e)(t))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorTagged=function(e,t){return this._binding.constraint=function(n){return!i.traverseAncerstors(n,i.taggedConstraint(e)(t))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return i.traverseAncerstors(t,e)},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return!i.traverseAncerstors(t,e)},new r.BindingOnSyntax(this._binding)},e}();t.BindingWhenSyntax=o},80758:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.typeConstraint=t.namedConstraint=t.taggedConstraint=t.traverseAncerstors=void 0;var r=n(6867),i=n(47738),o=function(e,t){var n=e.parentRequest;return null!==n&&(!!t(n)||o(n,t))};t.traverseAncerstors=o;var s=function(e){return function(t){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(e)(t)};return n.metaData=new i.Metadata(e,t),n}};t.taggedConstraint=s;var a=s(r.NAMED_TAG);t.namedConstraint=a,t.typeConstraint=function(e){return function(t){var n=null;if(null!==t){if(n=t.bindings[0],"string"==typeof e)return n.serviceIdentifier===e;var r=t.bindings[0].implementationType;return e===r}return!1}}},70600:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiBindToService=void 0,t.multiBindToService=function(e){return function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach((function(n){return e.bind(n).toService(t)}))}}}},85265:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isStackOverflowExeption=void 0;var r=n(16674);t.isStackOverflowExeption=function(e){return e instanceof RangeError||e.message===r.STACK_OVERFLOW}},37791:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.id=void 0;var n=0;t.id=function(){return n++}},55800:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.circularDependencyToException=t.listMetadataForTarget=t.listRegisteredBindingsForServiceIdentifier=t.getServiceIdentifierAsString=t.getFunctionName=void 0;var r=n(16674);function i(e){return"function"==typeof e?e.name:"symbol"==typeof e?e.toString():e}function o(e,t){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===t||o(e.parentRequest,t))}function s(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+t}t.getServiceIdentifierAsString=i,t.listRegisteredBindingsForServiceIdentifier=function(e,t,n){var r="",i=n(e,t);return 0!==i.length&&(r="\nRegistered bindings:",i.forEach((function(e){var t="Object";null!==e.implementationType&&(t=s(e.implementationType)),r=r+"\n "+t,e.constraint.metaData&&(r=r+" - "+e.constraint.metaData)}))),r},t.circularDependencyToException=function e(t){t.childRequests.forEach((function(t){if(o(t,t.serviceIdentifier)){var n=function(e){return function e(t,n){void 0===n&&(n=[]);var r=i(t.serviceIdentifier);return n.push(r),null!==t.parentRequest?e(t.parentRequest,n):n}(e).reverse().join(" --\x3e ")}(t);throw new Error(r.CIRCULAR_DEPENDENCY+" "+n)}e(t)}))},t.listMetadataForTarget=function(e,t){if(t.isTagged()||t.isNamed()){var n="",r=t.getNamedTag(),i=t.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach((function(e){n+=e.toString()+"\n"}))," "+e+"\n "+e+" - "+n}return" "+e},t.getFunctionName=s},46792:(e,t,n)=>{var r=null;"undefined"!=typeof WebSocket?r=WebSocket:"undefined"!=typeof MozWebSocket?r=MozWebSocket:void 0!==n.g?r=n.g.WebSocket||n.g.MozWebSocket:"undefined"!=typeof window?r=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(r=self.WebSocket||self.MozWebSocket),e.exports=r},18552:(e,t,n)=>{var r=n(10852)(n(55639),"DataView");e.exports=r},1989:(e,t,n)=>{var r=n(51789),i=n(80401),o=n(57667),s=n(21327),a=n(81866);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,e.exports=c},38407:(e,t,n)=>{var r=n(27040),i=n(14125),o=n(82117),s=n(67518),a=n(54705);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,e.exports=c},57071:(e,t,n)=>{var r=n(10852)(n(55639),"Map");e.exports=r},83369:(e,t,n)=>{var r=n(24785),i=n(11285),o=n(96e3),s=n(49916),a=n(95265);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,e.exports=c},53818:(e,t,n)=>{var r=n(10852)(n(55639),"Promise");e.exports=r},58525:(e,t,n)=>{var r=n(10852)(n(55639),"Set");e.exports=r},46384:(e,t,n)=>{var r=n(38407),i=n(37465),o=n(63779),s=n(67599),a=n(44758),c=n(34309);function l(e){var t=this.__data__=new r(e);this.size=t.size}l.prototype.clear=i,l.prototype.delete=o,l.prototype.get=s,l.prototype.has=a,l.prototype.set=c,e.exports=l},62705:(e,t,n)=>{var r=n(55639).Symbol;e.exports=r},11149:(e,t,n)=>{var r=n(55639).Uint8Array;e.exports=r},70577:(e,t,n)=>{var r=n(10852)(n(55639),"WeakMap");e.exports=r},77412:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},34963:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}},14636:(e,t,n)=>{var r=n(22545),i=n(35694),o=n(1469),s=n(44144),a=n(65776),c=n(36719),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),u=!n&&i(e),d=!n&&!u&&s(e),p=!n&&!u&&!d&&c(e),h=n||u||d||p,f=h?r(e.length,String):[],g=f.length;for(var m in e)!t&&!l.call(e,m)||h&&("length"==m||d&&("offset"==m||"parent"==m)||p&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||a(m,g))||f.push(m);return f}},29932:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},62488:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},34865:(e,t,n)=>{var r=n(89465),i=n(77813),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var s=e[t];o.call(e,t)&&i(s,n)&&(void 0!==n||t in e)||r(e,t,n)}},18470:(e,t,n)=>{var r=n(77813);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},44037:(e,t,n)=>{var r=n(98363),i=n(3674);e.exports=function(e,t){return e&&r(t,i(t),e)}},63886:(e,t,n)=>{var r=n(98363),i=n(81704);e.exports=function(e,t){return e&&r(t,i(t),e)}},89465:(e,t,n)=>{var r=n(38777);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},85990:(e,t,n)=>{var r=n(46384),i=n(77412),o=n(34865),s=n(44037),a=n(63886),c=n(64626),l=n(278),u=n(18805),d=n(1911),p=n(58234),h=n(46904),f=n(64160),g=n(43824),m=n(29148),y=n(38517),v=n(1469),b=n(44144),w=n(56688),C=n(13218),S=n(72928),_=n(3674),k=n(81704),P="[object Arguments]",I="[object Function]",E="[object Object]",T={};T[P]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T[E]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T[I]=T["[object WeakMap]"]=!1,e.exports=function e(t,n,D,x,R,j){var N,M=1&n,O=2&n,A=4&n;if(D&&(N=R?D(t,x,R,j):D(t)),void 0!==N)return N;if(!C(t))return t;var L=v(t);if(L){if(N=g(t),!M)return l(t,N)}else{var F=f(t),U=F==I||"[object GeneratorFunction]"==F;if(b(t))return c(t,M);if(F==E||F==P||U&&!R){if(N=O||U?{}:y(t),!M)return O?d(t,a(N,t)):u(t,s(N,t))}else{if(!T[F])return R?t:{};N=m(t,F,M)}}j||(j=new r);var K=j.get(t);if(K)return K;j.set(t,N),S(t)?t.forEach((function(r){N.add(e(r,n,D,r,t,j))})):w(t)&&t.forEach((function(r,i){N.set(i,e(r,n,D,i,t,j))}));var W=L?void 0:(A?O?h:p:O?k:_)(t);return i(W||t,(function(r,i){W&&(r=t[i=r]),o(N,i,e(r,n,D,i,t,j))})),N}},3118:(e,t,n)=>{var r=n(13218),i=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},68866:(e,t,n)=>{var r=n(62488),i=n(1469);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},44239:(e,t,n)=>{var r=n(62705),i=n(89607),o=n(2333),s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):o(e)}},9454:(e,t,n)=>{var r=n(44239),i=n(37005);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},25588:(e,t,n)=>{var r=n(64160),i=n(37005);e.exports=function(e){return i(e)&&"[object Map]"==r(e)}},28458:(e,t,n)=>{var r=n(23560),i=n(15346),o=n(13218),s=n(80346),a=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,d=l.hasOwnProperty,p=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?p:a).test(s(e))}},29221:(e,t,n)=>{var r=n(64160),i=n(37005);e.exports=function(e){return i(e)&&"[object Set]"==r(e)}},38749:(e,t,n)=>{var r=n(44239),i=n(41780),o=n(37005),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!s[r(e)]}},280:(e,t,n)=>{var r=n(25726),i=n(86916),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},10313:(e,t,n)=>{var r=n(13218),i=n(25726),o=n(33498),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=i(e),n=[];for(var a in e)("constructor"!=a||!t&&s.call(e,a))&&n.push(a);return n}},22545:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},80531:(e,t,n)=>{var r=n(62705),i=n(29932),o=n(1469),s=n(33448),a=r?r.prototype:void 0,c=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(s(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},27561:(e,t,n)=>{var r=n(67990),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},7518:e=>{e.exports=function(e){return function(t){return e(t)}}},74318:(e,t,n)=>{var r=n(11149);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},64626:(e,t,n)=>{e=n.nmd(e);var r=n(55639),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,s=o&&o.exports===i?r.Buffer:void 0,a=s?s.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=a?a(n):new e.constructor(n);return e.copy(r),r}},57157:(e,t,n)=>{var r=n(74318);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},93147:e=>{var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},40419:(e,t,n)=>{var r=n(62705),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},77133:(e,t,n)=>{var r=n(74318);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},278:e=>{e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},98363:(e,t,n)=>{var r=n(34865),i=n(89465);e.exports=function(e,t,n,o){var s=!n;n||(n={});for(var a=-1,c=t.length;++a<c;){var l=t[a],u=o?o(n[l],e[l],l,n,e):void 0;void 0===u&&(u=e[l]),s?i(n,l,u):r(n,l,u)}return n}},18805:(e,t,n)=>{var r=n(98363),i=n(99551);e.exports=function(e,t){return r(e,i(e),t)}},1911:(e,t,n)=>{var r=n(98363),i=n(51442);e.exports=function(e,t){return r(e,i(e),t)}},14429:(e,t,n)=>{var r=n(55639)["__core-js_shared__"];e.exports=r},38777:(e,t,n)=>{var r=n(10852),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},31957:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},58234:(e,t,n)=>{var r=n(68866),i=n(99551),o=n(3674);e.exports=function(e){return r(e,o,i)}},46904:(e,t,n)=>{var r=n(68866),i=n(51442),o=n(81704);e.exports=function(e){return r(e,o,i)}},45050:(e,t,n)=>{var r=n(37019);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},10852:(e,t,n)=>{var r=n(28458),i=n(47801);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},85924:(e,t,n)=>{var r=n(5569)(Object.getPrototypeOf,Object);e.exports=r},89607:(e,t,n)=>{var r=n(62705),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[a]=n:delete e[a]),i}},99551:(e,t,n)=>{var r=n(34963),i=n(70479),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(e){return null==e?[]:(e=Object(e),r(s(e),(function(t){return o.call(e,t)})))}:i;e.exports=a},51442:(e,t,n)=>{var r=n(62488),i=n(85924),o=n(99551),s=n(70479),a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,o(e)),e=i(e);return t}:s;e.exports=a},64160:(e,t,n)=>{var r=n(18552),i=n(57071),o=n(53818),s=n(58525),a=n(70577),c=n(44239),l=n(80346),u="[object Map]",d="[object Promise]",p="[object Set]",h="[object WeakMap]",f="[object DataView]",g=l(r),m=l(i),y=l(o),v=l(s),b=l(a),w=c;(r&&w(new r(new ArrayBuffer(1)))!=f||i&&w(new i)!=u||o&&w(o.resolve())!=d||s&&w(new s)!=p||a&&w(new a)!=h)&&(w=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,r=n?l(n):"";if(r)switch(r){case g:return f;case m:return u;case y:return d;case v:return p;case b:return h}return t}),e.exports=w},47801:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},51789:(e,t,n)=>{var r=n(94536);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},80401:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},57667:(e,t,n)=>{var r=n(94536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},21327:(e,t,n)=>{var r=n(94536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},81866:(e,t,n)=>{var r=n(94536);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},43824:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},29148:(e,t,n)=>{var r=n(74318),i=n(57157),o=n(93147),s=n(40419),a=n(77133);e.exports=function(e,t,n){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return i(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(e,n);case"[object Map]":case"[object Set]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return o(e);case"[object Symbol]":return s(e)}}},38517:(e,t,n)=>{var r=n(3118),i=n(85924),o=n(25726);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:r(i(e))}},65776:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},37019:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},15346:(e,t,n)=>{var r,i=n(14429),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},25726:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},27040:e=>{e.exports=function(){this.__data__=[],this.size=0}},14125:(e,t,n)=>{var r=n(18470),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():i.call(t,n,1),--this.size,0))}},82117:(e,t,n)=>{var r=n(18470);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},67518:(e,t,n)=>{var r=n(18470);e.exports=function(e){return r(this.__data__,e)>-1}},54705:(e,t,n)=>{var r=n(18470);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},24785:(e,t,n)=>{var r=n(1989),i=n(38407),o=n(57071);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},11285:(e,t,n)=>{var r=n(45050);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},96e3:(e,t,n)=>{var r=n(45050);e.exports=function(e){return r(this,e).get(e)}},49916:(e,t,n)=>{var r=n(45050);e.exports=function(e){return r(this,e).has(e)}},95265:(e,t,n)=>{var r=n(45050);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},94536:(e,t,n)=>{var r=n(10852)(Object,"create");e.exports=r},86916:(e,t,n)=>{var r=n(5569)(Object.keys,Object);e.exports=r},33498:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},31167:(e,t,n)=>{e=n.nmd(e);var r=n(31957),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,s=o&&o.exports===i&&r.process,a=function(){try{return o&&o.require&&o.require("util").types||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=a},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},55639:(e,t,n)=>{var r=n(31957),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},37465:(e,t,n)=>{var r=n(38407);e.exports=function(){this.__data__=new r,this.size=0}},63779:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},67599:e=>{e.exports=function(e){return this.__data__.get(e)}},44758:e=>{e.exports=function(e){return this.__data__.has(e)}},34309:(e,t,n)=>{var r=n(38407),i=n(57071),o=n(83369);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<199)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(e,t),this.size=n.size,this}},80346:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},67990:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},50361:(e,t,n)=>{var r=n(85990);e.exports=function(e){return r(e,5)}},23279:(e,t,n)=>{var r=n(13218),i=n(7771),o=n(14841),s=Math.max,a=Math.min;e.exports=function(e,t,n){var c,l,u,d,p,h,f=0,g=!1,m=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=c,r=l;return c=l=void 0,f=t,d=e.apply(r,n)}function b(e){return f=e,p=setTimeout(C,t),g?v(e):d}function w(e){var n=e-h;return void 0===h||n>=t||n<0||m&&e-f>=u}function C(){var e=i();if(w(e))return S(e);p=setTimeout(C,function(e){var n=t-(e-h);return m?a(n,u-(e-f)):n}(e))}function S(e){return p=void 0,y&&c?v(e):(c=l=void 0,d)}function _(){var e=i(),n=w(e);if(c=arguments,l=this,h=e,n){if(void 0===p)return b(h);if(m)return clearTimeout(p),p=setTimeout(C,t),v(h)}return void 0===p&&(p=setTimeout(C,t)),d}return t=o(t)||0,r(n)&&(g=!!n.leading,u=(m="maxWait"in n)?s(o(n.maxWait)||0,t):u,y="trailing"in n?!!n.trailing:y),_.cancel=function(){void 0!==p&&clearTimeout(p),f=0,c=h=l=p=void 0},_.flush=function(){return void 0===p?d:S(i())},_}},77813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},3522:(e,t,n)=>{var r=n(79833),i=/[\\^$.*+?()[\]{}|]/g,o=RegExp(i.source);e.exports=function(e){return(e=r(e))&&o.test(e)?e.replace(i,"\\$&"):e}},35694:(e,t,n)=>{var r=n(9454),i=n(37005),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return i(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=c},1469:e=>{var t=Array.isArray;e.exports=t},98612:(e,t,n)=>{var r=n(23560),i=n(41780);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},44144:(e,t,n)=>{e=n.nmd(e);var r=n(55639),i=n(95062),o=t&&!t.nodeType&&t,s=o&&e&&!e.nodeType&&e,a=s&&s.exports===o?r.Buffer:void 0,c=(a?a.isBuffer:void 0)||i;e.exports=c},23560:(e,t,n)=>{var r=n(44239),i=n(13218);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},41780:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},56688:(e,t,n)=>{var r=n(25588),i=n(7518),o=n(31167),s=o&&o.isMap,a=s?i(s):r;e.exports=a},13218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},37005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},72928:(e,t,n)=>{var r=n(29221),i=n(7518),o=n(31167),s=o&&o.isSet,a=s?i(s):r;e.exports=a},33448:(e,t,n)=>{var r=n(44239),i=n(37005);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},36719:(e,t,n)=>{var r=n(38749),i=n(7518),o=n(31167),s=o&&o.isTypedArray,a=s?i(s):r;e.exports=a},3674:(e,t,n)=>{var r=n(14636),i=n(280),o=n(98612);e.exports=function(e){return o(e)?r(e):i(e)}},81704:(e,t,n)=>{var r=n(14636),i=n(10313),o=n(98612);e.exports=function(e){return o(e)?r(e,!0):i(e)}},7771:(e,t,n)=>{var r=n(55639);e.exports=function(){return r.Date.now()}},70479:e=>{e.exports=function(){return[]}},95062:e=>{e.exports=function(){return!1}},14841:(e,t,n)=>{var r=n(27561),i=n(13218),o=n(33448),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=a.test(e);return n||c.test(e)?l(e.slice(2),n?2:8):s.test(e)?NaN:+e}},79833:(e,t,n)=>{var r=n(80531);e.exports=function(e){return null==e?"":r(e)}},96562:e=>{function t(e){return"number"==typeof e||!!/^0x[0-9a-f]+$/i.test(e)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e)}function n(e,t){return"constructor"===t&&"function"==typeof e[t]||"__proto__"===t}e.exports=function(e,r){r||(r={});var i={bools:{},strings:{},unknownFn:null};"function"==typeof r.unknown&&(i.unknownFn=r.unknown),"boolean"==typeof r.boolean&&r.boolean?i.allBools=!0:[].concat(r.boolean).filter(Boolean).forEach((function(e){i.bools[e]=!0}));var o={};Object.keys(r.alias||{}).forEach((function(e){o[e]=[].concat(r.alias[e]),o[e].forEach((function(t){o[t]=[e].concat(o[e].filter((function(e){return t!==e})))}))})),[].concat(r.string).filter(Boolean).forEach((function(e){i.strings[e]=!0,o[e]&&(i.strings[o[e]]=!0)}));var s=r.default||{},a={_:[]};Object.keys(i.bools).forEach((function(e){l(e,void 0!==s[e]&&s[e])}));var c=[];function l(e,n,r){if(!r||!i.unknownFn||function(e,t){return i.allBools&&/^--[^=]+$/.test(t)||i.strings[e]||i.bools[e]||o[e]}(e,r)||!1!==i.unknownFn(r)){var s=!i.strings[e]&&t(n)?Number(n):n;u(a,e.split("."),s),(o[e]||[]).forEach((function(e){u(a,e.split("."),s)}))}}function u(e,t,r){for(var o=e,s=0;s<t.length-1;s++){if(n(o,a=t[s]))return;void 0===o[a]&&(o[a]={}),o[a]!==Object.prototype&&o[a]!==Number.prototype&&o[a]!==String.prototype||(o[a]={}),o[a]===Array.prototype&&(o[a]=[]),o=o[a]}var a;n(o,a=t[t.length-1])||(o!==Object.prototype&&o!==Number.prototype&&o!==String.prototype||(o={}),o===Array.prototype&&(o=[]),void 0===o[a]||i.bools[a]||"boolean"==typeof o[a]?o[a]=r:Array.isArray(o[a])?o[a].push(r):o[a]=[o[a],r])}function d(e){return o[e].some((function(e){return i.bools[e]}))}-1!==e.indexOf("--")&&(c=e.slice(e.indexOf("--")+1),e=e.slice(0,e.indexOf("--")));for(var p=0;p<e.length;p++){var h=e[p];if(/^--.+=/.test(h)){var f=h.match(/^--([^=]+)=([\s\S]*)$/),g=f[1],m=f[2];i.bools[g]&&(m="false"!==m),l(g,m,h)}else if(/^--no-.+/.test(h))l(g=h.match(/^--no-(.+)/)[1],!1,h);else if(/^--.+/.test(h))g=h.match(/^--(.+)/)[1],void 0===(w=e[p+1])||/^-/.test(w)||i.bools[g]||i.allBools||o[g]&&d(g)?/^(true|false)$/.test(w)?(l(g,"true"===w,h),p++):l(g,!i.strings[g]||"",h):(l(g,w,h),p++);else if(/^-[^-]+/.test(h)){for(var y=h.slice(1,-1).split(""),v=!1,b=0;b<y.length;b++){var w;if("-"!==(w=h.slice(b+2))){if(/[A-Za-z]/.test(y[b])&&/=/.test(w)){l(y[b],w.split("=")[1],h),v=!0;break}if(/[A-Za-z]/.test(y[b])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(w)){l(y[b],w,h),v=!0;break}if(y[b+1]&&y[b+1].match(/\W/)){l(y[b],h.slice(b+2),h),v=!0;break}l(y[b],!i.strings[y[b]]||"",h)}else l(y[b],w,h)}g=h.slice(-1)[0],v||"-"===g||(!e[p+1]||/^(-|--)[^-]/.test(e[p+1])||i.bools[g]||o[g]&&d(g)?e[p+1]&&/^(true|false)$/.test(e[p+1])?(l(g,"true"===e[p+1],h),p++):l(g,!i.strings[g]||"",h):(l(g,e[p+1],h),p++))}else if(i.unknownFn&&!1===i.unknownFn(h)||a._.push(i.strings._||!t(h)?h:Number(h)),r.stopEarly){a._.push.apply(a._,e.slice(p+1));break}}return Object.keys(s).forEach((function(e){var t,n,r;t=a,n=e.split("."),r=t,n.slice(0,-1).forEach((function(e){r=r[e]||{}})),n[n.length-1]in r||(u(a,e.split("."),s[e]),(o[e]||[]).forEach((function(t){u(a,t.split("."),s[e])})))})),r["--"]?(a["--"]=new Array,c.forEach((function(e){a["--"].push(e)}))):c.forEach((function(e){a._.push(e)})),a}},83300:(e,t)=>{"use strict";var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n)return n;throw new Error("unable to locate global object")}();e.exports=t=n.fetch,n.fetch&&(t.default=n.fetch.bind(n)),t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response},26470:(e,t,n)=>{"use strict";var r=n(34155);function i(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function o(e,t){for(var n,r="",i=0,o=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)n=e.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var c=r.lastIndexOf("/");if(c!==r.length-1){-1===c?(r="",i=0):i=(r=r.slice(0,c)).length-1-r.lastIndexOf("/"),o=a,s=0;continue}}else if(2===r.length||1===r.length){r="",i=0,o=a,s=0;continue}t&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+e.slice(o+1,a):r=e.slice(o+1,a),i=a-o-1;o=a,s=0}else 46===n&&-1!==s?++s:s=-1}return r}var s={resolve:function(){for(var e,t="",n=!1,s=arguments.length-1;s>=-1&&!n;s--){var a;s>=0?a=arguments[s]:(void 0===e&&(e=r.cwd()),a=e),i(a),0!==a.length&&(t=a+"/"+t,n=47===a.charCodeAt(0))}return t=o(t,!n),n?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(e){if(i(e),0===e.length)return".";var t=47===e.charCodeAt(0),n=47===e.charCodeAt(e.length-1);return 0!==(e=o(e,!t)).length||t||(e="."),e.length>0&&n&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return i(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];i(n),n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":s.normalize(e)},relative:function(e,t){if(i(e),i(t),e===t)return"";if((e=s.resolve(e))===(t=s.resolve(t)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var r=e.length,o=r-n,a=1;a<t.length&&47===t.charCodeAt(a);++a);for(var c=t.length-a,l=o<c?o:c,u=-1,d=0;d<=l;++d){if(d===l){if(c>l){if(47===t.charCodeAt(a+d))return t.slice(a+d+1);if(0===d)return t.slice(a+d)}else o>l&&(47===e.charCodeAt(n+d)?u=d:0===d&&(u=0));break}var p=e.charCodeAt(n+d);if(p!==t.charCodeAt(a+d))break;47===p&&(u=d)}var h="";for(d=n+u+1;d<=r;++d)d!==r&&47!==e.charCodeAt(d)||(0===h.length?h+="..":h+="/..");return h.length>0?h+t.slice(a+u):(a+=u,47===t.charCodeAt(a)&&++a,t.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(i(e),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,o=!0,s=e.length-1;s>=1;--s)if(47===(t=e.charCodeAt(s))){if(!o){r=s;break}}else o=!1;return-1===r?n?"/":".":n&&1===r?"//":e.slice(0,r)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');i(e);var n,r=0,o=-1,s=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var a=t.length-1,c=-1;for(n=e.length-1;n>=0;--n){var l=e.charCodeAt(n);if(47===l){if(!s){r=n+1;break}}else-1===c&&(s=!1,c=n+1),a>=0&&(l===t.charCodeAt(a)?-1==--a&&(o=n):(a=-1,o=c))}return r===o?o=c:-1===o&&(o=e.length),e.slice(r,o)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!s){r=n+1;break}}else-1===o&&(s=!1,o=n+1);return-1===o?"":e.slice(r,o)},extname:function(e){i(e);for(var t=-1,n=0,r=-1,o=!0,s=0,a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(47!==c)-1===r&&(o=!1,r=a+1),46===c?-1===t?t=a:1!==s&&(s=1):-1!==t&&(s=-1);else if(!o){n=a+1;break}}return-1===t||-1===r||0===s||1===s&&t===r-1&&t===n+1?"":e.slice(t,r)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,r=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+r:n+"/"+r:r}(0,e)},parse:function(e){i(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var n,r=e.charCodeAt(0),o=47===r;o?(t.root="/",n=1):n=0;for(var s=-1,a=0,c=-1,l=!0,u=e.length-1,d=0;u>=n;--u)if(47!==(r=e.charCodeAt(u)))-1===c&&(l=!1,c=u+1),46===r?-1===s?s=u:1!==d&&(d=1):-1!==s&&(d=-1);else if(!l){a=u+1;break}return-1===s||-1===c||0===d||1===d&&s===c-1&&s===a+1?-1!==c&&(t.base=t.name=0===a&&o?e.slice(1,c):e.slice(a,c)):(0===a&&o?(t.name=e.slice(1,s),t.base=e.slice(1,c)):(t.name=e.slice(a,s),t.base=e.slice(a,c)),t.ext=e.slice(s,c)),a>0?t.dir=e.slice(0,a-1):o&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};s.posix=s,e.exports=s},34155:e=>{var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var a,c=[],l=!1,u=-1;function d(){l&&a&&(l=!1,a.length?c=a.concat(c):u=-1,c.length&&p())}function p(){if(!l){var e=s(d);l=!0;for(var t=c.length;t;){for(a=c,c=[];++u<t;)a&&a[u].run();u=-1,t=c.length}a=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function f(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},57129:(e,t)=>{"use strict";var n=Object.prototype.hasOwnProperty;function r(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function i(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var r,o,s=[];for(o in"string"!=typeof t&&(t="?"),e)if(n.call(e,o)){if((r=e[o])||null!=r&&!isNaN(r)||(r=""),o=i(o),r=i(r),null===o||null===r)continue;s.push(o+"="+r)}return s.length?t+s.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,i={};t=n.exec(e);){var o=r(t[1]),s=r(t[2]);null===o||null===s||o in i||(i[o]=s)}return i}},28660:(e,t,n)=>{var r,i=n(34155);!function(e){!function(t){var r="object"==typeof n.g?n.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),o=s(e);function s(e,t){return function(n,r){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}void 0===r.Reflect?r.Reflect=e:o=s(r.Reflect,o),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",s="function"==typeof Object.create,a={__proto__:[]}instanceof Array,c=!s&&!a,l={create:s?function(){return A(Object.create(null))}:a?function(){return A({__proto__:null})}:function(){return A({})},has:c?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:c?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},u=Object.getPrototypeOf(Function),d=i.env&&"true"===i.env.REFLECT_METADATA_USE_MAP_POLYFILL,p=d||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,i)},t.prototype.entries=function(){return new n(this._keys,this._values,s)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function i(e,t){return t}function s(e,t){return[e,t]}}():Map,h=d||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new p}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}():Set,f=new(d||"function"!=typeof WeakMap?function(){var e=l.create(),n=r();return function(){function e(){this._key=r()}return e.prototype.has=function(e){var t=i(e,!1);return void 0!==t&&l.has(t,this._key)},e.prototype.get=function(e){var t=i(e,!1);return void 0!==t?l.get(t,this._key):void 0},e.prototype.set=function(e,t){return i(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=i(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=r()},e}();function r(){var t;do{t="@@WeakMap@@"+s()}while(l.has(e,t));return e[t]=!0,t}function i(e,r){if(!t.call(e,n)){if(!r)return;Object.defineProperty(e,n,{value:l.create()})}return e[n]}function o(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function s(){var e,t=(e=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):o(new Uint8Array(e),e):o(new Array(e),e));t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",r=0;r<16;++r){var i=t[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}():WeakMap);function g(e,t,n){var r=f.get(e);if(k(r)){if(!n)return;r=new p,f.set(e,r)}var i=r.get(t);if(k(i)){if(!n)return;i=new p,r.set(t,i)}return i}function m(e,t,n){if(y(e,t,n))return!0;var r=O(t);return!P(r)&&m(e,r,n)}function y(e,t,n){var r=g(t,n,!1);return!k(r)&&!!r.has(e)}function v(e,t,n){if(y(e,t,n))return b(e,t,n);var r=O(t);return P(r)?void 0:v(e,r,n)}function b(e,t,n){var r=g(t,n,!1);if(!k(r))return r.get(e)}function w(e,t,n,r){g(n,r,!0).set(e,t)}function C(e,t){var n=S(e,t),r=O(e);if(null===r)return n;var i=C(r,t);if(i.length<=0)return n;if(n.length<=0)return i;for(var o=new h,s=[],a=0,c=n;a<c.length;a++){var l=c[a];o.has(l)||(o.add(l),s.push(l))}for(var u=0,d=i;u<d.length;u++)l=d[u],o.has(l)||(o.add(l),s.push(l));return s}function S(e,t){var n=[],r=g(e,t,!1);if(k(r))return n;for(var i=function(e){var t=j(e,o);if(!x(t))throw new TypeError;var n=t.call(e);if(!I(n))throw new TypeError;return n}(r.keys()),s=0;;){var a=N(i);if(!a)return n.length=s,n;var c=a.value;try{n[s]=c}catch(e){try{M(i)}finally{throw e}}s++}}function _(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function k(e){return void 0===e}function P(e){return null===e}function I(e){return"object"==typeof e?null!==e:"function"==typeof e}function E(e,t){switch(_(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",i=j(e,r);if(void 0!==i){var o=i.call(e,n);if(I(o))throw new TypeError;return o}return function(e,t){if("string"===t){var n=e.toString;if(x(n)&&!I(i=n.call(e)))return i;if(x(r=e.valueOf)&&!I(i=r.call(e)))return i}else{var r;if(x(r=e.valueOf)&&!I(i=r.call(e)))return i;var i,o=e.toString;if(x(o)&&!I(i=o.call(e)))return i}throw new TypeError}(e,"default"===n?"number":n)}function T(e){var t=E(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function D(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function x(e){return"function"==typeof e}function R(e){return"function"==typeof e}function j(e,t){var n=e[t];if(null!=n){if(!x(n))throw new TypeError;return n}}function N(e){var t=e.next();return!t.done&&t}function M(e){var t=e.return;t&&t.call(e)}function O(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===u)return t;if(t!==u)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var i=r.constructor;return"function"!=typeof i||i===e?t:i}function A(e){return e.__=void 0,delete e.__,e}e("decorate",(function(e,t,n,r){if(k(n)){if(!D(e))throw new TypeError;if(!R(t))throw new TypeError;return function(e,t){for(var n=e.length-1;n>=0;--n){var r=(0,e[n])(t);if(!k(r)&&!P(r)){if(!R(r))throw new TypeError;t=r}}return t}(e,t)}if(!D(e))throw new TypeError;if(!I(t))throw new TypeError;if(!I(r)&&!k(r)&&!P(r))throw new TypeError;return P(r)&&(r=void 0),function(e,t,n,r){for(var i=e.length-1;i>=0;--i){var o=(0,e[i])(t,n,r);if(!k(o)&&!P(o)){if(!I(o))throw new TypeError;r=o}}return r}(e,t,n=T(n),r)})),e("metadata",(function(e,t){return function(n,r){if(!I(n))throw new TypeError;if(!k(r)&&!function(e){switch(_(e)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;w(e,t,n,r)}})),e("defineMetadata",(function(e,t,n,r){if(!I(n))throw new TypeError;return k(r)||(r=T(r)),w(e,t,n,r)})),e("hasMetadata",(function(e,t,n){if(!I(t))throw new TypeError;return k(n)||(n=T(n)),m(e,t,n)})),e("hasOwnMetadata",(function(e,t,n){if(!I(t))throw new TypeError;return k(n)||(n=T(n)),y(e,t,n)})),e("getMetadata",(function(e,t,n){if(!I(t))throw new TypeError;return k(n)||(n=T(n)),v(e,t,n)})),e("getOwnMetadata",(function(e,t,n){if(!I(t))throw new TypeError;return k(n)||(n=T(n)),b(e,t,n)})),e("getMetadataKeys",(function(e,t){if(!I(e))throw new TypeError;return k(t)||(t=T(t)),C(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!I(e))throw new TypeError;return k(t)||(t=T(t)),S(e,t)})),e("deleteMetadata",(function(e,t,n){if(!I(t))throw new TypeError;k(n)||(n=T(n));var r=g(t,n,!1);if(k(r))return!1;if(!r.delete(e))return!1;if(r.size>0)return!0;var i=f.get(t);return i.delete(n),i.size>0||f.delete(t),!0}))}(o)}()}(r||(r={}))},47418:e=>{"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},26765:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(50417);t.ReplaySubject=r.ReplaySubject},37875:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(26765))},50417:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ArgumentOutOfRangeError:()=>O.W,AsyncSubject:()=>y,BehaviorSubject:()=>g,ConnectableObservable:()=>u,EMPTY:()=>ge.E,EmptyError:()=>A.K,GroupedObservable:()=>p.T,NEVER:()=>je,Notification:()=>x.P,NotificationKind:()=>x.W,ObjectUnsubscribedError:()=>f.N,Observable:()=>r.y,ReplaySubject:()=>m.t,Scheduler:()=>D.b,Subject:()=>o.xQ,Subscriber:()=>s.L,Subscription:()=>a.w,TimeoutError:()=>F.W,UnsubscriptionError:()=>L.B,VirtualAction:()=>T,VirtualTimeScheduler:()=>E,animationFrame:()=>I,animationFrameScheduler:()=>P,asap:()=>v.e,asapScheduler:()=>v.E,async:()=>S,asyncScheduler:()=>C,bindCallback:()=>H,bindNodeCallback:()=>J,combineLatest:()=>Y.aj,concat:()=>fe,config:()=>ot.v,defer:()=>me,empty:()=>ge.c,forkJoin:()=>ve,from:()=>ae,fromEvent:()=>Ce,fromEventPattern:()=>_e,generate:()=>ke,identity:()=>N.y,iif:()=>Ie,interval:()=>Te,isObservable:()=>M,merge:()=>Re,never:()=>Ne,noop:()=>j.Z,observable:()=>h.L,of:()=>Q.of,onErrorResumeNext:()=>Me,pairs:()=>Oe,partition:()=>We,pipe:()=>R.z,queue:()=>_.c,queueScheduler:()=>_.N,race:()=>Be,range:()=>$e.w,scheduled:()=>se,throwError:()=>Ge._,timer:()=>ze,using:()=>Qe,zip:()=>Ze});var r=n(61244),i=n(35987),o=n(70211),s=n(10979),a=n(98760),c=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new l(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),l=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return i.ZT(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(s.L),u=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return i.ZT(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new a.w).add(this.source.subscribe(new d(this.getSubject(),this))),e.closed&&(this._connection=null,e=a.w.EMPTY)),e},t.prototype.refCount=function(){return(e=this).lift(new c(e));var e},t}(r.y),d=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return i.ZT(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(o.Yc),p=(s.L,n(11120)),h=n(15050),f=n(41016),g=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return i.ZT(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new f.N;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(o.xQ),m=n(32993),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return i.ZT(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),a.w.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),a.w.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(o.xQ),v=n(77681),b=n(96114),w=n(78399),C=new w.v(b.o),S=C,_=n(92546),k=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return i.ZT(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame((function(){return t.flush(null)}))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(cancelAnimationFrame(n),t.scheduled=void 0)},t}(b.o),P=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.ZT(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(w.v))(k),I=P,E=function(e){function t(t,n){void 0===t&&(t=T),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=e.call(this,t,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return i.ZT(t,e),t.prototype.flush=function(){for(var e,t,n=this.actions,r=this.maxFrames;(t=n[0])&&t.delay<=r&&(n.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(w.v),T=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=r,i.active=!0,i.index=t.index=r,i}return i.ZT(t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},t.prototype.requestAsyncId=function(e,n,r){void 0===r&&(r=0),this.delay=e.frame+r;var i=e.actions;return i.push(this),i.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,n){void 0===n&&(n=0)},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(b.o),D=n(38725),x=n(42632),R=n(62561),j=n(33306),N=n(43608);function M(e){return!!e&&(e instanceof r.y||"function"==typeof e.lift&&"function"==typeof e.subscribe)}var O=n(76565),A=n(26929),L=n(28782),F=n(81462),U=n(55709),K=n(93642),W=n(59026),V=n(17507);function H(e,t,n){if(t){if(!(0,V.K)(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return H(e,n).apply(void 0,r).pipe((0,U.U)((function(e){return(0,W.k)(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var o,s=this,a={context:s,subject:o,callbackFunc:e,scheduler:n};return new r.y((function(r){if(n){var i={args:t,subscriber:r,params:a};return n.schedule(B,0,i)}if(!o){o=new y;try{e.apply(s,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.next(e.length<=1?e[0]:e),o.complete()}]))}catch(e){(0,K._)(o)?o.error(e):console.warn(e)}}return o.subscribe(r)}))}}function B(e){var t=this,n=e.args,r=e.subscriber,i=e.params,o=i.callbackFunc,s=i.context,a=i.scheduler,c=i.subject;if(!c){c=i.subject=new y;try{o.apply(s,n.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length<=1?e[0]:e;t.add(a.schedule(q,0,{value:r,subject:c}))}]))}catch(e){c.error(e)}}this.add(c.subscribe(r))}function q(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function J(e,t,n){if(t){if(!(0,V.K)(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return J(e,n).apply(void 0,r).pipe((0,U.U)((function(e){return(0,W.k)(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var o={subject:void 0,args:t,callbackFunc:e,scheduler:n,context:this};return new r.y((function(r){var i=o.context,s=o.subject;if(n)return n.schedule($,0,{params:o,subscriber:r,context:i});if(!s){s=o.subject=new y;try{e.apply(i,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.shift();n?s.error(n):(s.next(e.length<=1?e[0]:e),s.complete())}]))}catch(e){(0,K._)(s)?s.error(e):console.warn(e)}}return s.subscribe(r)}))}}function $(e){var t=this,n=e.params,r=e.subscriber,i=e.context,o=n.callbackFunc,s=n.args,a=n.scheduler,c=n.subject;if(!c){c=n.subject=new y;try{o.apply(i,s.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.shift();if(r)t.add(a.schedule(z,0,{err:r,subject:c}));else{var i=e.length<=1?e[0]:e;t.add(a.schedule(G,0,{value:i,subject:c}))}}]))}catch(e){this.add(a.schedule(z,0,{err:e,subject:c}))}}this.add(c.subscribe(r))}function G(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function z(e){var t=e.err;e.subject.error(t)}var Y=n(75142),Q=n(18170),X=n(84551),Z=n(73049),ee=n(53109),te=n(91275),ne=n(76208),re=n(70336),ie=n(39217),oe=n(6727);function se(e,t){if(null!=e){if((0,ne.c)(e))return function(e,t){return new r.y((function(n){var r=new a.w;return r.add(t.schedule((function(){var i=e[h.L]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if((0,re.t)(e))return(0,Z.c)(e,t);if((0,ie.z)(e))return(0,ee.r)(e,t);if((0,oe.T)(e)||"string"==typeof e)return(0,te.Q)(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function ae(e,t){return t?se(e,t):e instanceof r.y?e:new r.y((0,X.s)(e))}var ce=n(17604);function le(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(r){return r.pipe(le((function(n,r){return ae(e(n,r)).pipe((0,U.U)((function(e,i){return t(n,e,r,i)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new ue(e,n))})}var ue=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new de(e,this.project,this.concurrent))},e}(),de=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i.ZT(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t)},t.prototype._innerSub=function(e){var t=new ce.IY(this),n=this.destination;n.add(t);var r=(0,ce.ft)(e,t);r!==t&&n.add(r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(ce.Ds);function pe(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),le(N.y,e)}function he(){return pe(1)}function fe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return he()(Q.of.apply(void 0,e))}var ge=n(5631);function me(e){return new r.y((function(t){var n;try{n=e()}catch(e){return void t.error(e)}return(n?ae(n):(0,ge.c)()).subscribe(t)}))}var ye=n(92009);function ve(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if((0,W.k)(n))return be(n,null);if((0,ye.K)(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return be(r.map((function(e){return n[e]})),r)}}if("function"==typeof e[e.length-1]){var i=e.pop();return be(e=1===e.length&&(0,W.k)(e[0])?e[0]:e,null).pipe((0,U.U)((function(e){return i.apply(void 0,e)})))}return be(e,null)}function be(e,t){return new r.y((function(n){var r=e.length;if(0!==r)for(var i=new Array(r),o=0,s=0,a=function(a){var c=ae(e[a]),l=!1;n.add(c.subscribe({next:function(e){l||(l=!0,s++),i[a]=e},error:function(e){return n.error(e)},complete:function(){++o!==r&&l||(s===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=i[n],e}),{}):i),n.complete())}}))},c=0;c<r;c++)a(c);else n.complete()}))}var we=n(14156);function Ce(e,t,n,i){return(0,we.m)(n)&&(i=n,n=void 0),i?Ce(e,t,n).pipe((0,U.U)((function(e){return(0,W.k)(e)?i.apply(void 0,e):i(e)}))):new r.y((function(r){Se(e,t,(function(e){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(e)}),r,n)}))}function Se(e,t,n,r,i){var o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){var s=e;e.addEventListener(t,n,i),o=function(){return s.removeEventListener(t,n,i)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){var a=e;e.on(t,n),o=function(){return a.off(t,n)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){var c=e;e.addListener(t,n),o=function(){return c.removeListener(t,n)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var l=0,u=e.length;l<u;l++)Se(e[l],t,n,r,i)}r.add(o)}function _e(e,t,n){return n?_e(e,t).pipe((0,U.U)((function(e){return(0,W.k)(e)?n.apply(void 0,e):n(e)}))):new r.y((function(n){var r,i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)};try{r=e(i)}catch(e){return void n.error(e)}if((0,we.m)(t))return function(){return t(i,r)}}))}function ke(e,t,n,i,o){var s,a;if(1==arguments.length){var c=e;a=c.initialState,t=c.condition,n=c.iterate,s=c.resultSelector||N.y,o=c.scheduler}else void 0===i||(0,V.K)(i)?(a=e,s=N.y,o=i):(a=e,s=i);return new r.y((function(e){var r=a;if(o)return o.schedule(Pe,0,{subscriber:e,iterate:n,condition:t,resultSelector:s,state:r});for(;;){if(t){var i=void 0;try{i=t(r)}catch(t){return void e.error(t)}if(!i){e.complete();break}}var c=void 0;try{c=s(r)}catch(t){return void e.error(t)}if(e.next(c),e.closed)break;try{r=n(r)}catch(t){return void e.error(t)}}}))}function Pe(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(n){var r=void 0;try{r=n(e.state)}catch(e){return void t.error(e)}if(!r)return void t.complete();if(t.closed)return}var i;try{i=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}}function Ie(e,t,n){return void 0===t&&(t=ge.E),void 0===n&&(n=ge.E),me((function(){return e()?t:n}))}var Ee=n(35812);function Te(e,t){return void 0===e&&(e=0),void 0===t&&(t=S),(!(0,Ee.k)(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=S),new r.y((function(n){return n.add(t.schedule(De,e,{subscriber:n,counter:0,period:e})),n}))}function De(e){var t=e.subscriber,n=e.counter,r=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}var xe=n(43375);function Re(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,i=null,o=e[e.length-1];return(0,V.K)(o)?(i=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof o&&(n=e.pop()),null===i&&1===e.length&&e[0]instanceof r.y?e[0]:pe(n)((0,xe.n)(e,i))}var je=new r.y(j.Z);function Ne(){return je}function Me(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return ge.E;var n=e[0],i=e.slice(1);return 1===e.length&&(0,W.k)(n)?Me.apply(void 0,n):new r.y((function(e){var t=function(){return e.add(Me.apply(void 0,i).subscribe(e))};return ae(n).subscribe({next:function(t){e.next(t)},error:t,complete:t})}))}function Oe(e,t){return t?new r.y((function(n){var r=Object.keys(e),i=new a.w;return i.add(t.schedule(Ae,0,{keys:r,index:0,subscriber:n,subscription:i,obj:e})),i})):new r.y((function(t){for(var n=Object.keys(e),r=0;r<n.length&&!t.closed;r++){var i=n[r];e.hasOwnProperty(i)&&t.next([i,e[i]])}t.complete()}))}function Ae(e){var t=e.keys,n=e.index,r=e.subscriber,i=e.subscription,o=e.obj;if(!r.closed)if(n<t.length){var s=t[n];r.next([s,o[s]]),i.add(this.schedule({keys:t,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}var Le=n(18463);function Fe(e,t){return function(n){return n.lift(new Ue(e,t))}}var Ue=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Ke(e,this.predicate,this.thisArg))},e}(),Ke=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return i.ZT(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(s.L);function We(e,t,n){return[Fe(t,n)(new r.y((0,X.s)(e))),Fe((0,Le.f)(t,n))(new r.y((0,X.s)(e)))]}var Ve=n(62039),He=n(47407);function Be(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!(0,W.k)(e[0]))return e[0];e=e[0]}return(0,xe.n)(e,void 0).lift(new qe)}var qe=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new Je(e))},e}(),Je=function(e){function t(t){var n=e.call(this,t)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return i.ZT(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=e[n],i=(0,He.D)(this,r,void 0,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},t.prototype.notifyNext=function(e,t,n){if(!this.hasFirst){this.hasFirst=!0;for(var r=0;r<this.subscriptions.length;r++)if(r!==n){var i=this.subscriptions[r];i.unsubscribe(),this.remove(i)}this.subscriptions=null}this.destination.next(t)},t}(Ve.L),$e=n(31898),Ge=n(64944);function ze(e,t,n){void 0===e&&(e=0);var i=-1;return(0,Ee.k)(t)?i=Number(t)<1?1:Number(t):(0,V.K)(t)&&(n=t),(0,V.K)(n)||(n=S),new r.y((function(t){var r=(0,Ee.k)(e)?e:+e-n.now();return n.schedule(Ye,r,{index:0,period:i,subscriber:t})}))}function Ye(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function Qe(e,t){return new r.y((function(n){var r,i;try{r=e()}catch(e){return void n.error(e)}try{i=t(r)}catch(e){return void n.error(e)}var o=(i?ae(i):ge.E).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}}))}var Xe=n(999);function Ze(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return"function"==typeof n&&e.pop(),(0,xe.n)(e,void 0).lift(new et(n))}var et=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new tt(e,this.resultSelector))},e}(),tt=function(e){function t(t,n,r){void 0===r&&(r=Object.create(null));var i=e.call(this,t)||this;return i.resultSelector=n,i.iterators=[],i.active=0,i.resultSelector="function"==typeof n?n:void 0,i}return i.ZT(t,e),t.prototype._next=function(e){var t=this.iterators;(0,W.k)(e)?t.push(new rt(e)):"function"==typeof e[Xe.hZ]?t.push(new nt(e[Xe.hZ]())):t.push(new it(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var n=0;n<t;n++){var r=e[n];r.stillUnsubscribed?this.destination.add(r.subscribe()):this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++)if("function"==typeof(s=e[r]).hasValue&&!s.hasValue())return;var i=!1,o=[];for(r=0;r<t;r++){var s,a=(s=e[r]).next();if(s.hasCompleted()&&(i=!0),a.done)return void n.complete();o.push(a.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),i&&n.complete()},t.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(s.L),nt=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return Boolean(e&&e.done)},e}(),rt=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[Xe.hZ]=function(){return this},e.prototype.next=function(e){var t=this.index++,n=this.array;return t<this.length?{value:n[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),it=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return i.ZT(t,e),t.prototype[Xe.hZ]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return(0,ce.ft)(this.observable,new ce.IY(this))},t}(ce.Ds),ot=n(30150)},25472:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AjaxError:()=>j,AjaxObservable:()=>D,AjaxResponse:()=>R,AjaxSubscriber:()=>x,AjaxTimeoutError:()=>M,AnonymousSubject:()=>a.ug,ArgumentOutOfRangeError:()=>ee.W,CombineLatestOperator:()=>W.Ms,EmptyError:()=>te.K,GroupedObservable:()=>G.T,Immediate:()=>ne.H,InnerSubscriber:()=>i.d,ObjectUnsubscribedError:()=>re.N,OuterSubscriber:()=>o.L,Scheduler:()=>s.b,SubjectSubscription:()=>c.W,SubscribeOnObservable:()=>q,Subscriber:()=>l.L,TimeInterval:()=>$,TimeoutError:()=>ie.W,Timestamp:()=>J,UnsubscriptionError:()=>oe.B,WebSocketSubject:()=>U,ajax:()=>O,ajaxDelete:()=>k,ajaxGet:()=>S,ajaxGetJSON:()=>T,ajaxPatch:()=>I,ajaxPost:()=>_,ajaxPut:()=>P,applyMixins:()=>se,config:()=>r.v,defaultThrottleConfig:()=>Y,dispatch:()=>V.W,errorObject:()=>ae,fromIterable:()=>m,fromPromise:()=>h,hostReportError:()=>ce.z,identity:()=>le.y,isArray:()=>ue.k,isArrayLike:()=>de.z,isDate:()=>pe,isFunction:()=>fe.m,isIterable:()=>ge.T,isNumeric:()=>B.k,isObject:()=>me.K,isObservable:()=>ye.c,isPromise:()=>ve.t,isScheduler:()=>be.K,iterator:()=>X.hZ,noop:()=>we.Z,not:()=>Ce.f,observable:()=>Z.L,pipe:()=>Se.z,root:()=>C,rxSubscriber:()=>Q.b,subscribeTo:()=>_e.s,subscribeToArray:()=>ke.V,subscribeToIterable:()=>f.u,subscribeToObservable:()=>Pe.h,subscribeToPromise:()=>d.A,subscribeToResult:()=>Ie.D,toSubscriber:()=>Ee.Y,tryCatch:()=>De,webSocket:()=>K});var r=n(30150),i=n(81112),o=n(62039),s=n(38725),a=n(70211),c=n(18253),l=n(10979),u=n(61244),d=n(51203),p=n(73049);function h(e,t){return t?(0,p.c)(e,t):new u.y((0,d.A)(e))}var f=n(52949),g=n(91275);function m(e,t){if(!e)throw new Error("Iterable cannot be null");return t?(0,g.Q)(e,t):new u.y((0,f.u)(e))}var y=n(35987),v="undefined"!=typeof window&&window,b="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,w=void 0!==n.g&&n.g,C=v||w||b;function S(e,t){return void 0===t&&(t=null),new D({method:"GET",url:e,headers:t})}function _(e,t,n){return new D({method:"POST",url:e,body:t,headers:n})}function k(e,t){return new D({method:"DELETE",url:e,headers:t})}function P(e,t,n){return new D({method:"PUT",url:e,body:t,headers:n})}function I(e,t,n){return new D({method:"PATCH",url:e,body:t,headers:n})}var E=(0,n(55709).U)((function(e,t){return e.response}));function T(e,t){return E(new D({method:"GET",url:e,responseType:"json",headers:t}))}var D=function(e){function t(t){var n=e.call(this)||this,r={async:!0,createXHR:function(){return this.crossDomain?function(){if(C.XMLHttpRequest)return new C.XMLHttpRequest;if(C.XDomainRequest)return new C.XDomainRequest;throw new Error("CORS is not supported by your browser")}():function(){if(C.XMLHttpRequest)return new C.XMLHttpRequest;var e=void 0;try{for(var t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=0;n<3;n++)try{if(e=t[n],new C.ActiveXObject(e))break}catch(e){}return new C.ActiveXObject(e)}catch(e){throw new Error("XMLHttpRequest is not supported by your browser")}}()},crossDomain:!0,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof t)r.url=t;else for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);return n.request=r,n}var n;return y.ZT(t,e),t.prototype._subscribe=function(e){return new x(e,this.request)},t.create=((n=function(e){return new t(e)}).get=S,n.post=_,n.delete=k,n.put=P,n.patch=I,n.getJSON=T,n),t}(u.y),x=function(e){function t(t,n){var r=e.call(this,t)||this;r.request=n,r.done=!1;var i=n.headers=n.headers||{};return n.crossDomain||r.getHeader(i,"X-Requested-With")||(i["X-Requested-With"]="XMLHttpRequest"),r.getHeader(i,"Content-Type")||C.FormData&&n.body instanceof C.FormData||void 0===n.body||(i["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),n.body=r.serializeBody(n.body,r.getHeader(n.headers,"Content-Type")),r.send(),r}return y.ZT(t,e),t.prototype.next=function(e){this.done=!0;var t,n=this,r=n.xhr,i=n.request,o=n.destination;try{t=new R(e,r,i)}catch(e){return o.error(e)}o.next(t)},t.prototype.send=function(){var e=this.request,t=this.request,n=t.user,r=t.method,i=t.url,o=t.async,s=t.password,a=t.headers,c=t.body;try{var l=this.xhr=e.createXHR();this.setupEvents(l,e),n?l.open(r,i,o,n,s):l.open(r,i,o),o&&(l.timeout=e.timeout,l.responseType=e.responseType),"withCredentials"in l&&(l.withCredentials=!!e.withCredentials),this.setHeaders(l,a),c?l.send(c):l.send()}catch(e){this.error(e)}},t.prototype.serializeBody=function(e,t){if(!e||"string"==typeof e)return e;if(C.FormData&&e instanceof C.FormData)return e;if(t){var n=t.indexOf(";");-1!==n&&(t=t.substring(0,n))}switch(t){case"application/x-www-form-urlencoded":return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&");case"application/json":return JSON.stringify(e);default:return e}},t.prototype.setHeaders=function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.setRequestHeader(n,t[n])},t.prototype.getHeader=function(e,t){for(var n in e)if(n.toLowerCase()===t.toLowerCase())return e[n]},t.prototype.setupEvents=function(e,t){var n,r,i=t.progressSubscriber;function o(e){var t,n=o,r=n.subscriber,i=n.progressSubscriber,s=n.request;i&&i.error(e);try{t=new M(this,s)}catch(e){t=e}r.error(t)}(e.ontimeout=o,o.request=t,o.subscriber=this,o.progressSubscriber=i,e.upload&&"withCredentials"in e)&&(i&&(n=function(e){n.progressSubscriber.next(e)},C.XDomainRequest?e.onprogress=n:e.upload.onprogress=n,n.progressSubscriber=i),r=function(e){var t,n=r,i=n.progressSubscriber,o=n.subscriber,s=n.request;i&&i.error(e);try{t=new j("ajax error",this,s)}catch(e){t=e}o.error(t)},e.onerror=r,r.request=t,r.subscriber=this,r.progressSubscriber=i);function s(e){}function a(e){var t=a,n=t.subscriber,r=t.progressSubscriber,i=t.request;if(4===this.readyState){var o=1223===this.status?204:this.status,s="text"===this.responseType?this.response||this.responseText:this.response;if(0===o&&(o=s?200:0),o<400)r&&r.complete(),n.next(e),n.complete();else{r&&r.error(e);var c=void 0;try{c=new j("ajax error "+o,this,i)}catch(e){c=e}n.error(c)}}}e.onreadystatechange=s,s.subscriber=this,s.progressSubscriber=i,s.request=t,e.onload=a,a.subscriber=this,a.progressSubscriber=i,a.request=t},t.prototype.unsubscribe=function(){var t=this.done,n=this.xhr;!t&&n&&4!==n.readyState&&"function"==typeof n.abort&&n.abort(),e.prototype.unsubscribe.call(this)},t}(l.L),R=function(){return function(e,t,n){this.originalEvent=e,this.xhr=t,this.request=n,this.status=t.status,this.responseType=t.responseType||n.responseType,this.response=N(this.responseType,t)}}(),j=function(){function e(e,t,n){return Error.call(this),this.message=e,this.name="AjaxError",this.xhr=t,this.request=n,this.status=t.status,this.responseType=t.responseType||n.responseType,this.response=N(this.responseType,t),this}return e.prototype=Object.create(Error.prototype),e}();function N(e,t){switch(e){case"json":return function(e){return"response"in e?e.responseType?e.response:JSON.parse(e.response||e.responseText||"null"):JSON.parse(e.responseText||"null")}(t);case"xml":return t.responseXML;default:return"response"in t?t.response:t.responseText}}var M=function(e,t){return j.call(this,"ajax timeout",e,t),this.name="AjaxTimeoutError",this},O=function(){return D.create}(),A=n(98760),L=n(32993),F={url:"",deserializer:function(e){return JSON.parse(e.data)},serializer:function(e){return JSON.stringify(e)}},U=function(e){function t(t,n){var r=e.call(this)||this;if(t instanceof u.y)r.destination=n,r.source=t;else{var i=r._config=y.pi({},F);if(r._output=new a.xQ,"string"==typeof t)i.url=t;else for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o]);if(!i.WebSocketCtor&&WebSocket)i.WebSocketCtor=WebSocket;else if(!i.WebSocketCtor)throw new Error("no WebSocket constructor can be found");r.destination=new L.t}return r}return y.ZT(t,e),t.prototype.lift=function(e){var n=new t(this._config,this.destination);return n.operator=e,n.source=this,n},t.prototype._resetState=function(){this._socket=null,this.source||(this.destination=new L.t),this._output=new a.xQ},t.prototype.multiplex=function(e,t,n){var r=this;return new u.y((function(i){try{r.next(e())}catch(e){i.error(e)}var o=r.subscribe((function(e){try{n(e)&&i.next(e)}catch(e){i.error(e)}}),(function(e){return i.error(e)}),(function(){return i.complete()}));return function(){try{r.next(t())}catch(e){i.error(e)}o.unsubscribe()}}))},t.prototype._connectSocket=function(){var e=this,t=this._config,n=t.WebSocketCtor,r=t.protocol,i=t.url,o=t.binaryType,s=this._output,a=null;try{a=r?new n(i,r):new n(i),this._socket=a,o&&(this._socket.binaryType=o)}catch(e){return void s.error(e)}var c=new A.w((function(){e._socket=null,a&&1===a.readyState&&a.close()}));a.onopen=function(t){if(!e._socket)return a.close(),void e._resetState();var n=e._config.openObserver;n&&n.next(t);var r=e.destination;e.destination=l.L.create((function(t){if(1===a.readyState)try{var n=e._config.serializer;a.send(n(t))}catch(t){e.destination.error(t)}}),(function(t){var n=e._config.closingObserver;n&&n.next(void 0),t&&t.code?a.close(t.code,t.reason):s.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),e._resetState()}),(function(){var t=e._config.closingObserver;t&&t.next(void 0),a.close(),e._resetState()})),r&&r instanceof L.t&&c.add(r.subscribe(e.destination))},a.onerror=function(t){e._resetState(),s.error(t)},a.onclose=function(t){e._resetState();var n=e._config.closeObserver;n&&n.next(t),t.wasClean?s.complete():s.error(t)},a.onmessage=function(t){try{var n=e._config.deserializer;s.next(n(t))}catch(e){s.error(e)}}},t.prototype._subscribe=function(e){var t=this,n=this.source;return n?n.subscribe(e):(this._socket||this._connectSocket(),this._output.subscribe(e),e.add((function(){var e=t._socket;0===t._output.observers.length&&(e&&1===e.readyState&&e.close(),t._resetState())})),e)},t.prototype.unsubscribe=function(){var t=this._socket;t&&1===t.readyState&&t.close(),this._resetState(),e.prototype.unsubscribe.call(this)},t}(a.ug);function K(e){return new U(e)}var W=n(75142),V=n(31898),H=n(77681),B=n(35812),q=function(e){function t(t,n,r){void 0===n&&(n=0),void 0===r&&(r=H.e);var i=e.call(this)||this;return i.source=t,i.delayTime=n,i.scheduler=r,(!(0,B.k)(n)||n<0)&&(i.delayTime=0),r&&"function"==typeof r.schedule||(i.scheduler=H.e),i}return y.ZT(t,e),t.create=function(e,n,r){return void 0===n&&(n=0),void 0===r&&(r=H.e),new t(e,n,r)},t.dispatch=function(e){var t=e.source,n=e.subscriber;return this.add(t.subscribe(n))},t.prototype._subscribe=function(e){var n=this.delayTime,r=this.source;return this.scheduler.schedule(t.dispatch,n,{source:r,subscriber:e})},t}(u.y),J=function(){return function(e,t){this.value=e,this.timestamp=t}}(),$=function(){return function(e,t){this.value=e,this.interval=t}}(),G=n(11120),z=n(17604),Y={leading:!0,trailing:!1};z.Ds;var Q=n(23142),X=n(999),Z=n(15050),ee=n(76565),te=n(26929),ne=n(78147),re=n(41016),ie=n(81462),oe=n(28782);function se(e,t){for(var n=0,r=t.length;n<r;n++)for(var i=t[n],o=Object.getOwnPropertyNames(i.prototype),s=0,a=o.length;s<a;s++){var c=o[s];e.prototype[c]=i.prototype[c]}}var ae={e:{}},ce=n(71644),le=n(43608),ue=n(59026),de=n(39217);function pe(e){return e instanceof Date&&!isNaN(+e)}var he,fe=n(14156),ge=n(6727),me=n(92009),ye=n(76208),ve=n(70336),be=n(17507),we=n(33306),Ce=n(18463),Se=n(62561),_e=n(84551),ke=n(56900),Pe=n(24105),Ie=n(47407),Ee=n(3680);function Te(){ae.e=void 0;try{return he.apply(this,arguments)}catch(e){return ae.e=e,ae}finally{he=void 0}}function De(e){return he=e,Te}},81112:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});var r=n(35987),i=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return r.ZT(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(n(10979).L)},42632:(e,t,n)=>{"use strict";n.d(t,{P:()=>a,W:()=>r});var r,i=n(5631),o=n(18170),s=n(64944);r||(r={});var a=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return(0,o.of)(this.value);case"E":return(0,s._)(this.error);case"C":return(0,i.c)()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}()},61244:(e,t,n)=>{"use strict";n.d(t,{y:()=>c});var r=n(93642),i=n(3680),o=n(15050),s=n(62561),a=n(30150),c=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=(0,i.Y)(e,t,n);if(r?o.add(r.call(o,this.source)):o.add(this.source||a.v.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),a.v.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){a.v.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),(0,r._)(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=l(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[o.L]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:(0,s.U)(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=l(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function l(e){if(e||(e=a.v.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},32174:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});var r=n(30150),i=n(71644),o={closed:!0,next:function(e){},error:function(e){if(r.v.useDeprecatedSynchronousErrorHandling)throw e;(0,i.z)(e)},complete:function(){}}},62039:(e,t,n)=>{"use strict";n.d(t,{L:()=>i});var r=n(35987),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.ZT(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(n(10979).L)},32993:(e,t,n)=>{"use strict";n.d(t,{t:()=>h});var r=n(35987),i=n(70211),o=n(92546),s=n(98760),a=n(10979),c=n(42632),l=function(e){function t(t,n,r){void 0===r&&(r=0);var i=e.call(this,t)||this;return i.scheduler=n,i.delay=r,i}return r.ZT(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new u(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(c.P.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(c.P.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(c.P.createComplete()),this.unsubscribe()},t}(a.L),u=function(){return function(e,t){this.notification=e,this.destination=t}}(),d=n(41016),p=n(18253),h=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=t<1?1:t,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return r.ZT(t,e),t.prototype.nextInfiniteTimeWindow=function(t){if(!this.isStopped){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift()}e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this.isStopped||(this._events.push(new f(this._getNow(),t)),this._trimBufferThenGetEvents()),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new d.N;if(this.isStopped||this.hasError?t=s.w.EMPTY:(this.observers.push(e),t=new p.W(this,e)),i&&e.add(e=new l(e,i)),n)for(var a=0;a<o&&!e.closed;a++)e.next(r[a]);else for(a=0;a<o&&!e.closed;a++)e.next(r[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||o.c).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r},t}(i.xQ),f=function(){return function(e,t){this.time=e,this.value=t}}()},38725:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});var r=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}()},70211:(e,t,n)=>{"use strict";n.d(t,{Yc:()=>u,ug:()=>p,xQ:()=>d});var r=n(35987),i=n(61244),o=n(10979),s=n(98760),a=n(41016),c=n(18253),l=n(23142),u=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return r.ZT(t,e),t}(o.L),d=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r.ZT(t,e),t.prototype[l.b]=function(){return new u(this)},t.prototype.lift=function(e){var t=new p(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new a.N;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new a.N;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new a.N;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new a.N;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new a.N;return this.hasError?(e.error(this.thrownError),s.w.EMPTY):this.isStopped?(e.complete(),s.w.EMPTY):(this.observers.push(e),new c.W(this,e))},t.prototype.asObservable=function(){var e=new i.y;return e.source=this,e},t.create=function(e,t){return new p(e,t)},t}(i.y),p=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return r.ZT(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):s.w.EMPTY},t}(d)},18253:(e,t,n)=>{"use strict";n.d(t,{W:()=>i});var r=n(35987),i=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return r.ZT(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(n(98760).w)},10979:(e,t,n)=>{"use strict";n.d(t,{L:()=>u});var r=n(35987),i=n(14156),o=n(32174),s=n(98760),a=n(23142),c=n(30150),l=n(71644),u=function(e){function t(n,r,i){var s=e.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=o.c;break;case 1:if(!n){s.destination=o.c;break}if("object"==typeof n){n instanceof t?(s.syncErrorThrowable=n.syncErrorThrowable,s.destination=n,n.add(s)):(s.syncErrorThrowable=!0,s.destination=new d(s,n));break}default:s.syncErrorThrowable=!0,s.destination=new d(s,n,r,i)}return s}return r.ZT(t,e),t.prototype[a.b]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(s.w),d=function(e){function t(t,n,r,s){var a,c=e.call(this)||this;c._parentSubscriber=t;var l=c;return(0,i.m)(n)?a=n:n&&(a=n.next,r=n.error,s=n.complete,n!==o.c&&(l=Object.create(n),(0,i.m)(l.unsubscribe)&&c.add(l.unsubscribe.bind(l)),l.unsubscribe=c.unsubscribe.bind(c))),c._context=l,c._next=a,c._error=r,c._complete=s,c}return r.ZT(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;c.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=c.v.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,l.z)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;(0,l.z)(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};c.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),c.v.useDeprecatedSynchronousErrorHandling)throw e;(0,l.z)(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!c.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return c.v.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):((0,l.z)(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(u)},98760:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});var r=n(59026),i=n(92009),o=n(14156),s=n(28782),a=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this,a=n._parentOrParents,l=n._ctorUnsubscribe,u=n._unsubscribe,d=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,a instanceof e)a.remove(this);else if(null!==a)for(var p=0;p<a.length;++p)a[p].remove(this);if((0,o.m)(u)){l&&(this._unsubscribe=void 0);try{u.call(this)}catch(e){t=e instanceof s.B?c(e.errors):[e]}}if((0,r.k)(d)){p=-1;for(var h=d.length;++p<h;){var f=d[p];if((0,i.K)(f))try{f.unsubscribe()}catch(e){t=t||[],e instanceof s.B?t=t.concat(c(e.errors)):t.push(e)}}}if(t)throw new s.B(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=((t=new e).closed=!0,t),e}();function c(e){return e.reduce((function(e,t){return e.concat(t instanceof s.B?t.errors:t)}),[])}},30150:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},17604:(e,t,n)=>{"use strict";n.d(t,{Ds:()=>c,IY:()=>a,ft:()=>l});var r=n(35987),i=n(10979),o=n(61244),s=n(84551),a=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,n}return r.ZT(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(i.L),c=(i.L,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.ZT(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(i.L));function l(e,t){if(!t.closed){if(e instanceof o.y)return e.subscribe(t);var n;try{n=(0,s.s)(e)(t)}catch(e){t.error(e)}return n}}i.L},75142:(e,t,n)=>{"use strict";n.d(t,{Ms:()=>d,aj:()=>u});var r=n(35987),i=n(17507),o=n(59026),s=n(62039),a=n(47407),c=n(43375),l={};function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=void 0,r=void 0;return(0,i.K)(e[e.length-1])&&(r=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&(0,o.k)(e[0])&&(e=e[0]),(0,c.n)(e,r).lift(new d(n))}var d=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new p(e,this.resultSelector))},e}(),p=function(e){function t(t,n){var r=e.call(this,t)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return r.ZT(t,e),t.prototype._next=function(e){this.values.push(l),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add((0,a.D)(this,r,void 0,n))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n){var r=this.values,i=r[n],o=this.toRespond?i===l?--this.toRespond:this.toRespond:0;r[n]=t,0===o&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(s.L)},5631:(e,t,n)=>{"use strict";n.d(t,{E:()=>i,c:()=>o});var r=n(61244),i=new r.y((function(e){return e.complete()}));function o(e){return e?function(e){return new r.y((function(t){return e.schedule((function(){return t.complete()}))}))}(e):i}},43375:(e,t,n)=>{"use strict";n.d(t,{n:()=>s});var r=n(61244),i=n(56900),o=n(53109);function s(e,t){return t?(0,o.r)(e,t):new r.y((0,i.V)(e))}},18170:(e,t,n)=>{"use strict";n.d(t,{of:()=>s});var r=n(17507),i=n(43375),o=n(53109);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return(0,r.K)(n)?(e.pop(),(0,o.r)(e,n)):(0,i.n)(e)}},31898:(e,t,n)=>{"use strict";n.d(t,{W:()=>o,w:()=>i});var r=n(61244);function i(e,t,n){return void 0===e&&(e=0),new r.y((function(r){void 0===t&&(t=e,e=0);var i=0,s=e;if(n)return n.schedule(o,0,{index:i,count:t,start:e,subscriber:r});for(;;){if(i++>=t){r.complete();break}if(r.next(s++),r.closed)break}}))}function o(e){var t=e.start,n=e.index,r=e.count,i=e.subscriber;n>=r?i.complete():(i.next(t),i.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))}},64944:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var r=n(61244);function i(e,t){return t?new r.y((function(n){return t.schedule(o,0,{error:e,subscriber:n})})):new r.y((function(t){return t.error(e)}))}function o(e){var t=e.error;e.subscriber.error(t)}},11120:(e,t,n)=>{"use strict";n.d(t,{T:()=>a});var r=n(35987),i=n(10979),o=n(98760),s=n(61244);n(70211);i.L;i.L;var a=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.groupSubject=n,i.refCountSubscription=r,i}return r.ZT(t,e),t.prototype._subscribe=function(e){var t=new o.w,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&t.add(new c(n)),t.add(r.subscribe(e)),t},t}(s.y),c=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,t.count++,n}return r.ZT(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(o.w)},55709:(e,t,n)=>{"use strict";n.d(t,{U:()=>o});var r=n(35987),i=n(10979);function o(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(e,t))}}var s=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.project,this.thisArg))},e}(),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return r.ZT(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(i.L)},53109:(e,t,n)=>{"use strict";n.d(t,{r:()=>o});var r=n(61244),i=n(98760);function o(e,t){return new r.y((function(n){var r=new i.w,o=0;return r.add(t.schedule((function(){o!==e.length?(n.next(e[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}},91275:(e,t,n)=>{"use strict";n.d(t,{Q:()=>s});var r=n(61244),i=n(98760),o=n(999);function s(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.y((function(n){var r,s=new i.w;return s.add((function(){r&&"function"==typeof r.return&&r.return()})),s.add(t.schedule((function(){r=e[o.hZ](),s.add(t.schedule((function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}})))}))),s}))}},73049:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});var r=n(61244),i=n(98760);function o(e,t){return new r.y((function(n){var r=new i.w;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}},96114:(e,t,n)=>{"use strict";n.d(t,{o:()=>i});var r=n(35987),i=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return r.ZT(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return r.ZT(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(n(98760).w))},78399:(e,t,n)=>{"use strict";n.d(t,{v:()=>o});var r=n(35987),i=n(38725),o=function(e){function t(n,r){void 0===r&&(r=i.b.now);var o=e.call(this,n,(function(){return t.delegate&&t.delegate!==o?t.delegate.now():r()}))||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return r.ZT(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(i.b)},77681:(e,t,n)=>{"use strict";n.d(t,{e:()=>a,E:()=>s});var r=n(35987),i=n(78147),o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return r.ZT(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=i.H.setImmediate(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(i.H.clearImmediate(n),t.scheduled=void 0)},t}(n(96114).o),s=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.ZT(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(n(78399).v))(o),a=s},92546:(e,t,n)=>{"use strict";n.d(t,{c:()=>s,N:()=>o});var r=n(35987),i=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return r.ZT(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(n(96114).o),o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.ZT(t,e),t}(n(78399).v))(i),s=o},999:(e,t,n)=>{"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(t,{hZ:()=>i});var i=r()},15050:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});var r=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}()},23142:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});var r=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}()},76565:(e,t,n)=>{"use strict";n.d(t,{W:()=>r});var r=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}()},26929:(e,t,n)=>{"use strict";n.d(t,{K:()=>r});var r=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}()},78147:(e,t,n)=>{"use strict";n.d(t,{H:()=>a});var r=1,i=function(){return Promise.resolve()}(),o={};function s(e){return e in o&&(delete o[e],!0)}var a={setImmediate:function(e){var t=r++;return o[t]=!0,i.then((function(){return s(t)&&e()})),t},clearImmediate:function(e){s(e)}}},41016:(e,t,n)=>{"use strict";n.d(t,{N:()=>r});var r=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}()},81462:(e,t,n)=>{"use strict";n.d(t,{W:()=>r});var r=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}()},28782:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});var r=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}()},93642:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var r=n(10979);function i(e){for(;e;){var t=e,n=t.closed,i=t.destination,o=t.isStopped;if(n||o)return!1;e=i&&i instanceof r.L?i:null}return!0}},71644:(e,t,n)=>{"use strict";function r(e){setTimeout((function(){throw e}),0)}n.d(t,{z:()=>r})},43608:(e,t,n)=>{"use strict";function r(e){return e}n.d(t,{y:()=>r})},59026:(e,t,n)=>{"use strict";n.d(t,{k:()=>r});var r=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}()},39217:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});var r=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},14156:(e,t,n)=>{"use strict";function r(e){return"function"==typeof e}n.d(t,{m:()=>r})},76208:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});var r=n(15050);function i(e){return e&&"function"==typeof e[r.L]}},6727:(e,t,n)=>{"use strict";n.d(t,{T:()=>i});var r=n(999);function i(e){return e&&"function"==typeof e[r.hZ]}},35812:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});var r=n(59026);function i(e){return!(0,r.k)(e)&&e-parseFloat(e)+1>=0}},92009:(e,t,n)=>{"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,{K:()=>r})},70336:(e,t,n)=>{"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,{t:()=>r})},17507:(e,t,n)=>{"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,{K:()=>r})},33306:(e,t,n)=>{"use strict";function r(){}n.d(t,{Z:()=>r})},18463:(e,t,n)=>{"use strict";function r(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}n.d(t,{f:()=>r})},62561:(e,t,n)=>{"use strict";n.d(t,{U:()=>o,z:()=>i});var r=n(43608);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o(e)}function o(e){return 0===e.length?r.y:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}},84551:(e,t,n)=>{"use strict";n.d(t,{s:()=>p});var r=n(56900),i=n(51203),o=n(52949),s=n(24105),a=n(39217),c=n(70336),l=n(92009),u=n(999),d=n(15050),p=function(e){if(e&&"function"==typeof e[d.L])return(0,s.h)(e);if((0,a.z)(e))return(0,r.V)(e);if((0,c.t)(e))return(0,i.A)(e);if(e&&"function"==typeof e[u.hZ])return(0,o.u)(e);var t=(0,l.K)(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},56900:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});var r=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}}},52949:(e,t,n)=>{"use strict";n.d(t,{u:()=>i});var r=n(999),i=function(e){return function(t){for(var n=e[r.hZ]();;){var i=void 0;try{i=n.next()}catch(e){return t.error(e),t}if(i.done){t.complete();break}if(t.next(i.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t}}},24105:(e,t,n)=>{"use strict";n.d(t,{h:()=>i});var r=n(15050),i=function(e){return function(t){var n=e[r.L]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}}},51203:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(71644),i=function(e){return function(t){return e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,r.z),t}}},47407:(e,t,n)=>{"use strict";n.d(t,{D:()=>s});var r=n(81112),i=n(84551),o=n(61244);function s(e,t,n,s,a){if(void 0===a&&(a=new r.d(e,n,s)),!a.closed)return t instanceof o.y?t.subscribe(a):(0,i.s)(t)(a)}},3680:(e,t,n)=>{"use strict";n.d(t,{Y:()=>s});var r=n(10979),i=n(23142),o=n(32174);function s(e,t,n){if(e){if(e instanceof r.L)return e;if(e[i.b])return e[i.b]()}return e||t||n?new r.L(e,t,n):new r.L(o.c)}},35987:(e,t,n)=>{"use strict";n.d(t,{ZT:()=>i,pi:()=>o});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)}},36625:(e,t,n)=>{var r,i=n(34155);t=e.exports=G,r=i.env&&i.env.NODE_DEBUG&&/\bsemver\b/i.test(i.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var o=Number.MAX_SAFE_INTEGER||9007199254740991,s=t.re=[],a=t.src=[],c=0,l=c++;a[l]="0|[1-9]\\d*";var u=c++;a[u]="[0-9]+";var d=c++;a[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=c++;a[p]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var h=c++;a[h]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var f=c++;a[f]="(?:"+a[l]+"|"+a[d]+")";var g=c++;a[g]="(?:"+a[u]+"|"+a[d]+")";var m=c++;a[m]="(?:-("+a[f]+"(?:\\."+a[f]+")*))";var y=c++;a[y]="(?:-?("+a[g]+"(?:\\."+a[g]+")*))";var v=c++;a[v]="[0-9A-Za-z-]+";var b=c++;a[b]="(?:\\+("+a[v]+"(?:\\."+a[v]+")*))";var w=c++,C="v?"+a[p]+a[m]+"?"+a[b]+"?";a[w]="^"+C+"$";var S="[v=\\s]*"+a[h]+a[y]+"?"+a[b]+"?",_=c++;a[_]="^"+S+"$";var k=c++;a[k]="((?:<|>)?=?)";var P=c++;a[P]=a[u]+"|x|X|\\*";var I=c++;a[I]=a[l]+"|x|X|\\*";var E=c++;a[E]="[v=\\s]*("+a[I]+")(?:\\.("+a[I]+")(?:\\.("+a[I]+")(?:"+a[m]+")?"+a[b]+"?)?)?";var T=c++;a[T]="[v=\\s]*("+a[P]+")(?:\\.("+a[P]+")(?:\\.("+a[P]+")(?:"+a[y]+")?"+a[b]+"?)?)?";var D=c++;a[D]="^"+a[k]+"\\s*"+a[E]+"$";var x=c++;a[x]="^"+a[k]+"\\s*"+a[T]+"$";var R=c++;a[R]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var j=c++;a[j]="(?:~>?)";var N=c++;a[N]="(\\s*)"+a[j]+"\\s+",s[N]=new RegExp(a[N],"g");var M=c++;a[M]="^"+a[j]+a[E]+"$";var O=c++;a[O]="^"+a[j]+a[T]+"$";var A=c++;a[A]="(?:\\^)";var L=c++;a[L]="(\\s*)"+a[A]+"\\s+",s[L]=new RegExp(a[L],"g");var F=c++;a[F]="^"+a[A]+a[E]+"$";var U=c++;a[U]="^"+a[A]+a[T]+"$";var K=c++;a[K]="^"+a[k]+"\\s*("+S+")$|^$";var W=c++;a[W]="^"+a[k]+"\\s*("+C+")$|^$";var V=c++;a[V]="(\\s*)"+a[k]+"\\s*("+S+"|"+a[E]+")",s[V]=new RegExp(a[V],"g");var H=c++;a[H]="^\\s*("+a[E]+")\\s+-\\s+("+a[E]+")\\s*$";var B=c++;a[B]="^\\s*("+a[T]+")\\s+-\\s+("+a[T]+")\\s*$";var q=c++;a[q]="(<|>)?=?\\s*\\*";for(var J=0;J<35;J++)r(J,a[J]),s[J]||(s[J]=new RegExp(a[J]));function $(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof G)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?s[_]:s[w]).test(e))return null;try{return new G(e,t)}catch(e){return null}}function G(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof G){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof G))return new G(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var n=e.trim().match(t.loose?s[_]:s[w]);if(!n)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}t.parse=$,t.valid=function(e,t){var n=$(e,t);return n?n.version:null},t.clean=function(e,t){var n=$(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=G,G.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},G.prototype.toString=function(){return this.version},G.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof G||(e=new G(e,this.options)),this.compareMain(e)||this.comparePre(e)},G.prototype.compareMain=function(e){return e instanceof G||(e=new G(e,this.options)),Y(this.major,e.major)||Y(this.minor,e.minor)||Y(this.patch,e.patch)},G.prototype.comparePre=function(e){if(e instanceof G||(e=new G(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return Y(n,i)}while(++t)},G.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new G(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(ee(e,t))return null;var n=$(e),r=$(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n)if(("major"===s||"minor"===s||"patch"===s)&&n[s]!==r[s])return i+s;return o},t.compareIdentifiers=Y;var z=/^[0-9]+$/;function Y(e,t){var n=z.test(e),r=z.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function Q(e,t,n){return new G(e,n).compare(new G(t,n))}function X(e,t,n){return Q(e,t,n)>0}function Z(e,t,n){return Q(e,t,n)<0}function ee(e,t,n){return 0===Q(e,t,n)}function te(e,t,n){return 0!==Q(e,t,n)}function ne(e,t,n){return Q(e,t,n)>=0}function re(e,t,n){return Q(e,t,n)<=0}function ie(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return ee(e,n,r);case"!=":return te(e,n,r);case">":return X(e,n,r);case">=":return ne(e,n,r);case"<":return Z(e,n,r);case"<=":return re(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function oe(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof oe){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof oe))return new oe(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===se?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return Y(t,e)},t.major=function(e,t){return new G(e,t).major},t.minor=function(e,t){return new G(e,t).minor},t.patch=function(e,t){return new G(e,t).patch},t.compare=Q,t.compareLoose=function(e,t){return Q(e,t,!0)},t.rcompare=function(e,t,n){return Q(t,e,n)},t.sort=function(e,n){return e.sort((function(e,r){return t.compare(e,r,n)}))},t.rsort=function(e,n){return e.sort((function(e,r){return t.rcompare(e,r,n)}))},t.gt=X,t.lt=Z,t.eq=ee,t.neq=te,t.gte=ne,t.lte=re,t.cmp=ie,t.Comparator=oe;var se={};function ae(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ae)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new ae(e.raw,t);if(e instanceof oe)return new ae(e.value,t);if(!(this instanceof ae))return new ae(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ce(e){return!e||"x"===e.toLowerCase()||"*"===e}function le(e,t,n,r,i,o,s,a,c,l,u,d,p){return((t=ce(n)?"":ce(r)?">="+n+".0.0":ce(i)?">="+n+"."+r+".0":">="+t)+" "+(a=ce(c)?"":ce(l)?"<"+(+c+1)+".0.0":ce(u)?"<"+c+"."+(+l+1)+".0":d?"<="+c+"."+l+"."+u+"-"+d:"<="+a)).trim()}function ue(e,t,n){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(i=0;i<e.length;i++)if(r(e[i].semver),e[i].semver!==se&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function de(e,t,n){try{t=new ae(t,n)}catch(e){return!1}return t.test(e)}function pe(e,t,n,r){var i,o,s,a,c;switch(e=new G(e,r),t=new ae(t,r),n){case">":i=X,o=re,s=Z,a=">",c=">=";break;case"<":i=Z,o=ne,s=X,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(de(e,t,r))return!1;for(var l=0;l<t.set.length;++l){var u=t.set[l],d=null,p=null;if(u.forEach((function(e){e.semver===se&&(e=new oe(">=0.0.0")),d=d||e,p=p||e,i(e.semver,d.semver,r)?d=e:s(e.semver,p.semver,r)&&(p=e)})),d.operator===a||d.operator===c)return!1;if((!p.operator||p.operator===a)&&o(e,p.semver))return!1;if(p.operator===c&&s(e,p.semver))return!1}return!0}oe.prototype.parse=function(e){var t=this.options.loose?s[K]:s[W],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new G(n[2],this.options.loose):this.semver=se},oe.prototype.toString=function(){return this.value},oe.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===se||("string"==typeof e&&(e=new G(e,this.options)),ie(e,this.operator,this.semver,this.options))},oe.prototype.intersects=function(e,t){if(!(e instanceof oe))throw new TypeError("a Comparator is required");var n;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return n=new ae(e.value,t),de(this.value,n,t);if(""===e.operator)return n=new ae(this.value,t),de(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ie(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ie(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&s||a||c},t.Range=ae,ae.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},ae.prototype.toString=function(){return this.range},ae.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?s[B]:s[H];e=e.replace(n,le),r("hyphen replace",e),e=e.replace(s[V],"$1$2$3"),r("comparator trim",e,s[V]),e=(e=(e=e.replace(s[N],"$1~")).replace(s[L],"$1^")).split(/\s+/).join(" ");var i=t?s[K]:s[W],o=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?s[U]:s[F];return e.replace(n,(function(t,n,i,o,s){var a;return r("caret",e,t,n,i,o,s),ce(n)?a="":ce(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ce(o)?a="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":s?(r("replaceCaret pr",s),a="0"===n?"0"===i?">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+"-"+s+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===i?">="+n+"."+i+"."+o+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+" <"+(+n+1)+".0.0"),r("caret return",a),a}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?s[O]:s[M];return e.replace(n,(function(t,n,i,o,s){var a;return r("tilde",e,t,n,i,o,s),ce(n)?a="":ce(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ce(o)?a=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":s?(r("replaceTilde pr",s),a=">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0"):a=">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0",r("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?s[x]:s[D];return e.replace(n,(function(t,n,i,o,s,a){r("xRange",e,t,n,i,o,s,a);var c=ce(i),l=c||ce(o),u=l||ce(s);return"="===n&&u&&(n=""),c?t=">"===n||"<"===n?"<0.0.0":"*":n&&u?(l&&(o=0),s=0,">"===n?(n=">=",l?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===n&&(n="<",l?i=+i+1:o=+o+1),t=n+i+"."+o+"."+s):l?t=">="+i+".0.0 <"+(+i+1)+".0.0":u&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),r("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(s[q],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(o=o.filter((function(e){return!!e.match(i)}))),o.map((function(e){return new oe(e,this.options)}),this)},ae.prototype.intersects=function(e,t){if(!(e instanceof ae))throw new TypeError("a Range is required");return this.set.some((function(n){return n.every((function(n){return e.set.some((function(e){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new ae(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},ae.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new G(e,this.options));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1},t.satisfies=de,t.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new ae(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&-1!==i.compare(e)||(i=new G(r=e,n)))})),r},t.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new ae(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&1!==i.compare(e)||(i=new G(r=e,n)))})),r},t.minVersion=function(e,t){e=new ae(e,t);var n=new G("0.0.0");if(e.test(n))return n;if(n=new G("0.0.0-0"),e.test(n))return n;n=null;for(var r=0;r<e.set.length;++r)e.set[r].forEach((function(e){var t=new G(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!X(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return n&&e.test(n)?n:null},t.validRange=function(e,t){try{return new ae(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return pe(e,t,"<",n)},t.gtr=function(e,t,n){return pe(e,t,">",n)},t.outside=pe,t.prerelease=function(e,t){var n=$(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new ae(e,n),t=new ae(t,n),e.intersects(t)},t.coerce=function(e){if(e instanceof G)return e;if("string"!=typeof e)return null;var t=e.match(s[R]);return null==t?null:$(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}},77911:(e,t)=>{function n(e){for(var t in e)this[t]=e[t]}t.get=function(e){var n=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var r={},i=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t},Error.captureStackTrace(r,e||t.get);var o=r.stack;return Error.prepareStackTrace=i,Error.stackTraceLimit=n,o},t.parse=function(e){if(!e.stack)return[];var t=this;return e.stack.split("\n").slice(1).map((function(e){if(e.match(/^\s*[-]{4,}$/))return t._createParsedCallSite({fileName:e,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var n=e.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(n){var r=null,i=null,o=null,s=null,a=null,c="native"===n[5];if(n[1]){var l=(o=n[1]).lastIndexOf(".");if("."==o[l-1]&&l--,l>0){r=o.substr(0,l),i=o.substr(l+1);var u=r.indexOf(".Module");u>0&&(o=o.substr(u+1),r=r.substr(0,u))}s=null}i&&(s=r,a=i),"<anonymous>"===i&&(a=null,o=null);var d={fileName:n[2]||null,lineNumber:parseInt(n[3],10)||null,functionName:o,typeName:s,methodName:a,columnNumber:parseInt(n[4],10)||null,native:c};return t._createParsedCallSite(d)}})).filter((function(e){return!!e}))},["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"].forEach((function(e){n.prototype[e]=null,n.prototype["get"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}})),["topLevel","eval","native","constructor"].forEach((function(e){n.prototype[e]=!1,n.prototype["is"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}})),t._createParsedCallSite=function(e){return new n(e)}},44110:(e,t,n)=>{"use strict";const r=n(33406),i=n(49598),o=e.exports=(e,t)=>{const n={...t,block:!0,line:!0};return r(i(e,n),n)};o.block=(e,t)=>{const n={...t,block:!0};return r(i(e,n),n)},o.line=(e,t)=>{const n={...t,line:!0};return r(i(e,n),n)},o.first=(e,t)=>{const n={...t,block:!0,line:!0,first:!0};return r(i(e,n),n)},o.parse=i},50985:e=>{"use strict";class t{constructor(e){this.type=e.type,e.value&&(this.value=e.value),e.match&&(this.match=e.match),this.newline=e.newline||""}get protected(){return Boolean(this.match)&&"!"===this.match[1]}}e.exports={Node:t,Block:class extends t{constructor(e){super(e),this.nodes=e.nodes||[]}push(e){this.nodes.push(e)}get protected(){return this.nodes.length>0&&!0===this.nodes[0].protected}}}},33406:e=>{"use strict";e.exports=(e,t={})=>{const n=!0===t.safe||!0===t.keepProtected;let r=!1;const i=(e,o)=>{let s,a,c="";for(const o of e.nodes)switch(o.type){case"block":if(t.first&&!0===r){c+=i(o,e);break}if(!0===t.preserveNewlines){s=i(o,e),a=s.split("\n"),c+="\n".repeat(a.length-1);break}if(!0===n&&!0===o.protected){c+=i(o,e);break}r=!0;break;case"line":if(t.first&&!0===r){c+=o.value;break}!0===n&&!0===o.protected&&(c+=o.value),r=!0;break;default:c+=o.value||""}return c};return i(e)}},38657:(e,t)=>{"use strict";t.javascript={BLOCK_OPEN_REGEX:/^\/\*\*?(!?)/,BLOCK_CLOSE_REGEX:/^\*\/(\n?)/,LINE_REGEX:/^\/\/(!?).*/}},49598:(e,t,n)=>{"use strict";const{Node:r,Block:i}=n(50985),o=n(38657),s=/^\\./,a=/^(['"`])((?:\\.|[^\1])+?)(\1)/,c=/^\r*\n/;e.exports=(e,t={})=>{if("string"!=typeof e)throw new TypeError("Expected input to be a string");const n=new i({type:"root",nodes:[]}),l=[n],u=(t.language||"javascript").toLowerCase(),d=o[u];if(void 0===d)throw new Error(`Language "${u}" is not supported by strip-comments`);const{LINE_REGEX:p,BLOCK_OPEN_REGEX:h,BLOCK_CLOSE_REGEX:f}=d;let g,m,y=n,v=e,b=!1;[h,f].filter(Boolean).every((e=>'^"""'===e.source))&&(b=!0);const w=(e=v[0]||"")=>(v=v.slice(e.length),e),C=(e,t="text")=>{const n=e.exec(v);if(n)return w(n[0]),{type:t,value:n[0],match:n}},S=e=>{m&&"text"===m.type&&"text"===e.type?m.value+=e.value:(y.push(e),e.nodes&&(l.push(e),y=e),m=e)},_=()=>{if("root"===y.type)throw new SyntaxError("Unclosed block comment");l.pop(),y=l[l.length-1]};for(;""!==v;)(g=C(s,"text"))?S(new r(g)):"block"===y.type||m&&/\w$/.test(m.value)||b&&v.startsWith('"""')||!(g=C(a,"text"))?(g=C(c,"newline"))?S(new r(g)):!h||!t.block||b&&"block"===y.type||!(g=C(h,"open"))?f&&"block"===y.type&&t.block&&(g=C(f,"close"))?(g.newline=g.match[1]||"",S(new r(g)),_()):p&&"block"!==y.type&&t.line&&(g=C(p,"line"))||(g=C(/^[a-zABD-Z0-9\t ]+/,"text"))?S(new r(g)):S(new r({type:"text",value:w(v[0])})):(S(new i({type:"block"})),S(new r(g))):S(new r(g));return n}},14802:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(26363);t.ExperimentationService=r.ExperimentationService},26363:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(34067),i=n(44234),o=n(15975);class s extends o.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],null!=e.refetchInterval?e.refetchInterval:0,e.featuresTelemetryPropertyName,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage),this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new r.TasApiFeatureProvider(new i.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}}t.ExperimentationService=s,s.REFRESH_RATE_IN_MINUTES=30},15975:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(23663),i=n(73334);class o extends r.ExperimentationServiceBase{constructor(e,t,n,r,o,s,a,c){if(super(e,r,o,s,a,c),this.telemetry=e,this.filterProviders=t,this.refreshRateMs=n,this.featuresTelemetryPropertyName=r,this.assignmentContextTelemetryPropertyName=o,this.telemetryEventName=s,this.storageKey=a,this.storage=c,n<1e3&&0!==n)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");n>0&&(this.pollingService=new i.PollingService(n),this.pollingService.OnPollTick((async()=>{await super.getFeaturesAsync()})))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let t=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),t}return await super.getFeaturesAsync(e)}}t.ExperimentationServiceAutoPolling=o},23663:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17002);t.ExperimentationServiceBase=class{constructor(e,t,n,i,o,s){this.telemetry=e,this.featuresTelemetryPropertyName=t,this.assignmentContextTelemetryPropertyName=n,this.telemetryEventName=i,this.storageKey=o,this.storage=s,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(s=new r.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise(((e,t)=>{this.resolveInitialFetchPromise=e}))}get features(){return this._features}set features(e){this._features=e,this.telemetry&&(this.telemetry.setSharedProperty(this.featuresTelemetryPropertyName,this.features.features.join(";")),this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext))}async getFeaturesAsync(e=!1){if(null!=this.fetchPromise){try{await this.fetchPromise}catch(e){}return this.features}if(!this.featureProviders||0===this.featureProviders.length)return Promise.resolve({features:[],assignmentContext:"",configs:[]});this.fetchPromise=Promise.all(this.featureProviders.map((async e=>await e.getFeatures())));try{const t=await this.fetchPromise;this.updateFeatures(t,e)}catch(e){}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,t=!1){let n={features:[],assignmentContext:"",configs:[]};for(let t of e){for(let e of t.features)n.features.includes(e)||n.features.push(e);for(let e of t.configs){const t=n.configs.find((t=>t.Id===e.Id));t?t.Parameters=Object.assign(Object.assign({},t.Parameters),e.Parameters):n.configs.push(e)}n.assignmentContext+=t.assignmentContext}!t&&this.featuresConsumed||(this.features=n),this.storage&&this.storage.setValue(this.storageKey,n)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),void 0!==e&&void 0===e.configs&&(e.configs=[])),0===this.features.features.length&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){const t=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),t.features.includes(e)}getTreatmentVariable(e,t){var n;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${t}`),null===(n=this.features.configs.find((t=>t.Id===e)))||void 0===n?void 0:n.Parameters[t]}async getTreatmentVariableAsync(e,t,n){if(n){const n=this.featuresConsumed,r=this.getTreatmentVariable(e,t);if(void 0!==r)return r;this.featuresConsumed=n}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,t)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(null!=e&&null!=this.featureProviders)for(let t of e)this.featureProviders.push(t)}}},60069:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseFeatureProvider=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}}},94e3:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(60069);class i extends r.BaseFeatureProvider{constructor(e,t){super(e),this.telemetry=e,this.filterProviders=t,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let t of this.filterProviders){let n=t.getFilters();for(let t of n.keys()){let r=n.get(t);e.set(t,r)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;const t=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",t]])),this.cachedTelemetryEvents.push(e)}}t.FilteredFeatureProvider=i},34067:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(94e3);class i extends r.FilteredFeatureProvider{constructor(e,t,n){super(t,n),this.httpClient=e,this.telemetry=t,this.filterProviders=n}async fetch(){let e=this.getFilters(),t={};for(let n of e.keys()){const r=e.get(n);t[n]=r}let n=await this.httpClient.get({headers:t});e.keys.length>0&&this.PostEventToTelemetry(t);let r=n.data,i=r.Configs,o=[];for(let e of i)if(e.Parameters)for(let t of Object.keys(e.Parameters)){const n=t+(e.Parameters[t]?"":"cf");o.includes(n)||o.push(n)}return{features:o,assignmentContext:r.AssignmentContext,configs:i}}}t.TasApiFeatureProvider=i},44234:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9669);t.AxiosHttpClient=class{constructor(e){this.endpoint=e}get(e){return r.default.get(this.endpoint,Object.assign(Object.assign({},e),{proxy:!1}))}}},17002:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryKeyValueStorage=class{constructor(){this.storage=new Map}async getValue(e,t){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(t||void 0)}setValue(e,t){this.storage.set(e,t)}}},73334:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PollingService=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),null!=this.onTick&&(e&&this.onTick().then((()=>{})).catch((()=>{})),this.intervalHandle=setInterval((async()=>{await this.onTick()}),this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}}},20327:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InteractiveControllerHelper=void 0;const o=n(86700),s=n(88960),a=n(61239),c=n(67475),l=n(46799),u=n(50867),d=n(15925),p=n(42080),h=n(84570),f=n(11642),g="LastInteractiveKernelSelected";let m=class{constructor(e,t,n,r){this.controllerRegistration=e,this.interpreterService=t,this.disposables=n,this.workspaceMemento=r}async getInitialController(e,t){if(t){const e=this.controllerRegistration.get(t,d.InteractiveWindowView);if(e)return e}if(this.workspaceMemento.get(g)){const e=this.workspaceMemento.get(g),t=e?this.controllerRegistration.get(e,d.InteractiveWindowView):void 0;if(t)return t}return await(0,c.createActiveInterpreterController)(d.InteractiveWindowView,e,this.interpreterService,this.controllerRegistration)}getSelected(e){return this.controllerRegistration.getSelected(e)}async createKernel(e,t,n,r,i,o){await(0,a.initializeInteractiveOrNotebookTelemetryBasedOnUserAction)(n,e);const u=await l.KernelConnector.connectToNotebookKernel(e,o,{resource:n||r.uri,notebook:r,controller:t},new s.DisplayOptions(!1),i,"jupyterExtension",((e,t)=>{"start"!==e&&"restart"!==e||(0,f.traceInfoIfCI)(`(onStart) Looking for controller ${t.controller.id} in ${this.controllerRegistration.all.map((e=>`${e.kind}:${e.id}`)).join(", ")}`)})),d=this.controllerRegistration.registered.find((e=>e.id===u.controller.id));if(!d)throw Error(`Controller ${u.controller.id} not found or not yet created`);const p=d.controller;return(0,c.isActiveInterpreter)(u.kernelConnectionMetadata,n,this.interpreterService).then((async e=>{await this.workspaceMemento.update(g,e?void 0:u.kernelConnectionMetadata)})).catch((e=>{(0,f.traceWarning)("Failed to store kernel connection metadata",e)})),{kernel:u,actualController:p}}};m=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IControllerRegistration)),i(1,(0,o.inject)(h.IInterpreterService)),i(2,(0,o.inject)(p.IDisposableRegistry)),i(3,(0,o.inject)(p.IMemento)),i(3,(0,o.named)(p.WORKSPACE_MEMENTO))],m),t.InteractiveControllerHelper=m},88232:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CommandRegistry=void 0;const c=n(86700),l=n(66828),u=n(94062),d=n(10053),p=n(42080),h=n(25251),f=n(58681),g=n(9959),m=n(15925),y=n(74858),v=n(135),b=s(n(52859)),w=n(35412),C=n(62440),S=n(13730),_=n(41779),k=n(11642),P=n(94523),I=n(90541),E=n(85249),T=n(94433),D=n(83599),x=n(84599);let R=class{constructor(e,t,n,r,i,o,s,a,c,l,u,d,p,h,f,g,m,y,v,b,w){this.disposables=e,this.jupyterExporter=t,this.jupyterExecution=n,this.documentManager=r,this.applicationShell=i,this.fileSystem=o,this.configuration=s,this.dataScienceCodeLensProvider=a,this.commandManager=c,this.debugService=l,this.configService=u,this.appShell=d,this.workspace=p,this.interactiveWindowProvider=h,this.kernelProvider=f,this.dataScienceErrorHandler=g,this.ipynbProvider=m,this.fileConverter=y,this.exportDialog=v,this.clipboard=b,this.notebook=w,this.statusProvider=new x.StatusProvider(i),this.workspace.isTrusted||this.workspace.onDidGrantWorkspaceTrust(this.registerCommandsIfTrusted,this,this.disposables)}activate(){this.registerCommandsIfTrusted(),this.registerCommand(m.Commands.InsertCellBelowPosition,this.insertCellBelowPosition),this.registerCommand(m.Commands.InsertCellBelow,this.insertCellBelow),this.registerCommand(m.Commands.InsertCellAbove,this.insertCellAbove),this.registerCommand(m.Commands.DeleteCells,this.deleteCells),this.registerCommand(m.Commands.SelectCell,this.selectCell),this.registerCommand(m.Commands.SelectCellContents,this.selectCellContents),this.registerCommand(m.Commands.ExtendSelectionByCellAbove,this.extendSelectionByCellAbove),this.registerCommand(m.Commands.ExtendSelectionByCellBelow,this.extendSelectionByCellBelow),this.registerCommand(m.Commands.MoveCellsUp,this.moveCellsUp),this.registerCommand(m.Commands.MoveCellsDown,this.moveCellsDown),this.registerCommand(m.Commands.ChangeCellToMarkdown,this.changeCellToMarkdown),this.registerCommand(m.Commands.ChangeCellToCode,this.changeCellToCode),this.registerCommand(m.Commands.GotoNextCellInFile,this.gotoNextCellInFile),this.registerCommand(m.Commands.GotoPrevCellInFile,this.gotoPrevCellInFile),this.registerCommand(m.Commands.AddCellBelow,this.addCellBelow),this.registerCommand(m.Commands.CreateNewNotebook,this.createNewNotebook),this.registerCommand(m.Commands.LatestExtension,this.openPythonExtensionPage),this.registerCommand(m.Commands.EnableDebugLogging,this.enableDebugLogging),this.registerCommand(m.Commands.ResetLoggingLevel,this.resetLoggingLevel),this.registerCommand(m.Commands.EnableLoadingWidgetsFrom3rdPartySource,this.enableLoadingWidgetScriptsFromThirdParty),this.registerCommand(m.Commands.CreateNewInteractive,(e=>this.createNewInteractiveWindow(e))),this.registerCommand(m.Commands.ImportNotebook,((e,t=m.CommandSource.commandPalette)=>this.listenForErrors((()=>e?this.importNotebookOnFile(e):this.importNotebook())))),this.registerCommand(m.Commands.ImportNotebookFile,((e,t=m.CommandSource.commandPalette)=>this.listenForErrors((()=>e?this.importNotebookOnFile(e):this.importNotebook())))),this.commandManager.registerCommand(m.Commands.ExportFileAsNotebook,((e,t=m.CommandSource.commandPalette)=>this.listenForErrors((()=>{if(e)return this.exportFile(e);{const e=this.documentManager.activeTextEditor;if(e&&e.document.languageId===m.PYTHON_LANGUAGE)return this.exportFile(e.document.uri)}return Promise.resolve()})))),this.registerCommand(m.Commands.ExportFileAndOutputAsNotebook,((e,t=m.CommandSource.commandPalette)=>this.listenForErrors((()=>{if(e)return this.exportFileAndOutput(e);{const e=this.documentManager.activeTextEditor;if(e&&e.document.languageId===m.PYTHON_LANGUAGE)return this.exportFileAndOutput(e.document.uri)}return Promise.resolve()})))),this.registerCommand(m.Commands.ExpandAllCells,(async e=>this.expandAllCells(e?.notebookEditor?.notebookUri))),this.registerCommand(m.Commands.CollapseAllCells,(async e=>this.collapseAllCells(e?.notebookEditor?.notebookUri))),this.registerCommand(m.Commands.ExportOutputAsNotebook,(()=>this.exportCells())),this.registerCommand(m.Commands.InteractiveExportAsNotebook,(e=>this.export(e?.notebookEditor?.notebookUri))),this.registerCommand(m.Commands.InteractiveExportAs,(e=>this.exportAs(e?.notebookEditor?.notebookUri))),this.registerCommand(m.Commands.ScrollToCell,((e,t)=>this.scrollToCell(e,t))),this.registerCommand(m.Commands.InteractiveClearAll,this.clearAllCellsInInteractiveWindow),this.registerCommand(m.Commands.InteractiveGoToCode,this.goToCodeInInteractiveWindow),this.commandManager.registerCommand(m.Commands.InteractiveCopyCell,this.copyCellInInteractiveWindow)}dispose(){this.disposables.forEach((e=>e.dispose()))}registerCommandsIfTrusted(){this.workspace.isTrusted&&(this.registerCommand(m.Commands.RunAllCells,this.runAllCells),this.registerCommand(m.Commands.RunCell,this.runCell),this.registerCommand(m.Commands.RunCurrentCell,this.runCurrentCell),this.registerCommand(m.Commands.RunCurrentCellAdvance,this.runCurrentCellAndAdvance),this.registerCommand(m.Commands.ExecSelectionInInteractiveWindow,(e=>{this.runSelectionOrLine(e).catch(f.noop)})),this.registerCommand(m.Commands.RunAllCellsAbove,this.runAllCellsAbove),this.registerCommand(m.Commands.RunCellAndAllBelow,this.runCellAndAllBelow),this.registerCommand(m.Commands.RunAllCellsAbovePalette,this.runAllCellsAboveFromCursor),this.registerCommand(m.Commands.RunCellAndAllBelowPalette,this.runCellAndAllBelowFromCursor),this.registerCommand(m.Commands.RunCurrentCellAndAddBelow,this.runCurrentCellAndAddBelow),this.registerCommand(m.Commands.DebugCell,this.debugCell),this.registerCommand(m.Commands.DebugStepOver,this.debugStepOver),this.registerCommand(m.Commands.DebugContinue,this.debugContinue),this.registerCommand(m.Commands.DebugStop,this.debugStop),this.registerCommand(m.Commands.DebugCurrentCellPalette,this.debugCurrentCellFromCursor),this.registerCommand(m.Commands.OpenVariableView,this.openVariableView),this.registerCommand(m.Commands.OpenOutlineView,this.openOutlineView),this.registerCommand(m.Commands.RunToLine,this.runToLine),this.registerCommand(m.Commands.RunFromLine,this.runFromLine),this.registerCommand(m.Commands.RunFileInInteractiveWindows,this.runFileInteractive),this.registerCommand(m.Commands.DebugFileInInteractiveWindows,this.debugFileInteractive))}registerCommand(e,t){const n=this.commandManager.registerCommand(e,t,this);this.disposables.push(n)}getCodeWatcher(e){if(e&&this.dataScienceCodeLensProvider){const t=this.documentManager.textDocuments.filter((t=>b.isEqual(t.uri,e)));if(t&&1===t.length)return this.dataScienceCodeLensProvider.getCodeWatcher(t[0]);if(t&&t.length>1)throw new Error(h.DataScience.documentMismatch((0,w.getFilePath)(e)))}}async enableDebugLogging(){"debug"!==this.configService.getSettings().logging.level&&(await this.configService.updateSetting("logging.level","debug",void 0,l.ConfigurationTarget.Global),this.commandManager.executeCommand("jupyter.reloadVSCode",h.DataScience.reloadRequired).then(f.noop,f.noop))}async resetLoggingLevel(){"error"!==this.configService.getSettings().logging.level&&(await this.configService.updateSetting("logging.level","error",void 0,l.ConfigurationTarget.Global),this.commandManager.executeCommand("jupyter.reloadVSCode",h.DataScience.reloadRequired).then(f.noop,f.noop))}async enableLoadingWidgetScriptsFromThirdParty(){this.configService.getSettings(void 0).widgetScriptSources.length>0||await this.configService.updateSetting("widgetScriptSources",["jsdelivr.com","unpkg.com"],void 0,l.ConfigurationTarget.Global).catch(f.noop)}async runAllCells(e){let t=this.getCodeWatcher(e);return t||(t=this.getCurrentCodeWatcher()),t?t.runAllCells():void 0}async runFileInteractive(e){let t=this.getCodeWatcher(e);return t||(t=this.getCurrentCodeWatcher()),t?t.runFileInteractive():void 0}async debugFileInteractive(e){let t=this.getCodeWatcher(e);return t||(t=this.getCurrentCodeWatcher()),t?t.debugFileInteractive():void 0}async runCell(e,t,n,r,i){const o=this.getCodeWatcher(e);if(o)return o.runCell(new l.Range(t,n,r,i))}async runAllCellsAbove(e,t,n){if(e){const r=this.getCodeWatcher(e);if(r)return r.runAllCellsAbove(t,n)}}async runCellAndAllBelow(e,t,n){if(e){const r=this.getCodeWatcher(e);if(r)return r.runCellAndAllBelow(t,n)}}async runToLine(){const e=this.getCurrentCodeWatcher(),t=this.documentManager.activeTextEditor;if(e&&t&&t.selection)return e.runToLine(t.selection.start.line)}async runFromLine(){const e=this.getCurrentCodeWatcher(),t=this.documentManager.activeTextEditor;if(e&&t&&t.selection)return e.runFromLine(t.selection.start.line)}async runCurrentCell(){const e=this.getCurrentCodeWatcher();return e?e.runCurrentCell():void 0}async runCurrentCellAndAdvance(){const e=this.getCurrentCodeWatcher();return e?e.runCurrentCellAndAdvance():void 0}async runSelectionOrLine(e){const t=this.getCurrentCodeWatcher();return t?t.runSelectionOrLine(this.documentManager.activeTextEditor,(0,f.isUri)(e)?void 0:e):void 0}async debugCell(e,t,n,r,i){if(e){const o=this.getCodeWatcher(e);if(o)return o.debugCell(new l.Range(t,n,r,i))}}async debugStepOver(){this.debugService?.activeDebugSession&&this.commandManager.executeCommand("workbench.action.debug.stepOver").then(f.noop,f.noop)}async debugStop(e){if(this.debugService?.activeDebugSession&&this.interactiveWindowProvider){const t=this.interactiveWindowProvider.get(e);if(t&&t.notebookDocument){const n=this.kernelProvider.get(t.notebookDocument);n&&((0,k.traceVerbose)(`Interrupt kernel due to debug stop of IW ${e.toString()}`),await n.interrupt())}this.commandManager.executeCommand("workbench.action.debug.stop").then(f.noop,f.noop)}}async debugContinue(){this.debugService?.activeDebugSession&&this.commandManager.executeCommand("workbench.action.debug.continue").then(f.noop,f.noop)}async addCellBelow(){await(this.getCurrentCodeWatcher()?.addEmptyCellToBottom())}async runCurrentCellAndAddBelow(){this.getCurrentCodeWatcher()?.runCurrentCellAndAddBelow()}async insertCellBelowPosition(){this.getCurrentCodeWatcher()?.insertCellBelowPosition()}async insertCellBelow(){this.getCurrentCodeWatcher()?.insertCellBelow()}async insertCellAbove(){this.getCurrentCodeWatcher()?.insertCellAbove()}async deleteCells(){this.getCurrentCodeWatcher()?.deleteCells()}async selectCell(){this.getCurrentCodeWatcher()?.selectCell()}async selectCellContents(){this.getCurrentCodeWatcher()?.selectCellContents()}async extendSelectionByCellAbove(){this.getCurrentCodeWatcher()?.extendSelectionByCellAbove()}async extendSelectionByCellBelow(){this.getCurrentCodeWatcher()?.extendSelectionByCellBelow()}async moveCellsUp(){this.getCurrentCodeWatcher()?.moveCellsUp()}async moveCellsDown(){this.getCurrentCodeWatcher()?.moveCellsDown()}async changeCellToMarkdown(){this.getCurrentCodeWatcher()?.changeCellToMarkdown()}async changeCellToCode(){this.getCurrentCodeWatcher()?.changeCellToCode()}async gotoNextCellInFile(){this.getCurrentCodeWatcher()?.gotoNextCell()}async gotoPrevCellInFile(){this.getCurrentCodeWatcher()?.gotoPreviousCell()}async runAllCellsAboveFromCursor(){const e=this.getCurrentCodeLens();if(e){const t=this.getCurrentCodeWatcher();if(t)return t.runAllCellsAbove(e.range.start.line,e.range.start.character)}}async runCellAndAllBelowFromCursor(){const e=this.getCurrentCodeLens();if(e){const t=this.getCurrentCodeWatcher();if(t)return t.runCellAndAllBelow(e.range.start.line,e.range.start.character)}}async debugCurrentCellFromCursor(){if(this.getCurrentCodeLens()){const e=this.getCurrentCodeWatcher();if(e)return e.debugCurrentCell()}}async createNewNotebook(){this.appShell.showInformationMessage('This command has been deprecated and will eventually be removed, please use ["Create: New Jupyter Notebook"](command:workbench.action.openGlobalKeybindings?%5B%22@command:ipynb.newUntitledIpynb%22%5D) instead.').then(f.noop,f.noop),await l.commands.executeCommand("ipynb.newUntitledIpynb")}getCurrentCodeLens(){const e=this.documentManager.activeTextEditor,t=this.getCurrentCodeWatcher();if(e&&t)return t.getCodeLenses().find((t=>t.range.end.line>=e.selection.anchor.line&&t.range.start.line<=e.selection.anchor.line))}getCurrentCodeWatcher(){const e=this.documentManager.activeTextEditor;if(e&&e.document&&this.dataScienceCodeLensProvider)return this.dataScienceCodeLensProvider.getCodeWatcher(e.document)}openPythonExtensionPage(){l.env.openExternal(l.Uri.parse("https://marketplace.visualstudio.com/items?itemName=ms-toolsai.jupyter")).then(f.noop,f.noop)}async openVariableView(){return this.commandManager.executeCommand("jupyterViewVariables.focus")}async openOutlineView(){return this.commandManager.executeCommand("outline.focus")}async listenForErrors(e){let t;try{return t=await e(),t}catch(e){(0,k.traceError)("listenForErrors",e),this.dataScienceErrorHandler.handleError(e).then(f.noop,f.noop)}return t}async exportFile(e){const t=(0,w.getFilePath)(e);if(t&&t.length>0&&this.jupyterExporter){const n=this.documentManager.activeTextEditor;if(n&&this.fileSystem.arePathsSame(n.document.uri,e)){const r=(0,P.generateCellsFromDocument)(n.document,this.configuration.getSettings(n.document.uri));if(r){const n=await this.exportDialog.showDialog(C.ExportFormat.ipynb,e);if(await this.waitForStatus((async()=>{if(n){const e=await(this.jupyterExporter?.translateToNotebook(r));await this.fileSystem.writeFile(n,JSON.stringify(e,void 0,1))}}),h.DataScience.exportingFormat,(0,w.getDisplayPath)(e)),n&&t){const t=h.DataScience.exportOpenQuestion1;await this.applicationShell.showInformationMessage(h.DataScience.exportDialogComplete((0,w.getDisplayPath)(e)),t)===t&&await(0,S.openAndShowNotebook)(n)}}}}}async exportFileAndOutput(e){const t=(0,w.getFilePath)(e);if(t&&t.length>0&&this.jupyterExporter&&await this.jupyterExecution.isNotebookSupported()){const t=this.documentManager.activeTextEditor;if(t&&t.document&&this.fileSystem.arePathsSame(t.document.uri,e)){const n=(0,P.generateCellsFromDocument)(t.document,this.configuration.getSettings(t.document.uri));if(n){const t=await this.exportDialog.showDialog(C.ExportFormat.ipynb,e);if(!t)return;return await this.waitForStatus((async()=>{if(t){const e=await(this.jupyterExporter?.translateToNotebook(n));await this.fileSystem.writeFile(t,JSON.stringify(e,void 0,1))}}),h.DataScience.exportingFormat,(0,w.getDisplayPath)(e)),await this.notebook.openNotebookDocument(t).then((e=>this.notebook.showNotebookDocument(e))),await this.commandManager.executeCommand("notebook.execute"),t}}}else await this.dataScienceErrorHandler.handleError(new _.JupyterInstallError(h.DataScience.jupyterNotSupported(await this.jupyterExecution.getNotebookError())))}async expandAllCells(e){const t=this.interactiveWindowProvider.getInteractiveWindowWithNotebook(e);(0,k.traceInfo)(`Expanding all cells in interactive window with uri ${t?.notebookUri}`),t&&await t.expandAllCells()}async collapseAllCells(e){const t=this.interactiveWindowProvider.getInteractiveWindowWithNotebook(e);(0,k.traceInfo)(`Collapsing all cells in interactive window with uri ${t?.notebookUri}`),t&&await t.collapseAllCells()}exportCells(){const e=this.interactiveWindowProvider?.activeWindow;e&&e.export()}exportAs(e){const t=this.interactiveWindowProvider.getInteractiveWindowWithNotebook(e);t&&t.exportAs()}export(e){const t=this.interactiveWindowProvider.getInteractiveWindowWithNotebook(e);t&&t.export()}async createNewInteractiveWindow(e){await(this.interactiveWindowProvider?.getOrCreate(void 0,e))}waitForStatus(e,t,n,r){const i=t(n||"");return this.statusProvider.waitWithStatus(e,i,void 0,r)}async importNotebook(){const e={};e[h.DataScience.importDialogFilter]=["ipynb"];const t=await this.applicationShell.showOpenDialog({openLabel:h.DataScience.importDialogTitle,filters:e});t&&t.length>0&&await this.waitForStatus((async()=>{await this.fileConverter.importIpynb(t[0])}),h.DataScience.importingFormat,(0,w.getDisplayPath)(t[0]))}async importNotebookOnFile(e){const t=(0,w.getFilePath)(e);t&&t.length>0&&await this.waitForStatus((async()=>{await this.fileConverter.importIpynb(e)}),h.DataScience.importingFormat,(0,w.getDisplayPath)(e))}async scrollToCell(e,t){if(t&&e){const n=this.interactiveWindowProvider.getInteractiveWindowsWithSubmitter(e);for(let e=0;e<n.length;e+=1)if(await n[e].hasCell(t)){n[e].scrollToCell(t);break}}}async clearAllCellsInInteractiveWindow(e){const t=this.interactiveWindowProvider.getInteractiveWindowWithNotebook(e?.notebookEditor?.notebookUri)?.notebookUri;if(!t)return;const n=l.workspace.notebookDocuments.find((e=>e.uri.toString()===t.toString()));if(!n)return;const r=new l.WorkspaceEdit,i=l.NotebookEdit.deleteCells(new l.NotebookRange(0,n.cellCount));r.set(n.uri,[i]),await l.workspace.applyEdit(r)}async goToCodeInInteractiveWindow(e){if(e&&e.metadata?.interactive){const t=l.Uri.parse(e.metadata.interactive.uristring),n=e.metadata.interactive.lineIndex,r=await this.documentManager.showTextDocument(t,{viewColumn:l.ViewColumn.One});r&&(r.revealRange(new l.Range(n,0,n,0)),r.selection=new l.Selection(new l.Position(n,0),new l.Position(n,0)))}}async copyCellInInteractiveWindow(e){if(e){const t=this.configuration.getSettings(e.notebook.uri),n=[e.metadata.interactiveWindowCellMarker??t.defaultCellMarker,e.document.getText()].join("\n");await this.clipboard.writeText(n)}}};o([(0,g.captureUsageTelemetry)(m.Telemetry.DebugStepOver)],R.prototype,"debugStepOver",null),o([(0,g.captureUsageTelemetry)(m.Telemetry.DebugStop)],R.prototype,"debugStop",null),o([(0,g.captureUsageTelemetry)(m.Telemetry.DebugContinue)],R.prototype,"debugContinue",null),o([(0,g.capturePerfTelemetry)(m.Telemetry.AddCellBelow)],R.prototype,"addCellBelow",null),o([(0,g.captureUsageTelemetry)(m.Telemetry.ExportPythonFileInteractive)],R.prototype,"exportFile",null),o([(0,g.captureUsageTelemetry)(m.Telemetry.ExportPythonFileAndOutputInteractive)],R.prototype,"exportFileAndOutput",null),o([(0,g.captureUsageTelemetry)(m.Telemetry.ImportNotebook,{scope:"command"})],R.prototype,"importNotebook",null),o([(0,g.captureUsageTelemetry)(m.Telemetry.ImportNotebook,{scope:"file"})],R.prototype,"importNotebookOnFile",null),R=o([(0,c.injectable)(),a(0,(0,c.inject)(p.IDisposableRegistry)),a(1,(0,c.inject)(T.INotebookExporter)),a(1,(0,c.optional)()),a(2,(0,c.inject)(T.IJupyterExecution)),a(3,(0,c.inject)(d.IDocumentManager)),a(4,(0,c.inject)(d.IApplicationShell)),a(5,(0,c.inject)(D.IFileSystem)),a(6,(0,c.inject)(p.IConfigurationService)),a(7,(0,c.inject)(y.IDataScienceCodeLensProvider)),a(7,(0,c.optional)()),a(8,(0,c.inject)(d.ICommandManager)),a(9,(0,c.inject)(d.IDebugService)),a(9,(0,c.optional)()),a(10,(0,c.inject)(p.IConfigurationService)),a(11,(0,c.inject)(d.IApplicationShell)),a(12,(0,c.inject)(d.IWorkspaceService)),a(13,(0,c.inject)(v.IInteractiveWindowProvider)),a(14,(0,c.inject)(u.IKernelProvider)),a(15,(0,c.inject)(I.IDataScienceErrorHandler)),a(16,(0,c.inject)(E.INotebookEditorProvider)),a(17,(0,c.inject)(C.IFileConverter)),a(18,(0,c.inject)(C.IExportDialog)),a(19,(0,c.inject)(d.IClipboard)),a(20,(0,c.inject)(d.IVSCodeNotebook))],R),t.CommandRegistry=R},84599:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatusProvider=void 0;const r=n(66828),i=n(43138),o=n(58681);class s{constructor(e,t,n){this.disposed=!1,this.dispose=()=>{this.disposed||(this.disposed=!0,this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),this.disposeCallback(),this.deferred.completed||this.deferred.resolve())},this.promise=()=>this.deferred.promise,this.reject=()=>{this.deferred.reject(),this.dispose()},this.deferred=(0,i.createDeferred)(),this.disposeCallback=t,n&&(this.timeout=setTimeout(this.dispose,n))}}t.StatusProvider=class{constructor(e){this.applicationShell=e,this.statusCount=0,this.incrementCount=()=>{this.statusCount+=1},this.decrementCount=()=>{const e=this.statusCount-1;this.statusCount=Math.max(e,0)}}set(e,t,n){this.incrementCount();const i=new s(e,(()=>this.decrementCount()),t),a={location:n?r.ProgressLocation.Notification:r.ProgressLocation.Window,title:e,cancellable:void 0!==n};return this.applicationShell.withProgress(a,((e,t)=>(t&&n&&t.onCancellationRequested((()=>{n(),i.reject()})),i.promise()))).then(o.noop,o.noop),i}async waitWithStatus(e,t,n,r){const i=this.set(t,n,r);let o;try{o=await e()}finally{i.dispose()}return o}}},95772:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildSourceMap=void 0;const r=n(35412);t.buildSourceMap=function(e){const t={source:{path:(0,r.getFilePath)(e.uri)},pydevdSourceMaps:[]};return t.pydevdSourceMaps=e.generatedCodes.map((e=>({line:e.debuggerStartLine,endLine:e.endLine,runtimeSource:{path:e.runtimeFile},runtimeLine:e.runtimeLine}))),t}},72771:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebugCellController=void 0;const r=n(3445),i=n(33648),o=n(57566),s=n(43138),a=n(11642),c=n(9959),l=n(15139);t.DebugCellController=class{constructor(e,t,n){this.debugAdapter=e,this.debugCell=t,this.execution=n,this._ready=(0,s.createDeferred)(),this.ready=this._ready.promise,(0,c.sendTelemetryEvent)(r.DebuggingTelemetry.successfullyStartedRunAndDebugCell)}trace(e,t){(0,a.traceVerbose)(`[Debug-IW] ${e}: ${t}`)}async willSendEvent(e){return(0,i.isDebugpyAttachRequest)(e)?(this.trace("intercept","debugpyAttach request for subprocess, not supported"),!0):!("output"!==e.event||!(0,i.isJustMyCodeNotification)(e.body.output)||(this.trace("intercept","justMyCode notification"),0))}async willSendRequest(e){const t=(0,l.getInteractiveCellMetadata)(this.debugCell);"setBreakpoints"===e.command&&t&&t.generatedCode&&!this.cellDumpInvoked&&(this.debugCellDumped||(this.debugCellDumped=(0,o.cellDebugSetup)(this.execution,this.debugAdapter)),await this.debugCellDumped),"configurationDone"===e.command&&t&&t.generatedCode&&(this.debugCellDumped||(this.debugCellDumped=(0,o.cellDebugSetup)(this.execution,this.debugAdapter)),await this.debugCellDumped,this._ready.resolve())}}},32394:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWDebugger=void 0;const r=n(3856),i=n(43138);class o extends r.Debugger{constructor(){super(...arguments),this._ready=(0,i.createDeferred)(),this.ready=this._ready.promise}resolve(){this._ready.resolve()}}t.IWDebugger=o},6821:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InteractiveWindowDebuggingManager=void 0;const c=n(86700),l=n(66828),u=n(94062),d=n(50867),p=n(3445),h=n(40157),f=n(66317),g=n(57566),m=n(10053),y=n(83599),v=n(42080),b=n(25251),w=n(58681),C=n(41778),S=n(11642),_=s(n(15948)),k=n(95772),P=n(72771),I=n(32394),E=n(69035),T=n(42793);let D=class extends h.DebuggingManagerBase{constructor(e,t,n,r,i,o,s,a,c,l){super(e,t,n,r,i,l),this.platform=o,this.debugLocationTrackerFactory=s,this.configService=a,this.debugService=c}activate(){super.activate(),this.disposables.push(l.debug.registerDebugAdapterDescriptorFactory(p.pythonIWKernelDebugAdapter,{createDebugAdapterDescriptor:async e=>this.createDebugAdapterDescriptor(e)}))}getDebugMode(e){return f.KernelDebugMode.InteractiveWindow}async start(e,t){(0,S.traceInfoIfCI)("Starting debugging IW"),await this.checkIpykernelAndPrompt(t)===g.IpykernelCheckResult.Ok&&await this.startDebuggingCell(e,t)}async startDebuggingCell(e,t){const n=this.configService.getSettings(e.uri),r={type:p.pythonIWKernelDebugAdapter,name:_.basename(e.uri.toString()),request:"attach",justMyCode:n.debugJustMyCode,__notebookUri:e.uri.toString(),__mode:f.KernelDebugMode.InteractiveWindow,__cellIndex:t.index};await this.startDebuggingConfig(r,{suppressSaveBeforeStart:!0});const i=this.notebookToDebugger.get(e);i?await i.ready:(0,S.traceError)("Debugger not found, could not start debugging.")}async createDebugAdapterDescriptor(e){const t=e.configuration;(0,g.assertIsInteractiveWindowDebugConfig)(t);const n=this.vscNotebook.notebookDocuments.find((e=>e.uri.toString()===t.__notebookUri));if(!n||"number"!=typeof t.__cellIndex)return void(0,S.traceError)("Invalid debug session for debugging of IW using Jupyter Protocol");if(this.notebookInProgress.has(n))return void(0,S.traceInfo)("Cannot start debugging. Already debugging this notebook");if(this.isDebugging(n))return void(0,S.traceInfo)("Cannot start debugging. Already debugging this notebook document. Toolbar should update");const r=new I.IWDebugger(n,t,e);this.notebookToDebugger.set(n,r);try{return this.notebookInProgress.add(n),await this.doCreateDebugAdapterDescriptor(t,e,n,r)}finally{this.notebookInProgress.delete(n)}}async doCreateDebugAdapterDescriptor(e,t,n,r){const i=await this.ensureKernelIsRunning(n);if(!i?.session)return void this.appShell.showInformationMessage(b.DataScience.kernelWasNotStarted).then(w.noop,w.noop);const o=new E.KernelDebugAdapter(t,n,i.session,i,this.platform,this.debugService,this.debugLocationTrackerFactory);this.disposables.push(o.onDidEndSession(this.endSession.bind(this)));const s=n.cellAt(e.__cellIndex),a=new P.DebugCellController(o,s,this.kernelProvider.getKernelExecution(i));return o.addDebuggingDelegates([a,new T.RestartNotSupportedController(s,this.serviceContainer)]),a.ready.then((()=>r.resolve())).catch((e=>console.error("Failed waiting for controller to be ready",e))),this.trackDebugAdapter(n,o),new l.DebugAdapterInlineImplementation(o)}async updateSourceMaps(e,t){let n=this.getDebugSession(e.notebook);n&&((0,S.traceInfoIfCI)("Sending debug request for source map"),await Promise.all(t.map((async e=>{if(n)return n.customRequest("setPydevdSourceMap",(0,k.buildSourceMap)(e))}))))}};D=o([(0,c.injectable)(),a(0,(0,c.inject)(u.IKernelProvider)),a(1,(0,c.inject)(d.IControllerRegistration)),a(2,(0,c.inject)(m.ICommandManager)),a(3,(0,c.inject)(m.IApplicationShell)),a(4,(0,c.inject)(m.IVSCodeNotebook)),a(5,(0,c.inject)(y.IPlatformService)),a(6,(0,c.inject)(f.IDebugLocationTrackerFactory)),a(7,(0,c.inject)(v.IConfigurationService)),a(8,(0,c.inject)(m.IDebugService)),a(9,(0,c.inject)(C.IServiceContainer))],D),t.InteractiveWindowDebuggingManager=D},69035:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelDebugAdapter=void 0;const s=n(66828),a=n(15139),c=n(79626),l=n(11642),u=o(n(15948));class d extends c.KernelDebugAdapterBase{constructor(e,t,n,r,i,o,s){super(e,t,n,r,i,o),this.cellToDebugFileSortedInReverseOrderByLineNumber=[],s&&(this.debugLocationTracker=s.createDebugAdapterTracker(e),this.debugLocationTracker.onWillStartSession&&this.debugLocationTracker.onWillStartSession(),this.onDidSendMessage((e=>{this.debugLocationTracker?.onDidSendMessage&&this.debugLocationTracker.onDidSendMessage(e)}),this,this.disposables),this.onDidEndSession((()=>{this.debugLocationTracker?.onWillStopSession&&this.debugLocationTracker.onWillStopSession()}),this,this.disposables))}handleClientMessageAsync(e){return(0,l.traceInfoIfCI)(`KernelDebugAdapter::handleMessage ${JSON.stringify(e,void 0," ")}`),"request"===e.type&&this.debugLocationTracker?.onWillReceiveMessage&&this.debugLocationTracker.onWillReceiveMessage(e),"response"===e.type&&this.debugLocationTracker?.onDidSendMessage&&this.debugLocationTracker.onDidSendMessage(e),super.handleClientMessageAsync(e)}async dumpCell(e){const t=this.notebookDocument.cellAt(e),n=(0,a.getInteractiveCellMetadata)(t);if(!n)throw new Error("Not an interactive window cell");try{const e=(n.generatedCode?.code||t.document.getText()).replace(/\r\n/g,"\n"),r=await this.session.customRequest("dumpCell",{code:e}),i=u.normalize(r.sourcePath);this.fileToCell.set(i,s.Uri.parse(n.interactive.uristring));let o=0;n.generatedCode&&!n.generatedCode.hasCellMarker&&(o=n.generatedCode.firstNonBlankLineIndex),this.cellToDebugFileSortedInReverseOrderByLineNumber.push({debugFilePath:i,interactiveWindow:s.Uri.parse(n.interactive.uristring),metadata:n,lineOffset:o+n.interactive.lineIndex+(n.generatedCode?.lineOffsetRelativeToIndexOfFirstLineInCell||0)}),this.cellToDebugFileSortedInReverseOrderByLineNumber.sort(((e,t)=>t.metadata.interactive.lineIndex-e.metadata.interactive.lineIndex))}catch(e){(0,l.traceError)(`Failed to dump cell for ${t.index} with code ${n.interactive.originalSource}`,e)}}translateDebuggerLocationToRealLocation(e,t){if(!(t=e?.source??t)||!t.path)return;const n=this.cellToDebugFileSortedInReverseOrderByLineNumber.find((e=>e.debugFilePath===t.path));n&&(t.name=u.basename(n.interactiveWindow.path),t.path=n.interactiveWindow.toString(),"number"==typeof e?.endLine&&(e.endLine=e.endLine+(n.lineOffset||0)),"number"==typeof e?.line&&(e.line=e.line+(n.lineOffset||0)))}translateRealLocationToDebuggerLocation(e,t){const n=e.line;if(!(t=e?.source??t)||!t.path||"number"!=typeof n)return;const r=this.cellToDebugFileSortedInReverseOrderByLineNumber.find((e=>n>=e.metadata.interactive.lineIndex+1));r&&r.interactiveWindow.path===t.path&&(t.path=r.debugFilePath,"number"==typeof e?.endLine&&(e.endLine=e.endLine-(r.lineOffset||0)),"number"==typeof e?.line&&(e.line=e.line-(r.lineOffset||0)))}async sendRequestToJupyterSession(e){if("setBreakpoints"===e.command){const t=e.arguments;if(delete t.lines,t.source.path!==this.cellToDebugFileSortedInReverseOrderByLineNumber[0]?.interactiveWindow.path)return super.sendRequestToJupyterSession(e);let n,r=[];const i=[],o=()=>{if(r.length){const t=JSON.parse(JSON.stringify(e));t.arguments.breakpoints=r,i.push(super.sendRequestToJupyterSession(t))}};for(const t of e.arguments.breakpoints??[]){const e=this.cellToDebugFileSortedInReverseOrderByLineNumber.find((e=>t.line>=e.metadata.generatedCode.line&&t.line<=e.metadata.generatedCode.endLine));if(e&&e.metadata.interactive.lineIndex!==n)o(),n=e.metadata.interactive.lineIndex,r=[t];else if(e)r.push(t);else{const e={...t,verified:!0};i.push(Promise.resolve({body:{breakpoints:[e]}}))}}o();const s=await Promise.all(i),a=JSON.parse(JSON.stringify(s[0]));return s.slice(1).forEach((e=>{a.body.breakpoints=a.body.breakpoints.concat(e.body.breakpoints??[])})),a.command="setBreakpoints",a.type="response",a.success=!0,a.request_seq=e.seq,a}return super.sendRequestToJupyterSession(e)}getDumpFilesForDeletion(){return this.cellToDebugFileSortedInReverseOrderByLineNumber.map((e=>e.debugFilePath))}}t.KernelDebugAdapter=d},42793:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestartNotSupportedController=void 0;const r=n(10053),i=n(25251),o=n(58681),s=n(11642);t.RestartNotSupportedController=class{constructor(e,t){this.debugCell=e,this.applicationShell=t.get(r.IApplicationShell)}trace(e,t){(0,s.traceVerbose)(`[Debug-IWRestart] ${e}: ${t}`)}async willSendResponse(e){"initialize"===e.command&&e.body&&(e.body.supportsRestartRequest=!0)}async willSendRequest(e){if("restart"===e.command)return this.trace("restart","Showing warning for unsupported restart request"),this.applicationShell.showWarningMessage(i.DataScience.restartNotSupported,{modal:!0}).then(o.noop,o.noop),{command:e.command,request_seq:e.seq,seq:e.seq,success:!0,type:"response"}}}},64064:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InteractiveWindowDebuggingStartupCodeProvider=void 0;const o=n(86700),s=n(66828),a=n(98729),c=n(94062),l=n(15925),u=n(83599),d=n(42080);let p=class{constructor(e,t,n,r){this.configService=e,this.fs=t,this.context=n,this.isWebExtension=r,this.priority=5}async getCode(e){if(!(0,a.isPythonKernelConnection)(e.kernelConnectionMetadata))return[];if(!this.isWebExtension){if(!0===this.configService.getSettings(void 0).forceIPyKernelDebugger)return[];if(!(0,c.isLocalConnection)(e.kernelConnectionMetadata))return[]}return e.notebook?.notebookType===l.InteractiveWindowView&&(0,c.isLocalConnection)(e.kernelConnectionMetadata)?(this.addRunCellHookContents||(this.addRunCellHookContents=this.fs.readFile(s.Uri.joinPath(this.context.extensionUri,"pythonFiles","vscode_datascience_helpers","kernel","addRunCellHook.py"))),(await this.addRunCellHookContents).splitLines({trim:!1})):[]}};p=r([(0,o.injectable)(),i(0,(0,o.inject)(d.IConfigurationService)),i(1,(0,o.inject)(u.IFileSystem)),i(2,(0,o.inject)(d.IExtensionContext)),i(3,(0,o.inject)(d.IsWebExtension))],p),t.InteractiveWindowDebuggingStartupCodeProvider=p},94523:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateCellsFromNotebookDocument=t.generateCellsFromDocument=t.generateCellRangesFromDocument=t.hasCells=t.generateCells=t.uncommentMagicCommands=t.createMarkdownCell=t.createCodeCell=void 0,n(8513);const r=n(66828),i=n(49691),o=n(58681),s=n(14154),a=n(86563);function c(e,t){const n="boolean"==typeof t&&t;return e=e||"",{cell_type:"code",execution_count:null,metadata:{},outputs:"boolean"==typeof t?[]:t||[],source:Array.isArray(e)?(0,a.appendLineFeed)(e,"\n",n?u:void 0):e}}function l(e,t=!1){return e=Array.isArray(e)?e:[e],{cell_type:"markdown",metadata:{},source:t?e:(0,a.generateMarkdownFromCodeLines)(e)}}function u(e){return/^#\s*!/.test(e)?/^#\s*!\s*%%?/.test(e)?e.replace(/^#\s*!\s*/,""):e.replace(/^#\s*/,""):e}function d(e,t,n){return{data:c(e,n),uri:t}}function p(e,t,n=!1){return{uri:t,data:l(e,n)}}function h(e,t,n,r){const s=t.splitLines({trim:!1}),c=s[0],l=new i.CellMatcher(e),{magicCommandsAsComments:u=!1}=e||{};if(l.isMarkdown(c)){let e=-1;return(0,a.parseForComments)(s,((e,t)=>(0,o.noop)()),((t,n)=>{t&&t.length>0&&-1===e&&(e=r?n:-1)})),e>=0?[p(s.slice(0,e),n),d(s.slice(e),n,u)]:[p(s,n)]}return[d(s,n,u)]}function f(e,t){const n=new i.CellMatcher(t),o=[];for(let t=0;t<e.lineCount;t+=1){const i=e.lineAt(t);if(n.isCell(i.text)){if(o.length>0){const n=o[o.length-1];n.range=new r.Range(n.range.start,e.lineAt(t-1).range.end)}o.push({range:i.range,cell_type:n.getCellType(i.text)})}}if(o.length>=1){const t=e.lineAt(e.lineCount-1),n=o[o.length-1];n.range=new r.Range(n.range.start,t.range.end)}return o}t.createCodeCell=c,t.createMarkdownCell=l,t.uncommentMagicCommands=u,t.generateCells=h,t.hasCells=function(e,t){const n=new i.CellMatcher(t);for(let t=0;t<e.lineCount;t+=1){const r=e.lineAt(t);if(n.isCell(r.text))return!0}return!1},t.generateCellRangesFromDocument=f,t.generateCellsFromDocument=function(e,t){const n=f(e,t);return Array.prototype.concat(...n.map((n=>{const r=e.getText(n.range);return h(t,r,e.uri,!1)})))},t.generateCellsFromNotebookDocument=function(e,t){return e.getCells().filter((e=>!e.metadata.isInteractiveWindowMessageCell)).map((e=>{let n=e.document.getText().splitLines({trim:!1,removeEmptyEntries:!1});void 0!==e.metadata.interactiveWindowCellMarker&&n.unshift(e.metadata.interactiveWindowCellMarker+"\n");const i=(0,s.createJupyterCellFromVSCNotebookCell)(e);return i.source=e.kind===r.NotebookCellKind.Code?(0,a.appendLineFeed)(n,"\n",t?u:void 0):(0,a.appendLineFeed)(n),{data:i,file:""}}))}},49691:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CellMatcher=void 0;const r=n(15925);n(8513);const i=n(58681);t.CellMatcher=class{constructor(e){this.codeMatchRegEx=this.createRegExp(e?e.codeRegularExpression:void 0,r.RegExpValues.PythonCellMarker),this.markdownMatchRegEx=this.createRegExp(e?e.markdownRegularExpression:void 0,r.RegExpValues.PythonMarkdownCellMarker),this.codeExecRegEx=new RegExp(`${this.codeMatchRegEx.source}(.*)`),this.markdownExecRegEx=new RegExp(`${this.markdownMatchRegEx.source}(.*)`),this.defaultCellMarker=e?.defaultCellMarker?e.defaultCellMarker:"# %%"}isCell(e){return this.isCode(e)||this.isMarkdown(e)}isMarkdown(e){return this.markdownMatchRegEx.test(e.trim())}isCode(e){return this.codeMatchRegEx.test(e.trim())||e.trim()===this.defaultCellMarker}getCellType(e){return this.isMarkdown(e)?"markdown":"code"}isEmptyCell(e){return 0===this.stripFirstMarker(e).trim().length}stripFirstMarker(e){const t=e.splitLines({trim:!1,removeEmptyEntries:!1});return t.length>0&&(this.isCode(t[0])||this.isMarkdown(t[0]))?t.slice(1).join("\n"):e}stripFirstMarkerNoConcat(e){return e.length>0&&(this.isCode(e[0])||this.isMarkdown(e[0]))?e.slice(1):e}getFirstMarker(e){const t=e.splitLines({trim:!1,removeEmptyEntries:!1});if(t.length>0&&(this.isCode(t[0])||this.isMarkdown(t[0])))return t[0]}createRegExp(e,t){try{if(e)return new RegExp(e)}catch{(0,i.noop)()}return t}}},50451:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGenerator=void 0;const r=n(66828),i=n(86563),o=n(11642),s=n(94523),a=n(49691),c=n(46729);t.CodeGenerator=class{constructor(e,t,n,r,i,o){this.documentManager=e,this.configService=t,this.storage=n,this.notebook=r,this.executionCount=0,this.cellIndexesCounted={},this.disposables=[],o.push(this),this.documentManager.onDidChangeTextDocument(this.onChangedDocument,this,this.disposables),i.onDidChangeNotebookCellExecutionState(this.onDidCellStateChange,this,this.disposables)}dispose(){this.disposed||(this.disposed=!0,this.storage.clear(),this.disposables.forEach((e=>e.dispose())))}reset(){this.storage.clear(),this.executionCount=0}async generateCode(e,t,n,r){const{executableLines:i}=this.extractExecutableLines(e);if(this.executionCount+=1,this.cellIndexesCounted[t]=!0,i.length>0&&i.find((e=>e.trim().length>0)))return this.generateCodeImpl(e,this.executionCount,n,r)}extractExecutableLines(e){const t=e.interactive.originalSource,n=this.configService.getSettings(this.notebook.uri),r=new a.CellMatcher(n),o=(0,i.splitMultilineString)(t);if(n.magicCommandsAsComments&&o.forEach(((e,t)=>o[t]=(0,s.uncommentMagicCommands)(e))),e.interactiveWindowCellMarker&&o.length&&o[0].trim()===e.interactiveWindowCellMarker.trim()){const e=o.slice(1).filter((e=>e.trim().length>0));if(e.length>0&&e[0].trim().startsWith("%%")){const t=o.slice(o.indexOf(e[0]));return{lines:t,executableLines:t}}}return o.length>0&&(r.isCode(o[0])||r.isMarkdown(o[0]))?{lines:o,executableLines:o.slice(1)}:{lines:o,executableLines:o}}onDidCellStateChange(e){e.cell.notebook===this.notebook&&e.cell.executionSummary?.executionOrder&&!this.cellIndexesCounted[e.cell.index]&&(this.executionCount+=1,this.cellIndexesCounted[e.cell.index]=!0)}async generateCodeImpl(e,t,n,i){const{lineIndex:s,uristring:a}=e.interactive,l=this.documentManager.textDocuments.find((e=>e.uri.toString()===a));if(!l)return;const{stripped:u,trueStartLine:d}=this.extractStrippedLines(e),p=l.lineAt(d),h=l.lineAt(Math.min(d+u.length-1,l.lineCount-1));let f=0;for(;f<u.length&&0===u[f].trim().length;)f+=1;const g=f+d,m=l.offsetAt(new r.Position(s,0)),y=l.offsetAt(h.rangeIncludingLineBreak.end),v=(e.interactiveWindowCellMarker||"").length>0,{runtimeLine:b,debuggerStartLine:w}=this.addHiddenLines(n,u,d,g,v,i),C=u.join(""),S=l.getText(new r.Range(new r.Position(s,0),h.rangeIncludingLineBreak.end)),_=(await(0,c.computeHash)(C,"SHA-1")).substring(0,12),k=this.getRuntimeFile(_,t),P=n?-1:0,I={line:p?p.lineNumber+1:1,endLine:h?h.lineNumber+1:1,firstNonBlankLineIndex:g,debuggerStartLine:w,executionCount:t,startOffset:m,endOffset:y,deleted:!1,code:C,trimmedRightCode:u.map((e=>e.replace(/[ \t\r]+\n$/g,"\n"))).join(""),realCode:S,runtimeLine:b,runtimeFile:k,id:e.id,timestamp:Date.now(),lineOffsetRelativeToIndexOfFirstLineInCell:P,hasCellMarker:v};return(0,o.traceInfo)(`Generated code for ${t} = ${k} with ${u.length} lines`),this.storage.store(r.Uri.parse(e.interactive.uristring),I),I}getRuntimeFile(e,t){return`<ipython-input-${t}-${e}>`}onChangedDocument(e){const t=this.storage.getFileGeneratedCode(e.document.uri);if(t){const n=e.document.getText();e.contentChanges.forEach((e=>{this.handleContentChange(n,e,t)}))}}extractStrippedLines(e){const t=(0,i.splitMultilineString)(e.interactive.originalSource),{lines:n}=this.extractExecutableLines(e);let r=e.interactive.lineIndex+1;if(!e.interactiveWindowCellMarker){r=e.interactive.lineIndex;for(let e=0;e<n.length;e+=1)if(n[e]!==t[e]){r+=e+1;break}}let o=0;for(;o<n.length&&0===n[o].trim().length;)o+=1;let s=n.length-1,a=n.length-2;for(;a>0;){const e=n[s],t=n[a];if(0!==e.length&&"\n"!==e||0!==t.length&&"\n"!==t)break;n.splice(s,1),s-=1,a-=1}!n[s].endsWith("\n")&&n[s].length>0&&(n[s]=`${n[s]}\n`);for(let e=0;e<n.length;e++)n[e]=n[e].replace(/\r\n/g,"\n");return{stripped:n,trueStartLine:r}}handleContentChange(e,t,n){const r=t.range.start.line-t.range.end.line+t.text.split("\n").length-1,i=t.text.length-t.rangeLength,o=t.rangeLength<=0?t.rangeOffset:t.rangeOffset+t.rangeLength-1;n.forEach((n=>{n.endOffset<t.rangeOffset||(n.startOffset>o?(n.line+=r,n.endLine+=r,n.startOffset+=i,n.endOffset+=i):n.startOffset===o?n.deleted||t.rangeLength>0||0===r?n.deleted=e.substr(n.startOffset,n.endOffset-n.startOffset)!==n.realCode:(n.line+=r,n.endLine+=r,n.startOffset+=i,n.endOffset+=i):n.deleted=e.substr(n.startOffset,n.endOffset-n.startOffset)!==n.realCode)}))}addHiddenLines(e,t,n,r,i,o){const s=o||!0===this.configService.getSettings(void 0).forceIPyKernelDebugger;return e&&this.configService.getSettings(this.notebook.uri).stopOnFirstLineWhileDebugging?s?(t.splice(0,0,"breakpoint()\n"),{runtimeLine:1,debuggerStartLine:n+1}):(t.splice(0,0,"breakpoint()\n"),{runtimeLine:2,debuggerStartLine:n}):{runtimeLine:1,debuggerStartLine:i?r:r+1}}}},2644:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGeneratorFactory=void 0;const o=n(86700),s=n(10053),a=n(42080),c=n(50451),l=n(74858);let u=class{constructor(e,t,n,r,i){this.documentManager=e,this.configService=t,this.storageFactory=n,this.disposables=r,this.notebooks=i,this.codeGenerators=new WeakMap}activate(){this.notebooks.onDidCloseNotebookDocument(this.onDidCloseNotebook,this,this.disposables)}getOrCreate(e){const t=this.get(e);if(t)return t;const n=new c.CodeGenerator(this.documentManager,this.configService,this.storageFactory.getOrCreate(e),e,this.notebooks,this.disposables);return this.codeGenerators.set(e,n),n}get(e){return this.codeGenerators.get(e)}onDidCloseNotebook(e){this.codeGenerators.get(e)?.dispose(),this.codeGenerators.delete(e)}};u=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IDocumentManager)),i(1,(0,o.inject)(a.IConfigurationService)),i(2,(0,o.inject)(l.IGeneratedCodeStorageFactory)),i(3,(0,o.inject)(a.IDisposableRegistry)),i(4,(0,o.inject)(s.IVSCodeNotebook))],u),t.CodeGeneratorFactory=u},2785:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.generateCommand=t.CodeLensFactory=void 0;const c=n(86700),l=n(66828),u=n(10053),d=n(11642),p=n(42080),h=s(n(25251)),f=n(15139),g=n(94062),m=n(15925),y=n(94523),v=n(74858),b=n(11386),w=h.DataScience.runCurrentCellAndAddBelow,C=h.DataScience.addCellBelowCommandTitle,S=h.DataScience.debugCellCommandTitle,_=h.DataScience.debugCellCommandTitle,k=h.DataScience.debugStepOverCommandTitle,P=h.DataScience.debugContinueCommandTitle,I=h.DataScience.debugStopCommandTitle,E=h.DataScience.runCellLensCommandTitle,T=h.DataScience.runAllCellsLensCommandTitle,D=h.DataScience.runAllCellsAboveLensCommandTitle,x=h.DataScience.runCellAndAllBelowLensCommandTitle,R=h.DataScience.scrollToCellTitleFormatMessage;let j=class{constructor(e,t,n,r,i,o,s){this.configService=e,this.documentManager=t,this.workspace=n,this.generatedCodeStorageFactory=o,this.updateEvent=new l.EventEmitter,this.notebookData=new Map,this.codeLensCache=new Map,this.totalCodeLensUpdateTimeInMs=0,this.codeLensUpdateCount=0,this.maxCellCount=0,this.documentManager.onDidCloseTextDocument(this.onClosedDocument,this,i),this.workspace.onDidGrantWorkspaceTrust((()=>this.codeLensCache.clear()),this,i),this.configService.getSettings(void 0).onDidChange(this.onChangedSettings,this,i),r.onDidChangeNotebookCellExecutionState(this.onDidChangeNotebookCellExecutionState,this,i),s.onDidDisposeKernel((e=>{this.notebookData.delete(e.notebook.uri.toString())}),this,i)}getPerfMeasures(){return{totalCodeLensUpdateTimeInMs:this.totalCodeLensUpdateTimeInMs,codeLensUpdateCount:this.codeLensUpdateCount,maxCellCount:this.maxCellCount}}get updateRequired(){return this.updateEvent.event}createCodeLenses(e){const t=this.getCodeLensCacheData(e);return[...t.documentLenses,...t.gotoCellLens]}getCellRanges(e){return this.getCodeLensCacheData(e).cellRanges}getCodeLensCacheData(e){const t=new b.StopWatch;let n=!1;const r=e.uri.toString();let i=this.codeLensCache.get(r),o=!1;i||(i={cachedDocumentVersion:void 0,cachedExecutionCounts:new Set,documentLenses:[],cellRanges:[],gotoCellLens:[]},o=!0,this.codeLensCache.set(r,i)),i.cachedDocumentVersion!==e.version&&(i.cellRanges=(0,y.generateCellRangesFromDocument)(e,this.configService.getSettings(e.uri)),i.documentLenses=[],i.gotoCellLens=[],i.cachedDocumentVersion=e.version,o=!0);const s=this.getDocumentExecutionCounts(r);if((s.length!==i.cachedExecutionCounts.size||s.find((e=>!i?.cachedExecutionCounts.has(e))))&&(i.gotoCellLens=[],i.cachedExecutionCounts=new Set(s),o=!0),0===i.documentLenses.length&&o&&i.cellRanges.length){n=!0;const t=this.enumerateCommands(e.uri);(0,d.traceVerbose)(`CodeLensFactory: Generating new code lenses for version ${e.version} of document ${e.uri} for commands ${t.join(", ")}`);let r=!0;i.cellRanges.forEach((n=>{t.forEach((t=>{const o=this.createCodeLens(e,n,t,r);o&&i.documentLenses.push(o)})),r=!1}))}else(0,d.traceInfoIfCI)(`NOT Generating new code lenses for version ${e.version} of document ${e.uri} - needUpdate: ${o}, cellRanges.length: ${i.cellRanges.length}`);if(o&&0===i.gotoCellLens.length&&i.cellRanges.length&&this.configService.getSettings(e.uri).addGotoCodeLenses){const t=this.generatedCodeStorageFactory.get({fileUri:e.uri}),n=t?t.all.find((t=>t.uri.toString()===e.uri.toString()))?.generatedCodes:void 0;n&&n.length&&i.cellRanges.forEach((t=>{const r=this.createExecutionLens(e,t.range,n);r&&i?.gotoCellLens.push(r)}))}return n&&(this.totalCodeLensUpdateTimeInMs+=t.elapsedTime,this.codeLensUpdateCount+=1,this.maxCellCount=Math.max(this.maxCellCount,i.cellRanges.length)),i}getDocumentExecutionCounts(e){return[...this.notebookData.values()].map((t=>t.documentExecutionCounts.get(e))).filter((e=>void 0!==e))}onDidChangeNotebookCellExecutionState(e){if(e.cell.notebook.notebookType!==m.InteractiveWindowView)return;if(e.state!==l.NotebookCellExecutionState.Idle||!e.cell.executionSummary?.executionOrder)return;const t=(0,f.getInteractiveCellMetadata)(e.cell);let n=this.notebookData.get(e.cell.notebook.uri.toString());n||(n={cellExecutionCounts:new Map,documentExecutionCounts:new Map},this.notebookData.set(e.cell.notebook.uri.toString(),n)),void 0!==n&&void 0!==t&&(n.cellExecutionCounts.set(t.id,e.cell.executionSummary.executionOrder),n.documentExecutionCounts.set(t.interactive.uristring,e.cell.executionSummary.executionOrder),this.updateEvent.fire())}onClosedDocument(e){this.codeLensCache.delete(e.uri.toString())}onChangedSettings(){this.codeLensCache.clear(),this.updateEvent.fire()}enumerateCommands(e){let t;const n=this.configService.getSettings(e).codeLenses;t=n?n.split(",").map((e=>e.trim())):m.CodeLensCommands.DefaultDesignLenses;const r=this.configService.getSettings(e).debugCodeLenses;t=r?t.concat(r.split(",").map((e=>e.trim()))):t.concat(m.CodeLensCommands.DefaultDebuggingLenses);let i=[];return this.workspace.isTrusted||(i=[...m.CodeLensCommands.DebuggerCommands,...m.CodeLensCommands.DebuggerCommands,m.Commands.RunAllCells,m.Commands.RunAllCellsAbove,m.Commands.RunAllCellsAbovePalette,m.Commands.RunCellAndAllBelowPalette,m.Commands.RunCurrentCell,m.Commands.RunCurrentCellAdvance,m.Commands.RunCurrentCellAndAddBelow,m.Commands.RunFileInInteractiveWindows,m.Commands.InterruptKernel,m.Commands.RunToLine,m.Commands.RunCell,m.Commands.DebugCell,m.Commands.DebugContinue,m.Commands.DebugStepOver,m.Commands.DebugStop,m.Commands.RunCellAndAllBelowPalette]),i&&(t=t.filter((e=>!i.includes(e)))),t}createCodeLens(e,t,n,r){const{range:i,cell_type:o}=t;switch(n){case m.Commands.RunCurrentCellAndAddBelow:return this.generateCodeLens(i,m.Commands.RunCurrentCellAndAddBelow,w);case m.Commands.AddCellBelow:return this.generateCodeLens(i,m.Commands.AddCellBelow,C,[e.uri,i.start.line]);case m.Commands.DebugCurrentCellPalette:return this.generateCodeLens(i,m.Commands.DebugCurrentCellPalette,S);case m.Commands.DebugCell:if("code"!==o)break;return this.generateCodeLens(i,m.Commands.DebugCell,_,[e.uri,i.start.line,i.start.character,i.end.line,i.end.character]);case m.Commands.DebugStepOver:if("code"!==o)break;return this.generateCodeLens(i,m.Commands.DebugStepOver,k,[e.uri]);case m.Commands.DebugContinue:if("code"!==o)break;return this.generateCodeLens(i,m.Commands.DebugContinue,P,[e.uri]);case m.Commands.DebugStop:if("code"!==o)break;return this.generateCodeLens(i,m.Commands.DebugStop,I,[e.uri]);case m.Commands.RunCurrentCell:case m.Commands.RunCell:return this.generateCodeLens(i,m.Commands.RunCell,E,[e.uri,i.start.line,i.start.character,i.end.line,i.end.character]);case m.Commands.RunAllCells:return this.generateCodeLens(i,m.Commands.RunAllCells,T,[e.uri,i.start.line,i.start.character]);case m.Commands.RunAllCellsAbovePalette:case m.Commands.RunAllCellsAbove:return r?this.generateCodeLens(i,m.Commands.RunCellAndAllBelow,x,[e.uri,i.start.line,i.start.character]):this.generateCodeLens(i,m.Commands.RunAllCellsAbove,D,[e.uri,i.start.line,i.start.character]);case m.Commands.RunCellAndAllBelowPalette:case m.Commands.RunCellAndAllBelow:return this.generateCodeLens(i,m.Commands.RunCellAndAllBelow,x,[e.uri,i.start.line,i.start.character]);default:(0,d.traceWarning)(`Invalid command for code lens ${n}`)}}findMatchingCellExecutionCount(e){return[...this.notebookData.values()].find((t=>t.cellExecutionCounts.get(e)))?.cellExecutionCounts.get(e)}createExecutionLens(e,t,n){if(n){const r=n.filter((e=>e.line-2===t.start.line)).sort(((e,t)=>e.timestamp-t.timestamp));if(r&&r.length){const n=r[r.length-1],i=this.findMatchingCellExecutionCount(n.id);if(void 0!==i)return this.generateCodeLens(t,m.Commands.ScrollToCell,R(i),[e.uri,n.id])}}}generateCodeLens(e,t,n,r){return new l.CodeLens(e,N(t,n,r))}};function N(e,t,n){return{arguments:n,title:t,command:e}}j=o([(0,c.injectable)(),a(0,(0,c.inject)(p.IConfigurationService)),a(1,(0,c.inject)(u.IDocumentManager)),a(2,(0,c.inject)(u.IWorkspaceService)),a(3,(0,c.inject)(u.IVSCodeNotebook)),a(4,(0,c.inject)(p.IDisposableRegistry)),a(5,(0,c.inject)(v.IGeneratedCodeStorageFactory)),a(6,(0,c.inject)(g.IKernelProvider))],j),t.CodeLensFactory=j,t.generateCommand=N},42277:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CodeLensProviderActivator=void 0;const o=n(86700),s=n(74858),a=n(66828),c=n(15925),l=n(42080);let u=class{constructor(e,t){this.dataScienceCodeLensProvider=e,this.extensionContext=t}activate(){this.extensionContext.subscriptions.push(a.languages.registerCodeLensProvider([c.PYTHON_FILE_ANY_SCHEME],this.dataScienceCodeLensProvider))}};u=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IDataScienceCodeLensProvider)),i(1,(0,o.inject)(l.IExtensionContext))],u),t.CodeLensProviderActivator=u},75463:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataScienceCodeLensProvider=void 0;const c=n(86700),l=s(n(66828)),u=n(10053),d=n(29444),p=n(20397),h=n(42080),f=n(58681),g=n(11386),m=n(41778),y=n(9959),v=n(11642),b=n(15925),w=n(74858),C=s(n(52859)),S=n(66317);let _=class{constructor(e,t,n,r,i,o,s,a){this.serviceContainer=e,this.debugLocationTracker=t,this.documentManager=n,this.configuration=r,this.commandManager=i,this.debugService=s,this.totalExecutionTimeInMs=0,this.totalGetCodeLensCalls=0,this.activeCodeWatchers=[],this.didChangeCodeLenses=new l.EventEmitter,o.push(this),o.push(a.onDidGrantWorkspaceTrust((()=>{(0,p.disposeAllDisposables)(this.activeCodeWatchers),this.activeCodeWatchers=[],this.didChangeCodeLenses.fire()}))),o.push(this.debugService.onDidChangeActiveDebugSession(this.onChangeDebugSession.bind(this))),o.push(this.documentManager.onDidCloseTextDocument(this.onDidCloseTextDocument.bind(this))),this.debugLocationTracker&&o.push(this.debugLocationTracker.updated(this.onDebugLocationUpdated.bind(this)))}dispose(){this.totalGetCodeLensCalls>0&&(0,y.sendTelemetryEvent)(b.Telemetry.CodeLensAverageAcquisitionTime,{duration:this.totalExecutionTimeInMs/this.totalGetCodeLensCalls}),(0,p.disposeAllDisposables)(this.activeCodeWatchers)}get onDidChangeCodeLenses(){return this.didChangeCodeLenses.event}provideCodeLenses(e,t){return[b.NotebookCellScheme,b.InteractiveInputScheme].includes(e.uri.scheme)?[]:this.getCodeLensTimed(e)}getCodeWatcher(e){return this.matchWatcher(e.uri)}onDebugLocationUpdated(){this.didChangeCodeLenses.fire()}onChangeDebugSession(e){this.didChangeCodeLenses.fire()}onDidCloseTextDocument(e){const t=this.activeCodeWatchers.findIndex((t=>t.uri&&t.uri.toString()===e.uri.toString()));t>=0&&this.activeCodeWatchers.splice(t,1)[0].dispose()}getCodeLensTimed(e){const t=new g.StopWatch,n=this.getCodeLens(e);return this.totalExecutionTimeInMs+=t.elapsedTime,this.totalGetCodeLensCalls+=1,new d.ContextKey(b.EditorContexts.HasCodeCells,this.commandManager).set(n&&n.length>0).catch(f.noop),this.configuration.getSettings(e.uri).enableCellCodeLens?this.adjustDebuggingLenses(e,n):[]}adjustDebuggingLenses(e,t){const n=b.CodeLensCommands.DebuggerCommands;if(!this.debugLocationTracker||!this.debugService.activeDebugSession)return t.filter((e=>!!e.command&&!n.includes(e.command.command)));{const r=this.debugLocationTracker.getLocation(this.debugService.activeDebugSession);let i;try{i=r?l.Uri.parse(r.fileName):void 0}catch{}if(r&&(C.isEqual(l.Uri.file(r.fileName),e.uri,!0)||i&&C.isEqual(i,e.uri,!0)))return t.filter((e=>{const t=new l.Position(r.lineNumber-1,r.column-1);return e.range.contains(t)})).filter((e=>!!e.command&&n.includes(e.command.command)));(0,v.traceInfoIfCI)(`Detected debugging context because activeDebugSession is name:"${this.debugService.activeDebugSession.name}", type: "${this.debugService.activeDebugSession.type}", but fell through with debugLocation: ${JSON.stringify(r)}, and document.uri: ${e.uri.toString()}`)}return[]}getCodeLens(e){const t=this.matchWatcher(e.uri);return t?t.getCodeLenses():((0,v.traceVerbose)(`Creating a new watcher for document ${e.uri}`),this.createNewCodeWatcher(e).getCodeLenses())}matchWatcher(e){const t=this.activeCodeWatchers.findIndex((t=>t.uri&&t.uri.toString()==e.toString()));if(t>=0)return this.activeCodeWatchers[t];const n=this.documentManager.textDocuments.filter((t=>t.uri.toString()===e.toString()));return n&&n.length>0?((0,v.traceVerbose)(`creating new code watcher with matching document ${e}`),this.createNewCodeWatcher(n[0])):void 0}createNewCodeWatcher(e){const t=this.serviceContainer.get(w.ICodeWatcher);return t.setDocument(e),t.codeLensUpdated(this.onWatcherUpdated.bind(this)),this.activeCodeWatchers.push(t),t}onWatcherUpdated(){this.didChangeCodeLenses.fire()}};_=o([(0,c.injectable)(),a(0,(0,c.inject)(m.IServiceContainer)),a(1,(0,c.inject)(S.IDebugLocationTracker)),a(1,(0,c.optional)()),a(2,(0,c.inject)(u.IDocumentManager)),a(3,(0,c.inject)(h.IConfigurationService)),a(4,(0,c.inject)(u.ICommandManager)),a(5,(0,c.inject)(h.IDisposableRegistry)),a(6,(0,c.inject)(u.IDebugService)),a(7,(0,c.inject)(u.IWorkspaceService))],_),t.DataScienceCodeLensProvider=_},65410:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CodeWatcher=void 0;const c=n(86700),l=n(66828),u=n(10053),d=n(42080),p=n(58681),h=n(9959),f=n(89275),g=n(58659),m=n(15925),y=n(135),v=n(49691),b=n(74858),w=n(11642),C=n(99203),S=s(n(52859)),_=n(90541);let k=class{constructor(e,t,n,r,i,o){this.interactiveWindowProvider=e,this.configService=t,this.documentManager=n,this.executionHelper=r,this.dataScienceErrorHandler=i,this.codeLensFactory=o,this.version=-1,this.codeLenses=[],this.cells=[],this.codeLensUpdatedEvent=new l.EventEmitter}setDocument(e){this.document=e,this.version=e.version,this.codeLenses=this.codeLensFactory.createCodeLenses(e),this.cells=this.codeLensFactory.getCellRanges(e),this.updateRequiredDisposable=this.codeLensFactory.updateRequired(this.onCodeLensFactoryUpdated.bind(this)),this.closeDocumentDisposable=this.documentManager.onDidCloseTextDocument(this.onDocumentClosed.bind(this))}get codeLensUpdated(){return this.codeLensUpdatedEvent.event}get uri(){return this.document?.uri}getVersion(){return this.version}getCodeLenses(){const e=this.document;return e&&e.version!=this.version&&(this.codeLenses=this.codeLensFactory.createCodeLenses(e),this.cells=this.codeLensFactory.getCellRanges(e),this.version=e.version),this.codeLenses}async debugCurrentCell(){if(this.documentManager.activeTextEditor&&this.documentManager.activeTextEditor.document)return this.runMatchingCell(this.documentManager.activeTextEditor.selection,!1,!0)}dispose(){let e=this.codeLensFactory.getPerfMeasures();e&&e.codeLensUpdateCount>0&&(0,h.sendTelemetryEvent)(m.Telemetry.DocumentWithCodeCells,{codeLensUpdateTime:e.totalCodeLensUpdateTimeInMs/e.codeLensUpdateCount,maxCellCount:e.maxCellCount}),this.codeLensUpdatedEvent.dispose(),this.closeDocumentDisposable?.dispose(),this.updateRequiredDisposable?.dispose()}async runAllCells(){const e=await this.getActiveInteractiveWindow(),t=this.codeLenses.filter((e=>e.command&&e.command.command===m.Commands.RunCell&&e.command.arguments&&e.command.arguments.length>=5));let n=t.length,r=Promise.resolve(!0);for(const i of t){let o=new l.Range(i.command.arguments[1],i.command.arguments[2],i.command.arguments[3],i.command.arguments[4]);if(this.document){n===t.length&&(o=new l.Range(new l.Position(0,0),o.end));const i=this.document.getText(o);n-=1,r=this.addCode(e,i,this.document.uri,o.start.line)}}if(await r,0===t.length)return this.runFileInteractiveInternal(!1)}async runFileInteractive(){return this.runFileInteractiveInternal(!1)}async debugFileInteractive(){return this.runFileInteractiveInternal(!0)}async runAllCellsAbove(e,t){const n=await this.getActiveInteractiveWindow(),r=this.codeLenses.filter((e=>e.command&&e.command.command===m.Commands.RunCell));let i=r.findIndex((n=>n.range.start.line>=e&&n.range.start.character>=t));i<0&&(i=r.length);const o=i;let s=Promise.resolve(!0);for(const e of r){if(!(i>0&&this.document))break;{let t=new l.Range(e.range.start,e.range.end);i===o&&(t=new l.Range(new l.Position(0,0),t.end)),i-=1;const r=this.document.getText(t);s=this.addCode(n,r,this.document.uri,e.range.start.line)}}await s}async runCellAndAllBelow(e,t){const n=await this.getActiveInteractiveWindow(),r=this.codeLenses.filter((e=>e.command&&e.command.command===m.Commands.RunCell)),i=r.findIndex((n=>n.range.start.line>=e&&n.range.start.character>=t));let o=i>0?r.length-i:r.length,s=Promise.resolve(!0);for(let e=i;e>=0&&e<r.length;e+=1)if(o>0&&this.document){const t=r[e];o-=1;const i=this.document.getText(t.range);s=this.addCode(n,i,this.document.uri,t.range.start.line)}await s}async runSelectionOrLine(e,t){if(this.document&&e&&S.isEqual(e.document.uri,this.document.uri)){const n=await this.getActiveInteractiveWindow();let r;if(r=void 0===t||(0,p.isUri)(t)?this.executionHelper.getSelectedTextToExecute(e):t,!r)return;const i=await this.executionHelper.normalizeLines(r);if(!i||0===i.trim().length)return;await this.addCode(n,i,this.document.uri,e.selection.start.line)}}async runToLine(e){if(this.document&&e>0){const t=await this.getActiveInteractiveWindow(),n=this.document.lineAt(e-1),r=this.document.getText(new l.Range(0,0,n.range.end.line,n.range.end.character));r&&r.trim().length&&await this.addCode(t,r,this.document.uri,0)}}async runFromLine(e){if(this.document&&e<this.document.lineCount){const t=await this.getActiveInteractiveWindow(),n=this.document.lineAt(this.document.lineCount-1),r=this.document.getText(new l.Range(e,0,n.range.end.line,n.range.end.character));r&&r.trim().length&&await this.addCode(t,r,this.document.uri,e)}}async runCell(e){if(!this.documentManager.activeTextEditor||!this.documentManager.activeTextEditor.document)return;const t=e.contains(this.documentManager.activeTextEditor.selection.start)&&this.configService.getSettings(this.documentManager.activeTextEditor.document.uri).enableAutoMoveToNextCell;return this.runMatchingCell(e,t)}async debugCell(e){if(this.documentManager.activeTextEditor&&this.documentManager.activeTextEditor.document)return this.runMatchingCell(e,!1,!0)}async runCurrentCell(){if(this.documentManager.activeTextEditor&&this.documentManager.activeTextEditor.document)return this.runMatchingCell(this.documentManager.activeTextEditor.selection,!1)}async runCurrentCellAndAdvance(){if(this.documentManager.activeTextEditor&&this.documentManager.activeTextEditor.document)return this.runMatchingCell(this.documentManager.activeTextEditor.selection,!0)}async addEmptyCellToBottom(){const e=this.documentManager.activeTextEditor;e&&this.insertCell(e,e.document.lineCount+1)}async runCurrentCellAndAddBelow(){if(!this.documentManager.activeTextEditor||!this.documentManager.activeTextEditor.document)return;const e=this.documentManager.activeTextEditor,t=new v.CellMatcher(this.configService.getSettings(e.document.uri));let n=0;const r=this.getDefaultCellMarker(e.document.uri);e&&e.edit((i=>{let o=!0;for(let s=e.selection.end.line+1;s<e.document.lineCount;s+=1)if(t.isCell(e.document.lineAt(s).text)){o=!1,n=s,i.insert(new l.Position(s,0),`${r}\n\n`);break}o&&(n=e.document.lineCount,i.insert(new l.Position(e.document.lineCount,0),`\n${r}\n`))})).then(p.noop,p.noop);const i=new l.Position(n+1,0);return this.runMatchingCell(e.selection,!1).then((()=>this.advanceToRange(new l.Range(i,i))))}insertCellBelowPosition(){const e=this.documentManager.activeTextEditor;e&&e.selection&&this.insertCell(e,e.selection.end.line+1)}insertCellBelow(){const e=this.documentManager.activeTextEditor;if(e&&e.selection){const t=this.getCellFromPosition(e.selection.end);t?this.insertCell(e,t.range.end.line+1):this.insertCell(e,e.selection.end.line+1)}}insertCellAbove(){const e=this.documentManager.activeTextEditor;if(e&&e.selection){const t=this.getCellFromPosition(e.selection.start);t?this.insertCell(e,t.range.start.line):this.insertCell(e,e.selection.start.line)}}deleteCells(){const e=this.documentManager.activeTextEditor;if(!e||!e.selection)return;const t=this.getStartEndCells(e.selection);if(!t)return;const n=t[0],r=t[1];let i=0,o=0,s=r.range.end.line+1,a=0;n.range.start.line>0&&(i=n.range.start.line-1,o=e.document.lineAt(i).range.end.character,s=r.range.end.line,a=r.range.end.character);const c=new l.Range(new l.Position(i,o),new l.Position(s,a));e.edit((e=>{e.replace(c,""),this.codeLensUpdatedEvent.fire()})).then(p.noop,p.noop)}selectCell(){const e=this.documentManager.activeTextEditor;if(e&&e.selection){const t=this.getStartEndCells(e.selection);if(t){const n=t[0],r=t[1];e.selection.anchor.isBeforeOrEqual(e.selection.active)?e.selection=new l.Selection(n.range.start,r.range.end):e.selection=new l.Selection(r.range.end,n.range.start)}}}selectCellContents(){const e=this.documentManager.activeTextEditor;if(!e||!e.selection)return;const t=this.getStartEndCellIndex(e.selection);if(!t)return;const n=t[0],r=t[1],i=e.selection.anchor.isBeforeOrEqual(e.selection.active),o=this.cells,s=[];for(let t=n;t<=r;t+=1){const n=o[t];let r=n.range.start.line+1,a=0,c=n.range.end.line,u=n.range.end.character;n.range.start.line===n.range.end.line&&(r=n.range.start.line,a=e.document.lineAt(r).range.end.character,c=r,u=a),i?s.push(new l.Selection(r,a,c,u)):s.push(new l.Selection(c,u,r,a))}e.selections=s}extendSelectionByCellAbove(){const e=this.documentManager.activeTextEditor;if(!e||!e.selection)return;const t=e.selection,n=this.getStartEndCellIndex(e.selection);if(!n)return;const r=e.selection.anchor.isBefore(e.selection.active),i=this.cells,o=n[0],s=n[1],a=i[o],c=i[s];if(a.range.start.isEqual(t.start)&&c.range.end.isEqual(t.end)){let t;r&&o<s?(t=i[s-1],e.selection=new l.Selection(a.range.start,t.range.end)):o>0&&(t=i[o-1],e.selection=new l.Selection(c.range.end,t.range.start)),t&&e.revealRange(t.range,l.TextEditorRevealType.Default)}else{let t;t=r?o<s?new l.Selection(a.range.start,i[s-1].range.end):new l.Selection(a.range.end,a.range.start):new l.Selection(c.range.end,a.range.start),e.selection=t}}extendSelectionByCellBelow(){const e=this.documentManager.activeTextEditor;if(!e||!e.selection)return;const t=e.selection,n=this.getStartEndCellIndex(e.selection);if(!n)return;const r=e.selection.anchor.isBeforeOrEqual(e.selection.active),i=this.cells,o=n[0],s=n[1],a=i[o],c=i[s];if(a.range.start.isEqual(t.start)&&c.range.end.isEqual(t.end)){let t;r||o===s?s<i.length-1&&(t=i[s+1],e.selection=new l.Selection(a.range.start,t.range.end)):o<s&&(t=i[o+1],e.selection=new l.Selection(c.range.end,t.range.start)),t&&e.revealRange(t.range,l.TextEditorRevealType.Default)}else{let t;t=r?new l.Selection(a.range.start,c.range.end):o<s?new l.Selection(i[o+1].range.start,c.range.end):new l.Selection(c.range.start,c.range.end),e.selection=t}}async moveCellsUp(){await this.moveCellsDirection(!0)}async moveCellsDown(){await this.moveCellsDirection(!1)}changeCellToMarkdown(){this.applyToCells(((e,t,n)=>this.changeCellTo(e,t,"markdown")))}changeCellToCode(){this.applyToCells(((e,t,n)=>this.changeCellTo(e,t,"code")))}gotoNextCell(){const e=this.documentManager.activeTextEditor;if(!e||!e.selection)return;const t=e.selection,n=this.getCurrentCellLens(t.start),r=this.getNextCellLens(t.start);n&&r&&this.advanceToRange(r.range)}gotoPreviousCell(){const e=this.documentManager.activeTextEditor;if(!e||!e.selection)return;const t=e.selection,n=this.getCurrentCellLens(t.start),r=this.getPreviousCellLens(t.start);n&&r&&this.advanceToRange(r.range)}applyToCells(e){const t=this.documentManager.activeTextEditor,n=this.getStartEndCellIndex(t?.selection);if(!t||!n)return;const r=this.cells,i=n[0],o=n[1];for(let n=i;n<=o;n+=1)e(t,r[n],n)}changeCellTo(e,t,n){if("raw"===n)throw Error("Cell Type raw not implemented");if(t.cell_type===n)return;const r=new v.CellMatcher(this.configService.getSettings(e.document.uri)),i=e.document.lineAt(t.range.start.line),o=e.document.getText(i.range),s=this.getDefaultCellMarker(e.document.uri),a="markdown"===n?r.codeExecRegEx.exec(o):r.markdownExecRegEx.exec(o);if(!a)return;const c=a[a.length-1],u="markdown"===n?`${s} [markdown]${c}`:`${s}${c}`;e.edit((async r=>{r.replace(i.range,u),t.cell_type=n,t.range.start.line<t.range.end.line&&(e.selection=new l.Selection(t.range.start.line+1,0,t.range.end.line,t.range.end.character),l.commands.executeCommand("editor.action.removeCommentLine").then(p.noop,p.noop),"markdown"===n&&l.commands.executeCommand("editor.action.addCommentLine").then(p.noop,p.noop))})).then(p.noop,p.noop)}async moveCellsDirection(e){const t=this.documentManager.activeTextEditor;if(!t||!t.selection)return!1;const n=this.getStartEndCellIndex(t.selection);if(!n)return!1;const r=n[0],i=n[1],o=this.cells,s=o[r],a=o[i];if(!s||!a)return!1;const c=new l.Range(s.range.start,a.range.end),u=new l.Range(t.selection.start.line-c.start.line,t.selection.start.character,t.selection.end.line-c.start.line,t.selection.end.character),d=t.selection.active.isBefore(t.selection.anchor);let p;if(e){if(0===r)return!1;{const e=o[r-1];p=this.exchangeTextLines(t,e.range,c).then((n=>(n&&(t.selection=new l.Selection(e.range.start.line+u.start.line,u.start.character,e.range.start.line+u.end.line,u.end.character)),n)))}}else{if(i===o.length-1)return!1;{const e=o[i+1],n=this.exchangeTextLines(t,c,e.range),r=e.range.end.line-e.range.start.line-(c.end.line-c.start.line);p=n.then((n=>(n&&(t.selection=new l.Selection(e.range.start.line+r+u.start.line,u.start.character,e.range.start.line+r+u.end.line,u.end.character)),n)))}}return p.then((e=>(e&&d&&(t.selection=new l.Selection(t.selection.active,t.selection.anchor)),!0)))}exchangeTextLines(e,t,n){const r=t.start.line,i=t.end.line,o=n.start.line,s=n.end.line;if(i>=o)throw RangeError(`Above lines must be fully above not ${i} <= ${o}`);const a=new l.Range(r,0,i,e.document.lineAt(i).range.end.character),c=e.document.getText(a),u=new l.Range(o,0,s,e.document.lineAt(s).range.end.character),d=e.document.getText(u);let p="";if(i+1<o){const t=i+1,n=o-1,r=new l.Range(t,0,n,e.document.lineAt(n).range.end.character);p=`${e.document.getText(r)}\n`}const h=`${d}\n${p}${c}`,f=new l.Range(a.start,u.end);return e.edit((e=>{e.replace(f,h),this.codeLensUpdatedEvent.fire()}))}getStartEndCells(e){const t=this.getStartEndCellIndex(e);if(t)return[this.getCellFromIndex(t[0]),this.getCellFromIndex(t[1])]}getStartEndCellIndex(e){if(!e)return;let t=this.getCellIndex(e.start),n=t;if(e.start.line!==e.end.line&&(n=this.getCellIndex(e.end)),-1===t){if(-1===n)return;{t=0;const n=this.getCellFromIndex(0);if(e.start.line>n.range.start.line)throw RangeError(`Should not be able to pick a range with an end in a cell and start after a cell. ${e.start.line} > ${n.range.end.line}`)}}return t>=0&&n>=0?[t,n]:void 0}insertCell(e,t){const n=this.getDefaultCellMarker(e.document.uri),r=t>=e.document.lineCount?`\n${n}\n`:`${n}\n\n`,i=new l.Position(t,0),o=new l.Position(t+1,0);e.edit((e=>{e.insert(i,r),this.codeLensUpdatedEvent.fire()})).then(p.noop,p.noop),e.selection=new l.Selection(o,o)}getDefaultCellMarker(e){return this.configService.getSettings(e).defaultCellMarker||m.Identifiers.DefaultCodeCellMarker}onCodeLensFactoryUpdated(){this.document&&(this.codeLenses=this.codeLensFactory.createCodeLenses(this.document),this.cells=this.codeLensFactory.getCellRanges(this.document)),this.codeLensUpdatedEvent.fire()}onDocumentClosed(e){this.document&&S.isEqual(e.uri,this.document.uri)&&(this.codeLensUpdatedEvent.dispose(),this.closeDocumentDisposable?.dispose(),this.updateRequiredDisposable?.dispose())}getActiveInteractiveWindow(){return this.interactiveWindowProvider.getOrCreate(this.document?.uri)}async addCode(e,t,n,r,i){let o=!1;try{o=i?await e.debugCode(t,n,r):await e.addCode(t,n,r)}catch(e){e instanceof g.InteractiveCellResultError||await this.dataScienceErrorHandler.handleError(e)}return o}async runMatchingCell(e,t,n){const r=this.getCurrentCellLens(e.start),i=this.getNextCellLens(e.start);if(r&&this.document){const e=this.document.getText(r.range);if(t){const t=this.documentManager.activeTextEditor,{newCellOnRunLast:n}=this.configService.getSettings(this.document.uri),o=new v.CellMatcher(this.configService.getSettings(this.document.uri));i?this.advanceToRange(i.range):n&&t&&!o.isEmptyCell(e)&&this.insertCell(t,r.range.end.line+1)}const o=await this.getActiveInteractiveWindow();await this.addCode(o,e,this.document.uri,r.range.start.line,n)}}getCellIndex(e){return this.cells.findIndex((t=>e&&t.range.contains(e)))}getCellFromIndex(e){const t=this.cells,n=function(e,t){if(t<=0)throw new RangeError(`Length must be > 0 not ${t}`);return e<0&&(e+=t),e<0?0:e>=t?t-1:e}(e,t.length);return t[n]}getCellFromPosition(e){if(!e){const t=this.documentManager.activeTextEditor;t&&t.selection&&(e=t.selection.active)}if(e){const t=this.getCellIndex(e);if(t>=0)return this.cells[t]}}getCurrentCellLens(e){return this.codeLenses.find((t=>t.range.contains(e)&&void 0!==t.command&&t.command.command===m.Commands.RunCell))}getNextCellLens(e){const t=this.codeLenses.findIndex((t=>t.range.contains(e)&&void 0!==t.command&&t.command.command===m.Commands.RunCell));if(t>=0)return this.codeLenses.find(((e,n)=>void 0!==e.command&&e.command.command===m.Commands.RunCell&&n>t))}getPreviousCellLens(e){const t=this.codeLenses.findIndex((t=>t.range.contains(e)&&void 0!==t.command&&t.command.command===m.Commands.RunCell));if(t>=1)return this.codeLenses.find(((e,n)=>void 0!==e.command&&n<t&&n+1===t))}async runFileInteractiveInternal(e){if(this.document){const t=await this.getActiveInteractiveWindow(),n=this.document.getText(),r=this.cells;if(r&&r.length){const n=r.map((n=>this.addCode(t,this.document.getText(n.range),this.document.uri,n.range.start.line,e)));await Promise.all(n)}else await this.addCode(t,n,this.document.uri,0,e)}}advanceToRange(e){const t=this.documentManager.activeTextEditor,n=new l.Selection(e.start,e.start);t&&(t.selection=n,t.revealRange(e,l.TextEditorRevealType.Default))}};o([(0,h.captureUsageTelemetry)(m.Telemetry.DebugCurrentCell)],k.prototype,"debugCurrentCell",null),o([(0,h.captureUsageTelemetry)(m.Telemetry.RunAllCells)],k.prototype,"runAllCells",null),o([(0,h.captureUsageTelemetry)(m.Telemetry.RunFileInteractive)],k.prototype,"runFileInteractive",null),o([(0,h.captureUsageTelemetry)(m.Telemetry.DebugFileInteractive)],k.prototype,"debugFileInteractive",null),o([(0,h.captureUsageTelemetry)(m.Telemetry.RunAllCellsAbove)],k.prototype,"runAllCellsAbove",null),o([(0,h.captureUsageTelemetry)(m.Telemetry.RunCellAndAllBelow)],k.prototype,"runCellAndAllBelow",null),o([(0,h.captureUsageTelemetry)(m.Telemetry.RunSelectionOrLine)],k.prototype,"runSelectionOrLine",null),o([(0,h.captureUsageTelemetry)(m.Telemetry.RunToLine)],k.prototype,"runToLine",null),o([(0,h.captureUsageTelemetry)(m.Telemetry.RunFromLine)],k.prototype,"runFromLine",null),o([(0,w.traceDecoratorVerbose)("CodeWatcher::runCell",C.TraceOptions.BeforeCall)],k.prototype,"runCell",null),o([(0,h.captureUsageTelemetry)(m.Telemetry.DebugCurrentCell)],k.prototype,"debugCell",null),o([(0,h.captureUsageTelemetry)(m.Telemetry.RunCurrentCell)],k.prototype,"runCurrentCell",null),o([(0,h.captureUsageTelemetry)(m.Telemetry.RunCurrentCellAndAdvance)],k.prototype,"runCurrentCellAndAdvance",null),o([(0,h.capturePerfTelemetry)(m.Telemetry.RunCurrentCellAndAddBelow)],k.prototype,"runCurrentCellAndAddBelow",null),o([(0,h.capturePerfTelemetry)(m.Telemetry.InsertCellBelowPosition)],k.prototype,"insertCellBelowPosition",null),o([(0,h.capturePerfTelemetry)(m.Telemetry.InsertCellBelow)],k.prototype,"insertCellBelow",null),o([(0,h.capturePerfTelemetry)(m.Telemetry.InsertCellAbove)],k.prototype,"insertCellAbove",null),o([(0,h.capturePerfTelemetry)(m.Telemetry.DeleteCells)],k.prototype,"deleteCells",null),o([(0,h.capturePerfTelemetry)(m.Telemetry.SelectCell)],k.prototype,"selectCell",null),o([(0,h.capturePerfTelemetry)(m.Telemetry.SelectCellContents)],k.prototype,"selectCellContents",null),o([(0,h.capturePerfTelemetry)(m.Telemetry.ExtendSelectionByCellAbove)],k.prototype,"extendSelectionByCellAbove",null),o([(0,h.capturePerfTelemetry)(m.Telemetry.ExtendSelectionByCellBelow)],k.prototype,"extendSelectionByCellBelow",null),o([(0,h.capturePerfTelemetry)(m.Telemetry.MoveCellsUp)],k.prototype,"moveCellsUp",null),o([(0,h.capturePerfTelemetry)(m.Telemetry.MoveCellsDown)],k.prototype,"moveCellsDown",null),o([(0,h.capturePerfTelemetry)(m.Telemetry.ChangeCellToMarkdown)],k.prototype,"changeCellToMarkdown",null),o([(0,h.capturePerfTelemetry)(m.Telemetry.ChangeCellToCode)],k.prototype,"changeCellToCode",null),o([(0,h.capturePerfTelemetry)(m.Telemetry.GotoNextCellInFile)],k.prototype,"gotoNextCell",null),o([(0,h.capturePerfTelemetry)(m.Telemetry.GotoPrevCellInFile)],k.prototype,"gotoPreviousCell",null),k=o([(0,c.injectable)(),a(0,(0,c.inject)(y.IInteractiveWindowProvider)),a(1,(0,c.inject)(d.IConfigurationService)),a(2,(0,c.inject)(u.IDocumentManager)),a(3,(0,c.inject)(f.ICodeExecutionHelper)),a(4,(0,c.inject)(_.IDataScienceErrorHandler)),a(5,(0,c.inject)(b.ICodeLensFactory))],k),t.CodeWatcher=k},11633:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Decorator=void 0;const c=n(86700),l=s(n(66828)),u=n(77886),d=n(10053),p=n(15925),h=n(42080),f=n(86563),g=n(94523);let m=class{constructor(e,t,n,r){this.documentManager=e,this.configuration=n,this.extensionChecker=r,this.computeDecorations(),t.push(this),t.push(this.configuration.getSettings(void 0).onDidChange(this.settingsChanged,this)),t.push(this.documentManager.onDidChangeActiveTextEditor(this.changedEditor,this)),t.push(this.documentManager.onDidChangeTextEditorSelection(this.changedSelection,this)),t.push(this.documentManager.onDidChangeTextDocument(this.changedDocument,this)),this.settingsChanged()}activate(){}dispose(){this.timer&&clearTimeout(this.timer)}settingsChanged(){this.documentManager.activeTextEditor&&this.triggerUpdate(this.documentManager.activeTextEditor)}changedEditor(){this.triggerUpdate(void 0)}changedDocument(e){this.documentManager.activeTextEditor&&e.document===this.documentManager.activeTextEditor.document&&this.triggerUpdate(this.documentManager.activeTextEditor)}changedSelection(e){e.textEditor&&e.textEditor.selection.anchor&&this.triggerUpdate(e.textEditor)}triggerUpdate(e){this.timer&&clearTimeout(this.timer),this.timer=setTimeout((()=>this.update(e)),100)}computeDecorations(){this.currentCellTopUnfocused=this.documentManager.createTextEditorDecorationType({borderColor:new l.ThemeColor("interactive.inactiveCodeBorder"),borderWidth:"2px 0px 0px 0px",borderStyle:"solid",isWholeLine:!0}),this.currentCellBottomUnfocused=this.documentManager.createTextEditorDecorationType({borderColor:new l.ThemeColor("interactive.inactiveCodeBorder"),borderWidth:"0px 0px 1px 0px",borderStyle:"solid",isWholeLine:!0}),this.currentCellTop=this.documentManager.createTextEditorDecorationType({borderColor:new l.ThemeColor("interactive.activeCodeBorder"),borderWidth:"2px 0px 0px 0px",borderStyle:"solid",isWholeLine:!0}),this.currentCellBottom=this.documentManager.createTextEditorDecorationType({borderColor:new l.ThemeColor("interactive.activeCodeBorder"),borderWidth:"0px 0px 1px 0px",borderStyle:"solid",isWholeLine:!0})}update(e){const t=void 0===e?this.documentManager.visibleTextEditors:[e];for(const e of t)if(e&&e.document&&e.document.languageId===p.PYTHON_LANGUAGE&&!(0,f.getAssociatedJupyterNotebook)(e.document)&&this.currentCellTop&&this.currentCellBottom&&this.currentCellTopUnfocused&&this.currentCellBottomUnfocused&&this.extensionChecker.isPythonExtensionInstalled){const t=this.configuration.getSettings(e.document.uri);if(t.decorateCells){const n=(0,g.generateCellRangesFromDocument)(e.document,t).map((e=>e.range)).filter((t=>t.contains(e.selection.anchor))),r=n.length>0?[new l.Range(n[0].start,n[0].start)]:[],i=n.length>0?[new l.Range(n[0].end,n[0].end)]:[];this.documentManager.activeTextEditor===e?(e.setDecorations(this.currentCellTop,r),e.setDecorations(this.currentCellBottom,i),e.setDecorations(this.currentCellTopUnfocused,[]),e.setDecorations(this.currentCellBottomUnfocused,[])):(e.setDecorations(this.currentCellTop,[]),e.setDecorations(this.currentCellBottom,[]),e.setDecorations(this.currentCellTopUnfocused,r),e.setDecorations(this.currentCellBottomUnfocused,i))}else e.setDecorations(this.currentCellTop,[]),e.setDecorations(this.currentCellBottom,[]),e.setDecorations(this.currentCellTopUnfocused,[]),e.setDecorations(this.currentCellBottomUnfocused,[])}}};m=o([(0,c.injectable)(),a(0,(0,c.inject)(d.IDocumentManager)),a(1,(0,c.inject)(h.IDisposableRegistry)),a(2,(0,c.inject)(h.IConfigurationService)),a(3,(0,c.inject)(u.IPythonExtensionChecker))],m),t.Decorator=m},50088:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeneratedCodeStorage=void 0;const r=n(56297);t.GeneratedCodeStorage=class{constructor(){this.codeGeneratorsByFile=new r.ResourceMap}clear(){this.codeGeneratorsByFile.clear()}get all(){return[...this.codeGeneratorsByFile.entries()].map((e=>({uri:e[0],generatedCodes:e[1].filter((e=>!e.deleted))}))).filter((e=>e.generatedCodes.length>0))}getFileGeneratedCode(e){return this.codeGeneratorsByFile.get(e)||[]}store(e,t){const n=this.codeGeneratorsByFile.get(e)||[];let r=!1;for(let e=0;e<n.length&&!r;e+=1){const i=n[e];t.line>=i.line&&t.line<=i.endLine?(n.splice(e,1,t),r=!0):i.line>t.line&&(n.splice(e,0,t),r=!0)}r||n.push(t),this.codeGeneratorsByFile.set(e,n)}}},94671:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.GeneratedCodeStorageFactory=void 0;const o=n(86700),s=n(10053),a=n(50088);let c=class{constructor(e){this.notebook=e,this.storages=new WeakMap}getOrCreate(e){return this.storages.has(e)||this.storages.set(e,new a.GeneratedCodeStorage),this.storages.get(e)}get(e){if("notebook"in e)return this.storages.get(e.notebook);{const t=this.notebook.notebookDocuments.find((t=>this.storages.get(t)?.all.find((t=>t.uri.toString()===e.fileUri.toString()))));return t?this.storages.get(t):void 0}}};c=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IVSCodeNotebook))],c),t.GeneratedCodeStorageFactory=c},50016:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonCellFoldingProvider=void 0;const o=n(86700),s=n(66828),a=n(15925),c=n(42080),l=n(74858);let u=class{constructor(e,t,n){this.dataScienceCodeLensProvider=e,this.extensionContext=t,this.configurationService=n}activate(){this.configurationService.getSettings().pythonCellFolding&&this.extensionContext.subscriptions.push(s.languages.registerFoldingRangeProvider([a.PYTHON_FILE_ANY_SCHEME],this))}provideFoldingRanges(e,t,n){if([a.NotebookCellScheme,a.InteractiveInputScheme].includes(e.uri.scheme))return;const r=this.dataScienceCodeLensProvider.getCodeWatcher(e);if(r){const e=r.getCodeLenses();if(n.isCancellationRequested||0==e.length)return;return e.map((e=>new s.FoldingRange(e.range.start.line,e.range.end.line,s.FoldingRangeKind.Region)))}}};u=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IDataScienceCodeLensProvider)),i(1,(0,o.inject)(c.IExtensionContext)),i(2,(0,o.inject)(c.IConfigurationService))],u),t.PythonCellFoldingProvider=u},74858:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ICodeGeneratorFactory=t.IGeneratedCodeStorageFactory=t.IGeneratedCodeStore=t.ICodeLensFactory=t.ICodeWatcher=t.IDataScienceCodeLensProvider=void 0,t.IDataScienceCodeLensProvider=Symbol("IDataScienceCodeLensProvider"),t.ICodeWatcher=Symbol("ICodeWatcher"),t.ICodeLensFactory=Symbol("ICodeLensFactory"),t.IGeneratedCodeStore=Symbol("IGeneratedCodeStore"),t.IGeneratedCodeStorageFactory=Symbol("IGeneratedCodeStorageFactory"),t.ICodeGeneratorFactory=Symbol("ICodeGeneratorFactory")},80246:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.GeneratedCodeStorageManager=void 0;const o=n(86700),s=n(94062),a=n(50867),c=n(15925),l=n(20397),u=n(42080),d=n(74858);let p=class{constructor(e,t,n,r,i){this.kernelProvider=e,this.codeGeneratorFactory=n,this.storageFactory=r,this.controllers=i,this.disposables=[],t.push(this)}dispose(){(0,l.disposeAllDisposables)(this.disposables)}activate(){this.kernelProvider.onDidCreateKernel(this.onDidCreateKernel,this,this.disposables),this.controllers.onControllerSelected(this.onNotebookControllerSelected,this,this.disposables)}onNotebookControllerSelected({notebook:e}){this.storageFactory.get({notebook:e})?.clear(),this.codeGeneratorFactory.get(e)?.reset()}onDidCreateKernel(e){const t=e.notebook;"jupyterExtension"===e.creator&&t.notebookType===c.InteractiveWindowView&&(this.storageFactory.get({notebook:t})?.clear(),e.onRestarted((()=>{this.storageFactory.get({notebook:t})?.clear(),this.codeGeneratorFactory.getOrCreate(t).reset()}),this,this.disposables))}};p=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IKernelProvider)),i(1,(0,o.inject)(u.IDisposableRegistry)),i(2,(0,o.inject)(d.ICodeGeneratorFactory)),i(3,(0,o.inject)(d.IGeneratedCodeStorageFactory)),i(4,(0,o.inject)(a.IControllerRegistration))],p),t.GeneratedCodeStorageManager=p},15139:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInteractiveInputTab=t.generateInteractiveCode=t.getInteractiveCellMetadata=void 0;const r=n(86563),i=n(58681),o=n(94523);t.getInteractiveCellMetadata=function(e){if(void 0!==e.metadata.interactive)return e.metadata},t.generateInteractiveCode=function(e,t,n){const i=e.splitLines({trim:!1,removeEmptyEntries:!1}),s=n.stripFirstMarkerNoConcat(i),a=(0,r.removeLinesFromFrontAndBackNoConcat)(s);return(0,r.appendLineFeed)(a,"\n",t.magicCommandsAsComments?o.uncommentMagicCommands:void 0).join("")},t.isInteractiveInputTab=function(e){let t=e;return t&&t.input&&(0,i.isUri)(t.input.uri)&&(0,i.isUri)(t.input.inputBoxUri)}},90760:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getInteractiveWindowTitle=void 0;const s=o(n(15948));n(8513);const a=o(n(25251));t.getInteractiveWindowTitle=function(e){return a.DataScience.interactiveWindowTitleFormat(s.basename(e.path))}},602:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InteractiveWindow=void 0;const c=s(n(15948)),l=n(66828),u=n(10053),d=n(15925);n(8513);const p=n(11642),h=n(83599),f=a(n(71171)),g=n(42080),m=n(58681),y=n(94062),v=n(85446),b=n(58659),w=n(25251),C=n(43138),S=n(30682),_=n(29629),k=n(94433),P=n(62440),I=n(94523),E=n(49691),T=n(135),D=n(15139),x=n(50867),R=n(15139),j=n(35412),N=n(74858),M=n(90541),O=n(9016),A=n(14154),L=n(58880),F=n(86563),U=n(35631),K=n(98729);class W{get onDidChangeViewState(){return this._onDidChangeViewState.event}get closed(){return this.closedEvent.event}get owner(){return this._owner}get submitters(){return this._submitters}get notebookDocument(){return l.workspace.notebookDocuments.find((e=>e.uri.toString()===this.notebookUri.toString()))}get kernelConnectionMetadata(){return this.currentKernelInfo.metadata}constructor(e,t,n,r,i,o,s){this.serviceContainer=e,this._owner=t,this.mode=n,this.inputUri=o,this.controllerHelper=s,this.initialized=!1,this._onDidChangeViewState=new l.EventEmitter,this.closedEvent=new l.EventEmitter,this._submitters=[],this.internalDisposables=[],this.kernelDisposables=[],this.currentKernelInfo={},this.documentManager=this.serviceContainer.get(u.IDocumentManager),this.commandManager=this.serviceContainer.get(u.ICommandManager),this.fs=this.serviceContainer.get(h.IFileSystem),this.configuration=this.serviceContainer.get(g.IConfigurationService),this.jupyterExporter=this.serviceContainer.get(k.INotebookExporter),this.workspaceService=this.serviceContainer.get(u.IWorkspaceService),this.exportDialog=this.serviceContainer.get(P.IExportDialog),this.interactiveWindowDebugger=this.serviceContainer.tryGet(T.IInteractiveWindowDebugger),this.errorHandler=this.serviceContainer.get(M.IDataScienceErrorHandler),this.codeGeneratorFactory=this.serviceContainer.get(N.ICodeGeneratorFactory),this.storageFactory=this.serviceContainer.get(N.IGeneratedCodeStorageFactory),this.kernelProvider=this.serviceContainer.get(y.IKernelProvider),this.debuggingManager=this.serviceContainer.get(T.IInteractiveWindowDebuggingManager),this.isWebExtension=this.serviceContainer.get(g.IsWebExtension),this.controllerRegistration=this.serviceContainer.get(x.IControllerRegistration),this.notebookUri=(0,D.isInteractiveInputTab)(i)?i.input.uri:i.notebook.uri,r&&(this.currentKernelInfo={controller:r.controller,metadata:r.connection}),this._owner&&this._submitters.push(this._owner),l.window.onDidChangeActiveNotebookEditor((e=>{e?.notebook.uri.toString()===this.notebookUri.toString()&&this._onDidChangeViewState.fire()}),this.internalDisposables),l.workspace.onDidCloseNotebookDocument((e=>{e.uri.toString()===this.notebookUri.toString()&&this.closedEvent.fire()}),this.internalDisposables),l.window.activeNotebookEditor?.notebook.uri.toString()===this.notebookUri.toString()&&this._onDidChangeViewState.fire(),this.listenForControllerSelection(),this.cellMatcher=new E.CellMatcher(this.configuration.getSettings(this.owningResource)),this.notebookDocument&&this.codeGeneratorFactory.getOrCreate(this.notebookDocument)}async ensureInitialized(){this.notebookDocument&&this.codeGeneratorFactory.get(this.notebookDocument)||((0,p.traceVerbose)("Showing Interactive editor to initialize codeGenerator from notebook document"),await this.showInteractiveEditor(),this.codeGeneratorFactory.getOrCreate(this.notebookDocument)),this.currentKernelInfo.controller?this.startKernel().ignoreErrors():((0,p.traceWarning)("No controller selected for Interactive Window"),this.insertInfoMessage(w.DataScience.selectKernelForEditor).ignoreErrors),this.initialized=!0}setPendingCellAdd(e){this.kernelConnectionMetadata&&(this.pendingCellAdd=e,this.controllerRegistration.get(this.kernelConnectionMetadata,"interactive")?.setPendingCellAddition(this.notebookDocument,e))}async startKernel(){if(this.currentKernelInfo.kernel)return this.currentKernelInfo.kernel.promise;const e=this.currentKernelInfo.controller,t=this.currentKernelInfo.metadata;if(!e||!t)throw new Error("Controller not selected");const n=(0,C.createDeferred)();n.promise.catch(m.noop),this.currentKernelInfo.kernel=n;const r=this.insertSysInfoMessage(t,S.SysInfoReason.Start);try{const{kernel:i,actualController:o}=await this.controllerHelper.createKernel(t,e,this.owner,this.notebookDocument,this.internalDisposables,this.serviceContainer);this.pendingCellAdd&&this.setPendingCellAdd(this.pendingCellAdd),this.currentKernelInfo.metadata=i.kernelConnectionMetadata,this.currentKernelInfo.controller=o,this.updateSysInfoMessage(this.getSysInfoMessage(i.kernelConnectionMetadata,S.SysInfoReason.Start),!1,r);const s=async()=>{this.notebookDocument&&this.currentKernelInfo.metadata&&(this._insertSysInfoPromise=void 0,this.insertSysInfoMessage(this.currentKernelInfo.metadata,S.SysInfoReason.Restart).then(m.noop,m.noop))};return this.kernelDisposables.push(i.addHook("willRestart",s)),i.onRestarted((async()=>{(0,p.traceInfoIfCI)("Restart event handled in IW"),this.fileInKernel=void 0;const e=Promise.resolve(this.notebookDocument.cellAt(this.notebookDocument.cellCount-1));try{await this.runInitialization(i,this.owner)}catch(e){(0,p.traceError)("Failed to run initialization after restarting")}finally{this.finishSysInfoMessage(i,e,S.SysInfoReason.Restart)}}),this,this.kernelDisposables),this.kernelDisposables.push(i),this.fileInKernel=void 0,await this.runInitialization(i,this.owner),this.finishSysInfoMessage(i,r,S.SysInfoReason.Start),n.resolve(i),i}catch(e){throw n.reject(e),this.currentKernelInfo.kernel=void 0,this.disconnectKernel(),this.owner?this.deleteSysInfoCell(r):await this.finishSysInfoWithFailureMessage(e,r),e}}getSysInfoMessage(e,t){const n=(0,K.getDisplayNameOrNameOfKernelConnection)(e);return t===S.SysInfoReason.Restart?n?w.DataScience.restartingKernelCustomHeader(n):w.DataScience.restartingKernelHeader:n?w.DataScience.startingNewKernelCustomHeader(n):w.DataScience.startingNewKernelHeader}async insertSysInfoMessage(e,t){const n=this.getSysInfoMessage(e,t);return this.insertInfoMessage(n)}async insertInfoMessage(e){if(!this._insertSysInfoPromise){const t=async()=>(await(0,L.chainWithPendingUpdates)(this.notebookDocument,(t=>{const n=new l.NotebookCellData(l.NotebookCellKind.Markup,e,d.MARKDOWN_LANGUAGE);n.metadata={isInteractiveWindowMessageCell:!0,isPlaceholder:!0};const r=l.NotebookEdit.insertCells(this.notebookDocument.cellCount,[n]);t.set(this.notebookDocument.uri,[r])})),this.notebookDocument.cellAt(this.notebookDocument.cellCount-1));this._insertSysInfoPromise=t()}return this._insertSysInfoPromise}updateSysInfoMessage(e,t,n){t&&(this._insertSysInfoPromise=void 0),n.then((n=>(0,L.chainWithPendingUpdates)(this.notebookDocument,(r=>{if(n.index>=0&&n.kind===l.NotebookCellKind.Markup&&n.metadata.isInteractiveWindowMessageCell&&n.metadata.isPlaceholder)return r.replace(n.document.uri,new l.Range(0,0,n.document.lineCount,0),e),void r.set(this.notebookDocument.uri,[l.NotebookEdit.updateCellMetadata(n.index,{isInteractiveWindowMessageCell:!0,isPlaceholder:!t})])})))).ignoreErrors()}deleteSysInfoCell(e){this._insertSysInfoPromise=void 0,e.then((e=>(0,L.chainWithPendingUpdates)(this.notebookDocument,(t=>{if(e.index>=0&&e.kind===l.NotebookCellKind.Markup&&e.metadata.isInteractiveWindowMessageCell&&e.metadata.isPlaceholder){const n=l.NotebookEdit.deleteCells(new l.NotebookRange(e.index,e.index+1));t.set(this.notebookDocument.uri,[n])}})))).ignoreErrors()}finishSysInfoMessage(e,t,n){const r="info"in e?e.kernelConnectionMetadata.interpreter?.displayName:"",i="info"in e&&"ok"===e.info?.status?e.info:void 0,o=i?i.banner.split("\n").join("  \n"):e.toString(),s=n==S.SysInfoReason.Restart?w.DataScience.restartedKernelHeader(r||""):o;this.updateSysInfoMessage(s,!0,t)}async finishSysInfoWithFailureMessage(e,t){let n=await this.errorHandler.getErrorMessageForDisplayInCell(e,"start",this.owningResource);n=n.split("\n").join("  \n"),this.updateSysInfoMessage(n,!0,t)}listenForControllerSelection(){this.controllerRegistration.onControllerSelected((e=>{e.notebook.uri.toString()===this.notebookUri.toString()&&e.controller.id!==this.currentKernelInfo.controller?.id&&(this.disconnectKernel(),this.currentKernelInfo={controller:e.controller.controller,metadata:e.controller.connection},this.initialized&&this.startKernel().ignoreErrors())}),this,this.internalDisposables)}async showInteractiveEditor(){let e;l.window.tabGroups.all.find((t=>{t.tabs.find((t=>{(0,D.isInteractiveInputTab)(t)&&t.input.uri.toString()==this.notebookUri.toString()&&(e=t)}))}));const t=this.notebookDocument||this.openNotebookDocument();return await l.window.showNotebookDocument(t,{preserveFocus:!0,viewColumn:e?.group.viewColumn})}async openNotebookDocument(){return(0,p.traceVerbose)(`Opening notebook document ${this.notebookUri}`),await l.workspace.openNotebookDocument(this.notebookUri)}dispose(){this.internalDisposables.forEach((e=>e.dispose())),this.disconnectKernel()}async addErrorMessage(e,t){const n=new l.NotebookCellData(l.NotebookCellKind.Markup,e,d.MARKDOWN_LANGUAGE);n.metadata={isInteractiveWindowMessageCell:!0};const r=t&&t.index>=0?t.index:this.notebookDocument.cellCount,i=this.controllerRegistration.getSelected(this.notebookDocument),o=(0,_.createOutputWithErrorMessageForDisplay)(e);if(0!==this.notebookDocument.cellCount&&i&&o&&t){const e=O.CellExecutionCreator.getOrCreate(t,new U.KernelController(i.controller));e.started||e.start(t.executionSummary?.timing?.startTime),e.executionOrder=t.executionSummary?.executionOrder,e.appendOutput(o).then(m.noop,m.noop),e.end(!1,t.executionSummary?.timing?.endTime)}else{const e=new l.WorkspaceEdit,t=l.NotebookEdit.insertCells(r,[n]);e.set(this.notebookDocument.uri,[t]),await l.workspace.applyEdit(e)}}changeMode(e){this.mode!==e&&(this.mode=e)}async addCode(e,t,n){return this.submitCode(e,t,n,!1)}useNewDebugMode(){return!!(this.configuration.getSettings(this.owner).forceIPyKernelDebugger||this.currentKernelInfo.metadata&&!(0,y.isLocalConnection)(this.currentKernelInfo.metadata))}async debugCode(e,t,n){let r=!0;const i=this.documentManager.textDocuments.find((e=>this.fs.arePathsSame(e.uri,t)));if(!this.useNewDebugMode()&&i&&i.isUntitled){const e=[...this.documentManager.textDocuments];if(r=await i.save(),r){const n=this.documentManager.textDocuments.filter((t=>-1===e.indexOf(t)));if(n&&n.length>0){const e=n.find((e=>"python"===e.languageId))||n.find((e=>!e.fileName.endsWith(".interactive")))||n[0];t=e.uri,await this.documentManager.openTextDocument(t)}}}return!r||this.submitCode(e,t,n,!0)}async submitCode(e,t,n,r){if(this.cellMatcher.isEmptyCell(e)||!this.currentKernelInfo.controller)return!0;this.updateOwners(t);const i=e.splitLines({trim:!1}),o=new E.CellMatcher(this.configuration.getSettings(t));let s=-1;o.isMarkdown(i[0])&&(0,F.parseForComments)(i,((e,t)=>(0,m.noop)()),((e,t)=>{e&&e.length>0&&-1===s&&(s=t)}));const a=(s>0?[i.slice(0,s).join("\n"),i.slice(s).join("\n")]:[e]).map((e=>{const i=(0,C.createDeferred)();this.setPendingCellAdd(i.promise);const o=this.addNotebookCell(e,t,n),s=this.createExecutionPromise(o,r);return s.catch((e=>{e instanceof b.InteractiveCellResultError?o.then((t=>{e.cell!==t&&this.addErrorMessage(w.DataScience.cellStopOnErrorMessage,t).then(m.noop,m.noop)})).catch(m.noop):o.then((t=>this.errorHandler.getErrorMessageForDisplayInCell(e,"execution",this.owningResource).then((e=>this.addErrorMessage(e,t))))).catch(m.noop)})).finally((()=>{i?.resolve()})),s}));return a[a.length-1]}disconnectKernel(){this.kernelDisposables.forEach((e=>e.dispose())),this.kernelDisposables=[],this.currentKernelInfo.kernel=void 0}async createExecutionPromise(e,t){(0,p.traceInfoIfCI)("InteractiveWindow.ts.createExecutionPromise.start");const n=this.startKernel();n.then(m.noop,m.noop);const r=await e;let i=!0,o=async()=>(0,m.noop)();try{const e=await n;await this.generateCodeAndAddMetadata(r,t,e),t&&this.useNewDebugMode()?await this.debuggingManager.start(this.notebookDocument,r):t&&(0,y.isLocalConnection)(e.kernelConnectionMetadata)&&this.interactiveWindowDebugger&&(o=async()=>this.interactiveWindowDebugger?.detach(e),await this.interactiveWindowDebugger.attach(e),await this.interactiveWindowDebugger.updateSourceMaps(this.storageFactory.get({notebook:r.notebook})?.all||[]),this.interactiveWindowDebugger.enable(e)),(0,p.traceInfoIfCI)("InteractiveWindow.ts.createExecutionPromise.kernel.executeCell");const s=(0,R.getInteractiveCellMetadata)(r),a=this.kernelProvider.getKernelExecution(e);i=await a.executeCell(r,s?.generatedCode?.code)!==y.NotebookCellRunState.Error,(0,p.traceInfoIfCI)("InteractiveWindow.ts.createExecutionPromise.kernel.executeCell.finished")}finally{await o(),(0,p.traceInfoIfCI)("InteractiveWindow.ts.createExecutionPromise.end")}if(!i)throw new b.InteractiveCellResultError(r);return i}async runInitialization(e,t){t?(await this.setFileInKernel(t,e),(0,p.traceInfoIfCI)("file in kernel set for IW")):(0,p.traceInfoIfCI)("Unable to run initialization for IW")}async expandAllCells(){await Promise.all(this.notebookDocument.getCells().map((async(e,t)=>{await this.commandManager.executeCommand("notebook.cell.expandCellInput",{ranges:[{start:t,end:t+1}],document:this.notebookUri})})))}async collapseAllCells(){await Promise.all(this.notebookDocument.getCells().map((async(e,t)=>{e.kind===l.NotebookCellKind.Code&&await this.commandManager.executeCommand("notebook.cell.collapseCellInput",{ranges:[{start:t,end:t+1}],document:this.notebookUri})})))}async scrollToCell(e){const t=await this.showInteractiveEditor(),n=this.notebookDocument.getCells().find((t=>(0,R.getInteractiveCellMetadata)(t)?.id===e));if(n){const e=new l.NotebookRange(n.index,n.index+1);t.revealRange(e,l.NotebookEditorRevealType.Default),t.selection=e}}async hasCell(e){return this.notebookDocument.getCells().some((t=>(0,R.getInteractiveCellMetadata)(t)?.id===e))}get owningResource(){if(this.owner)return this.owner;return this.workspaceService.rootFolder||void 0}async setFileInKernel(e,t){const n=(0,j.getFilePath)(e),r=this.kernelProvider.getKernelExecution(t);("perFile"!==this.mode||this.fileInKernel)&&(this.fileInKernel&&this.fs.arePathsSame(this.fileInKernel,e)||"perFile"===this.mode)?(0,p.traceInfoIfCI)(`Not Initializing __file__ in setFileInKernel with ${n} for mode ${this.mode} currently ${this.fileInKernel}`):((0,p.traceInfoIfCI)(`Initializing __file__ in setFileInKernel with ${e} for mode ${this.mode}`),this.fileInKernel=e,await r.executeHidden(`__file__ = '${n.replace(/\\/g,"\\\\")}'`))}updateOwners(e){this._owner||(this._owner=e),this._submitters.find((t=>t.toString()==e.toString()))||this._submitters.push(e)}async addNotebookCell(e,t,n){const r=this.notebookDocument,i=this.configuration.getSettings(this.owningResource),o=this.cellMatcher.getCellType(e)===d.MARKDOWN_LANGUAGE,s=o?(0,F.generateMarkdownFromCodeLines)(e.splitLines()).join(""):(0,D.generateInteractiveCode)(e,i,this.cellMatcher),a=this.cellMatcher.getFirstMarker(e),c=l.workspace.textDocuments.find((e=>e.uri.toString()===this.owner?.toString()))?.languageId??d.PYTHON_LANGUAGE,u=new l.NotebookCellData(o?l.NotebookCellKind.Markup:l.NotebookCellKind.Code,s,o?d.MARKDOWN_LANGUAGE:c),p={interactiveWindowCellMarker:a,interactive:{uristring:t.toString(),lineIndex:n,originalSource:e},id:(0,f.default)()};u.metadata=p,await(0,L.chainWithPendingUpdates)(r,(e=>{const t=l.NotebookEdit.insertCells(r.cellCount,[u]);e.set(r.uri,[t])}));const h=r.cellCount-1;return r.cellAt(h)}async generateCodeAndAddMetadata(e,t,n){const r=(0,R.getInteractiveCellMetadata)(e);if(!r)return;const i=!(0,y.isLocalConnection)(n.kernelConnectionMetadata)||this.configuration.getSettings(void 0).forceIPyKernelDebugger,o=await this.codeGeneratorFactory.getOrCreate(this.notebookDocument).generateCode(r,e.index,t,i),s={...r,generatedCode:o},a=new l.WorkspaceEdit,c=l.NotebookEdit.updateCellMetadata(e.index,s);a.set(e.notebook.uri,[c]),await l.workspace.applyEdit(a)}async export(){const{magicCommandsAsComments:e}=this.configuration.getSettings(this.owningResource),t=(0,I.generateCellsFromNotebookDocument)(this.notebookDocument,e);if(t&&this.exportDialog){const e=await this.exportDialog.showDialog(P.ExportFormat.ipynb,this.owningResource);e&&await(this.jupyterExporter?.exportToFile(t,(0,j.getFilePath)(e)))}}async exportAs(){const e=await this.startKernel(),t={orig_nbformat:d.defaultNotebookFormat.major};let n;if(e&&await(0,A.updateNotebookMetadata)(this.serviceContainer.get(g.IFeaturesManager),t,e.kernelConnectionMetadata),this.submitters&&this.submitters.length){const e=this.submitters[this.submitters.length-1];n=c.basename(e.path,c.extname(e.path))}this.isWebExtension?this.commandManager.executeCommand(d.Commands.ExportAsPythonScript,this.notebookDocument,e?.kernelConnectionMetadata.interpreter).then(m.noop,m.noop):this.commandManager.executeCommand(d.Commands.Export,this.notebookDocument,n,e?.kernelConnectionMetadata.interpreter).then(m.noop,m.noop)}}o([(0,v.chainable)()],W.prototype,"addErrorMessage",null),o([(0,v.chainable)()],W.prototype,"createExecutionPromise",null),t.InteractiveWindow=W},24145:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InteractiveWindowProvider=t.InteractiveWindowCacheKey=t.AskedForPerFileSettingKey=void 0;const c=n(86700),l=n(66828),u=n(10053),d=n(11642),p=n(83599),h=n(42080),f=s(n(25251)),g=n(58681),m=n(41778),y=n(85249),v=n(602),b=n(15925),w=n(135),C=n(90760),S=n(43138),_=n(35412),k=n(15139),P=n(25982),I=n(9959);t.AskedForPerFileSettingKey="ds_asked_per_file_interactive",t.InteractiveWindowCacheKey="ds_interactive_window_cache";let E=class{get onDidChangeActiveInteractiveWindow(){return this._onDidChangeActiveInteractiveWindow.event}get activeWindow(){const e=l.window.activeNotebookEditor?.notebook.uri.toString();return e?this._windows.find((t=>t.notebookUri?.toString()===e)):void 0}constructor(e,t,n,r,i,o,s,a,c,u,d){this.serviceContainer=e,this.disposables=n,this.fs=r,this.configService=i,this.globalMemento=o,this.workspaceMemento=s,this.appShell=a,this.workspaceService=c,this.notebookEditorProvider=u,this.controllerHelper=d,this._onDidChangeActiveInteractiveWindow=new l.EventEmitter,this._windows=[],t.push(this),this.notebookEditorProvider.registerEmbedNotebookProvider(this),this.restoreWindows()}restoreWindows(){const e=new Map;l.window.tabGroups.all.forEach((t=>{t.tabs.forEach((t=>{(0,k.isInteractiveInputTab)(t)&&t.input.uri&&e.set(t.input.uri.toString(),t)}))})),this.workspaceMemento.get(t.InteractiveWindowCacheKey,[]).forEach((t=>{if(!t.uriString||!e.get(t.uriString))return;const n=e.get(t.uriString);if(!n)return;const r=new v.InteractiveWindow(this.serviceContainer,void 0!==t.owner?l.Uri.from(t.owner):void 0,t.mode,void 0,n,l.Uri.parse(t.inputBoxUriString),this.controllerHelper);(0,I.sendTelemetryEvent)(b.Telemetry.CreateInteractiveWindow,void 0,{hasKernel:!1,hasOwner:!!t.owner,mode:t.mode,restored:!0}),this._windows.push(r);const i=r.closed(this.onInteractiveWindowClosed.bind(this,r));this.disposables.push(r),this.disposables.push(i),this.disposables.push(r.onDidChangeViewState(this.raiseOnDidChangeActiveInteractiveWindow.bind(this)))})),this._updateWindowCache()}async getOrCreate(e,t){if(!this.workspaceService.isTrusted)throw new Error("Workspace not trusted");const n=await this.getInteractiveMode(e);this.pendingCreations&&await this.pendingCreations.catch(g.noop);let r=this.getExisting(e,n,t);return r||(r=await this.create(e,n,t)),await r.ensureInitialized(),r}get(e){const t=this.configService.getSettings(e).interactiveWindowMode;return this.getExisting(e,t)}async dispose(){return(0,g.noop)()}async create(e,t,n){const r=(0,S.createDeferred)();this.pendingCreations=r.promise;try{let i=await this.controllerHelper.getInitialController(e,n);(0,d.traceInfo)(`Starting interactive window for resource '${(0,_.getDisplayPath)(e)}' with controller '${i?.id}'`);const o=this.serviceContainer.get(u.ICommandManager),[s,a]=await this.createEditor(i,e,t,o);i&&i.controller.updateNotebookAffinity(a.notebook,l.NotebookControllerAffinity.Preferred),(0,d.traceVerbose)(`Interactive Window Editor Created: ${a.notebook.uri.toString()} with input box: ${s.toString()}`);let c=this.controllerHelper.getSelected(a.notebook);const p=new v.InteractiveWindow(this.serviceContainer,e,t,c,a,s,this.controllerHelper);(0,I.sendTelemetryEvent)(b.Telemetry.CreateInteractiveWindow,void 0,{hasKernel:!!i,hasOwner:!!e,mode:t,restored:!1}),this._windows.push(p),this._updateWindowCache(),this.lastActiveInteractiveWindow=p;const h=p.closed(this.onInteractiveWindowClosed.bind(this,p));return this.disposables.push(p),this.disposables.push(h),this.disposables.push(p.onDidChangeViewState(this.raiseOnDidChangeActiveInteractiveWindow.bind(this))),p}finally{r.resolve()}}async createEditor(e,t,n,r){const i=e?`${b.JVSC_EXTENSION_ID}/${e.id}`:void 0,o=void 0!==t;let s=this.getInteractiveViewColumn(t);const{inputUri:a,notebookEditor:c}=await r.executeCommand("interactive.open",{viewColumn:s,preserveFocus:o},void 0,i,t&&"perFile"===n?(0,C.getInteractiveWindowTitle)(t):void 0);if(!c)throw new Error("Failed to request creation of interactive window from VS Code.");return[a,c]}getInteractiveViewColumn(e){if(e)return l.ViewColumn.Beside;const t=this.configService.getSettings(e).interactiveWindowViewColumn;return"secondGroup"===t?l.ViewColumn.One:"active"===t?l.ViewColumn.Active:l.ViewColumn.Beside}async getInteractiveMode(e){let n=this.configService.getSettings(e).interactiveWindowMode;if("multiple"===n&&e&&!this.globalMemento.get(t.AskedForPerFileSettingKey)&&1===this._windows.length&&(!this._windows[0].owner||!this.fs.arePathsSame(this._windows[0].owner,e))){this.globalMemento.update(t.AskedForPerFileSettingKey,!0).then(g.noop,g.noop);const r=[f.DataScience.interactiveWindowModeBannerSwitchYes,f.DataScience.interactiveWindowModeBannerSwitchNo];await this.appShell.showInformationMessage(f.DataScience.interactiveWindowModeBannerTitle,...r)===r[0]&&(n="perFile",this._windows[0].changeMode(n),await this.configService.updateSetting("interactiveWindow.creationMode",n,e,l.ConfigurationTarget.Global))}return n}_updateWindowCache(){const e=this._windows.map((e=>({owner:e.owner,mode:e.mode,uriString:e.notebookUri.toString(),inputBoxUriString:e.inputUri.toString()})));this.workspaceMemento.update(t.InteractiveWindowCacheKey,e).then(g.noop,g.noop)}getExisting(e,t,n){return"single"===t?this._windows.length>0?this._windows[0]:void 0:"multiple"===t?e?this.activeWindow||this.lastActiveInteractiveWindow||this._windows[0]:void 0:this._windows.find((t=>!(e||t.owner||n)||!!(e&&t.owner&&this.fs.arePathsSame(e,t.owner))&&(!n||t.kernelConnectionMetadata?.id===n.id)))}raiseOnDidChangeActiveInteractiveWindow(){this.lastActiveInteractiveWindow=this.activeWindow?this.activeWindow:this.lastActiveInteractiveWindow,this._onDidChangeActiveInteractiveWindow.fire(this.activeWindow)}onInteractiveWindowClosed(e){(0,d.traceVerbose)(`Closing interactive window: ${e.notebookUri?.toString()}`),e.dispose(),this._windows=this._windows.filter((t=>t!==e)),this._updateWindowCache(),this.lastActiveInteractiveWindow===e&&(this.lastActiveInteractiveWindow=this._windows[0]),this.raiseOnDidChangeActiveInteractiveWindow()}getActiveOrAssociatedInteractiveWindow(){if(this.activeWindow)return this.activeWindow;if(void 0===l.window.activeTextEditor)return;const e=l.window.activeTextEditor.document.uri;return e.scheme!==b.NotebookCellScheme?this.get(e):void 0}findNotebookEditor(e){let t;if(e&&e.scheme===P.Schemas.vscodeInteractive)t=this.get(e)?.notebookDocument;else{const n=this.configService.getSettings(e).interactiveWindowMode;t=this.getExisting(e,n)?.notebookDocument}return t?l.window.visibleNotebookEditors.find((e=>e.notebook===t)):void 0}findAssociatedNotebookDocument(e){let t=this._windows.find((t=>t.inputUri?.toString()===e.toString()))?.notebookDocument;return t}getInteractiveWindowWithNotebook(e){let t;return t=void 0!==e?this._windows.find((t=>t.notebookUri?.toString()===e.toString())):this.getActiveOrAssociatedInteractiveWindow(),t}getInteractiveWindowsWithSubmitter(e){return this._windows.filter((t=>t.submitters.find((t=>this.fs.arePathsSame(e,t)))))}};E=o([(0,c.injectable)(),a(0,(0,c.inject)(m.IServiceContainer)),a(1,(0,c.inject)(h.IAsyncDisposableRegistry)),a(2,(0,c.inject)(h.IDisposableRegistry)),a(3,(0,c.inject)(p.IFileSystem)),a(4,(0,c.inject)(h.IConfigurationService)),a(5,(0,c.inject)(h.IMemento)),a(5,(0,c.named)(h.GLOBAL_MEMENTO)),a(6,(0,c.inject)(h.IMemento)),a(6,(0,c.named)(h.WORKSPACE_MEMENTO)),a(7,(0,c.inject)(u.IApplicationShell)),a(8,(0,c.inject)(u.IWorkspaceService)),a(9,(0,c.inject)(y.INotebookEditorProvider)),a(10,(0,c.inject)(w.IInteractiveControllerHelper))],E),t.InteractiveWindowProvider=E},25636:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InteractiveWindowTracebackFormatter=void 0;const o=n(86700),s=n(66828),a=n(74858),c=n(72728),l=n(11642),u=n(35412),d=n(83599),p=n(58323),h=n(15925),f=n(3522),g=/(;32m[ ->]*?)(\d+)(.*)/g;let m=class{constructor(e,t){this.storageFactory=e,this.platformService=t}format(e,t){if(e.notebook.notebookType!==h.InteractiveWindowView)return t;const n=this.storageFactory.get({notebook:e.notebook}),r=t.some((e=>/^[Input|Cell|File].*?\n.*/.test(e)));return r||n?t.map((e=>r?this.modifyTracebackFrameIPython8(e,n?.all):this.modifyTracebackFrameIPython7(e,n.all))):t}modifyTracebackFrameIPython8(e,t){let n,r;e=(e=(e=e.replace(/\u001b\[4\dm/g,"")).replace(/\u001b\[38;.*?\d+m/g,"[39m")).replace(/(;32m[ ->]*?)(\d+)(.*)\n/g,((e,t,n,r)=>`${t}${n}${r=r.replace(/\u001b\[3\d+m/g,"[39m")}\n`)),(0,l.traceInfoIfCI)(`Trace frame to match: ${e}`);const i=/^Input.*?\[.*32mIn\s+\[(\d+).*?0;36m(.*?)\n.*/.exec(e),o=/^Cell.*?\[.*32mIn\s*\[(\d+)\], (.*).\[0m\n/.exec(e);if(i&&i.length>1?(n=parseInt(i[1]),r=i[2]):o&&o.length>1&&(n=parseInt(o[1]),r=o[2]),t&&n){let i,o;for(let e of t)if(o=e.generatedCodes.find((e=>e.executionCount===n)),o){i=e.uri;break}if(o&&i)return e.replace(g,((e,t,n,r)=>{const s=parseInt(n,10),a=(o.hasCellMarker?o.line-1:o.line)-1+o.lineOffsetRelativeToIndexOfFirstLineInCell+s;return`${t}<a href='${i?.toString()}?line=${a-1}'>${a}</a>${r}`})).replace(/.*?\n/,`[1;32m${(0,u.getFilePath)(i)}[0m in [0;36m${r}\n`)}const a=/^File.*?\[\d;32m(.*):\d+.*\u001b.*\n/.exec(e);if(a&&a.length>1){const t=(0,c.untildify)(a[1],(0,u.getFilePath)(this.platformService.homeDir)),n=s.Uri.file(t);return e.replace(g,((e,t,r,i)=>{const o=parseInt(r,10);return`${t}<a href='${n?.toString()}?line=${o-1}'>${o}</a>${i}`}))}return e}modifyTracebackFrameIPython7(e,t){return t.map((e=>e.uri)).forEach((t=>{const n=(0,u.getFilePath)(t),r=(0,u.getDisplayPath)(t),i=this.storageFactory.get({fileUri:t});if(i){if(e.includes(n)&&new RegExp(`\\[.*?;32m${f(n)}`).test(e)||e.includes(r)&&new RegExp(`\\[.*?;32m${f(r)}`).test(e)){let n="";const r=/(;32m[ ->]*?)(\d+)(.*)/g;for(let t=r.exec(e);t&&t.length>3;t=r.exec(e))n=`${n}${(0,p.stripAnsi)(t[3]).substr(1)}\n`;const o=this.findCellOffset(i.getFileGeneratedCode(t),n);void 0!==o&&(e=e.replace(g,((e,n,r,i)=>{const s=parseInt(r,10),a=o+s-1;return`${n}<a href='${t.toString()}?line=${a}'>${a+1}</a>${i}`})))}if(e.includes(n)){const n=this.findCellOffset(i.getFileGeneratedCode(t),e);if(n)return e.replace(g,((e,r,i,o)=>{const s=parseInt(i,10),a=n+s-1;return`${r}<a href='${t.toString()}?line=${a}'>${a+1}</a>${o}`}))}}})),e}findCellOffset(e,t){if(e)for(const n of e)if(n.trimmedRightCode.indexOf(t)>=0)return n.firstNonBlankLineIndex}};m=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IGeneratedCodeStorageFactory)),i(1,(0,o.inject)(d.IPlatformService))],m),t.InteractiveWindowTracebackFormatter=m},95247:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(94062),i=n(52064),o=n(88232),s=n(2785),a=n(75463),c=n(65410),l=n(11633),u=n(74858),d=n(24145),p=n(135),h=n(2644),f=n(94671),g=n(74858),m=n(80246),y=n(25636),v=n(6821),b=n(64064),w=n(50016),C=n(42277),S=n(20327);t.registerTypes=function(e){e.addSingleton(p.IInteractiveWindowProvider,d.InteractiveWindowProvider),e.addSingleton(p.IInteractiveControllerHelper,S.InteractiveControllerHelper),e.addSingleton(i.IExtensionSyncActivationService,o.CommandRegistry),e.add(u.ICodeWatcher,c.CodeWatcher),e.addSingleton(u.ICodeLensFactory,s.CodeLensFactory),e.addSingleton(u.IDataScienceCodeLensProvider,a.DataScienceCodeLensProvider),e.addSingleton(i.IExtensionSyncActivationService,C.CodeLensProviderActivator),e.addSingleton(i.IExtensionSyncActivationService,w.PythonCellFoldingProvider),e.addSingleton(i.IExtensionSyncActivationService,l.Decorator),e.addSingleton(i.IExtensionSyncActivationService,m.GeneratedCodeStorageManager),e.addSingleton(u.ICodeGeneratorFactory,h.CodeGeneratorFactory,void 0,[i.IExtensionSyncActivationService]),e.addSingleton(g.IGeneratedCodeStorageFactory,f.GeneratedCodeStorageFactory),e.addSingleton(r.ITracebackFormatter,y.InteractiveWindowTracebackFormatter),e.addSingleton(p.IInteractiveWindowDebuggingManager,v.InteractiveWindowDebuggingManager,void 0,[i.IExtensionSyncActivationService]),e.addSingleton(r.IStartupCodeProvider,b.InteractiveWindowDebuggingStartupCodeProvider)}},135:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IInteractiveWindowDebuggingManager=t.IInteractiveControllerHelper=t.IInteractiveWindowProvider=t.IInteractiveWindowDebugger=void 0,t.IInteractiveWindowDebugger=Symbol("IInteractiveWindowDebugger"),t.IInteractiveWindowProvider=Symbol("IInteractiveWindowProvider"),t.IInteractiveControllerHelper=Symbol("IInteractiveControllerHelper"),t.IInteractiveWindowDebuggingManager=Symbol("IInteractiveWindowDebuggingManager")},79806:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseJupyterSession=t.JupyterSessionStartError=t.suppressShutdownErrors=void 0;const s=n(37875),a=n(66828),c=n(37853),l=n(20397),u=n(11642),d=n(43138),p=o(n(25251)),h=n(58681),f=n(9959),g=n(71798),m=n(413),y=n(33525),v=n(65864),b=n(50936),w=n(86563),C=n(72584),S=n(15925),_=n(61629);function k(e){if((0,S.isTestExecution)()){const t=e;if(t&&t._futures){const e=t._futures;e.forEach&&e.forEach((e=>{void 0!==e._status&&(e._status|=4)}))}t&&t._reconnectLimit&&(t._reconnectLimit=0)}}t.suppressShutdownErrors=k;class P extends c.WrappedError{constructor(e){super(e.message,e),(0,f.sendTelemetryEvent)(f.Telemetry.StartSessionFailedJupyter,void 0,void 0,e)}}t.JupyterSessionStartError=P,t.BaseJupyterSession=class{get disposed(){return!0===this._isDisposed}get onDidDispose(){return this._disposed.event}get session(){return this._session}get kernelId(){return this.session?.kernel?.id||""}get kernel(){return this._wrappedKernel?this._wrappedKernel:this._session?.kernel?(this._wrappedKernel=new _.KernelConnectionWrapper(this._session.kernel,this.disposables),this._wrappedKernel):void 0}get kernelSocket(){return this._kernelSocket}get onSessionStatusChanged(){return this.onStatusChangedEvent.event}get status(){return this.getServerStatus()}get isConnected(){return this.connected}constructor(e,t,n,r){this.resource=e,this.kernelConnectionMetadata=t,this.workingDirectory=n,this.interruptTimeout=r,this._disposed=new a.EventEmitter,this.disposables=[],this.onStatusChangedEvent=new a.EventEmitter,this.connected=!1,this._kernelSocket=new s.ReplaySubject,this.chainingExecute=new b.ChainingExecuteRequester,this.statusHandler=this.onStatusChanged.bind(this),this.unhandledMessageHandler=(e,t)=>{(0,u.traceWarning)(`Unhandled message found: ${t.header.msg_type}`)}}isServerSession(){return!1}async dispose(){await this.shutdownImplementation(!1)}async shutdown(){await this.shutdownImplementation(!0)}async interrupt(){this.session&&this.session.kernel&&((0,u.traceInfo)(`Interrupting kernel: ${this.session.kernel.name}`),await Promise.race([this.session.kernel.interrupt(),(0,d.sleep)(this.interruptTimeout).then((()=>{throw new y.KernelInterruptTimeoutError(this.kernelConnectionMetadata)}))]))}async requestKernelInfo(){if(!this.session)throw new Error("Cannot request KernelInfo, Session not initialized.");if(this.session.kernel?.info){const e={content:await this.session.kernel.info,channel:"shell",metadata:{},parent_header:{},header:{}};return Promise.resolve(e)}return this.session.kernel?.requestKernelInfo()}async restart(){if(this.session?.isRemoteSession&&this.session.kernel)return await this.session.kernel.restart(),void this.setSession(this.session,!0);(0,u.traceInfo)(`Restarting ${this.session?.kernel?.id}`);const e=this.session,t=this.statusHandler,n=await this.startRestartSession(!1);this.setSession(n),n.kernel&&((0,u.traceInfo)(`Got new session ${n.kernel.id}`),n.statusChanged.connect(this.statusHandler),n.kernel.connectionStatusChanged.connect(this.onKernelConnectionStatusHandler,this)),(0,u.traceInfo)("Started new restart session"),t&&e&&(e.statusChanged.disconnect(t),e.kernel&&e.kernel.connectionStatusChanged.disconnect(this.onKernelConnectionStatusHandler,this)),this.shutdownSession(e,void 0,!1).ignoreErrors()}requestExecute(e,t,n){if(!this.session?.kernel)throw new v.SessionDisposedError;return this.chainingExecute.requestExecute(this.session.kernel,e,t,n)}requestDebug(e,t){if(!this.session?.kernel)throw new v.SessionDisposedError;return this.session.kernel.requestDebug(e,t)}requestInspect(e){if(!this.session?.kernel)throw new v.SessionDisposedError;return this.session.kernel.requestInspect(e)}requestComplete(e){if(!this.session?.kernel)throw new v.SessionDisposedError;return this.session.kernel.requestComplete(e)}sendInputReply(e){this.session&&this.session.kernel&&this.session.kernel.sendInputReply(e)}registerCommTarget(e,t){if(!this.session||!this.session.kernel)throw new v.SessionDisposedError;this.session.kernel.registerCommTarget(e,t)}registerMessageHook(e,t){if(this.session?.kernel)return this.session.kernel.registerMessageHook(e,t);throw new v.SessionDisposedError}removeMessageHook(e,t){if(this.session?.kernel)return this.session.kernel.removeMessageHook(e,t);throw new v.SessionDisposedError}async waitForIdleOnSession(e,t,n,r){if(!e||!e.kernel)throw new g.JupyterInvalidKernelError(this.kernelConnectionMetadata);{const i=r?void 0:C.KernelProgressReporter.reportProgress(this.resource,p.DataScience.waitingForJupyterSessionToBeIdle),o=[];i&&o.push(i);try{(0,u.traceVerbose)(`Waiting for ${t}ms idle on (kernel): ${e.kernel.id} -> ${e.kernel.status}`);const i=(0,d.createDeferred)();n&&n.onCancellationRequested((()=>i.reject(new a.CancellationError)),this,o);const s=(e,t)=>{(0,u.traceVerbose)(`Got status ${t} in waitForIdleOnSession`),"idle"==t&&i.resolve(t)};e.kernel.statusChanged?.connect(s),o.push(new a.Disposable((()=>(0,h.swallowExceptions)((()=>e.kernel?.statusChanged?.disconnect(s)))))),"idle"==e.kernel.status&&i.resolve(e.kernel.status);const c=(0,d.createDeferred)();e.disposed.connect(c.resolve,c),o.push(new a.Disposable((()=>(0,h.swallowExceptions)((()=>e.disposed.disconnect(c.resolve,c))))));const p=(0,d.sleep)(t);c.promise.ignoreErrors(),p.ignoreErrors(),i.promise.ignoreErrors();const f=await Promise.race([i.promise,p,c.promise]);if(e.isDisposed)throw(0,u.traceError)("Session disposed while waiting for session to be idle."),new g.JupyterInvalidKernelError(this.kernelConnectionMetadata);if((0,u.traceVerbose)(`Finished waiting for idle on (kernel): ${e.kernel.id} -> ${e.kernel.status}`),"string"==typeof f&&"idle"==f.toString())return;throw(0,u.traceError)(`Shutting down after failing to wait for idle on (kernel): ${e.kernel.id} -> ${e.kernel.status}`),this.shutdownSession(e,this.statusHandler,r).ignoreErrors(),new m.JupyterWaitForIdleError(this.kernelConnectionMetadata)}catch(e){throw(0,u.traceInfoIfCI)("Error waiting for idle",e),e}finally{(0,l.disposeAllDisposables)(o)}}}setSession(e,t=!1){const r=this._session;this.previousAnyMessageHandler?.dispose(),r&&(this.unhandledMessageHandler&&r.unhandledMessage.disconnect(this.unhandledMessageHandler),this.statusHandler&&(r.statusChanged.disconnect(this.statusHandler),r.kernel?.connectionStatusChanged.disconnect(this.onKernelConnectionStatusHandler,this))),this._session=e,e&&(e.kernel&&this._wrappedKernel&&this._wrappedKernel.changeKernel(e.kernel),e.statusChanged.connect(this.statusHandler),e.kernel?.connectionStatusChanged.connect(this.onKernelConnectionStatusHandler,this),e.kernelSocketInformation.socket?.onAnyMessage&&(this.previousAnyMessageHandler=e.kernelSocketInformation.socket?.onAnyMessage((e=>{try{if(this._wrappedKernel){const t=n(86002),r="string"==typeof e.msg||e.msg instanceof ArrayBuffer?t.deserialize(e.msg):e.msg;this._wrappedKernel.anyMessage.emit({direction:e.direction,msg:r})}}catch(e){(0,u.traceWarning)("failed to deserialize message to broadcast anymessage signal")}}))),e.unhandledMessage&&e.unhandledMessage.connect(this.unhandledMessageHandler),(t||r!==e)&&e.kernel&&this._kernelSocket.next({options:{clientId:e.kernel.clientId,id:e.kernel.id,model:{...e.kernel.model},userName:e.kernel.username},socket:e.kernelSocketInformation.socket}))}async shutdownSession(e,t,n,r){if(e&&e.kernel){const i=`${e.kernel.id}, ${e.kernelConnectionMetadata?.id}`;(0,u.traceVerbose)(`shutdownSession ${i} - start`);try{if(t&&e.statusChanged.disconnect(t),!this.canShutdownSession(e,n,r))return(0,u.traceVerbose)(`Session cannot be shutdown ${e.kernelConnectionMetadata?.id}`),void e.dispose();try{(0,u.traceVerbose)(`Session can be shutdown ${e.kernelConnectionMetadata?.id}`),k(e.kernel),e.isDisposed||await(0,d.waitForPromise)(e.shutdown(),1e3)}catch{(0,h.noop)()}e&&!e.isDisposed&&e.dispose()}catch(e){(0,u.traceWarning)(e)}(0,u.traceVerbose)(`shutdownSession ${i} - shutdown complete`)}}async shutdownImplementation(e){if(this._isDisposed=!0,this.session){try{if((0,u.traceVerbose)(`Shutdown session - current session, called from ${new Error("").stack}`),await this.shutdownSession(this.session,this.statusHandler,!1,e),(0,u.traceVerbose)("Shutdown session - get restart session"),this.restartSessionPromise){this.restartSessionPromise.token.cancel();const e=await this.restartSessionPromise.promise;this.restartSessionPromise.token.dispose(),(0,u.traceVerbose)("Shutdown session - shutdown restart session"),await this.shutdownSession(e,void 0,!0)}}catch{(0,h.noop)()}this.setSession(void 0),this.restartSessionPromise=void 0,this.onStatusChangedEvent.fire("dead"),this._disposed.fire(),this._disposed.dispose(),this.onStatusChangedEvent.dispose(),this.previousAnyMessageHandler?.dispose()}(0,l.disposeAllDisposables)(this.disposables),(0,u.traceVerbose)("Shutdown session -- complete")}canShutdownSession(e,t,n){return!("connectToLiveRemoteKernel"===e.kernelConnectionMetadata?.kind&&!n||!t&&(!e.resource||"interactive"!==(0,w.getResourceType)(e.resource))&&e.resource&&"notebook"===(0,w.getResourceType)(e.resource)&&!0===e.isRemoteSession&&!n)}getServerStatus(){return this.disposed?"dead":this.session?.kernel?this.session.kernel.status:((0,u.traceInfoIfCI)(`Kernel status not started because real session is ${this.session?"defined":"undefined"} & real kernel is ${this.session?.kernel?"defined":"undefined"}`),"unknown")}onKernelConnectionStatusHandler(e,t){if((0,u.traceInfoIfCI)(`Server Kernel Status = ${t}`),"disconnected"===t){const e=this.getServerStatus();this.onStatusChangedEvent.fire(e)}}onStatusChanged(e){const t=this.getServerStatus();(0,u.traceInfoIfCI)(`Server Status = ${t}`),this.onStatusChangedEvent.fire(t)}}},50936:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChainingExecuteRequester=void 0;const r=n(53355);t.ChainingExecuteRequester=class{requestExecute(e,t,n,i){if(!t.store_history)return e.requestExecute(t,n,i);const o=this.previousExecute&&this.previousKernel?.id===e.id?new r.DelayedFutureExecute(e,this.previousExecute,t,n,i):e.requestExecute(t,n,i);return this.previousExecute=o,this.previousKernel=e,o.done.then((()=>{this.previousExecute==o&&(this.previousExecute=void 0,this.previousKernel=void 0)})).catch((()=>{this.previousExecute==o&&(this.previousExecute=void 0,this.previousKernel=void 0)})),o}}},73785:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeOldCachedItems=t.RemoteKernelSpecsCacheKey=void 0;const r=n(58681);t.RemoteKernelSpecsCacheKey="JUPYTER_REMOTE_KERNELSPECS_V4",t.removeOldCachedItems=async function(e){await Promise.all(["JUPYTER_LOCAL_KERNELSPECS","JUPYTER_LOCAL_KERNELSPECS_V1","JUPYTER_LOCAL_KERNELSPECS_V2","JUPYTER_LOCAL_KERNELSPECS_V3","JUPYTER_REMOTE_KERNELSPECS","JUPYTER_REMOTE_KERNELSPECS_V1","JUPYTER_REMOTE_KERNELSPECS_V2","JUPYTER_REMOTE_KERNELSPECS_V3","JUPYTER_LOCAL_KERNELSPECS_V4","LOCAL_KERNEL_SPECS_CACHE_KEY_V_2022_10","LOCAL_KERNEL_PYTHON_AND_RELATED_SPECS_CACHE_KEY_V_2022_10"].filter((e=>t.RemoteKernelSpecsCacheKey!==e)).filter((t=>void 0!==e.get(t,void 0))).map((t=>e.update(t,void 0).then(r.noop,r.noop))))}},53355:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DelayedFutureExecute=void 0;const r=n(11642),i=n(43138),o=n(66828),s=n(58681);t.DelayedFutureExecute=class{constructor(e,t,n,r,a){this.kernelConnection=e,this.content=n,this.disposeOnDone=r,this.metadata=a,this.doneDeferred=(0,i.createDeferred)(),this.pendingHooks=[],this.pendingInputReplies=[],this.disposed=!1,this.doneDeferred.promise.catch(s.noop),t.done.then((()=>this.requestExecute())).catch((e=>this.doneDeferred.reject(e))),this.statusChangedHandler=(e,t)=>{"unknown"!==t&&"restarting"!==t&&"dead"!==t&&"autorestarting"!==t||this.doneDeferred.reject(new o.CancellationError)},e.statusChanged?.connect(this.statusChangedHandler),this.statusChangedHandler(e,e.status)}get msg(){return this.requestFuture?this.requestFuture.msg:{content:this.content,channel:"shell",header:{date:Date.now.toString(),msg_id:"1",session:this.kernelConnection.id,msg_type:"execute_request",username:"",version:"1"},parent_header:{},metadata:{}}}get done(){return this.doneDeferred.promise}set onReply(e){this.requestFuture?this.requestFuture.onReply=e:this.pendingOnReply=e}set onIOPub(e){this.requestFuture?this.requestFuture.onIOPub=e:this.pendingOnIOPub=e}set onStdin(e){this.requestFuture?this.requestFuture.onStdin=e:this.pendingOnStdin=e}registerMessageHook(e){this.requestFuture?this.requestFuture.registerMessageHook(e):this.pendingHooks.push(e)}removeMessageHook(e){this.pendingHooks=this.pendingHooks.filter((t=>t!=e)),this.requestFuture&&this.requestFuture.removeMessageHook(e)}sendInputReply(e){this.requestFuture?this.requestFuture.sendInputReply(e):this.pendingInputReplies.push(e)}get isDisposed(){return this.disposed}dispose(){this.disposed=!0,this.kernelConnection.statusChanged.disconnect(this.statusChangedHandler),this.requestFuture&&(this.requestFuture.dispose(),this.requestFuture=void 0,this.clear())}clear(){this.pendingInputReplies=[],this.pendingHooks=[],this.pendingOnReply=void 0,this.pendingOnIOPub=void 0,this.pendingOnStdin=void 0}requestExecute(){if(this.requestFuture)throw new Error("ChainedFuture already executed. Can't execute more than once.");(0,r.traceInfoIfCI)(`DelayedFuture is starting request now for ${this.content}.`),this.requestFuture=this.kernelConnection.requestExecute(this.content,this.disposeOnDone,this.metadata),this.requestFuture&&(this.pendingOnReply&&(this.requestFuture.onReply=this.pendingOnReply),this.pendingOnIOPub&&(this.requestFuture.onIOPub=this.pendingOnIOPub),this.pendingOnStdin&&(this.requestFuture.onStdin=this.pendingOnStdin),this.pendingHooks.length&&this.pendingHooks.forEach((e=>this.requestFuture?.registerMessageHook(e))),this.pendingInputReplies&&this.pendingInputReplies.forEach((e=>this.requestFuture?.sendInputReply(e))),this.requestFuture.done.then((e=>this.doneDeferred.resolve(e))).catch((e=>this.doneDeferred.reject(e))),this.clear())}}},61629:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelConnectionWrapper=void 0;const r=n(23429);class i extends r.BaseKernelConnectionWrapper{get possibleKernelConnection(){return this._kernelConnection}get kernel(){return this._kernelConnection}constructor(e,t){super(e,t),this._kernelConnection=e}changeKernel(e){this.kernel!==e&&(this.stopHandlingKernelMessages(this.possibleKernelConnection),this._kernelConnection=e,this.startHandleKernelMessages(e))}async shutdown(){await this._kernelConnection.shutdown()}dispose(){this._kernelConnection.dispose()}async interrupt(){await this._kernelConnection.interrupt()}async restart(){await this._kernelConnection.restart()}startHandleKernelMessages(e){super.startHandleKernelMessages(e),this._kernelConnection=e,e.connectionStatusChanged.connect(this.onConnectionStatusChanged,this),e.statusChanged.connect(this.onStatusChanged,this),e.disposed.connect(this.onDisposed,this)}stopHandlingKernelMessages(e){super.stopHandlingKernelMessages(e),e.connectionStatusChanged.disconnect(this.onConnectionStatusChanged,this),e.statusChanged.disconnect(this.onStatusChanged,this),e.disposed.disconnect(this.onDisposed,this)}onDisposed(e){e===this.possibleKernelConnection&&this.disposed.emit()}onStatusChanged(e,t){e===this.possibleKernelConnection&&this.statusChanged.emit(t)}onConnectionStatusChanged(e,t){e===this.possibleKernelConnection&&this.connectionStatusChanged.emit(t)}}t.KernelConnectionWrapper=i},56940:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelSocketWrapper=void 0;const r=n(66828),i=n(11642);t.KernelSocketWrapper=function(e){return class extends e{constructor(...e){super(...e),this._onAnyMessage=new r.EventEmitter,this.onAnyMessage=this._onAnyMessage.event,this.msgChain=Promise.resolve(),this.sendChain=Promise.resolve(),this.receiveHooks=[],this.sendHooks=[]}patchSuperEmit(e){super.emit=e}sendToRealKernel(e,t){this._onAnyMessage.fire({msg:e,direction:"send"}),super.send(e,t)}send(e,t){this.sendHooks?this.sendChain=this.sendChain.then((()=>Promise.all(this.sendHooks.map((n=>n(e,t)))))).then((()=>super.send(e,t))):super.send(e,t)}handleEvent(e,t,...n){return"message"===t&&this.receiveHooks.length?(this.msgChain=this.msgChain.then((()=>Promise.all(this.receiveHooks.map((e=>e(n[0])))))).then((()=>e(t,...n))).catch((e=>(0,i.traceError)(`Exception while handling messages: ${e}`))),!0):e(t,...n)}emit(e,...t){return this.handleEvent(((e,...t)=>super.emit(e,...t)),e,...t)}addReceiveHook(e){this.receiveHooks.push(e)}removeReceiveHook(e){this.receiveHooks=this.receiveHooks.filter((t=>t!==e))}addSendHook(e){this.sendHooks.push(e)}removeSendHook(e){this.sendHooks=this.sendHooks.filter((t=>t!==e))}}}},88960:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisplayOptions=void 0;const r=n(66828);t.DisplayOptions=class{get disableUI(){return this._disableUI}set disableUI(e){const t=this._disableUI!==e;this._disableUI=e,t&&this._event.fire()}get onDidChangeDisableUI(){return this._event.event}constructor(e){this._event=new r.EventEmitter,this._disableUI=e}dispose(){this._event.dispose()}}},55134:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidRemoteJupyterServerUriHandleError=void 0;const r=n(37853);class i extends r.BaseError{constructor(e,t,n,r){super("invalidremotejupyterserverurihandle","Server handle not in list of known handles"),this.providerId=e,this.handle=t,this.extensionId=n,this.serverId=r}}t.InvalidRemoteJupyterServerUriHandleError=i},71798:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterInvalidKernelError=void 0;const r=n(25251),i=n(98729),o=n(90541);class s extends o.BaseKernelError{constructor(e){super("invalidkernel",r.DataScience.kernelInvalid((0,i.getDisplayNameOrNameOfKernelConnection)(e)),e)}}t.JupyterInvalidKernelError=s},13935:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterInvalidPasswordError=void 0;const r=n(25251),i=n(37853);class o extends i.BaseError{constructor(){super("jupyterpassword",r.DataScience.passwordFailure)}}t.JupyterInvalidPasswordError=o},3236:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterKernelDependencyError=void 0;const r=n(25251),i=n(98729),o=n(90541);class s extends o.BaseKernelError{constructor(e,t){super("noipykernel",r.DataScience.kernelInvalid((0,i.getDisplayNameOrNameOfKernelConnection)(t)),t),this.reason=e}}t.JupyterKernelDependencyError=s},413:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterWaitForIdleError=void 0;const r=n(25251),i=n(90541);class o extends i.BaseKernelError{constructor(e){super("timeout",r.DataScience.jupyterLaunchTimedOut,e)}}t.JupyterWaitForIdleError=o},91494:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelConnectionTimeoutError=void 0;const r=n(25251),i=n(98729),o=n(90541);class s extends o.BaseKernelError{constructor(e){super("timeout",r.DataScience.rawKernelStartFailedDueToTimeout((0,i.getDisplayNameOrNameOfKernelConnection)(e)),e)}}t.KernelConnectionTimeoutError=s},66690:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelDeadError=void 0;const r=n(25251),i=n(98729),o=n(90541);class s extends o.WrappedKernelError{constructor(e){super(r.DataScience.kernelDiedWithoutError((0,i.getDisplayNameOrNameOfKernelConnection)(e)),void 0,e)}}t.KernelDeadError=s},36690:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelDiedError=void 0;const r=n(90541);class i extends r.WrappedKernelError{constructor(e,t,n,r){super(e,n,r),this.stdErr=t}}t.KernelDiedError=i},71437:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataScienceErrorHandler=void 0;const o=n(86700),s=n(41779),a=n(84079),c=n(66828),l=n(91494),u=n(36690),d=n(36723),p=n(80530),h=n(10053),f=n(11642),g=n(42080),m=n(25251),y=n(9959),v=n(15925),b=n(98729),w=n(23856),C=n(59985),S=n(83902),_=n(94062),k=n(29629),P=n(30002),I=n(3236),E=n(37853),T=n(58681),D=n(47891),x=n(66690),R=n(88960),j=n(94433),N=n(46875),M=n(35412),O=n(6491),A=n(44501),L=n(54990),F=n(42751),U=n(55134),K=n(90541),W=n(47684),V=n(83599),H=n(84570),B=n(25393),q=n(79079);let J=class{constructor(e,t,n,r,i,o,s,a,c,l,u,d,p){this.applicationShell=e,this.dependencyManager=t,this.browser=n,this.configuration=r,this.kernelDependency=i,this.workspaceService=o,this.serverUriStorage=s,this.jupyterUriProviderRegistration=a,this.commandManager=c,this.isWebExtension=l,this.extensions=u,this.fs=d,this.interpreterService=p,this.handledErrors=new WeakSet,this.handledKernelErrors=new WeakSet}async handleError(e){if((0,f.traceWarning)("DataScience Error",e),e=E.WrappedError.unwrap(e),!this.handledErrors.has(e))if(this.handledErrors.add(e),e instanceof s.JupyterInstallError)await(this.dependencyManager?.installMissingDependencies(e));else if(e instanceof a.JupyterSelfCertsError)await(0,N.handleSelfCertsError)(this.applicationShell,this.configuration,e.message);else if(e instanceof A.JupyterExpiredCertsError)await(0,N.handleExpiredCertsError)(this.applicationShell,this.configuration,e.message);else if((0,O.isCancellationError)(e));else if(e instanceof l.KernelConnectionTimeoutError||e instanceof d.KernelPortNotUsedTimeoutError)this.applicationShell.showErrorMessage(e.message).then(T.noop,T.noop);else if(e instanceof u.KernelDiedError||e instanceof p.KernelProcessExitedError||e instanceof q.JupyterNotebookNotInstalled||e instanceof P.JupyterConnectError)this.applicationShell.showErrorMessage(G(e)).then(T.noop,T.noop);else if(e instanceof L.RemoteJupyterServerConnectionError&&this.isWebExtension)this.applicationShell.showErrorMessage(m.DataScience.jupyterNotebookRemoteConnectFailedWeb(e.baseUrl)).then(T.noop,T.noop);else if(e instanceof L.RemoteJupyterServerConnectionError){const t=await this.handleJupyterServerConnectionError(e,void 0);this.applicationShell.showErrorMessage(t).then(T.noop,T.noop)}else if(e instanceof F.RemoteJupyterServerUriProviderError){const t=await this.handleJupyterServerUriProviderError(e,void 0);this.applicationShell.showErrorMessage(t).then(T.noop,T.noop)}else{const t=z(e.message||e.toString());this.applicationShell.showErrorMessage(t).then(T.noop,T.noop)}}async getErrorMessageForDisplayInCell(e,t,n){if(e=E.WrappedError.unwrap(e),(0,O.isCancellationError)(e)||(0,f.traceError)("Error in execution (get message for cell)",e),e instanceof x.KernelDeadError)return"";if(e instanceof I.JupyterKernelDependencyError)return Y(e.kernelConnectionMetadata)||e.message;if(e instanceof s.JupyterInstallError)return function(e){const t=`${C.ProductNames.get(S.Product.jupyter)} ${m.Common.and} ${C.ProductNames.get(S.Product.notebook)}`,n=[S.Product.jupyter,S.Product.notebook].map(w.translateProductToModule).join(" "),r=`python -m pip install ${n} -U\nor\nconda install ${n} -U`,i=m.DataScience.installPackageInstructions(t,r);return e.message+"\n"+i+"\n"+m.Common.clickHereForMoreInfoWithHtml("https://aka.ms/installJupyterForVSCode")}(e)||e.message;if(e instanceof L.RemoteJupyterServerConnectionError&&!this.isWebExtension)return e.message;if(e instanceof L.RemoteJupyterServerConnectionError&&this.isWebExtension)return m.DataScience.jupyterNotebookRemoteConnectFailedWeb(e.baseUrl);if((0,O.isCancellationError)(e))return"";if(e instanceof B.PackageNotInstalledWindowsLongPathNotEnabledError){const t="string"==typeof e.product?e.product:C.ProductNames.get(e.product)||`${e.product}`,n=e.interpreter.displayName||e.interpreter.envName||"",r=(0,M.getDisplayPath)(e.interpreter.uri);let i=n?` ${n} (${r})`:r;return m.DataScience.packageNotInstalledWindowsLongPathNotEnabledError(t,i)}if((e instanceof u.KernelDiedError||e instanceof p.KernelProcessExitedError)&&("startUsingLocalKernelSpec"===e.kernelConnectionMetadata.kind||"startUsingPythonInterpreter"===e.kernelConnectionMetadata.kind)&&e.kernelConnectionMetadata.interpreter&&!await this.fs.exists(e.kernelConnectionMetadata.interpreter.uri))return m.DataScience.failedToStartKernelDueToMissingPythonEnv(e.kernelConnectionMetadata.interpreter.displayName||e.kernelConnectionMetadata.interpreter.envName||(0,M.getDisplayPath)(e.kernelConnectionMetadata.interpreter.uri));if((e instanceof u.KernelDiedError||e instanceof p.KernelProcessExitedError)&&("startUsingLocalKernelSpec"===e.kernelConnectionMetadata.kind||"startUsingPythonInterpreter"===e.kernelConnectionMetadata.kind)&&e.kernelConnectionMetadata.interpreter&&this.kernelDependency&&!await this.kernelDependency.areDependenciesInstalled(e.kernelConnectionMetadata,void 0,!0))return Y(e.kernelConnectionMetadata)||e.message;if(e instanceof K.BaseKernelError||e instanceof K.WrappedKernelError){const t=await this.getFilesInWorkingDirectoryThatCouldPotentiallyOverridePythonModules(n),r=(0,k.analyzeKernelErrors)(c.workspace.workspaceFolders||[],e,(0,b.getDisplayNameOrNameOfKernelConnection)(e.kernelConnectionMetadata),e.kernelConnectionMetadata.interpreter?.sysPrefix,t.map((e=>e.uri)));if(r){if(r.reason===k.KernelFailureReason.moduleNotFoundFailure&&["ipykernel_launcher","ipykernel"].includes(r.moduleName))return Y(e.kernelConnectionMetadata)||e.message;const t=[r.message];return r.moreInfoLink&&t.push(m.Common.clickHereForMoreInfoWithHtml(r.moreInfoLink)),(0,_.isLocalConnection)(e.kernelConnectionMetadata)&&r.reason===k.KernelFailureReason.moduleNotFoundFailure&&!["ipykernel_launcher","ipykernel"].includes(r.moduleName)&&await this.addErrorMessageIfPythonArePossiblyOverridingPythonModules(t,n),t.join("\n")}}else{if(e instanceof L.RemoteJupyterServerConnectionError)return this.handleJupyterServerConnectionError(e,t);if(e instanceof F.RemoteJupyterServerUriProviderError)return this.handleJupyterServerUriProviderError(e,t);if(e instanceof U.InvalidRemoteJupyterServerUriHandleError){const n=this.extensions.getExtension(e.extensionId)?.packageJSON.displayName||e.extensionId;return G(m.DataScience.remoteJupyterServerProvidedBy3rdPartyExtensionNoLongerValid(n),t)}}return G(e,t)}async handleJupyterServerUriProviderError(e,t){const n=await this.serverUriStorage.getSavedUriList(),r=e.originalError?.message||e.message,i=e.serverId,o=n.find((e=>e.serverId===i))?.displayName,s=`${e.providerId}:${e.handle}`,a=o||s;return G(m.DataScience.remoteJupyterConnectionFailedWithServerWithError(a,r),t)}async handleJupyterServerConnectionError(e,t){const n=await this.serverUriStorage.getSavedUriList(),r=e.originalError.message||"",i=e.serverId,o=n.find((e=>e.serverId===i))?.displayName;if(e.baseUrl===v.Identifiers.REMOTE_URI){const n=(0,N.extractJupyterServerHandleAndId)(e.url);if(n){const i=(await this.jupyterUriProviderRegistration.getJupyterServerUri(n.id,n.handle))?.displayName??this.generateJupyterIdAndHandleErrorName(e.url)??e.url;return G(m.DataScience.remoteJupyterConnectionFailedWithServerWithError(i,r),t)}}const s=e.baseUrl,a=o&&s?`${o} (${s})`:o||s;return G(m.DataScience.remoteJupyterConnectionFailedWithServerWithError(a,r),t)}generateJupyterIdAndHandleErrorName(e){const t=(0,N.extractJupyterServerHandleAndId)(e);return t?`${t.id}:${t.handle}`:void 0}async handleJupyterServerProviderConnectionError(e){const t=(0,N.extractJupyterServerHandleAndId)(e);if(!t)return!1;const n=await this.jupyterUriProviderRegistration.getProvider(t.id);if(!n||!n.getHandles)return!1;try{return(await n.getHandles()).includes(t.handle)||await this.serverUriStorage.removeUri(e),!0}catch(e){return!1}}async handleKernelError(e,t,n,r,i){if((0,O.isCancellationError)(e)||(0,f.traceWarning)(`Kernel Error, context = ${t}`,e),e=E.WrappedError.unwrap(e),(0,O.isCancellationError)(e))return this.sendKernelTelemetry(e,t,r,"cancelled"),_.KernelInterpreterDependencyResponse.cancel;if(e instanceof I.JupyterKernelDependencyError){if((0,f.traceWarning)(`Jupyter Kernel Dependency Error, reason=${e.reason}`,e),this.sendKernelTelemetry(e,t,r,e.category),e.reason!==_.KernelInterpreterDependencyResponse.uiHidden||!this.kernelDependency)return e.reason;{const e=new c.CancellationTokenSource;try{const t="3rdPartyExtension"===i;return this.kernelDependency.installMissingDependencies({resource:r,kernelConnection:n,ui:new R.DisplayOptions(!1),token:e.token,ignoreCache:!0,cannotChangeKernels:t})}finally{e.dispose()}}}else{if(("start"===t||"restart"===t)&&e instanceof s.JupyterInstallError)return this.sendKernelTelemetry(e,t,r,e.category),(this.dependencyManager?await this.dependencyManager.installMissingDependencies(e):j.JupyterInterpreterDependencyResponse.cancel)===j.JupyterInterpreterDependencyResponse.ok?_.KernelInterpreterDependencyResponse.ok:_.KernelInterpreterDependencyResponse.cancel;if(e instanceof L.RemoteJupyterServerConnectionError||e instanceof F.RemoteJupyterServerUriProviderError||e instanceof U.InvalidRemoteJupyterServerUriHandleError){this.sendKernelTelemetry(e,t,r,e.category);const n=await this.serverUriStorage.getSavedUriList(),o=e instanceof U.InvalidRemoteJupyterServerUriHandleError?"":e instanceof L.RemoteJupyterServerConnectionError?e.originalError.message||"":e.originalError?.message||e.message,s=(L.RemoteJupyterServerConnectionError,e.serverId),a=n.find((e=>e.serverId===s)),c=a?.displayName,l=e instanceof L.RemoteJupyterServerConnectionError?e.baseUrl:"",u=e instanceof F.RemoteJupyterServerUriProviderError?`${e.providerId}:${e.handle}`:"",d=c&&l?`${c} (${l})`:c||l||u,p=e instanceof U.InvalidRemoteJupyterServerUriHandleError?this.extensions.getExtension(e.extensionId)?.packageJSON.displayName||e.extensionId:"",h="jupyterExtension"===i?[m.DataScience.selectDifferentKernel]:[];if(a&&await this.handleJupyterServerProviderConnectionError(a.uri))return _.KernelInterpreterDependencyResponse.selectDifferentKernel;switch(await this.applicationShell.showErrorMessage(e instanceof U.InvalidRemoteJupyterServerUriHandleError?m.DataScience.remoteJupyterServerProvidedBy3rdPartyExtensionNoLongerValid(p):m.DataScience.remoteJupyterConnectionFailedWithServer(d),{detail:o,modal:!0},m.DataScience.removeRemoteJupyterConnectionButtonText,m.DataScience.changeRemoteJupyterConnectionButtonText,...h)){case m.DataScience.removeRemoteJupyterConnectionButtonText:{const e=(await this.serverUriStorage.getSavedUriList()).find((e=>e.serverId===s));return e&&await this.serverUriStorage.removeUri(e.uri),_.KernelInterpreterDependencyResponse.cancel}case m.DataScience.changeRemoteJupyterConnectionButtonText:return await this.commandManager.executeCommand(v.Commands.SelectJupyterURI,!0,"errorHandler",void 0),_.KernelInterpreterDependencyResponse.cancel;case m.DataScience.selectDifferentKernel:return _.KernelInterpreterDependencyResponse.selectDifferentKernel}return _.KernelInterpreterDependencyResponse.cancel}if(e instanceof a.JupyterSelfCertsError){this.sendKernelTelemetry(e,t,r,e.category);const n=m.DataScience.jupyterSelfCertEnable,i=m.DataScience.jupyterSelfCertClose;return this.applicationShell.showErrorMessage(m.DataScience.jupyterSelfCertFail(e.message),n,i).then((e=>{e===n?((0,y.sendTelemetryEvent)(y.Telemetry.SelfCertsMessageEnabled),this.configuration.updateSetting("allowUnauthorizedRemoteConnection",!0,void 0,c.ConfigurationTarget.Workspace).catch(T.noop)):e===i&&(0,y.sendTelemetryEvent)(y.Telemetry.SelfCertsMessageClose)})).then(T.noop,T.noop),_.KernelInterpreterDependencyResponse.failed}if(!("start"!==t&&"restart"!==t||"startUsingPythonInterpreter"!==n.kind||await this.fs.exists(n.interpreter.uri)))return this.sendKernelTelemetry(e,t,r,k.KernelFailureReason.pythonEnvironmentMissing),this.applicationShell.showErrorMessage(m.DataScience.failedToStartKernelDueToMissingPythonEnv(n.interpreter.displayName||n.interpreter.envName||(0,M.getDisplayPath)(n.interpreter.uri))).then(T.noop,T.noop),this.interpreterService.refreshInterpreters(!0).catch(T.noop),_.KernelInterpreterDependencyResponse.failed;if("start"!==t&&"restart"!==t||!this.kernelDependency||await this.kernelDependency.areDependenciesInstalled(n,void 0,!0)){const i=await this.getFilesInWorkingDirectoryThatCouldPotentiallyOverridePythonModules(r),o=(0,k.analyzeKernelErrors)(this.workspaceService.workspaceFolders||[],e,(0,b.getDisplayNameOrNameOfKernelConnection)(n),n.interpreter?.sysPrefix,i.map((e=>e.uri)));return this.sendKernelTelemetry(e,t,r,o?.reason),o?this.showMessageWithMoreInfo(o.message,o?.moreInfoLink).catch(T.noop):this.showMessageWithMoreInfo(G(e,t)).catch(T.noop),_.KernelInterpreterDependencyResponse.failed}{this.sendKernelTelemetry(e,t,r,"noipykernel");const o=new c.CancellationTokenSource;try{const e="3rdPartyExtension"===i;return this.kernelDependency.installMissingDependencies({resource:r,kernelConnection:n,ui:new R.DisplayOptions(!1),token:o.token,ignoreCache:!0,cannotChangeKernels:e})}finally{o.dispose()}}}}sendKernelTelemetry(e,t,n,r){this.handledKernelErrors.has(e)||(this.handledKernelErrors.add(e),"start"===t&&(0,W.sendKernelTelemetryEvent)(n,y.Telemetry.NotebookStart,void 0,{disableUI:!1,failureCategory:r},e))}async showMessageWithMoreInfo(e,t){e.includes(v.Commands.ViewJupyterOutput)||(e=`${e} \n${m.DataScience.viewJupyterLogForFurtherInfo}`);const n=t?[m.Common.learnMore]:[];await this.applicationShell.showErrorMessage(e,...n).then((e=>{e===m.Common.learnMore&&t&&this.browser.launch(t)}))}};J=r([i(0,(0,o.inject)(h.IApplicationShell)),i(1,(0,o.inject)(j.IJupyterInterpreterDependencyManager)),i(1,(0,o.optional)()),i(2,(0,o.inject)(g.IBrowserService)),i(3,(0,o.inject)(g.IConfigurationService)),i(4,(0,o.inject)(_.IKernelDependencyService)),i(4,(0,o.optional)()),i(5,(0,o.inject)(h.IWorkspaceService)),i(6,(0,o.inject)(j.IJupyterServerUriStorage)),i(7,(0,o.inject)(j.IJupyterUriProviderRegistration)),i(8,(0,o.inject)(h.ICommandManager)),i(9,(0,o.inject)(g.IsWebExtension)),i(10,(0,o.inject)(g.IExtensions)),i(11,(0,o.inject)(V.IFileSystem)),i(12,(0,o.inject)(H.IInterpreterService))],J),t.DataScienceErrorHandler=J;const $={restart:m.DataScience.failedToRestartKernel,start:m.DataScience.failedToStartKernel,interrupt:m.DataScience.failedToInterruptKernel,execution:""};function G(e,t){e="string"==typeof e?e:E.WrappedError.unwrap(e);const n=t?$[t]:"";let r="";return r=e instanceof q.JupyterNotebookNotInstalled?m.DataScience.jupyterNotebookNotInstalledOrNotFound(e.interpreter):e instanceof E.BaseError?(0,k.getErrorMessageFromPythonTraceback)(e.stdErr)||e.stdErr||e.message:"string"==typeof e?e:e.message,z(n,r)}function z(e,t){const n=[e||"",t||""].map((e=>e.trim())).filter((e=>e.length>0)).join(" \n");return!function(e){return(new RegExp(/\[([^\[]+)\]\((.*)\)/).exec(e)?.length??0)>0}(n)&&n.length&&-1===n.indexOf("command:jupyter.viewOutput")?`${n.endsWith(".")?n:n+"."} \n${m.DataScience.viewJupyterLogForFurtherInfo}`:n}function Y(e){if("connectToLiveRemoteKernel"===e.kind||"startUsingRemoteKernelSpec"===e.kind||!e.interpreter)return;const t=e.interpreter.displayName||(0,M.getFilePath)(e.interpreter.uri),n=C.ProductNames.get(S.Product.ipykernel),r=(0,w.translateProductToModule)(S.Product.ipykernel);let i=`${(0,M.getFilePath)(e.interpreter.uri).fileToCommandArgument()} -m pip install ${r} -U --force-reinstall`;return e.interpreter?.envType===D.EnvironmentType.Conda?e.interpreter?.envName?i=`conda install -n ${e.interpreter?.envName} ${r} --update-deps --force-reinstall`:e.interpreter?.envPath&&(i=`conda install -p ${(0,M.getFilePath)(e.interpreter?.envPath)} ${r} --update-deps --force-reinstall`):e.interpreter?.envType===D.EnvironmentType.Unknown&&(i=`${(0,M.getFilePath)(e.interpreter.uri).fileToCommandArgument()} -m pip install ${r} -U --user --force-reinstall`),m.DataScience.libraryRequiredToLaunchJupyterKernelNotInstalledInterpreter(t,C.ProductNames.get(S.Product.ipykernel))+"\n"+m.DataScience.installPackageInstructions(n,i)}},26320:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.DataScienceErrorHandlerWeb=void 0;const i=n(86700),o=n(71437);let s=class extends o.DataScienceErrorHandler{async addErrorMessageIfPythonArePossiblyOverridingPythonModules(e,t){}async getFilesInWorkingDirectoryThatCouldPotentiallyOverridePythonModules(e){return[]}};s=r([(0,i.injectable)()],s),t.DataScienceErrorHandlerWeb=s},33525:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelInterruptTimeoutError=void 0;const r=n(25251),i=n(90541);class o extends i.BaseKernelError{constructor(e){super("kernelpromisetimeout",r.DataScience.interruptingKernelFailed,e)}}t.KernelInterruptTimeoutError=o},36723:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelPortNotUsedTimeoutError=void 0;const r=n(25251),i=n(98729),o=n(90541);class s extends o.BaseKernelError{constructor(e){super("timeout",r.DataScience.rawKernelStartFailedDueToTimeout((0,i.getDisplayNameOrNameOfKernelConnection)(e)),e)}}t.KernelPortNotUsedTimeoutError=s},80530:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelProcessExitedError=void 0;const r=n(25251),i=n(90541);class o extends i.BaseKernelError{constructor(e=-1,t,n){super("kerneldied",r.DataScience.kernelDied(t.trim()),n),this.exitCode=e,this.stdErr=t}}t.KernelProcessExitedError=o},36065:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelSpecNotTrustedError=void 0;const r=n(66828),i=n(35412),o=n(25251),s=n(98729),a=n(90541);class c extends a.WrappedKernelError{constructor(e){super(o.DataScience.failedToStartAnUntrustedKernelSpec((0,s.getDisplayNameOrNameOfKernelConnection)(e),e.kernelSpec.specFile?(0,i.getDisplayPath)(r.Uri.file(e.kernelSpec.specFile)):""),void 0,e)}}t.KernelSpecNotTrustedError=c},25393:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PackageNotInstalledWindowsLongPathNotEnabledError=void 0;const r=n(37853);class i extends r.BaseError{constructor(e,t,n){super("windowsLongPathNotEnabled",n),this.product=e,this.interpreter=t,this.originalMessage=n}}t.PackageNotInstalledWindowsLongPathNotEnabledError=i},42751:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteJupyterServerUriProviderError=void 0;const r=n(37853);class i extends r.BaseError{constructor(e,t,n,r){super("remotejupyterserveruriprovider",n.message||n.toString()),this.providerId=e,this.handle=t,this.originalError=n,this.serverId=r}}t.RemoteJupyterServerUriProviderError=i},90541:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WrappedKernelError=t.BaseKernelError=t.IDataScienceErrorHandler=void 0;const r=n(37853);t.IDataScienceErrorHandler=Symbol("IDataScienceErrorHandler");class i extends r.BaseError{constructor(e,t,n){super(e,t),this.kernelConnectionMetadata=n}}t.BaseKernelError=i;class o extends r.WrappedError{constructor(e,t,n){super(e,t),this.kernelConnectionMetadata=n}}t.WrappedKernelError=o},81296:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CellOutputDisplayIdTracker=void 0;const s=n(86700),a=n(66828),c=n(20397),l=n(42080),u=n(86563);let d=r=class{static dispose(){(0,c.disposeAllDisposables)(r.disposables)}constructor(e){e.push({dispose:()=>{r.dispose()}})}activate(){a.workspace.onDidChangeNotebookDocument((e=>{(0,u.isJupyterNotebook)(e.notebook)&&e.cellChanges.filter((e=>0===e.outputs?.length)).map((t=>{const n=r.cellToDisplayIdMapping.get(t.cell);n&&(r.cellToDisplayIdMapping.delete(t.cell),r.displayIdCellOutputMappingPerDocument.get(e.notebook)?.delete(n))}))}))}static trackOutputByDisplayId(e,t,n){let i=r.displayIdCellOutputMappingPerDocument.get(e.notebook);i||(i=new Map,r.displayIdCellOutputMappingPerDocument.set(e.notebook,i)),i.set(t,{output:n,cell:e}),r.cellToDisplayIdMapping.set(e,t)}static getMappedOutput(e,t){const n=r.displayIdCellOutputMappingPerDocument.get(e);if(!n)return;const i=n.get(t);return i?.cell.document.isClosed?void 0:i}};d.displayIdCellOutputMappingPerDocument=new WeakMap,d.cellToDisplayIdMapping=new WeakMap,d.disposables=[],d=r=i([(0,s.injectable)(),o(0,(0,s.inject)(l.IDisposableRegistry))],d),t.CellOutputDisplayIdTracker=d},1988:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CellExecution=t.CellExecutionFactory=void 0;const r=n(66828),i=n(9016),o=n(29629),s=n(37853),a=n(20397),c=n(11642),l=n(43138),u=n(11386),d=n(58681),p=n(98729),h=n(6491),f=n(67572),g=n(94062),m=n(14154),y=n(35412);t.CellExecutionFactory=class{constructor(e,t){this.controller=e,this.requestListener=t}create(e,t,n){return v.fromCell(e,t,n,this.controller,this.requestListener)}};class v{get result(){return this._result.promise}get preExecute(){return this._preExecuteEmitter.event}constructor(e,t,n,o,s){this.cell=e,this.codeOverride=t,this.kernelConnection=n,this.controller=o,this.requestListener=s,this.stopWatch=new u.StopWatch,this._result=(0,l.createDeferred)(),this.cancelHandled=!1,this.disposables=[],this._preExecuteEmitter=new r.EventEmitter,r.workspace.onDidCloseTextDocument((e=>{if(e===this.cell.document){(0,c.traceVerbose)(`Disposing request as the cell was deleted ${(0,y.getDisplayPath)(this.cell.notebook.uri)}`);try{this.request?.dispose()}catch(e){(0,c.traceError)(`Error during cell execution dispose: ${e}`)}this.started&&!this._completed&&this.completedDueToCancellation()}}),this,this.disposables),m.NotebookCellStateTracker.setCellState(e,r.NotebookCellExecutionState.Idle);const a=i.CellExecutionCreator.get(e);this.canExecuteCell()?(this.execution=i.CellExecutionCreator.getOrCreate(e,this.controller),m.NotebookCellStateTracker.setCellState(e,r.NotebookCellExecutionState.Pending)):a&&(a.start(),a.end(void 0))}static fromCell(e,t,n,r,i){return new v(e,t,n,r,i)}async start(e){if(this.cancelHandled)(0,m.traceCellMessage)(this.cell,"Not starting as it was cancelled");else{if((0,m.traceCellMessage)(this.cell,"Start execution"),(0,c.traceInfoIfCI)(`Cell Exec contents ${this.cell.document.getText().substring(0,50)}...`),!this.canExecuteCell())return this.execution?.end(void 0),this.execution=void 0,void this._result.resolve();if(this.started)return(0,m.traceCellMessage)(this.cell,"Cell has already been started yet CellExecution.Start invoked again"),(0,c.traceError)(`Cell has already been started yet CellExecution.Start invoked again ${this.cell.index}`),this.result;this.started=!0,this.startTime=(new Date).getTime(),f.activeNotebookCellExecution.set(this.cell.notebook,this.execution),this.execution?.start(this.startTime),m.NotebookCellStateTracker.setCellState(this.cell,r.NotebookCellExecutionState.Executing),await(this.execution?.clearOutput()),this.stopWatch.reset(),this.execute(this.codeOverride||this.cell.document.getText().replace(/\r\n/g,"\n"),e).catch((e=>this.completedWithErrors(e))).catch(d.noop)}}async cancel(e=!1){if(!this.cancelHandled)return this.started&&!e?((0,m.traceCellMessage)(this.cell,"Cell is already running, waiting for it to finish or kernel to start"),void await this.result):void(this.cancelHandled||this._completed||((0,m.traceCellMessage)(this.cell,"Execution cancelled"),this.cancelHandled=!0,this.completedDueToCancellation(),this.dispose()))}dispose(){this.disposed||(this.disposed=!0,(0,m.traceCellMessage)(this.cell,"Execution disposed"),(0,a.disposeAllDisposables)(this.disposables))}completedWithErrors(e){let t,n;(0,c.traceWarning)("Cell completed with errors",e),(0,m.traceCellMessage)(this.cell,"Completed with errors"),(0,m.traceCellMessage)(this.cell,"Update with error state & output"),t=e instanceof s.BaseError?(0,o.analyzeKernelErrors)(r.workspace.workspaceFolders||[],e,(0,p.getDisplayNameOrNameOfKernelConnection)(this.kernelConnection),this.kernelConnection.interpreter?.sysPrefix)?.message:e.message||e.name||e.stack,n=(0,o.createOutputWithErrorMessageForDisplay)(t||""),n&&this.execution?.appendOutput(n).then(d.noop,d.noop),this.endCellTask("failed"),this._completed=!0,(0,m.traceCellMessage)(this.cell,"Completed with errors, & resolving"),this._result.resolve(g.NotebookCellRunState.Error)}get isEmptyCodeCell(){return 0===this.cell.document.getText().trim().length}completedSuccessfully(){(0,m.traceCellMessage)(this.cell,"Completed successfully");let e=this.isEmptyCodeCell?g.NotebookCellRunState.Idle:g.NotebookCellRunState.Success,t="success";this.cellExecutionHandler?.hasErrorOutput&&(t="failed",e=g.NotebookCellRunState.Error),this.endCellTask(t),this._completed=!0,(0,m.traceCellMessage)(this.cell,`Completed successfully & resolving with status = ${t}`),this._result.resolve(e)}endCellTask(e){this.isEmptyCodeCell?(this.execution&&(this.execution.executionOrder=void 0),this.execution?.end(void 0)):"success"===e||"failed"===e?(this.endTime=(new Date).getTime(),this.execution?.end("success"===e,this.endTime)):this.execution?.end(void 0),f.activeNotebookCellExecution.get(this.cell.notebook)===this.execution&&f.activeNotebookCellExecution.set(this.cell.notebook,void 0),m.NotebookCellStateTracker.setCellState(this.cell,r.NotebookCellExecutionState.Idle),this.execution=void 0}completedDueToCancellation(){(0,m.traceCellMessage)(this.cell,"Completed due to cancellation"),this.endCellTask("cancelled"),this._completed=!0,(0,m.traceCellMessage)(this.cell,"Cell cancelled & resolving"),this._result.resolve(g.NotebookCellRunState.Idle)}canExecuteCell(){return"raw"!==this.cell.document.languageId&&!this.cell.document.isClosed}async execute(e,t){(0,m.traceCellMessage)(this.cell,"Send code for execution"),await this.executeCodeCell(e,t)}async executeCodeCell(e,t){if(0===e.trim().length||this.cell.document.isClosed)return(0,m.traceCellMessage)(this.cell,"Empty cell execution"),this.completedSuccessfully();const n={cellId:this.cell.document.uri.toString(),...this.cell.metadata?.custom?.metadata||{}};try{this._preExecuteEmitter.fire(this.cell),this.request=t.requestExecute({code:e,silent:!1,stop_on_error:!1,allow_stdin:!0,store_history:!0},!1,n)}catch(e){return(0,c.traceError)(`Cell execution failed without request, for cell Index ${this.cell.index}`,e),this.completedWithErrors(e)}this.cellExecutionHandler=this.requestListener.registerListener(this.cell,{kernel:t.kernel,cellExecution:this.execution,request:this.request,onErrorHandlingExecuteRequestIOPubMessage:e=>{(0,c.traceError)(`Cell (index = ${this.cell.index}) execution completed with errors (2).`,e),this.completedWithErrors(e)}});try{(0,m.traceCellMessage)(this.cell,"Wait for jupyter execution"),await this.request.done,(0,m.traceCellMessage)(this.cell,"Jupyter execution completed"),this.completedSuccessfully(),(0,m.traceCellMessage)(this.cell,"Executed successfully in executeCell")}catch(e){(0,c.traceError)("Error in waiting for cell to complete",e),(0,m.traceCellMessage)(this.cell,"Some other execution error"),e&&e instanceof Error&&(0,h.isCancellationError)(e,!0)?this.completedWithErrors({message:e.message}):this.completedWithErrors(e)}}}t.CellExecution=v},9016:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CellExecutionCreator=t.NotebookCellExecutionWrapper=void 0;const r=n(11642),i=n(9959);class o{constructor(e,t,n){this._impl=e,this.controllerId=t,this._endCallback=n,this.started=!1}get cell(){return this._impl.cell}get token(){return this._impl.token}get executionOrder(){return this._impl.executionOrder}set executionOrder(e){this._impl.executionOrder=e}start(e){this.started||(this.started=!0,this._impl.start(e),this._startTime=e,(0,r.traceVerbose)(`Start cell ${this.cell.index} execution @ ${e}`))}end(e,t){if(this._endCallback)try{this._impl.end(e,t),(0,r.traceVerbose)(`End cell ${this.cell.index} execution @ ${t}, started @ ${this._startTime}, elapsed time = ${((t||0)-(this._startTime||0))/1e3}s`)}finally{this._endCallback(),this._endCallback=void 0}}clearOutput(e){return this._impl.clearOutput(e)}replaceOutput(e,t){return this._impl.replaceOutput(e,t)}appendOutput(e,t){return this._impl.appendOutput(e,t)}replaceOutputItems(e,t){return this._impl.replaceOutputItems(e,t)}appendOutputItems(e,t){return this._impl.appendOutputItems(e,t)}}t.NotebookCellExecutionWrapper=o;class s{static getOrCreate(e,t){let n;const r=e.document;if(n=this.get(e),n){if(n.controllerId!==t.id){const i=n;i.end(void 0),n=s.create(r,e,t),i.started&&n.start((new Date).getTime())}}else n=s.create(r,e,t);return n}static get(e){const t=e.document;return s._map.get(t)}static create(e,t,n){try{const r=new o(n.createNotebookCellExecution(t),n.id,(()=>{s._map.delete(e)}));return s._map.set(e,r),r}catch(e){throw(0,i.sendTelemetryEvent)(i.Telemetry.FailedToCreateNotebookCellExecution,void 0,void 0,e),e}}}t.CellExecutionCreator=s,s._map=new WeakMap},67572:function(e,t,n){"use strict";var r=n(48764).Buffer,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CellExecutionMessageHandler=t.activeNotebookCellExecution=void 0;const s=o(n(64063)),a=n(66828),c=n(9016),l=n(20397),u=n(11642),d=n(86563),p=n(14154),h=n(85446),f=n(58681),g=n(79821),m=n(15925),y=n(62624),v=n(81296);function b(e){if(e.parent_header&&"msg_id"in e.parent_header)return e.parent_header.msg_id}t.activeNotebookCellExecution=new WeakMap;class w{get hasErrorOutput(){return!0===this.cellHasErrorsInOutput}constructor(e,t,n,r,i,o,s,c){this.cell=e,this.applicationService=t,this.controller=n,this.context=r,this.formatters=i,this.kernel=o,this._onErrorHandlingIOPubMessage=new a.EventEmitter,this.onErrorHandlingExecuteRequestIOPubMessage=this._onErrorHandlingIOPubMessage.event,this.outputsAreSpecificToAWidget=[],this.commIdsMappedToParentWidgetModel=new Map,this.disposables=[],this.prompts=new Set,this.ownedCommIds=new Set,this.commIdsMappedToWidgetOutputModels=new Set,this.ownedRequestMsgIds=new Set,this.executeRequestMessageId=s.msg.header.msg_id,this.ownedRequestMsgIds.add(s.msg.header.msg_id),a.workspace.onDidChangeNotebookDocument((e=>{if(!(0,d.isJupyterNotebook)(e.notebook))return;const t=e.cellChanges.find((({cell:e})=>e===this.cell));t&&0===t.outputs?.length&&(this.clearLastUsedStreamOutput(),this.cellHasErrorsInOutput=!1)}),this,this.disposables),this.execution=c,this.kernel.anyMessage.connect(this.onKernelAnyMessage,this),this.kernel.iopubMessage.connect(this.onKernelIOPubMessage,this),s.onIOPub=()=>{this.cell.document.isClosed&&!this.completedExecution&&s.dispose()},s.onReply=e=>{this.cell.document.isClosed?s.dispose():this.handleReply(e)},s.onStdin=this.handleInputRequest.bind(this),s.done.finally((()=>{this.completedExecution=!0,this.endCellExecution()})).catch(f.noop)}dispose(){this.disposed||(this.disposed=!0,(0,p.traceCellMessage)(this.cell,"Execution Message Handler disposed"),(0,l.disposeAllDisposables)(this.disposables),this.prompts.forEach((e=>e.dispose())),this.prompts.clear(),this.clearLastUsedStreamOutput(),this.execution=void 0,this.kernel.anyMessage.disconnect(this.onKernelAnyMessage,this),this.kernel.iopubMessage.disconnect(this.onKernelIOPubMessage,this))}endCellExecution(){this.prompts.forEach((e=>e.dispose())),this.prompts.clear(),this.clearLastUsedStreamOutput(),this.execution=void 0}onKernelAnyMessage(e,{direction:t,msg:r}){if(this.cell.document.isClosed)return this.endCellExecution();"send"===t&&this.completedExecution&&n(76240).KernelMessage.isCommMsgMsg(r)&&this.ownedCommIds.has(r.content.comm_id)&&this.ownedRequestMsgIds.add(r.header.msg_id)}onKernelIOPubMessage(e,t){if(this.cell.document.isClosed)return this.endCellExecution();if(t.parent_header&&"msg_id"in t.parent_header&&this.ownedRequestMsgIds.has(t.parent_header.msg_id)&&"iopub"===t.channel)try{this.handleIOPub(t)}catch(e){(0,u.traceError)("Failed to handle iopub message as a result of some comm message",t,e),this.completedExecution||this.cell.document.isClosed||this._onErrorHandlingIOPubMessage.fire(e)}}clearLastUsedStreamOutput(){this.lastUsedStreamOutput=void 0}createTemporaryTask(){if(this.cell.document.isClosed)return;return t.activeNotebookCellExecution.get(this.cell.notebook)||(this.previousResultsToRestore={...this.cell.executionSummary||{}},this.temporaryExecution=c.CellExecutionCreator.getOrCreate(this.cell,this.controller),this.temporaryExecution?.start(),this.previousResultsToRestore?.executionOrder&&this.execution&&(this.execution.executionOrder=this.previousResultsToRestore.executionOrder),this.temporaryExecution)}endTemporaryTask(){this.previousResultsToRestore?.executionOrder&&this.execution&&(this.execution.executionOrder=this.previousResultsToRestore.executionOrder),this.previousResultsToRestore&&this.temporaryExecution?(this.previousResultsToRestore.executionOrder&&(this.temporaryExecution.executionOrder=this.previousResultsToRestore.executionOrder),this.temporaryExecution.end(this.previousResultsToRestore.success,this.previousResultsToRestore.timing?.endTime)):this.temporaryExecution?.end(void 0),this.previousResultsToRestore=void 0,this.temporaryExecution=void 0}handleIOPub(e){const t=n(76240);if(t.KernelMessage.isCommOpenMsg(e))this.handleCommOpen(e);else if(t.KernelMessage.isExecuteResultMsg(e))this.handleExecuteResult(e);else if(t.KernelMessage.isExecuteInputMsg(e))this.handleExecuteInput(e);else if(t.KernelMessage.isStatusMsg(e)){const t=e;this.handleStatusMessage(t)}else t.KernelMessage.isStreamMsg(e)?this.handleStreamMessage(e):t.KernelMessage.isDisplayDataMsg(e)?this.handleDisplayData(e):t.KernelMessage.isUpdateDisplayDataMsg(e)?this.handleUpdateDisplayDataMessage(e):t.KernelMessage.isClearOutputMsg(e)?this.handleClearOutput(e):t.KernelMessage.isErrorMsg(e)?this.handleError(e):t.KernelMessage.isCommOpenMsg(e)||(t.KernelMessage.isCommMsgMsg(e)?this.handleCommMsg(e):t.KernelMessage.isCommCloseMsg(e)||(0,u.traceWarning)(`Unknown message ${e.header.msg_type} : hasData=${"data"in e.content}`));"execution_count"in e.content&&"number"==typeof e.content.execution_count&&this.execution&&(this.execution.executionOrder=e.content.execution_count)}handleCommOpen(e){this.ownedCommIds.add(e.content.comm_id);const t=e.content.data?.state||void 0;e.content.target_name===m.Identifiers.DefaultCommTarget&&t&&"@jupyter-widgets/output"===t._model_module&&this.commIdsMappedToWidgetOutputModels.add(e.content.comm_id)}handleCommMsg(e){const t=e.content.data;if(t&&"update"===t.method&&"object"==typeof t.state)if("msg_id"in t.state&&"string"==typeof t.state.msg_id){const n="msg_id"in e.parent_header?e.parent_header:void 0;(this.ownedRequestMsgIds.has(e.content.comm_id)||n&&this.ownedRequestMsgIds.has(n.msg_id))&&(t.state.msg_id?this.outputsAreSpecificToAWidget.push({handlingCommId:e.content.comm_id,msgIdsToSwallow:t.state.msg_id}):this.outputsAreSpecificToAWidget.length&&this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].handlingCommId===e.content.comm_id&&this.outputsAreSpecificToAWidget.pop())}else if("children"in t.state&&Array.isArray(t.state.children)&&this.ownedCommIds.has(e.content.comm_id)){const n="IPY_MODEL_";t.state.children.forEach((t=>{if("string"!=typeof t)return(0,u.traceWarning)("Came across a comm update message a child that isn't a string",t);if(!t.startsWith(n))return(0,u.traceWarning)(`Came across a comm update message a child that start start with ${n}`,t);const r=t.substring(n.length);this.ownedCommIds.add(r),this.commIdsMappedToParentWidgetModel.set(r,e.content.comm_id)}))}}clearOutputIfNecessary(e){return this.clearOutputOnNextUpdateToOutput?((0,p.traceCellMessage)(this.cell,"Clear cell output"),this.clearLastUsedStreamOutput(),e?.clearOutput().then(f.noop,f.noop),this.clearOutputOnNextUpdateToOutput=!1,{previousValueOfClearOutputOnNextUpdateToOutput:!0}):{previousValueOfClearOutputOnNextUpdateToOutput:!1}}addToCellData(e,t){if(e.data&&"object"==typeof e.data&&m.WIDGET_MIMETYPE in e.data){const t=e.data[m.WIDGET_MIMETYPE];if(t&&this.context.extensionMode===a.ExtensionMode.Test&&(t._vsc_test_cellIndex=this.cell.index),t&&"model_id"in t){const e=w.modelIdsOwnedByCells.get(this.cell)||new Set;e.add(t.model_id),w.modelIdsOwnedByCells.set(this.cell,e)}}const n=(0,p.cellOutputToVSCCellOutput)(e),r="transient"in e&&"object"==typeof e.transient&&e.transient&&"display_id"in e.transient&&"string"==typeof e.transient?.display_id?e.transient?.display_id:void 0;if(this.cell.document.isClosed)return;(0,p.traceCellMessage)(this.cell,"Update output"),this.clearOutputIfNecessary(this.execution),r&&v.CellOutputDisplayIdTracker.trackOutputByDisplayId(this.cell,r,n);let i=new y.Lazy((()=>this.execution||this.createTemporaryTask()));this.clearLastUsedStreamOutput(),(0,p.traceCellMessage)(this.cell,"Append output in addToCellData");let o=!0;const s=b(t);(this.outputsAreSpecificToAWidget.length&&this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].msgIdsToSwallow===s&&n.items.every((e=>this.canMimeTypeBeRenderedByWidgetManager(e)))||this.outputsAreSpecificToAWidget.length&&this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].msgIdsToSwallow===s&&this.updateJupyterOutputWidgetWithOutput({commId:this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].handlingCommId,outputToAppend:n},i.getValue())?.outputAdded)&&(o=!1),o&&i.getValue()?.appendOutput([n]).then(f.noop,f.noop),this.endTemporaryTask()}canMimeTypeBeRenderedByWidgetManager(e){const t=e.mime;if(t==p.CellOutputMimeTypes.stderr||t==p.CellOutputMimeTypes.stdout||t==p.CellOutputMimeTypes.error)return!0;if(t===m.WIDGET_MIMETYPE){const t=JSON.parse(r.from(e.data).toString());return"string"!=typeof t.model_id||!this.commIdsMappedToWidgetOutputModels.has(t.model_id)}return!t.startsWith("application/vnd")}updateJupyterOutputWidgetWithOutput(e,t){const n=this.outputsAreSpecificToAWidget.length?this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].handlingCommId:void 0,i="commId"in e?e.commId:n;if(!i)return;const o="outputToAppend"in e?e.outputToAppend:void 0,s=this.commIdsMappedToParentWidgetModel.get(i)||i,a=this.cell.notebook.getCells().find((e=>w.modelIdsOwnedByCells.get(e)?.has(s)));if(!a)return void(0,u.traceWarning)(`Unable to find a cell that owns the model ${s}`);const c=a.outputs.find((e=>e.items.find((e=>{if(e.mime!==m.WIDGET_MIMETYPE)return!1;try{return JSON.parse(r.from(e.data).toString()).model_id===s}catch(e){(0,u.traceWarning)("Failed to deserialize the widget data",e)}return!1}))));if(!c)return;const l=w.outputsOwnedByWidgetModel.get(s)||new Set,d="clearOutput"in e&&e.clearOutput||!!this.outputsAreSpecificToAWidget.length&&!0===this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].clearOutputOnNextUpdateToOutput;this.outputsAreSpecificToAWidget.length&&(this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].clearOutputOnNextUpdateToOutput=!1);const p=a.outputs.slice().filter((e=>!d||!l.has(e.id))),h=p.slice(0,p.indexOf(c)+1),g=p.slice(p.indexOf(c)+1);w.outputsOwnedByWidgetModel.set(s,l),o&&l.add(o.id);const y=o?h.concat(o).concat(g):h.concat(g);return 0===g.length&&o?t?.appendOutput(o,a).then(f.noop,f.noop):d&&!o&&0===g.length||t?.replaceOutput(y,a).then(f.noop,f.noop),{outputAdded:!0}}async handleInputRequest(e){if(e.content&&"prompt"in e.content){const t=new a.CancellationTokenSource;this.prompts.add(t);const n=null!==e.content.password&&e.content.password;await this.applicationService.showInputBox({prompt:e.content.prompt?e.content.prompt.toString():"",ignoreFocusOut:!0,password:n},t.token).then((e=>{this.kernel.sendInputReply({value:e||"",status:"ok"})}),f.noop),this.prompts.delete(t)}}handleExecuteResult(e){this.addToCellData({output_type:"execute_result",data:e.content.data,metadata:e.content.metadata,transient:e.content.transient,execution_count:e.content.execution_count},e)}handleExecuteReply(e){const t=e.content;t.payload&&t.payload.forEach((n=>{n.source&&"set_next_input"===n.source&&"text"in n&&"replace"in n&&this.handleSetNextInput(n),n.data&&n.data.hasOwnProperty("text/plain")&&this.addToCellData({output_type:"stream",text:n.data["text/plain"].toString(),name:"stdout",metadata:{},execution_count:t.execution_count},e)}))}handleSetNextInput(e){const t=new a.WorkspaceEdit;if(e.replace)t.replace(this.cell.document.uri,new a.Range(this.cell.document.lineAt(0).range.start,this.cell.document.lineAt(this.cell.document.lineCount-1).range.end),e.text);else{(0,p.traceCellMessage)(this.cell,"Create new cell after current");const n=new a.NotebookCellData(a.NotebookCellKind.Code,e.text,this.cell.document.languageId);n.outputs=[],n.metadata={};const r=a.NotebookEdit.insertCells(this.cell.index+1,[n]);t.set(this.cell.notebook.uri,[r])}a.workspace.applyEdit(t).then(f.noop,f.noop)}handleExecuteInput(e){e.content.execution_count&&this.execution&&(this.execution.executionOrder=e.content.execution_count)}handleStatusMessage(e){(0,p.traceCellMessage)(this.cell,`Kernel switching to ${e.content.execution_state}`)}handleStreamMessage(e){if(b(e)&&this.outputsAreSpecificToAWidget.length&&this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].msgIdsToSwallow==b(e))return;(0,p.traceCellMessage)(this.cell,`Update streamed output, new output '${e.content.text.substring(0,100)}'`);const t=this.execution||this.createTemporaryTask(),{previousValueOfClearOutputOnNextUpdateToOutput:n}=this.clearOutputIfNecessary(t);if(this.lastUsedStreamOutput?.stream===e.content.name){const n=(0,p.cellOutputToVSCCellOutput)({output_type:"stream",name:e.content.name,text:e.content.text});(0,p.traceCellMessage)(this.cell,`Append output items '${e.content.text.substring(0,100)}`),t?.appendOutputItems(n.items,this.lastUsedStreamOutput.output).then(f.noop,f.noop)}else if(n){const n=(0,d.concatMultilineString)(e.content.text),r=(0,p.cellOutputToVSCCellOutput)({output_type:"stream",name:e.content.name,text:n});this.lastUsedStreamOutput={output:r,stream:e.content.name},(0,p.traceCellMessage)(this.cell,`Replace output with '${n.substring(0,100)}'`),t?.replaceOutput([r]).then(f.noop,f.noop)}else{const n=(0,d.formatStreamText)((0,d.concatMultilineString)(e.content.text)),r=(0,p.cellOutputToVSCCellOutput)({output_type:"stream",name:e.content.name,text:n});this.lastUsedStreamOutput={output:r,stream:e.content.name},(0,p.traceCellMessage)(this.cell,`Append new output '${n.substring(0,100)}'`),t?.appendOutput([r]).then(f.noop,f.noop)}this.endTemporaryTask()}handleDisplayData(e){const t={output_type:"display_data",data:(0,g.handleTensorBoardDisplayDataOutput)(e.content.data),metadata:e.content.metadata,transient:e.content.transient};this.addToCellData(t,e)}handleClearOutput(e){if(this.outputsAreSpecificToAWidget.length&&this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].msgIdsToSwallow===b(e))if(e.content.wait)this.outputsAreSpecificToAWidget.length&&(this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].clearOutputOnNextUpdateToOutput=!0);else{const e=this.execution||this.createTemporaryTask();this.updateJupyterOutputWidgetWithOutput({clearOutput:!0},e),this.endTemporaryTask()}else if(e.content.wait)this.clearOutputOnNextUpdateToOutput=!0;else{const e=this.execution||this.createTemporaryTask();this.clearLastUsedStreamOutput(),e?.clearOutput().then(f.noop,f.noop),this.endTemporaryTask()}}handleError(e){let t=e.content.traceback;(0,u.traceInfoIfCI)(`Traceback for error ${t}`),this.formatters.forEach((e=>{t=e.format(this.cell,t)})),(0,u.traceInfoIfCI)(`Traceback for error after formatting ${t}`);const n={output_type:"error",ename:e.content.ename,evalue:e.content.evalue,traceback:t};this.addToCellData(n,e),this.cellHasErrorsInOutput=!0}handleReply(e){n(76240).KernelMessage.isExecuteReplyMsg(e)&&(this.handleExecuteReply(e),"execution_count"in e.content&&"number"==typeof e.content.execution_count&&this.execution&&(this.execution.executionOrder=e.content.execution_count))}handleUpdateDisplayDataMessage(e){const t=e.content.transient.display_id;if(!t)return void(0,u.traceWarning)("Update display data message received, but no display id",e.content);const n=v.CellOutputDisplayIdTracker.getMappedOutput(this.cell.notebook,t);if(!n)return void(0,u.traceWarning)("Update display data message received, but no output found to update",e.content);if(n.cell.document.isClosed)return void(0,u.traceWarning)("Update display data message received, but output cell is closed",e.content);const r=(0,p.translateCellDisplayOutput)(n.output),i=(0,p.cellOutputToVSCCellOutput)({...r,data:e.content.data,metadata:e.content.metadata}),o=n.cell.outputs.map((e=>e.items.length===n.output.items.length&&e.items.every(((e,t)=>(0,s.default)(e,n.output.items[t])))?i:e));if(0===n.output.items.length&&0===i.items.length)return void(0,u.traceVerbose)("Update display data message received, but no output to update",e.content);if(n.output.items.length===i.items.length){let t=!0;if((0,s.default)(n.output.metadata||{},i.metadata||{})||(t=!1),t)for(let e=0;e<n.output.items.length;e++)if(!(0,s.default)(n.output.items[e],i.items[e])){t=!1;break}if(t)return void(0,u.traceVerbose)("Update display data message received, but no output to update (data is the same)",e.content)}const a=this.execution||this.createTemporaryTask();(0,p.traceCellMessage)(this.cell,`Replace output items in display data ${i.items.length}`),a?.replaceOutput(o,n.cell).then(f.noop,f.noop),this.endTemporaryTask()}}w.modelIdsOwnedByCells=new WeakMap,w.outputsOwnedByWidgetModel=new Map,i([(0,h.swallowExceptions)()],w.prototype,"handleReply",null),t.CellExecutionMessageHandler=w},3130:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CellExecutionMessageHandlerService=void 0;const r=n(66828),i=n(20397),o=n(67572);t.CellExecutionMessageHandlerService=class{constructor(e,t,n,i){this.appShell=e,this.controller=t,this.context=n,this.formatters=i,this.disposables=[],this.messageHandlers=new WeakMap,r.workspace.onDidChangeNotebookDocument((e=>{e.notebook===this.notebook&&e.contentChanges.forEach((e=>e.removedCells.forEach((e=>this.messageHandlers.get(e)?.dispose()))))}),this,this.disposables)}dispose(){(0,i.disposeAllDisposables)(this.disposables),this.notebook&&this.notebook.getCells().forEach((e=>this.messageHandlers.get(e)?.dispose()))}registerListener(e,t){this.notebook=e.notebook,this.messageHandlers.get(e)?.dispose();const n=new o.CellExecutionMessageHandler(e,this.appShell,this.controller,this.context,this.formatters,t.kernel,t.request,t.cellExecution);return this.messageHandlers.set(e,n),n}}},14644:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CellExecutionQueue=void 0;const r=n(66828),i=n(11642),o=n(58681),s=n(14154),a=n(94062);t.CellExecutionQueue=class{get isEmpty(){return 0===this.queueOfCellsToExecute.length}get failed(){return this.cancelledOrCompletedWithErrors}get queue(){return this.queueOfCellsToExecute.map((e=>e.cell))}constructor(e,t,n,i){this.session=e,this.executionFactory=t,this.metadata=n,this.resourceUri=i,this.queueOfCellsToExecute=[],this.cancelledOrCompletedWithErrors=!1,this.startedRunningCells=!1,this._onPreExecute=new r.EventEmitter,this._onPostExecute=new r.EventEmitter,this.disposables=[]}dispose(){this.disposables.forEach((e=>e.dispose())),this.lastCellExecution?.dispose()}get onPreExecute(){return this._onPreExecute.event}get onPostExecute(){return this._onPostExecute.event}queueCell(e,t){if(this.queueOfCellsToExecute.find((t=>t.cell===e)))return void(0,s.traceCellMessage)(e,"Use existing cell execution");const n=this.executionFactory.create(e,t,this.metadata);this.disposables.push(n),n.preExecute((e=>this._onPreExecute.fire(e)),this,this.disposables),this.queueOfCellsToExecute.push(n),(0,s.traceCellMessage)(e,"User queued cell for execution"),this.startExecutingCells()}async cancel(e){this.cancelledOrCompletedWithErrors=!0,(0,i.traceVerbose)("Cancel pending cells"),await Promise.all(this.queueOfCellsToExecute.map((t=>t.cancel(e)))),this.lastCellExecution?.dispose(),this.queueOfCellsToExecute.splice(0,this.queueOfCellsToExecute.length)}async waitForCompletion(e){const t=Array.isArray(e)&&e.length>0?this.queueOfCellsToExecute.filter((t=>e.includes(t.cell))):this.queueOfCellsToExecute;return Promise.all(t.map((e=>e.result)))}startExecutingCells(){this.startedRunningCells||this.start().catch(o.noop),this.startedRunningCells=!0}async start(){try{await this.executeQueuedCells()}catch(e){(0,i.traceError)("Failed to execute cells in CellExecutionQueue",e),this.cancelledOrCompletedWithErrors=!0,await this.cancel()}}async executeQueuedCells(){let e;const t=await this.session;for(this.queueOfCellsToExecute.forEach((e=>(0,s.traceCellMessage)(e.cell,"Ready to execute")));this.queueOfCellsToExecute.length;){this.lastCellExecution?.dispose();const n=this.queueOfCellsToExecute[0];let r;this.lastCellExecution=n,(0,s.traceCellMessage)(n.cell,"Before Execute individual cell");try{n.cell.notebook.isClosed?e=!0:this.cancelledOrCompletedWithErrors||(await n.start(t),r=await n.result)}finally{(0,s.traceCellMessage)(n.cell,`After Execute individual cell ${r}`);const e=this.queueOfCellsToExecute.indexOf(n);e>=0&&this.queueOfCellsToExecute.splice(e,1),this._onPostExecute.fire(n.cell)}if(e||this.cancelledOrCompletedWithErrors||r===a.NotebookCellRunState.Error){this.cancelledOrCompletedWithErrors=!0,(0,i.traceInfo)(`Cancel all remaining cells ${this.cancelledOrCompletedWithErrors} || ${r} || ${e}`),await this.cancel();break}if("dead"===t.status||"terminating"===t.status){this.cancelledOrCompletedWithErrors=!0,(0,i.traceWarning)("Cancel all remaining cells due to dead kernel"),await this.cancel();break}}}}},79821:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleTensorBoardDisplayDataOutput=void 0,t.handleTensorBoardDisplayDataOutput=function(e){if(e.hasOwnProperty("text/html")){const t=e["text/html"];"string"==typeof t&&t.includes('<iframe id="tensorboard-frame-')&&(e["text/html"]=t.replace(/new URL\((.*), window.location\)/,'new URL("http://localhost")'))}return e}},14154:function(e,t,n){"use strict";var r=n(48764).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.endCellAndDisplayErrorsInCell=t.updateNotebookMetadata=t.hasErrorOutput=t.getTextOutputValues=t.getTextOutputValue=t.translateErrorOutput=t.translateCellDisplayOutput=t.translateCellErrorOutput=t.getOutputStreamType=t.cellOutputToVSCCellOutput=t.traceCellMessage=t.NotebookCellStateTracker=t.createJupyterCellFromVSCNotebookCell=t.CellOutputMimeTypes=void 0;const c=n(66828),l=a(n(50361)),u=a(n(64063)),d=s(n(15948)),p=s(n(52859)),h=n(15925),f=n(86563),g=n(11642),m=n(46031),y=n(9959),v=n(29629),b=n(9016),w=n(98729),C=n(11386);var S;!function(e){e.error="application/vnd.code.notebook.error",e.stderr="application/vnd.code.notebook.stderr",e.stdout="application/vnd.code.notebook.stdout"}(S=t.CellOutputMimeTypes||(t.CellOutputMimeTypes={})),t.createJupyterCellFromVSCNotebookCell=function(e){let t;return t=e.kind===c.NotebookCellKind.Markup?function(e){const t=e.metadata?.custom,n={cell_type:"markdown",source:(0,f.splitMultilineString)("document"in e?e.document.getText():e.value),metadata:t?.metadata||{}};return t?.attachments&&(n.attachments=t.attachments),n}(e):"document"in e&&"raw"===e.document.languageId||"languageId"in e&&"raw"===e.languageId?function(e){const t=e.metadata?.custom,n={cell_type:"raw",source:(0,f.splitMultilineString)("document"in e?e.document.getText():e.value),metadata:t?.metadata||{}};return t?.attachments&&(n.attachments=t.attachments),n}(e):function(e){const t=e.metadata?.custom,n="document"in e?e.document.getText():e.value;return{cell_type:"code",execution_count:e.executionSummary?.executionOrder??null,source:(0,f.splitMultilineString)(n),outputs:(e.outputs||[]).map(A),metadata:t?.metadata||{}}}(e),t};const _=["application/vnd.*","application/vdom.*","application/geo+json","application/x-nteract-model-debug+json","text/html","application/javascript","image/gif","text/latex","text/markdown","image/png","image/svg+xml","image/jpeg","application/json","text/plain"];function k(e){if(e.mime.startsWith("application/vnd."))try{return 0===r.from(e.data).toString().length}catch{}return!1}class P{static getCellState(e){return P.cellStates.get(e)?.state}static getCellStatus(e){return(P.cellStates.get(e)?.stateTransition||[]).join(", ")||""}static setCellState(e,t){const n=P.cellStates.get(e)?.start||new C.StopWatch,r=P.cellStates.get(e)?.stateTransition||[];r.push(`${t} ${0===r.length?"@ start":`After ${n.elapsedTime}ms`}`),P.cellStates.set(e,{stateTransition:r,state:t,start:n})}}t.NotebookCellStateTracker=P,P.cellStates=new WeakMap,t.traceCellMessage=function(e,t){(0,g.traceInfoIfCI)(`Cell Index:${e.index}, of document ${p.basename(e.notebook.uri)} with state:${P.getCellStatus(e)}, exec: ${e.executionSummary?.executionOrder}. ${t}.`)};const I=new Map;function E(e){const t={outputType:e.output_type};switch(e.transient&&(t.transient=e.transient),e.output_type){case"display_data":case"execute_result":case"update_display_data":t.executionCount=e.execution_count,t.metadata=e.metadata?(0,l.default)(e.metadata):{}}return t}function T(e){const t=E(e);("image/svg+xml"in e.data||"image/png"in e.data)&&(t.__displayOpenPlotIcon=!0);const n=[];if(e.data)for(const t in e.data)n.push(M(t,e.data[t]));return new c.NotebookCellOutput(n.sort(((e,t)=>{const n=(e,t)=>(e.endsWith(".*")&&(e=e.substr(0,e.indexOf(".*"))),t.startsWith(e));let r=_.findIndex((t=>n(t,e.mime))),i=_.findIndex((e=>n(e,t.mime)));return k(e)&&(r=-1),k(t)&&(i=-1),r=-1==r?100:r,i=-1==i?100:i,r-i})),t)}function D(e){if(e.items.length>0)return e.items[0].mime===S.stderr?"stderr":"stdout"}function x(e){const t=e.items[0];if(!t.data)return{output_type:"error",ename:"",evalue:"",traceback:[]};const n=e.metadata?.originalError,i=JSON.parse(r.from(t.data).toString("utf8"));return{output_type:"error",ename:i.name,evalue:i.message,traceback:n?.traceback||(0,f.splitMultilineString)(i.stack||i.message||"")}}I.set("display_data",T),I.set("error",L),I.set("execute_result",T),I.set("stream",(function(e){const t=(0,f.concatMultilineString)(e.text),n="stderr"===e.name?c.NotebookCellOutputItem.stderr:c.NotebookCellOutputItem.stdout;return new c.NotebookCellOutput([n(t)],E(e))})),I.set("update_display_data",T),t.cellOutputToVSCCellOutput=function(e){const t=I.get(e.output_type);let n;return t?n=t(e):((0,g.traceWarning)(`Unable to translate cell from ${e.output_type} to NotebookCellData for VS Code.`),n=T(e)),n},t.getOutputStreamType=D,t.translateCellErrorOutput=x;const R=new TextDecoder,j=["text/plain","text/markdown",S.stderr,S.stdout];function N(e,t){if(!t)return"";try{if(e===S.error){const e=R.decode(t);return JSON.parse(e)}if(e.startsWith("text/")||j.includes(e)){const e=R.decode(t);return(0,f.splitMultilineString)(e)}if(e.startsWith("image/")&&"image/svg+xml"!==e){if(void 0!==r&&"function"==typeof r.from)return r.from(t).toString("base64");{const e=R.decode(t);return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number.parseInt("0x"+t))})))}}if(!e.toLowerCase().startsWith("application/vnd.holoviews_load.v")||!e.toLowerCase().endsWith("+json")){if(e.toLowerCase().includes("json")){const e=R.decode(t);return e.length>0?JSON.parse(e):e}return R.decode(t)}{const e=R.decode(t);try{return e.length>0?JSON.parse(e):e}catch{return e}}}catch(n){return(0,g.traceError)(`Failed to convert ${e} output from a buffer ${typeof t}, ${t}`,n),""}}function M(e,t){if(!t)return c.NotebookCellOutputItem.text("",e);try{if(!e.startsWith("text/")&&!j.includes(e)||!Array.isArray(t)&&"string"!=typeof t){if(e.startsWith("image/")&&"string"==typeof t&&"image/svg+xml"!==e){if(void 0!==r&&"function"==typeof r.from)return new c.NotebookCellOutputItem(r.from(t,"base64"),e);{const n=Uint8Array.from(atob(t),(e=>e.charCodeAt(0)));return new c.NotebookCellOutputItem(n,e)}}return"object"!=typeof t||null===t||Array.isArray(t)?(t=Array.isArray(t)?(0,f.concatMultilineString)(t):t,c.NotebookCellOutputItem.text(t,e)):c.NotebookCellOutputItem.text(JSON.stringify(t),e)}{const n=Array.isArray(t)?(0,f.concatMultilineString)(t):t;return c.NotebookCellOutputItem.text(n,e)}}catch(n){return(0,g.traceError)(`Failed to convert ${e} output to a buffer ${typeof t}, ${t}`,n),c.NotebookCellOutputItem.text("")}}function O(e){const t=[];e.items.filter((e=>e.mime===S.stderr||e.mime===S.stdout)).map((e=>R.decode(e.data))).forEach((e=>{const n=e.split("\n");t.length&&n.length&&n[0].length>0&&(t[t.length-1]=`${t[t.length-1]}${n.shift()}`);for(const e of n)t.push(e)}));for(let e=0;e<t.length-1;e++)t[e]=`${t[e]}\n`;return t.length&&0===t[t.length-1].length&&t.pop(),{output_type:"stream",name:D(e)||"stdout",text:t}}function A(e){const t=e.metadata;let n;const r=t?.outputType;switch(r){case"error":n=x(e);break;case"stream":n=O(e);break;case"display_data":n={output_type:"display_data",data:e.items.reduce(((e,t)=>(e[t.mime]=N(t.mime,t.data),e)),{}),metadata:t?.metadata||{}};break;case"execute_result":n={output_type:"execute_result",data:e.items.reduce(((e,t)=>(e[t.mime]=N(t.mime,t.data),e)),{}),metadata:t?.metadata||{},execution_count:"number"==typeof t?.executionCount?t?.executionCount:null};break;case"update_display_data":n={output_type:"update_display_data",data:e.items.reduce(((e,t)=>(e[t.mime]=N(t.mime,t.data),e)),{}),metadata:t?.metadata||{}};break;default:{const r=1===e.items.length&&e.items.every((e=>e.mime===S.error)),i=e.items.every((e=>e.mime===S.stderr||e.mime===S.stdout));if(r)return x(e);const o=t?.outputType||(i?"stream":"display_data");let s;(0,y.sendTelemetryEvent)(y.Telemetry.VSCNotebookCellTranslationFailed,void 0,{outputType:o}),s="stream"===o?O(e):"display_data"===o?{data:{},metadata:{},output_type:"display_data"}:{output_type:o},t?.metadata&&(s.metadata=t.metadata),e.items.length>0&&(s.data=e.items.reduce(((e,t)=>(e[t.mime]=N(t.mime,t.data),e)),{})),n=s;break}}return n&&t&&t.transient&&(n.transient=t.transient),n}function L(e){return e=e||{output_type:"error",ename:"",evalue:"",traceback:[]},new c.NotebookCellOutput([c.NotebookCellOutputItem.error({name:e?.ename||"",message:e?.evalue||"",stack:(e?.traceback||[]).join("\n")})],{...E(e),originalError:e})}function F(e){return(e?.items?.filter((e=>e.mime===S.stdout||e.mime===S.stderr||"text/plain"===e.mime||"text/markdown"===e.mime))||[]).map((e=>N(e.mime,e.data))).join("")}t.translateCellDisplayOutput=A,t.translateErrorOutput=L,t.getTextOutputValue=F,t.getTextOutputValues=function(e){return e.outputs.map(F).join("")},t.hasErrorOutput=function(e){return!!e.find((e=>e.items.length&&!e.items.some((e=>e.mime!==S.error))))},t.updateNotebookMetadata=async function(e,t,n,r){let i,o,s=!1;if(!t)return{changed:s,kernelId:i};switch(t?.language_info?.name||(t.language_info=t.language_info||{name:""}),n?.kind){case"connectToLiveRemoteKernel":o=n.kernelModel.language;break;case"startUsingRemoteKernelSpec":case"startUsingLocalKernelSpec":o=n.kernelSpec.language;break;case"startUsingPythonInterpreter":o=h.PYTHON_LANGUAGE}if(t.language_info.name!==o&&o&&(t.language_info.name=o,s=!0),r&&"language_info"in r&&r.language_info)(0,u.default)(t.language_info,r.language_info)||(t.language_info=(0,l.default)(r.language_info),s=!0);else{const e=(0,w.isPythonKernelConnection)(n),r=e?(0,w.getInterpreterFromKernelConnectionMetadata)(n):void 0,i=r?.version?`${r.version.major}.${r.version.minor}.${r.version.patch}`:"";r&&r.version&&t&&t.language_info&&t.language_info.version!==i?(t.language_info.version=i,s=!0):!r&&t?.language_info&&e&&(t.language_info=void 0,s=!0)}const a=n&&(0,w.kernelConnectionMetadataHasKernelModel)(n)?n.kernelModel:n?.kernelSpec;if("startUsingPythonInterpreter"===n?.kind){const r=n.kernelSpec;let i=r.display_name||n.interpreter.displayName||"",o="";switch((0,w.getKernelRegistrationInfo)(r)){case"registeredByOldVersionOfExt":case"registeredByNewVersionOfExt":o="python3";break;case"registeredByNewVersionOfExtForCustomKernelSpec":o=(r.metadata?.vscode?.originalSpecFile?d.basename(d.dirname(r.metadata.vscode.originalSpecFile)):void 0)||r.name,i=r.metadata?.vscode?.originalDisplayName||i;break;default:o=r.name}const a=(0,w.getInterpreterFromKernelConnectionMetadata)(n),c="Stable"===e.features.kernelPickerType&&a?.uri?await(0,m.getInterpreterHash)({uri:a?.uri}):void 0,l=("interpreter"in t?t.interpreter:"vscode"in t&&t.vscode&&"object"==typeof t.vscode&&"interpreter"in t.vscode?t.vscode.interpreter:void 0)?.hash;(t.kernelspec?.name!==o||c&&c!==l)&&(s=!0,t.kernelspec={name:o,language:h.PYTHON_LANGUAGE,display_name:i},"Stable"===e.features.kernelPickerType&&(0,w.getKernelRegistrationInfo)(r)?t.vscode={interpreter:{hash:await(0,m.getInterpreterHash)(n.interpreter)}}:"vscode"in t&&delete t.vscode,"interpreter"in t&&delete t.interpreter)}else if(a&&!t.kernelspec){const e=a.metadata?.vscode?.originalSpecFile?d.basename(d.dirname(a.metadata.vscode.originalSpecFile)):void 0;t.kernelspec={name:e||a.name||a.display_name||"",display_name:a.metadata?.vscode?.originalDisplayName||a.display_name||a.name||""},a.language&&(t.kernelspec.language=a.language),i=a.id,s=!0}else if(a&&t.kernelspec){const e=(a.metadata?.vscode?.originalSpecFile?d.basename(d.dirname(a.metadata.vscode.originalSpecFile)):void 0)||a.name||a.display_name||"",n=a.metadata?.vscode?.originalDisplayName||a.display_name||a.name||"",r=a.language||a.language||"";t.kernelspec.name===e&&t.kernelspec.language===r&&t.kernelspec.display_name===n&&i===a.id||(s=!0,t.kernelspec.name=e,t.kernelspec.display_name=n,t.kernelspec.language=r,i=a.id);try{delete t.kernelspec.metadata}catch{}}return{changed:s,kernelId:i}},t.endCellAndDisplayErrorsInCell=async function(e,t,n,r){const i=b.CellExecutionCreator.getOrCreate(e,t),o=(0,v.createOutputWithErrorMessageForDisplay)(n);o?(i.started||(i.start(e.executionSummary?.timing?.endTime),i.executionOrder=e.executionSummary?.executionOrder),await i.appendOutput(o),i.end(!!r&&void 0,e.executionSummary?.timing?.endTime)):i.started&&i.end(!!r&&void 0,e.executionSummary?.timing?.endTime)}},61254:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelCompletionsPreWarmer=void 0;const o=n(86700),s=n(42080),a=n(98729),c=n(94062);let l=class{constructor(e,t){this.kernelProvider=e,this.disposables=t}activate(){this.kernelProvider.onDidStartKernel((e=>{e.session&&(0,a.isPythonKernelConnection)(e.kernelConnectionMetadata)&&this.requestEmptyCompletions(e.session)}),this,this.disposables)}requestEmptyCompletions(e){e?.requestComplete({code:"__file__.",cursor_pos:9}).ignoreErrors()}};l=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IKernelProvider)),i(1,(0,o.inject)(s.IDisposableRegistry))],l),t.KernelCompletionsPreWarmer=l},58880:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearPendingChainedUpdatesForTests=t.chainWithPendingUpdates=void 0;const r=n(25472),i=n(66828),o=n(43138),s=n(58681),a=new WeakMap;t.chainWithPendingUpdates=async function(e,t){const n=e;if(e.isClosed)return!0;const c=a.has(n)?a.get(n):Promise.resolve(),l=(0,o.createDeferred)(),u=c.finally((async()=>{const e=new i.WorkspaceEdit,n=t(e);(0,r.isPromise)(n)&&await n,await i.workspace.applyEdit(e).then((e=>l.resolve(e)),(e=>l.reject(e)))})).catch(s.noop);return a.set(n,u),l.promise},t.clearPendingChainedUpdatesForTests=function(){const e=i.window.activeNotebookEditor;e?.notebook&&a.delete(e.notebook)}},98729:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.executeSilently=t.isLocalHostConnection=t.detectDefaultKernelName=t.areKernelConnectionsEqual=t.getKernelRegistrationInfo=t.getInterpreterWorkspaceFolder=t.getInterpreterKernelSpecName=t.autoGeneratedKernelNameIdentifier=t.getLanguageInKernelSpec=t.getLanguageInNotebookMetadata=t.getKernelConnectionLanguage=t.isPythonKernelSpec=t.isPythonKernelConnection=t.getInterpreterFromKernelConnectionMetadata=t.getKernelConnectionDisplayPath=t.getRemoteKernelSessionInformation=t.getKernelDisplayPathFromKernelConnection=t.getNameOfKernelConnection=t.getDisplayNameOrNameOfKernelConnection=t.getKernelId=t.kernelConnectionMetadataHasKernelModel=t.kernelConnectionMetadataHasKernelSpec=t.removeNotebookSuffixAddedByExtension=t.isDefaultKernelSpec=t.isPythonNotebook=t.cleanEnvironment=t.createInterpreterKernelSpec=t.isDefaultPythonKernelSpecName=t.jvscIdentifier=t.findIndexOfConnectionFile=t.connectionFilePlaceholder=void 0;const a=o(n(15948)),c=o(n(52859)),l=s(n(50361)),u=s(n(84564)),d=n(66828),p=n(15925),h=n(11642),f=n(35412),g=n(25251),m=n(46031),y=n(96434),v=n(47891),b=n(24353),w=n(47028),C=n(9959);function S(e){const n=e.metadata?.vscode?.originalSpecFile||e.metadata?.originalSpecFile,r=n?a.basename(a.dirname(n)):e.name||"",i=e.metadata?.vscode?.originalDisplayName||e.display_name||"";return!(!r.toLowerCase().match(t.isDefaultPythonKernelSpecName)&&"python 3 (ipykernel)"!==i.toLowerCase()&&"python 3"!==i.toLowerCase())}function _(e){if(e.includes(t.jvscIdentifier)){const n=/[a-f0-9]$/;if(-1!==e.substring(e.lastIndexOf(t.jvscIdentifier)+t.jvscIdentifier.length).search(n)){const n=e.substring(0,e.lastIndexOf(t.jvscIdentifier));return n.toLowerCase().endsWith(".ipynb")?n:`${n}.ipynb`}}return e}function k(e){return"connectToLiveRemoteKernel"!==e.kind}function P(e){return"connectToLiveRemoteKernel"===e.kind}function I(e){let t=e.envName;return e.envPath&&e.envType===v.EnvironmentType.Conda&&!e.envName&&(t=c.basename(e.envPath)),t}function E(e){if(!e)return;const t=P(e)?e.kernelModel:void 0,n=k(e)?e.kernelSpec:void 0;if("startUsingPythonInterpreter"===e.kind||("startUsingRemoteKernelSpec"===e.kind||"startUsingLocalKernelSpec"===e.kind)&&e.kernelSpec.language===p.PYTHON_LANGUAGE){const t=n?.metadata?.interpreter?.path||n?.interpreterPath||n?.executable;return"/python"===t||"python"===t?e.interpreter?.displayPath:t?d.Uri.file(t):void 0}{const e=t?.executable||n?.executable||n?.metadata?.interpreter?.path||n?.interpreterPath;return e?d.Uri.file(e):void 0}}function T(e){return(e?.language||"").toLowerCase()===p.PYTHON_LANGUAGE}function D(e){return e?.language}async function x(e){const n=(e?.sysVersion?(0,y.getTelemetrySafeVersion)(e.sysVersion)||"3":"").replace(/\./g,"");return e?`${e?`python${n}`:""}${t.autoGeneratedKernelNameIdentifier}${await(0,m.getInterpreterHash)(e)}`:"python3"}function R(e){if(e.isRegisteredByVSC)return e.isRegisteredByVSC;if(!e.name)return;const n=e.metadata?.vscode?.originalSpecFile||e.metadata?.originalSpecFile,r=n?a.basename(a.dirname(n)):e.name,i=S({...e,name:r})?Object.keys(e.env||{}).length>0:"string"==typeof n&&!n.includes(t.autoGeneratedKernelNameIdentifier);return e.name.includes(t.autoGeneratedKernelNameIdentifier)?i?"registeredByNewVersionOfExtForCustomKernelSpec":"registeredByNewVersionOfExt":e.metadata?.interpreter&&-1!==e.name.toLowerCase().search(/[a-f0-9]{32}$/)?"registeredByOldVersionOfExt":void 0}t.connectionFilePlaceholder="{connection_file}",t.findIndexOfConnectionFile=function(e){return e.argv.findIndex((e=>e.includes(t.connectionFilePlaceholder)))},t.jvscIdentifier="-jvsc-",t.isDefaultPythonKernelSpecName=/^python\d*.?\d*$/,t.createInterpreterKernelSpec=async function(e,n){const r=e?{path:(0,f.getFilePath)(e.uri)}:{},i={name:await x(e),language:"python",display_name:e?.displayName||"Python 3",metadata:{interpreter:r},argv:["python","-m","ipykernel_launcher","-f",t.connectionFilePlaceholder],env:{},resources:{}},o=n&&i.name?c.joinPath(n,i.name,"kernel.json"):void 0;return new w.JupyterKernelSpec(i,o?(0,f.getFilePath)(o):void 0,(0,f.getFilePath)(e?.uri),"registeredByNewVersionOfExt")},t.cleanEnvironment=function(e){const t=(0,l.default)(e);return t.env&&Object.keys(t.env).forEach((e=>{if(t.env){const n=t.env[e];null!=n&&(t.env[e]=n.toString())}})),t},t.isPythonNotebook=function(e){const t=e?.kernelspec;return!(e?.language_info?.name&&e.language_info.name!==p.PYTHON_LANGUAGE||!t?.name?.includes(p.PYTHON_LANGUAGE)&&t?.language!==p.PYTHON_LANGUAGE&&e?.language_info?.name!==p.PYTHON_LANGUAGE)},t.isDefaultKernelSpec=S,t.removeNotebookSuffixAddedByExtension=_,t.kernelConnectionMetadataHasKernelSpec=k,t.kernelConnectionMetadataHasKernelModel=P,t.getKernelId=function(e,n,r){n=T(e)?n:void 0;let i=e.name;const o=R(e);if(o&&i.includes(t.autoGeneratedKernelNameIdentifier)&&(i=i.substring(i.indexOf(t.autoGeneratedKernelNameIdentifier)),"registeredByNewVersionOfExtForCustomKernelSpec"===o)){const t=e.metadata?.vscode?.originalSpecFile||e.metadata?.originalSpecFile;t&&(i=`${i}#${a.basename(a.dirname(t))}`)}let s="";s=T(e)?e.argv.slice(1).filter((e=>!["-f","{connection_file}"].includes(e))).join("#").toLowerCase():e.argv.join("#").toLowerCase();const c=r?`${r}.`:"",l=(0,f.getFilePath)((0,m.getNormalizedInterpreterPath)(e.interpreterPath?d.Uri.file(e.interpreterPath):d.Uri.file(e.executable))),u=(0,f.getFilePath)((0,m.getNormalizedInterpreterPath)(n?.uri))||"";return`${c}${e.id||""}.${i}.${l}.${u}.${s}`},t.getDisplayNameOrNameOfKernelConnection=function(e){const t=function(e){if(!e)return"";return["connectToLiveRemoteKernel"===e.kind?e.kernelModel.display_name:e.kernelSpec?.display_name,"connectToLiveRemoteKernel"===e.kind?e.kernelModel.name:e.kernelSpec?.name,"startUsingPythonInterpreter"===e.kind?e.interpreter.displayName:void 0,""].find((e=>"string"==typeof e&&e.length>0))||""}(e);if(!e)return t;switch(e.kind){case"connectToLiveRemoteKernel":{const n=_(e.kernelModel?.notebook?.path||e.kernelModel?.model?.path||"");return n?`${t} (${n})`:t}case"startUsingRemoteKernelSpec":case"startUsingLocalKernelSpec":if(e.interpreter?.envType&&e.interpreter.envType!==v.EnvironmentType.Unknown){const n=I(e.interpreter);if(e.kernelSpec.language===p.PYTHON_LANGUAGE){const n=`Python ${(0,y.getTelemetrySafeVersion)(e.interpreter.version?.raw||"")||""}`.trim();return e.interpreter.envName?`${t} (${n})`:t}return n?`${t} (${n})`:t}return t;case"startUsingPythonInterpreter":const n=((0,y.getTelemetrySafeVersion)(e.interpreter.version?.raw||"")||"").trim();if(e.interpreter.envType&&e.interpreter.envType!==v.EnvironmentType.Unknown){if(e.kernelSpec.display_name&&"registeredByNewVersionOfExtForCustomKernelSpec"===R(e.kernelSpec))return e.kernelSpec.display_name;const t=!e.interpreter.version||!e.interpreter.version.major&&!e.interpreter.version.minor&&!e.interpreter.version.patch&&!e.interpreter.version.raw,r=e.interpreter.envType===v.EnvironmentType.Conda&&!e.interpreter.sysPrefix&&t&&("/python"===e.interpreter.uri.path||"python"===e.interpreter.uri.path),i=n.trim()?`Python ${n}`:"Python",o=I(e.interpreter);return r&&o?o:o?`${o} (${i})`:i}return`Python ${n}`.trim()}return t},t.getNameOfKernelConnection=function(e,t=""){return e?"connectToLiveRemoteKernel"===e.kind?e.kernelModel.name:e.kernelSpec?.name:t},t.getKernelDisplayPathFromKernelConnection=E,t.getRemoteKernelSessionInformation=function(e,t=""){return"connectToLiveRemoteKernel"===e?.kind?g.DataScience.jupyterSelectURIRunningDetailFormat(e.kernelModel.lastActivityTime,e.kernelModel.numberOfConnections):t},t.getKernelConnectionDisplayPath=function(e,t,n){if("connectToLiveRemoteKernel"===e?.kind)return;const r=E(e),i=t.workspaceFolders?t.workspaceFolders:[];return r?(0,f.getDisplayPath)(r,i,n.homeDir):""},t.getInterpreterFromKernelConnectionMetadata=function(e){if(!e)return;if(e.interpreter)return e.interpreter;const t=P(e)?e.kernelModel:void 0;if(t?.metadata?.interpreter)return(0,b.deserializePythonEnvironment)(t?.metadata?.interpreter,"");const n=k(e)?e.kernelSpec:void 0;return(0,b.deserializePythonEnvironment)(n?.metadata?.interpreter,"")},t.isPythonKernelConnection=function(e){if(!e)return!1;if("startUsingPythonInterpreter"===e.kind)return!0;const t=P(e)?e.kernelModel:void 0,n=k(e)?e.kernelSpec:void 0;return t?.language===p.PYTHON_LANGUAGE||T(n)},t.isPythonKernelSpec=T,t.getKernelConnectionLanguage=function(e){if(!e)return;if("startUsingPythonInterpreter"===e.kind)return p.PYTHON_LANGUAGE;const t=P(e)?e.kernelModel:void 0,n=k(e)?e.kernelSpec:void 0;return t?.language||D(n)},t.getLanguageInNotebookMetadata=function(e){if(e)return D(e.kernelspec)||e.language_info?.name},t.getLanguageInKernelSpec=D,t.autoGeneratedKernelNameIdentifier="jvsc74a57bd0",t.getInterpreterKernelSpecName=x,t.getInterpreterWorkspaceFolder=function(e,t){return t.getWorkspaceFolder(e.uri)?.uri||t.rootFolder},t.getKernelRegistrationInfo=R,t.areKernelConnectionsEqual=function(e,t){return!((e||t)&&(!e&&t||e&&!t||e?.id!==t?.id))},t.detectDefaultKernelName=function(e){return new RegExp("python\\s*(?<version>(\\d+))","g").exec(e.toLowerCase())},t.isLocalHostConnection=function(e){if("connectToLiveRemoteKernel"===e.kind||"startUsingRemoteKernelSpec"===e.kind){const t=new u.default(e.baseUrl);return"localhost"===t.hostname.toLocaleLowerCase()||"127.0.0.1"===t.hostname}return!1},t.executeSilently=async function(e,t,r){(0,h.traceVerbose)(`Executing silently Code (${e.status}) = ${t.substring(0,100).splitLines().join("\\n")}`);const i=n(76240),o=e.requestExecute({code:t.replace(/\r\n/g,"\n"),silent:!1,stop_on_error:!1,allow_stdin:!0,store_history:!1},!0),s=[];o.onIOPub=e=>{if(i.KernelMessage.isStreamMsg(e))if((0,h.traceInfoIfCI)(`Got io pub message (stream), ${e.content.text.substr(0,100).splitLines().join("\\n")}`),s.length>0&&"stream"===s[s.length-1].output_type&&s[s.length-1].name===e.content.name)s[s.length-1].text+=e.content.text;else{const t={name:e.content.name,text:e.content.text,output_type:"stream"};s.push(t)}else if(i.KernelMessage.isExecuteResultMsg(e)){(0,h.traceInfoIfCI)("Got io pub message (execresult)}");const t={data:e.content.data,execution_count:e.content.execution_count,metadata:e.content.metadata,output_type:"execute_result"};s.push(t)}else if(i.KernelMessage.isDisplayDataMsg(e)){(0,h.traceInfoIfCI)("Got io pub message (displaydata)}");const t={data:e.content.data,metadata:e.content.metadata,output_type:"display_data"};s.push(t)}else if(i.KernelMessage.isErrorMsg(e)){(0,h.traceInfoIfCI)(`Got io pub message (error), ${e.content.ename},${e.content.evalue}, ${e.content.traceback.join().substring(0,100)}}`);const t={ename:e.content.ename,evalue:e.content.evalue,traceback:e.content.traceback,output_type:"error"};s.push(t)}else(0,h.traceInfoIfCI)(`Got io pub message (${e.header.msg_type})`)},await o.done;const a=t.substring(0,100).splitLines().join("\\n");return r&&function(e,t,n){e.filter((e=>"error"===e.output_type)).forEach((e=>{const r=e,i=`${r.ename}: ${r.evalue} \n ${r.traceback.map((e=>`    ${e}`)).join("\n")}`,o=`${t.traceErrorsMessage||""} ${n} ${i}`;t.traceErrors?(0,h.traceError)(o):(0,h.traceWarning)(o),t.telemetryName&&(0,C.sendTelemetryEvent)(t.telemetryName)}))}(s,r,a),(0,h.traceVerbose)(`Executing silently Code (completed) = ${a} with ${s.length} output(s)`),s}},65537:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isModulePresentInEnvironmentCache=t.clearInstalledIntoInterpreterMemento=t.trackPackageInstalledIntoInterpreter=void 0;const r=n(59985),i=n(58681),o=n(46031);t.trackPackageInstalledIntoInterpreter=async function(e,t,n){if((0,i.isResource)(n))return;const s=`${await(0,o.getInterpreterHash)(n)}#${r.ProductNames.get(t)}`;await e.update(s,!0)},t.clearInstalledIntoInterpreterMemento=async function(e,t,n){const i=`${await(0,o.getInterpreterHash)({uri:n})}#${r.ProductNames.get(t)}`;await e.update(i,void 0)},t.isModulePresentInEnvironmentCache=async function(e,t,n){const i=`${await(0,o.getInterpreterHash)(n)}#${r.ProductNames.get(t)}`;return e.get(i,!1)}},59985:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProductNames=void 0;const r=n(83902);t.ProductNames=new Map,t.ProductNames.set(r.Product.jupyter,"jupyter"),t.ProductNames.set(r.Product.notebook,"notebook"),t.ProductNames.set(r.Product.ipykernel,"ipykernel"),t.ProductNames.set(r.Product.nbconvert,"nbconvert"),t.ProductNames.set(r.Product.kernelspec,"kernelspec"),t.ProductNames.set(r.Product.pandas,"pandas"),t.ProductNames.set(r.Product.pip,"pip"),t.ProductNames.set(r.Product.ensurepip,"ensurepip")},83902:(e,t)=>{"use strict";var n,r,i,o,s,a,c;Object.defineProperty(t,"__esModule",{value:!0}),t.IInstaller=t.ModuleInstallFlags=t.IProductPathService=t.IProductService=t.IInstallationChannelManager=t.IPythonInstallation=t.IModuleInstaller=t.ProductType=t.ModuleInstallerType=t.ModuleNamePurpose=t.ProductInstallStatus=t.Product=t.InstallerResponse=void 0,(c=t.InstallerResponse||(t.InstallerResponse={}))[c.Installed=0]="Installed",c[c.Disabled=1]="Disabled",c[c.Ignore=2]="Ignore",c[c.Cancelled=3]="Cancelled",(a=t.Product||(t.Product={}))[a.jupyter=18]="jupyter",a[a.ipykernel=19]="ipykernel",a[a.notebook=20]="notebook",a[a.kernelspec=21]="kernelspec",a[a.nbconvert=22]="nbconvert",a[a.pandas=23]="pandas",a[a.pip=27]="pip",a[a.ensurepip=28]="ensurepip",(s=t.ProductInstallStatus||(t.ProductInstallStatus={}))[s.Installed=0]="Installed",s[s.NotInstalled=1]="NotInstalled",s[s.NeedsUpgrade=2]="NeedsUpgrade",(o=t.ModuleNamePurpose||(t.ModuleNamePurpose={}))[o.install=1]="install",o[o.run=2]="run",(i=t.ModuleInstallerType||(t.ModuleInstallerType={})).Unknown="Unknown",i.Conda="Conda",i.Pip="Pip",i.Poetry="Poetry",i.Pipenv="Pipenv",(r=t.ProductType||(t.ProductType={})).Linter="Linter",r.Formatter="Formatter",r.TestFramework="TestFramework",r.RefactoringLibrary="RefactoringLibrary",r.DataScience="DataScience",t.IModuleInstaller=Symbol("IModuleInstaller"),t.IPythonInstallation=Symbol("IPythonInstallation"),t.IInstallationChannelManager=Symbol("IInstallationChannelManager"),t.IProductService=Symbol("IProductService"),t.IProductPathService=Symbol("IProductPathService"),(n=t.ModuleInstallFlags||(t.ModuleInstallFlags={}))[n.upgrade=1]="upgrade",n[n.updateDependencies=2]="updateDependencies",n[n.reInstall=4]="reInstall",n[n.installPipIfRequired=8]="installPipIfRequired",t.IInstaller=Symbol("IInstaller")},23856:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.translateProductToModule=void 0;const r=n(83902);t.translateProductToModule=function(e){switch(e){case r.Product.jupyter:return"jupyter";case r.Product.notebook:return"notebook";case r.Product.pandas:return"pandas";case r.Product.ipykernel:return"ipykernel";case r.Product.nbconvert:return"nbconvert";case r.Product.kernelspec:return"kernelspec";case r.Product.pip:return"pip";case r.Product.ensurepip:return"ensurepip";default:throw new Error(`Product ${e} cannot be installed as a Python Module.`)}}},38994:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ContributedKernelFinderKind=void 0,(n=t.ContributedKernelFinderKind||(t.ContributedKernelFinderKind={})).Remote="remote",n.LocalKernelSpec="localKernelSpec",n.LocalPythonEnvironment="localPythonEnvironment"},23429:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseKernelConnectionWrapper=void 0;const r=n(4016),i=n(66828);t.BaseKernelConnectionWrapper=class{get serverSettings(){return(this.possibleKernelConnection||this._previousKernelConnection).serverSettings}getKernelConnection(){if(!this.possibleKernelConnection)throw new Error(`Kernel connection is not available, status = ${this.status}, connection = ${this.connectionStatus}`);return this.possibleKernelConnection}constructor(e,t){this._previousKernelConnection=e,this.statusChanged=new r.Signal(this),this.connectionStatusChanged=new r.Signal(this),this.iopubMessage=new r.Signal(this),this.unhandledMessage=new r.Signal(this),this.anyMessage=new r.Signal(this),this.disposed=new r.Signal(this),this.startHandleKernelMessages(e),t.push(new i.Disposable((()=>{this.possibleKernelConnection&&this.stopHandlingKernelMessages(this.possibleKernelConnection)})))}get id(){return(this.possibleKernelConnection||this._previousKernelConnection).id}get name(){return(this.possibleKernelConnection||this._previousKernelConnection).name}get isDisposed(){return!this.possibleKernelConnection||!0===this.possibleKernelConnection?.isDisposed}get model(){return(this.possibleKernelConnection||this._previousKernelConnection).model}get username(){return(this.possibleKernelConnection||this._previousKernelConnection).username}get clientId(){return(this.possibleKernelConnection||this._previousKernelConnection).clientId}get status(){return this.possibleKernelConnection?.status||"dead"}get connectionStatus(){return this.possibleKernelConnection?.connectionStatus||"disconnected"}get info(){return(this.possibleKernelConnection||this._previousKernelConnection).info}get spec(){return(this.possibleKernelConnection||this._previousKernelConnection).spec}get handleComms(){return(this.possibleKernelConnection||this._previousKernelConnection).handleComms}sendShellMessage(e,t,n){return this.getKernelConnection().sendShellMessage(e,t,n)}sendControlMessage(e,t,n){return this.getKernelConnection().sendControlMessage(e,t,n)}reconnect(){return this.getKernelConnection().reconnect()}requestKernelInfo(){return this.getKernelConnection().requestKernelInfo()}requestComplete(e){return this.getKernelConnection().requestComplete(e)}requestInspect(e){return this.getKernelConnection().requestInspect(e)}requestHistory(e){return this.getKernelConnection().requestHistory(e)}requestExecute(e,t,n){return this.getKernelConnection().requestExecute(e,t,n)}requestDebug(e,t){return this.getKernelConnection().requestDebug(e,t)}requestIsComplete(e){return this.getKernelConnection().requestIsComplete(e)}requestCommInfo(e){return this.getKernelConnection().requestCommInfo(e)}sendInputReply(e){return this.getKernelConnection().sendInputReply(e)}createComm(e,t){return this.getKernelConnection().createComm(e,t)}hasComm(e){return this.getKernelConnection().hasComm(e)}registerCommTarget(e,t){return this.getKernelConnection().registerCommTarget(e,t)}removeCommTarget(e,t){return this.getKernelConnection().removeCommTarget(e,t)}registerMessageHook(e,t){return this.getKernelConnection().registerMessageHook(e,t)}removeMessageHook(e,t){return this.getKernelConnection().removeMessageHook(e,t)}clone(e){throw new Error("Method not implemented.")}startHandleKernelMessages(e){e.anyMessage.connect(this.onAnyMessage,this),e.iopubMessage.connect(this.onIOPubMessage,this),e.unhandledMessage.connect(this.onUnhandledMessage,this)}stopHandlingKernelMessages(e){e.anyMessage.disconnect(this.onAnyMessage,this),e.iopubMessage.disconnect(this.onIOPubMessage,this),e.unhandledMessage.disconnect(this.onUnhandledMessage,this)}onAnyMessage(e,t){e===this.possibleKernelConnection&&this.anyMessage.emit(t)}onIOPubMessage(e,t){e===this.possibleKernelConnection&&this.iopubMessage.emit(t)}onUnhandledMessage(e,t){e===this.possibleKernelConnection&&this.unhandledMessage.emit(t)}}},89566:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteKernelFinder=void 0;const i=n(66828),o=n(98729),s=n(94062),a=n(9959),c=n(85493),l=n(11642),u=n(46875),d=n(6491),p=n(88960),h=n(98708),f=n(58681),g=n(73785),m=n(38994),y=n(20397),v=n(74075);class b{get status(){return this._status}set status(e){this._status!==e&&(this._status=e,this._onDidChangeStatus.fire())}get lastError(){return this._lastError}constructor(e,t,n,r,o,s,a,c,l,u,d,p,h){this.id=e,this.displayName=t,this.cacheKey=n,this.jupyterSessionManagerFactory=r,this.extensionChecker=o,this.notebookProvider=s,this.globalState=a,this.env=c,this.cachedRemoteKernelValidator=l,this.kernelProvider=d,this.extensions=p,this.serverUri=h,this._status="idle",this._onDidChangeStatus=new i.EventEmitter,this.onDidChangeStatus=this._onDidChangeStatus.event,this.promiseMonitor=new v.PromiseMonitor,this.kernelIdsToHide=new Set,this.kind=m.ContributedKernelFinderKind.Remote,this.cache=[],this._onDidChangeKernels=new i.EventEmitter,this.onDidChangeKernels=this._onDidChangeKernels.event,this.disposables=[],this.wasPythonInstalledWhenFetchingKernels=!1,this.disposables.push(u.registerKernelFinder(this)),this.disposables.push(this._onDidChangeKernels),this.disposables.push(this._onDidChangeStatus),this.disposables.push(this.promiseMonitor)}dispose(){this.kernelDisposeDelayTimer&&clearTimeout(this.kernelDisposeDelayTimer),(0,y.disposeAllDisposables)(this.disposables)}async activate(){this.promiseMonitor.onStateChange((()=>{this.status=this.promiseMonitor.isComplete?"idle":"discovering"})),this.loadCache().then(f.noop,f.noop),this.kernelProvider.onDidStartKernel((e=>{(0,s.isRemoteConnection)(e.kernelConnectionMetadata)&&this.updateCache().then(f.noop,f.noop)}),this,this.disposables),this.kernelProvider.onDidDisposeKernel((e=>{if(e&&(0,s.isRemoteConnection)(e.kernelConnectionMetadata)){this.kernelDisposeDelayTimer&&(clearTimeout(this.kernelDisposeDelayTimer),this.kernelDisposeDelayTimer=void 0);const e=setTimeout((()=>{this.updateCache().then(f.noop,f.noop)}),2e3);return this.kernelDisposeDelayTimer=e,e}}),this,this.disposables),this.extensions.onDidChange((()=>{!this.wasPythonInstalledWhenFetchingKernels&&this.extensionChecker.isPythonExtensionInstalled&&this.updateCache().then(f.noop,f.noop)}),this,this.disposables),this.wasPythonInstalledWhenFetchingKernels=this.extensionChecker.isPythonExtensionInstalled}async refresh(){await this.loadCache(!0,!0)}async loadCache(e=!1,t=!1){(0,l.traceInfoIfCI)(`Remote Kernel Finder load cache Server: ${this.id}`);const n=(async()=>{const n=e?[]:await this.getFromCache();let r=[];if(!e&&Array.isArray(n)&&n.length>0)r=n,this.updateCache().then(f.noop,f.noop),this.loadCache(!0).then(f.noop,f.noop);else try{const e=(async()=>{const e=await this.getRemoteConnectionInfo(void 0,t);return e?this.listKernelsFromConnection(e):Promise.resolve([])})();r=await e,this._lastError=void 0}catch(e){(0,l.traceError)("UniversalRemoteKernelFinder: Failed to get kernels without cache",e),this._lastError=e}await this.writeToCache(r)})();this.promiseMonitor.push(n),await n}async updateCache(){const e=(async()=>{let e=[];this._cacheUpdateCancelTokenSource?.dispose();const t=new i.CancellationTokenSource;this._cacheUpdateCancelTokenSource=t;try{const n=(async()=>{const e=await this.getRemoteConnectionInfo(t.token,!1);return e?this.listKernelsFromConnection(e):Promise.resolve([])})();e=await n}catch(n){(0,l.traceWarning)(`Could not fetch kernels from the ${this.kind} server, falling back to cache: ${n}`),e=await this.getFromCache(t.token),e=e.filter((e=>"connectToLiveRemoteKernel"===e.kind))}t.token.isCancellationRequested||await this.writeToCache(e)})();this.promiseMonitor.push(e),await e}get kernels(){return this.cache}async getRemoteConnectionInfo(e,t=!0){const n=new p.DisplayOptions(!t);return this.notebookProvider.connect({resource:void 0,ui:n,localJupyter:!1,token:e,serverId:this.serverUri.serverId})}async getFromCache(e){try{(0,l.traceVerbose)("UniversalRemoteKernelFinder: get from cache");let t=this.cache;const n=this.cacheKey;if(!t||0===t.length){const e=this.globalState.get(n,{kernels:[],extensionVersion:""});e&&(0,h.isArray)(e.kernels)&&e.extensionVersion===this.env.extensionVersion&&(t=e.kernels.map((e=>s.BaseKernelConnectionMetadata.fromJSON(e))))}const r=[],i=Promise.all(t.map((async e=>{await this.isValidCachedKernel(e)&&r.push(e)})));return e?await Promise.race([i,(0,d.createPromiseFromCancellation)({token:e,cancelAction:"resolve",defaultValue:void 0})]):await i,r}catch(e){(0,l.traceError)("UniversalRemoteKernelFinder: Failed to get from cache",e)}return[]}async listKernelsFromConnection(e){let t;if("jupyter"===e.type)try{t=await this.jupyterSessionManagerFactory.create(e);const[n,r,i,a]=await Promise.all([t.getRunningKernels(),t.getKernelSpecs(),t.getRunningSessions(),(0,u.computeServerId)(e.url)]),l=await Promise.all(r.map((async t=>(await(0,c.sendKernelSpecTelemetry)(t,"remote"),s.RemoteKernelSpecConnectionMetadata.create({kernelSpec:t,id:(0,o.getKernelId)(t,void 0,a),baseUrl:e.baseUrl,serverId:a})))));return[...i.map((t=>{const i=t.kernel,o=i.last_activity?new Date(Date.parse(i.last_activity.toString())):new Date,c=i.connections?parseInt(i.connections.toString(),10):0,l=n.find((e=>e.id===t.kernel?.id))||{},u=r.find((e=>e.name===t.kernel?.name))||{};return s.LiveRemoteKernelConnectionMetadata.create({kernelModel:{...t.kernel,...u,...l,name:t.kernel?.name||"",lastActivityTime:o,numberOfConnections:c,model:t},baseUrl:e.baseUrl,id:t.kernel?.id||"",serverId:a})})).filter((e=>!this.kernelIdsToHide.has(e.kernelModel.id||""))),...l]}catch(e){throw(0,l.traceError)("Error fetching remote kernels:",e),e}finally{t&&await t.dispose()}return[]}async writeToCache(e){try{(0,l.traceVerbose)(`UniversalRemoteKernelFinder: Writing ${e.length} remote kernel connection metadata to cache`);const t=this.cache,n=new Map(t.map((e=>[e.id,e]))),r=new Map(e.map((e=>[e.id,e]))),i=e.filter((e=>!n.has(e.id))),o=e.filter((e=>n.has(e.id)&&!(0,f.areObjectsWithUrisTheSame)(e,n.get(e.id)))),s=t.filter((e=>!r.has(e.id))),a=this.cacheKey;this.cache=e;const c=e.map((e=>e.toJSON()));await Promise.all([(0,g.removeOldCachedItems)(this.globalState),this.globalState.update(a,{kernels:c,extensionVersion:this.env.extensionVersion})]),(i.length||o.length||s.length)&&this._onDidChangeKernels.fire({added:i,updated:o,removed:s}),(0,l.traceVerbose)(`Updating cache with Remote kernels ${e.map((e=>`${e.kind}:'${e.id} (interpreter id = ${e.interpreter?.id})'`)).join(", ")}\n, Added = ${i.map((e=>`${e.kind}:'${e.id} (interpreter id = ${e.interpreter?.id})'`)).join(", ")}\n, Updated = ${o.map((e=>`${e.kind}:'${e.id} (interpreter id = ${e.interpreter?.id})'`)).join(", ")}\n, Removed = ${s.map((e=>`${e.kind}:'${e.id} (interpreter id = ${e.interpreter?.id})'`)).join(", ")}`)}catch(e){(0,l.traceError)("UniversalRemoteKernelFinder: Failed to write to cache",e)}}async isValidCachedKernel(e){switch(e.kind){case"startUsingRemoteKernelSpec":return!1;case"connectToLiveRemoteKernel":return this.cachedRemoteKernelValidator.isValid(e)}}}r([(0,a.capturePerfTelemetry)(a.Telemetry.KernelListingPerf,{kind:"remote"})],b.prototype,"listKernelsFromConnection",null),t.RemoteKernelFinder=b},30416:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteKernelFinderController=void 0;const c=n(86700),l=n(94062),u=n(42080),d=n(94433),p=n(77886),h=n(58681),f=n(10053),g=n(89566),m=n(38994),y=s(n(25251)),v=n(73785),b=n(15925);class w{constructor(e,t,n,r,i,o,s,a,c,l,u){this.jupyterSessionManagerFactory=e,this.extensionChecker=t,this.notebookProvider=n,this.serverUriStorage=r,this.globalState=i,this.env=o,this.cachedRemoteKernelValidator=s,this.kernelFinder=a,this.disposables=c,this.kernelProvider=l,this.extensions=u,this.serverFinderMapping=new Map}async activate(){(await this.serverUriStorage.getSavedUriList()).forEach(this.createRemoteKernelFinder.bind(this)),this.serverUriStorage.onDidAddUri(this.createRemoteKernelFinder,this,this.disposables),this.serverUriStorage.onDidRemoveUris(this.urisRemoved,this,this.disposables)}createRemoteKernelFinder(e){if(e.isValidated&&e.uri!==b.Settings.JupyterServerLocalLaunch&&!this.serverFinderMapping.has(e.serverId)){const t=new g.RemoteKernelFinder(`${m.ContributedKernelFinderKind.Remote}-${e.serverId}`,y.DataScience.universalRemoteKernelFinderDisplayName(e.displayName||e.uri),`${v.RemoteKernelSpecsCacheKey}-${e.serverId}`,this.jupyterSessionManagerFactory,this.extensionChecker,this.notebookProvider,this.globalState,this.env,this.cachedRemoteKernelValidator,this.kernelFinder,this.kernelProvider,this.extensions,e);this.disposables.push(t),this.serverFinderMapping.set(e.serverId,t),t.activate().then(h.noop,h.noop)}}urisRemoved(e){e.forEach((e=>{const t=this.serverFinderMapping.get(e.serverId);t&&t.dispose(),this.serverFinderMapping.delete(e.serverId)}))}dispose(){this.serverFinderMapping.forEach((e=>e.dispose()))}}class C{constructor(e,t,n,r,i,o,s,a,c,l,u){this.jupyterSessionManagerFactory=e,this.extensionChecker=t,this.notebookProvider=n,this.serverUriStorage=r,this.globalState=i,this.env=o,this.cachedRemoteKernelValidator=s,this.kernelFinder=a,this.disposables=c,this.kernelProvider=l,this.extensions=u}async activate(){this.disposables.push(this.serverUriStorage.onDidChangeUri((()=>{this.updateRemoteKernelFinder().then(h.noop,h.noop)}))),this.updateRemoteKernelFinder().then(h.noop,h.noop)}async updateRemoteKernelFinder(){if(this.serverUriStorage.isLocalLaunch)return this._activeServerFinder?.finder.dispose(),void(this._activeServerFinder=void 0);const e=await this.serverUriStorage.getRemoteUri();if(!e||!e.isValidated)return this._activeServerFinder?.finder.dispose(),void(this._activeServerFinder=void 0);if(this._activeServerFinder?.entry.serverId===e.serverId)return;this._activeServerFinder?.finder.dispose();const t=new g.RemoteKernelFinder("currentremote",y.DataScience.remoteKernelFinderDisplayName,v.RemoteKernelSpecsCacheKey,this.jupyterSessionManagerFactory,this.extensionChecker,this.notebookProvider,this.globalState,this.env,this.cachedRemoteKernelValidator,this.kernelFinder,this.kernelProvider,this.extensions,e);this._activeServerFinder={entry:e,finder:t},t.activate().then(h.noop,h.noop)}dispose(){this._activeServerFinder?.finder.dispose()}}let S=class{constructor(e,t,n,r,i,o,s,a,c,l,u,d){this.jupyterSessionManagerFactory=e,this.extensionChecker=t,this.notebookProvider=n,this.serverUriStorage=r,this.globalState=i,this.env=o,this.cachedRemoteKernelValidator=s,this.kernelFinder=a,this.disposables=c,this.kernelProvider=l,this.extensions=u,this.featuresManager=d,this._localDisposables=[],this._strategy=this.getStrategy(),this.disposables.push(this);const p=e=>{this._strategy?.dispose(),this._localDisposables.forEach((e=>e.dispose())),this._localDisposables=[],this._strategy=this.getStrategy(),e||this._strategy.activate().then(h.noop,h.noop)};this.disposables.push(this.featuresManager.onDidChangeFeatures((()=>p(!1)))),p(!0)}dispose(){this._strategy?.dispose(),this._localDisposables.forEach((e=>e.dispose()))}getStrategy(){return"Insiders"===this.featuresManager.features.kernelPickerType?new w(this.jupyterSessionManagerFactory,this.extensionChecker,this.notebookProvider,this.serverUriStorage,this.globalState,this.env,this.cachedRemoteKernelValidator,this.kernelFinder,this._localDisposables,this.kernelProvider,this.extensions):new C(this.jupyterSessionManagerFactory,this.extensionChecker,this.notebookProvider,this.serverUriStorage,this.globalState,this.env,this.cachedRemoteKernelValidator,this.kernelFinder,this._localDisposables,this.kernelProvider,this.extensions)}activate(){this._strategy.activate().then(h.noop,h.noop)}};S=o([(0,c.injectable)(),a(0,(0,c.inject)(d.IJupyterSessionManagerFactory)),a(1,(0,c.inject)(p.IPythonExtensionChecker)),a(2,(0,c.inject)(l.INotebookProvider)),a(3,(0,c.inject)(d.IJupyterServerUriStorage)),a(4,(0,c.inject)(u.IMemento)),a(4,(0,c.named)(u.GLOBAL_MEMENTO)),a(5,(0,c.inject)(f.IApplicationEnvironment)),a(6,(0,c.inject)(d.IJupyterRemoteCachedKernelValidator)),a(7,(0,c.inject)(l.IKernelFinder)),a(8,(0,c.inject)(u.IDisposableRegistry)),a(9,(0,c.inject)(l.IKernelProvider)),a(10,(0,c.inject)(u.IExtensions)),a(11,(0,c.inject)(u.IFeaturesManager))],S),t.RemoteKernelFinderController=S},86590:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CellOutputMimeTypeTracker=void 0;const o=n(86700),s=n(66828),a=n(10053),c=n(15925),l=n(20397),u=n(42080),d=n(86563),p=n(9959),h=n(9959);let f=class{get isTelemetryDisabled(){return(0,h.isTelemetryDisabled)(this.workspace)}constructor(e,t,n){this.vscNotebook=e,this.workspace=n,this.sentMimeTypes=new Set,this.disposables=[],t.push(this)}activate(){this.vscNotebook.onDidOpenNotebookDocument(this.onDidOpenCloseDocument,this,this.disposables),this.vscNotebook.onDidCloseNotebookDocument(this.onDidOpenCloseDocument,this,this.disposables),this.vscNotebook.onDidSaveNotebookDocument(this.onDidOpenCloseDocument,this,this.disposables),this.vscNotebook.onDidChangeNotebookCellExecutionState(this.onDidChangeNotebookCellExecutionState,this,this.disposables)}dispose(){(0,l.disposeAllDisposables)(this.disposables)}async onDidChangeNotebookCellExecutionState(e){(0,d.isJupyterNotebook)(e.cell.notebook)&&!this.isTelemetryDisabled&&this.checkCell(e.cell,"onExecution")}onDidOpenCloseDocument(e){(0,d.isJupyterNotebook)(e)&&!this.isTelemetryDisabled&&e.getCells().forEach((e=>this.checkCell(e,"onOpenCloseOrSave")))}checkCell(e,t){if(e.kind===s.NotebookCellKind.Markup)return;if("raw"===e.document.languageId)return;const n=e.notebook.notebookType===c.JupyterNotebookView?"notebook":"interactive";e.outputs.map((e=>e.items.map((e=>e.mime)))).flat().map((e=>this.sendTelemetry(e,t,n)))}sendTelemetry(e,t,n){const r=`${e}-${t}`;this.sentMimeTypes.has(r)||(this.sentMimeTypes.add(r),e=e.replace(/\//g,"_").replace(/\\/g,"_"),(0,p.sendTelemetryEvent)(p.Telemetry.CellOutputMimeType,void 0,{mimeType:e,when:t,resourceType:n}))}};f=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IVSCodeNotebook)),i(1,(0,o.inject)(u.IDisposableRegistry)),i(2,(0,o.inject)(a.IWorkspaceService))],f),t.CellOutputMimeTypeTracker=f},24319:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterConnection=void 0;const o=n(86700),s=n(42080),a=n(58681),c=n(42751),l=n(37853),u=n(46875),d=n(94433);let p=class{constructor(e,t,n,r){this.jupyterPickerRegistration=e,this.jupyterSessionManagerFactory=t,this.disposables=n,this.serverUriStorage=r,this.uriToJupyterServerUri=new Map,this.pendingTimeouts=[],n.push(this)}activate(){this.serverUriStorage.onDidChangeConnectionType((()=>this.clearTimeouts()),this,this.disposables)}dispose(){this.clearTimeouts()}clearTimeouts(){this.pendingTimeouts.forEach((e=>clearTimeout(e))),this.pendingTimeouts=[]}async createConnectionInfo(e){const t="uri"in e?e.uri:await this.getUriFromServerId(e.serverId);if(!t)throw new Error("Server Not found");return this.createConnectionInfoFromUri(t)}async validateRemoteUri(e){return this.validateRemoteConnection(await this.createConnectionInfoFromUri(e))}async getUriFromServerId(e){return(await this.serverUriStorage.getSavedUriList()).find((t=>t.serverId===e))?.uri}async createConnectionInfoFromUri(e){return await this.updateServerUri(e),(0,u.createRemoteConnectionInfo)(e,this.getServerUri.bind(this))}async validateRemoteConnection(e){let t;try{t=await this.jupyterSessionManagerFactory.create(e,!1),await Promise.all([t.getRunningKernels(),t.getKernelSpecs()])}finally{e.dispose(),t&&t.dispose().catch(a.noop)}}async updateServerUri(e){const t=(0,u.extractJupyterServerHandleAndId)(e);if(t)try{const n=await this.jupyterPickerRegistration.getJupyterServerUri(t.id,t.handle);if(this.uriToJupyterServerUri.set(e,n),n.expiration){const t=n.expiration.getTime()-Date.now();t>0&&t<6048e5&&this.pendingTimeouts.push(setTimeout((()=>this.updateServerUri(e).ignoreErrors()),t))}}catch(e){if(e instanceof l.BaseError)throw e;const n=await(0,u.computeServerId)((0,u.generateUriFromRemoteProvider)(t.id,t.handle));throw new c.RemoteJupyterServerUriProviderError(t.id,t.handle,e,n)}}getServerUri(e){const t=(0,u.extractJupyterServerHandleAndId)(e);if(t){const n=this.uriToJupyterServerUri.get(e);return n?{server:n,serverId:t.id}:void 0}}};p=r([(0,o.injectable)(),i(0,(0,o.inject)(d.IJupyterUriProviderRegistration)),i(1,(0,o.inject)(d.IJupyterSessionManagerFactory)),i(2,(0,o.inject)(s.IDisposableRegistry)),i(3,(0,o.inject)(d.IJupyterServerUriStorage))],p),t.JupyterConnection=p},24048:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterKernelService=void 0;const o=n(86700);n(8513);const s=n(11642);let a=class{async ensureKernelIsUsable(e,t,n,r,i){(0,s.traceVerbose)("Check if a kernel is usable")}};r([i(1,(0,s.logValue)("id")),i(2,(0,s.logValue)("disableUI")),i(3,(0,s.ignoreLogging)())],a.prototype,"ensureKernelIsUsable",null),a=r([(0,o.injectable)()],a),t.JupyterKernelService=a},47028:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterKernelSpec=void 0,t.JupyterKernelSpec=class{constructor(e,t,n,r){this.specFile=t,this.interpreterPath=n,this.isRegisteredByVSC=r,this.name=e.name,this.argv=e.argv,this.language=e.language,this.executable=e.argv&&e.argv.length>0?e.argv[0]:"",this.display_name=e.display_name,this.metadata=e.metadata,this.env=e.env,this.interrupt_mode=e.interrupt_mode}}},26585:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterRemoteCachedKernelValidator=void 0;const o=n(86700),s=n(11642),a=n(46875),c=n(94433);let l=class{constructor(e,t,n){this.liveKernelConnectionTracker=e,this.uriStorage=t,this.providerRegistration=n}async isValid(e){if(!this.liveKernelConnectionTracker.wasKernelUsed(e))return!1;const t=this.providerRegistration.getProviders(),n=(await this.uriStorage.getSavedUriList()).find((t=>t.serverId===e.serverId));if(!n)return!1;const r=(0,a.extractJupyterServerHandleAndId)(n.uri);if(!r)return!0;const i=(await t).find((e=>e.id===r.id));return i?!i.getHandles||(!!(await i.getHandles()).includes(r.handle)||((0,s.traceWarning)(`Hiding remote kernel ${e.id} as the remote Jupyter Server ${n.uri} is no longer available`),!1)):((0,s.traceWarning)(`Extension may have been uninstalled for provider ${r.id}, handle ${r.handle}`),!1)}};l=r([(0,o.injectable)(),i(0,(0,o.inject)(c.ILiveRemoteKernelConnectionUsageTracker)),i(1,(0,o.inject)(c.IJupyterServerUriStorage)),i(2,(0,o.inject)(c.IJupyterUriProviderRegistration))],l),t.JupyterRemoteCachedKernelValidator=l},54179:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterUriProviderRegistration=void 0;const c=n(86700),l=n(66828),u=n(15925),d=n(42080),p=n(85446),h=s(n(25251)),f=n(58681),g=n(55134),m=n(26105),y=n(46875),v="REGISTRATION_ID_EXTENSION_OWNER_MEMENTO_KEY";let b=class{constructor(e,t,n){this.extensions=e,this.globalMemento=n,this._onProvidersChanged=new l.EventEmitter,this.providers=new Map,this.providerExtensionMapping=new Map,this.onDidChangeProviders=this._onProvidersChanged.event,t.push(this._onProvidersChanged)}async getProviders(){return await this.checkOtherExtensions(),Promise.all([...this.providers.values()].map((e=>e[0])))}async getProvider(e){return await this.checkOtherExtensions(),this.providers.get(e)?.[0]}registerProvider(e){if(this.providers.has(e.id))throw new Error(`IJupyterUriProvider already exists with id ${e.id}`);{const t=[];this.providers.set(e.id,[this.createProvider(e,t),t])}return this._onProvidersChanged.fire(),{dispose:()=>{this.providers.get(e.id)?.[1].forEach((e=>e.dispose())),this.providers.delete(e.id),this._onProvidersChanged.fire()}}}async getJupyterServerUri(e,t){await this.checkOtherExtensions();const n=this.providers.get(e)?.[0];if(n){const r=await n;if(r.getHandles&&!(await r.getHandles()).includes(t)){const n=this.providerExtensionMapping.get(e),r=await(0,y.computeServerId)((0,y.generateUriFromRemoteProvider)(e,t));throw new g.InvalidRemoteJupyterServerUriHandleError(e,t,n,r)}return r.getServerUri(t)}throw new Error(h.DataScience.unknownServerUri)}checkOtherExtensions(){return this.loadedOtherExtensionsPromise||(this.loadedOtherExtensionsPromise=this.loadOtherExtensions()),this.loadedOtherExtensionsPromise}async loadOtherExtensions(){this.loadExistingProviderExtensionMapping();const e=new Set;this.globalMemento.get(v,[]).forEach((t=>e.add(t.extensionId)));const t=this.extensions.all.filter((t=>t.packageJSON?.contributes?.pythonRemoteServerProvider||e.has(t.id))).map((e=>e.isActive?Promise.resolve():e.activate().then(f.noop,f.noop)));await Promise.all(t)}async createProvider(e,t){const n=e.id.startsWith("_builtin")?u.JVSC_EXTENSION_ID:(await this.extensions.determineExtensionFromCallStack()).extensionId;return this.updateRegistrationInfo(e.id,n).catch(f.noop),new m.JupyterUriProviderWrapper(e,n,t)}async updateRegistrationInfo(e,t){this.loadExistingProviderExtensionMapping(),this.providerExtensionMapping.set(e,t);const n=[];this.providerExtensionMapping.forEach(((e,t)=>{n.push({extensionId:t,providerId:e})})),await this.globalMemento.update(v,n)}loadExistingProviderExtensionMapping(){this.globalMemento.get(v,[]).forEach((e=>this.providerExtensionMapping.set(e.providerId,e.extensionId)))}};o([(0,p.swallowExceptions)()],b.prototype,"updateRegistrationInfo",null),b=o([(0,c.injectable)(),a(0,(0,c.inject)(d.IExtensions)),a(1,(0,c.inject)(d.IDisposableRegistry)),a(2,(0,c.inject)(d.IMemento)),a(2,(0,c.named)(d.GLOBAL_MEMENTO))],b),t.JupyterUriProviderRegistration=b},26105:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterUriProviderWrapper=void 0;const s=o(n(66828)),a=o(n(25251));t.JupyterUriProviderWrapper=class{constructor(e,t,n){if(this.provider=e,this.packageName=t,e.onDidChangeHandles){const t=new s.EventEmitter;this.onDidChangeHandles=t.event.bind(this),n.push(t),n.push(e.onDidChangeHandles((()=>{t.fire()})))}e.getHandles&&(this.getHandles=async()=>e.getHandles()),e.removeHandle&&(this.removeHandle=t=>e.removeHandle(t))}get id(){return this.provider.id}get displayName(){return this.provider.displayName}get detail(){return this.provider.detail}async getQuickPickEntryItems(){return this.provider.getQuickPickEntryItems?(await this.provider.getQuickPickEntryItems()).map((e=>({...e,description:a.DataScience.uriProviderDescriptionFormat(e.description||"",this.packageName),original:e}))):[]}async handleQuickPick(e,t){if(this.provider.handleQuickPick)return e.original?this.provider.handleQuickPick(e.original,t):this.provider.handleQuickPick(e,t)}getServerUri(e){return this.provider.getServerUri(e)}}},46875:function(e,t,n){"use strict";var r=n(34155),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.extractJupyterServerHandleAndId=t.generateUriFromRemoteProvider=t.computeServerId=t.createRemoteConnectionInfo=t.handleExpiredCertsError=t.handleSelfCertsError=t.expandWorkingDir=void 0,n(8513);const a=s(n(15948)),c=n(66828),l=n(58681),u=n(8714),d=n(35412),p=n(25251),h=n(9959),f=n(15925),g=n(46729),m=n(11642);t.expandWorkingDir=function(e,t,n,i){if(e)return i.createSystemVariables(t).resolve(e);if(t)return a.dirname((0,d.getFilePath)(t));const o=n.getWorkspaceFolder(void 0);return o?(0,d.getFilePath)(o.uri):r.cwd()},t.handleSelfCertsError=async function(e,t,n){const r=p.DataScience.jupyterSelfCertEnable,i=p.DataScience.jupyterSelfCertClose,o=await e.showErrorMessage(p.DataScience.jupyterSelfCertFail(n),{modal:!0},r,i);return o===r?((0,h.sendTelemetryEvent)(f.Telemetry.SelfCertsMessageEnabled),await t.updateSetting("allowUnauthorizedRemoteConnection",!0,void 0,c.ConfigurationTarget.Workspace),!0):(o===i&&(0,h.sendTelemetryEvent)(f.Telemetry.SelfCertsMessageClose),!1)},t.handleExpiredCertsError=async function(e,t,n){const r=p.DataScience.jupyterSelfCertEnable,i=p.DataScience.jupyterSelfCertClose,o=await e.showErrorMessage(p.DataScience.jupyterExpiredCertFail(n),{modal:!0},r,i);return o===r?((0,h.sendTelemetryEvent)(f.Telemetry.SelfCertsMessageEnabled),await t.updateSetting("allowUnauthorizedRemoteConnection",!0,void 0,c.ConfigurationTarget.Workspace),!0):(o===i&&(0,h.sendTelemetryEvent)(f.Telemetry.SelfCertsMessageClose),!1)},t.createRemoteConnectionInfo=function(e,t){let n;try{n=new URL(e)}catch(e){throw e}const r=t(e),i=r?.server,o=r?.serverId||"",s=i?i.baseUrl:`${n.protocol}//${n.host}${"/lab"===n.pathname?"":n.pathname}`,a=i?i.token:`${n.searchParams.get("token")}`;return{type:"jupyter",baseUrl:s,token:a,hostName:i?new URL(i.baseUrl).hostname:n.hostname,localLaunch:!1,displayName:i&&i.displayName?i.displayName:(0,u.getJupyterConnectionDisplayName)(a,s),disconnected:e=>({dispose:l.noop}),dispose:l.noop,rootDirectory:c.Uri.file(""),workingDirectory:i?.workingDirectory,getAuthHeader:i&&!o.startsWith("_builtin")?()=>i?.authorizationHeader:void 0,getWebsocketProtocols:i&&!o.startsWith("_builtin")?()=>i?.webSocketProtocols||[]:()=>[],url:e}},t.computeServerId=async function(e){return(0,g.computeHash)(e,"SHA-256")},t.generateUriFromRemoteProvider=function(e,t){return`${f.Identifiers.REMOTE_URI}?${f.Identifiers.REMOTE_URI_ID_PARAM}=${e}&${f.Identifiers.REMOTE_URI_HANDLE_PARAM}=${encodeURI(t)}`},t.extractJupyterServerHandleAndId=function(e){try{const t=new URL(e),n=t.searchParams.get(f.Identifiers.REMOTE_URI_ID_PARAM),r=t.searchParams.get(f.Identifiers.REMOTE_URI_HANDLE_PARAM);return n&&r?{handle:r,id:n}:void 0}catch(t){(0,m.traceError)("Failed to parse remote URI",e,t)}}},71225:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterCommandLineSelector=void 0;const o=n(86700),s=n(10053),a=n(25251),c=n(58681);let l=class{constructor(e,t,n){this.appShell=t,this.commandManager=n,e.onDidChangeConfiguration(this.onDidChangeConfiguration.bind(this))}async onDidChangeConfiguration(e){if(e.affectsConfiguration("jupyter.jupyterCommandLineArguments")){const e=a.DataScience.jupyterCommandLineReloadAnswer;await this.appShell.showInformationMessage(a.DataScience.jupyterCommandLineReloadQuestion,e)===e&&this.commandManager.executeCommand("workbench.action.reloadWindow").then(c.noop,c.noop)}}};l=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IWorkspaceService)),i(1,(0,o.inject)(s.IApplicationShell)),i(2,(0,o.inject)(s.ICommandManager))],l),t.JupyterCommandLineSelector=l},8714:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getJupyterConnectionDisplayName=void 0,t.getJupyterConnectionDisplayName=function(e,t){return`${t}${e.length>0?`?token=${e}`:""}`}},16242:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterExecutionBase=void 0;const a=o(n(52859)),c=s(n(71171)),l=n(66828),u=n(6491),d=n(11642),p=n(25251),h=n(84079),f=n(413),g=n(9959),m=n(46875),y=n(54990),v=n(95739),b=n(50689),w=["localhost","127.0.0.1","::1"];t.JupyterExecutionBase=class{constructor(e,t,n,r,i,o,s,a){this.interpreterService=e,this.disposableRegistry=t,this.workspace=n,this.configuration=r,this.notebookStarter=i,this.jupyterInterpreterService=o,this.notebookServerFactory=s,this.jupyterConnection=a,this.disposed=!1,this.disposableRegistry.push(this.interpreterService.onDidChangeInterpreter((()=>this.onSettingsChanged()))),this.disposableRegistry.push(this),n&&n.onDidChangeConfiguration((e=>{e.affectsConfiguration("python.dataScience",void 0)&&this.onSettingsChanged()}),this,this.disposableRegistry)}dispose(){return this.disposed=!0,Promise.resolve()}async refreshCommands(){await(this.jupyterInterpreterService?.refreshCommands())}async isNotebookSupported(e){return!!this.jupyterInterpreterService&&this.jupyterInterpreterService.isNotebookSupported(e)}async getNotebookError(){return this.jupyterInterpreterService?this.jupyterInterpreterService.getReasonForJupyterNotebookNotBeingSupported():p.DataScience.webNotSupported}async getUsableJupyterPython(e){return this.usablePythonInterpreter||this.disposed||!this.jupyterInterpreterService||(this.usablePythonInterpreter=await u.Cancellation.race((()=>this.jupyterInterpreterService.getSelectedInterpreter(e)),e)),this.usablePythonInterpreter}connectToNotebookServer(e,t){return u.Cancellation.race((async()=>{let n,r;(0,d.traceInfo)("Connecting to server");let i=1;const o=Math.max(1,this.configuration.getSettings(void 0).jupyterLaunchRetries);let s;for(;i<=o&&!this.disposed;){try{return r=await this.startOrConnect(e,t),!r.localLaunch&&w.includes(r.hostName.toLowerCase())&&(0,g.sendTelemetryEvent)(g.Telemetry.ConnectRemoteJupyterViaLocalHost),(0,d.traceVerbose)("Connecting to process server"),n=await this.notebookServerFactory.createNotebookServer(r),(0,d.traceVerbose)("Connection complete server"),n}catch(t){if(s=t,n&&((0,d.traceWarning)(`Killing server because of error ${t}`),await n.dispose()),!(t instanceof f.JupyterWaitForIdleError&&i<o)){if(r){if(this.disposed)throw t;throw e.localJupyter?((0,g.sendTelemetryEvent)(g.Telemetry.ConnectFailedJupyter,void 0,void 0,t),new v.LocalJupyterServerConnectionError(t)):((0,g.sendTelemetryEvent)(g.Telemetry.ConnectRemoteFailedJupyter,void 0,void 0,t),h.JupyterSelfCertsError.isSelfCertsError(t)?((0,g.sendTelemetryEvent)(g.Telemetry.ConnectRemoteSelfCertFailedJupyter),new h.JupyterSelfCertsError(r.baseUrl)):b.JupyterSelfCertsExpiredError.isSelfCertsExpiredError(t)?((0,g.sendTelemetryEvent)(g.Telemetry.ConnectRemoteExpiredCertFailedJupyter),new b.JupyterSelfCertsExpiredError(r.baseUrl)):new y.RemoteJupyterServerConnectionError(r.baseUrl,e.serverId,t))}throw t}(0,d.traceInfo)("Retry because of wait for idle problem."),r?.dispose(),i+=1}throw s}throw new Error("Max number of attempts reached")}),t)}getServer(e){return Promise.resolve(void 0)}async startOrConnect(e,t){if(e.localJupyter){(0,d.traceInfo)("Launching server");const n=this.configuration.getSettings(e.resource),r=n.useDefaultConfigForJupyter,i=await this.workspace.computeWorkingDirectory(e.resource),o=(0,m.expandWorkingDir)(i,this.workspace.rootFolder?a.joinPath(this.workspace.rootFolder,`${(0,c.default)()}.txt`):void 0,this.workspace,n);return this.startNotebookServer(e.resource,r,this.configuration.getSettings(void 0).jupyterCommandLineArguments,l.Uri.file(o),t)}return this.jupyterConnection.createConnectionInfo({serverId:e.serverId})}async startNotebookServer(e,t,n,r,i){if(!this.notebookStarter)throw new Error("Notebook Starter cannot be undefined");return this.notebookStarter.start(e,t,n,r,i)}onSettingsChanged(){this.usablePythonInterpreter=void 0}}},41090:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterNotebookProvider=void 0;const o=n(86700),s=n(94062),a=n(6491),c=n(94433);let l=class{constructor(e){this.serverProvider=e}async connect(e){const{connection:t}=await this.serverProvider.getOrCreateServer(e);return t}async createNotebook(e){const t=e.kernelConnection,n=(0,s.isLocalConnection)(t)?{ui:e.ui,resource:e.resource,token:e.token,localJupyter:!0}:{ui:e.ui,resource:e.resource,token:e.token,localJupyter:!1,serverId:t.serverId},r=await this.serverProvider.getOrCreateServer(n);return a.Cancellation.throwIfCanceled(e.token),r.createNotebook(e.resource,e.kernelConnection,e.token,e.ui,e.creator)}};l=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IJupyterServerProvider))],l),t.JupyterNotebookProvider=l},2219:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterPasswordConnect=void 0;const s=n(86700),a=n(66828),c=n(10053),l=n(42080),u=n(25251),d=n(19450),p=n(11642),h=n(9959),f=n(94433),g=n(43138);let m=r=class{constructor(e,t,n,r,i,o,s,a){this.appShell=e,this.multiStepFactory=t,this.asyncDisposableRegistry=n,this.configService=r,this.agentCreator=i,this.requestCreator=o,this.serverUriStorage=s,this.disposables=a,this.savedConnectInfo=new Map,this.serverUriStorage.onDidRemoveUris(this.onDidRemoveUris,this,this.disposables)}static get prompt(){return r._prompt?.promise}getPasswordConnectionInfo(e){if(r._prompt=void 0,!e||e.length<1)return Promise.resolve(void 0);const t=y(e);let n=this.savedConnectInfo.get(t);if(!n){const e=r._prompt=(0,g.createDeferred)();n=this.getNonCachedPasswordConnectionInfo(t).then((e=>((0,p.traceWarning)(`Password for ${t} was invalid.`),e||this.savedConnectInfo.delete(t),e))),n.finally((()=>{e.resolve(),r._prompt===e&&(r._prompt=void 0)})),this.savedConnectInfo.set(t,n)}return n}getSessionCookieString(e,t,n){return`_xsrf=${e}; ${t}=${n}`}async getNonCachedPasswordConnectionInfo(e){return await this.isJupyterHub(e)?this.getJupyterHubConnectionInfo(e):this.getJupyterConnectionInfo(e)}async getJupyterHubConnectionInfo(e){const t=await this.getUserNameAndPassword();if(t.username||t.password){return await this.getJupyterHubConnectionInfoFromLogin(e,t.username,t.password)||this.getJupyterHubConnectionInfoFromApi(e,t.username,t.password)}}async getJupyterHubConnectionInfoFromLogin(e,t,n){const r=new URL(e),i=`${r.protocol}//${r.host}`,o=new URLSearchParams;o.append("username",t||""),o.append("password",n||"");let s=await this.makeRequest(`${i}/hub/login?next=`,{method:"POST",headers:{Connection:"keep-alive",Referer:`${i}/hub/login`,"content-type":"application/x-www-form-urlencoded;charset=UTF-8"},body:o.toString(),redirect:"manual"});if(s&&302===s.status){const e=[...this.getCookies(s).entries()].reduce(((e,t)=>`${e};${t[0]}=${t[1]}`),"");if(s=await this.makeRequest(`${i}/hub/api/users/${t}/tokens`,{method:"POST",headers:{Connection:"keep-alive",Cookie:e,Referer:`${i}/hub/login`}}),s.ok&&200===s.status){const n=await s.json();if(n&&n.token&&n.id)return await this.makeRequest(`${i}/hub/api/users/${t}/server`,{method:"POST",headers:{Connection:"keep-alive",Cookie:e,Referer:`${i}/hub/login`}}),this.asyncDisposableRegistry.push({dispose:async()=>{this.makeRequest(`${i}/hub/api/users/${t}/tokens/${n.id}`,{method:"DELETE",headers:{Connection:"keep-alive",Cookie:e,Referer:`${i}/hub/login`}}).ignoreErrors()}}),{requestHeaders:{},remappedBaseUrl:`${i}/user/${t}`,remappedToken:n.token}}}}async getJupyterHubConnectionInfoFromApi(e,t,n){const r=new URL(e),i=`${r.protocol}//${r.host}`,o=await this.makeRequest(`${i}/hub/api/authorizations/token`,{method:"POST",headers:{Connection:"keep-alive","content-type":"application/json;charset=UTF-8"},body:`{ "username": "${t||""}", "password": "${n||""}"  }`,redirect:"manual"});if(o.ok&&200===o.status){const e=await o.json();if(e&&e.user&&e.user.server&&e.token)return{requestHeaders:{},remappedBaseUrl:`${i}${e.user.server}`,remappedToken:e.token}}}async getJupyterConnectionInfo(e){let t,n,r;if(!await this.needPassword(e))return{};{let i=await this.getUserPassword();if(!i)return{};if(t=await this.getXSRFToken(e,""),t){const o=await this.getSessionCookie(e,t,i);n=o.sessionCookieName,r=o.sessionCookieValue}else n="authservice_session",r=i,t=await this.getXSRFToken(e,`${n}=${r}`);i=void 0}if(t&&n&&r)return(0,h.sendTelemetryEvent)(h.Telemetry.GetPasswordSuccess),{requestHeaders:{Cookie:this.getSessionCookieString(t,n,r),"X-XSRFToken":t}};(0,h.sendTelemetryEvent)(h.Telemetry.GetPasswordFailure)}addAllowUnauthorized(e,t,n){if(e.startsWith("https")&&t&&this.agentCreator){const e=this.agentCreator.createHttpRequestAgent();return{...n,agent:e}}return n}async getUserNameAndPassword(){const e=this.multiStepFactory.create(),t={username:"",password:""};return await e.run(this.getUserNameMultiStep.bind(this),t),t}async getUserNameMultiStep(e,t){if(t.username=await e.showInputBox({title:u.DataScience.jupyterSelectUserAndPasswordTitle,prompt:u.DataScience.jupyterSelectUserPrompt,validate:this.validateUserNameOrPassword,value:""}),t.username)return this.getPasswordMultiStep.bind(this)}async validateUserNameOrPassword(e){}async getPasswordMultiStep(e,t){t.password=await e.showInputBox({title:u.DataScience.jupyterSelectUserAndPasswordTitle,prompt:u.DataScience.jupyterSelectPasswordPrompt,validate:this.validateUserNameOrPassword,value:"",password:!0})}async getUserPassword(){return this.appShell.showInputBox({prompt:u.DataScience.jupyterSelectPasswordPrompt,ignoreFocusOut:!0,password:!0})}async getXSRFToken(e,t){let n,r,i=`${e}login?`;""!=t?(i=`${e}tree`,r={Connection:"keep-alive",Cookie:t}):r={Connection:"keep-alive"};const o=await this.makeRequest(i,{method:"get",redirect:"manual",headers:r});if(void 0!==o&&o.ok){const e=this.getCookies(o);e.has("_xsrf")&&(n=e.get("_xsrf")?.split(";")[0])}return n}async needPassword(e){return 200!==(await this.makeRequest(`${e}tree?`,{method:"get",redirect:"manual",headers:{Connection:"keep-alive"}})).status}async makeRequest(e,t){const n=this.configService.getSettings(void 0).allowUnauthorizedRemoteConnection;try{return await this.requestCreator.getFetchMethod()(e,this.addAllowUnauthorized(e,!!n,t))}catch(n){if(n.message.indexOf("reason: self signed certificate")>=0){const r=u.DataScience.jupyterSelfCertEnable,i=u.DataScience.jupyterSelfCertClose,o=await this.appShell.showErrorMessage(u.DataScience.jupyterSelfCertFail(n.message),{modal:!0},r,i);if(o===r)return(0,h.sendTelemetryEvent)(h.Telemetry.SelfCertsMessageEnabled),await this.configService.updateSetting("allowUnauthorizedRemoteConnection",!0,void 0,a.ConfigurationTarget.Workspace),this.requestCreator.getFetchMethod()(e,this.addAllowUnauthorized(e,!0,t));o===i&&(0,h.sendTelemetryEvent)(h.Telemetry.SelfCertsMessageClose)}throw n}}async isJupyterHub(e){return!!e.toLowerCase().includes("/user/")||200===(await this.makeRequest(`${e}hub/api`,{method:"get",redirect:"manual",headers:{Connection:"keep-alive"}})).status}async getSessionCookie(e,t,n){let r,i;const o=new URLSearchParams;o.append("_xsrf",t),o.append("password",n);const s=await this.makeRequest(`${e}login?`,{method:"post",headers:{Cookie:`_xsrf=${t}`,Connection:"keep-alive","content-type":"application/x-www-form-urlencoded;charset=UTF-8"},body:o.toString(),redirect:"manual"});if(302===s.status){const e=this.getCookies(s);e.size>0&&(r=e.entries().next().value[0],i=e.entries().next().value[1])}return{sessionCookieName:r,sessionCookieValue:i}}getCookies(e){const t=new Map,n=(e.headers.raw?e.headers.raw():e.headers)["set-cookie"];return n&&n.forEach((e=>{const n=e.substring(0,e.indexOf("=")),r=e.substring(e.indexOf("=")+1);t.set(n,r)})),t}onDidRemoveUris(e){e.forEach((e=>{const t=y(e.uri);this.savedConnectInfo.delete(t)}))}};function y(e){let t=e;return"/"!==t[t.length-1]&&(t=`${t}/`),t}m.isPromptingForPassword=!1,m=r=i([(0,s.injectable)(),o(0,(0,s.inject)(c.IApplicationShell)),o(1,(0,s.inject)(d.IMultiStepInputFactory)),o(2,(0,s.inject)(l.IAsyncDisposableRegistry)),o(3,(0,s.inject)(l.IConfigurationService)),o(4,(0,s.inject)(f.IJupyterRequestAgentCreator)),o(4,(0,s.optional)()),o(5,(0,s.inject)(f.IJupyterRequestCreator)),o(6,(0,s.inject)(f.IJupyterServerUriStorage)),o(7,(0,s.inject)(l.IDisposableRegistry))],m),t.JupyterPasswordConnect=m},72964:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HostJupyterExecution=void 0,n(8513);const s=o(n(71171)),a=n(16242),c=n(27660),l=n(86700),u=n(10053),d=n(11642),p=n(42080),h=n(85446),f=n(84570),g=n(94433),m=n(89727),y=n(24319);let v=class extends a.JupyterExecutionBase{constructor(e,t,n,r,i,o,a,l,u,d){super(e,t,r,i,o,a,l,d),this.serverUriStorage=u,this._disposed=!1,this._id=(0,s.default)(),this.serverCache=new c.ServerCache,this.serverUriStorage.onDidChangeUri((()=>{this.serverCache.clearCache()}),this,t),n.push(this)}clearCache(){this.serverCache.clearCache()}async dispose(){(0,d.traceInfo)(`Disposing HostJupyterExecution ${this._id}`),this._disposed||(this._disposed=!0,(0,d.traceVerbose)(`Disposing super HostJupyterExecution ${this._id}`),await super.dispose(),this.serverCache&&((0,d.traceVerbose)(`Cleaning up server cache ${this._id}`),await this.serverCache.dispose())),(0,d.traceVerbose)(`Finished disposing HostJupyterExecution  ${this._id}`)}async hostConnectToNotebookServer(e,t){if(!this._disposed)return super.connectToNotebookServer(await this.serverCache.generateDefaultOptions(e),t);throw new Error("Notebook server is disposed")}async connectToNotebookServer(e,t){if(!this._disposed)return this.serverCache.getOrCreate(this.hostConnectToNotebookServer.bind(this),e,t);throw new Error("Notebook server is disposed")}async getServer(e){if(!this._disposed)return this.serverCache.get(e)}};r([(0,h.testOnlyMethod)()],v.prototype,"clearCache",null),v=r([(0,l.injectable)(),i(0,(0,l.inject)(f.IInterpreterService)),i(1,(0,l.inject)(p.IDisposableRegistry)),i(2,(0,l.inject)(p.IAsyncDisposableRegistry)),i(3,(0,l.inject)(u.IWorkspaceService)),i(4,(0,l.inject)(p.IConfigurationService)),i(5,(0,l.inject)(g.INotebookStarter)),i(5,(0,l.optional)()),i(6,(0,l.inject)(m.IJupyterSubCommandExecutionService)),i(6,(0,l.optional)()),i(7,(0,l.inject)(g.INotebookServerFactory)),i(8,(0,l.inject)(g.IJupyterServerUriStorage)),i(9,(0,l.inject)(y.JupyterConnection))],v),t.HostJupyterExecution=v},76498:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.HostJupyterServer=void 0,n(8513);const o=n(86700),s=n(10053),a=n(15925),c=n(11642),l=n(42080),u=n(43138),d=n(25251),p=n(65864),h=n(94062),f=n(58681),g=n(6491),m=n(35412),y=n(66828),v=n(54990);let b=class{constructor(e,t,n,r,i,o){this.asyncRegistry=e,this.workspaceService=t,this.jupyterOutputChannel=n,this.disposables=r,this.connection=i,this.sessionManager=o,this.sessions=new Set,this.disposed=!1,this.asyncRegistry.push(this),this.connectionInfoDisconnectHandler=this.connection.disconnected((e=>{try{this.serverExitCode=e,(0,c.traceError)(d.DataScience.jupyterServerCrashed(e)),this.shutdown().ignoreErrors()}catch{(0,f.noop)()}}))}async dispose(){this.disposed||(this.disposed=!0,(0,c.traceVerbose)("Disposing HostJupyterServer"),await this.shutdown(),(0,c.traceVerbose)("Finished disposing HostJupyterServer"))}get isDisposed(){return this.disposed}throwIfDisposedOrCancelled(e){if(this.isDisposed)throw new p.SessionDisposedError;g.Cancellation.throwIfCanceled(e)}async createNotebookInstance(e,t,n,r,i,o){this.throwIfDisposedOrCancelled(r);const s=(0,u.createDeferred)();this.trackDisposable(s.promise);const a=async()=>{this.throwIfDisposedOrCancelled(r);const s=(0,h.isLocalConnection)(n)?await this.workspaceService.computeWorkingDirectory(e):"";this.throwIfDisposedOrCancelled(r);const a=await t.startNew(e,n,y.Uri.file(s),i,r,o);return this.throwIfDisposedOrCancelled(r),(0,c.traceInfo)(`Started session for kernel ${n.kind}:${n.id}`),a};try{const e=await a();this.throwIfDisposedOrCancelled(r),e?s.resolve(e):s.reject(this.getDisposedError())}catch(e){s.reject(e)}return s.promise}async createNotebook(e,t,n,r,i){if(this.throwIfDisposedOrCancelled(n),(0,c.traceInfoIfCI)(`HostJupyterServer.createNotebook for ${(0,m.getDisplayPath)(e)} with ui.disableUI=${r.disableUI}, cancelToken.isCancellationRequested=${n.isCancellationRequested}`),!this.sessionManager||this.isDisposed)throw new p.SessionDisposedError;if(this.sessionManager&&!this.isDisposed&&("connectToLiveRemoteKernel"===t.kind||"startUsingRemoteKernelSpec"===t.kind))try{await Promise.all([this.sessionManager.getRunningKernels(),this.sessionManager.getKernelSpecs()])}catch(e){throw(0,c.traceError)("Failed to fetch running kernels from remote server, connection may be outdated or remote server may be unreachable",e),new v.RemoteJupyterServerConnectionError(t.baseUrl,t.serverId,e)}const o=await this.createNotebookInstance(e,this.sessionManager,t,n,r,i);this.throwIfDisposedOrCancelled(n);const s=this.connection?.baseUrl||"";return this.logRemoteOutput(d.DataScience.createdNewNotebook(s)),o}async shutdown(){try{this.connectionInfoDisconnectHandler&&(this.connectionInfoDisconnectHandler.dispose(),this.connectionInfoDisconnectHandler=void 0),(0,c.traceVerbose)("Shutting down notebooks");const e=await Promise.all([...this.sessions.values()]);await Promise.all(e.map((e=>e.dispose()))),(0,c.traceVerbose)("Shut down session manager : "+(this.sessionManager?"existing":"undefined")),this.sessionManager&&1e4===await Promise.race([(0,u.sleep)(1e4),this.sessionManager.dispose()])&&(0,c.traceError)("Session shutdown timed out."),this.connection&&this.connection&&((0,c.traceVerbose)("Shutdown server - dispose conn info"),this.connection.dispose())}catch(e){(0,c.traceError)("Error during shutdown: ",e)}}getConnectionInfo(){if(!this.connection)throw new Error("Not connected");return{...this.connection,dispose:f.noop}}getDisposedError(){return this.serverExitCode?new Error(d.DataScience.jupyterServerCrashed(this.serverExitCode)):new p.SessionDisposedError}trackDisposable(e){e.then((t=>{t.onDidDispose((()=>this.sessions.delete(e)),this,this.disposables)})).catch((()=>this.sessions.delete(e))),this.sessions.add(e)}logRemoteOutput(e){this.connection?.localLaunch||this.jupyterOutputChannel.appendLine(e)}};b=r([i(0,(0,o.inject)(l.IAsyncDisposableRegistry)),i(1,(0,o.inject)(s.IWorkspaceService)),i(2,(0,o.inject)(l.IOutputChannel)),i(2,(0,o.named)(a.STANDARD_OUTPUT_CHANNEL)),i(3,(0,o.inject)(l.IDisposableRegistry))],b),t.HostJupyterServer=b},89847:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.HostJupyterServerFactory=void 0;const o=n(86700),s=n(10053),a=n(15925),c=n(42080),l=n(25251),u=n(11642),d=n(94433),p=n(76498);let h=class{constructor(e,t,n,r,i){this.asyncRegistry=e,this.sessionManagerFactory=t,this.workspaceService=n,this.jupyterOutputChannel=r,this.disposables=i}async createNotebookServer(e){(0,u.traceInfo)(`Connecting ${e.localLaunch?"local":"remote"} server kernel ${e.baseUrl}`),e.localLaunch||this.jupyterOutputChannel.appendLine(l.DataScience.connectingToJupyterUri(e.baseUrl));const t=await this.sessionManagerFactory.create(e);return new p.HostJupyterServer(this.asyncRegistry,this.workspaceService,this.jupyterOutputChannel,this.disposables,e,t)}};h=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IAsyncDisposableRegistry)),i(1,(0,o.inject)(d.IJupyterSessionManagerFactory)),i(2,(0,o.inject)(s.IWorkspaceService)),i(3,(0,o.inject)(c.IOutputChannel)),i(3,(0,o.named)(a.STANDARD_OUTPUT_CHANNEL)),i(4,(0,o.inject)(c.IDisposableRegistry))],h),t.HostJupyterServerFactory=h},27660:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerCache=void 0,n(8513);const r=n(11642),i=n(43138);t.ServerCache=class{constructor(){this.cache=new Map,this.disposed=!1}clearCache(){this.cache.clear()}async getOrCreate(e,t,n){const r=await this.generateDefaultOptions(t),i=this.generateKey(r);let o;return o=this.cache.get(i),o||(o={promise:e(t,n),options:r,resolved:!1},this.cache.set(i,o)),o.promise.then((e=>{const t=e.dispose.bind(e);return e.dispose=()=>(this.cache.delete(i),t()),o&&(o.resolved=!0),e})).catch((e=>{throw this.cache.delete(i),e}))}async get(e){const t=await this.generateDefaultOptions(e),n=this.generateKey(t);if(this.cache.has(n))return this.cache.get(n)?.promise}async dispose(){if(!this.disposed){this.disposed=!0;const e=[...this.cache.values()];this.cache.clear(),await Promise.all(e.map((async e=>{try{const t=await Promise.race([e.promise,(0,i.sleep)(1e3)]);"number"!=typeof t?await t.dispose():(0,r.traceVerbose)("ServerCache Dispose, no server")}catch(e){(0,r.traceError)("Dispose error in ServerCache: ",e)}})))}}async generateDefaultOptions(e){return e.localJupyter?{resource:e?.resource,ui:e.ui,localJupyter:!0}:{serverId:e.serverId,resource:e?.resource,ui:e.ui,localJupyter:!1}}generateKey(e){return`serverId=${e.localJupyter?"":e.serverId};local=${e.localJupyter};`}}},89517:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookProvider=void 0;const o=n(86700),s=n(77886),a=n(94062),c=n(6491),l=n(88960),u=n(99216),d=n(94433),p=n(79515);let h=class{constructor(e,t,n,r){this.rawNotebookProvider=e,this.jupyterNotebookProvider=t,this.extensionChecker=n,this.uriStorage=r,this.startupUi=new l.DisplayOptions(!0)}async connect(e){e.ui.disableUI||(this.startupUi.disableUI=!1);const t=e.ui.onDidChangeDisableUI((()=>{e.ui.disableUI||(this.startupUi.disableUI=!1,t.dispose())}));if(e.ui=this.startupUi,this.rawNotebookProvider?.isSupported&&e.localJupyter)throw new Error("Connect method should not be invoked for local Connections when Raw is supported");if(this.extensionChecker.isPythonExtensionInstalled||!this.uriStorage.isLocalLaunch)return this.jupyterNotebookProvider.connect(e).finally((()=>t.dispose()));throw t.dispose(),this.startupUi.disableUI||await this.extensionChecker.showPythonExtensionInstallRequiredPrompt(),new p.PythonExtensionNotInstalledError}async create(e){const t=e.kernelConnection,n=(0,a.isLocalConnection)(t),r=this.rawNotebookProvider?.isSupported&&n;if(!r){const r=n?{resource:e.resource,token:e.token,ui:e.ui,localJupyter:!0}:{resource:e.resource,token:e.token,ui:e.ui,localJupyter:!1,serverId:t.serverId};await this.jupyterNotebookProvider.connect(r)}return c.Cancellation.throwIfCanceled(e.token),r?this.rawNotebookProvider.createNotebook(e.resource,e.kernelConnection,e.ui,e.token):this.jupyterNotebookProvider.createNotebook(e)}};h=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IRawNotebookProvider)),i(0,(0,o.optional)()),i(1,(0,o.inject)(d.IJupyterNotebookProvider)),i(2,(0,o.inject)(s.IPythonExtensionChecker)),i(3,(0,o.inject)(d.IJupyterServerUriStorage))],h),t.NotebookProvider=h},25153:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookServerProvider=void 0;const o=n(86700),s=n(20397),a=n(11642),c=n(42080),l=n(85446),u=n(25251),d=n(84570),p=n(41779),h=n(72584),f=n(88960),g=n(94433),m=n(4169),y=n(35412),v=n(6491),b="LocalJupyterSererCacheKey";let w=class{constructor(e,t,n,r){this.jupyterExecution=e,this.interpreterService=t,this.disposables=r,this.serverPromise=new Map,this.ui=new f.DisplayOptions(!0),n.onDidChangeUri((()=>{const e=this.serverPromise.get("local");this.serverPromise.clear(),e&&this.serverPromise.set(b,e)}),this,this.disposables)}clearCache(){this.serverPromise.clear()}async getOrCreateServer(e){const t=this.getNotebookServerOptions(e);if(e.localJupyter&&this.jupyterExecution){const e=await this.jupyterExecution.getServer(t);if(e)return e}return this.createServer(e)}async createServer(e){e.ui.disableUI||(this.ui.disableUI=!1),e.ui.onDidChangeDisableUI((()=>this.ui.disableUI=e.ui.disableUI),this,this.disposables);const t=e.localJupyter?b:e.serverId;this.serverPromise.has(t)||this.serverPromise.set(t,this.startServer(e));try{const n=await this.serverPromise.get(t);return!n&&e.token?.isCancellationRequested&&this.serverPromise.delete(t),n}catch(e){throw this.serverPromise.delete(t),e}}async startServer(e){const t=this.jupyterExecution;if(!t)throw new m.NotSupportedInWebError;const n=this.getNotebookServerOptions(e);(0,a.traceInfo)("Checking for server existence.");const r=[];let i;const o=async()=>{this.ui.disableUI||i||(i=n.localJupyter?h.KernelProgressReporter.createProgressReporter(e.resource,u.DataScience.startingJupyter):h.KernelProgressReporter.createProgressReporter(e.resource,u.DataScience.connectingToJupyter),r.push(i))};this.ui.disableUI&&this.ui.onDidChangeDisableUI(o,this,r);try{if(await o(),(0,a.traceVerbose)("Checking for server usability."),!await this.checkUsable(n))throw(0,a.traceVerbose)("Server not usable (should ask for install now)"),new p.JupyterInstallError(u.DataScience.jupyterNotSupported(await t.getNotebookError()));(0,a.traceVerbose)("Starting notebook server.");const i=await t.connectToNotebookServer(n,e.token);return(0,a.traceInfo)("Server started."),i}catch(n){if((0,s.disposeAllDisposables)(r),e.token?.isCancellationRequested&&(0,v.isCancellationError)(n))throw n;throw await t.refreshCommands(),n}finally{(0,s.disposeAllDisposables)(r)}}async checkUsable(e){try{return!e.localJupyter||!this.jupyterExecution||!!await this.jupyterExecution.getUsableJupyterPython()}catch(e){const t=await this.interpreterService.getActiveInterpreter(void 0);if(t){const n=t.displayName?t.displayName:(0,y.getFilePath)(t.uri);throw new Error(u.DataScience.jupyterNotSupportedBecauseOfEnvironment(n,e.toString))}throw new p.JupyterInstallError(u.DataScience.jupyterNotSupported(this.jupyterExecution?await this.jupyterExecution.getNotebookError():"Error"))}}getNotebookServerOptions(e){return e.localJupyter?{resource:e.resource,ui:this.ui,localJupyter:!0}:{serverId:e.serverId,resource:e.resource,ui:this.ui,localJupyter:!1}}};r([(0,l.testOnlyMethod)()],w.prototype,"clearCache",null),w=r([(0,o.injectable)(),i(0,(0,o.inject)(g.IJupyterExecution)),i(0,(0,o.optional)()),i(1,(0,o.inject)(d.IInterpreterService)),i(2,(0,o.inject)(g.IJupyterServerUriStorage)),i(3,(0,o.inject)(c.IDisposableRegistry))],w),t.NotebookServerProvider=w},10651:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterServerUriStorage=t.currentServerHashKey=t.mementoKeyToIndicateIfConnectingToLocalKernelsOnly=void 0;const o=n(86700),s=n(66828),a=n(10053),c=n(15925),l=n(35412),u=n(42080),d=n(11642),p=n(46875),h=n(94433);t.mementoKeyToIndicateIfConnectingToLocalKernelsOnly="connectToLocalKernelsOnly",t.currentServerHashKey="currentServerHash";let f=class{get onDidChangeUri(){return this._onDidChangeUri.event}get onDidRemoveUris(){return this._onDidRemoveUris.event}get onDidAddUri(){return this._onDidAddUri.event}get currentServerId(){return this._currentServerId}get onDidChangeConnectionType(){return this._onDidChangeUri.event}get isLocalLaunch(){return this._localOnly}constructor(e,n,r,i,o,a,c,l){this.workspaceService=e,this.crypto=n,this.encryptedStorage=r,this.appEnv=i,this.globalMemento=o,this.isWebExtension=a,this.configService=c,this.jupyterPickerRegistration=l,this._localOnly=!1,this._onDidChangeUri=new s.EventEmitter,this._onDidRemoveUris=new s.EventEmitter,this._onDidAddUri=new s.EventEmitter,(0,d.traceInfoIfCI)(`JupyterServerUriStorage: isWebExtension: ${a}`),(0,d.traceInfoIfCI)(`Global memento: ${this.globalMemento.get(t.mementoKeyToIndicateIfConnectingToLocalKernelsOnly,!0)}`),this._localOnly=!a&&this.globalMemento.get(t.mementoKeyToIndicateIfConnectingToLocalKernelsOnly,!0),this._currentServerId=this.globalMemento.get(t.currentServerHashKey,void 0),this.getUri().ignoreErrors()}async addServerToUriList(e,t){const n=(await this.getSavedUriList()).find((t=>t.serverId===e));if(!n)throw new Error(`Uri not found for Server Id ${e}`);await this.addToUriList(n.uri,t,n.displayName||"")}async addToUriList(e,t,n){const r=await this.getSavedUriList(),i=await(0,p.computeServerId)(e),o=r.find((e=>e.serverId===i));o&&o.displayName&&(n=o.displayName);const s=r.filter(((t,n)=>t.uri!==e&&n<c.Settings.JupyterServerUriListMax-1)),a={uri:e,time:t,serverId:i,displayName:n||e,isValidated:!0};if(s.push(a),this.currentUriPromise){const t=await this.currentUriPromise;t&&t.uri===e&&(this.currentUriPromise=Promise.resolve(a))}return this._onDidAddUri.fire(a),this.updateMemento(s)}async removeUri(e){const t=await this.getUri(),n=await this.getSavedUriList(),r=n.filter((t=>t.uri!==e));await this.updateMemento(r),t?.uri===e&&await this.setUriToLocal();const i=n.find((t=>t.uri===e));i&&this._onDidRemoveUris.fire([i])}async updateMemento(e){const t=e.sort(((e,t)=>t.time-e.time)),n=t.map(((e,t)=>({index:t,time:e.time})));this.lastSavedList=Promise.resolve(t),await this.globalMemento.update(c.Settings.JupyterServerUriList,n);const r=t.map((e=>`${e.uri}${c.Settings.JupyterServerRemoteLaunchNameSeparator}${e.displayName&&e.displayName!==e.uri?e.displayName:c.Settings.JupyterServerRemoteLaunchUriEqualsDisplayName}`)).join(c.Settings.JupyterServerRemoteLaunchUriSeparator);return this.encryptedStorage.store(c.Settings.JupyterServerRemoteLaunchService,c.Settings.JupyterServerRemoteLaunchUriListKey,r)}async getSavedUriList(){return this.lastSavedList||(this.lastSavedList=(async()=>{const e=this.globalMemento.get(c.Settings.JupyterServerUriList);if(e&&e.length>0){const t=await this.encryptedStorage.retrieve(c.Settings.JupyterServerRemoteLaunchService,c.Settings.JupyterServerRemoteLaunchUriListKey);if(t){const n=t.split(c.Settings.JupyterServerRemoteLaunchUriSeparator),r=await Promise.all(n.slice(0,Math.min(n.length,e.length)).map((async(t,n)=>{const r=t.split(c.Settings.JupyterServerRemoteLaunchNameSeparator),i=r[0],o=await(0,p.computeServerId)(i),s=r[1]!==c.Settings.JupyterServerRemoteLaunchUriEqualsDisplayName&&r[1]?r[1]:i,a={time:e[n].time,serverId:o,displayName:s,uri:i,isValidated:!0};if(i===c.Settings.JupyterServerLocalLaunch)return a;try{const e=(0,p.extractJupyterServerHandleAndId)(i);if(e)return this.jupyterPickerRegistration.getJupyterServerUri(e.id,e.handle).then((()=>a),(()=>(a.isValidated=!1,a)))}catch(e){return(0,d.traceVerbose)(`Failed to extract jupyter server uri ${i} ${e}`),a.isValidated=!1,a}return a})));return(0,d.traceVerbose)(`Found ${r.length} saved URIs, ${JSON.stringify(r)}`),r}}return[]})()),this.lastSavedList}async clearUriList(){const e=await this.getSavedUriList();this.lastSavedList=Promise.resolve([]),await this.globalMemento.update(c.Settings.JupyterServerUriList,[]),await this.encryptedStorage.store(c.Settings.JupyterServerRemoteLaunchService,c.Settings.JupyterServerRemoteLaunchUriListKey,void 0),this._onDidRemoveUris.fire(e.map((e=>e)))}getUri(){return this.currentUriPromise||(this.currentUriPromise=this.getUriInternal()),this.currentUriPromise}async getRemoteUri(){try{const e=await this.getUri();if((0,d.traceInfoIfCI)(`getRemoteUri: ${e?.uri}`),e?.uri===c.Settings.JupyterServerLocalLaunch)return;return e}catch(e){return void(0,d.traceError)(`Exception getting uri: ${e}`)}}async getUriForServer(e){return(await this.getSavedUriList()).find((t=>t.serverId===e))}async setUriToLocal(){(0,d.traceInfoIfCI)("setUriToLocal"),await this.setUri(c.Settings.JupyterServerLocalLaunch,void 0)}async setUriToRemote(e,t){await this.addToUriList(e,Date.now(),t),await this.setUri(e,t)}async setUriToNone(){return(0,d.traceInfoIfCI)("setUriToNone"),this.setUri(void 0,void 0)}async setUri(e,n){this._currentServerId=e?await(0,p.computeServerId)(e):void 0;const r=e&&this._currentServerId?{uri:e,time:Date.now(),serverId:this._currentServerId,displayName:n||e,isValidated:!0}:void 0;if(this.currentUriPromise=Promise.resolve(r),(0,d.traceInfoIfCI)(`setUri: ${e}`),this._localOnly=(e===c.Settings.JupyterServerLocalLaunch||void 0===e)&&!this.isWebExtension,this._onDidChangeUri.fire(),await this.globalMemento.update(t.mementoKeyToIndicateIfConnectingToLocalKernelsOnly,this._localOnly),await this.globalMemento.update(t.currentServerHashKey,this._currentServerId),!this._localOnly&&e){await this.addToUriList(e,Date.now(),n??e);const t=await this.getUriAccountKey();await this.encryptedStorage.store(c.Settings.JupyterServerRemoteLaunchService,t,e)}}async getUriInternal(){const e=await this.getSavedUriList();if(this.isLocalLaunch)return e.find((e=>e.uri===c.Settings.JupyterServerLocalLaunch))??{uri:c.Settings.JupyterServerLocalLaunch,time:Date.now(),serverId:"",displayName:"local",isValidated:!0};{const t=await this.getUriAccountKey(),n=await this.encryptedStorage.retrieve(c.Settings.JupyterServerRemoteLaunchService,t);return!this._currentServerId&&n&&(this._currentServerId=await(0,p.computeServerId)(n)),e.find((e=>e.serverId===this._currentServerId))}}async getUriAccountKey(){return this.workspaceService.rootFolder?this.crypto.createHash((0,l.getFilePath)(this.workspaceService.rootFolder),"SHA-512"):this.workspaceService.workspaceFile?this.crypto.createHash((0,l.getFilePath)(this.workspaceService.workspaceFile),"SHA-512"):this.appEnv.machineId}};f=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IWorkspaceService)),i(1,(0,o.inject)(u.ICryptoUtils)),i(2,(0,o.inject)(a.IEncryptedStorage)),i(3,(0,o.inject)(a.IApplicationEnvironment)),i(4,(0,o.inject)(u.IMemento)),i(4,(0,o.named)(u.GLOBAL_MEMENTO)),i(5,(0,o.inject)(u.IsWebExtension)),i(6,(0,o.inject)(u.IConfigurationService)),i(7,(0,o.inject)(h.IJupyterUriProviderRegistration))],f),t.JupyterServerUriStorage=f},40262:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LiveRemoteKernelConnectionUsageTracker=t.mementoKeyToTrackRemoveKernelUrisAndSessionsUsedByResources=void 0;const o=n(86700),s=n(42080),a=n(58681),c=n(46875),l=n(94433);t.mementoKeyToTrackRemoveKernelUrisAndSessionsUsedByResources="removeKernelUrisAndSessionsUsedByResources";let u=class{constructor(e,t,n){this.disposables=e,this.uriStorage=t,this.memento=n,this.usedRemoteKernelServerIdsAndSessions={}}activate(){this.usedRemoteKernelServerIdsAndSessions=this.memento.get(t.mementoKeyToTrackRemoveKernelUrisAndSessionsUsedByResources,{}),this.uriStorage.onDidRemoveUris(this.onDidRemoveUris,this,this.disposables)}wasKernelUsed(e){return e.serverId in this.usedRemoteKernelServerIdsAndSessions&&"string"==typeof e.kernelModel.id&&e.kernelModel.id in this.usedRemoteKernelServerIdsAndSessions[e.serverId]}trackKernelIdAsUsed(e,n,r){this.usedRemoteKernelServerIdsAndSessions[n]=this.usedRemoteKernelServerIdsAndSessions[n]||{},this.usedRemoteKernelServerIdsAndSessions[n][r]=this.usedRemoteKernelServerIdsAndSessions[n][r]||[];const i=this.usedRemoteKernelServerIdsAndSessions[n][r];i.includes(e.toString())||(i.push(e.toString()),this.memento.update(t.mementoKeyToTrackRemoveKernelUrisAndSessionsUsedByResources,this.usedRemoteKernelServerIdsAndSessions).then(a.noop,a.noop))}trackKernelIdAsNotUsed(e,n,r){if(!(n in this.usedRemoteKernelServerIdsAndSessions))return;if(!(r in this.usedRemoteKernelServerIdsAndSessions[n]))return;const i=this.usedRemoteKernelServerIdsAndSessions[n][r];Array.isArray(i)&&i.includes(e.toString())&&(i.splice(i.indexOf(e.toString()),1),0===i.length&&delete this.usedRemoteKernelServerIdsAndSessions[n][r],0===Object.keys(this.usedRemoteKernelServerIdsAndSessions[n]).length&&delete this.usedRemoteKernelServerIdsAndSessions[n],this.memento.update(t.mementoKeyToTrackRemoveKernelUrisAndSessionsUsedByResources,this.usedRemoteKernelServerIdsAndSessions).then(a.noop,a.noop))}onDidRemoveUris(e){e.forEach((e=>{(0,c.computeServerId)(e.uri).then((e=>{delete this.usedRemoteKernelServerIdsAndSessions[e],this.memento.update(t.mementoKeyToTrackRemoveKernelUrisAndSessionsUsedByResources,this.usedRemoteKernelServerIdsAndSessions).then(a.noop,a.noop)})).ignoreErrors()}))}};u=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IDisposableRegistry)),i(1,(0,o.inject)(l.IJupyterServerUriStorage)),i(2,(0,o.inject)(s.IMemento)),i(2,(0,o.named)(s.GLOBAL_MEMENTO))],u),t.LiveRemoteKernelConnectionUsageTracker=u},76385:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PreferredRemoteKernelIdProvider=t.MaximumKernelIdListSize=t.ActiveKernelIdList=void 0;const s=n(86700),a=o(n(50361)),c=n(11642),l=n(35412),u=n(42080),d=n(9959);t.ActiveKernelIdList="Active_Kernel_Id_List",t.MaximumKernelIdListSize=100;let p=class{constructor(e,t){this.globalMemento=e,this.crypto=t}async getPreferredRemoteKernelId(e){const n=this.globalMemento.get(t.ActiveKernelIdList,[]);if(n.length){const t=await this.crypto.createHash(e.toString()),r=n.find((e=>e.fileHash===t));return(0,c.traceVerbose)(`Preferred Remote kernel for ${(0,l.getDisplayPath)(e)} is ${r?.kernelId}`),r?.kernelId}}async clearPreferredRemoteKernelId(e){await this.updatePreferredRemoteKernelIdInternal(e)}async storePreferredRemoteKernelId(e,t){await this.updatePreferredRemoteKernelIdInternal(e,t)}async updatePreferredRemoteKernelIdInternal(e,n){let r=!1;const i=(0,a.default)(this.globalMemento.get(t.ActiveKernelIdList,[])),o=await this.crypto.createHash(e.toString()),s=i.findIndex((e=>e.fileHash===o));for(s>=0&&(r=!0,i.splice(s,1)),n&&(r=!0,i.push({fileHash:o,kernelId:n})),(0,d.sendTelemetryEvent)(d.Telemetry.NumberOfSavedRemoteKernelIds,{count:i.length});i.length>t.MaximumKernelIdListSize;)r=!0,i.shift();(0,c.traceVerbose)(`Storing Preferred remote kernel for ${(0,l.getDisplayPath)(e)} is ${n}`),r&&await this.globalMemento.update(t.ActiveKernelIdList,i)}};p=r([(0,s.injectable)(),i(0,(0,s.inject)(u.IMemento)),i(0,(0,s.named)(u.GLOBAL_MEMENTO)),i(1,(0,s.inject)(u.ICryptoUtils))],p),t.PreferredRemoteKernelIdProvider=p},27527:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterServerSelector=t.validateSelectJupyterURI=void 0;const o=n(86700),s=n(66828),a=n(10053),c=n(11642),l=n(25251),u=n(19450),d=n(9959),p=n(9959),h=n(94433),f=n(90541),g=n(42080),m=n(46875),y=n(24319),v=n(84079),b=n(54990),w=n(50689),C=n(13935),S="https://hostname:8080/?token=849d61a414abafab97bc4aab1f3547755ddc232c2b8cb7fe";async function _(e,t,n,r,i){i=i.trim();try{new URL(i)}catch{return l.DataScience.jupyterSelectURIInvalidURI}if(!i.toLowerCase().startsWith("http"))return l.DataScience.validationErrorMessageForRemoteUrlProtocolNeedsToBeHttpOrHttps;try{await e.validateRemoteUri(i)}catch(e){if((0,c.traceWarning)("Uri verification error",e),v.JupyterSelfCertsError.isSelfCertsError(e)){if((0,d.sendTelemetryEvent)(p.Telemetry.ConnectRemoteSelfCertFailedJupyter),!await(0,m.handleSelfCertsError)(t,n,e.message))return l.DataScience.jupyterSelfCertFailErrorMessageOnly}else{if(!w.JupyterSelfCertsExpiredError.isSelfCertsExpiredError(e)){if(e&&e instanceof C.JupyterInvalidPasswordError)return l.DataScience.passwordFailure;{const t=/(https?:\/\/[^\s]+)/g,n=(e.message||e.toString()).replace(t,(e=>`[${e}](${e})`));return(0,l.DataScience.remoteJupyterConnectionFailedWithoutServerWithErrorWeb)(n)}}if((0,d.sendTelemetryEvent)(p.Telemetry.ConnectRemoteSelfCertFailedJupyter),!await(0,m.handleExpiredCertsError)(t,n,e.message))return l.DataScience.jupyterSelfCertExpiredErrorMessageOnly}}}t.validateSelectJupyterURI=_;let k=class{constructor(e,t,n,r,i,o,s,a,c,l,u,d){this.clipboard=e,this.multiStepFactory=t,this.extraUriProviders=n,this.serverUriStorage=r,this.errorHandler=i,this.applicationShell=o,this.configService=s,this.jupyterConnection=a,this.isWebExtension=c,this.workspaceService=l,this.disposableRegistry=u,this.createImpl(d.features.kernelPickerType),this.disposableRegistry.push(d.onDidChangeFeatures((()=>{this.createImpl(d.features.kernelPickerType)})))}selectJupyterURI(e="nonUser",t){return this.impl.selectJupyterURI(e,t)}setJupyterURIToLocal(){return this.impl.setJupyterURIToLocal()}setJupyterURIToRemote(e,t,n){return this.impl.setJupyterURIToRemote(e,t,n)}createImpl(e){"Stable"===e&&"Stable"!==this.implType?(this.impl=new P(this.clipboard,this.multiStepFactory,this.extraUriProviders,this.serverUriStorage,this.errorHandler,this.applicationShell,this.configService,this.jupyterConnection,this.isWebExtension),this.implType="Stable"):"Insiders"===e&&"Insiders"!==this.implType&&(this.impl=new I(this.clipboard,this.multiStepFactory,this.extraUriProviders,this.serverUriStorage,this.errorHandler,this.applicationShell,this.configService,this.jupyterConnection,this.isWebExtension),this.implType="Insiders")}};k=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IClipboard)),i(1,(0,o.inject)(u.IMultiStepInputFactory)),i(2,(0,o.inject)(h.IJupyterUriProviderRegistration)),i(3,(0,o.inject)(h.IJupyterServerUriStorage)),i(4,(0,o.inject)(f.IDataScienceErrorHandler)),i(5,(0,o.inject)(a.IApplicationShell)),i(6,(0,o.inject)(g.IConfigurationService)),i(7,(0,o.inject)(y.JupyterConnection)),i(8,(0,o.inject)(g.IsWebExtension)),i(9,(0,o.inject)(a.IWorkspaceService)),i(10,(0,o.inject)(g.IDisposableRegistry)),i(11,(0,o.inject)(g.IFeaturesManager))],k),t.JupyterServerSelector=k;let P=class{constructor(e,t,n,r,i,o,s,a,c){this.clipboard=e,this.multiStepFactory=t,this.extraUriProviders=n,this.serverUriStorage=r,this.errorHandler=i,this.applicationShell=o,this.configService=s,this.jupyterConnection=a,this.isWebExtension=c,this.localLabel=`$(zap) ${l.DataScience.jupyterSelectURINoneLabel}`,this.newLabel=`$(server) ${l.DataScience.jupyterSelectURINewLabel}`,this.remoteLabel=`$(server) ${l.DataScience.jupyterSelectURIRemoteLabel}`}selectJupyterURI(e="nonUser"){const t="nonUser"!==e;return(0,d.sendTelemetryEvent)(p.Telemetry.SetJupyterURIUIDisplayed,void 0,{commandSource:e}),this.multiStepFactory.create().run(this.startSelectingURI.bind(this,t),{})}async setJupyterURIToLocal(){await this.serverUriStorage.setUriToLocal()}async setJupyterURIToRemote(e,t,n){try{t||await this.jupyterConnection.validateRemoteUri(e)}catch(t){if(v.JupyterSelfCertsError.isSelfCertsError(t)){if((0,d.sendTelemetryEvent)(p.Telemetry.ConnectRemoteSelfCertFailedJupyter),!await(0,m.handleSelfCertsError)(this.applicationShell,this.configService,t.message))return}else{if(!w.JupyterSelfCertsExpiredError.isSelfCertsExpiredError(t)){const n=await(0,m.computeServerId)(e);return void await this.errorHandler.handleError(new b.RemoteJupyterServerConnectionError(e,n,t))}if((0,d.sendTelemetryEvent)(p.Telemetry.ConnectRemoteSelfCertFailedJupyter),!await(0,m.handleExpiredCertsError)(this.applicationShell,this.configService,t.message))return}}const r=await this.jupyterConnection.createConnectionInfo({uri:e});n&&(r.displayName=n),await this.serverUriStorage.setUriToRemote(e,r.displayName),(0,d.sendTelemetryEvent)(p.Telemetry.SetJupyterURIToUserSpecified,void 0,{azure:e.toLowerCase().includes("azure")})}async startSelectingURI(e,t,n){const r=await this.serverUriStorage.getRemoteUri(),i=await this.getUriPickList(e,r),o=i.find((e=>e.url===r||e.label===this.localLabel&&!r)),a=r?o?.label:l.DataScience.jupyterSelectURINoneLabel,u=a?l.DataScience.jupyterSelectURIQuickPickCurrent(a):l.DataScience.jupyterSelectURIQuickPickPlaceholder;let d=Promise.resolve();const p=new s.EventEmitter,h=await t.showQuickPick({placeholder:u,items:i,activeItem:o,title:e?l.DataScience.jupyterSelectURIQuickPickTitleOld:l.DataScience.jupyterSelectURIQuickPickTitleRemoteOnly,onDidTriggerItemButton:e=>{const t=e.item.url;t&&e.button.tooltip===l.DataScience.removeRemoteJupyterServerEntryInQuickPick&&(d=d.then((()=>this.serverUriStorage.removeUri(t).catch((e=>(0,c.traceError)("Failed to update Uri list",e))))),i.splice(i.indexOf(e.item),1),p.fire(i.concat([])))},onDidChangeItems:p.event});if(await d.catch((e=>(0,c.traceError)("Failed to update Uri list",e))),h.label===this.localLabel)await this.setJupyterURIToLocal();else{if(h.newChoice||h.provider)return h.provider?this.selectProviderURI.bind(this,h.provider,h):this.selectRemoteURI.bind(this);await this.setJupyterURIToRemote(h.url||h.label,!1,h.label)}}async selectProviderURI(e,t,n,r){if(!e.handleQuickPick)return;const i=await e.handleQuickPick(t,!0);if("back"===i)throw u.InputFlowAction.back;i&&await this.handleProviderQuickPick(e.id,i)}async handleProviderQuickPick(e,t){if(t){const n=(0,m.generateUriFromRemoteProvider)(e,t);await this.setJupyterURIToRemote(n)}}async selectRemoteURI(e,t){let n=S;try{const e=await this.clipboard.readText().catch((()=>"")),t=s.Uri.parse(e.trim(),!0);n=e&&t&&t.scheme.toLowerCase().startsWith("http")?e:S}catch{}const r=await e.showInputBox({title:l.DataScience.jupyterSelectURIPrompt,value:n||S,validate:_.bind(this,this.jupyterConnection,this.applicationShell,this.configService,this.isWebExtension),prompt:""}),i=await this.applicationShell.showInputBox({title:l.DataScience.jupyterRenameServer});r&&await this.setJupyterURIToRemote(r,!0,i||r)}async getUriPickList(e,t){let n=[];const r=await this.extraUriProviders.getProviders();if(r)for(const e of r)if(e.getQuickPickEntryItems&&e.handleQuickPick){const t=(await e.getQuickPickEntryItems()).map((t=>({...t,newChoice:!1,provider:e})));n=n.concat(t)}let i=[];return e?(i.push({label:this.localLabel,detail:l.DataScience.jupyterSelectURINoneDetail,newChoice:!1}),i=i.concat(n),i.push({label:this.newLabel,detail:l.DataScience.jupyterSelectURINewDetail,newChoice:!0})):(i=i.concat(n),i.push({label:this.remoteLabel,detail:l.DataScience.jupyterSelectURIRemoteDetail,newChoice:!0})),(await this.serverUriStorage.getSavedUriList()).forEach((e=>{if(e.uri&&e.isValidated){const n=new Date(e.time),r=t?.uri===e.uri;i.push({label:e.displayName||e.uri,detail:l.DataScience.jupyterSelectURIMRUDetail(n),description:e.displayName!==e.uri?e.uri:void 0,newChoice:!1,url:e.uri,buttons:r?[]:[{iconPath:new s.ThemeIcon("trash"),tooltip:l.DataScience.removeRemoteJupyterServerEntryInQuickPick}]})}})),i}};r([(0,d.capturePerfTelemetry)(p.Telemetry.SelectJupyterURI),(0,c.traceDecoratorError)("Failed to select Jupyter Uri")],P.prototype,"selectJupyterURI",null),r([(0,d.capturePerfTelemetry)(p.Telemetry.SetJupyterURIToLocal)],P.prototype,"setJupyterURIToLocal",null),P=r([i(7,(0,o.inject)(y.JupyterConnection)),i(8,(0,o.inject)(g.IsWebExtension))],P);let I=class{constructor(e,t,n,r,i,o,s,a,u){this.clipboard=e,this.multiStepFactory=t,this.extraUriProviders=n,this.serverUriStorage=r,this.errorHandler=i,this.applicationShell=o,this.configService=s,this.jupyterConnection=a,this.isWebExtension=u,this.localLabel=`$(zap) ${l.DataScience.jupyterSelectURINoneLabel}`,this.newLabel=`$(server) ${l.DataScience.jupyterSelectURINewLabel}`,this.remoteLabel=`$(server) ${l.DataScience.jupyterSelectURIRemoteLabel}`,this.validateSelectJupyterURI=async e=>{e=e.trim();try{new URL(e)}catch{return l.DataScience.jupyterSelectURIInvalidURI}if(!e.toLowerCase().startsWith("http"))return l.DataScience.validationErrorMessageForRemoteUrlProtocolNeedsToBeHttpOrHttps;try{await this.jupyterConnection.validateRemoteUri(e)}catch(e){if((0,c.traceWarning)("Uri verification error",e),v.JupyterSelfCertsError.isSelfCertsError(e)){if((0,d.sendTelemetryEvent)(p.Telemetry.ConnectRemoteSelfCertFailedJupyter),!await(0,m.handleSelfCertsError)(this.applicationShell,this.configService,e.message))return l.DataScience.jupyterSelfCertFailErrorMessageOnly}else{if(!w.JupyterSelfCertsExpiredError.isSelfCertsExpiredError(e)){const t=/(https?:\/\/[^\s]+)/g,n=(e.message||e.toString()).replace(t,(e=>`[${e}](${e})`));return(this.isWebExtension,l.DataScience.remoteJupyterConnectionFailedWithoutServerWithErrorWeb)(n)}if((0,d.sendTelemetryEvent)(p.Telemetry.ConnectRemoteSelfCertFailedJupyter),!await(0,m.handleExpiredCertsError)(this.applicationShell,this.configService,e.message))return l.DataScience.jupyterSelfCertExpiredErrorMessageOnly}}}}selectJupyterURI(e="nonUser"){const t="nonUser"!==e;return(0,d.sendTelemetryEvent)(p.Telemetry.SetJupyterURIUIDisplayed,void 0,{commandSource:e}),this.multiStepFactory.create().run(this.startSelectingURI.bind(this,t),{})}async setJupyterURIToLocal(){await this.serverUriStorage.setUriToLocal()}async setJupyterURIToRemote(e,t,n){try{t||await this.jupyterConnection.validateRemoteUri(e)}catch(t){if(v.JupyterSelfCertsError.isSelfCertsError(t)){if((0,d.sendTelemetryEvent)(p.Telemetry.ConnectRemoteSelfCertFailedJupyter),!await(0,m.handleSelfCertsError)(this.applicationShell,this.configService,t.message))return}else{if(!w.JupyterSelfCertsExpiredError.isSelfCertsExpiredError(t)){const n=await(0,m.computeServerId)(e);return void await this.errorHandler.handleError(new b.RemoteJupyterServerConnectionError(e,n,t))}if((0,d.sendTelemetryEvent)(p.Telemetry.ConnectRemoteSelfCertFailedJupyter),!await(0,m.handleExpiredCertsError)(this.applicationShell,this.configService,t.message))return}}const r=await this.jupyterConnection.createConnectionInfo({uri:e});n&&(r.displayName=n),await this.serverUriStorage.setUriToRemote(e,r.displayName),(0,d.sendTelemetryEvent)(p.Telemetry.SetJupyterURIToUserSpecified,void 0,{azure:e.toLowerCase().includes("azure")})}async startSelectingURI(e,t,n){const r=await this.serverUriStorage.getRemoteUri(),i=(await this.getUriPickList(e,r)).filter((e=>!e.provider?.id.startsWith("_builtin"))),o=i.find((e=>e.url===r||e.label===this.localLabel&&!r)),a=r?o?.label:l.DataScience.jupyterSelectURINoneLabel,u=a?l.DataScience.jupyterSelectURIQuickPickCurrent(a):l.DataScience.jupyterSelectURIQuickPickPlaceholder;let d=Promise.resolve();const p=new s.EventEmitter,h=await t.showQuickPick({placeholder:u,items:i,activeItem:o,title:e?l.DataScience.jupyterSelectURIQuickPickTitleOld:l.DataScience.jupyterSelectURIQuickPickTitleRemoteOnly,onDidTriggerItemButton:e=>{const t=e.item.url;t&&e.button.tooltip===l.DataScience.removeRemoteJupyterServerEntryInQuickPick&&(d=d.then((()=>this.serverUriStorage.removeUri(t).catch((e=>(0,c.traceError)("Failed to update Uri list",e))))),i.splice(i.indexOf(e.item),1),p.fire(i.concat([])))},onDidChangeItems:p.event});if(await d.catch((e=>(0,c.traceError)("Failed to update Uri list",e))),h.label===this.localLabel)await this.setJupyterURIToLocal();else{if(h.newChoice||h.provider)return h.provider?this.selectProviderURI.bind(this,h.provider,h):this.selectRemoteURI.bind(this);await this.setJupyterURIToRemote(h.url||h.label,!1,h.label)}}async selectProviderURI(e,t,n,r){if(!e.handleQuickPick)return;const i=await e.handleQuickPick(t,!0);if("back"===i)throw u.InputFlowAction.back;i&&await this.handleProviderQuickPick(e.id,i)}async handleProviderQuickPick(e,t){if(t){const n=(0,m.generateUriFromRemoteProvider)(e,t);await this.setJupyterURIToRemote(n)}}async selectRemoteURI(e,t){let n=S;try{const e=await this.clipboard.readText().catch((()=>"")),t=s.Uri.parse(e.trim(),!0);n=e&&t&&t.scheme.toLowerCase().startsWith("http")?e:S}catch{}const r=await e.showInputBox({title:l.DataScience.jupyterSelectURIPrompt,value:n||S,validate:this.validateSelectJupyterURI,prompt:""}),i=await this.applicationShell.showInputBox({title:l.DataScience.jupyterRenameServer});r&&await this.setJupyterURIToRemote(r,!0,i||r)}async getUriPickList(e,t){let n=[];const r=await this.extraUriProviders.getProviders();if(r)for(const e of r)if(e.getQuickPickEntryItems&&e.handleQuickPick){const t=(await e.getQuickPickEntryItems()).map((t=>({...t,newChoice:!1,provider:e})));n=n.concat(t)}let i=[];return e?(i.push({label:this.localLabel,detail:l.DataScience.jupyterSelectURINoneDetail,newChoice:!1}),i=i.concat(n),i.push({label:this.newLabel,detail:l.DataScience.jupyterSelectURINewDetail,newChoice:!0})):(i=i.concat(n),i.push({label:this.remoteLabel,detail:l.DataScience.jupyterSelectURIRemoteDetail,newChoice:!0})),(await this.serverUriStorage.getSavedUriList()).forEach((e=>{if(e.uri&&e.isValidated){const n=new Date(e.time),r=t?.uri===e.uri;i.push({label:e.displayName||e.uri,detail:l.DataScience.jupyterSelectURIMRUDetail(n),description:e.displayName!==e.uri?e.uri:void 0,newChoice:!1,url:e.uri,buttons:r?[]:[{iconPath:new s.ThemeIcon("trash"),tooltip:l.DataScience.removeRemoteJupyterServerEntryInQuickPick}]})}})),i}};r([(0,d.capturePerfTelemetry)(p.Telemetry.SelectJupyterURI),(0,c.traceDecoratorError)("Failed to select Jupyter Uri")],I.prototype,"selectJupyterURI",null),r([(0,d.capturePerfTelemetry)(p.Telemetry.SetJupyterURIToLocal)],I.prototype,"setJupyterURIToLocal",null),I=r([i(7,(0,o.inject)(y.JupyterConnection)),i(8,(0,o.inject)(g.IsWebExtension))],I)},24150:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(52064),i=n(26320),o=n(90541),s=n(94062),a=n(24319),c=n(24048),l=n(26585),u=n(54179),d=n(71225),p=n(41090),h=n(2219),f=n(72964),g=n(89847),m=n(89517),y=n(25153),v=n(10651),b=n(40262),w=n(27527),C=n(58851),S=n(15352),_=n(19785),k=n(94433),P=n(86590),I=n(30416);t.registerTypes=function(e,t){e.addSingleton(k.IJupyterNotebookProvider,p.JupyterNotebookProvider),e.addSingleton(k.IJupyterExecution,f.HostJupyterExecution),e.add(k.INotebookServerFactory,g.HostJupyterServerFactory),e.addSingleton(k.IJupyterPasswordConnect,h.JupyterPasswordConnect),e.addSingleton(k.IJupyterSessionManagerFactory,_.JupyterSessionManagerFactory),e.addSingleton(w.JupyterServerSelector,w.JupyterServerSelector),e.addSingleton(k.IJupyterKernelService,c.JupyterKernelService),e.addSingleton(k.IJupyterUriProviderRegistration,u.JupyterUriProviderRegistration),e.addSingleton(k.IJupyterServerUriStorage,v.JupyterServerUriStorage),e.addSingleton(s.INotebookProvider,m.NotebookProvider),e.addSingleton(k.IJupyterBackingFileCreator,C.BackingFileCreator),e.addSingleton(d.JupyterCommandLineSelector,d.JupyterCommandLineSelector),e.addSingleton(k.IJupyterServerProvider,y.NotebookServerProvider),e.addSingleton(k.IJupyterRequestCreator,S.JupyterRequestCreator),e.addSingleton(a.JupyterConnection,a.JupyterConnection),e.addBinding(a.JupyterConnection,r.IExtensionSyncActivationService),e.addSingleton(k.ILiveRemoteKernelConnectionUsageTracker,b.LiveRemoteKernelConnectionUsageTracker),e.addBinding(k.ILiveRemoteKernelConnectionUsageTracker,r.IExtensionSyncActivationService),e.addSingleton(k.IJupyterRemoteCachedKernelValidator,l.JupyterRemoteCachedKernelValidator),e.addSingleton(o.IDataScienceErrorHandler,i.DataScienceErrorHandlerWeb),e.addSingleton(r.IExtensionSyncActivationService,P.CellOutputMimeTypeTracker),e.addSingleton(r.IExtensionSyncActivationService,I.RemoteKernelFinderController)}},7958:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseBackingFileCreator=t.generateBackingIPyNbFileName=void 0;const a=s(n(71171)),c=n(11642),l=n(25251),u=n(98729),d=n(94062),p=o(n(52859)),h=o(n(15948));function f(e){const t=`${u.jvscIdentifier}${(0,a.default)()}${(0,a.default)()}.ipynb`;return e?`${p.basename(e,".ipynb")}${t}`:`${l.DataScience.defaultNotebookName}${t}`}t.generateBackingIPyNbFileName=f,t.BaseBackingFileCreator=class{async createBackingFile(e,t,n,r,i){let o;const s=p.relativePath(r.rootDirectory,t)?.replace(/\\/g,"/"),a=(0,d.isLocalConnection)(n)&&s&&!s.startsWith("..")?{type:"notebook",path:s}:{type:"notebook"},l=f(e);try{o=await i.newUntitled(a);const e=h.dirname(o.path);o=await i.rename(o.path,e.length&&"."!==e?`${e}/${l}`:l)}catch(e){if((0,d.isLocalConnection)(n))try{o=await i.newUntitled({type:"notebook"});const e=h.dirname(o.path);o=await i.rename(o.path,e.length&&"."!==e?`${e}/${l}`:l)}catch(e){}else(0,c.traceError)(`Backing file not supported: ${e}`)}if(o){const e=o.path;return{filePath:e,dispose:()=>i.delete(e)}}}}},58851:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.BackingFileCreator=void 0;const i=n(86700),o=n(7958);let s=class extends o.BaseBackingFileCreator{};s=r([(0,i.injectable)()],s),t.BackingFileCreator=s},15352:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterRequestCreator=void 0;const o=n(86700),s=i(n(46792)),a=n(11642),c=n(56940),l=new Map;let u=class{getRequestCtor(e,t,n){class r extends Request{constructor(t,r){super(t,r);const i=this.headers;if(n){const e=n();Object.keys(e).forEach((t=>i.append(t,e[t].toString()))),i.set("Content-Type","application/json");const t=i.append.bind(i);i.append=(e,n)=>{"authorization"!==e.toLowerCase()&&t(e,n)}}e&&this.headers.append("Cookie",e)}}return r}getWebsocketCtor(e,t,n,r){class i extends((0,c.KernelSocketWrapper)(s.default)){constructor(e,t){super(e,(e=>{const t=r?r():void 0;if(t||e)return!e&&t?t:(e&&!t||(e=e?"string"==typeof e?[e]:e:[],Array.isArray(t)?e.push(...t):"string"==typeof t&&e.push(t)),e)})(t)),this.timer=0,this.boundOpenHandler=this.openHandler.bind(this);const n=/.*\/kernels\/(.*)\/.*/.exec(e);n&&n.length>1&&(this.kernelId=n[1]),this.kernelId?(l.set(this.kernelId,this),this.onclose=()=>{l.get(this.kernelId)===this&&l.delete(this.kernelId)}):(0,a.traceError)("KernelId not extracted from Kernel WebSocket URL"),this.addEventListener("open",this.boundOpenHandler)}openHandler(){const e=this.onmessage;this.onmessage=t=>{this.handleEvent(((t,...n)=>{const r={data:n[0],type:t.toString(),target:this};return e(r),!0}),"message",t.data)},this.removeEventListener("open",this.boundOpenHandler)}}return i}getWebsocket(e){return l.get(e)}getFetchMethod(){return fetch}getHeadersCtor(){return Headers}getRequestInit(){return{cache:"no-store"}}};u=r([(0,o.injectable)()],u),t.JupyterRequestCreator=u},82341:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterSession=void 0;const o=i(n(71171)),s=n(39054),a=n(6491),c=n(37853),l=n(11642),u=n(43138),d=n(25251),p=n(71798),h=n(65864),f=n(9959),g=n(79806),m=n(98729),y=n(94062),v=n(88960),b=n(66828),w=n(7958),C=n(58681);class S extends g.BaseJupyterSession{constructor(e,t,n,r,i,o,s,a,c,l,u,d,p,h){super(e,n,a,u),this.connInfo=t,this.specsManager=r,this.sessionManager=i,this.contentsManager=o,this.outputChannel=s,this.workingDirectory=a,this.idleTimeout=c,this.kernelService=l,this.backingFileCreator=d,this.requestCreator=p,this.sessionCreator=h,this.kind=t.localLaunch?"localJupyter":"remoteJupyter"}isServerSession(){return!0}waitForIdle(e,t){return this.waitForIdleOnSession(this.session,e,t)}async connect(e){this.setSession(await this.createNewKernelSession(e)),this.session?.statusChanged.connect(this.statusHandler),this.connected=!0}async createNewKernelSession(e){let t;try{if(this.kernelConnectionMetadata&&"connectToLiveRemoteKernel"===this.kernelConnectionMetadata.kind&&this.kernelConnectionMetadata.kernelModel.id&&this.kernelConnectionMetadata.kernelModel.model){if(t=this.sessionManager.connectTo({...this.kernelConnectionMetadata.kernelModel,model:this.kernelConnectionMetadata.kernelModel.model}),t.kernelConnectionMetadata=this.kernelConnectionMetadata,t.kernelSocketInformation={socket:this.requestCreator.getWebsocket(this.kernelConnectionMetadata.id),options:{clientId:"",id:this.kernelConnectionMetadata.id,model:{...this.kernelConnectionMetadata.kernelModel.model},userName:""}},t.isRemoteSession=!0,t.resource=this.resource,await(0,u.waitForCondition)((async()=>"connected"===t?.kernel?.connectionStatus||e.token.isCancellationRequested),this.idleTimeout,100),e.token.isCancellationRequested)throw new b.CancellationError}else(0,l.traceVerbose)(`createNewKernelSession ${this.kernelConnectionMetadata?.id}`),t=await this.createSession(e),t.resource=this.resource,await this.waitForIdleOnSession(t,this.idleTimeout,e.token)}catch(t){const n=e.ui.disableUI?l.traceVerbose:l.traceError;throw t instanceof c.BaseError?(n("Failed to change kernel, re-throwing",t),t):(n("Failed to change kernel",t),new p.JupyterInvalidKernelError(this.kernelConnectionMetadata))}return t}async createRestartSession(e,t,n){if(!t||!this.contentsManager||!this.sessionManager)throw new h.SessionDisposedError;let r;const i=new v.DisplayOptions(e);try{return(0,l.traceVerbose)(`JupyterSession.createNewKernelSession 0, id is ${this.kernelConnectionMetadata?.id}`),r=await this.createSession({token:n,ui:i}),await this.waitForIdleOnSession(r,this.idleTimeout,n),r}catch(e){throw(0,l.traceWarning)(`Error waiting for restart session: ${e}`),r&&this.shutdownSession(r,void 0,!0).ignoreErrors(),r=void 0,e}finally{i.dispose()}}startRestartSession(e){if(!this.session)throw new Error("Session disposed or not initialized");const t=new s.CancellationTokenSource,n=this.createRestartSession(e,this.session,t.token);return this.restartSessionPromise={token:t,promise:n},n.finally((()=>{t.dispose(),this.restartSessionPromise?.promise===n&&(this.restartSessionPromise=void 0)})).catch(C.noop),n}async invokeWithFileSynced(e,t){if(!this.resource)return;const n=await this.backingFileCreator.createBackingFile(this.resource,this.workingDirectory,this.kernelConnectionMetadata,this.connInfo,this.contentsManager);n&&(await this.contentsManager.save(n.filePath,{content:JSON.parse(e),type:"notebook"}).ignoreErrors(),await t({filePath:n.filePath,dispose:n.dispose.bind(n)}),await n.dispose(),await this.contentsManager.delete(n.filePath).ignoreErrors())}async createTempfile(e){return(await this.contentsManager.newUntitled({type:"file",ext:e})).path}async deleteTempfile(e){await this.contentsManager.delete(e)}async getContents(e,t){return await this.contentsManager.get(e,{type:"file",format:t,content:!0})}async createSession(e){let t,n;if((0,y.isRemoteConnection)(this.kernelConnectionMetadata)&&this.connInfo.workingDirectory&&this.resource){const e=b.workspace.getWorkspaceFolder(b.Uri.from(this.resource));e&&(n=this.resource.path.replace(e.uri.path,this.connInfo.workingDirectory))}if(n||(t=await this.backingFileCreator.createBackingFile(this.resource,this.workingDirectory,this.kernelConnectionMetadata,this.connInfo,this.contentsManager),n=t?.filePath),this.kernelConnectionMetadata?.interpreter&&(0,y.isLocalConnection)(this.kernelConnectionMetadata)&&this.kernelService)try{await this.kernelService.ensureKernelIsUsable(this.resource,this.kernelConnectionMetadata,e.ui,e.token,"3rdPartyExtension"===this.sessionCreator)}catch(e){throw this.connInfo&&t&&this.contentsManager.delete(t.filePath).ignoreErrors(),e}const r=(0,m.getNameOfKernelConnection)(this.kernelConnectionMetadata)??this.specsManager?.specs?.default??"",i={path:n??(0,w.generateBackingIPyNbFileName)(this.resource),kernel:{name:r},name:(0,o.default)(),type:"notebook"},s=this.requestCreator;return a.Cancellation.race((()=>this.sessionManager.startNew(i,{kernelConnectionOptions:{handleComms:!0}}).then((async e=>{if(e.kernel){this.logRemoteOutput(d.DataScience.createdNewKernel(this.connInfo.baseUrl,e?.kernel?.id||""));const t=e;return t.resource=this.resource,t.kernelConnectionMetadata=this.kernelConnectionMetadata,t.kernelSocketInformation={get socket(){return s.getWebsocket(e.kernel.id)},options:{clientId:e.kernel.clientId,id:e.kernel.id,model:{...e.kernel.model},userName:e.kernel.username}},(0,y.isLocalConnection)(this.kernelConnectionMetadata)||(t.isRemoteSession=!0),t}throw new g.JupyterSessionStartError(new Error("No kernel created"))})).catch((e=>Promise.reject(new g.JupyterSessionStartError(e)))).finally((async()=>{this.connInfo&&t&&this.contentsManager.delete(t.filePath).ignoreErrors()}))),e.token)}logRemoteOutput(e){(0,y.isLocalConnection)(this.kernelConnectionMetadata)||this.outputChannel.appendLine(e)}}r([(0,f.capturePerfTelemetry)(f.Telemetry.WaitForIdleJupyter)],S.prototype,"waitForIdle",null),t.JupyterSession=S},28866:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterSessionManager=void 0;const r=n(66828),i=n(11642),o=n(25251),s=n(65864),a=n(98729),c=n(47028),l=n(82341),u=n(43138),d=n(9959),p=n(20397),h=n(11386),f=n(13935);class g{get jupyterlab(){return this._jupyterlab||(this._jupyterlab=n(76240)),this._jupyterlab}constructor(e,t,n,r,i,o,s,a,c,l,u){this.jupyterPasswordConnect=e,this.failOnPassword=n,this.outputChannel=r,this.configService=i,this.appShell=o,this.stateFactory=s,this.kernelService=a,this.backingFileCreator=c,this.requestAgentCreator=l,this.requestCreator=u,this.userAllowsInsecureConnections=this.stateFactory.createGlobalPersistentState("DataScienceAllowInsecureConnections",!1)}async dispose(){if(!this.disposed){this.disposed=!0,(0,i.traceVerbose)("Disposing session manager");try{this.contentsManager&&((0,i.traceVerbose)("SessionManager - dispose contents manager"),this.contentsManager.dispose(),this.contentsManager=void 0),this.sessionManager&&!this.sessionManager.isDisposed&&((0,i.traceVerbose)("ShutdownSessionAndConnection - dispose session manager"),await Promise.race([(0,u.sleep)(1e4),this.sessionManager.ready]),this.sessionManager.dispose(),this.sessionManager=void 0),this.kernelManager?.isDisposed||this.kernelManager?.dispose(),this.specsManager?.isDisposed||(this.specsManager?.dispose(),this.specsManager=void 0)}catch(e){(0,i.traceError)("Exception on session manager shutdown: ",e)}finally{(0,i.traceVerbose)("Finished disposing jupyter session manager")}}}async initialize(e){this.connInfo=e,this.serverSettings=await this.getServerConnectSettings(e),this.specsManager=new this.jupyterlab.KernelSpecManager({serverSettings:this.serverSettings}),this.kernelManager=new this.jupyterlab.KernelManager({serverSettings:this.serverSettings}),this.sessionManager=new this.jupyterlab.SessionManager({serverSettings:this.serverSettings,kernelManager:this.kernelManager}),this.contentsManager=new this.jupyterlab.ContentsManager({serverSettings:this.serverSettings})}async getRunningSessions(){if(!this.sessionManager)return[];await this.sessionManager.refreshRunning();const e=[],t=this.sessionManager.running();let n=t.next();for(;n;)e.push(n),n=t.next();return e}async getRunningKernels(){const e=await this.jupyterlab.KernelAPI.listRunning(this.serverSettings),t=new Set;return e.map((e=>{const t=e;return{id:e.id,name:e.name,lastActivityTime:t.last_activity?new Date(Date.parse(t.last_activity.toString())):new Date,numberOfConnections:t.connections?parseInt(t.connections.toString(),10):0}})).filter((e=>!t.has(e.id)&&(t.add(e.id),!0)))}async startNew(e,t,n,r,i,o){if(!(this.connInfo&&this.sessionManager&&this.contentsManager&&this.serverSettings&&this.specsManager))throw new s.SessionDisposedError;const a=new l.JupyterSession(e,this.connInfo,t,this.specsManager,this.sessionManager,this.contentsManager,this.outputChannel,n,this.configService.getSettings(e).jupyterLaunchTimeout,this.kernelService,this.configService.getSettings(e).jupyterInterruptTimeout,this.backingFileCreator,this.requestCreator,o);try{await a.connect({token:i,ui:r})}finally{a.isConnected||await a.dispose()}return a}async getKernelSpecs(){if(!this.connInfo||!this.sessionManager||!this.contentsManager)throw new s.SessionDisposedError;try{const e=new h.StopWatch,t=this.specsManager;if(!t)return(0,i.traceError)(`No SessionManager to enumerate kernelspecs (no specs manager). Returning a default kernel. Specs ${JSON.stringify(this.specsManager?.specs?.kernelspecs||{})}.`),(0,d.sendTelemetryEvent)(d.Telemetry.JupyterKernelSpecEnumeration,void 0,{failed:!0,reason:"NoSpecsManager"}),[await(0,a.createInterpreterKernelSpec)()];const n={wasSessionManagerReady:this.sessionManager.isReady,wasSpecsManagerReady:t.isReady,sessionManagerReady:this.sessionManager.isReady,specsManagerReady:t.isReady,waitedForChangeEvent:!1},o=(e={})=>t.specs&&Object.keys(t.specs.kernelspecs).length?t.specs.kernelspecs:e,s=o();await Promise.race([(0,u.sleep)(1e4),this.sessionManager.ready]),n.sessionManagerReady=this.sessionManager.isReady,await Promise.race([(0,u.sleep)(1e4),t.refreshSpecs()]),n.specsManagerReady=t.isReady;let l=!1;if(t&&0===Object.keys(t.specs?.kernelspecs||{}).length){const e=[],i=(0,u.createDeferred)(),o=i.resolve.bind(i);t.specsChanged.connect(o),e.push(new r.Disposable((()=>t.specsChanged.disconnect(o))));const s=Promise.all([i.promise,t.ready,t.refreshSpecs(),this.sessionManager.ready]);await Promise.race([(0,u.sleep)(1e4),s]),n.waitedForChangeEvent=!0,i.completed||(l=!0,(0,d.sendTelemetryEvent)(d.Telemetry.JupyterKernelSpecEnumeration,void 0,{failed:!0,sessionManagerReady:this.sessionManager.isReady,specsManagerReady:t.isReady,reason:t.isReady?this.sessionManager.isReady?"SpecsDidNotChangeInTime":"SessionManagerIsNotReady":"SpecManagerIsNotReady"})),(0,p.disposeAllDisposables)(e)}const f=o(s);if(Object.keys(f||{}).length){const t=[];return Object.entries(f).forEach((([e,n])=>{n&&t.push(new c.JupyterKernelSpec(n))})),(0,d.sendTelemetryEvent)(d.Telemetry.JupyterKernelSpecEnumeration,{duration:e.elapsedTime},n),t}return(0,i.traceError)(`SessionManager cannot enumerate kernelspecs. Returning a default kernel. Specs ${JSON.stringify(f)}.`),l||(0,d.sendTelemetryEvent)(d.Telemetry.JupyterKernelSpecEnumeration,void 0,{failed:!0,reason:"NoSpecsEventAfterRefresh"}),[await(0,a.createInterpreterKernelSpec)()]}catch(e){return(0,i.traceError)("SessionManager:getKernelSpecs failure: ",e),[]}}async getServerConnectSettings(e){let t={baseUrl:e.baseUrl,appUrl:"",wsUrl:e.baseUrl.replace("http","ws")};await this.secureConnectionCheck(e);let n,r=this.requestCreator.getRequestInit();if(""!==e.token&&"null"!==e.token||e.getAuthHeader)t={...t,token:e.token,appendToken:!0};else{if(this.failOnPassword)throw new Error("Password request not allowed.");t={...t,token:""};const i=await this.jupyterPasswordConnect.getPasswordConnectionInfo(e.baseUrl);if(i&&i.requestHeaders)r={...r,headers:i.requestHeaders},n=i.requestHeaders.Cookie||"",i.remappedBaseUrl&&(t.baseUrl=i.remappedBaseUrl,t.wsUrl=i.remappedBaseUrl.replace("http","ws")),i.remappedToken&&(t.token=i.remappedToken);else{if(!i)throw new f.JupyterInvalidPasswordError;t={...t,token:e.token}}}const o=this.configService.getSettings(void 0).allowUnauthorizedRemoteConnection;if(e.baseUrl.startsWith("https")&&o&&this.requestAgentCreator){const e=this.requestAgentCreator.createHttpRequestAgent();r={...r,agent:e}}return t={...t,init:r,WebSocket:this.requestCreator.getWebsocketCtor(n,o,e.getAuthHeader,e.getWebsocketProtocols?.bind(e)),fetch:this.requestCreator.getFetchMethod(),Request:this.requestCreator.getRequestCtor(n,o,e.getAuthHeader),Headers:this.requestCreator.getHeadersCtor()},(0,i.traceInfo)(`Creating server with url : ${t.baseUrl}`),this.jupyterlab.ServerConnection.makeSettings(t)}async insecureServerWarningPrompt(){const e=o.DataScience.insecureSessionMessage,t=[o.Common.bannerLabelYes,o.Common.bannerLabelNo,o.Common.doNotShowAgain];switch(await this.appShell.showWarningMessage(e,...t)){case o.Common.bannerLabelYes:return!0;case o.Common.doNotShowAgain:return await this.userAllowsInsecureConnections.updateValue(!0),!0;case o.Common.bannerLabelNo:default:return!1}}async secureConnectionCheck(e){if(this.userAllowsInsecureConnections.value)return;const t=""===e.token||"null"===e.token;if(e.localLaunch||e.baseUrl.startsWith("https")||!t)return;let n=g.secureServers.get(e.baseUrl);if(void 0===n&&(n=this.insecureServerWarningPrompt(),g.secureServers.set(e.baseUrl,n)),!await n)throw new Error(o.DataScience.insecureSessionDenied)}}t.JupyterSessionManager=g,g.secureServers=new Map},19785:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterSessionManagerFactory=void 0;const o=n(86700),s=n(28866),a=n(10053),c=n(15925),l=n(42080),u=n(94433);let d=class{constructor(e,t,n,r,i,o,s,a,c){this.jupyterPasswordConnect=e,this.config=t,this.jupyterOutput=n,this.appShell=r,this.stateFactory=i,this.kernelService=o,this.backingFileCreator=s,this.requestAgentCreator=a,this.requestCreator=c}async create(e,t){const n=new s.JupyterSessionManager(this.jupyterPasswordConnect,this.config,t,this.jupyterOutput,this.config,this.appShell,this.stateFactory,this.kernelService,this.backingFileCreator,this.requestAgentCreator,this.requestCreator);return await n.initialize(e),n}};d=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IJupyterPasswordConnect)),i(1,(0,o.inject)(l.IConfigurationService)),i(2,(0,o.inject)(l.IOutputChannel)),i(2,(0,o.named)(c.JUPYTER_OUTPUT_CHANNEL)),i(3,(0,o.inject)(a.IApplicationShell)),i(4,(0,o.inject)(l.IPersistentStateFactory)),i(5,(0,o.inject)(u.IJupyterKernelService)),i(5,(0,o.optional)()),i(6,(0,o.inject)(u.IJupyterBackingFileCreator)),i(7,(0,o.inject)(u.IJupyterRequestAgentCreator)),i(7,(0,o.optional)()),i(8,(0,o.inject)(u.IJupyterRequestCreator))],d),t.JupyterSessionManagerFactory=d},89727:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IJupyterSubCommandExecutionService=t.IJupyterCommandFactory=void 0,t.IJupyterCommandFactory=Symbol("IJupyterCommandFactory"),t.IJupyterSubCommandExecutionService=Symbol("IJupyterSubCommandExecutionService")},94433:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.IJupyterRemoteCachedKernelValidator=t.ILiveRemoteKernelConnectionUsageTracker=t.INotebookStarter=t.IJupyterRequestCreator=t.IJupyterRequestAgentCreator=t.IJupyterKernelService=t.IJupyterBackingFileCreator=t.IJupyterServerUriStorage=t.IJupyterUriProviderRegistration=t.IJupyterServerProvider=t.INbConvertExportToPythonService=t.INbConvertInterpreterDependencyChecker=t.IJupyterInterpreterDependencyManager=t.INotebookExporter=t.INotebookImporter=t.IJupyterSessionManagerFactory=t.IJupyterPasswordConnect=t.IJupyterExecution=t.IJupyterNotebookProvider=t.INotebookServerFactory=t.INotebookServer=t.JupyterInterpreterDependencyResponse=void 0,(n=t.JupyterInterpreterDependencyResponse||(t.JupyterInterpreterDependencyResponse={}))[n.ok=0]="ok",n[n.selectAnotherInterpreter=1]="selectAnotherInterpreter",n[n.cancel=2]="cancel",t.INotebookServer=Symbol("INotebookServer"),t.INotebookServerFactory=Symbol("INotebookServerFactory"),t.IJupyterNotebookProvider=Symbol("IJupyterNotebookProvider"),t.IJupyterExecution=Symbol("IJupyterExecution"),t.IJupyterPasswordConnect=Symbol("IJupyterPasswordConnect"),t.IJupyterSessionManagerFactory=Symbol("IJupyterSessionManagerFactory"),t.INotebookImporter=Symbol("INotebookImporter"),t.INotebookExporter=Symbol("INotebookExporter"),t.IJupyterInterpreterDependencyManager=Symbol("IJupyterInterpreterDependencyManager"),t.INbConvertInterpreterDependencyChecker=Symbol("INbConvertInterpreterDependencyChecker"),t.INbConvertExportToPythonService=Symbol("INbConvertExportToPythonService"),t.IJupyterServerProvider=Symbol("IJupyterServerProvider"),t.IJupyterUriProviderRegistration=Symbol("IJupyterUriProviderRegistration"),t.IJupyterServerUriStorage=Symbol("IJupyterServerUriStorage"),t.IJupyterBackingFileCreator=Symbol("IJupyterBackingFileCreator"),t.IJupyterKernelService=Symbol("IJupyterKernelService"),t.IJupyterRequestAgentCreator=Symbol("IJupyterRequestAgentCreator"),t.IJupyterRequestCreator=Symbol("IJupyterRequestCreator"),t.INotebookStarter=Symbol("INotebookStarter"),t.ILiveRemoteKernelConnectionUsageTracker=Symbol("ILiveRemoteKernelConnectionUsageTracker"),t.IJupyterRemoteCachedKernelValidator=Symbol("IJupyterRemoteCachedKernelValidator")},22021:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getPlainTextOrStreamOutput=t.Kernel=t.ThirdPartyKernel=t.shouldMessageBeMirroredWithRenderer=void 0;const i=n(37875),o=n(66828),s=n(15925),a=n(37853),c=n(20397),l=n(11642),u=n(35412),d=n(43138),p=n(25251),h=n(58681),f=n(11386),g=n(86563),m=n(30002),y=n(47684),v=n(61239),b=n(9959),w=n(98729),C=n(94062),S=n(6491),_=n(72584),k=n(88960),P=r(n(66518)),I="e976ee50-99ed-4aba-9b6b-9dcd5634d07d:IPyWidgets:";t.shouldMessageBeMirroredWithRenderer=function(e){let t="string"==typeof e?e:"";return"string"!=typeof e&&"content"in e&&"code"in e.content&&"string"==typeof e.content.code&&(t=e.content.code),!t.includes(I)};class E{get ipywidgetsVersion(){return this._ipywidgetsVersion}get onIPyWidgetVersionResolved(){return this._onIPyWidgetVersionResolved.event}get onStatusChanged(){return this._onStatusChanged.event}get onRestarted(){return this._onRestarted.event}get onStarted(){return this._onStarted.event}get onDisposed(){return this._onDisposed.event}get creator(){return this._creator}get startedAtLeastOnce(){return this._startedAtLeastOnce}get info(){return this._info}get status(){return this._jupyterSessionPromise&&!this._session?"starting":this._session?.status??(this.isKernelDead?"dead":"unknown")}get disposed(){return!0===this._disposed||!0===this._session?.disposed}get disposing(){return!0===this._disposing}get kernelSocket(){return this._kernelSocket.asObservable()}get session(){return this._session}get restarting(){return this._restartPromise||Promise.resolve()}constructor(e,t,n,r,s,a,c,l){this.uri=e,this.resourceUri=t,this.kernelConnectionMetadata=n,this.notebookProvider=r,this.kernelSettings=s,this.appShell=a,this.startupCodeProviders=c,this._creator=l,this.disposables=[],this._onIPyWidgetVersionResolved=new o.EventEmitter,this._kernelSocket=new i.ReplaySubject,this._onStatusChanged=new o.EventEmitter,this._onRestarted=new o.EventEmitter,this._onStarted=new o.EventEmitter,this._onDisposed=new o.EventEmitter,this.hookedSessionForEvents=new WeakSet,this.hooks=new Map,this.startCancellation=new o.CancellationTokenSource,this.startupUI=new k.DisplayOptions(!0),this.disposables.push(this._onStatusChanged),this.disposables.push(this._onRestarted),this.disposables.push(this._onStarted),this.disposables.push(this._onDisposed),this.disposables.push(this._onIPyWidgetVersionResolved),this.disposables.push({dispose:()=>this._kernelSocket.unsubscribe()}),(0,v.trackKernelResourceInformation)(this.resourceUri,{kernelConnection:this.kernelConnectionMetadata,actionSource:this.creator,disableUI:this.startupUI.disableUI}).ignoreErrors(),this.startupUI.onDidChangeDisableUI((()=>{this.startupUI.disableUI||(0,v.trackKernelResourceInformation)(this.resourceUri,{disableUI:!1}).ignoreErrors()}),this.disposables)}addHook(e,t,n,r){const i=this.hooks.get(e)||new Set;this.hooks.set(e,i),t=n?t.bind(n):t,i.add(t);const o={dispose:()=>{i.delete(t)}};return r&&r.push(o),o}async start(e){return this.startCancellation.token.isCancellationRequested&&(this.startCancellation.dispose(),this.startCancellation=new o.CancellationTokenSource),this.startJupyterSession(e)}async interrupt(){const e=Promise.all(Array.from(this.hooks.get("willInterrupt")||new Set).map((e=>e())));let t;(0,l.traceInfo)(`Interrupt requested ${(0,u.getDisplayPath)(this.resourceUri||this.uri)}`);try{const n=this._jupyterSessionPromise?await this._jupyterSessionPromise.catch((()=>{})):void 0;(0,l.traceInfo)("Interrupt kernel execution"),n?(t=this._interruptPromise?await this._interruptPromise:await(this._interruptPromise=this.interruptExecution(n,e)),this._interruptPromise=void 0):((0,l.traceInfo)("No kernel session to interrupt"),this._interruptPromise=void 0,t=C.InterruptResult.Success)}finally{Promise.all(Array.from(this.hooks.get("interruptCompleted")||new Set).map((e=>e()))).ignoreErrors()}if((0,l.traceInfo)(`Interrupt requested & sent for ${(0,u.getDisplayPath)(this.uri)} in notebookEditor.`),t===C.InterruptResult.TimedOut){const e=p.DataScience.restartKernelAfterInterruptMessage,t=p.DataScience.restartKernelMessageYes;await this.appShell.showInformationMessage(e,{modal:!0},t)===t&&await this.restart()}}async dispose(){if((0,l.traceInfo)(`Dispose Kernel '${(0,u.getDisplayPath)(this.uri)}' associated with '${(0,u.getDisplayPath)(this.resourceUri)}'`),(0,l.traceInfoIfCI)(`Dispose Kernel '${(0,u.getDisplayPath)(this.uri)}' associated with '${(0,u.getDisplayPath)(this.resourceUri)}' called from ${new Error("").stack}`),this._disposing=!0,this.disposingPromise)return this.disposingPromise;this._ignoreJupyterSessionDisposedErrors=!0,this.startCancellation.cancel(),this.disposingPromise=(async()=>{const e=[];e.push(Promise.all(Array.from(this.hooks.get("willCancel")||new Set).map((e=>e()))).then(h.noop).catch(h.noop)),this._session=this._session?this._session:this._jupyterSessionPromise?await this._jupyterSessionPromise.catch((()=>{})):void 0,this._jupyterSessionPromise=void 0,this._session&&(e.push(this._session.dispose().catch(h.noop)),this._session=void 0),this._disposed=!0,this._onDisposed.fire(),this._onStatusChanged.fire("dead");try{await Promise.all(e)}finally{this.startCancellation.dispose(),(0,c.disposeAllDisposables)(this.disposables)}})(),await this.disposingPromise}async restart(){try{const e=(0,g.getResourceType)(this.resourceUri);await Promise.all(Array.from(this.hooks.get("willRestart")||new Set).map((e=>e(this._jupyterSessionPromise)))),(0,l.traceInfo)(`Restart requested ${this.uri}`),this.startCancellation.cancel(),this.startCancellation.dispose();const t=new f.StopWatch;try{const n=this._jupyterSessionPromise?await this._jupyterSessionPromise.catch((()=>{})):void 0;n?(this._restartPromise||(this._restartPromise=n.restart(),this._restartPromise.finally((()=>this._restartPromise=void 0)).catch(h.noop)),await this._restartPromise,this.startCancellation=new o.CancellationTokenSource):await this.start(new k.DisplayOptions(!1)),(0,y.sendKernelTelemetryEvent)(this.resourceUri,b.Telemetry.NotebookRestart,{duration:t.elapsedTime},{resourceType:e})}catch(e){(0,l.traceError)(`Restart failed ${(0,u.getDisplayPath)(this.uri)}`,e),this._ignoreJupyterSessionDisposedErrors=!0;const n=this._session;throw this._session=void 0,this._jupyterSessionPromise=void 0,(0,y.sendKernelTelemetryEvent)(this.resourceUri,b.Telemetry.NotebookRestart,{duration:t.elapsedTime},void 0,e),await(n?.dispose().catch(h.noop)),this._ignoreJupyterSessionDisposedErrors=!1,e}await this.initializeAfterStart(this._session),this._onRestarted.fire()}catch(e){throw(0,l.traceError)(`Failed to restart kernel ${(0,u.getDisplayPath)(this.uri)}`,e),e}finally{Promise.all(Array.from(this.hooks.get("restartCompleted")||new Set).map((e=>e()))).ignoreErrors()}}async startJupyterSession(e=new k.DisplayOptions(!1)){if((0,l.traceVerbose)(`Start Jupyter Session in kernel.ts with disableUI = ${e.disableUI}`),this._startedAtLeastOnce=!0,e.disableUI||(this.startupUI.disableUI=!1),e.onDidChangeDisableUI((()=>{!e.disableUI&&this.startupUI.disableUI&&(this.startupUI.disableUI=!1)})),this.startupUI.disableUI?this.startupUI.onDidChangeDisableUI((()=>{this.disposing||this.disposed||this.startupUI.disableUI||(0,v.initializeInteractiveOrNotebookTelemetryBasedOnUserAction)(this.resourceUri,this.kernelConnectionMetadata).ignoreErrors()}),this,this.disposables):await(0,v.initializeInteractiveOrNotebookTelemetryBasedOnUserAction)(this.resourceUri,this.kernelConnectionMetadata),!this._jupyterSessionPromise){const e=new f.StopWatch;await(0,v.trackKernelResourceInformation)(this.resourceUri,{kernelConnection:this.kernelConnectionMetadata,actionSource:this.creator}),this._jupyterSessionPromise=this.createJupyterSession().then((t=>((0,y.sendKernelTelemetryEvent)(this.resourceUri,b.Telemetry.PerceivedJupyterStartupNotebook,{duration:e.elapsedTime}),t))).catch((e=>{throw(0,l.traceInfoIfCI)(`Failed to create Jupyter Session in Kernel.startNotebook for ${(0,u.getDisplayPath)(this.uri)}`),this.startCancellation.cancel(),this._jupyterSessionPromise=void 0,e}))}return this._jupyterSessionPromise.finally((()=>this.sendKernelStartedTelemetry())).catch(h.noop),this._jupyterSessionPromise}async interruptExecution(e,t){const n=(0,d.createDeferred)(),r=new f.StopWatch,i=e.onSessionStatusChanged((e=>{"restarting"!==e&&"autorestarting"!==e||((0,l.traceWarning)("Kernel restarting during interrupt"),n.resolve(!0))}));return e.interrupt().catch((e=>{(0,l.traceWarning)(`Error during interrupt: ${e}`),n.resolve(!0)})),(async()=>{try{const e=await(0,d.waitForPromise)(Promise.race([t,n.promise]),this.kernelSettings.interruptTimeout);return n.completed?C.InterruptResult.Restarted:null===e?C.InterruptResult.TimedOut:C.InterruptResult.Success}catch(e){if(n.completed)return C.InterruptResult.Restarted;throw(0,y.sendKernelTelemetryEvent)(this.resourceUri,b.Telemetry.NotebookInterrupt,{duration:r.elapsedTime},void 0,e),e}finally{i.dispose()}})().then((e=>((0,y.sendKernelTelemetryEvent)(this.resourceUri,b.Telemetry.NotebookInterrupt,{duration:r.elapsedTime},{result:e}),e)))}async createJupyterSession(){let e=[];try{let t="";if(this.kernelConnectionMetadata.interpreter){const e=[];e.push(`Python Path: ${(0,u.getDisplayPath)(this.kernelConnectionMetadata.interpreter.envPath)}`),e.push(`EnvType: ${this.kernelConnectionMetadata.interpreter.envType}`),e.push(`EnvName: '${this.kernelConnectionMetadata.interpreter.envName}'`),e.push(`Version: ${this.kernelConnectionMetadata.interpreter.version?.raw}`),t=` (${e.join(", ")})`}(0,l.traceInfo)(`Starting Jupyter Session ${this.kernelConnectionMetadata.kind}, ${this.kernelConnectionMetadata.id}${t} for '${(0,u.getDisplayPath)(this.uri)}' (disableUI=${this.startupUI.disableUI})`),this.createProgressIndicator(e),this.isKernelDead=!1,this._onStatusChanged.fire("starting");const n=await this.notebookProvider.create({resource:this.resourceUri,ui:this.startupUI,kernelConnection:this.kernelConnectionMetadata,token:this.startCancellation.token,creator:this.creator});return S.Cancellation.throwIfCanceled(this.startCancellation.token),await this.initializeAfterStart(n),this.sendKernelStartedTelemetry(),this._session=n,this._onStarted.fire(),n}catch(e){if(this.startupUI.disableUI?(0,l.traceVerbose)(`failed to create IJupyterKernelConnectionSession in kernel, UI Disabled = ${this.startupUI.disableUI}`,e):this.startCancellation.token||(0,S.isCancellationError)(e)||(0,l.traceError)(`failed to create IJupyterKernelConnectionSession in kernel, UI Disabled = ${this.startupUI.disableUI}`,e),S.Cancellation.throwIfCanceled(this.startCancellation.token),e instanceof m.JupyterConnectError)throw e;const t=p.DataScience.sessionStartFailedWithKernel((0,w.getDisplayNameOrNameOfKernelConnection)(this.kernelConnectionMetadata));throw a.WrappedError.from(t+" "+("message"in e?e.message:e.toString()),e)}finally{(0,c.disposeAllDisposables)(e)}}sendKernelStartedTelemetry(){this.uiWasDisabledWhenKernelStartupTelemetryWasLastSent&&this.uiWasDisabledWhenKernelStartupTelemetryWasLastSent===this.startupUI.disableUI||this.startTelemetrySent&&!this.startupUI.disableUI||(this.uiWasDisabledWhenKernelStartupTelemetryWasLastSent=!0===this.startupUI.disableUI,this.startTelemetrySent=!0,(0,y.sendKernelTelemetryEvent)(this.resourceUri,b.Telemetry.NotebookStart,void 0,{disableUI:this.startupUI.disableUI}))}createProgressIndicator(e){const t=_.KernelProgressReporter.createProgressReporter(this.resourceUri,p.DataScience.connectingToKernel((0,w.getDisplayNameOrNameOfKernelConnection)(this.kernelConnectionMetadata)),this.startupUI.disableUI);e.push(t),this.startupUI.disableUI&&this.startupUI.onDidChangeDisableUI((()=>{this.disposing||this.disposed||this.startupUI.disableUI||t.show&&t.show()}),this,e)}async initializeAfterStart(e){if(await Promise.all(Array.from(this.hooks.get("didStart")||new Set).map((e=>e()))),(0,l.traceVerbose)(`Started running kernel initialization for ${(0,u.getDisplayPath)(this.uri)}`),!e)return void(0,l.traceVerbose)("Not running kernel initialization");if(!this.hookedSessionForEvents.has(e)){this.hookedSessionForEvents.add(e),e.kernelSocket.subscribe(this._kernelSocket),e.onDidDispose((()=>{if((0,l.traceInfoIfCI)(`Kernel got disposed as a result of session.onDisposed ${(0,u.getDisplayPath)(this.resourceUri||this.uri)}`),!this._ignoreJupyterSessionDisposedErrors){(0,l.traceInfo)(`Kernel got disposed as a result of session.onDisposed ${(0,u.getDisplayPath)(this.resourceUri||this.uri)} & _ignoreJupyterSessionDisposedErrors = false.`);const t=this._session===e;this._jupyterSessionPromise=void 0,this._session=void 0,t&&(this.isKernelDead=!0,this._onStatusChanged.fire("dead"))}}));const t=e=>{this._onStatusChanged.fire(e)};this.disposables.push(e.onSessionStatusChanged(t))}e.registerCommTarget(s.Identifiers.DefaultCommTarget,h.noop),await this.determineVersionOfIPyWidgets(e);const t=await this.gatherInternalStartupCode();await this.executeSilently(e,t,{traceErrors:!0,traceErrorsMessage:"Error executing jupyter extension internal startup code"}),"connectToLiveRemoteKernel"!==this.kernelConnectionMetadata.kind&&await this.executeSilently(e,this.getUserStartupCommands(),{traceErrors:!1});try{(0,l.traceVerbose)("Requesting Kernel info");const t=[],n={banner:"",help_links:[],implementation:"",implementation_version:"",language_info:{name:"",version:""},protocol_version:"",status:"ok"};t.push(e.requestKernelInfo().then((e=>e?.content))),"connectToLiveRemoteKernel"===this.kernelConnectionMetadata.kind&&t.push((0,d.sleep)(5e3).then((()=>n)));const r=await Promise.race(t);r===n?(0,l.traceWarning)("Failed to Kernel info in a timely manner, defaulting to empty info!"):(0,l.traceVerbose)("Got Kernel info"),this._info=r}catch(e){(0,l.traceWarning)("Failed to request KernelInfo",e)}"connectToLiveRemoteKernel"!==this.kernelConnectionMetadata.kind&&((0,l.traceVerbose)("End running kernel initialization, now waiting for idle"),await e.waitForIdle(this.kernelSettings.launchTimeout,this.startCancellation.token),(0,l.traceVerbose)("End running kernel initialization, session is idle"))}async determineVersionOfIPyWidgets(e){if(!(0,w.isPythonKernelConnection)(this.kernelConnectionMetadata))return this._ipywidgetsVersion,s.WIDGET_VERSION_NON_PYTHON_KERNELS,void this._onIPyWidgetVersionResolved.fire(s.WIDGET_VERSION_NON_PYTHON_KERNELS);const t=async()=>{const t=P.default`
        try:
            import ipywidgets as _VSCODE_ipywidgets
            print("${I}" + _VSCODE_ipywidgets.__version__)
            del _VSCODE_ipywidgets
        except:
            pass
        `,n=await this.executeSilently(e,[t]).catch((e=>(0,l.traceError)("Failed to determine version of IPyWidgets",e)));if((0,l.traceVerbose)("Determined IPyKernel Version",JSON.stringify(n)),Array.isArray(n)){const e=n.some((e=>(e.text||"")?.toString().includes(`${I}8.`))),t=n.some((e=>(e.text||"")?.toString().includes(`${I}7.`))),r=this._ipywidgetsVersion=t?7:e?8:void 0;(0,l.traceVerbose)("Determined IPyKernel Version and event fired",JSON.stringify(r)),this._ipywidgetsVersion,this._onIPyWidgetVersionResolved.fire(r)}};if(await t(),!this._ipywidgetsVersion&&this.session?.kernel){const e=(n,r)=>{if("send"===r.direction)return;const i=r.msg;i.content&&"data"in i.content&&i.content.data&&(i.content.data[s.WIDGET_MIMETYPE]||"target_name"in i.content&&i.content.target_name===s.Identifiers.DefaultCommTarget)&&(this._ipywidgetsVersion||(t().catch(h.noop),this.session?.kernel&&this.session.kernel.anyMessage.disconnect(e,this)))};this.session.kernel.anyMessage.connect(e,this)}}async gatherInternalStartupCode(){const e=[],t=await Promise.all(this.startupCodeProviders.sort(((e,t)=>t.priority-e.priority)).map((e=>e.getCode(this))));for(let n of t)e.push(...n);if((0,w.isPythonKernelConnection)(this.kernelConnectionMetadata)&&"connectToLiveRemoteKernel"!==this.kernelConnectionMetadata.kind){const t=(0,u.getFilePath)(this.resourceUri);t&&e.push(`__vsc_ipynb_file__ = "${t.replace(/\\/g,"\\\\")}"`),this.kernelSettings.enableExtendedKernelCompletions||e.push(s.CodeSnippets.DisableJedi),e.push(...(n=this.getMatplotLibInitializeCode(),n&&0!==n.length?((n=n.map((e=>`    ${e}`))).unshift("try:"),n.push("except:","    print('Failed to initialize matplotlib startup code. Matplotlib might be missing.')"),n):n))}var n;return e}getMatplotLibInitializeCode(){const e=[];if(this.kernelSettings.themeMatplotlibPlots){(0,l.traceInfoIfCI)(`Initialize config for plots for ${(0,u.getDisplayPath)(this.resourceUri||this.uri)}`);const t=s.CodeSnippets.MatplotLibInit;(0,l.traceVerbose)(`Initialize matplotlib for ${(0,u.getDisplayPath)(this.resourceUri||this.uri)}`),e.push(...t.splitLines({trim:!1}));const n=this.appShell.activeColorTheme.kind===o.ColorThemeKind.Dark;this.kernelSettings.ignoreVscodeTheme||e.push(n?"matplotlib.style.use('dark_background')":`matplotlib.rcParams.update(${s.Identifiers.MatplotLibDefaultParams})`)}return this.kernelSettings.generateSVGPlots&&(e.push(...s.CodeSnippets.AppendSVGFigureFormat.splitLines({trim:!1})),(0,l.traceVerbose)("Add SVG to matplotlib figure formats")),e}getUserStartupCommands(){let e=this.kernelSettings.runStartupCommands;return Array.isArray(e)&&(e=e.join("\n")),e?e.replace(/\\n/g,"\n").splitLines({trim:!1}):[]}async executeSilently(e,t,n){if(e&&0!==t.join("").trim().length)return(0,w.executeSilently)(e,t.join("\n"),n);(0,l.traceVerbose)(`Not executing startup session: ${e?"Object":"undefined"}, code: ${t}`)}}t.ThirdPartyKernel=class extends E{get creator(){return"3rdPartyExtension"}constructor(e,t,n,r,i,o,s){super(e,t,n,r,o,i,s,"3rdPartyExtension")}},t.Kernel=class extends E{get creator(){return"jupyterExtension"}constructor(e,t,n,r,i,o,s,a){super(t.uri,e,n,r,i,o,a,"jupyterExtension"),this.notebook=t,this.controller=s}},t.getPlainTextOrStreamOutput=function(e){if(e.length>0){const t=e[0].data;if(t&&t.hasOwnProperty("text/plain"))return(0,g.concatMultilineString)(t["text/plain"]);if("stream"===e[0].output_type){const t=e[0];return(0,g.concatMultilineString)(t.text)}}}},57410:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelAutoReconnectMonitor=void 0;const o=n(86700),s=n(66828),a=n(10053),c=n(42080),l=n(43138),u=n(86563),d=n(25251),p=n(58681),h=n(9959),f=n(14154),g=n(98729),m=n(47684),y=n(94062),v=n(94433),b=n(46875);let w=class{constructor(e,t,n,r,i){this.appShell=e,this.disposableRegistry=t,this.kernelProvider=n,this.serverUriStorage=r,this.jupyterUriProviderRegistration=i,this.kernelsStartedSuccessfully=new WeakSet,this.kernelConnectionToKernelMapping=new WeakMap,this.kernelsRestarting=new WeakSet,this.kernelReconnectProgress=new WeakMap,this.lastExecutedCellPerKernel=new WeakMap}activate(){this.kernelProvider.onDidStartKernel(this.onDidStartKernel,this,this.disposableRegistry),this.disposableRegistry.push(this.kernelProvider.onDidDisposeKernel((e=>{this.kernelReconnectProgress.get(e)?.dispose(),this.kernelReconnectProgress.delete(e)}),this)),this.disposableRegistry.push(this.kernelProvider.onDidRestartKernel((e=>{this.kernelReconnectProgress.get(e)?.dispose(),this.kernelReconnectProgress.delete(e)}),this)),this.disposableRegistry.push(s.notebooks.onDidChangeNotebookCellExecutionState((e=>{if(!(0,u.isJupyterNotebook)(e.cell.notebook))return;if(e.state!==s.NotebookCellExecutionState.Idle)return;const t=this.kernelProvider.get(e.cell.notebook);t&&this.lastExecutedCellPerKernel.get(t)===e.cell&&this.lastExecutedCellPerKernel.delete(t)})))}onDidStartKernel(e){if(!this.kernelsStartedSuccessfully.has(e)){if(this.kernelProvider.getKernelExecution(e).onPreExecute((t=>this.lastExecutedCellPerKernel.set(e,t)),this,this.disposableRegistry),!e.session?.kernel)return;this.kernelsStartedSuccessfully.add(e),this.kernelConnectionToKernelMapping.set(e.session.kernel,e),e.session?.kernel?.connectionStatusChanged.connect(this.onKernelStatusChanged,this),e.onDisposed((()=>{this.kernelReconnectProgress.get(e)?.dispose(),this.kernelReconnectProgress.delete(e)}),this,this.disposableRegistry),e.addHook("willRestart",(async()=>{this.kernelReconnectProgress.get(e)?.dispose(),this.kernelReconnectProgress.delete(e),this.kernelsRestarting.add(e)}),this,this.disposableRegistry),e.onRestarted((()=>this.kernelsRestarting.delete(e)),this,this.disposableRegistry)}}onKernelStatusChanged(e,t){const n=this.kernelConnectionToKernelMapping.get(e);if(n&&!this.kernelsRestarting.has(n))switch(t){case"connected":return void this.kernelReconnectProgress.delete(n);case"disconnected":return void(this.kernelReconnectProgress.has(n)&&(this.kernelReconnectProgress.delete(n),this.onKernelDisconnected(n)?.ignoreErrors()));case"connecting":return void(this.kernelReconnectProgress.has(n)||this.onKernelConnecting(n)?.ignoreErrors());default:return}}async onKernelConnecting(e){const t=(0,l.createDeferred)(),n=new s.Disposable((()=>t.resolve()));if(this.kernelReconnectProgress.set(e,n),("connectToLiveRemoteKernel"===e.kernelConnectionMetadata.kind||"startUsingRemoteKernelSpec"===e.kernelConnectionMetadata.kind)&&await this.handleRemoteServerReinitiate(e,e.kernelConnectionMetadata))return;const r=d.DataScience.automaticallyReconnectingToAKernelProgressMessage((0,g.getDisplayNameOrNameOfKernelConnection)(e.kernelConnectionMetadata));this.appShell.withProgress({location:s.ProgressLocation.Notification,title:r},(async()=>t.promise)).then(p.noop,p.noop),this.disposableRegistry.push(n)}async onKernelDisconnected(e){if(e.disposed||e.disposing)return;if((0,m.sendKernelTelemetryEvent)(e.resourceUri,h.Telemetry.KernelCrash),("connectToLiveRemoteKernel"===e.kernelConnectionMetadata.kind||"startUsingRemoteKernelSpec"===e.kernelConnectionMetadata.kind)&&await this.handleRemoteServerReinitiate(e,e.kernelConnectionMetadata))return;const t=(0,y.isLocalConnection)(e.kernelConnectionMetadata)?d.DataScience.kernelDisconnected((0,g.getDisplayNameOrNameOfKernelConnection)(e.kernelConnectionMetadata)):d.DataScience.remoteJupyterConnectionFailedWithServer(e.kernelConnectionMetadata.baseUrl);this.appShell.showErrorMessage(t).then(p.noop,p.noop);try{const n=this.lastExecutedCellPerKernel.get(e);if(!n||n.document.isClosed||n.notebook.isClosed)return;if(!1===n.executionSummary?.success)return;await(0,f.endCellAndDisplayErrorsInCell)(n,e.controller,t,!1)}finally{await e.dispose()}}async handleRemoteServerReinitiate(e,t){const n=await this.serverUriStorage.getUriForServer(t.serverId);if(!n)return!1;const r=(0,b.extractJupyterServerHandleAndId)(n.uri);if(!r)return!1;const i=await this.jupyterUriProviderRegistration.getProvider(r.id);if(!i||!i.getHandles)return!1;try{return(await i.getHandles()).includes(r.handle)||(await this.serverUriStorage.removeUri(n.uri),this.kernelReconnectProgress.get(e)?.dispose(),this.kernelReconnectProgress.delete(e)),!0}catch(e){return!1}}};w=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IApplicationShell)),i(1,(0,o.inject)(c.IDisposableRegistry)),i(2,(0,o.inject)(y.IKernelProvider)),i(3,(0,o.inject)(v.IJupyterServerUriStorage)),i(4,(0,o.inject)(v.IJupyterUriProviderRegistration))],w),t.KernelAutoReconnectMonitor=w},35631:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelController=void 0,t.KernelController=class{constructor(e){this.controller=e}get id(){return this.controller.id}createNotebookCellExecution(e){return this.controller.createNotebookCellExecution(e)}}},24649:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelCrashMonitor=void 0;const o=n(86700),s=n(10053),a=n(15925),c=n(42080),l=n(25251),u=n(58681),d=n(47684),p=n(14154),h=n(98729),f=n(94062),g=n(85446);let m=class{constructor(e,t,n){this.disposableRegistry=e,this.applicationShell=t,this.kernelProvider=n,this.lastExecutedCellPerKernel=new WeakMap,this.kernelsStartedSuccessfully=new WeakSet}activate(){this.kernelProvider.onKernelStatusChanged(this.onKernelStatusChanged,this,this.disposableRegistry),this.kernelProvider.onDidStartKernel(this.onDidStartKernel,this,this.disposableRegistry)}onDidStartKernel(e){this.kernelsStartedSuccessfully.add(e),this.kernelProvider.getKernelExecution(e).onPreExecute((t=>this.lastExecutedCellPerKernel.set(e,t)),this,this.disposableRegistry)}async onKernelStatusChanged({kernel:e}){this.kernelsStartedSuccessfully.has(e)&&(e.disposed||e.disposing||!e.session||("localRaw"===e.session.kind&&"dead"===e.status&&(this.applicationShell.showErrorMessage(l.DataScience.kernelDiedWithoutError((0,h.getDisplayNameOrNameOfKernelConnection)(e.kernelConnectionMetadata))).then(u.noop,u.noop),await this.endCellAndDisplayErrorsInCell(e)),"localRaw"!==e.session.kind&&"autorestarting"===e.status&&(this.applicationShell.showErrorMessage(l.DataScience.kernelDiedWithoutErrorAndAutoRestarting((0,h.getDisplayNameOrNameOfKernelConnection)(e.kernelConnectionMetadata))).then(u.noop,u.noop),await this.endCellAndDisplayErrorsInCell(e))))}async endCellAndDisplayErrorsInCell(e){const t=this.lastExecutedCellPerKernel.get(e);if((0,d.sendKernelTelemetryEvent)(e.resourceUri,a.Telemetry.KernelCrash),t)return(0,p.endCellAndDisplayErrorsInCell)(t,e.controller,l.DataScience.kernelCrashedDueToCodeInCurrentOrPreviousCell,!1)}};r([(0,g.swallowExceptions)()],m.prototype,"onKernelStatusChanged",null),m=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IDisposableRegistry)),i(1,(0,o.inject)(s.IApplicationShell)),i(2,(0,o.inject)(f.IKernelProvider))],m),t.KernelCrashMonitor=m},82323:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookKernelExecution=void 0;const r=n(66828),i=n(10152),o=n(35412),s=n(11642),a=n(9959),c=n(88960),l=n(1988),u=n(3130),d=n(14644),p=n(14154),h=n(98729),f=n(61239),g=n(47684),m=n(94062);t.NotebookKernelExecution=class{get executionCount(){return this._visibleExecutionCount}constructor(e,t,n,i,o){this.kernel=e,this.notebook=o,this.disposables=[],this._visibleExecutionCount=0,this._onPreExecute=new r.EventEmitter,this.onPreExecute=this._onPreExecute.event,this._onPostExecute=new r.EventEmitter,this.onPostExecute=this._onPostExecute.event,this.documentExecutions=new WeakMap;const s=new u.CellExecutionMessageHandlerService(t,e.controller,n,i);this.disposables.push(s),this.executionFactory=new l.CellExecutionFactory(e.controller,s),r.notebooks.onDidChangeNotebookCellExecutionState((t=>{t.cell.notebook===e.notebook&&t.state===r.NotebookCellExecutionState.Idle&&t.cell.executionSummary?.executionOrder&&(this._visibleExecutionCount=Math.max(this._visibleExecutionCount,t.cell.executionSummary.executionOrder))})),e.onRestarted((()=>this._visibleExecutionCount=0),this,this.disposables),e.onStarted((()=>this._visibleExecutionCount=0),this,this.disposables),e.addHook("willInterrupt",this.onWillInterrupt,this,this.disposables),e.addHook("willCancel",this.onWillCancel,this,this.disposables),e.addHook("willRestart",(e=>this.onWillRestart(e)),this,this.disposables),this.disposables.push(this._onPreExecute)}get pendingCells(){return this.documentExecutions.get(this.notebook)?.queue||[]}async executeCell(e,t){if((0,p.traceCellMessage)(e,`KernelExecution.executeCell (1), ${(0,o.getDisplayPath)(e.notebook.uri)}`),e.kind==i.NotebookCellKind.Markup)return m.NotebookCellRunState.Success;(0,p.traceCellMessage)(e,`kernel.executeCell, ${(0,o.getDisplayPath)(e.notebook.uri)}`),await(0,f.initializeInteractiveOrNotebookTelemetryBasedOnUserAction)(this.kernel.resourceUri,this.kernel.kernelConnectionMetadata),(0,g.sendKernelTelemetryEvent)(this.kernel.resourceUri,a.Telemetry.ExecuteCell);const n=this.kernel.start(new c.DisplayOptions(!1));await this.kernel.restarting,(0,p.traceCellMessage)(e,`KernelExecution.executeCell (2), ${(0,o.getDisplayPath)(e.notebook.uri)}`);const r=this.getOrCreateCellExecutionQueue(e.notebook,n);r.queueCell(e,t);const l=await r.waitForCompletion([e]);return(0,p.traceCellMessage)(e,`KernelExecution.executeCell completed (3), ${(0,o.getDisplayPath)(e.notebook.uri)}`),(0,s.traceVerbose)(`Cell ${e.index} executed with state ${l[0]}`),l[0]}executeHidden(e){return this.kernel.start().then((t=>(0,h.executeSilently)(t,e)))}async onWillInterrupt(){const e=this.documentExecutions.get(this.notebook);(e||"connectToLiveRemoteKernel"===this.kernel.kernelConnectionMetadata.kind)&&((0,s.traceInfo)("Interrupt kernel execution"),e&&(await e.cancel(),await e.waitForCompletion()))}async onWillCancel(){const e=this.documentExecutions.get(this.notebook);e&&await e.cancel(!0)}async onWillRestart(e){const t=this.documentExecutions.get(this.notebook),n=e?await e.catch((()=>{})):void 0;(0,s.traceInfo)("Restart kernel execution");const r=t?t.cancel(!0).then((()=>t.waitForCompletion())):Promise.resolve();n||((0,s.traceInfo)("No kernel session to interrupt"),await r)}getOrCreateCellExecutionQueue(e,t){const n=this.documentExecutions.get(e);if(n&&!n.isEmpty&&!n.failed)return n;const i=new d.CellExecutionQueue(t,this.executionFactory,this.kernel.kernelConnectionMetadata,this.kernel.resourceUri);return this.disposables.push(i),r.workspace.onDidCloseNotebookDocument((async t=>{t===e&&((0,s.traceVerbose)(`Cancel executions after closing notebook ${(0,o.getDisplayPath)(t.uri)}`),i.failed&&i.isEmpty||await i.cancel(!0))}),this,this.disposables),i.onPreExecute((e=>this._onPreExecute.fire(e)),this,this.disposables),i.onPostExecute((e=>this._onPostExecute.fire(e)),this,this.disposables),this.documentExecutions.set(e,i),i}}},30038:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelFinder=void 0;const o=n(86700),s=n(66828),a=n(42080),c=n(11642),l=n(38994);let u=class{get status(){return this._status}set status(e){this._status!=e&&(this._status=e,this._onDidChangeStatus.fire())}get onDidChangeStatus(){return this._onDidChangeStatus.event}constructor(e){this.disposables=e,this._onDidChangeRegistrations=new s.EventEmitter,this.onDidChangeRegistrations=this._onDidChangeRegistrations.event,this._finders=[],this.connectionFinderMapping=new Map,this._onDidChangeKernels=new s.EventEmitter,this.onDidChangeKernels=this._onDidChangeKernels.event,this._status="idle",this._onDidChangeStatus=new s.EventEmitter,e.push(this._onDidChangeStatus),e.push(this._onDidChangeRegistrations)}registerKernelFinder(e){this._finders.push(e),"discovering"===e.status&&(this.status="discovering");const t=e.onDidChangeStatus((()=>this.status=this._finders.every((e=>"idle"===e.status))?"idle":"discovering"),this,this.disposables),n=e.onDidChangeKernels((()=>this._onDidChangeKernels.fire()));return this.disposables.push(n),this._onDidChangeKernels.fire(),this._onDidChangeRegistrations.fire({added:[e],removed:[]}),{dispose:()=>{const r=this._finders.findIndex((t=>t===e));this._finders.splice(r,1),n.dispose(),t.dispose(),this._onDidChangeKernels.fire(),this._onDidChangeRegistrations.fire({added:[],removed:[e]})}}}get kernels(){const e=[];this.connectionFinderMapping.clear();const t=new Set;this._finders.filter((e=>e.kind===l.ContributedKernelFinderKind.LocalPythonEnvironment)).forEach((n=>{n.kernels.forEach((r=>{"startUsingLocalKernelSpec"!==r.kind&&"startUsingPythonInterpreter"!==r.kind||!r.kernelSpec.specFile||t.add(r.kernelSpec.specFile),e.push(r),this.connectionFinderMapping.set(r.id,n)}))})),this._finders.filter((e=>e.kind===l.ContributedKernelFinderKind.LocalKernelSpec)).forEach((n=>{n.kernels.forEach((r=>{("startUsingLocalKernelSpec"===r.kind||"startUsingPythonInterpreter"===r.kind)&&r.kernelSpec.specFile&&t.has(r.kernelSpec.specFile)||(e.push(r),this.connectionFinderMapping.set(r.id,n))}))}));const n=this._finders.filter((e=>e.kind===l.ContributedKernelFinderKind.Remote));for(const t of n){const n=t.kernels;n.forEach((e=>{this.connectionFinderMapping.set(e.id,t)})),e.push(...n)}return(0,c.traceInfoIfCI)(`list kernel specs ${e.length}: ${e.map((e=>`${e.id}, ${e.kind}, ${e.interpreter?.uri}`)).join("\n")}`),e}getFinderForConnection(e){return this.connectionFinderMapping.get(e.id)}get registered(){return this._finders}};u=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IDisposableRegistry))],u),t.KernelFinder=u},2055:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseThirdPartyKernelProvider=t.BaseCoreKernelProvider=void 0;const r=n(66828),i=n(11642),o=n(35412),s=n(58681);t.BaseCoreKernelProvider=class{get kernels(){const e=new Set;return this.notebook.notebookDocuments.forEach((t=>{const n=this.get(t);n&&e.add(n)})),Array.from(e)}constructor(e,t,n){this.asyncDisposables=e,this.disposables=t,this.notebook=n,this.executions=new WeakMap,this.kernelsByNotebook=new WeakMap,this.pendingDisposables=new Set,this._onDidRestartKernel=new r.EventEmitter,this._onDidStartKernel=new r.EventEmitter,this._onDidCreateKernel=new r.EventEmitter,this._onDidDisposeKernel=new r.EventEmitter,this._onKernelStatusChanged=new r.EventEmitter,this.onKernelStatusChanged=this._onKernelStatusChanged.event,this.asyncDisposables.push(this),this.notebook.onDidCloseNotebookDocument((e=>this.disposeOldKernel(e)),this,t),t.push(this._onDidDisposeKernel),t.push(this._onDidRestartKernel),t.push(this._onKernelStatusChanged),t.push(this._onDidStartKernel),t.push(this._onDidCreateKernel)}get onDidDisposeKernel(){return this._onDidDisposeKernel.event}get onDidRestartKernel(){return this._onDidRestartKernel.event}get onDidStartKernel(){return this._onDidStartKernel.event}get onDidCreateKernel(){return this._onDidCreateKernel.event}get(e){if((0,s.isUri)(e)){const t=this.notebook.notebookDocuments.find((t=>t.uri.toString()===e.toString()));return t?this.get(t):void 0}return this.kernelsByNotebook.get(e)?.kernel}getKernelExecution(e){return this.executions.get(e)}getInternal(e){return this.kernelsByNotebook.get(e)}async dispose(){(0,i.traceInfoIfCI)("Disposing all kernels from kernel provider");const e=Array.from(this.pendingDisposables.values());this.pendingDisposables.clear(),await Promise.all(e),await Promise.all(this.kernels.map((e=>e.dispose())))}storeKernel(e,t,n){this.kernelsByNotebook.set(e,{options:t,kernel:n}),this._onDidCreateKernel.fire(n)}deleteMappingIfKernelIsDisposed(e){e.onDisposed((()=>{this.get(e.notebook)===e&&(this.kernelsByNotebook.delete(e.notebook),(0,i.traceVerbose)(`Kernel got disposed, hence there is no longer a kernel associated with ${(0,o.getDisplayPath)(e.uri)}`)),this.pendingDisposables.delete(e)}),this,this.disposables)}disposeOldKernel(e){const t=this.kernelsByNotebook.get(e);t&&((0,i.traceInfoIfCI)(`Disposing kernel associated with ${(0,o.getDisplayPath)(e.uri)}, isClosed=${e.isClosed}`),this.pendingDisposables.add(t.kernel),t.kernel.dispose().catch((e=>(0,i.traceWarning)("Failed to dispose old kernel",e))).finally((()=>this.pendingDisposables.delete(t.kernel))).catch(s.noop)),this.kernelsByNotebook.delete(e)}handleUriRemoval(e){this.notebook.notebookDocuments.forEach((t=>{const n=this.kernelsByNotebook.get(t);if(n){const r=n.options.metadata;"connectToLiveRemoteKernel"!==r.kind&&"startUsingRemoteKernelSpec"!==r.kind||e.find((e=>e.serverId===r.serverId))&&this.kernelsByNotebook.delete(t)}}))}},t.BaseThirdPartyKernelProvider=class{get kernels(){return Array.from(this.kernelsByUri.values()).map((e=>e.kernel))}constructor(e,t,n){this.asyncDisposables=e,this.disposables=t,this.notebook=n,this.kernelsByUri=new Map,this.pendingDisposables=new Set,this._onDidRestartKernel=new r.EventEmitter,this._onDidStartKernel=new r.EventEmitter,this._onDidCreateKernel=new r.EventEmitter,this._onDidDisposeKernel=new r.EventEmitter,this._onKernelStatusChanged=new r.EventEmitter,this.onKernelStatusChanged=this._onKernelStatusChanged.event,this.asyncDisposables.push(this),this.notebook.onDidCloseNotebookDocument((e=>this.disposeOldKernel(e.uri)),this,t),t.push(this._onDidDisposeKernel),t.push(this._onDidRestartKernel),t.push(this._onKernelStatusChanged),t.push(this._onDidStartKernel),t.push(this._onDidCreateKernel)}get onDidDisposeKernel(){return this._onDidDisposeKernel.event}get onDidRestartKernel(){return this._onDidRestartKernel.event}get onDidStartKernel(){return this._onDidStartKernel.event}get onDidCreateKernel(){return this._onDidCreateKernel.event}get(e){return this.kernelsByUri.get(e.toString())?.kernel}getInternal(e){return this.kernelsByUri.get(e.toString())}async dispose(){(0,i.traceInfoIfCI)("Disposing all kernels from kernel provider");const e=Array.from(this.pendingDisposables.values());this.pendingDisposables.clear(),await Promise.all(e),await Promise.all(this.kernels.map((e=>e.dispose())))}storeKernel(e,t,n){this.kernelsByUri.set(e.toString(),{options:t,kernel:n}),this._onDidCreateKernel.fire(n)}deleteMappingIfKernelIsDisposed(e,t){t.onDisposed((()=>{this.get(e)===t&&(this.kernelsByUri.delete(e.toString()),(0,i.traceVerbose)(`Kernel got disposed, hence there is no longer a kernel associated with ${(0,o.getDisplayPath)(e)}`)),this.pendingDisposables.delete(t)}),this,this.disposables)}disposeOldKernel(e){const t=this.kernelsByUri.get(e.toString());t&&((0,i.traceInfoIfCI)(`Disposing kernel associated with ${(0,o.getDisplayPath)(e)}`),this.pendingDisposables.add(t.kernel),t.kernel.dispose().catch((e=>(0,i.traceWarning)("Failed to dispose old kernel",e))).finally((()=>this.pendingDisposables.delete(t.kernel))).catch(s.noop)),this.kernelsByUri.delete(e.toString())}}},38404:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ThirdPartyKernelProvider=t.KernelProvider=void 0;const o=n(86700),s=n(10053),a=n(15925),c=n(42080),l=n(2055),u=n(22021),d=n(94062),p=n(94433),h=n(52006),f=n(82323);let g=class extends l.BaseCoreKernelProvider{constructor(e,t,n,r,i,o,s,a,c,l){super(e,t,o),this.notebookProvider=n,this.configService=r,this.appShell=i,this.context=s,this.formatters=c,this.startupCodeProviders=l,t.push(a.onDidRemoveUris(this.handleUriRemoval.bind(this)))}getOrCreate(e,t){const n=this.getInternal(e);if(n&&n.options.metadata.id===t.metadata.id)return n.kernel;this.disposeOldKernel(e);const r=e?.notebookType===a.InteractiveWindowView?t.resourceUri:e.uri,i=(0,h.createKernelSettings)(this.configService,r),o=new u.Kernel(r,e,t.metadata,this.notebookProvider,i,this.appShell,t.controller,this.startupCodeProviders);return o.onRestarted((()=>this._onDidRestartKernel.fire(o)),this,this.disposables),o.onDisposed((()=>this._onDidDisposeKernel.fire(o)),this,this.disposables),o.onStarted((()=>this._onDidStartKernel.fire(o)),this,this.disposables),o.onStatusChanged((e=>this._onKernelStatusChanged.fire({kernel:o,status:e})),this,this.disposables),this.executions.set(o,new f.NotebookKernelExecution(o,this.appShell,this.context,this.formatters,e)),this.asyncDisposables.push(o),this.storeKernel(e,t,o),this.deleteMappingIfKernelIsDisposed(o),o}};g=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IAsyncDisposableRegistry)),i(1,(0,o.inject)(c.IDisposableRegistry)),i(2,(0,o.inject)(d.INotebookProvider)),i(3,(0,o.inject)(c.IConfigurationService)),i(4,(0,o.inject)(s.IApplicationShell)),i(5,(0,o.inject)(s.IVSCodeNotebook)),i(6,(0,o.inject)(c.IExtensionContext)),i(7,(0,o.inject)(p.IJupyterServerUriStorage)),i(8,(0,o.multiInject)(d.ITracebackFormatter)),i(9,(0,o.multiInject)(d.IStartupCodeProvider))],g),t.KernelProvider=g;let m=class extends l.BaseThirdPartyKernelProvider{constructor(e,t,n,r,i,o,s){super(e,t,o),this.notebookProvider=n,this.configService=r,this.appShell=i,this.startupCodeProviders=s}getOrCreate(e,t){const n=this.getInternal(e);if(n&&n.options.metadata.id===t.metadata.id)return n.kernel;this.disposeOldKernel(e);const r=e,i=(0,h.createKernelSettings)(this.configService,r),o=new u.ThirdPartyKernel(e,r,t.metadata,this.notebookProvider,this.appShell,i,this.startupCodeProviders);return o.onRestarted((()=>this._onDidRestartKernel.fire(o)),this,this.disposables),o.onDisposed((()=>this._onDidDisposeKernel.fire(o)),this,this.disposables),o.onStarted((()=>this._onDidStartKernel.fire(o)),this,this.disposables),o.onStatusChanged((e=>this._onKernelStatusChanged.fire({kernel:o,status:e})),this,this.disposables),this.asyncDisposables.push(o),this.storeKernel(e,t,o),this.deleteMappingIfKernelIsDisposed(e,o),o}};m=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IAsyncDisposableRegistry)),i(1,(0,o.inject)(c.IDisposableRegistry)),i(2,(0,o.inject)(d.INotebookProvider)),i(3,(0,o.inject)(c.IConfigurationService)),i(4,(0,o.inject)(s.IApplicationShell)),i(5,(0,o.inject)(s.IVSCodeNotebook)),i(6,(0,o.multiInject)(d.IStartupCodeProvider))],m),t.ThirdPartyKernelProvider=m},40465:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelRefreshIndicator=void 0;const s=n(86700),a=o(n(71171)),c=n(66828),l=n(15925),u=n(20397),d=n(42080),p=n(11642),h=n(94062);let f=0,g=class{constructor(e,t){this.kernelFinder=t,this.disposables=[],e.push(this)}dispose(){(0,u.disposeAllDisposables)(this.disposables)}activate(){this.startRefresh()}startRefresh(){if(!this.refreshedOnceBefore)return"discovering"===this.kernelFinder.status?this.displayProgressIndicator():void this.kernelFinder.onDidChangeStatus((()=>{"discovering"===this.kernelFinder.status&&this.displayProgressIndicator()}),this,this.disposables)}displayProgressIndicator(){const e=(0,a.default)();f+=1,(0,p.traceVerbose)(`Create Notebook Controller Detection Task ${e}, total detections = ${f}`);const t=c.notebooks.createNotebookControllerDetectionTask(l.JupyterNotebookView),n=c.notebooks.createNotebookControllerDetectionTask(l.InteractiveWindowView);this.disposables.push(t),this.disposables.push(n),this.kernelFinder.onDidChangeStatus((()=>{"idle"===this.kernelFinder.status&&(f-=1,(0,p.traceVerbose)(`Complete Notebook Controller Detection Task ${e}, total detections = ${f}`),t.dispose(),n.dispose())}),this,this.disposables)}};g=r([(0,s.injectable)(),i(0,(0,s.inject)(d.IDisposableRegistry)),i(1,(0,s.inject)(h.IKernelFinder))],g),t.KernelRefreshIndicator=g},52006:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createKernelSettings=void 0,t.createKernelSettings=function(e,t){return{get enableExtendedKernelCompletions(){return e.getSettings(t).enableExtendedKernelCompletions},get generateSVGPlots(){return e.getSettings(t).generateSVGPlots},get ignoreVscodeTheme(){return e.getSettings(t).ignoreVscodeTheme},get interruptTimeout(){return e.getSettings(t).jupyterInterruptTimeout},get launchTimeout(){return e.getSettings(t).jupyterLaunchTimeout},get runStartupCommands(){return e.getSettings(t).runStartupCommands},get themeMatplotlibPlots(){return e.getSettings(t).themeMatplotlibPlots}}}},97102:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelStatusProvider=void 0;const o=n(86700),s=n(20397),a=n(42080),c=n(25251),l=n(72584),u=n(98729),d=n(94062);let p=class{constructor(e,t){this.kernelProvider=e,this.disposables=[],this.restartProgress=new WeakMap,this.interruptProgress=new WeakMap,t.push(this)}dispose(){(0,s.disposeAllDisposables)(this.disposables)}activate(){this.kernelProvider.onDidCreateKernel(this.onDidCreateKernel,this,this.disposables),this.kernelProvider.onDidDisposeKernel((e=>{this.restartProgress.get(e)?.dispose(),this.interruptProgress.get(e)?.dispose()}),this,this.disposables)}onDidCreateKernel(e){e.addHook("willRestart",(async()=>{this.restartProgress.get(e)?.dispose();const t=l.KernelProgressReporter.createProgressReporter(e.resourceUri,c.DataScience.restartingKernelStatus(`: ${(0,u.getDisplayNameOrNameOfKernelConnection)(e.kernelConnectionMetadata)}`));this.restartProgress.set(e,t)}),this,this.disposables),e.addHook("restartCompleted",(async()=>{this.restartProgress.get(e)?.dispose(),this.interruptProgress.get(e)?.dispose()}),this,this.disposables),e.addHook("willInterrupt",(async()=>{const t=l.KernelProgressReporter.createProgressReporter(e.resourceUri,c.DataScience.interruptKernelStatus);this.interruptProgress.set(e,t)}),this,this.disposables),e.addHook("interruptCompleted",(async()=>this.interruptProgress.get(e)?.dispose()),this,this.disposables)}};p=r([(0,o.injectable)(),i(0,(0,o.inject)(d.IKernelProvider)),i(1,(0,o.inject)(a.IDisposableRegistry))],p),t.KernelStatusProvider=p},85493:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendKernelSpecTelemetry=void 0;const r=n(15925),i=n(9959),o=["/bin/sh","/bin/bash","/bin/zsh"];t.sendKernelSpecTelemetry=function(e,t){const n=(e.argv||[]).some((e=>(e=e.toLowerCase(),o.some((t=>e.includes(t))))));(0,i.sendTelemetryEvent)(r.Telemetry.KernelSpecLanguage,void 0,{language:e.language,kind:t,usesShell:n})}},15467:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.TrustedKernelPaths=void 0;const i=n(86700);let o=class{isTrusted(e){return!0}};o=r([(0,i.injectable)()],o),t.TrustedKernelPaths=o},32378:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ITrustedKernelPaths=void 0,t.ITrustedKernelPaths=Symbol("ITrustedKernelPaths")},99216:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IRawNotebookProvider=t.IRawNotebookSupportedService=t.IKernelLauncher=void 0,t.IKernelLauncher=Symbol("IKernelLauncher"),t.IRawNotebookSupportedService=Symbol("IRawNotebookSupportedService"),t.IRawNotebookProvider=Symbol("IRawNotebookProvider")},19218:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteJupyterServerMruUpdate=void 0;const o=n(86700),s=n(66828),a=n(20397),c=n(42080),l=n(94433),u=n(94062);let d=class{constructor(e,t,n){this.serverStorage=e,this.kernelProvider=t,this.disposables=[],this.monitoredKernels=new WeakMap,n.push(this)}dispose(){(0,a.disposeAllDisposables)(this.disposables)}activate(){this.kernelProvider.onDidStartKernel(this.onDidStartKernel,this,this.disposables),this.kernelProvider.onDidRestartKernel(this.onDidStartKernel,this,this.disposables)}onDidStartKernel(e){const t=e.kernelConnectionMetadata;(0,u.isRemoteConnection)(t)&&!this.monitoredKernels.has(e)&&(this.monitoredKernels.set(e,void 0),e.onStatusChanged((()=>{const n=this.monitoredKernels.get(e);if(n&&clearTimeout(n),"idle"===e.status&&!e.disposed&&!e.disposing){const n=Date.now(),r=setTimeout((()=>{this.serverStorage.addServerToUriList(t.serverId,n).ignoreErrors()}),6e4);this.monitoredKernels.set(e,r),this.disposables.push(new s.Disposable((()=>clearTimeout(r))))}}),this,this.disposables),this.serverStorage.addServerToUriList(t.serverId,Date.now()).ignoreErrors())}};d=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IJupyterServerUriStorage)),i(1,(0,o.inject)(u.IKernelProvider)),i(2,(0,o.inject)(c.IDisposableRegistry))],d),t.RemoteJupyterServerMruUpdate=d},9086:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const i=n(52064),o=n(77886),s=n(15925),a=n(9959),c=n(99216),l=n(24649),u=n(24150),d=n(86700),p=n(94062),h=n(38404),f=n(30038),g=n(76385),m=n(7214),y=n(43719),v=n(75e3),b=n(68650),w=n(81296),C=n(57410),S=n(15467),_=n(32378),k=n(97102),P=n(61254),I=n(40465),E=n(19218);let T=class{constructor(){this.isSupported=!1}};T=r([(0,d.injectable)()],T),t.registerTypes=function(e,t){e.addSingleton(c.IRawNotebookSupportedService,T),(0,a.setSharedProperty)("isInsiderExtension",(0,s.isPreReleaseVersion)());const n=e.get(o.IPythonExtensionChecker);(0,a.setSharedProperty)("isPythonExtensionInstalled",n.isPythonExtensionInstalled?"true":"false");const r=e.get(c.IRawNotebookSupportedService);(0,a.setSharedProperty)("rawKernelSupported",r.isSupported?"true":"false"),e.addSingleton(m.IKernelVariableRequester,b.PythonVariablesRequester,s.Identifiers.PYTHON_VARIABLES_REQUESTER),e.addSingleton(m.IJupyterVariables,v.JupyterVariables,s.Identifiers.ALL_VARIABLES),e.addSingleton(m.IJupyterVariables,y.KernelVariables,s.Identifiers.KERNEL_VARIABLES),e.addSingleton(i.IExtensionSyncActivationService,l.KernelCrashMonitor),e.addSingleton(i.IExtensionSyncActivationService,I.KernelRefreshIndicator),e.addSingleton(i.IExtensionSyncActivationService,k.KernelStatusProvider),e.addSingleton(i.IExtensionSyncActivationService,C.KernelAutoReconnectMonitor),e.addSingleton(i.IExtensionSyncActivationService,P.KernelCompletionsPreWarmer),e.addSingleton(i.IExtensionSyncActivationService,E.RemoteJupyterServerMruUpdate),e.addSingleton(p.IKernelProvider,h.KernelProvider),e.addSingleton(_.ITrustedKernelPaths,S.TrustedKernelPaths),e.addSingleton(p.IThirdPartyKernelProvider,h.ThirdPartyKernelProvider),e.addSingleton(g.PreferredRemoteKernelIdProvider,g.PreferredRemoteKernelIdProvider),e.addSingleton(p.IKernelFinder,f.KernelFinder),(0,u.registerTypes)(e,t),e.addSingleton(i.IExtensionSyncActivationService,w.CellOutputDisplayIdTracker)}},61239:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeInteractiveOrNotebookTelemetryBasedOnUserAction=t.trackKernelResourceInformation=void 0;const r=n(17835),i=n(15925),o=n(96434),s=n(46031),a=n(86563),c=n(52859),l=n(35412),u=n(10499);async function d(e,t){if(!e)return;const n=(0,c.getComparisonKey)(e),[d,p]=u.trackedInfo.get(n)||[{resourceType:(0,a.getResourceType)(e),resourceHash:e?await(0,o.getTelemetrySafeHashedString)(e.toString()):void 0,kernelSessionId:await(0,o.getTelemetrySafeHashedString)(Date.now().toString()),capturedEnvVars:void 0,userExecutedCell:void 0,disableUI:void 0,kernelLanguage:void 0,kernelId:void 0,kernelSpecHash:void 0,isUsingActiveInterpreter:void 0,pythonEnvironmentType:void 0,pythonEnvironmentPath:void 0,pythonEnvironmentVersion:void 0,kernelConnectionType:void 0},{previouslySelectedKernelConnectionId:""}];"boolean"==typeof t.capturedEnvVars&&(d.capturedEnvVars=t.capturedEnvVars),t.userExecutedCell&&(d.userExecutedCell=!0),"boolean"==typeof t.disableUI&&(d.disableUI=t.disableUI);const h=t.kernelConnection;if(h){const n=h.id;let a;switch(p.previouslySelectedKernelConnectionId!==n&&(d.userExecutedCell=t.userExecutedCell,d.disableUI=t.disableUI),p.previouslySelectedKernelConnectionId&&p.previouslySelectedKernelConnectionId!==n&&(d.kernelSessionId=await(0,o.getTelemetrySafeHashedString)(Date.now().toString())),h.kind){case"connectToLiveRemoteKernel":a=h.kernelModel.language;break;case"startUsingRemoteKernelSpec":case"startUsingLocalKernelSpec":a=h.kernelSpec.language;break;case"startUsingPythonInterpreter":a=i.PYTHON_LANGUAGE}const c="kernelSpec"in h&&h.kernelSpec.specFile?(0,o.getTelemetrySafeHashedString)(h.kernelSpec.specFile):Promise.resolve("");[d.kernelLanguage,d.kernelId,d.kernelSpecHash]=await Promise.all([a,(0,o.getTelemetrySafeHashedString)(h.id),c]),p.previouslySelectedKernelConnectionId=h.id;const f=h.interpreter;if(f){if(d.isUsingActiveInterpreter=r.WorkspaceInterpreterTracker.isActiveWorkspaceInterpreter(e,f),d.pythonEnvironmentType=f.envType,d.pythonEnvironmentPath=await(0,o.getTelemetrySafeHashedString)((0,l.getFilePath)((0,s.getNormalizedInterpreterPath)(f.uri))),u.pythonEnvironmentsByHash.set(d.pythonEnvironmentPath,f),f.version){const{major:e,minor:t,patch:n}=f.version;d.pythonEnvironmentVersion=`${e}.${t}.${n}`}else d.pythonEnvironmentVersion=void 0;(0,u.updatePythonPackages)(d)}d.kernelConnectionType=d.kernelConnectionType||h?.kind}else p.previouslySelectedKernelConnectionId="";u.trackedInfo.set(n,[d,p])}t.trackKernelResourceInformation=d,t.initializeInteractiveOrNotebookTelemetryBasedOnUserAction=async function(e,t){await d(e,{kernelConnection:t,userExecutedCell:!0})}},47684:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendKernelTelemetryEvent=void 0;const r=n(9959),i=n(10499);t.sendKernelTelemetryEvent=function(e,t,n,o,s){(0,i.getContextualPropsForTelemetry)(e).then((e=>{Object.assign(e,o||{}),(0,r.sendTelemetryEvent)(t,n,e,s)})).ignoreErrors()}},94062:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.IStartupCodeProvider=t.ITracebackFormatter=t.IKernelFinder=t.IKernelDependencyService=t.KernelInterpreterDependencyResponse=t.INotebookProvider=t.InterruptResult=t.IThirdPartyKernelProvider=t.IKernelProvider=t.isRemoteConnection=t.isLocalConnection=t.PythonKernelConnectionMetadata=t.RemoteKernelSpecConnectionMetadata=t.LocalKernelSpecConnectionMetadata=t.LiveRemoteKernelConnectionMetadata=t.BaseKernelConnectionMetadata=t.NotebookCellRunState=void 0;const s=o(n(15948)),a=n(24353),c=n(58681),l=n(96434),u=n(46031),d=n(15925),p=n(9959);async function h(e){if(!(0,c.isWeb)()&&e.interpreter?.uri){const t=e.interpreter.uri.fsPath,n=(0,u.getNormalizedInterpreterPath)(e.interpreter.uri).fsPath,r=e.id.replace(t,n);return(0,l.getTelemetrySafeHashedString)(r)}return(0,l.getTelemetrySafeHashedString)(e.id)}var f,g,m;(f=t.NotebookCellRunState||(t.NotebookCellRunState={})).Idle="Idle",f.Success="Success",f.Error="Error";class y{static fromJSON(e){const t=Object.assign(e,{});switch(t.interpreter&&(t.interpreter=(0,a.deserializePythonEnvironment)(t.interpreter,"")),e.kind){case"startUsingLocalKernelSpec":return b.create(t);case"connectToLiveRemoteKernel":return v.create(t);case"startUsingRemoteKernelSpec":return w.create(t);case"startUsingPythonInterpreter":return C.create(t);default:throw new Error(`Invalid object to be deserialized into a connection, kind = ${t.kind}`)}}}t.BaseKernelConnectionMetadata=y;class v{constructor(e){this.kind="connectToLiveRemoteKernel",this.kernelModel=e.kernelModel,this.interpreter=e.interpreter,this.baseUrl=e.baseUrl,this.id=e.id,this.serverId=e.serverId,k(this)}static create(e){return new v(e)}getHashId(){return h(this)}toJSON(){return{id:this.id,kind:this.kind,baseUrl:this.baseUrl,serverId:this.serverId,interpreter:(0,a.serializePythonEnvironment)(this.interpreter),kernelModel:this.kernelModel}}static fromJSON(e){return y.fromJSON(e)}}t.LiveRemoteKernelConnectionMetadata=v;class b{constructor(e){this.kind="startUsingLocalKernelSpec",this.kernelSpec=e.kernelSpec,this.interpreter=e.interpreter,this.id=e.id,k(this)}static create(e){return new b(e)}getHashId(){return h(this)}toJSON(){return{id:this.id,kernelSpec:this.kernelSpec,interpreter:(0,a.serializePythonEnvironment)(this.interpreter),kind:this.kind}}static fromJSON(e){return y.fromJSON(e)}}t.LocalKernelSpecConnectionMetadata=b;class w{constructor(e){this.kind="startUsingRemoteKernelSpec",this.interpreter=e.interpreter,this.kernelSpec=e.kernelSpec,this.baseUrl=e.baseUrl,this.id=e.id,this.serverId=e.serverId,k(this)}static create(e){return new w(e)}getHashId(){return h(this)}toJSON(){return{id:this.id,kernelSpec:this.kernelSpec,interpreter:(0,a.serializePythonEnvironment)(this.interpreter),baseUrl:this.baseUrl,serverId:this.serverId,kind:this.kind}}static fromJSON(e){return y.fromJSON(e)}}t.RemoteKernelSpecConnectionMetadata=w;class C{constructor(e){this.kind="startUsingPythonInterpreter",this.kernelSpec=e.kernelSpec,this.interpreter=e.interpreter,this.id=e.id,k(this)}static create(e){return new C(e)}getHashId(){return h(this)}toJSON(){return{id:this.id,kernelSpec:this.kernelSpec,interpreter:(0,a.serializePythonEnvironment)(this.interpreter),kind:this.kind}}static fromJSON(e){return y.fromJSON(e)}}function S(e){return"startUsingLocalKernelSpec"===e.kind||"startUsingPythonInterpreter"===e.kind}t.PythonKernelConnectionMetadata=C,t.isLocalConnection=S,t.isRemoteConnection=function(e){return!S(e)},t.IKernelProvider=Symbol("IKernelProvider"),t.IThirdPartyKernelProvider=Symbol("IThirdPartyKernelProvider"),(m=t.InterruptResult||(t.InterruptResult={})).Success="success",m.TimedOut="timeout",m.Restarted="restart",t.INotebookProvider=Symbol("INotebookProvider"),(g=t.KernelInterpreterDependencyResponse||(t.KernelInterpreterDependencyResponse={}))[g.ok=0]="ok",g[g.cancel=1]="cancel",g[g.failed=2]="failed",g[g.selectDifferentKernel=3]="selectDifferentKernel",g[g.uiHidden=4]="uiHidden",t.IKernelDependencyService=Symbol("IKernelDependencyService"),t.IKernelFinder=Symbol("IKernelFinder"),t.ITracebackFormatter=Symbol("ITracebackFormatter"),t.IStartupCodeProvider=Symbol("IStartupCodeProvider");const _=new Set;function k(e){if(_.has(e.id))return;_.add(e.id);const t="kernelSpec"in e?e.kernelSpec:void 0,n=t?.language||("startUsingPythonInterpreter"===e.kind?d.PYTHON_LANGUAGE:void 0);let r="",i="";const o="interpreter"in e?e.interpreter:void 0;let a;t&&Array.isArray(t.argv)&&t.argv.length>0&&(r=t.argv[0],a=r.toLowerCase()===o?.uri?.fsPath?.toLowerCase(),s.basename(r)!==r&&(r=`<P>${s.basename(r)}`),i=t.argv.map((e=>e.includes("/")||e.includes("\\")?`<P>${s.basename(e)}`:e)).join("<#>"));const u="kernelSpec"in e&&e.kernelSpec.specFile?(0,l.getTelemetrySafeHashedString)(e.kernelSpec.specFile):Promise.resolve(""),h=(0,l.getTelemetrySafeHashedString)(e.id);Promise.all([u,h]).then((([t,s])=>(0,p.sendTelemetryEvent)(d.Telemetry.KernelSpec,void 0,{kernelId:s,kernelSpecHash:t,kernelConnectionType:e.kind,kernelLanguage:n,envType:o?.envType,isArgv0SameAsInterpreter:a,argv0:r,argv:i}))).catch(c.noop)}},50068:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertDebugProtocolVariableToIJupyterVariable=t.DataViewableTypes=void 0,t.DataViewableTypes=new Set(["DataFrame","list","dict","ndarray","Series","Tensor","EagerTensor","DataArray"]),t.convertDebugProtocolVariableToIJupyterVariable=function(e){return{name:e.evaluateName??e.name,type:e.type,count:0,shape:"",size:0,supportsDataExplorer:t.DataViewableTypes.has(e.type||""),value:e.value,truncated:!0,frameId:e.variablesReference}}},75e3:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterVariables=void 0;const o=n(86700),s=n(66828),a=n(42080),c=n(15925),l=n(9959),u=n(7214);let d=class{constructor(e,t,n){this.kernelVariables=t,this.debuggerVariables=n,this.refreshEventEmitter=new s.EventEmitter,e.push(n.refreshRequired(this.fireRefresh.bind(this))),e.push(t.refreshRequired(this.fireRefresh.bind(this)))}get refreshRequired(){return this.refreshEventEmitter.event}async getVariables(e,t){return this.variableHandler.getVariables(e,t)}async getFullVariable(e,t){return this.variableHandler.getFullVariable(e,t)}async getMatchingVariable(e,t,n){return this.variableHandler.getMatchingVariable(e,t,n)}async getDataFrameInfo(e,t,n,r){return this.variableHandler.getDataFrameInfo(e,t,n,r)}async getDataFrameRows(e,t,n,r,i){return this.variableHandler.getDataFrameRows(e,t,n,r,i)}get variableHandler(){return this.debuggerVariables.active?this.debuggerVariables:this.kernelVariables}fireRefresh(){this.refreshEventEmitter.fire()}};r([(0,l.capturePerfTelemetry)(l.Telemetry.VariableExplorerFetchTime)],d.prototype,"getVariables",null),d=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IDisposableRegistry)),i(1,(0,o.inject)(u.IJupyterVariables)),i(1,(0,o.named)(c.Identifiers.KERNEL_VARIABLES)),i(2,(0,o.inject)(u.IJupyterVariables)),i(2,(0,o.named)(c.Identifiers.DEBUGGER_VARIABLES))],d),t.JupyterVariables=d},43719:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelVariables=void 0;const o=n(86700),s=n(66828),a=n(15925),c=n(42080),l=n(43138),u=n(58323),d=n(98729),p=n(94062),h=n(7214),f=/Type:\s*(\w+)/,g=/Value:\s*(.*)/,m=/String form:\s*([\s\S]+?)\n/,y=/Docstring:\s*(.*)/,v=/Length:\s+(.*)/,b=/^\s+\[(\d+) rows x (\d+) columns\]/m,w=new Set(["DataFrame","list","dict","ndarray","Series","Tensor","EagerTensor","DataArray"]);let C=class{constructor(e,t,n,r){this.configService=e,this.disposables=n,this.kernelProvider=r,this.variableRequesters=new Map,this.cachedVariables=new Map,this.refreshEventEmitter=new s.EventEmitter,this.variableRequesters.set(a.PYTHON_LANGUAGE,t)}get refreshRequired(){return this.refreshEventEmitter.event}async getVariables(e,t){return this.getVariablesBasedOnKernel(t,e)}async getMatchingVariable(e,t,n){const r=this.cachedVariables.get(t.uri.toString());if(r){let i=r.variables.find((t=>t.name===e));return i&&!i.value&&(i=await this.getVariableValueFromKernel(i,t,n)),i}{const r=await this.getVariableNamesAndTypesFromKernel(t,n);if(r){const i=r.find((t=>t.name===e));if(i)return this.getVariableValueFromKernel({name:e,value:void 0,supportsDataExplorer:!1,type:i.type,size:0,count:0,shape:"",truncated:!0},t,n)}}}async getDataFrameInfo(e,t,n,r){if(!t)return e;const i=(0,d.getKernelConnectionLanguage)(t?.kernelConnectionMetadata)||a.PYTHON_LANGUAGE,o=this.variableRequesters.get(i);if(o){r&&(e=await this.getFullVariable(e,t));let i=e.name;return n&&(i=`${e.name}${n}`),o.getDataFrameInfo(e,t,i)}return e}async getDataFrameRows(e,t,n,r,i){const o=(0,d.getKernelConnectionLanguage)(r?.kernelConnectionMetadata)||a.PYTHON_LANGUAGE,s=this.variableRequesters.get(o);if(s){let o=e.name;return i&&(o=`${e.name}${i}`),s.getDataFrameRows(t,n,r,o)}return{data:[]}}async getFullVariable(e,t,n){const r=(0,d.getKernelConnectionLanguage)(t?.kernelConnectionMetadata)||a.PYTHON_LANGUAGE,i=this.variableRequesters.get(r);return i?i.getFullVariable(e,t,n):e}async getVariablesBasedOnKernel(e,t){let n=this.cachedVariables.get(e.uri.toString());const r=this.kernelProvider.getKernelExecution(e).pendingCells.length>0,i=this.kernelProvider.getKernelExecution(e);n&&(r||n.currentExecutionCount===t.executionCount&&n.currentExecutionCount===i.executionCount)||(n={currentExecutionCount:i.executionCount,variables:(await this.getVariableNamesAndTypesFromKernel(e)).map((e=>({name:e.name,value:void 0,supportsDataExplorer:!1,type:e.type,size:0,shape:"",count:0,truncated:!0})))});const o=this.configService.getSettings(e.resourceUri).variableExplorerExclude?this.configService.getSettings().variableExplorerExclude?.split(";"):[],s={executionCount:i.executionCount,pageStartIndex:-1,pageResponse:[],totalCount:0,refreshCount:t.refreshCount};if(n){const r=t.sortColumn,i=(e,n)=>{const i=e[r]?e[r]:"",o=n[r]?n[r]:"";return t.sortAscending?i.localeCompare(o,void 0,{sensitivity:"base"}):o.localeCompare(i,void 0,{sensitivity:"base"})};n.variables.sort(i);const a=t.startIndex?t.startIndex:0,c=t.pageSize?t.pageSize:100;s.pageStartIndex=a;for(let t=a;t<a+c&&t<n.variables.length;){if(o&&o.indexOf(n.variables[t].type)>=0){n.variables.splice(t,1);continue}const r=n.variables[t].value?n.variables[t]:await this.getVariableValueFromKernel(n.variables[t],e);n.variables[t]=r,s.pageResponse.push(r),t+=1}this.cachedVariables.set(e.uri.toString(),n),s.totalCount=n.variables.length}return s}async getVariableProperties(e,t,n){const r=await this.getMatchingVariable(e,t,n),i=(0,d.getKernelConnectionLanguage)(t.kernelConnectionMetadata)||a.PYTHON_LANGUAGE,o=this.variableRequesters.get(i);return o?o.getVariableProperties(e,n,r):{}}async getVariableNamesAndTypesFromKernel(e,t){const n=(0,d.getKernelConnectionLanguage)(e.kernelConnectionMetadata)||a.PYTHON_LANGUAGE,r=this.variableRequesters.get(n);return r?r.getVariableNamesAndTypesFromKernel(e,t):[]}inspect(e,t,n=0,r){const i=(0,l.createDeferred)();try{e.requestInspect({code:t,cursor_pos:n,detail_level:0}).then((e=>{e&&"ok"===e.content.status?i.resolve(e.content.data):i.resolve(void 0)})).catch((e=>{i.reject(e)}))}catch(e){i.reject(e)}return r&&this.disposables.push(r.onCancellationRequested((()=>i.reject(new s.CancellationError)))),i.promise}async getVariableValueFromKernel(e,t,n){let r={...e};if(!t.disposed&&t.session){const i=await this.inspect(t.session,e.name,0,n);if(i&&i.hasOwnProperty("text/plain")){const e=(0,u.stripAnsi)(i["text/plain"].toString()),t=f.exec(e),n=v.exec(e),o=b.exec(e);t&&(r.type=t[1]),r.value=[g,m,y].reduce(((t,n)=>t||n.exec(e)?.[1]||""),""),n&&(r.count=parseInt(n[1],10)),o&&(r.shape=`(${o[1]}, ${o[2]})`)}i&&i.type&&(r.type=i.type.toString()),i&&i.value&&(r.value=i.value.toString()),w.has(r.type)&&(r.supportsDataExplorer=!0)}return r.type&&r.count&&!r.shape&&(0,d.isPythonKernelConnection)(t.kernelConnectionMetadata)&&r.supportsDataExplorer&&"list"!==r.type&&(r=await this.getFullVariable(r,t)),r}};C=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IConfigurationService)),i(1,(0,o.inject)(h.IKernelVariableRequester)),i(1,(0,o.named)(a.Identifiers.PYTHON_VARIABLES_REQUESTER)),i(2,(0,o.inject)(c.IDisposableRegistry)),i(3,(0,o.inject)(p.IKernelProvider))],C),t.KernelVariables=C},68650:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonVariablesRequester=t.parseDataFrame=void 0;const o=n(86700),s=n(11642),a=n(25251),c=n(58323),l=n(89112),u=n(9959),d=n(98729),p=n(42080),h=n(65864);function f(e){const t=e.index,n=e.columns;return{data:e.data.map(((e,r)=>{const i={index:t[r]};return n.forEach(((t,n)=>{i[t]=e[n]})),i}))}}async function g(e,{code:t,initializeCode:n,cleanupCode:r},i){if(e.disposed||e.disposing||!e.session||!e.session.kernel||e.session.disposed)return[];try{return n&&await(0,d.executeSilently)(e.session,n,i),await(0,d.executeSilently)(e.session,t,i)}catch(e){if(e instanceof h.SessionDisposedError)return[];throw e}finally{r&&await(0,d.executeSilently)(e.session,r,i)}}t.parseDataFrame=f;let m=class{constructor(e,t){this.varScriptGenerator=e,this.dfScriptGenerator=t}async getDataFrameInfo(e,t,n){const{code:r,cleanupCode:i,initializeCode:o}=await this.dfScriptGenerator.generateCodeToGetDataFrameInfo({isDebugging:!1,variableName:n}),s=await g(t,{code:r,cleanupCode:i,initializeCode:o},{traceErrors:!0,traceErrorsMessage:"Failure in execute_request for getDataFrameInfo",telemetryName:u.Telemetry.PythonVariableFetchingCodeFailure}),a=t.notebook?.uri||t.resourceUri||t.uri;return{...e,...this.deserializeJupyterResult(s),fileName:a}}async getDataFrameRows(e,t,n,r){const{code:i,cleanupCode:o,initializeCode:s}=await this.dfScriptGenerator.generateCodeToGetDataFrameRows({isDebugging:!1,variableName:r,startIndex:e,endIndex:t}),a=await g(n,{code:i,cleanupCode:o,initializeCode:s},{traceErrors:!0,traceErrorsMessage:"Failure in execute_request for getDataFrameRows",telemetryName:u.Telemetry.PythonVariableFetchingCodeFailure});return f(this.deserializeJupyterResult(a))}async getVariableProperties(e,t,n){let r={};return n&&n.value&&(r[`${e}`]=n.value),r}async getVariableNamesAndTypesFromKernel(e,t){if(e.session){const{code:t,cleanupCode:n,initializeCode:r}=await this.varScriptGenerator.generateCodeToGetVariableTypes({isDebugging:!1}),i=await g(e,{code:t,cleanupCode:n,initializeCode:r},{traceErrors:!0,traceErrorsMessage:"Failure in execute_request for getVariableNamesAndTypesFromKernel",telemetryName:u.Telemetry.PythonVariableFetchingCodeFailure});if(e.disposed||e.disposing)return[];const o=this.deserializeJupyterResult(i),s=[];for(const[e,t]of Object.entries(o)){const n={name:e,value:void 0,supportsDataExplorer:!1,type:t||"",size:0,shape:"",count:0,truncated:!0};s.push(n)}return s}return[]}async getFullVariable(e,t,n){const{code:r,cleanupCode:i,initializeCode:o}=await this.varScriptGenerator.generateCodeToGetVariableInfo({isDebugging:!1,variableName:e.name}),s=await g(t,{code:r,cleanupCode:i,initializeCode:o},{traceErrors:!0,traceErrorsMessage:"Failure in execute_request for getFullVariable",telemetryName:u.Telemetry.PythonVariableFetchingCodeFailure});return{...e,...this.deserializeJupyterResult(s)}}extractJupyterResultText(e){if(e.length>0){const t=e[0];if(t&&"stream"===t.output_type&&"stderr"===t.name&&t.hasOwnProperty("text")){const e=t.text;if(e.includes("iopub_data_rate_limit"))throw new l.JupyterDataRateLimitError;{const t=a.DataScience.jupyterGetVariablesExecutionError(e);throw(0,s.traceError)(t),new Error(t)}}if(t&&"execute_result"===t.output_type){const e=t.data;if(e&&e.hasOwnProperty("text/plain"))return e["text/plain"]}if(t&&"stream"===t.output_type&&t.hasOwnProperty("text"))return t.text;if(t&&"error"===t.output_type&&t.hasOwnProperty("traceback")){const e=t.traceback.map(c.stripAnsi).join("\r\n"),n=a.DataScience.jupyterGetVariablesExecutionError(e);throw(0,s.traceError)(n),new Error(n)}}throw new Error(a.DataScience.jupyterGetVariablesBadResults)}deserializeJupyterResult(e){const t=this.extractJupyterResultText(e);return JSON.parse(t)}};m=r([(0,o.injectable)(),i(0,(0,o.inject)(p.IVariableScriptGenerator)),i(1,(0,o.inject)(p.IDataFrameScriptGenerator))],m),t.PythonVariablesRequester=m},7214:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IKernelVariableRequester=t.IJupyterVariables=void 0,t.IJupyterVariables=Symbol("IJupyterVariables"),t.IKernelVariableRequester=Symbol("IKernelVariableRequester")},30682:(e,t)=>{"use strict";var n,r,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.IInteractiveWindowMapping=t.SharedMessages=t.SysInfoReason=t.IPyWidgetMessages=t.InteractiveWindowMessages=void 0,function(e){e.FinishCell="finish_cell",e.RestartKernel="restart_kernel",e.SettingsUpdated="settings_updated",e.Started="started",e.ConvertUriForUseInWebViewRequest="ConvertUriForUseInWebViewRequest",e.ConvertUriForUseInWebViewResponse="ConvertUriForUseInWebViewResponse",e.Activate="activate",e.ShowDataViewer="show_data_explorer",e.GetVariablesRequest="get_variables_request",e.GetVariablesResponse="get_variables_response",e.VariableExplorerToggle="variable_explorer_toggle",e.SetVariableExplorerHeight="set_variable_explorer_height",e.VariableExplorerHeightResponse="variable_explorer_height_response",e.ForceVariableRefresh="force_variable_refresh",e.UpdateVariableViewExecutionCount="update_variable_view_execution_count",e.OpenLink="open_link",e.SavePng="save_png",e.VariablesComplete="variables_complete",e.IPyWidgetLoadSuccess="ipywidget_load_success",e.IPyWidgetLoadFailure="ipywidget_load_failure",e.IPyWidgetRenderFailure="ipywidget_render_failure",e.IPyWidgetUnhandledKernelMessage="ipywidget_unhandled_kernel_message",e.IPyWidgetWidgetVersionNotSupported="ipywidget_widget_version_not_supported",e.GetHTMLByIdRequest="get_html_by_id_request",e.GetHTMLByIdResponse="get_html_by_id_response"}(n=t.InteractiveWindowMessages||(t.InteractiveWindowMessages={})),function(e){e.IPyWidgets_logMessage="IPyWidgets_logMessage",e.IPyWidgets_IsReadyRequest="IPyWidgets_IsReadyRequest",e.IPyWidgets_AttemptToDownloadFailedWidgetsAgain="IPyWidgets_AttemptToDownloadFailedWidgetsAgain",e.IPyWidgets_IsOnline="IPyWidgets_IsOnline",e.IPyWidgets_Ready="IPyWidgets_Ready",e.IPyWidgets_Request_Widget_Version="IPyWidgets_Request_Widget_Version",e.IPyWidgets_Reply_Widget_Version="IPyWidgets_Reply_Widget_Version",e.IPyWidgets_onRestartKernel="IPyWidgets_onRestartKernel",e.IPyWidgets_onKernelChanged="IPyWidgets_onKernelChanged",e.IPyWidgets_WidgetScriptSourceRequest="IPyWidgets_WidgetScriptSourceRequest",e.IPyWidgets_WidgetScriptSourceResponse="IPyWidgets_WidgetScriptSource_Response",e.IPyWidgets_BaseUrlResponse="IPyWidgets_BaseUrl_Response",e.IPyWidgets_msg="IPyWidgets_msg",e.IPyWidgets_binary_msg="IPyWidgets_binary_msg",e.IPyWidgets_msg_received="IPyWidgets_msg_received",e.IPyWidgets_iopub_msg_handled="IPyWidgets_iopub_msg_handled",e.IPyWidgets_kernelOptions="IPyWidgets_kernelOptions",e.IPyWidgets_registerCommTarget="IPyWidgets_registerCommTarget",e.IPyWidgets_RegisterMessageHook="IPyWidgets_RegisterMessageHook",e.IPyWidgets_ExtensionOperationHandled="IPyWidgets_ExtensionOperationHandled",e.IPyWidgets_RemoveMessageHook="IPyWidgets_RemoveMessageHook",e.IPyWidgets_MessageHookCall="IPyWidgets_MessageHookCall",e.IPyWidgets_MessageHookResult="IPyWidgets_MessageHookResult",e.IPyWidgets_mirror_execute="IPyWidgets_mirror_execute"}(r=t.IPyWidgetMessages||(t.IPyWidgetMessages={})),(o=t.SysInfoReason||(t.SysInfoReason={}))[o.Start=0]="Start",o[o.Restart=1]="Restart",function(e){e.UpdateSettings="update_settings",e.Started="started",e.LocInit="loc_init"}(i=t.SharedMessages||(t.SharedMessages={})),t.IInteractiveWindowMapping=class{},r.IPyWidgets_kernelOptions,r.IPyWidgets_WidgetScriptSourceRequest,r.IPyWidgets_WidgetScriptSourceResponse,r.IPyWidgets_Ready,r.IPyWidgets_IsOnline,r.IPyWidgets_logMessage,r.IPyWidgets_onRestartKernel,r.IPyWidgets_onKernelChanged,r.IPyWidgets_registerCommTarget,r.IPyWidgets_binary_msg,r.IPyWidgets_msg,r.IPyWidgets_msg_received,r.IPyWidgets_iopub_msg_handled,r.IPyWidgets_RegisterMessageHook,r.IPyWidgets_ExtensionOperationHandled,r.IPyWidgets_RemoveMessageHook,r.IPyWidgets_MessageHookCall,r.IPyWidgets_MessageHookResult,r.IPyWidgets_mirror_execute,n.ForceVariableRefresh,n.UpdateVariableViewExecutionCount,n.FinishCell,n.RestartKernel,n.SettingsUpdated,n.Started,n.Activate,n.ShowDataViewer,n.GetVariablesRequest,n.GetVariablesResponse,n.VariableExplorerToggle,n.SetVariableExplorerHeight,n.VariableExplorerHeightResponse,n.OpenLink,n.SavePng,n.VariablesComplete,i.UpdateSettings,i.LocInit,n.IPyWidgetLoadSuccess,n.IPyWidgetLoadFailure,n.IPyWidgetWidgetVersionNotSupported,n.ConvertUriForUseInWebViewRequest,n.ConvertUriForUseInWebViewResponse,n.IPyWidgetRenderFailure,n.IPyWidgetUnhandledKernelMessage,n.GetHTMLByIdRequest,n.GetHTMLByIdResponse},19687:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ServerConnectionControllerCommands=t.compareIgnoreCase=t.groupBy=void 0;const o=n(86700),s=n(10053),a=n(15925),c=n(29444),l=n(42080),u=n(27527),d=n(50867),p=n(19450),h=n(66828),f=n(58681),g=n(94062),m=n(94433),y=n(25251),v=n(20397),b=n(11642);function w(e,t){const n=[];let r;for(const i of e.slice(0).sort(t))r&&0===t(r[0],i)?r.push(i):(r=[i],n.push(r));return n}function C(e,t){return e.localeCompare(t,void 0,{sensitivity:"accent"})}t.groupBy=w,t.compareIgnoreCase=C;let S=class{constructor(e,t,n,r,i,o,s,a,l){this.disposables=e,this.commandManager=t,this.multiStepFactory=n,this.isWeb=r,this.serverSelector=i,this.controllerRegistration=o,this.notebooks=s,this.serverUriStorage=a,this.featuresManager=l,this.showingLocalOrWebEmptyContext=new c.ContextKey("jupyter.showingLocalOrWebEmpty",this.commandManager)}activate(){this.disposables.push(this.commandManager.registerCommand(a.Commands.SwitchToRemoteKernels,this.switchToRemoteKernels,this)),this.disposables.push(this.serverUriStorage.onDidChangeConnectionType(this.updateContextKeys,this)),this.updateContextKeys().ignoreErrors,this.disposables.push(this.featuresManager.onDidChangeFeatures(this.updateContextKeys,this))}async updateContextKeys(){"Insiders"===this.featuresManager.features.kernelPickerType?this.showingLocalOrWebEmptyContext.set(!1).ignoreErrors():this.showingLocalOrWebEmptyContext.set(this.isWeb).ignoreErrors()}async showVsCodeKernelPicker(){const e=this.notebooks.activeNotebookEditor;e&&("Stable"===this.featuresManager.features.kernelPickerType&&await this.controllerRegistration.loaded,this.commandManager.executeCommand("notebook.selectKernel",{notebookEditor:e}).then(f.noop,f.noop))}async switchToRemoteKernels(){const e=this.notebooks.activeNotebookEditor?a.JupyterNotebookView:a.InteractiveWindowView,t=this.serverUriStorage.isLocalLaunch,n=await this.serverUriStorage.getRemoteUri();return this.multiStepFactory.create().run(this.startSwitchRun.bind(this,this.startSwitchingToRemote.bind(this,e,t,n?.uri)),{})}async startSwitchRun(e,t){return e}async startSwitchingToRemote(e,t,n,r){try{return await this.serverSelector.selectJupyterURI("nonUser",r),this.showRemoteKernelPicker(e,t,n,r)}catch(e){if(e===p.InputFlowAction.back)return this.showVsCodeKernelPicker()}}async showRemoteKernelPicker(e,t,n,r){try{await this.showKernelPicker(y.DataScience.pickRemoteKernelTitle,y.DataScience.pickRemoteKernelPlaceholder,!1,e,r)}catch(e){throw t?await this.serverSelector.setJupyterURIToLocal():await this.serverSelector.setJupyterURIToRemote(n),e}}async showKernelPicker(e,t,n,r,i){const o=this.controllerRegistration.registered.filter((e=>(0,g.isLocalConnection)(e.connection)===n&&e.viewType===r)),s=new h.EventEmitter,c=w(o.map((e=>({label:e.label,detail:void 0,description:e.controller.description,controller:e}))),((e,t)=>C(e.controller.controller.kind||"z",t.controller.controller.kind||"z"))),l=new Map,u=[];c.forEach((e=>{const t=e[0].controller.controller.kind||"Other";u.push({kind:h.QuickPickItemKind.Separator,label:t}),u.push(...e),l.set(t,u.length)})),this.controllerRegistration.onDidChange((e=>{e.added.forEach((e=>{if(e.viewType===r&&void 0===u.find((t=>t.controller?.id===e.id))){const t={label:e.label,detail:void 0,description:e.controller.description,controller:e},n=e.controller.kind||"Other",r=l.get(n)||-1;r<0?(u.push({kind:h.QuickPickItemKind.Separator,label:n}),u.push(t),l.set(n,u.length)):(u.splice(r,0,t),l.set(n,u.length)),s.fire(u)}}))}));const d=[],p=new h.EventEmitter;d.push(p),this.controllerRegistration.onDidChange((()=>p.fire()),this,d);const f=await i.showQuickPick({title:e,items:u,matchOnDescription:!0,matchOnDetail:!0,startBusy:0===u.length,stopBusy:p.event,placeholder:t,onDidChangeItems:s.event});if((0,v.disposeAllDisposables)(d),f&&f.label&&f.controller){const e=f.controller;(0,b.traceVerbose)(`Switching to kernel ${e.label} ${e.id}`),await this.commandManager.executeCommand("notebook.selectKernel",{id:e.id,extension:a.JVSC_EXTENSION_ID}),await this.updateContextKeys()}}};S=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IDisposableRegistry)),i(1,(0,o.inject)(s.ICommandManager)),i(2,(0,o.inject)(p.IMultiStepInputFactory)),i(3,(0,o.inject)(l.IsWebExtension)),i(4,(0,o.inject)(u.JupyterServerSelector)),i(5,(0,o.inject)(d.IControllerRegistration)),i(6,(0,o.inject)(s.IVSCodeNotebook)),i(7,(0,o.inject)(m.IJupyterServerUriStorage)),i(8,(0,o.inject)(l.IFeaturesManager))],S),t.ServerConnectionControllerCommands=S},97838:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.getKernelConnectionCategorySync=t.ConnectionDisplayDataProvider=void 0;const o=n(86700),s=n(66828),a=n(98729),c=n(94433),l=n(10053),u=n(83599),d=n(42080),p=n(25251),h=n(58681),f=n(47891);let g=class{constructor(e,t,n,r,i){this.workspace=e,this.platform=t,this.serverUriStorage=n,this.featuresManager=r,this._onDidChange=new s.EventEmitter,this.onDidChange=this._onDidChange.event,this.details=new Map,i.push(this._onDidChange)}getDisplayData(e){const t=(0,a.getDisplayNameOrNameOfKernelConnection)(e),n=(0,a.getKernelConnectionDisplayPath)(e,this.workspace,this.platform),r="connectToLiveRemoteKernel"===e.kind?(0,a.getRemoteKernelSessionInformation)(e):"",i=y(e),o=this.details.get(e.id)||{connectionId:e.id,label:t,description:n,detail:r,category:i};return o.label=t,o.description=n,o.detail=r,o.category=i||o.category,this.details.set(e.id,o),"Insiders"!==this.featuresManager.features.kernelPickerType||"connectToLiveRemoteKernel"!==e.kind&&"startUsingRemoteKernelSpec"!==e.kind||m(e,this.serverUriStorage).then((e=>{if(o.serverDisplayName!==e)return o.serverDisplayName=e,void this._onDidChange.fire(o)})).catch(h.noop),async function(e,t){switch(e.kind){case"connectToLiveRemoteKernel":const n=await m(e,t);return p.DataScience.kernelCategoryForJupyterSession(n);case"startUsingRemoteKernelSpec":const r=await m(e,t);return p.DataScience.kernelCategoryForRemoteJupyterKernel(r);default:return y(e)}}(e,this.serverUriStorage).then((e=>{o.category!==e&&(o.category=e,this._onDidChange.fire(o))})).catch(h.noop),o}};async function m(e,t){const n=(await t.getSavedUriList()).find((t=>t.serverId===e.serverId));return n&&n.displayName&&n.uri!==n.displayName?n.displayName:p.DataScience.kernelDefaultRemoteDisplayName}function y(e){switch(e.kind){case"startUsingLocalKernelSpec":return p.DataScience.kernelCategoryForJupyterKernel;case"startUsingPythonInterpreter":if("registeredByNewVersionOfExtForCustomKernelSpec"===(0,a.getKernelRegistrationInfo)(e.kernelSpec))return p.DataScience.kernelCategoryForJupyterKernel;switch(e.interpreter.envType){case f.EnvironmentType.Conda:return p.DataScience.kernelCategoryForConda;case f.EnvironmentType.Pipenv:return p.DataScience.kernelCategoryForPipEnv;case f.EnvironmentType.Poetry:return p.DataScience.kernelCategoryForPoetry;case f.EnvironmentType.Pyenv:return p.DataScience.kernelCategoryForPyEnv;case f.EnvironmentType.Venv:case f.EnvironmentType.VirtualEnv:case f.EnvironmentType.VirtualEnvWrapper:return p.DataScience.kernelCategoryForVirtual;default:return p.DataScience.kernelCategoryForGlobal}default:return""}}g=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IWorkspaceService)),i(1,(0,o.inject)(u.IPlatformService)),i(2,(0,o.inject)(c.IJupyterServerUriStorage)),i(3,(0,o.inject)(d.IFeaturesManager)),i(4,(0,o.inject)(d.IDisposableRegistry))],g),t.ConnectionDisplayDataProvider=g,t.getKernelConnectionCategorySync=y},42700:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ControllerDefaultService=void 0;const o=n(86700),s=n(98729),a=n(76385),c=n(94433),l=n(10053),u=n(15925),d=n(42080),p=n(86563),h=n(84570),f=n(11642),g=n(52859),m=n(67475),y=n(50867);let v=class{get isLocalLaunch(){return this.serverUriStorage.isLocalLaunch}constructor(e,t,n,r,i,o,s,a){this.registration=e,this.interpreters=t,this.notebook=n,this.disposables=r,this.serverUriStorage=i,this.preferredRemoteFinder=o,this.isWeb=s,this.featureManager=a}async computeDefaultController(e,t){if(this.isLocalLaunch)return(0,f.traceInfoIfCI)("CreateActiveInterpreterController"),(0,m.createActiveInterpreterController)(t,e,this.interpreters,this.registration);{(0,f.traceInfoIfCI)("CreateDefaultRemoteController");const n=t===u.JupyterNotebookView?this.notebook.notebookDocuments.find((t=>(0,g.isEqual)(t.uri,e,!0))):void 0,r=await this.createDefaultRemoteController(t,n);return r||this.isWeb?r:((0,f.traceVerbose)("No default remote controller, hence returning the active interpreter"),(0,m.createActiveInterpreterController)(t,e,this.interpreters,this.registration))}}async createDefaultRemoteController(e,t){const n=t?(0,p.getNotebookMetadata)(t):void 0,r=n&&!(0,s.isPythonNotebook)(n)&&n.language_info?.name?n.language_info.name:u.PYTHON_LANGUAGE,i=n?n.kernelspec?.name:void 0;"Stable"===this.featureManager.features.kernelPickerType&&await this.registration.loaded;const o=t&&this.preferredRemoteFinder?await this.preferredRemoteFinder.getPreferredRemoteKernelId(t.uri):void 0;if(o){const e=this.registration.registered.find((e=>"connectToLiveRemoteKernel"===e.connection.kind&&o&&e.connection.kernelModel.id===o));if(e)return e}const a=this.registration.registered.filter((t=>"startUsingRemoteKernelSpec"===t.connection.kind&&t.controller.notebookType===e));if(0===a.length)return void(0,f.traceError)("No remote controllers");let c,l,d;a.forEach((e=>{"startUsingRemoteKernelSpec"===e.connection.kind&&("python"===e.connection.kernelSpec.name?l=e:"python3"===e.connection.kernelSpec.name?c=e:e.connection.kernelSpec.language===u.PYTHON_LANGUAGE&&(d=e))}));const h=c||l||d;if(r===u.PYTHON_LANGUAGE)return h;{let e,t;return a.forEach((n=>{"startUsingRemoteKernelSpec"===n.connection.kind&&(n.connection.kernelSpec.name===i?e=n:n.connection.kernelSpec.language===r&&(t=n))})),e||t||h}}};r([(0,f.traceDecoratorVerbose)("Get default Remote Controller")],v.prototype,"createDefaultRemoteController",null),v=r([(0,o.injectable)(),i(0,(0,o.inject)(y.IControllerRegistration)),i(1,(0,o.inject)(h.IInterpreterService)),i(2,(0,o.inject)(l.IVSCodeNotebook)),i(3,(0,o.inject)(d.IDisposableRegistry)),i(4,(0,o.inject)(c.IJupyterServerUriStorage)),i(5,(0,o.inject)(a.PreferredRemoteKernelIdProvider)),i(6,(0,o.inject)(d.IsWebExtension)),i(7,(0,o.inject)(d.IFeaturesManager))],v),t.ControllerDefaultService=v},89977:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ControllerPreferredService=void 0;const o=n(86700),s=n(66828),a=n(98729),c=n(94433),l=n(61239),u=n(94062),d=n(77886),p=n(10053),h=n(15925),f=n(20397),g=n(35412),m=n(42080),y=n(86563),v=n(58681),b=n(84570),w=n(11642),C=n(9959),S=n(82010),_=n(41463),k=n(50867);let P=class{get isLocalLaunch(){return this.serverUriStorage.isLocalLaunch}constructor(e,t,n,r,i,o,s,a){this.registration=e,this.defaultService=t,this.interpreters=n,this.notebook=r,this.extensionChecker=i,this.serverUriStorage=o,this.kernelRankHelper=s,this.isWebExtension=a,this.preferredControllers=new WeakMap,this.preferredCancelTokens=new WeakMap,this.disposables=new Set,this.debouncedPreferredCompute=new WeakMap}activate(){this.disposables.add(this.notebook.onDidOpenNotebookDocument(this.onDidOpenNotebookDocument,this)),this.notebook.notebookDocuments.forEach((e=>this.onDidOpenNotebookDocument(e))),this.disposables.add(this.notebook.onDidCloseNotebookDocument((e=>{const t=this.preferredCancelTokens.get(e);t&&(this.preferredCancelTokens.delete(e),t.cancel())}),this)),this.disposables.add(this.registration.onDidChange((({added:e})=>e.length?this.notebook.notebookDocuments.map((e=>this.onDidOpenNotebookDocument(e))):void 0),this))}dispose(){(0,f.disposeAllDisposables)(Array.from(this.disposables))}async computePreferred(e,t,n){if(!(0,y.isJupyterNotebook)(e))return{};(0,w.traceInfoIfCI)(`Clear controller mapping for ${(0,g.getDisplayPath)(e.uri)}`),this.preferredCancelTokens.get(e)?.cancel(),this.preferredCancelTokens.get(e)?.dispose();const r=new s.CancellationTokenSource,i=n?.onCancellationRequested((()=>r.cancel()));this.disposables.add(r),i&&this.disposables.add(i),this.preferredCancelTokens.set(e,r);try{let n;const o=(0,y.getNotebookMetadata)(e),c=(0,y.getResourceType)(e.uri),d=!o||!o.kernelspec&&!o.language_info,p=((0,S.getLanguageOfNotebookDocument)(e)||"").toLowerCase()===h.PYTHON_LANGUAGE.toLowerCase(),f=(d?p:(0,a.isPythonNotebook)(o))||"interactive"===c;if(e.notebookType===h.JupyterNotebookView&&!this.isLocalLaunch&&f){const t=await this.defaultService.computeDefaultController(e.uri,e.notebookType);if(r.token.isCancellationRequested)return{};n=t?.connection,n&&(0,w.traceInfoIfCI)(`Found target controller with default controller ${(0,g.getDisplayPath)(e.uri)} ${n.kind}:${n.id}.`)}if(r.token.isCancellationRequested)return(0,w.traceInfoIfCI)(`Fetching TargetController document ${(0,g.getDisplayPath)(e.uri)} cancelled.`),{};if(e.notebookType!==h.JupyterNotebookView||n){if(e.notebookType===h.InteractiveWindowView){if(await this.registration.loaded,r.token.isCancellationRequested)return(0,w.traceInfoIfCI)(`Fetching TargetController document ${(0,g.getDisplayPath)(e.uri)} cancelled.`),{};const t=await this.defaultService.computeDefaultController(e.uri,"interactive");if(n=t?.connection,r.token.isCancellationRequested)return(0,w.traceInfoIfCI)(`Fetching TargetController document ${(0,g.getDisplayPath)(e.uri)} cancelled.`),{}}}else{const i=!t&&f&&this.extensionChecker.isPythonExtensionInstalled?await this.interpreters.getActiveInterpreter(e.uri):void 0;if((0,w.traceInfoIfCI)(`Fetching TargetController document  ${(0,g.getDisplayPath)(e.uri)}  with preferred Interpreter ${i?(0,g.getDisplayPath)(i?.uri):"<undefined>"} for condition ${!t&&f&&this.extensionChecker.isPythonExtensionInstalled} (${t} && ${f} && ${this.extensionChecker.isPythonExtensionInstalled}).`),r.token.isCancellationRequested)return(0,w.traceInfoIfCI)(`Fetching TargetController document ${(0,g.getDisplayPath)(e.uri)} cancelled.`),{};if(n=await this.findPreferredKernelExactMatch(e,o,r.token,i,t),n&&(0,w.traceInfoIfCI)(`Found target controller with an exact match (1) ${(0,g.getDisplayPath)(e.uri)} ${n.kind}:${n.id}.`),r.token.isCancellationRequested)return(0,w.traceInfoIfCI)(`Fetching TargetController document ${(0,g.getDisplayPath)(e.uri)} cancelled.`),{};if(n||(n=await this.findPreferredKernelExactMatch(e,o,r.token,i,t),n&&(0,w.traceInfoIfCI)(`Found target controller with an exact match (2) ${(0,g.getDisplayPath)(e.uri)} ${n.kind}:${n.id}.`)),r.token.isCancellationRequested)return(0,w.traceInfoIfCI)(`Fetching TargetController document ${(0,g.getDisplayPath)(e.uri)} cancelled.`),{};if(this.sendPreferredKernelTelemetry(e.uri,o,n,i),r.token.isCancellationRequested&&!n)return(0,w.traceInfo)("Find preferred kernel cancelled"),{};if(!n)return(0,w.traceInfoIfCI)(`PreferredConnection not found for NotebookDocument: ${(0,g.getDisplayPath)(e.uri)}`),!n&&this.preferredControllers.get(e)&&((0,w.traceVerbose)(`Resetting the previous preferred controller ${this.preferredControllers.get(e)?.id} to default affinity for document ${(0,g.getDisplayPath)(e.uri)}`),await(this.preferredControllers.get(e)?.controller.updateNotebookAffinity(e,s.NotebookControllerAffinity.Default))),{};(0,w.traceInfo)(`PreferredConnection: ${n.id} found for NotebookDocument: ${(0,g.getDisplayPath)(e.uri)}`),this.registration.registered.find((e=>n?.id===e.connection.id))||((0,w.traceVerbose)(`Early registration of controller for Kernel connection ${n.id}`),this.registration.addOrUpdate(n,[h.JupyterNotebookView]))}let m;if(n&&(m=this.registration.get(n,e.notebookType)),m){if((0,w.traceVerbose)(`TargetController found ID: ${m.connection.kind}:${m.id} for document ${(0,g.getDisplayPath)(e.uri)}`),await(this.preferredControllers.get(e)?.controller.updateNotebookAffinity(e,s.NotebookControllerAffinity.Default)),await m.controller.updateNotebookAffinity(e,s.NotebookControllerAffinity.Preferred),r.token.isCancellationRequested)return(0,w.traceInfoIfCI)(`Fetching TargetController document ${(0,g.getDisplayPath)(e.uri)} cancelled.`),{};if(await(0,l.trackKernelResourceInformation)(e.uri,{kernelConnection:n,isPreferredKernel:!0}),r.token.isCancellationRequested)return(0,w.traceInfoIfCI)(`Fetching TargetController document ${(0,g.getDisplayPath)(e.uri)} cancelled.`),{};this.preferredControllers.set(e,m)}else!n&&this.preferredControllers.get(e)&&((0,w.traceVerbose)(`Resetting the previous preferred controller ${this.preferredControllers.get(e)?.id} to default affinity for document ${(0,g.getDisplayPath)(e.uri)}`),await(this.preferredControllers.get(e)?.controller.updateNotebookAffinity(e,s.NotebookControllerAffinity.Default)));if(n&&!m&&(0,u.isLocalConnection)(n)){const t=this.registration.addOrUpdate(n,[e.notebookType]);(0,w.traceInfoIfCI)(`Controller for preferred connection ${n.kind}${n.id} for notebook ${(0,g.getDisplayPath)(e.uri)} does not yet exist, creating this now`),1===t.length?m=t[0]:(0,w.traceError)(`Failed to create the controller for preferred connection ${n.kind}${n.id} for notebook ${(0,g.getDisplayPath)(e.uri)}`)}return(0,w.traceInfoIfCI)(`TargetController found ID: ${n?.id} type ${n?.kind} for document ${(0,g.getDisplayPath)(e.uri)} & associated controller id ${m?.connection?.kind}:${m?.id}`),{preferredConnection:n,controller:m}}catch(e){return(0,w.traceError)("Failed to find & set preferred controllers",e),{}}finally{i&&(i.dispose(),this.disposables.delete(i)),r.dispose(),this.disposables.delete(r)}}getPreferred(e){return this.preferredControllers.get(e)}onDidOpenNotebookDocument(e){if(e.notebookType!==h.JupyterNotebookView&&e.notebookType!==h.InteractiveWindowView||!s.workspace.isTrusted)return;if(this.registration.getSelected(e))return;this.debouncedPreferredCompute.get(e)?.dispose();const t=new s.CancellationTokenSource;this.debouncedPreferredCompute.set(e,new s.Disposable((()=>{t.cancel(),t.dispose()}))),this.computePreferred(e,void 0,t.token).catch(v.noop)}async findPreferredKernelExactMatch(e,t,n,r,i){const o=e.uri;let s;const c=await this.kernelRankHelper.rankKernels(o,this.registration.all,t,r,n,i);if(!n.isCancellationRequested){if(c&&c.length){const e=c[c.length-1],i=1===c.length,l=await(0,_.findKernelSpecMatchingInterpreter)(r,[e]);if(n.isCancellationRequested)return;const u=await this.kernelRankHelper.isExactMatch(o,e,t);if(n.isCancellationRequested)return;if(t&&(t.kernelspec||t.language_info)&&!(0,a.isPythonNotebook)(t)||u||!this.extensionChecker.isPythonExtensionActive||this.isWebExtension||await this.interpreters.refreshInterpreters(),n.isCancellationRequested)return;const d=(0,a.getLanguageInNotebookMetadata)(t),p=d&&d!==h.PYTHON_LANGUAGE&&(0,a.getKernelConnectionLanguage)(e)===d,f=d&&d===h.PYTHON_LANGUAGE&&(0,a.getKernelConnectionLanguage)(e)===d;(i&&f||l||u||p)&&((0,w.traceInfo)(`Preferred kernel ${e.id} is exact match or top match for non python kernels, (${i}, ${l}, ${u}, ${p})`),s=e);let g=k.PreferredKernelExactMatchReason.NoMatch;i&&(g|=k.PreferredKernelExactMatchReason.OnlyKernel),l&&(g|=k.PreferredKernelExactMatchReason.WasPreferredInterpreter),u&&(g|=k.PreferredKernelExactMatchReason.IsExactMatch),p&&(g|=k.PreferredKernelExactMatchReason.IsNonPythonKernelLanguageMatch),(0,C.sendTelemetryEvent)(h.Telemetry.PreferredKernelExactMatch,{matchedReason:g})}return s}}sendPreferredKernelTelemetry(e,t,n,r){const i=(0,y.getResourceType)(e),o="interactive"===i?h.PYTHON_LANGUAGE:(0,a.getLanguageInNotebookMetadata)(t)||"";(0,C.sendTelemetryEvent)(h.Telemetry.PreferredKernel,void 0,{result:n?"found":"notfound",resourceType:i,language:o,hasActiveInterpreter:!!r})}};r([(0,w.traceDecoratorVerbose)("Compute Preferred Controller"),i(0,(0,w.logValue)("uri"))],P.prototype,"computePreferred",null),P=r([(0,o.injectable)(),i(0,(0,o.inject)(k.IControllerRegistration)),i(1,(0,o.inject)(k.IControllerDefaultService)),i(2,(0,o.inject)(b.IInterpreterService)),i(3,(0,o.inject)(p.IVSCodeNotebook)),i(4,(0,o.inject)(d.IPythonExtensionChecker)),i(5,(0,o.inject)(c.IJupyterServerUriStorage)),i(6,(0,o.inject)(k.IKernelRankingHelper)),i(7,(0,o.inject)(m.IsWebExtension))],P),t.ControllerPreferredService=P},43863:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ControllerPreferredServiceWrapper=void 0;const o=n(86700),s=n(20397),a=n(42080),c=n(41778),l=n(11642),u=n(89977);let d=class{constructor(e,t,n){this.serviceContainer=e,this.featureManager=n,this.disposables=[],t.push(this)}activate(){let e=this.featureManager.features.kernelPickerType;const t=[],n=()=>{const e="Stable"===this.featureManager.features.kernelPickerType?this.serviceContainer.get(u.ControllerPreferredService):void 0;e&&(e.activate(),t.push(e),this.disposables.push(e)),this.preferredService=this.preferredService};n(),this.disposables.push(this.featureManager.onDidChangeFeatures((()=>{this.featureManager.features.kernelPickerType!==e&&((0,s.disposeAllDisposables)(t),n())})))}dispose(){(0,s.disposeAllDisposables)(this.disposables)}async computePreferred(e,t,n){return this.preferredService?this.preferredService.computePreferred(e,t,n):{}}getPreferred(e){return this.preferredService?this.preferredService.getPreferred(e):void 0}};r([(0,l.traceDecoratorVerbose)("Compute Preferred Controller"),i(0,(0,l.logValue)("uri"))],d.prototype,"computePreferred",null),d=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IServiceContainer)),i(1,(0,o.inject)(a.IDisposableRegistry)),i(2,(0,o.inject)(a.IFeaturesManager))],d),t.ControllerPreferredServiceWrapper=d},25928:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ControllerRegistration=void 0;const o=n(86700),s=n(66828),a=n(98729),c=n(94433),l=n(94062),u=n(77886),d=n(10053),p=n(6491),h=n(15925),f=n(42080),g=n(86563),m=n(58681),y=n(84570),v=n(41778),b=n(11642),w=n(9959),C=n(20402),S=n(26657),_=n(97838),k=n(67475),P=n(14398),I=n(50867),E=n(60322);let T=class{get onDidChange(){return this.changeEmitter.event}get registered(){return[...this.registeredControllers.values()]}get all(){return this.metadatas}get metadatas(){return[...this.registeredMetadatas.values()]}get onControllerSelected(){return this.selectedEmitter.event}get onControllerSelectionChanged(){return this.selectionChangedEmitter.event}constructor(e,t,n,r,i,o,a,c,l,u,d){this.notebook=e,this.disposables=t,this.featuresManager=n,this.kernelFilter=r,this.workspace=i,this.extensionChecker=o,this.serviceContainer=a,this.serverUriStorage=c,this.kernelFinder=l,this.interpreters=u,this.isWebExtension=d,this.registeredControllers=new Map,this.changeEmitter=new s.EventEmitter,this.registeredMetadatas=new Map,this.selectedEmitter=new s.EventEmitter,this.selectionChangedEmitter=new s.EventEmitter,this.selectedControllers=new Map,this._activeInterpreterControllerIds=new Set}activate(){this.kernelFinder.onDidChangeKernels((()=>this.loadControllers()),this,this.disposables),this.kernelFinder.registered.forEach((e=>this.monitorDeletionOfConnections(e))),this.kernelFinder.onDidChangeRegistrations((e=>e.added.forEach((e=>this.monitorDeletionOfConnections(e)))),this,this.disposables),this.kernelFilter.onDidChange(this.onDidChangeFilter,this,this.disposables),this.serverUriStorage.onDidChangeConnectionType(this.onDidChangeFilter,this,this.disposables),this.serverUriStorage.onDidChangeUri(this.onDidChangeUri,this,this.disposables),this.serverUriStorage.onDidRemoveUris(this.onDidRemoveUris,this,this.disposables),this.onDidChange((({added:e})=>{e.forEach((e=>{e.onNotebookControllerSelectionChanged((t=>{!t.selected&&this.isFiltered(e.connection)&&this.canControllerBeDisposed(e)&&((0,b.traceWarning)(`Removing controller ${e.id} for ${e.connection.kind} from kernel list`),e.dispose())}),this,this.disposables)}))}),this,this.disposables),this.notebook.onDidOpenNotebookDocument(this.onDidOpenNotebookDocument,this,this.disposables),this.notebook.notebookDocuments.forEach((e=>this.onDidOpenNotebookDocument(e).catch(m.noop))),this.loadControllers();let e=this.featuresManager.features.kernelPickerType;this.featuresManager.onDidChangeFeatures((()=>{e!==this.featuresManager.features.kernelPickerType&&(e=this.featuresManager.features.kernelPickerType,this.loadControllers())}),this,this.disposables)}loadControllers(){this.controllersPromise=this.loadControllersImpl(),(0,S.sendKernelListTelemetry)(this.registered.map((e=>e.connection))),(0,b.traceInfoIfCI)(`Providing notebook controllers with length ${this.registered.length}.`)}get loaded(){return this.controllersPromise}async onDidOpenNotebookDocument(e){(e.notebookType===h.JupyterNotebookView||e.notebookType===h.InteractiveWindowView)&&this.workspace.isTrusted&&(0,a.isPythonNotebook)((0,g.getNotebookMetadata)(e))&&this.extensionChecker.isPythonExtensionInstalled&&("Insiders"===this.featuresManager.features.kernelPickerType||(0,k.createActiveInterpreterController)(h.JupyterNotebookView,e.uri,this.interpreters,this).catch(m.noop))}async loadControllersImpl(){if(this.extensionChecker.isPythonExtensionInstalled&&!this.isWebExtension){const e="Insiders"===this.featuresManager.features.kernelPickerType;this.serverUriStorage.isLocalLaunch&&!e&&await(0,k.createActiveInterpreterController)(h.JupyterNotebookView,void 0,this.interpreters,this)}const e=this.kernelFinder.kernels;(0,b.traceVerbose)(`Found ${e.length} cached controllers`),this.createNotebookControllers(e),(0,b.traceInfoIfCI)(`Kernels found in kernel finder include ${e.map((e=>`${e.kind}:${e.id}`)).join("\n")} \n and currently registered controllers include ${this.registered.map((e=>`${e.connection.kind}:${e.connection.id}`)).join("\n")}`),Array.from(this.registered).filter((t=>{const n=e.some((e=>e.id===t.connection.id));return!n&&"connectToLiveRemoteKernel"===t.connection.kind||!!this.canControllerBeDisposed(t)&&(n||(0,b.traceVerbose)(`Controller ${t.connection.kind}:'${t.id}' for view = '${t.viewType}' is no longer a valid`),!n)})).forEach((e=>{(0,b.traceWarning)(`Disposing old controller ${e.connection.kind}:'${e.id}' for view = '${e.viewType}'`),e.dispose()}))}createNotebookControllers(e){if(0!==e.length){(0,b.traceVerbose)(`Creating ${e?.length} controllers`);try{this.batchAdd(e,[h.JupyterNotebookView,h.InteractiveWindowView])}catch(e){if(!(0,p.isCancellationError)(e,!0))throw e}}}async monitorDeletionOfConnections(e){const t=e.onDidChangeKernels((({removed:e})=>{const t=new Set((e||[]).map((e=>e.id)));this.registered.filter((e=>t.has(e.connection.id))).forEach((e=>{(0,b.traceWarning)(`Deleting controller ${e.id} as it is associated with a connection that has been deleted ${e.connection.kind}:${e.id}`),e.dispose()}))}),this,this.disposables);this.kernelFinder.onDidChangeRegistrations((n=>{n.removed.includes(e)&&t.dispose()}))}onDidChangeUri(){"Stable"===this.featuresManager.features.kernelPickerType&&this.serverUriStorage.currentServerId&&this.registered.forEach((e=>{(0,l.isRemoteConnection)(e.connection)&&this.serverUriStorage.currentServerId!==e.connection.serverId&&((0,b.traceWarning)(`Deleting controller ${e.id} as it is associated with a connection that has been removed`),e.dispose())})),this.onDidChangeFilter()}async onDidRemoveUris(e){e.forEach((e=>{this.registered.forEach((t=>{(0,l.isRemoteConnection)(t.connection)&&t.connection.serverId===e.serverId&&((0,b.traceWarning)(`Deleting controller ${t.id} as it is associated with a connection that has been removed`),t.dispose())}))})),this.onDidChangeFilter()}onDidChangeFilter(){this.all.filter((e=>!this.isFiltered(e))).forEach((e=>this.addOrUpdate(e,[h.JupyterNotebookView,h.InteractiveWindowView]))),this.registered.forEach((e=>{this.isFiltered(e.connection)&&this.canControllerBeDisposed(e)&&((0,b.traceWarning)(`Deleting controller ${e.id} as it is associated with a connection that has been hidden`),e.dispose())}))}batchAdd(e,t){const n=[];e.forEach((e=>{const{added:r}=this.addImpl(e,t,!1);n.push(...r)})),n.length&&this.changeEmitter.fire({added:n,removed:[]})}trackActiveInterpreterControllers(e){e.forEach((e=>this._activeInterpreterControllerIds.add(e.id)))}canControllerBeDisposed(e){return!this._activeInterpreterControllerIds.has(e.id)&&!this.isControllerAttachedToADocument(e)}getSelected(e){return this.selectedControllers.get(e.uri.toString())}addOrUpdate(e,t){const{added:n,existing:r}=this.addImpl(e,t,!0);return n.concat(r)}addImpl(e,t,n){const r=[],i=[];(0,b.traceInfoIfCI)(`Create Controller for ${e.kind} and id '${e.id}' for view ${t.join(", ")}`);try{t.map((t=>{const n=this.getControllerId(e,t);return this.registeredMetadatas.set(e.id,e),[n,t]})).filter((([t])=>{const n=this.registeredControllers.get(t);return n?(n.updateConnection(e),i.push(n),(0,b.traceInfoIfCI)(`Found existing controller '${n.id}', not creating a new one just updating it`),!1):this.isFiltered(e)?((0,b.traceInfoIfCI)(`Existing controller '${t}' will be excluded as it is filtered`),!1):((0,b.traceInfoIfCI)(`Existing controller not found for '${t}', hence creating a new one`),!0)})).forEach((([t,n])=>{const i=E.VSCodeNotebookController.create(e,t,n,this.notebook,this.serviceContainer.get(d.ICommandManager),this.serviceContainer.get(l.IKernelProvider),this.serviceContainer.get(f.IExtensionContext),this.disposables,this.serviceContainer.get(C.NotebookCellLanguageService),this.workspace,this.serviceContainer.get(f.IConfigurationService),this.serviceContainer.get(d.IDocumentManager),this.serviceContainer.get(d.IApplicationShell),this.serviceContainer.get(f.IBrowserService),this.extensionChecker,this.serviceContainer,this.serviceContainer.get(_.ConnectionDisplayDataProvider),this.featuresManager),o=[];i.onDidDispose((()=>{(0,b.traceInfoIfCI)(`Deleting controller '${i.id}' associated with view ${n} from registration as it was disposed`),this.registeredControllers.delete(i.id),o.forEach((e=>e.dispose()))}),this,this.disposables),this.disposables.push(i),this.registeredControllers.set(i.id,i),r.push(i),i.onNotebookControllerSelected((e=>{(0,b.traceInfoIfCI)(`Controller ${e.controller?.id} selected`),this.selectedControllers.set(e.notebook.uri.toString(),e.controller),this.selectedEmitter.fire(e)}),this,o),i.onNotebookControllerSelectionChanged((e=>this.selectionChangedEmitter.fire({...e,controller:i})),this,o)})),n&&r.length&&this.changeEmitter.fire({added:r,removed:[]})}catch(t){if((0,p.isCancellationError)(t,!0))return{added:r,existing:i};(0,w.sendTelemetryEvent)(w.Telemetry.FailedToCreateNotebookController,void 0,{kind:e.kind},t),(0,b.traceError)(`Failed to create notebook controller for ${e.id}`,t)}return{added:r,existing:i}}get(e,t){const n=this.getControllerId(e,t);return this.registeredControllers.get(n)}isFiltered(e){if("Insiders"===this.featuresManager.features.kernelPickerType)return!1;const t=this.kernelFilter.isKernelHidden(e),n=(0,l.isRemoteConnection)(e)&&this.serverUriStorage.currentServerId!==e.serverId;return t||n}getControllerId(e,t){return t===h.JupyterNotebookView?e.id:`${e.id}${I.InteractiveControllerIdSuffix}`}isControllerAttachedToADocument(e){return this.notebook.notebookDocuments.some((t=>e.isAssociatedWithDocument(t)))}};T=r([(0,o.injectable)(),i(0,(0,o.inject)(d.IVSCodeNotebook)),i(1,(0,o.inject)(f.IDisposableRegistry)),i(2,(0,o.inject)(f.IFeaturesManager)),i(3,(0,o.inject)(P.KernelFilterService)),i(4,(0,o.inject)(d.IWorkspaceService)),i(5,(0,o.inject)(u.IPythonExtensionChecker)),i(6,(0,o.inject)(v.IServiceContainer)),i(7,(0,o.inject)(c.IJupyterServerUriStorage)),i(8,(0,o.inject)(l.IKernelFinder)),i(9,(0,o.inject)(y.IInterpreterService)),i(10,(0,o.inject)(f.IsWebExtension))],T),t.ControllerRegistration=T},67475:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isActiveInterpreter=t.createActiveInterpreterController=void 0;const r=n(98729),i=n(94062),o=n(35412),s=n(11642);t.createActiveInterpreterController=async function(e,t,n,a){const c=await n.getActiveInterpreter(t);if(c){const n=await(0,r.createInterpreterKernelSpec)(c),l=i.PythonKernelConnectionMetadata.create({kernelSpec:n,interpreter:c,id:(0,r.getKernelId)(n,c)}),u=a.addOrUpdate(l,[e]),d=u[0];return a.trackActiveInterpreterControllers(u),(0,s.traceInfoIfCI)(`Active Interpreter Controller ${d.connection.kind}:${d.id} created for View ${e} with resource ${(0,o.getDisplayPath)(t)}`),d}},t.isActiveInterpreter=async function(e,t,n){return(await n.getActiveInterpreter(t))?.id===e.interpreter?.id}},29768:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.CommonMessageCoordinator=void 0;const i=n(66828),o=n(10053),s=n(15925),a=n(11642),c=n(42080),l=n(25251),u=n(58681),d=n(58323),p=n(30682),h=n(9959),f=n(96434),g=n(15925),m=n(94062),y=n(43713),v=n(89159),b=n(72265),w=n(99203),C=n(85446),S=n(94483),_=n(43138),k=n(20397),P=n(11386),I=n(98729);class E{get postMessage(){return this.listeningToPostMessageEvent=!0,this.postEmitter.event}constructor(e,t){this.document=e,this.serviceContainer=t,this.cachedMessages=[],this.postEmitter=new i.EventEmitter,this.attachedWebviews=new WeakSet,this.modulesForWhichWeHaveDisplayedWidgetErrorMessage=new Set,this.queuedMessages=[],this.disposables=this.serviceContainer.get(c.IDisposableRegistry),this.jupyterOutput=this.serviceContainer.get(c.IOutputChannel,s.STANDARD_OUTPUT_CHANNEL),this.appShell=this.serviceContainer.get(o.IApplicationShell,o.IApplicationShell),this.commandManager=this.serviceContainer.get(o.ICommandManager),this.configService=this.serviceContainer.get(c.IConfigurationService),this.initialize()}dispose(){this.cachedMessages=[],this.ipyWidgetMessageDispatcher?.dispose(),this.ipyWidgetScriptSource?.dispose()}attach(e){if(this.attachedWebviews.has(e))return;this.attachedWebviews.add(e),this.postMessage((t=>{if((0,a.traceInfoIfCI)(`${w.ConsoleForegroundColors.Green}Widget Coordinator sent ${t.message}`),t.message===p.InteractiveWindowMessages.ConvertUriForUseInWebViewRequest)this.onMessage(e,p.InteractiveWindowMessages.ConvertUriForUseInWebViewResponse,{request:t.payload,response:e.asWebviewUri(t.payload)});else{if(!this.readyMessageReceived)return void this.queuedMessages.push({type:t.message,payload:t.payload});this.sendPendingWebViewMessages(e),e.postMessage({type:t.message,payload:t.payload}).then(u.noop,u.noop)}}),this,this.disposables);const t=(0,_.createDeferred)(),n=async()=>{const n=new P.StopWatch;if(!t.completed){(0,a.traceVerbose)("Attempting to determine version of IPyWidgets");const e=[],n=this.serviceContainer.get(m.IKernelProvider),r=(0,_.createDeferred)();n.get(this.document)?r.resolve(n.get(this.document)):n.onDidCreateKernel((e=>{e.notebook===this.document&&r.resolve(e)}),this,e);const i=await r.promise;i&&((0,I.isPythonKernelConnection)(i.kernelConnectionMetadata)?i.ipywidgetsVersion?t.completed||t.resolve(i.ipywidgetsVersion):((0,a.traceVerbose)("Waiting for IPyWidgets version"),i.onIPyWidgetVersionResolved((()=>{i.ipywidgetsVersion&&(t.completed||t.resolve(i.ipywidgetsVersion),(0,k.disposeAllDisposables)(e))}),this,e)):t.completed||t.resolve(s.WIDGET_VERSION_NON_PYTHON_KERNELS)),e.length&&this.disposables.push(...e),(0,a.traceVerbose)("Waiting for IPyWidgets version promise")}const r=await t.promise;(0,a.traceVerbose)(`Version of IPyWidgets ${r} determined after ${n.elapsedTime/1e3}s`),e.postMessage({type:p.IPyWidgetMessages.IPyWidgets_Reply_Widget_Version,payload:r}).then(u.noop,u.noop)};e.onDidReceiveMessage((async t=>{(0,a.traceInfoIfCI)(`${w.ConsoleForegroundColors.Green}Widget Coordinator received ${t.type}`),this.onMessage(e,t.type,t.payload),t.type===p.IPyWidgetMessages.IPyWidgets_Request_Widget_Version&&await n(),t.type===p.IPyWidgetMessages.IPyWidgets_Ready&&((0,a.traceVerbose)("Web view is ready to receive widget messages"),this.readyMessageReceived=!0,this.sendPendingWebViewMessages(e))}),this,this.disposables),e.postMessage({type:p.IPyWidgetMessages.IPyWidgets_IsReadyRequest,payload:void 0}).then(u.noop,u.noop),n().catch(u.noop)}onMessage(e,t,n){t===p.InteractiveWindowMessages.IPyWidgetLoadSuccess?this.sendLoadSucceededTelemetry(n).ignoreErrors():t===p.InteractiveWindowMessages.IPyWidgetLoadFailure?this.handleWidgetLoadFailure(e,n).ignoreErrors():t===p.InteractiveWindowMessages.IPyWidgetWidgetVersionNotSupported?this.sendUnsupportedWidgetVersionFailureTelemetry(n).ignoreErrors():t===p.InteractiveWindowMessages.IPyWidgetRenderFailure?this.sendRenderFailureTelemetry(n):t===p.InteractiveWindowMessages.IPyWidgetUnhandledKernelMessage&&this.handleUnhandledMessage(n),this.getIPyWidgetMessageDispatcher().receiveMessage({message:t,payload:n}),this.getIPyWidgetScriptSource().onMessage(t,n)}sendPendingWebViewMessages(e){if(this.readyMessageReceived)for(;this.queuedMessages.length;)e.postMessage(this.queuedMessages.shift()).then(u.noop,u.noop)}initialize(){(0,a.traceVerbose)("initialize CommonMessageCoordinator"),this.getIPyWidgetScriptSource().initialize(),this.getIPyWidgetMessageDispatcher().initialize()}async sendLoadSucceededTelemetry(e){try{(0,h.sendTelemetryEvent)(h.Telemetry.IPyWidgetLoadSuccess,0,{moduleHash:await(0,f.getTelemetrySafeHashedString)(e.moduleName),moduleVersion:e.moduleVersion})}catch{}}async handleWidgetLoadFailure(e,t){try{let n=t.error.toString();const r=this.configService.getSettings(void 0).widgetScriptSources.length>0,i=`${t.moduleName}:${t.moduleVersion}`;if(t.isOnline){if(!r&&!this.modulesForWhichWeHaveDisplayedWidgetErrorMessage.has(i)){this.modulesForWhichWeHaveDisplayedWidgetErrorMessage.add(i);const r=l.Common.moreInfo,o=l.DataScience.enableCDNForWidgetsButton;n=l.DataScience.enableCDNForWidgetsSetting(t.moduleName,t.moduleVersion),this.appShell.showErrorMessage(n,{modal:!0},o,r).then((t=>{switch(t){case r:this.appShell.openUrl("https://aka.ms/PVSCIPyWidgets");break;case o:this.enableCDNForWidgets(e).ignoreErrors()}}),u.noop)}}else n=l.DataScience.loadClassFailedWithNoInternet(t.moduleName,t.moduleVersion),this.appShell.showErrorMessage(n).then(u.noop,u.noop);(0,a.traceError)(`Widget load failure ${n}`,t),(0,h.sendTelemetryEvent)(h.Telemetry.IPyWidgetLoadFailure,0,{isOnline:t.isOnline,moduleHash:await(0,f.getTelemetrySafeHashedString)(t.moduleName),moduleVersion:t.moduleVersion,timedout:t.timedout})}catch{}}async enableCDNForWidgets(e){await this.commandManager.executeCommand(g.Commands.EnableLoadingWidgetsFrom3rdPartySource),await e.postMessage({type:p.IPyWidgetMessages.IPyWidgets_AttemptToDownloadFailedWidgetsAgain})}async sendUnsupportedWidgetVersionFailureTelemetry(e){try{(0,h.sendTelemetryEvent)(h.Telemetry.IPyWidgetWidgetVersionNotSupportedLoadFailure,0,{moduleHash:await(0,f.getTelemetrySafeHashedString)(e.moduleName),moduleVersion:e.moduleVersion})}catch{}}sendRenderFailureTelemetry(e){try{(0,a.traceError)("Error rendering a widget: ",e),(0,h.sendTelemetryEvent)(h.Telemetry.IPyWidgetRenderFailure)}catch{}}handleUnhandledMessage(e){if("status"!==e.header.msg_type)try{if("error"===e.header.msg_type){const t=e;t.content.traceback=t.content.traceback.map(d.stripAnsi)}(0,a.traceInfo)(`Unhandled widget kernel message: ${e.header.msg_type} ${e.content}`),this.jupyterOutput.appendLine(l.DataScience.unhandledMessage(e.header.msg_type,JSON.stringify(e.content))),(0,h.sendTelemetryEvent)(h.Telemetry.IPyWidgetUnhandledMessage,void 0,{msg_type:e.header.msg_type})}catch{}}getIPyWidgetMessageDispatcher(){return this.ipyWidgetMessageDispatcher||(this.ipyWidgetMessageDispatcher=this.serviceContainer.get(y.IPyWidgetMessageDispatcherFactory).create(this.document),this.disposables.push(this.ipyWidgetMessageDispatcher.postMessage(this.cacheOrSend,this))),this.ipyWidgetMessageDispatcher}getIPyWidgetScriptSource(){return this.ipyWidgetScriptSource||(this.ipyWidgetScriptSource=new v.IPyWidgetScriptSource(this.document,this.serviceContainer.get(m.IKernelProvider),this.serviceContainer.get(c.IDisposableRegistry),this.serviceContainer.get(c.IConfigurationService),this.serviceContainer.get(c.IHttpClient),this.serviceContainer.get(b.IWidgetScriptSourceProviderFactory),this.serviceContainer.get(c.IsWebExtension),this.serviceContainer.get(S.CDNWidgetScriptSourceProvider)),this.disposables.push(this.ipyWidgetScriptSource.postMessage(this.cacheOrSend,this))),this.ipyWidgetScriptSource}cacheOrSend(e){if(!this.listeningToPostMessageEvent)return(0,a.traceInfoIfCI)(`${w.ConsoleForegroundColors.Green}Queuing messages (no listeners)`),void this.cachedMessages.push(e);this.cachedMessages.forEach((e=>this.postEmitter.fire(e))),this.cachedMessages=[],this.postEmitter.fire(e)}}r([(0,C.swallowExceptions)()],E.prototype,"enableCDNForWidgets",null),t.CommonMessageCoordinator=E},21375:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.IPyWidgetMessageDispatcher=void 0;const i=r(n(71171)),o=n(66828),s=n(11642),a=n(15925),c=n(43138),l=n(58681),u=n(81014),d=n(30682),p=n(9959),h=n(22021);t.IPyWidgetMessageDispatcher=class{get postMessage(){return this._postMessageEmitter.event}constructor(e,t){this.kernelProvider=e,this.document=t,this.commTargetsRegistered=new Set,this.pendingTargetNames=new Set,this._postMessageEmitter=new o.EventEmitter,this.messageHooks=new Map,this.pendingHookRemovals=new Map,this.messageHookRequests=new Map,this.disposables=[],this.disposed=!1,this.pendingMessages=[],this.subscribedToKernelSocket=!1,this.waitingMessageIds=new Map,this.totalWaitTime=0,this.totalWaitedMessages=0,this.hookCount=0,this.outputWidgetIds=new Set,this.isUsingIPyWidgets=!1,this.pendingTargetNames.add("jupyter.widget"),e.onDidStartKernel((e=>{e.notebook===t&&this.initialize()}),this,this.disposables),this.mirrorSend=this.mirrorSend.bind(this),this.onKernelSocketMessage=this.onKernelSocketMessage.bind(this);const r=n(86002);this.deserialize=r.deserialize}dispose(){for(this.sendOverheadTelemetry(),this.disposed=!0;this.disposables.length;)this.disposables.shift()?.dispose()}receiveMessage(e){switch(e.message){case d.IPyWidgetMessages.IPyWidgets_logMessage:{const t=e.payload;"error"===t.category?(0,s.traceError)(`Widget Error: ${t.message}`):(0,s.traceVerbose)(`Widget Message: ${t.message}`);break}case d.IPyWidgetMessages.IPyWidgets_Ready:this.sendKernelOptions(),this.initialize();break;case d.IPyWidgetMessages.IPyWidgets_msg:this.sendRawPayloadToKernelSocket(e.payload);break;case d.IPyWidgetMessages.IPyWidgets_binary_msg:this.sendRawPayloadToKernelSocket((0,u.deserializeDataViews)(e.payload)[0]);break;case d.IPyWidgetMessages.IPyWidgets_msg_received:this.onKernelSocketResponse(e.payload);break;case d.IPyWidgetMessages.IPyWidgets_registerCommTarget:this.registerCommTarget(e.payload);break;case d.IPyWidgetMessages.IPyWidgets_RegisterMessageHook:this.registerMessageHook(e.payload);break;case d.IPyWidgetMessages.IPyWidgets_RemoveMessageHook:this.possiblyRemoveMessageHook(e.payload);break;case d.IPyWidgetMessages.IPyWidgets_MessageHookResult:this.handleMessageHookResponse(e.payload);break;case d.IPyWidgetMessages.IPyWidgets_iopub_msg_handled:this.iopubMessageHandled(e.payload)}}sendRawPayloadToKernelSocket(e){this.pendingMessages.push(e),this.sendPendingMessages()}registerCommTarget(e){this.pendingTargetNames.add(e),this.initialize()}initialize(){this.jupyterLab||(this.jupyterLab=n(76240));const e=this.getKernel();e&&(this.subscribeToKernelSocket(e),this.registerCommTargets(e)),(0,s.traceVerbose)("IPyWidgetMessageDispatcher.initialize")}raisePostMessage(e,t){this._postMessageEmitter.fire({message:e,payload:t})}subscribeToKernelSocket(e){!this.subscribedToKernelSocket&&e.session&&(this.subscribedToKernelSocket=!0,e.session.kernelSocket.subscribe((t=>{if(this.kernelSocketInfo?.socket?.removeReceiveHook(this.onKernelSocketMessage),this.kernelSocketInfo?.socket?.removeSendHook(this.mirrorSend),this.kernelWasConnectedAtLeastOnce){for(;this.pendingMessages.length;)this.pendingMessages.shift();this.waitingMessageIds.forEach((e=>e.resultPromise.resolve())),this.waitingMessageIds.clear(),this.messageHookRequests.forEach((e=>e.resolve(!1))),this.messageHookRequests.clear(),this.messageHooks.clear(),this.sendRestartKernel()}t&&t.socket?(this.kernelWasConnectedAtLeastOnce=!0,this.kernelSocketInfo=t,this.kernelSocketInfo.socket?.addReceiveHook(this.onKernelSocketMessage),this.kernelSocketInfo.socket?.addSendHook(this.mirrorSend),this.sendKernelOptions(),this.registerCommTargets(e),this.sendPendingMessages()):this.kernelSocketInfo=void 0})))}sendKernelOptions(){this.kernelSocketInfo&&this.raisePostMessage(d.IPyWidgetMessages.IPyWidgets_kernelOptions,this.kernelSocketInfo.options)}async mirrorSend(e,t){if("string"==typeof e&&e.includes("shell")&&e.includes("execute_request")){const t=Date.now(),n=this.deserialize(e);if("shell"===n.channel&&"execute_request"===n.header.msg_type){if(!(0,h.shouldMessageBeMirroredWithRenderer)(n))return;const e=this.mirrorExecuteRequest(n);this.isUsingIPyWidgets&&await e,this.totalWaitTime=Date.now()-t,this.totalWaitedMessages+=1}}}sendRestartKernel(){this.raisePostMessage(d.IPyWidgetMessages.IPyWidgets_onRestartKernel,void 0)}mirrorExecuteRequest(e){const t=(0,c.createDeferred)();return this.waitingMessageIds.set(e.header.msg_id,{startTime:Date.now(),resultPromise:t}),this.raisePostMessage(d.IPyWidgetMessages.IPyWidgets_mirror_execute,{id:e.header.msg_id,msg:e}),t.promise}messageNeedsFullHandle(e){return"iopub"===e.channel&&"comm_msg"===e.header?.msg_type&&"update"===e.content?.data?.method&&this.outputWidgetIds.has(e.content?.comm_id)}iopubMessageHandled(e){const t=e.id;this.fullHandleMessage&&this.fullHandleMessage.id===t&&(this.fullHandleMessage.promise.resolve(),this.fullHandleMessage=void 0)}async onKernelSocketMessage(e){const t=(0,i.default)(),n=(0,c.createDeferred)();if(this.waitingMessageIds.set(t,{startTime:Date.now(),resultPromise:n}),"string"==typeof e?(0,h.shouldMessageBeMirroredWithRenderer)(e)&&this.raisePostMessage(d.IPyWidgetMessages.IPyWidgets_msg,{id:t,data:e}):this.raisePostMessage(d.IPyWidgetMessages.IPyWidgets_binary_msg,{id:t,data:(0,u.serializeDataViews)([e])}),"string"!=typeof e||e.includes(a.WIDGET_MIMETYPE)||e.includes(a.Identifiers.DefaultCommTarget)||e.includes("comm_open")||e.includes("comm_close")||e.includes("comm_msg")){const t=this.deserialize(e);if(!(0,h.shouldMessageBeMirroredWithRenderer)(t))return;t&&t.content&&t.content.data&&(t.content.data[a.WIDGET_MIMETYPE]||t.content.target_name===a.Identifiers.DefaultCommTarget)&&(this.isUsingIPyWidgets=!0);const r="comm_open"===t.header?.msg_type&&"@jupyter-widgets/output"===t.content?.data?.state?._model_module&&"OutputModel"===t.content?.data?.state?._model_name,i="comm_close"===t.header?.msg_type&&this.outputWidgetIds.has(t.content?.comm_id);r?this.outputWidgetIds.add(t.content.comm_id):i?this.outputWidgetIds.delete(t.content.comm_id):this.messageNeedsFullHandle(t)&&(this.fullHandleMessage={id:t.header.msg_id,promise:(0,c.createDeferred)()},await n.promise,await this.fullHandleMessage.promise.promise,this.fullHandleMessage=void 0)}}onKernelSocketResponse(e){const t=this.waitingMessageIds.get(e.id);t&&(this.waitingMessageIds.delete(e.id),this.totalWaitTime+=Date.now()-t.startTime,this.totalWaitedMessages+=1,t.resultPromise.resolve())}sendPendingMessages(){if(this.kernel?.session&&this.kernelSocketInfo)for(;this.pendingMessages.length;)try{this.kernelSocketInfo.socket?.sendToRealKernel(this.pendingMessages[0]),this.pendingMessages.shift()}catch(e){return void(0,s.traceError)("Failed to send message to Kernel",e)}}registerCommTargets(e){for(;this.pendingTargetNames.size>0;){const t=Array.from([...this.pendingTargetNames.values()]).shift();if(t){if(this.commTargetsRegistered.has(t))return;(0,s.traceVerbose)(`Registering commtarget ${t}`),this.commTargetsRegistered.add(t),this.pendingTargetNames.delete(t),t!==a.Identifiers.DefaultCommTarget&&e.session?.registerCommTarget(t,l.noop)}}}getKernel(){return this.document&&!this.kernel?.session&&(this.kernel=this.kernelProvider.get(this.document),this.kernel?.onDisposed((()=>this.kernel=void 0))),this.kernel&&!this.kernelRestartHandlerAttached&&(this.kernelRestartHandlerAttached=!0,this.disposables.push(this.kernel.onRestarted(this.handleKernelRestarts,this))),this.kernel}async handleKernelRestarts(){!this.disposed&&0!==this.commTargetsRegistered.size&&this.kernel?.session&&(Array.from(this.commTargetsRegistered.keys()).forEach((e=>{this.commTargetsRegistered.delete(e),this.pendingTargetNames.add(e)})),this.subscribeToKernelSocket(this.kernel),this.registerCommTargets(this.kernel))}registerMessageHook(e){try{if(this.kernel?.session&&!this.messageHooks.has(e)){this.hookCount+=1;const t=this.messageHookCallback.bind(this);this.messageHooks.set(e,t),this.kernel?.session.registerMessageHook(e,t)}}finally{this.raisePostMessage(d.IPyWidgetMessages.IPyWidgets_ExtensionOperationHandled,{id:e,type:d.IPyWidgetMessages.IPyWidgets_RegisterMessageHook})}}possiblyRemoveMessageHook(e){try{e.lastHookedMsgId?this.pendingHookRemovals.set(e.lastHookedMsgId,e.hookMsgId):this.removeMessageHook(e.hookMsgId)}finally{this.raisePostMessage(d.IPyWidgetMessages.IPyWidgets_ExtensionOperationHandled,{id:e.hookMsgId,type:d.IPyWidgetMessages.IPyWidgets_RemoveMessageHook})}}removeMessageHook(e){if(this.kernel?.session&&this.messageHooks.has(e)){const t=this.messageHooks.get(e);this.messageHooks.delete(e),this.kernel?.session.removeMessageHook(e,t)}}async messageHookCallback(e){const t=(0,c.createDeferred)(),n=(0,i.default)(),r=e.parent_header.msg_id;if(this.messageHooks.has(r)?(this.messageHookRequests.set(n,t),this.raisePostMessage(d.IPyWidgetMessages.IPyWidgets_MessageHookCall,{requestId:n,parentId:r,msg:e})):t.resolve(!0),this.pendingHookRemovals.has(e.header.msg_id)){const t=this.pendingHookRemovals.get(e.header.msg_id);this.pendingHookRemovals.delete(e.header.msg_id),this.removeMessageHook(t)}return t.promise}handleMessageHookResponse(e){const t=this.messageHookRequests.get(e.requestId);t&&(this.messageHookRequests.delete(e.requestId),t.resolve(!!e.msgType.includes("comm")||e.result))}sendOverheadTelemetry(){(0,p.sendTelemetryEvent)(p.Telemetry.IPyWidgetOverhead,{totalOverheadInMs:this.totalWaitTime,numberOfMessagesWaitedOn:this.totalWaitedMessages,averageWaitTime:this.totalWaitTime/this.totalWaitedMessages,numberOfRegisteredHooks:this.hookCount})}}},43713:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.IPyWidgetMessageDispatcherFactory=void 0;const o=n(86700),s=n(66828),a=n(42080),c=n(30682),l=n(94062),u=n(21375);class d{get postMessage(){return this._postMessageEmitter.event}constructor(e,t){this.baseMulticaster=e,this.oldMessages=t,this._postMessageEmitter=new s.EventEmitter,this.disposables=[],e.postMessage(this.raisePostMessage,this,this.disposables)}dispose(){for(;this.disposables.length;)this.disposables.shift()?.dispose()}initialize(){return this.baseMulticaster.initialize()}receiveMessage(e){this.baseMulticaster.receiveMessage(e)}raisePostMessage(e){this.oldMessages.forEach((e=>{this._postMessageEmitter.fire(e)})),this.oldMessages=[],this._postMessageEmitter.fire(e)}}let p=class{constructor(e,t){this.kernelProvider=t,this.messageDispatchers=new WeakMap,this.messagesPerNotebook=new WeakMap,this.disposed=!1,this.disposables=[],e.push(this),t.onDidDisposeKernel(this.trackDisposingOfKernels,this,e)}dispose(){for(this.disposed=!0;this.disposables.length;)this.disposables.shift()?.dispose()}create(e){let t=this.messageDispatchers.get(e);t||(t=new u.IPyWidgetMessageDispatcher(this.kernelProvider,e),this.messageDispatchers.set(e,t),this.disposables.push(t.postMessage((t=>this.onMessage(t,e)),this)));let n=[];e&&this.messagesPerNotebook.get(e)&&(n=this.messagesPerNotebook.get(e)||[]);const r=new d(t,n);return this.disposables.push(r),r}trackDisposingOfKernels(e){if(this.disposed)return;const t=e.notebook,n=this.messageDispatchers.get(t);this.messageDispatchers.delete(t),n?.dispose()}onMessage(e,t){t&&(this.messagesPerNotebook.set(t,this.messagesPerNotebook.get(t)||[]),e.message!==c.IPyWidgetMessages.IPyWidgets_kernelOptions&&e.message!==c.IPyWidgetMessages.IPyWidgets_registerCommTarget||this.messagesPerNotebook.get(t).push(e))}};p=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IDisposableRegistry)),i(1,(0,o.inject)(l.IKernelProvider))],p),t.IPyWidgetMessageDispatcherFactory=p},64190:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RendererVersionChecker=void 0;const s=n(86700),a=n(66828),c=n(10053),l=n(15925),u=n(20397),d=n(42080),p=n(86563),h=n(25251),f=n(58681);let g=r=class{constructor(e,t){this.appShell=t,this.disposables=[],e.push(this)}dispose(){(0,u.disposeAllDisposables)(this.disposables)}activate(){a.workspace.onDidChangeNotebookDocument(this.onDidChangeNotebookDocument,this,this.disposables)}onDidChangeNotebookDocument(e){(0,p.isJupyterNotebook)(e.notebook)&&e.cellChanges.some((e=>e.outputs&&e.outputs.some((e=>e.items&&e.items.some((e=>e.mime===l.WIDGET_MIMETYPE))))))&&this.checkRendererExtensionVersion()}checkRendererExtensionVersion(){if(!a.workspace.isTrusted)return;const e=a.extensions.getExtension(l.RendererExtension);if(!e)return void this.displayNotInstalledMessage();const t=e.packageJSON.version;if(!t)return void this.displayUpdateMessage();const n=t.split("."),r=parseInt(n[0],10),i=parseInt(n[1],10),o=parseInt(n[2],10);(r<1||1===r&&0===i&&o<15)&&this.displayUpdateMessage()}displayNotInstalledMessage(){r.messageDisplayed||(r.messageDisplayed=!0,this.appShell.showInformationMessage(h.DataScience.rendererExtensionRequired,{modal:!0},h.Common.bannerLabelYes).then((e=>{e===h.Common.bannerLabelYes&&a.commands.executeCommand("extension.open",l.RendererExtension).then(f.noop,f.noop)})).then(f.noop,f.noop))}displayUpdateMessage(){r.messageDisplayed||(r.messageDisplayed=!0,this.appShell.showInformationMessage(h.DataScience.rendererExtension1015Required,{modal:!0},h.Common.bannerLabelYes).then((e=>{e===h.Common.bannerLabelYes&&a.commands.executeCommand("extension.open",l.RendererExtension).then(f.noop,f.noop)})).then(f.noop,f.noop))}};g.messageDisplayed=!1,g=r=i([(0,s.injectable)(),o(0,(0,s.inject)(d.IDisposableRegistry)),o(1,(0,s.inject)(c.IApplicationShell))],g),t.RendererVersionChecker=g},31131:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseIPyWidgetScriptManager=t.extractRequireConfigFromWidgetEntry=void 0;const i=n(66828),o=n(20397),s=n(35412),a=n(11642),c=n(9959),l=n(94062),u=n(96434),d=r(n(44110)),p=n(11386),h=n(15925);async function f(e,t,n){const r=["require.config({","requirejs.config({",'["require"].config({',"['require'].config({",'["requirejs"].config({',"['requirejs'].config({",'["require"]["config"]({',"['require']['config']({",'["requirejs"]["config"]({',"['requirejs']['config']({"],o=await(0,u.getTelemetrySafeHashedString)(t);let s,a=0;for(;a<=0&&r.length&&(s=r.pop(),s);)a=n.indexOf(s);if(a<0)return void(0,c.sendTelemetryEvent)(c.Telemetry.IPyWidgetExtensionJsInfo,void 0,{widgetFolderNameHash:o,failed:!0,patternUsedToRegisterRequireConfig:s,failure:"couldNotLocateRequireConfigStart"});const l=n.indexOf(")",a);if(l<=0||!s)return void(0,c.sendTelemetryEvent)(c.Telemetry.IPyWidgetExtensionJsInfo,void 0,{widgetFolderNameHash:o,failed:!0,patternUsedToRegisterRequireConfig:s,failure:"couldNotLocateRequireConfigEnd"});const p=n.indexOf("{",a);let h=n.substring(p,l);h=(0,d.default)(h,{language:"javascript"}),h=h.splitLines({trim:!0,removeEmptyEntries:!0}).join("");const f=h.split("{")[3].split("}")[0].split(",").map((e=>e.trim())).filter((e=>e.length&&e.includes(":"))),g={};if(f.forEach((t=>{const n=t.split(":"),r=n[0].trim().trimQuotes().trim(),o=n[1].trim().trimQuotes().trim();g[r]=i.Uri.joinPath(e,o)})),g&&Object.keys(g).length)return(0,c.sendTelemetryEvent)(c.Telemetry.IPyWidgetExtensionJsInfo,{requireEntryPointCount:Object.keys(g).length},{widgetFolderNameHash:o,patternUsedToRegisterRequireConfig:s}),g;(0,c.sendTelemetryEvent)(c.Telemetry.IPyWidgetExtensionJsInfo,void 0,{widgetFolderNameHash:o,failed:!0,patternUsedToRegisterRequireConfig:s,failure:"noRequireConfigEntries"})}t.extractRequireConfigFromWidgetEntry=f,t.BaseIPyWidgetScriptManager=class{constructor(e){this.kernel=e,this.disposables=[],e.onRestarted(this.onKernelRestarted,this,this.disposables)}dispose(){(0,o.disposeAllDisposables)(this.disposables)}async getWidgetModuleMappings(){return this.widgetModuleMappings||(this.widgetModuleMappings=this.getWidgetModuleMappingsImpl()),this.widgetModuleMappings}onKernelRestarted(){this.widgetModuleMappings=void 0}async getConfigFromWidget(e,t,n){const r=await this.getWidgetScriptSource(t);try{const i=await f(e,n,r);if(!i){let e=`Failed to extract require.config from widget for ${n} from ${(0,s.getDisplayPath)(t)}`;h.isCI&&(e+=`with contents ${r}`),(0,a.traceWarning)(e)}return(0,a.traceVerbose)(`Extracted require.config entry for ${n} from ${(0,s.getDisplayPath)(t)} for ${e.toString()} is ${JSON.stringify(i)}`),i}catch(e){(0,a.traceError)(`Failed to extract require.config entry for ${n} from ${(0,s.getDisplayPath)(t)}`,e)}}async getWidgetModuleMappingsImpl(){const e=new p.StopWatch,[t,n]=await Promise.all([this.getWidgetEntryPoints(),this.getNbExtensionsParentPath()]);if((0,a.traceVerbose)(`Widget Entry points = ${JSON.stringify(t)}`),(0,a.traceVerbose)(`Widget baseUrl = ${n?.toString()}`),!n)return;const r=await Promise.all(t.map((e=>this.getConfigFromWidget(n,e.uri,e.widgetFolderName)))),i=r.reduce(((e,t)=>Object.assign(e||{},t)),{});return i&&Object.keys(i).length?(delete i["jupyter-js-widgets"],delete i["@jupyter-widgets/base"],delete i["@jupyter-widgets/controls"],delete i["@jupyter-widgets/output"]):(0,a.traceInfoIfCI)(`No config, entryPoints = ${JSON.stringify(t)}, widgetConfigs = ${JSON.stringify(r)}`),(0,a.traceVerbose)(`Widget config = ${JSON.stringify(i)}`),(0,c.sendTelemetryEvent)(c.Telemetry.DiscoverIPyWidgetNamesPerf,{duration:e.elapsedTime},{type:(0,l.isLocalConnection)(this.kernel.kernelConnectionMetadata)?"local":"remote"}),i&&Object.keys(i).length?i:void 0}}},94483:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CDNWidgetScriptSourceProvider=t.GlobalStateKeyToNeverWarnAboutNoNetworkAccess=t.GlobalStateKeyToNeverWarnAboutScriptsNotFoundOnCDN=t.GlobalStateKeyToTrackIfUserConfiguredCDNAtLeastOnce=void 0;const o=n(86700),s=n(66828),a=n(10053),c=n(15925),l=n(42080),u=n(43138),d=n(25251),p=n(58681),h=n(11642),f=n(99203),g=n(9959),m="https://unpkg.com/",y="https://cdn.jsdelivr.net/npm/";t.GlobalStateKeyToTrackIfUserConfiguredCDNAtLeastOnce="IPYWidgetCDNConfigured",t.GlobalStateKeyToNeverWarnAboutScriptsNotFoundOnCDN="IPYWidgetNotFoundOnCDN",t.GlobalStateKeyToNeverWarnAboutNoNetworkAccess="IPYWidgetNoNetWorkAccess";let v=class{get cdnProviders(){return this.configurationSettings.getSettings(void 0).widgetScriptSources}constructor(e,t,n,r){this.appShell=e,this.globalMemento=t,this.configurationSettings=n,this.httpClient=r,this.cache=new Map,this.isOnCDNCache=new Map,this.notifiedUserAboutWidgetScriptNotFound=new Set}dispose(){this.cache.clear()}async isOnCDN(e){const t=`MODULE_VERSION_ON_CDN_${e}`;if(this.isOnCDNCache.has(t))return this.isOnCDNCache.get(t);if(this.globalMemento.get(t,!1))return!0;const n=(async()=>{const t=(0,u.createDeferredFromPromise)(this.httpClient.exists(`${m}${e}`)),n=(0,u.createDeferredFromPromise)(this.httpClient.exists(`${y}${e}`));return await Promise.race([t.promise,n.promise]),!!(t.value||n.value||(await Promise.all([t.promise,n.promise]),t.value||n.value))})();return n.then((e=>{if(e)return this.globalMemento.update(t,!0)})).then(p.noop,p.noop),this.isOnCDNCache.set(t,n),n}async getWidgetScriptSource(e,n,r){if(!1===r)return this.warnIfNoAccessToInternetFromWebView(e).ignoreErrors(),{moduleName:e};if(0===this.cdnProviders.length&&this.globalMemento.get(t.GlobalStateKeyToTrackIfUserConfiguredCDNAtLeastOnce,!1))return{moduleName:e};const i=this.getModuleKey(e,n);return this.cache.get(i)||this.cache.set(i,this.getWidgetScriptSourceImplementation(e,n)),this.cache.get(i)}async generateDownloadUri(e,t,n){const r=function(e){switch(e){case"unpkg.com":return m;case"jsdelivr.com":return y}}(n);if(r)return function(e,t,n){let r=t,i="index",o=t.indexOf("/");return-1!==o&&"@"===t[0]&&(o=t.indexOf("/",o+1)),-1!==o&&(i=t.substr(o+1),r=t.substr(0,o)),e===y&&(n.startsWith("^")&&(n=n.slice(1)),i.endsWith(".js")||(i=i.concat(".js"))),`${e}${r}@${n}/dist/${i}`}(r,e,t)}getModuleKey(e,t){return`${e}${t}`}async getWidgetScriptSourceImplementation(e,t){if((0,h.traceInfo)(`${f.ConsoleForegroundColors.Green}Searching for Widget Script ${e}#${t} using cdns ${this.cdnProviders.join(" ")}`),await this.configureWidgets(),0===this.cdnProviders.length)return{moduleName:e};const n=(await Promise.all(this.cdnProviders.map((n=>this.getValidUri(e,t,n))))).find((e=>e));return n?((0,h.traceInfo)(`${f.ConsoleForegroundColors.Green}Widget Script ${e}#${t} found at URI: ${n}`),{moduleName:e,scriptUri:n,source:"cdn"}):((0,h.traceError)(`Widget Script ${e}#${t} was not found on on any cdn`),this.handleWidgetSourceNotFound(e,t).ignoreErrors(),{moduleName:e})}async getValidUri(e,t,n){try{const r=await this.generateDownloadUri(e,t,n);if(r&&await this.httpClient.exists(r))return r}catch(r){return void(0,h.traceVerbose)(`Failed downloading ${e}:${t} from ${n}`)}}async warnIfNoAccessToInternetFromWebView(e){if(!this.globalMemento.get(t.GlobalStateKeyToNeverWarnAboutNoNetworkAccess,!1)&&!this.notifiedUserAboutWidgetScriptNotFound.has(e)&&0!==this.cdnProviders.length)switch(this.notifiedUserAboutWidgetScriptNotFound.add(e),await this.appShell.showWarningMessage(d.DataScience.cdnWidgetScriptNotAccessibleWarningMessage(e,JSON.stringify(this.cdnProviders)),d.Common.ok,d.Common.doNotShowAgain,d.Common.moreInfo)){case d.Common.doNotShowAgain:return this.globalMemento.update(t.GlobalStateKeyToNeverWarnAboutNoNetworkAccess,!0);case d.Common.moreInfo:return this.appShell.openUrl("https://aka.ms/PVSCIPyWidgets");default:(0,p.noop)()}}async configureWidgets(){if(0!==this.cdnProviders.length)return;if(this.globalMemento.get(t.GlobalStateKeyToTrackIfUserConfiguredCDNAtLeastOnce,!1))return;if(this.configurationPromise)return this.configurationPromise.promise;this.configurationPromise=(0,u.createDeferred)(),(0,g.sendTelemetryEvent)(c.Telemetry.IPyWidgetPromptToUseCDN);const e=await this.appShell.showInformationMessage(d.DataScience.useCDNForWidgetsNoInformation,{modal:!0},d.Common.ok,d.Common.doNotShowAgain,d.Common.moreInfo);let n="dismissed";switch(e){case d.Common.ok:n="ok",await Promise.all([this.updateScriptSources(["jsdelivr.com","unpkg.com"]),this.globalMemento.update(t.GlobalStateKeyToTrackIfUserConfiguredCDNAtLeastOnce,!0)]);break;case d.Common.doNotShowAgain:n="doNotShowAgain",await Promise.all([this.updateScriptSources([]),this.globalMemento.update(t.GlobalStateKeyToTrackIfUserConfiguredCDNAtLeastOnce,!0)]);break;case d.Common.moreInfo:this.appShell.openUrl("https://aka.ms/PVSCIPyWidgets");break;default:n=e===d.Common.cancel?"cancel":"dismissed"}(0,g.sendTelemetryEvent)(c.Telemetry.IPyWidgetPromptToUseCDNSelection,void 0,{selection:n}),this.configurationPromise.resolve()}async updateScriptSources(e){await this.configurationSettings.updateSetting("widgetScriptSources",e,void 0,s.ConfigurationTarget.Global)}async handleWidgetSourceNotFound(e,n){if(!this.globalMemento.get(t.GlobalStateKeyToNeverWarnAboutScriptsNotFoundOnCDN,!1)&&!this.notifiedUserAboutWidgetScriptNotFound.has(e)&&0!==this.cdnProviders.length)switch(this.notifiedUserAboutWidgetScriptNotFound.add(e),await this.appShell.showWarningMessage(d.DataScience.widgetScriptNotFoundOnCDNWidgetMightNotWork(e,n,JSON.stringify(this.cdnProviders)),d.Common.ok,d.Common.doNotShowAgain,d.Common.reportThisIssue)){case d.Common.doNotShowAgain:return this.globalMemento.update(t.GlobalStateKeyToNeverWarnAboutScriptsNotFoundOnCDN,!0);case d.Common.reportThisIssue:return this.appShell.openUrl("https://aka.ms/CreatePVSCDataScienceIssue");default:(0,p.noop)()}}};v=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IApplicationShell)),i(1,(0,o.inject)(l.IMemento)),i(1,(0,o.named)(l.GLOBAL_MEMENTO)),i(2,(0,o.inject)(l.IConfigurationService)),i(3,(0,o.inject)(l.IHttpClient))],v),t.CDNWidgetScriptSourceProvider=v},36948:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.IPyWidgetScriptManagerFactory=void 0;const o=n(86700),s=n(83599),a=n(42080),c=n(40145);let l=class{constructor(e,t,n,r){this.httpClient=e,this.context=t,this.fs=n,this.disposables=r,this.managers=new WeakMap}getOrCreate(e){if(!this.managers.has(e)){if("connectToLiveRemoteKernel"!==e.kernelConnectionMetadata.kind&&"startUsingRemoteKernelSpec"!==e.kernelConnectionMetadata.kind)throw new Error("Cannot enumerate Widget Scripts using local kernels on the Web");{const t=new c.RemoteIPyWidgetScriptManager(e,this.httpClient,this.context,this.fs);this.managers.set(e,t),e.onDisposed((()=>t.dispose()),this,this.disposables)}}return this.managers.get(e)}};l=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IHttpClient)),i(1,(0,o.inject)(a.IExtensionContext)),i(2,(0,o.inject)(s.IFileSystem)),i(3,(0,o.inject)(a.IDisposableRegistry))],l),t.IPyWidgetScriptManagerFactory=l},89159:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IPyWidgetScriptSource=void 0;const r=n(66828),i=n(11642),o=n(30682),s=n(9959),a=n(99087),c=n(99203),l=n(58681),u=n(43138),d=n(78205),p=n(56297);t.IPyWidgetScriptSource=class{get postMessage(){return this.postEmitter.event}constructor(e,t,n,i,s,a,c,l){this.document=e,this.kernelProvider=t,this.configurationSettings=i,this.httpClient=s,this.sourceProviderFactory=a,this.cdnScriptProvider=l,this.postEmitter=new r.EventEmitter,this.disposables=[],this.isWebViewOnline=(0,u.createDeferred)(),this.widgetSources=new Map,this.pendingModuleRequests=new Map,this.uriTranslationRequests=new p.ResourceMap,this.uriConverter=new d.ScriptUriConverter(c,(e=>(this.uriTranslationRequests.has(e)||this.uriTranslationRequests.set(e,(0,u.createDeferred)()),this.postEmitter.fire({message:o.InteractiveWindowMessages.ConvertUriForUseInWebViewRequest,payload:e}),this.uriTranslationRequests.get(e).promise))),this.isWebViewOnline.promise.ignoreErrors(),n.push(this),this.kernelProvider.onDidStartKernel((e=>{e.notebook===this.document&&this.initialize()}),this,this.disposables)}dispose(){for(;this.disposables.length;)this.disposables.shift()?.dispose()}onMessage(e,t){if(e===o.InteractiveWindowMessages.ConvertUriForUseInWebViewResponse){const e=t;e&&this.uriTranslationRequests.has(e.request)&&this.uriTranslationRequests.get(e.request).resolve(e.response)}else if(e===o.IPyWidgetMessages.IPyWidgets_Ready)this.sendBaseUrl(),this.sendWidgetScriptSources().ignoreErrors();else if(e===o.IPyWidgetMessages.IPyWidgets_IsOnline){const e=t.isOnline;this.isWebViewOnline.resolve(e)}else e===o.IPyWidgetMessages.IPyWidgets_WidgetScriptSourceRequest&&t&&this.onRequestWidgetScript(t).catch(l.noop)}initialize(){this.jupyterLab||(this.jupyterLab=n(76240)),this.kernel||(this.kernel=this.kernelProvider.get(this.document)),this.kernel?.session&&(this.scriptProvider||(this.scriptProvider=new a.IPyWidgetScriptSourceProvider(this.kernel,this.uriConverter,this.configurationSettings,this.httpClient,this.sourceProviderFactory,this.isWebViewOnline.promise,this.cdnScriptProvider),this.kernel.onDisposed((()=>this.dispose())),this.handlePendingRequests(),this.sendBaseUrl(),(0,i.traceVerbose)("IPyWidgetScriptSource.initialize")))}sendBaseUrl(){this.scriptProvider&&this.scriptProvider.getBaseUrl().then((e=>{e&&this.postEmitter.fire({message:o.IPyWidgetMessages.IPyWidgets_BaseUrlResponse,payload:e.toString()})})).catch((e=>(0,i.traceError)("Failed to get baseUrl",e)))}async sendWidgetScriptSources(){if(this.scriptProvider&&!this.allWidgetScriptsSent)try{(await this.scriptProvider.getWidgetScriptSources()).forEach((e=>{"cdn"!==this.widgetSources.get(e.moduleName)?.source&&this.widgetSources.set(e.moduleName,e),this.postEmitter.fire({message:o.IPyWidgetMessages.IPyWidgets_WidgetScriptSourceResponse,payload:e})}))}catch(e){(0,i.traceWarning)("Failed to fetch script sources",e)}finally{this.allWidgetScriptsSent=!0}}async onRequestWidgetScript(e){const{moduleName:t,moduleVersion:n,requestId:r}=e;if((0,i.traceInfo)(`${c.ConsoleForegroundColors.Green}Fetch Script for ${JSON.stringify(e)}`),await this.sendWidgetSource(t,n,r).catch((e=>(0,i.traceError)("Failed to send widget sources upon ready",e))),this.scriptProvider&&!this.allWidgetScriptsSent)try{await this.sendWidgetScriptSources()}finally{this.sendWidgetSource(t,n,r).catch(i.traceError.bind(void 0,"Failed to send widget sources upon ready"))}}async sendWidgetSource(e,t="*",n){if(!e||e.startsWith("@jupyter"))return;if(!this.kernel||!this.scriptProvider)return void this.pendingModuleRequests.set(e,{moduleVersion:t,requestId:n});let r={moduleName:e,requestId:n};try{(0,i.traceInfo)(`${c.ConsoleForegroundColors.Green}Fetch Script for ${e}`),r=await this.scriptProvider.getWidgetScriptSource(e,t),"cdn"!==this.widgetSources.get(r.moduleName)?.source&&this.widgetSources.set(r.moduleName,r)}catch(e){(0,i.traceError)("Failed to get widget source due to an error",e),(0,s.sendTelemetryEvent)(s.Telemetry.HashedIPyWidgetScriptDiscoveryError)}finally{(0,i.traceInfo)(`${c.ConsoleForegroundColors.Green}Script for ${e}, is ${r.scriptUri} from ${r.source}`),this.postEmitter.fire({message:o.IPyWidgetMessages.IPyWidgets_WidgetScriptSourceResponse,payload:r})}}handlePendingRequests(){const e=Array.from(this.pendingModuleRequests.keys());for(;e.length;){const t=e.shift();if(t){const{moduleVersion:e,requestId:n}=this.pendingModuleRequests.get(t);this.pendingModuleRequests.delete(t),this.sendWidgetSource(t,e,n).catch(i.traceError.bind(`Failed to send WidgetScript for ${t}`))}}}}},99087:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.IPyWidgetScriptSourceProvider=void 0,n(8513);const i=n(11642),o=n(9959),s=n(96434),a=n(20397),c=n(66828),l=n(85446);class u{get configuredScriptSources(){return this.configurationSettings.getSettings(void 0).widgetScriptSources}constructor(e,t,n,r,i,o,s){this.kernel=e,this.localResourceUriConverter=t,this.configurationSettings=n,this.httpClient=r,this.sourceProviderFactory=i,this.isWebViewOnline=o,this.cdnScriptProvider=s,this.disposables=[],this.scriptProviders=this.sourceProviderFactory.getProviders(this.kernel,this.localResourceUriConverter,this.httpClient),this.monitorKernel()}dispose(){(0,a.disposeAllDisposables)(this.disposables),this.disposeScriptProviders()}async getBaseUrl(){const e=this.scriptProviders.find((e=>e.getBaseUrl));if(e)return e.getBaseUrl()}async getWidgetScriptSources(){const e=[];return await Promise.all(this.scriptProviders.map((async t=>{t.getWidgetScriptSources&&e.push(...await t.getWidgetScriptSources())}))),e}async getWidgetScriptSource(e,t){const n=await this.isWebViewOnline,r=(this.scriptProviders||[]).slice();let o={moduleName:e};for(;r.length;){const i=r.shift();if(!i)continue;const s=await i.getWidgetScriptSource(e,t,n);if(s.scriptUri){o=s;break}}return this.sendTelemetryForWidgetModule(e,t,"",o.source).ignoreErrors(),o.scriptUri?(0,i.traceInfo)(`Script source for Widget ${e}@${t} was found from source ${o.source}`):(0,i.traceError)(`Script source for Widget ${e}@${t} not found`),o}async sendTelemetryForWidgetModule(e,t,n,r){const i=`${e}.${e}@${t}`;if(u.trackedWidgetModuleNames.has(i))return;u.trackedWidgetModuleNames.add(i);const a=e.toLowerCase().startsWith("@jupyter-widgets"),c="cdn"===r||a||await this.cdnScriptProvider.isOnCDN(e),l=c?e.replace(/\//g,"_").replace(/\\/g,"_").replace(/@/g,"_at_"):void 0,d=c?n.replace(/\//g,"_").replace(/\\/g,"_").replace(/@/g,"_at_"):void 0;(0,o.sendTelemetryEvent)(o.Telemetry.HashedIPyWidgetNameUsed,void 0,{hashedName:await(0,s.getTelemetrySafeHashedString)(e),moduleName:l,modelName:d,source:r,moduleVersion:c?t:void 0,cdnSearched:this.configuredScriptSources.length>0})}disposeScriptProviders(){for(;this.scriptProviders&&this.scriptProviders.length;){const e=this.scriptProviders.shift();e&&e.dispose()}}monitorKernel(){this.kernel.onStarted(this.hookKernelEvents,this,this.disposables),this.kernel.onRestarted(this.hookKernelEvents,this,this.disposables);const e=this.kernel.kernelSocket.subscribe((()=>this.hookKernelEvents()));this.disposables.push(new c.Disposable((()=>e.unsubscribe())))}hookKernelEvents(){const e=this.kernel.session?.kernel;e&&(e.anyMessage.connect(this.onAnyMessage,this),this.disposables.push(new c.Disposable((()=>e.anyMessage.disconnect(this.onAnyMessage,this)))))}onAnyMessage(e,t){if("recv"===t.direction&&"comm_open"===t.msg.header.msg_type){const e=t.msg.content.data;e.state?._model_module&&e.state._model_name&&this.sendTelemetryForWidgetModule(e.state?._model_module,e.state?._model_module_version||"",e.state?._model_name).ignoreErrors()}}}u.trackedWidgetModuleNames=new Set,r([(0,l.swallowExceptions)()],u.prototype,"sendTelemetryForWidgetModule",null),r([(0,l.swallowExceptions)()],u.prototype,"onAnyMessage",null),t.IPyWidgetScriptSourceProvider=u},95901:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.NbExtensionsPathProvider=void 0;const i=n(86700),o=n(66828);let s=class{getNbExtensionsParentPath(e){switch(e.kernelConnectionMetadata.kind){case"connectToLiveRemoteKernel":case"startUsingRemoteKernelSpec":return o.Uri.parse(e.kernelConnectionMetadata.baseUrl);default:return}}};s=r([(0,i.injectable)()],s),t.NbExtensionsPathProvider=s},40145:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteIPyWidgetScriptManager=void 0;const s=o(n(15948)),a=n(66828),c=n(11642),l=n(98729),u=n(31131),d=n(15925),p=n(43138),h=n(58681);class f extends u.BaseIPyWidgetScriptManager{constructor(e,t,n,r){if(super(e),this.httpClient=t,this.context=n,this.fs=r,"connectToLiveRemoteKernel"!==e.kernelConnectionMetadata.kind&&"startUsingRemoteKernelSpec"!==e.kernelConnectionMetadata.kind)throw new Error("Invalid usage, can only be used for remote kernels");this.kernelConnection=e.kernelConnectionMetadata,this.getWidgetEntryPoints().catch(h.noop)}getBaseUrl(){return this.getNbExtensionsParentPath()}async getNbExtensionsParentPath(){return a.Uri.parse(this.kernelConnection.baseUrl)}onKernelRestarted(){this.widgetEntryPointsPromise=void 0,super.onKernelRestarted()}async getWidgetEntryPoints(){return this.widgetEntryPointsPromise||(this.widgetEntryPointsPromise=this.getWidgetEntryPointsImpl()),this.widgetEntryPointsPromise}getCodeToExecute(){return this.code||(this.code=this.fs.readFile(a.Uri.joinPath(this.context.extensionUri,"pythonFiles","printJupyWidgetEntryPoints.py"))),this.code}async getWidgetEntryPointsImpl(){if(!(0,l.isPythonKernelConnection)(this.kernelConnection))return[];const e=await this.getCodeToExecute();if(!this.kernel.session)return(0,c.traceInfoIfCI)("No Kernel session to get list of widget entry points"),[];const t=[];t.push((0,l.executeSilently)(this.kernel.session,e,{traceErrors:!0,traceErrorsMessage:"Failed to get widget entry points from remote kernel"})),d.isCI||this.context.extensionMode!==a.ExtensionMode.Production||t.push((0,p.sleep)(1e4).then((()=>[]))),t.forEach((e=>e.catch(h.noop)));const n=await Promise.race(t);if(0===n.length)return(0,c.traceInfoIfCI)("Unable to get widget entry points, no outputs after running the code"),[];const r=n[0];if("stream"!==r.output_type||"stdout"!==r.name)return(0,c.traceInfoIfCI)("Unable to get widget entry points, no stream/stdout outputs after running the code"),[];try{return r.text.trim().substring(1).slice(0,-1).split(",").map((e=>e.trim().trimQuotes())).map((e=>({uri:a.Uri.joinPath(a.Uri.parse(this.kernelConnection.baseUrl),"nbextensions",e),widgetFolderName:s.dirname(e)})))}catch(e){return(0,c.traceError)(`Failed to parse output to get list of IPyWidgets, output is ${r.text}`,e),[]}}async getWidgetScriptSource(e){const t=e.toString(),n=await this.httpClient.downloadFile(t);if(200===n.status)return n.text();throw(0,c.traceError)(`Error downloading from ${t}: ${n.statusText}`),new Error(`Error downloading from ${t}: ${n.statusText}`)}}t.RemoteIPyWidgetScriptManager=f},83471:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteWidgetScriptSourceProvider=void 0;const r=n(66828);class i{constructor(e,t){if("connectToLiveRemoteKernel"!==e.kernelConnectionMetadata.kind&&"startUsingRemoteKernelSpec"!==e.kernelConnectionMetadata.kind)throw new Error("Invalid usage of this class, can only be used with remtoe kernels");this.kernelConnection=e.kernelConnectionMetadata,this.scriptManager=t.getOrCreate(e)}dispose(){}async getBaseUrl(){return r.Uri.parse(this.kernelConnection.baseUrl)}async getWidgetScriptSource(e){const t=(await this.getWidgetScriptSources()).find((t=>t.moduleName.toLowerCase()===e.toLowerCase()));if(!t&&e.includes("/")){const t=await this.getBaseUrl();return{moduleName:e,scriptUri:`${t.toString()}${e}`,source:"remote"}}return t||{moduleName:e}}async getWidgetScriptSources(){const e=await this.scriptManager.getWidgetModuleMappings();return e&&Object.keys(e).length?await Promise.all(Object.keys(e).map((async t=>({moduleName:t,scriptUri:e[t].toString(),source:"remote"})))):[]}}t.RemoteWidgetScriptSourceProvider=i,i.validUrls=new Map},76945:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScriptSourceProviderFactory=void 0;const o=n(86700),s=n(10053),a=n(42080),c=n(94483),l=n(83471),u=n(72265);let d=class{constructor(e,t,n,r){this.configurationSettings=e,this.appShell=t,this.globalMemento=n,this.widgetScriptManagerFactory=r}getProviders(e,t,n){const r=[];switch(r.push(new c.CDNWidgetScriptSourceProvider(this.appShell,this.globalMemento,this.configurationSettings,n)),e.kernelConnectionMetadata.kind){case"connectToLiveRemoteKernel":case"startUsingRemoteKernelSpec":r.push(new l.RemoteWidgetScriptSourceProvider(e,this.widgetScriptManagerFactory))}return r}};d=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IConfigurationService)),i(1,(0,o.inject)(s.IApplicationShell)),i(2,(0,o.inject)(a.IMemento)),i(2,(0,o.named)(a.GLOBAL_MEMENTO)),i(3,(0,o.inject)(u.IIPyWidgetScriptManagerFactory))],d),t.ScriptSourceProviderFactory=d},78205:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScriptUriConverter=void 0,t.ScriptUriConverter=class{constructor(e,t){this.isWebExtension=e,this.converter=t}async asWebviewUri(e){return this.isWebExtension?e:this.converter(e)}}},1396:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(76945),i=n(72265),o=n(43713),s=n(36948),a=n(95901),c=n(94483),l=n(64190),u=n(52064);t.registerTypes=function(e,t){e.addSingleton(o.IPyWidgetMessageDispatcherFactory,o.IPyWidgetMessageDispatcherFactory),e.addSingleton(i.IWidgetScriptSourceProviderFactory,r.ScriptSourceProviderFactory),e.addSingleton(i.IIPyWidgetScriptManagerFactory,s.IPyWidgetScriptManagerFactory),e.addSingleton(i.INbExtensionsPathProvider,a.NbExtensionsPathProvider),e.addSingleton(c.CDNWidgetScriptSourceProvider,c.CDNWidgetScriptSourceProvider),e.addSingleton(u.IExtensionSyncActivationService,l.RendererVersionChecker)}},72265:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IIPyWidgetScriptManager=t.IIPyWidgetScriptManagerFactory=t.INbExtensionsPathProvider=t.IWidgetScriptSourceProviderFactory=void 0,t.IWidgetScriptSourceProviderFactory=Symbol("IWidgetScriptSourceProviderFactory"),t.INbExtensionsPathProvider=Symbol("INbExtensionsPathProvider"),t.IIPyWidgetScriptManagerFactory=Symbol("IIPyWidgetScriptManagerFactory"),t.IIPyWidgetScriptManager=Symbol("IIPyWidgetScriptManager")},46799:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelConnector=void 0;const r=n(94062),i=n(66828),o=n(10053),s=n(11642),a=n(42080),c=n(43138),l=n(25251),u=n(47684),d=n(15925),p=n(9959),h=n(65537),f=n(83902),g=n(85249),m=n(10988),y=n(66690),v=n(90541),b=n(58681),w=n(99216),C=n(50867),S=n(98729),_=n(6491),k=n(35412),P=n(32378),I=n(36065);class E{static async switchController(e,t){const n=t.get(o.ICommandManager),r=t.get(g.INotebookEditorProvider).findNotebookEditor(e),i=t.get(C.IControllerRegistration);let s;const a=(0,c.createDeferred)(),l=i.onControllerSelected((e=>a.resolve(e.controller)));return await(0,m.selectKernel)(e,t.get(g.INotebookEditorProvider),n)&&r&&(s=await a.promise),l.dispose(),s?{controller:s.controller,metadata:s.connection}:void 0}static async notifyAndRestartDeadKernel(e,t){const n=t.get(o.IApplicationShell),r=t.get(o.ICommandManager);let i=!1;switch(await n.showErrorMessage(l.DataScience.cannotRunCellKernelIsDead((0,S.getDisplayNameOrNameOfKernelConnection)(e.kernelConnectionMetadata)),{modal:!0},l.DataScience.showJupyterLogs,l.DataScience.restartKernel)){case l.DataScience.restartKernel:await e.restart(),i=!0;break;case l.DataScience.showJupyterLogs:r.executeCommand(d.Commands.ViewJupyterOutput).then(b.noop,b.noop)}return i}static async handleKernelError(e,t,n,i,o,s,c,l){const d=e.get(a.IMemento,a.GLOBAL_MEMENTO),g=e.get(v.IDataScienceErrorHandler);c.interpreter&&"start"===n&&(0,h.clearInstalledIntoInterpreterMemento)(d,f.Product.ipykernel,c.interpreter.uri).ignoreErrors();const m=await g.handleKernelError(t,n,c,i,l),y=(0,r.isLocalConnection)(c);switch(e.tryGet(w.IRawNotebookProvider)?.isSupported&&y&&"start"===n&&(0,u.sendKernelTelemetryEvent)(i,p.Telemetry.RawKernelSessionStartNoIpykernel,{reason:m}),o.dispose().ignoreErrors(),m){case r.KernelInterpreterDependencyResponse.cancel:case r.KernelInterpreterDependencyResponse.failed:throw t;case r.KernelInterpreterDependencyResponse.selectDifferentKernel:{const n=await E.switchController(i,e);if(!n)throw t;s=n.controller,c=n.metadata;break}}return{controller:s,metadata:c}}static convertContextToFunction(e,t){switch(e){case"start":case"execution":return e=>e.start(t);case"interrupt":return e=>e.interrupt();case"restart":return e=>e.restart()}}static async verifyKernelState(e,t,n,r,i,o,s){const{kernel:a,deadKernelAction:c}=await r;if("dead"===a.status||"terminating"===a.status&&!a.disposed&&!a.disposing){if(this.deleteKernelInfo(t,r),"deadKernelWasNoRestarted"===c)throw new y.KernelDeadError(a.kernelConnectionMetadata);return"deadKernelWasRestarted"===c?a:E.wrapKernelMethod(a.kernelConnectionMetadata,"start",i,e,t,n,s,o)}return a}static async wrapKernelMethod(e,t,n,r,i,o,a,l=(()=>(0,b.noop)())){(0,s.traceVerbose)(`${t} the kernel, options.disableUI=${o.disableUI} for ${(0,k.getDisplayPath)("notebook"in i?i.notebook.uri:i.resource)}`);let u=this.getKernelInfo(i);if(!o.disableUI&&u?.options.disableUI&&(u.options.disableUI=!1),!o.disableUI&&u?.kernel.resolved&&(u?.kernel.value?.kernel?.disposed||u?.kernel.value?.kernel?.disposing)&&(this.deleteKernelInfo(i),u=void 0),u&&"restart"!==t&&"interrupt"!==t)return E.verifyKernelState(r,i,o,u.kernel.promise,n,l,a);const d=E.wrapKernelMethodImpl(e,t,r,i,o,n,l),p=(0,c.createDeferredFromPromise)(d);return p.promise.catch(b.noop),d.then((e=>{e.kernel.onDisposed((()=>{this.deleteKernelInfo(i,p.promise)}),void 0,a)})).catch((()=>{this.deleteKernelInfo(i,p.promise)})),this.setKernelInfo(i,p,o),E.verifyKernelState(r,i,o,p.promise,n,l,a)}static getKernelInfo(e){return"notebook"in e?E.connectionsByNotebook.get(e.notebook):E.connectionsByUri.get(e.resource.toString())}static setKernelInfo(e,t,n){"notebook"in e?E.connectionsByNotebook.set(e.notebook,{kernel:t,options:n}):E.connectionsByUri.set(e.resource.toString(),{kernel:t,options:n})}static deleteKernelInfo(e,t){t?"notebook"in e&&E.connectionsByNotebook.get(e.notebook)?.kernel.promise===t?E.connectionsByNotebook.delete(e.notebook):e.resource&&E.connectionsByUri.get(e.resource.toString())?.kernel.promise===t&&E.connectionsByUri.delete(e.resource.toString()):"notebook"in e?E.connectionsByNotebook.delete(e.notebook):E.connectionsByUri.delete(e.resource.toString())}static async canStartKernel(e,t){if((0,r.isLocalConnection)(e)&&e.kernelSpec.specFile&&!t.get(P.ITrustedKernelPaths).isTrusted(i.Uri.file(e.kernelSpec.specFile)))throw new I.KernelSpecNotTrustedError(e)}static async wrapKernelMethodImpl(e,t,n,i,o,a,c){const l=n.get(r.IKernelProvider),u=n.get(r.IThirdPartyKernelProvider);let d,p=E.convertContextToFunction(t,o),h=t,f="controller"in i?i.controller:void 0;for("start"===t&&await E.canStartKernel(e,n);void 0===d;){d="notebook"in i?l.getOrCreate(i.notebook,{metadata:e,controller:f||i.controller,resourceUri:i.resource}):u.getOrCreate(i.resource,{metadata:e,resourceUri:i.resource});const r=e=>"dead"===e.status||"terminating"===e.status&&!e.disposed&&!e.disposing;try{if("restart"!==t&&r(d)&&!o.disableUI)return{kernel:d,deadKernelAction:await E.notifyAndRestartDeadKernel(d,n)?"deadKernelWasRestarted":"deadKernelWasNoRestarted"};c(h,d),await p(d),r(d)&&!o.disableUI&&await E.notifyAndRestartDeadKernel(d,n)}catch(t){if((0,_.isCancellationError)(t)||(0,s.traceWarning)(`Error occurred while trying to ${h} the kernel, options.disableUI=${o.disableUI}`,t),o.disableUI)throw t;const r=await E.handleKernelError(n,t,h,i.resource,d,f,e,a);if(f=r.controller,e=r.metadata,p=e=>e.start(o),h="start","3rdPartyExtension"===a)throw t;d=void 0}}return{kernel:d}}static async connectToNotebookKernel(e,t,n,r,i,o="jupyterExtension",s=(()=>(0,b.noop)())){return E.wrapKernelMethod(e,"start",o,t,n,r,i,s)}static async connectToKernel(e,t,n,r,i,o="jupyterExtension",s=(()=>(0,b.noop)())){return E.wrapKernelMethod(e,"start",o,t,n,r,i,s)}}t.KernelConnector=E,E.connectionsByNotebook=new WeakMap,E.connectionsByUri=new Map},14398:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelFilterService=void 0;const o=n(86700),s=n(66828),a=n(10053),c=n(20397),l=n(11642),u=n(42080),d=n(9959),p=n(15925),h=n(35412);let f=class{get onDidChange(){return this._onDidChange.event}constructor(e,t,n){this.config=e,this.workspace=t,this.disposables=[],this._onDidChange=new s.EventEmitter,n.push(this)}dispose(){this._onDidChange.dispose(),(0,c.disposeAllDisposables)(this.disposables)}isKernelHidden(e){const t=this.getFilters();if("connectToLiveRemoteKernel"===e.kind)return!1;const n=t.some((t=>"jupyterKernelspec"===t.type&&e.kernelSpec.specFile?t.path.toLowerCase()===e.kernelSpec.specFile.toLowerCase():"startUsingPythonInterpreter"===e.kind&&"pythonEnvironment"===t.type?t.path.toLowerCase()===(0,h.getDisplayPath)(e.interpreter.uri).toLowerCase():"startUsingRemoteKernelSpec"===e.kind&&"remoteKernelSpec"===t.type&&t.path===`${e.kernelSpec.name}${e.serverId}`));return n&&(0,d.sendTelemetryEvent)(p.Telemetry.JupyterKernelHiddenViaFilter),n}getFilters(){if(!this.workspace.workspaceFolders||0===this.workspace.workspaceFolders.length)return this.workspace.getConfiguration("jupyter",void 0).get("kernels.filter",[]);const e=[];return this.workspace.workspaceFolders.forEach((t=>{e.push(...this.workspace.getConfiguration("jupyter",t.uri).get("kernels.filter",[]))})),e}async storeHiddenKernels(e){const t=new Set,n=e.map((e=>{const n=this.translateConnectionToFilter(e);if(n&&!t.has(n.path))return t.add(n.path),n})).filter((e=>!!e)).map((e=>e)),r=(this.workspace.workspaceFolders||[]).map((e=>e.uri));r.length>0?await Promise.all(r.map((e=>this.config.updateSetting("kernels.filter",n,e,s.ConfigurationTarget.Workspace)))):await this.config.updateSetting("kernels.filter",n,void 0,s.ConfigurationTarget.Global),this._onDidChange.fire()}translateConnectionToFilter(e){if("connectToLiveRemoteKernel"!==e.kind)return"startUsingLocalKernelSpec"===e.kind&&e.kernelSpec.specFile?{path:(0,h.getDisplayPath)(s.Uri.file(e.kernelSpec.specFile)),type:"jupyterKernelspec"}:"startUsingPythonInterpreter"===e.kind?{path:(0,h.getDisplayPath)(e.interpreter.uri),type:"pythonEnvironment"}:"startUsingRemoteKernelSpec"===e.kind&&e.kernelSpec.name&&e.serverId?{path:`${e.kernelSpec.name}${e.serverId}`,type:"remoteKernelSpec"}:void 0;(0,l.traceVerbose)("Hiding default or live kernels via filter is not supported")}};f=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IConfigurationService)),i(1,(0,o.inject)(a.IWorkspaceService)),i(2,(0,o.inject)(u.IDisposableRegistry))],f),t.KernelFilterService=f},33916:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelFilterUI=void 0;const o=n(86700),s=n(10053),a=n(20397),c=n(42080),l=n(25251),u=n(58681),d=n(98729),p=n(94062),h=n(14398),f=n(9959),g=n(15925),m=n(50867),y=n(83599);let v=class{constructor(e,t,n,r,i,o,s){this.controllers=e,this.commandManager=t,this.appShell=n,this.kernelFilter=i,this.workspace=o,this.platform=s,this.disposables=[],r.push(this)}activate(){this.disposables.push(this.commandManager.registerCommand("jupyter.filterKernels",this.showUI,this))}dispose(){(0,a.disposeAllDisposables)(this.disposables)}async showUI(){const e=this.appShell.createQuickPick(),t=new Set;let n=!1;e.canSelectMany=!1,e.placeholder=l.DataScience.kernelFilterPlaceholder,e.busy=!0,e.enabled=!1,this.controllers.loaded.then((()=>{if(n)return;const r=this.controllers.all.filter((e=>!t.has(e.id)&&(t.add(e.id),!0))).map((e=>{return{label:(t=e,(0,p.isRemoteConnection)(t)?`${l.DataScience.kernelPrefixForRemote} ${(0,d.getDisplayNameOrNameOfKernelConnection)(t)}`:(0,d.getDisplayNameOrNameOfKernelConnection)(t)),picked:!this.kernelFilter.isKernelHidden(e),description:(0,d.getKernelConnectionDisplayPath)(e,this.workspace,this.platform),detail:"connectToLiveRemoteKernel"===e.kind?(0,d.getRemoteKernelSessionInformation)(e):"",connection:e};var t}));r.sort(((e,t)=>e.label.localeCompare(t.label))),e.canSelectMany=!0,e.activeItems=r,e.items=r,e.matchOnDescription=!0,e.matchOnDetail=!0,e.sortByLabel=!0,e.selectedItems=r.filter((e=>e.picked)),e.placeholder=l.DataScience.kernelFilterPlaceholder,e.enabled=!0,e.busy=!1})).catch(u.noop);const r=[];e.show(),e.onDidHide((()=>{n=!0,(0,a.disposeAllDisposables)(r)}),this,r),e.onDidAccept((()=>{n=!0,e.hide(),(0,a.disposeAllDisposables)(r);const t=new Set(e.selectedItems.map((e=>e.connection))),i=e.items.map((e=>e.connection)).filter((e=>!t.has(e)));this.kernelFilter.storeHiddenKernels(i.map((e=>e))).then(u.noop,u.noop),(0,f.sendTelemetryEvent)(g.Telemetry.JupyterKernelFilterUsed)}),this,r)}};v=r([(0,o.injectable)(),i(0,(0,o.inject)(m.IControllerRegistration)),i(1,(0,o.inject)(s.ICommandManager)),i(2,(0,o.inject)(s.IApplicationShell)),i(3,(0,o.inject)(c.IDisposableRegistry)),i(4,(0,o.inject)(h.KernelFilterService)),i(5,(0,o.inject)(s.IWorkspaceService)),i(6,(0,o.inject)(y.IPlatformService))],v),t.KernelFilterUI=v},41463:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.compareKernels=t.isExactMatch=t.rankKernels=t.findKernelSpecMatchingInterpreter=void 0;const s=n(98729),a=n(94062),c=n(15925),l=n(35412),u=n(86563),d=n(11642),p=n(46031),h=o(n(15948));async function f(e,t){if(!e||0===t.length)return;const n=[];if(await Promise.all(t.map((async t=>{"startUsingPythonInterpreter"!==t.kind||"registeredByNewVersionOfExtForCustomKernelSpec"===(0,s.getKernelRegistrationInfo)(t.kernelSpec)||t.interpreter.id!==e.id||t.interpreter.envName!==e.envName?"startUsingPythonInterpreter"===t.kind&&"registeredByNewVersionOfExtForCustomKernelSpec"!==(0,s.getKernelRegistrationInfo)(t.kernelSpec)&&await(0,p.getInterpreterHash)(t.interpreter)===await(0,p.getInterpreterHash)(e)&&t.interpreter.envName===e.envName&&n.push(t):n.push(t)}))),n.length>1&&((0,d.traceError)(`More than one kernel spec matches the interpreter ${e.uri}.`,n),c.isCI))throw new Error("More than one kernelspec matches the intererpreter");return n.length?n[0]:void 0}function g(e){if(!e)return;const t=e.interpreter?.hash?e.interpreter:void 0;return t?{interpreter:t}:e.vscode}function m(e,t,n){if("connectToLiveRemoteKernel"===e.kind)return!1;const r=e.kernelSpec,i=r.metadata?.vscode?.originalSpecFile||r.metadata?.originalSpecFile,o=i?h.basename(h.dirname(i)):r?.name||"",a=e.interpreter?.envName,c=(0,s.isDefaultKernelSpec)({argv:[],display_name:t.display_name,name:t.name,executable:""});return!(!n||!c)||!(c||o!==t.name&&a!==t.name)}function y(e,t,n,r,i,o,s,a){const l=o.metadata,u=s.metadata;if("connectToLiveRemoteKernel"===l.kind&&a&&l.kernelModel.id===a)return 1;if("connectToLiveRemoteKernel"===u.kind&&a&&u.kernelModel.id===a)return-1;if(l.kind===u.kind&&"connectToLiveRemoteKernel"===u.kind)return 0;if("connectToLiveRemoteKernel"===l.kind)return-1;if("connectToLiveRemoteKernel"===u.kind)return 1;const d=l.kernelSpec.language?.toLowerCase(),p=u.kernelSpec.language?.toLowerCase();if(t=t?.toLowerCase(),n=n?.toLowerCase(),!r?.kernelspec){if(t)if(t===c.PYTHON_LANGUAGE&&d===p&&d===t);else{if(d===p&&d===t)return 0;if(d===t)return 1;if(p===t)return-1}if(l===i)return 1;if(u===i)return-1;{if(l.interpreter&&!u.interpreter)return 1;if(!l.interpreter&&u.interpreter)return-1;const e=l.interpreter?.sysPrefix||"",t=l.interpreter?.version?.major||(e.length&&!isNaN(parseInt(e.substring(0)))?parseInt(e.substring(0)):0),n=l.interpreter?.sysPrefix||"",r=l.interpreter?.version?.major||(n.length&&!isNaN(parseInt(n.substring(0)))?parseInt(n.substring(0)):0);return t!==r?t>r?1:-1:l.kind===u.kind?0:"startUsingPythonInterpreter"===l.kind&&"startUsingLocalKernelSpec"===u.kind?1:"startUsingLocalKernelSpec"===l.kind&&"startUsingPythonInterpreter"===u.kind?-1:0}}const f=l.kernelSpec.metadata?.vscode?.originalSpecFile||l.kernelSpec.metadata?.originalSpecFile,g=u.kernelSpec.metadata?.vscode?.originalSpecFile||u.kernelSpec.metadata?.originalSpecFile,m=l.kernelSpec.metadata?.vscode?.originalDisplayName||l.kernelSpec?.display_name||"",y=u.kernelSpec.metadata?.vscode?.originalDisplayName||u.kernelSpec?.display_name||"",C=f?h.basename(h.dirname(f)):l.kernelSpec?.name||"",S=g?h.basename(h.dirname(g)):u.kernelSpec?.name||"";if(t&&t!==c.PYTHON_LANGUAGE)return d&&p&&d!==t&&p!==t?0:d===t&&p!==t?1:d!==t&&p===t?-1:C&&C===S&&m===y?0:C&&C===r.kernelspec?.name&&m===r.kernelspec.display_name?1:S&&S===r.kernelspec?.name&&y===r.kernelspec.display_name?-1:C&&C===r.kernelspec?.name?1:S&&S===r.kernelspec?.name?-1:m&&m===r.kernelspec?.display_name?1:y&&y===r.kernelspec?.display_name?-1:l===i?1:u===i?-1:0;if(!n&&t){if(C&&m&&C!==S&&m!==y&&"startUsingLocalKernelSpec"===l.kind&&d!==c.PYTHON_LANGUAGE&&C===r.kernelspec.name&&m===r.kernelspec.display_name)return 1;if(S&&y&&C!==S&&m!==y&&"startUsingLocalKernelSpec"===u.kind&&p!==c.PYTHON_LANGUAGE&&S===r.kernelspec.name&&y===r.kernelspec.display_name)return-1}if(d&&p){if(d!==p)return d===c.PYTHON_LANGUAGE?1:-1;if(d!==c.PYTHON_LANGUAGE)return 0}if(r?.kernelspec?.name){let e=v(o,s,C,S,r,i);if("number"==typeof e)return e;if("startUsingRemoteKernelSpec"!==l.kind&&"startUsingRemoteKernelSpec"===u.kind)return 1;if("startUsingRemoteKernelSpec"===l.kind&&"startUsingRemoteKernelSpec"!==u.kind)return-1;if("startUsingRemoteKernelSpec"===l.kind&&"startUsingRemoteKernelSpec"===u.kind)return l===i?1:u===i?-1:0;if(e=v(o,s,l.interpreter?.envName||"",u.interpreter?.envName||"",r,i),"number"==typeof e)return e}if("startUsingRemoteKernelSpec"!==l.kind&&"startUsingRemoteKernelSpec"===u.kind)return 1;if("startUsingRemoteKernelSpec"===l.kind&&"startUsingRemoteKernelSpec"!==u.kind)return-1;if("startUsingRemoteKernelSpec"===l.kind&&"startUsingRemoteKernelSpec"===u.kind)return 0;const _=w(l,u,r),k=b(o,s,r);if(_>=0&&k>0)return 1;if(_>0&&k>=0)return 1;if(_<=0&&k<0)return-1;if(_<0&&k<=0)return-1;if(_<0&&k>0)return l===i?1:u===i?-1:0;if(0===_&&0===k){if(l===i)return 1;if(u===i)return-1;if("startUsingPythonInterpreter"===l.kind&&"startUsingPythonInterpreter"!==u.kind)return 1;if("startUsingPythonInterpreter"!==l.kind&&"startUsingPythonInterpreter"===u.kind)return-1}return l===i?1:u===i?-1:0}function v(e,t,n,r,i,o){const a=w(e.metadata,t.metadata,i),c=b(e,t,i),l=e.metadata,u=t.metadata;if(i?.kernelspec?.name)if(i.kernelspec.name.toLowerCase().match(s.isDefaultPythonKernelSpecName)){const e="connectToLiveRemoteKernel"!==l.kind?(0,s.getKernelRegistrationInfo)(l.kernelSpec):"",t="connectToLiveRemoteKernel"!==u.kind?(0,s.getKernelRegistrationInfo)(u.kernelSpec):"",d=parseInt(i.kernelspec.name.toLowerCase().replace("python",""),10);if(d&&l.interpreter?.version?.major===u.interpreter?.version?.major&&l.kind===u.kind&&0===a&&0===c)return l===o?1:u===o?-1:function(e,t){if("connectToLiveRemoteKernel"===e.kind||"connectToLiveRemoteKernel"===t.kind)return"connectToLiveRemoteKernel"!==e.kind?1:"connectToLiveRemoteKernel"!==t.kind?-1:0;const n=(0,s.getKernelRegistrationInfo)(e.kernelSpec),r=(0,s.getKernelRegistrationInfo)(t.kernelSpec);return n===r?0:"registeredByNewVersionOfExtForCustomKernelSpec"===r?1:"registeredByNewVersionOfExtForCustomKernelSpec"===n?-1:0}(l,u);if(d&&l.interpreter?.version?.major!==u.interpreter?.version?.major&&l.interpreter?.version?.major===d&&"startUsingRemoteKernelSpec"!==l.kind&&a>=0&&c>=0)return 1;if(d&&l.interpreter?.version?.major!==u.interpreter?.version?.major&&u.interpreter?.version?.major===d&&"startUsingRemoteKernelSpec"!==u.kind&&a<=0&&c<=0)return-1;if(n===i.kernelspec.name&&a>=0&&c>=0)return 1;if("startUsingPythonInterpreter"===l.kind&&"registeredByNewVersionOfExtForCustomKernelSpec"!==e&&n===l.kernelSpec.display_name&&a>=0&&c>=0)return 1;if(r===i.kernelspec.name&&a<=0&&c<=0)return-1;if("startUsingPythonInterpreter"===u.kind&&"registeredByNewVersionOfExtForCustomKernelSpec"!==t&&n===u.kernelSpec.display_name&&a<=0&&c<=0)return 1;if(c>0)return 1;if(c<0)return-1}else{if(n===r&&n===i.kernelspec.name)return a>=0&&c>=0?1:a<0&&c<0?-1:c;if(n===i.kernelspec.name)return a>=0&&c>=0?1:a<0&&c<0?-1:l===o?1:u===o?-1:c;if(r===i.kernelspec.name)return a>0&&c>0?1:a<=0&&c<=0?-1:l===o?1:u===o?-1:c}}function b({metadata:e,interpreterHash:t},{metadata:n,interpreterHash:r},i){if("connectToLiveRemoteKernel"===e.kind&&"connectToLiveRemoteKernel"===n.kind)return 0;if("connectToLiveRemoteKernel"===e.kind)return-1;if("connectToLiveRemoteKernel"===n.kind)return 1;const o=(0,s.getKernelRegistrationInfo)(e.kernelSpec),a=(0,s.getKernelRegistrationInfo)(n.kernelSpec),c=!!C(e,i,t),l=!!C(n,i,r);return c||l?c&&l&&e.kind===n.kind&&o===a?0:c&&!l?1:!c&&l?-1:"startUsingPythonInterpreter"===e.kind&&e.kind!==n.kind&&"registeredByNewVersionOfExtForCustomKernelSpec"!==o?1:"startUsingPythonInterpreter"===n.kind&&n.kind!==e.kind&&"registeredByNewVersionOfExtForCustomKernelSpec"!==a?-1:"startUsingPythonInterpreter"===e.kind&&e.kind!==n.kind?1:"startUsingPythonInterpreter"===n.kind&&n.kind!==e.kind?-1:"startUsingLocalKernelSpec"===e.kind&&e.kind!==n.kind||"startUsingLocalKernelSpec"===n.kind&&e.kind!==n.kind?1:0:0}function w(e,t,n){if("connectToLiveRemoteKernel"===e.kind&&"connectToLiveRemoteKernel"===t.kind)return 0;if("connectToLiveRemoteKernel"===e.kind)return-1;if("connectToLiveRemoteKernel"===t.kind)return 1;if(!n?.kernelspec?.display_name)return 0;if((0,s.isDefaultKernelSpec)({argv:[],display_name:n.kernelspec.display_name,name:n.kernelspec.name,executable:""})){const r=(0,s.getKernelRegistrationInfo)(e.kernelSpec),i=(0,s.getKernelRegistrationInfo)(t.kernelSpec);if(r===i&&e.kind===t.kind);else{if("registeredByNewVersionOfExtForCustomKernelSpec"!==r&&"registeredByNewVersionOfExtForCustomKernelSpec"===i&&"startUsingPythonInterpreter"===e.kind)return 1;if("registeredByNewVersionOfExtForCustomKernelSpec"!==i&&"registeredByNewVersionOfExtForCustomKernelSpec"===r&&"startUsingPythonInterpreter"===t.kind)return-1}return e.kernelSpec.metadata?.vscode?.originalDisplayName&&e.kernelSpec.metadata?.vscode?.originalDisplayName===t.kernelSpec.metadata?.vscode?.originalDisplayName?0:e.kernelSpec.metadata?.vscode?.originalDisplayName&&e.kernelSpec.metadata?.vscode?.originalDisplayName===n.kernelspec.display_name?1:t.kernelSpec.metadata?.vscode?.originalDisplayName&&t.kernelSpec.metadata?.vscode?.originalDisplayName===n.kernelspec.display_name?-1:0}return e.kernelSpec.display_name===t.kernelSpec.display_name&&e.kernelSpec.metadata?.vscode?.originalDisplayName===t.kernelSpec.metadata?.vscode?.originalDisplayName?0:e.kernelSpec.display_name===n.kernelspec.display_name||e.kernelSpec.metadata?.vscode?.originalDisplayName===n.kernelspec.display_name?1:t.kernelSpec.display_name===n.kernelspec.display_name||t.kernelSpec.metadata?.vscode?.originalDisplayName===n.kernelspec.display_name?-1:0}function C(e,t,n){const r=g(t);return r?.interpreter?.hash&&("startUsingLocalKernelSpec"===e.kind||"startUsingRemoteKernelSpec"===e.kind||"startUsingPythonInterpreter"===e.kind)&&e.interpreter&&n===r.interpreter?.hash}t.findKernelSpecMatchingInterpreter=f,t.rankKernels=async function(e,t,n,r,i,o){if((0,d.traceInfo)(`Find preferred kernel for ${(0,l.getDisplayPath)(t)} with metadata ${JSON.stringify(n||{})} & preferred interpreter ${r?.uri?(0,l.getDisplayPath)(r?.uri):"<undefined>"}`),0===e.length)return;let h=r&&await f(r,e);if(o?.isCancellationRequested)return;if(r&&!h){const t=await(0,s.createInterpreterKernelSpec)(r);h=a.PythonKernelConnectionMetadata.create({kernelSpec:t,interpreter:r,id:(0,s.getKernelId)(t,r)}),e.push(h)}(0,d.traceInfoIfCI)(`preferredInterpreterKernelSpecIndex = ${h?.id}`);const g=n?.language_info?.name.toLowerCase()||n?.kernelspec?.language?.toLowerCase();let m=g;if(e=e.filter((e=>!(!m||m!==c.PYTHON_LANGUAGE||!(0,s.isPythonKernelConnection)(e))||!(m&&m!==c.PYTHON_LANGUAGE&&!n?.kernelspec&&"connectToLiveRemoteKernel"!==e.kind&&e.kernelSpec.language&&e.kernelSpec.language.toLowerCase()!==m))),m="interactive"===(0,u.getResourceType)(t)?c.PYTHON_LANGUAGE:n&&!(0,s.isPythonNotebook)(n)&&m?(n?.kernelspec?.language||n?.language_info?.name)?.toLowerCase():c.PYTHON_LANGUAGE,o?.isCancellationRequested)return;const v=new Map;return await Promise.all(e.map((async e=>{const t=e.interpreter?await(0,p.getInterpreterHash)(e.interpreter):void 0;v.set(e,t)}))),e.sort(((e,t)=>y(0,m,g,n,h,{metadata:e,interpreterHash:v.get(e)},{metadata:t,interpreterHash:v.get(t)},i))),e},t.isExactMatch=async function(e,t,n){return!("connectToLiveRemoteKernel"!==e.kind||!n||e.kernelModel.id!==n)||!(!t||!t.kernelspec)&&(g(t)?.interpreter&&await C(e,t,e.interpreter?await(0,p.getInterpreterHash)(e.interpreter):void 0)?m(e,t.kernelspec,!0):m(e,t.kernelspec,!1))},t.compareKernels=y},19904:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelRankingHelper=void 0;const o=n(86700),s=n(76385),a=n(94062),c=n(11642),l=n(99203),u=n(9959),d=n(41463);let p=class{constructor(e){this.preferredRemoteFinder=e}async rankKernels(e,t,n,r,i,o){try{o&&(t=t.filter((e=>!(0,a.isLocalConnection)(e)&&e.serverId===o)));const s=e&&this.preferredRemoteFinder?await this.preferredRemoteFinder.getPreferredRemoteKernelId(e):void 0;if(i?.isCancellationRequested)return;return await(0,d.rankKernels)(t,e,n,r,s,i)}catch(e){return void(0,c.traceError)("RankKernels crashed",e)}}async isExactMatch(e,t,n){const r=e&&this.preferredRemoteFinder?await this.preferredRemoteFinder.getPreferredRemoteKernelId(e):void 0;return(0,d.isExactMatch)(t,n,r)}};r([(0,c.traceDecoratorVerbose)("Rank Kernels",l.TraceOptions.BeforeCall|l.TraceOptions.Arguments),(0,u.capturePerfTelemetry)(u.Telemetry.RankKernelsPerf),i(1,(0,c.ignoreLogging)()),i(3,(0,c.logValue)("uri")),i(4,(0,c.ignoreLogging)())],p.prototype,"rankKernels",null),p=r([(0,o.injectable)(),i(0,(0,o.inject)(s.PreferredRemoteKernelIdProvider))],p),t.KernelRankingHelper=p},10988:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectKernel=void 0;const r=n(11642);t.selectKernel=async function(e,t,n){const i=t?.findNotebookEditor(e);return i?n.executeCommand("notebook.selectKernel",{notebookEditor:i}):((0,r.traceError)("Unable to select kernel as the Notebook document could not be identified"),!1)}},59684:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelSelector=t.isCommandQuickPickItem=t.isKernelPickItem=void 0;const r=n(66828),i=n(38994),o=n(77886),s=n(15925),a=n(20397),c=n(25251),l=n(58681),u=n(19450),d=n(5337),p=n(97838),h=n(93796);function f(e){return"connection"in e}function g(e){return"command"in e}t.isKernelPickItem=f,t.isCommandQuickPickItem=g;class m extends Error{}function y(e,t){const n=[];let r;for(const i of e.slice(0).sort(t))r&&0===t(r[0],i)?r.push(i):(r=[i],n.push(r));return n}function v(e,t){return e.localeCompare(t,void 0,{sensitivity:"accent"})}t.KernelSelector=class{constructor(e,t,n,i){this.workspace=e,this.notebook=t,this.provider=n,this.token=i,this.disposables=[],this.recommendedItems=[],this.createPythonItems=[],this.installPythonExtItems=[],this.installPythonItems=[],this.categories=new Map,this.quickPickItems=[],this.displayDataProvider=d.ServiceContainer.instance.get(p.ConnectionDisplayDataProvider),this.extensionChecker=d.ServiceContainer.instance.get(o.IPythonExtensionChecker),this.createPythonEnvQuickPickItem={label:`$(add) ${c.DataScience.createPythonEnvironmentInQuickPick}`,command:this.onCreatePythonEnvironment.bind(this)},this.installPythonItem={label:c.DataScience.installPythonTitle,command:async()=>{throw setTimeout((()=>r.commands.executeCommand(s.Commands.InstallPythonViaKernelPicker).then(l.noop,l.noop))),new m}},this.installPythonExtension={label:c.DataScience.installPythonExtensionViaKernelPickerTitle,command:async()=>{if(!0!==await r.commands.executeCommand(s.Commands.InstallPythonExtensionViaKernelPicker))throw new m;this.provider.refresh().catch(l.noop)}}}dispose(){(0,a.disposeAllDisposables)(this.disposables)}async selectKernel(e){if(this.token.isCancellationRequested)return;const t=e=>{const t=this.displayDataProvider.getDisplayData(e);return{label:t.label,detail:t.detail,description:t.description,connection:e}},n=e=>{const t=this.displayDataProvider.getDisplayData(e).category||"Other";return{kind:r.QuickPickItemKind.Separator,label:t}};y(this.provider.kernels.map((e=>t(e))),((e,t)=>v(this.displayDataProvider.getDisplayData(e.connection).category||"z",this.displayDataProvider.getDisplayData(t.connection).category||"z"))).forEach((e=>{const t=n(e[0].connection);this.quickPickItems.push(t),e.sort(((e,t)=>e.label.localeCompare(t.label))),this.quickPickItems.push(...e),this.categories.set(t,new Set(e))})),this.extensionChecker.isPythonExtensionInstalled||this.provider.kind!==i.ContributedKernelFinderKind.LocalPythonEnvironment||this.installPythonExtItems.push(this.installPythonExtension);const o={quickPick:void 0};if(this.extensionChecker.isPythonExtensionInstalled&&this.provider.kind===i.ContributedKernelFinderKind.LocalPythonEnvironment)if(0===this.provider.kernels.length&&"idle"===this.provider.status)this.workspace.isTrusted&&this.installPythonItems.push(this.installPythonItem);else{const e=()=>{0===this.provider.kernels.length&&0===this.installPythonItems.length&&"idle"===this.provider.status?this.workspace.isTrusted&&(this.installPythonItems.push(this.installPythonItem),o.quickPick&&this.updateQuickPickItems(o.quickPick)):this.provider.kernels.length&&(this.installPythonItems.length=0,o.quickPick&&this.updateQuickPickItems(o.quickPick))};this.provider.onDidChangeStatus(e,this,this.disposables),this.provider.onDidChange(e,this,this.disposables)}return this.extensionChecker.isPythonExtensionInstalled&&this.provider.kind===i.ContributedKernelFinderKind.LocalPythonEnvironment&&(this.provider.kernels.length>0?this.createPythonItems.push(this.createPythonEnvQuickPickItem):this.provider.onDidChange((()=>{this.provider.kernels.length>0&&0===this.createPythonItems.length&&this.createPythonItems.push(this.createPythonEnvQuickPickItem)}),this,this.disposables)),this.selectKernelImpl(e,o)}async selectKernelImpl(e,t){const n={iconPath:new r.ThemeIcon("refresh"),tooltip:c.Common.refresh},i={iconPath:new r.ThemeIcon("loading~spin"),tooltip:c.Common.refreshing},{quickPick:o,selection:s}=e({title:this.provider.title,items:this.installPythonItems.concat(this.installPythonExtItems).concat(this.createPythonItems).concat(this.quickPickItems),buttons:[n],onDidTriggerButton:async e=>{if(e===n){const e=o.buttons;o.buttons=e.filter((e=>e!==n)).concat(i),await this.provider.refresh().catch(l.noop),o.buttons=e}}});let a;t.quickPick=o,"discovering"===this.provider.status&&(o.busy=!0),this.provider.onDidChangeStatus((()=>{switch(a&&clearTimeout(a),this.provider.status){case"discovering":o.busy=!0;break;case"idle":a=setTimeout((()=>o.busy=!1),500),this.disposables.push(new r.Disposable((()=>a&&clearTimeout(a))))}}),this,this.disposables),this.updateRecommended(o),this.updateQuickPickItems(o),this.provider.onDidChangeRecommended((()=>this.updateRecommended(o)),this,this.disposables),this.provider.onDidFailToListKernels((e=>this.updateListWithError(o,e)),this,this.disposables),this.provider.onDidChange((()=>this.updateQuickPickItems(o)),this,this.disposables);const d=await s;if(!this.token.isCancellationRequested){if(g(d))try{const e=await d.command();return e?{selection:"controller",finder:this.provider.finder,connection:e}:void 0}catch(n){if(n instanceof m)return{selection:"userPerformedSomeOtherAction"};if(n===u.InputFlowAction.back)return this.selectKernelImpl(e,t);throw n}if(d&&"connection"in d)return{selection:"controller",finder:this.provider.finder,connection:d.connection};if(d&&"error"in d)throw u.InputFlowAction.back}}async onCreatePythonEnvironment(){const e=new r.CancellationTokenSource;this.disposables.push(new r.Disposable((()=>e.cancel()))),this.disposables.push(e);const t=new h.PythonEnvKernelConnectionCreator(this.notebook,e.token);this.disposables.push(t);const n=await t.createPythonEnvFromKernelPicker();if("action"in n){if("Cancel"===n.action)throw u.InputFlowAction.cancel;throw u.InputFlowAction.back}return n.kernelConnection}updateQuickPickItems(e){e.title=this.provider.title;const t=new Set(e.items.filter((e=>f(e))).map((e=>e)).map((e=>e.connection.id))),n=this.provider.kernels.filter((e=>!t.has(e.id))).map((e=>this.connectionToQuickPick(e)));this.extensionChecker.isPythonExtensionInstalled&&this.provider.kind===i.ContributedKernelFinderKind.LocalPythonEnvironment&&(this.installPythonExtItems.length=0),this.provider.kind===i.ContributedKernelFinderKind.LocalPythonEnvironment&&this.provider.kernels.some((e=>"startUsingPythonInterpreter"===e.kind))&&(this.installPythonItems.length=0),this.updateQuickPickWithLatestConnection(e),this.removeMissingKernels(e),this.updateRecommended(e),y(n,((e,t)=>v(this.displayDataProvider.getDisplayData(e.connection).category||"z",this.displayDataProvider.getDisplayData(t.connection).category||"z"))).forEach((e=>{e.sort(((e,t)=>e.label.localeCompare(t.label)));const t=this.connectionToCategory(e[0].connection),n=this.quickPickItems.find((e=>e.kind===r.QuickPickItemKind.Separator&&e.label===t.label));if(n){const t=this.quickPickItems.indexOf(n),r=this.categories.get(n),i=new Map(Array.from(r).map((e=>[e.connection.id,e]))),o=r.size;e.forEach((e=>{const t=i.get(e.connection.id);t&&r.delete(t),r.add(e)}));const s=Array.from(r);s.sort(((e,t)=>e.label.localeCompare(t.label))),this.quickPickItems.splice(t+1,o,...s)}else{const n=this.quickPickItems.map(((e,t)=>[e,t])).filter((([e,t])=>e.kind===r.QuickPickItemKind.Separator)).map((([e,t])=>[e.label,t]));n.push([t.label,-1]),n.sort(((e,t)=>e[0].toString().localeCompare(t[0].toString())));const i=n.findIndex((e=>-1===e[1]));let o=0;i>0&&(o=n.length===i+1?this.quickPickItems.length:n[i+1][1]),e.sort(((e,t)=>e.label.localeCompare(t.label))),this.quickPickItems.splice(o,0,t,...e),this.categories.set(t,new Set(e))}})),this.rebuildQuickPickItems(e)}buildErrorQuickPickItem(e){return this.provider.kind===i.ContributedKernelFinderKind.Remote&&e?(this.provider.finder?.displayName,[{error:e,label:c.DataScience.failedToFetchKernelSpecsRemoteErrorMessageForQuickPickLabel,detail:c.DataScience.failedToFetchKernelSpecsRemoteErrorMessageForQuickPickDetail}]):[]}rebuildQuickPickItems(e,t){const n=this.recommendedItems.find((e=>f(e))),r=new Set(this.recommendedItems.filter(f).map((e=>e.connection.id))),i=this.quickPickItems.filter((e=>!f(e)||!r.has(e.connection.id))),o=this.buildErrorQuickPickItem(t);!function(e,t,n){const r=e.activeItems.length?[e.activeItems[0]]:n?[n]:[];if(r.length&&!t.includes(r[0])){const e=r[0],n=f(e)&&t.find((t=>f(t)&&t.connection.id===e.connection.id));n?r[0]=n:r.length=0}e.items=t,e.activeItems=r}(e,this.installPythonItems.concat(this.installPythonExtItems).concat(this.createPythonItems).concat(this.recommendedItems).concat(i).concat(o),n)}removeMissingKernels(e){const t=e.items.filter((e=>f(e))).map((e=>e)).map((e=>e.connection.id)),n=new Map(this.provider.kernels.map((e=>[e.id,e]))),r=t.filter((e=>!n.has(e)));if(r.length){const t=[];this.categories.forEach(((e,n)=>{e.forEach((n=>{r.includes(n.connection.id)&&(e.delete(n),t.push(n))})),e.size||(t.push(n),this.categories.delete(n))})),this.quickPickItems=this.quickPickItems.filter((e=>!t.includes(e))),this.rebuildQuickPickItems(e)}}updateListWithError(e,t){this.rebuildQuickPickItems(e,t)}updateRecommended(e){if(!this.provider.recommended)return void(this.recommendedItems.length=0);this.recommendedItems.length||this.recommendedItems.push({label:c.DataScience.recommendedKernelCategoryInQuickPick,kind:r.QuickPickItemKind.Separator});const t=this.connectionToQuickPick(this.provider.recommended,!0);2===this.recommendedItems.length?this.recommendedItems[1]=t:this.recommendedItems.push(t),this.rebuildQuickPickItems(e)}updateQuickPickWithLatestConnection(e){const t=new Map(this.provider.kernels.map((e=>[e.id,e])));this.recommendedItems.concat(this.quickPickItems).forEach((e=>{if(!f(e)||!t.has(e.connection.id))return;const n=t.get(e.connection.id);n&&(e.label=this.connectionToQuickPick(n,e.isRecommended).label,e.connection=n)})),this.rebuildQuickPickItems(e)}connectionToQuickPick(e,t=!1){const n=this.displayDataProvider.getDisplayData(e);return{label:`${t?"$(star-full) ":""}${n.label}`,isRecommended:t,detail:n.detail,description:n.description,connection:e}}connectionToCategory(e){const t=this.displayDataProvider.getDisplayData(e).category||"Other";return{kind:r.QuickPickItemKind.Separator,label:t}}}},62075:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelSourceCommandHandler=void 0;const o=n(86700),s=n(66828),a=n(38994),c=n(94433),l=n(61239),u=n(47684),d=n(94062),p=n(15925),h=n(20397),f=n(42080),g=n(25251),m=n(58681),y=n(5337),v=n(11642),b=n(85249),w=n(50867);let C=class{constructor(e,t,n,r,i,o){this.featuresManager=e,this.disposables=t,this.controllerRegistration=n,this.isWebExtension=r,this.kernelFinder=i,this.notebookEditorProvider=o,this.localDisposables=[],this.providerMappings=new Map,this.kernelSpecsSourceRegistered=!1,t.push(this)}dispose(){(0,h.disposeAllDisposables)(this.localDisposables)}activate(){const e=()=>{"Insiders"===this.featuresManager.features.kernelPickerType?this._activate():((0,h.disposeAllDisposables)(this.localDisposables),this.localDisposables=[],this.providerMappings.clear(),this.kernelSpecsSourceRegistered=!1)};this.disposables.push(this.featuresManager.onDidChangeFeatures((()=>e()))),e()}_activate(){if(!this.isWebExtension){this.localDisposables.push(s.notebooks.registerKernelSourceActionProvider(p.JupyterNotebookView,{provideNotebookKernelSourceActions:()=>[{label:g.DataScience.localPythonEnvironments,documentation:s.Uri.parse("https://aka.ms/vscodeJupyterExtKernelPickerPythonEnv"),command:"jupyter.kernel.selectLocalPythonEnvironment"}]})),this.localDisposables.push(s.notebooks.registerKernelSourceActionProvider(p.InteractiveWindowView,{provideNotebookKernelSourceActions:()=>[{label:g.DataScience.localPythonEnvironments,documentation:s.Uri.parse("https://aka.ms/vscodeJupyterExtKernelPickerPythonEnv"),command:"jupyter.kernel.selectLocalPythonEnvironment"}]}));let e=[];const t=new s.EventEmitter;this.localDisposables.push(s.notebooks.registerKernelSourceActionProvider(p.JupyterNotebookView,{onDidChangeNotebookKernelSourceActions:t.event,provideNotebookKernelSourceActions:()=>e})),this.localDisposables.push(s.notebooks.registerKernelSourceActionProvider(p.InteractiveWindowView,{onDidChangeNotebookKernelSourceActions:t.event,provideNotebookKernelSourceActions:()=>e}));const n=()=>{this.kernelSpecsSourceRegistered||this.kernelFinder.kernels.some((e=>"startUsingLocalKernelSpec"===e.kind))&&(this.kernelSpecsSourceRegistered=!0,e=[{label:g.DataScience.localKernelSpecs,documentation:s.Uri.parse("https://aka.ms/vscodeJupyterExtKernelPickerJupyterKernels"),command:"jupyter.kernel.selectLocalKernelSpec"}],t.fire())};n(),this.kernelFinder.onDidChangeKernels((()=>n()),this,this.localDisposables),this.localDisposables.push(s.commands.registerCommand("jupyter.kernel.selectLocalKernelSpec",this.onSelectLocalKernel.bind(this,a.ContributedKernelFinderKind.LocalKernelSpec),this)),this.localDisposables.push(s.commands.registerCommand("jupyter.kernel.selectLocalPythonEnvironment",this.onSelectLocalKernel.bind(this,a.ContributedKernelFinderKind.LocalPythonEnvironment),this))}this.localDisposables.push(s.commands.registerCommand("jupyter.kernel.selectJupyterServerKernel",this.onSelectRemoteKernel,this)),y.ServiceContainer.instance.get(c.IJupyterUriProviderRegistration).onDidChangeProviders(this.registerUriCommands,this,this.localDisposables),this.registerUriCommands()}registerUriCommands(){y.ServiceContainer.instance.get(c.IJupyterUriProviderRegistration).getProviders().then((e=>{const t=new Set;e.map((e=>{if(t.add(e.id),this.providerMappings.has(e.id))return;const n=s.notebooks.registerKernelSourceActionProvider(p.JupyterNotebookView,{provideNotebookKernelSourceActions:()=>[{label:e.displayName??(e.detail?`${e.detail} (${e.id})`:e.id),documentation:e.id.startsWith("_builtin")?s.Uri.parse("https://aka.ms/vscodeJuptyerExtKernelPickerExistingServer"):void 0,command:{command:"jupyter.kernel.selectJupyterServerKernel",arguments:[e.id],title:e.displayName??e.id}}]}),r=s.notebooks.registerKernelSourceActionProvider(p.InteractiveWindowView,{provideNotebookKernelSourceActions:()=>[{label:e.displayName??(e.detail?`${e.detail} (${e.id})`:e.id),documentation:e.id.startsWith("_builtin")?s.Uri.parse("https://aka.ms/vscodeJuptyerExtKernelPickerExistingServer"):void 0,command:{command:"jupyter.kernel.selectJupyterServerKernel",arguments:[e.id],title:e.displayName??e.id}}]});this.localDisposables.push(n),this.localDisposables.push(r),this.providerMappings.set(e.id,[n,r])})),this.providerMappings.forEach(((e,n)=>{t.has(n)||((0,h.disposeAllDisposables)(e),this.providerMappings.delete(n))}))})).catch((e=>(0,v.traceError)("Failed to register commands for remote Jupyter URI providers",e)))}async onSelectLocalKernel(e,t){if(!(t=t||s.window.activeNotebookEditor?.notebook))return;const n=y.ServiceContainer.instance.get(w.INotebookKernelSourceSelector),r=await n.selectLocalKernel(t,e);return r?this.getSelectedController(t,r)?.id:void 0}async onSelectRemoteKernel(e,t){if(!(t=t||s.window.activeNotebookEditor?.notebook)&&s.window.activeTextEditor&&(t=this.notebookEditorProvider.findNotebookEditor(s.window.activeTextEditor.document.uri)?.notebook),!t)return;const n=y.ServiceContainer.instance.get(w.INotebookKernelSourceSelector),r=await n.selectRemoteKernel(t,e);return r?this.getSelectedController(t,r)?.id:void 0}getSelectedController(e,t){const n=this.controllerRegistration.addOrUpdate(t,[e.notebookType]);if(Array.isArray(n)&&0!==n.length)return(0,l.initializeInteractiveOrNotebookTelemetryBasedOnUserAction)(e.uri,t).finally((()=>(0,u.sendKernelTelemetryEvent)(e.uri,p.Telemetry.SwitchKernel,void 0,{newKernelPicker:!0}))).catch(m.noop),n.find((t=>t.viewType===e.notebookType))?.controller.updateNotebookAffinity(e,s.NotebookControllerAffinity.Preferred),n[0].controller;(0,v.traceWarning)(`No controller created for selected kernel connection ${t.kind}:${t.id}`)}};C=r([(0,o.injectable)(),i(0,(0,o.inject)(f.IFeaturesManager)),i(1,(0,o.inject)(f.IDisposableRegistry)),i(2,(0,o.inject)(w.IControllerRegistration)),i(3,(0,o.inject)(f.IsWebExtension)),i(4,(0,o.inject)(d.IKernelFinder)),i(5,(0,o.inject)(b.INotebookEditorProvider))],C),t.KernelSourceCommandHandler=C},23712:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookKernelSourceSelector=void 0;const o=n(86700),s=n(66828),a=n(38994),c=n(46875),l=n(27527),u=n(94433),d=n(94062),p=n(10053),h=n(15925),f=n(20397),g=n(25251),m=n(19450),y=n(5337),v=n(14398),b=n(59684),w=n(77433);var C;!function(e){e.KernelFinder="finder",e.LocalServer="localServer",e.UriProviderQuickPick="uriProviderQuickPick"}(C||(C={}));let S=class{constructor(e,t,n,r,i,o,s){this.kernelFinder=e,this.multiStepFactory=t,this.uriProviderRegistration=n,this.serverUriStorage=r,this.serverSelector=i,this.kernelFilter=o,this.workspace=s,this.localDisposables=[]}async selectLocalKernel(e,t){if(e.notebookType!==h.JupyterNotebookView&&e.notebookType!==h.InteractiveWindowView)return;this.localDisposables.forEach((e=>e.dispose())),this.localDisposables=[],this.cancellationTokenSource?.cancel(),this.cancellationTokenSource?.dispose(),this.cancellationTokenSource=new s.CancellationTokenSource;const n=this.multiStepFactory.create(),r={disposables:[],notebook:e},i=this.kernelFinder.registered.find((e=>e.id===t));try{if(await n.run(this.selectKernelFromKernelFinder.bind(this,i,this.cancellationTokenSource.token,n,r),r)===m.InputFlowAction.cancel||"userPerformedSomeOtherAction"===r.selection?.type)throw new s.CancellationError;if(this.cancellationTokenSource.token.isCancellationRequested)return void(0,f.disposeAllDisposables)(r.disposables);if(r.source&&"connection"===r.selection?.type)return r.selection.connection}finally{(0,f.disposeAllDisposables)(r.disposables)}}async selectRemoteKernel(e,t){if(e.notebookType!==h.JupyterNotebookView&&e.notebookType!==h.InteractiveWindowView)return;const n=await this.uriProviderRegistration.getProvider(t);if(!n)throw new Error(`Remote Provider Id ${t} not found`);this.localDisposables.forEach((e=>e.dispose())),this.localDisposables=[],this.cancellationTokenSource?.cancel(),this.cancellationTokenSource?.dispose(),this.cancellationTokenSource=new s.CancellationTokenSource;const r=y.ServiceContainer.instance.get(p.IApplicationShell),i=new m.MultiStepInput(r),o={disposables:[],notebook:e};try{if(await i.run(this.getRemoteServersFromProvider.bind(this,n,this.cancellationTokenSource.token),o)===m.InputFlowAction.cancel||"userPerformedSomeOtherAction"===o.selection?.type)throw new s.CancellationError;if(this.cancellationTokenSource.token.isCancellationRequested)return void(0,f.disposeAllDisposables)(o.disposables);if(o.source&&"connection"===o.selection?.type)return o.selection.connection}finally{(0,f.disposeAllDisposables)(o.disposables)}}async getRemoteServersFromProvider(e,t,n,r){const i=await this.serverUriStorage.getSavedUriList();if(t.isCancellationRequested)return;const o=this.kernelFinder.registered.filter((e=>"remote"===e.kind&&e.serverUri.uri)),a=[];for(const t of o){const n=i.find((e=>e.uri===t.serverUri.uri));if(n){const r=(0,c.extractJupyterServerHandleAndId)(n.uri);if(r&&r.id===e.id){const i=new Date(n.time);a.push({type:C.KernelFinder,kernelFinderInfo:t,serverUri:n.uri,idAndHandle:r,label:t.displayName,detail:g.DataScience.jupyterSelectURIMRUDetail(i),buttons:e.removeHandle?[{iconPath:new s.ThemeIcon("trash"),tooltip:g.DataScience.removeRemoteJupyterServerEntryInQuickPick}]:[]})}}}if(e.getQuickPickEntryItems&&e.handleQuickPick){a.length>0&&a.push({label:"More",kind:s.QuickPickItemKind.Separator});const t=(await e.getQuickPickEntryItems()).map((t=>({...t,provider:e,type:C.UriProviderQuickPick,description:void 0,originalItem:t,detail:e.displayName})));a.push(...t)}const l=new s.EventEmitter,u=1===a.length&&"default"in a[0]&&a[0].default?a[0]:void 0;let d,p;if(u)p=u;else{const{quickPick:t,selection:r}=n.showLazyLoadQuickPick({items:a,placeholder:"",title:"Select a Jupyter Server",supportBackInFirstStep:!0,onDidTriggerItemButton:async n=>{"type"in n.item&&n.item.type===C.KernelFinder&&e.removeHandle&&(t.busy=!0,await e.removeHandle(n.item.idAndHandle.handle),t.busy=!1,a.splice(a.indexOf(n.item),1),l.fire(a.concat([])))},onDidChangeItems:l.event});d=t,p=await r}if(!t.isCancellationRequested&&p&&"type"in p)switch(p.type){case C.KernelFinder:return this.selectKernelFromKernelFinder.bind(this,p.kernelFinderInfo,t);case C.UriProviderQuickPick:try{d&&(d.busy=!0);const e=await this.selectRemoteServerFromRemoteKernelFinder(p,r,t);return d&&(d.busy=!1),e}catch(i){if(i!==m.InputFlowAction.back||u)throw i;return this.getRemoteServersFromProvider(e,t,n,r)}}}async selectRemoteServerFromRemoteKernelFinder(e,t,n){if(!e.provider.handleQuickPick||n.isCancellationRequested)return;const r=await e.provider.handleQuickPick(e.originalItem,!0);if(!r||n.isCancellationRequested)return;if("back"===r)throw m.InputFlowAction.back;const i=(async()=>{const i=(0,c.generateUriFromRemoteProvider)(e.provider.id,r);if(n.isCancellationRequested)throw new s.CancellationError;if(await this.serverSelector.setJupyterURIToRemote(i),n.isCancellationRequested)throw new s.CancellationError;return new Promise((e=>{const n=this.kernelFinder.registered.find((e=>"remote"===e.kind&&e.serverUri.uri===i));if(n)return e(n);this.kernelFinder.onDidChangeRegistrations((t=>{const n=t.added.find((e=>"remote"===e.kind&&e.serverUri.uri===i));if(n)return e(n)}),this,t.disposables)}))})(),o=new w.QuickPickKernelItemProvider(t.notebook,a.ContributedKernelFinderKind.Remote,i,this.kernelFilter);return o.status="discovering",t.disposables.push(o),this.selectKernel.bind(this,o,n)}selectKernelFromKernelFinder(e,t,n,r){r.source=e;const i=new w.QuickPickKernelItemProvider(r.notebook,e.kind,e,this.kernelFilter);return r.disposables.push(i),this.selectKernel(i,t,n,r)}async selectKernel(e,t,n,r){if(t.isCancellationRequested)return;const i=new b.KernelSelector(this.workspace,r.notebook,e,t);r.disposables.push(i);const o=await i.selectKernel((e=>{const{quickPick:t,selection:r}=n.showLazyLoadQuickPick({...e,placeholder:"",matchOnDescription:!0,matchOnDetail:!0,supportBackInFirstStep:!0,activeItem:void 0,ignoreFocusOut:!1});return{quickPick:t,selection:r}}));"controller"===o?.selection?(r.source=o.finder,r.selection={type:"connection",connection:o.connection}):"userPerformedSomeOtherAction"===o?.selection&&(r.selection={type:"userPerformedSomeOtherAction"})}};S=r([(0,o.injectable)(),i(0,(0,o.inject)(d.IKernelFinder)),i(1,(0,o.inject)(m.IMultiStepInputFactory)),i(2,(0,o.inject)(u.IJupyterUriProviderRegistration)),i(3,(0,o.inject)(u.IJupyterServerUriStorage)),i(4,(0,o.inject)(l.JupyterServerSelector)),i(5,(0,o.inject)(v.KernelFilterService)),i(6,(0,o.inject)(p.IWorkspaceService))],S),t.NotebookKernelSourceSelector=S},77433:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuickPickKernelItemProvider=void 0;const r=n(66828),i=n(38994),o=n(20397),s=n(35412),a=n(43138),c=n(25251),l=n(11642),u=n(97555);t.QuickPickKernelItemProvider=class{get finder(){return this._finder}constructor(e,t,n,i){this.notebook=e,this.kernelFilter=i,this._onDidRefresh=new r.EventEmitter,this.onDidRefresh=this._onDidRefresh.event,this._onDidChange=new r.EventEmitter,this.onDidChange=this._onDidChange.event,this.kernels=[],this._onDidChangeStatus=new r.EventEmitter,this.onDidChangeStatus=this._onDidChangeStatus.event,this._onDidChangeRecommended=new r.EventEmitter,this.onDidChangeRecommended=this._onDidChangeRecommended.event,this._onDidFailToListKernels=new r.EventEmitter,this.onDidFailToListKernels=this._onDidFailToListKernels.event,this.status="idle",this.disposables=[],this.refresh=async()=>{this.refreshInvoked=!0},this.title=c.DataScience.kernelPickerSelectKernelTitle,this.kind=t,this.disposables.push(this._onDidRefresh),(0,a.isPromise)(n)?n.then((e=>this.setupFinder(e))).catch((e=>(0,l.traceError)(`Failed to setup finder for ${this.title}`,e))):this.setupFinder(n)}dispose(){(0,o.disposeAllDisposables)(this.disposables)}setupFinder(e){switch(this._finder=e,this.refresh=async()=>e.refresh(),this.status===e.status||this.refreshInvoked||(this.status=e.status,this._onDidChangeStatus.fire()),(this.refreshInvoked||e.kind===i.ContributedKernelFinderKind.Remote&&"idle"===e.status&&0===this.filteredKernels(e.kernels).length)&&e.refresh().catch((e=>(0,l.traceError)(`Failed to refresh finder for ${this.title}`,e))),e.kind){case i.ContributedKernelFinderKind.LocalKernelSpec:this.title=c.DataScience.kernelPickerSelectLocalKernelSpecTitle;break;case i.ContributedKernelFinderKind.LocalPythonEnvironment:this.title=c.DataScience.kernelPickerSelectPythonEnvironmentTitle;break;default:this.title=c.DataScience.kernelPickerSelectKernelFromRemoteTitle(e.displayName)}e.onDidChangeKernels((()=>{this.kernels.length=0,this.kernels.push(...this.filteredKernels(e.kernels)),this._onDidChange.fire()}),this,this.disposables),e.onDidChangeStatus((()=>{this.status=e.status,this._onDidChangeStatus.fire(),"idle"===this.status&&e.lastError&&0===this.filteredKernels(e.kernels).length&&(this.kernels.length=0,this._onDidFailToListKernels.fire(e.lastError))})),this.kernels.length=0,this.kernels.push(...this.filteredKernels(e.kernels)),this._onDidChange.fire(),this._onDidChangeStatus.fire();const t=new r.CancellationTokenSource;this.disposables.push(new r.Disposable((()=>t.cancel()))),this.disposables.push(t);const n=new u.PreferredKernelConnectionService;this.disposables.push(n),e.kind===i.ContributedKernelFinderKind.Remote?this.computePreferredRemoteKernel(e,n,t.token):this.computePreferredLocalKernel(e,n,t.token)}filteredKernels(e){return e.filter((e=>!this.kernelFilter.isKernelHidden(e)))}computePreferredRemoteKernel(e,t,n){t.findPreferredRemoteKernelConnection(this.notebook,e,n).then((e=>{this.recommended=e,this._onDidChangeRecommended.fire()})).catch((e=>(0,l.traceError)(`Preferred connection failure ${(0,s.getDisplayPath)(this.notebook.uri)}`,e)))}computePreferredLocalKernel(e,t,n){const r=()=>{this.recommended&&!this.kernels.find((e=>e.id===this.recommended?.id))&&(this.recommended=void 0),this.recommended||(e.kind===i.ContributedKernelFinderKind.LocalKernelSpec?t.findPreferredLocalKernelSpecConnection.bind(t):t.findPreferredPythonKernelConnection.bind(t))(this.notebook,e,n).then((e=>{this.recommended||(this.recommended=e,this._onDidChangeRecommended.fire())})).catch((e=>(0,l.traceError)(`Preferred connection failure ${(0,s.getDisplayPath)(this.notebook.uri)}`,e)))};r(),e.onDidChangeKernels(r,this,this.disposables)}}},84390:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LiveKernelSwitcher=void 0;const o=n(86700),s=n(10053),a=n(11642),c=n(42080),l=n(76385),u=n(15925),d=n(43138),p=n(50867),h=n(85446),f=n(86563),g=n(58681);let m=class{constructor(e,t,n,r,i){this.disposables=e,this.vscNotebook=t,this.controllerRegistration=n,this.commandManager=r,this.preferredRemoteKernelIdProvider=i}activate(){this.vscNotebook.onDidOpenNotebookDocument(this.onDidOpenNotebook,this,this.disposables),this.vscNotebook.notebookDocuments.forEach((e=>this.onDidOpenNotebook(e)))}async onDidOpenNotebook(e){if(!(0,f.isJupyterNotebook)(e))return;const t=await this.preferredRemoteKernelIdProvider.getPreferredRemoteKernelId(e.uri);if(!t)return;const n=()=>{const n=this.controllerRegistration.getSelected(e),r=this.controllerRegistration.registered.find((e=>e.id===t));return!(!r||n?.id===r.id||(this.switchKernel(e,r.connection).catch(g.noop),0))};if(n())return;const r=this.controllerRegistration.onDidChange((e=>{e.added.length&&n()&&r.dispose()}),this,this.disposables);this.controllerRegistration.onControllerSelected((t=>{t.notebook===e&&r.dispose()}),this,this.disposables)}async switchKernel(e,t){(0,a.traceVerbose)(`Using notebook.selectKernel to force remote kernel for ${e.uri} to ${t.id}`);const n=await(0,d.waitForCondition)((async()=>this.vscNotebook.activeNotebookEditor?.notebook===e&&(await this.commandManager.executeCommand("notebook.selectKernel",{id:t.id,extension:u.JVSC_EXTENSION_ID}),this.controllerRegistration.getSelected(e)?.connection.id===t.id)),2e3,100);(0,a.traceInfo)(`Results of switching remote kernel: ${n}`)}};r([(0,h.swallowExceptions)()],m.prototype,"onDidOpenNotebook",null),m=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IDisposableRegistry)),i(1,(0,o.inject)(s.IVSCodeNotebook)),i(2,(0,o.inject)(p.IControllerRegistration)),i(3,(0,o.inject)(s.ICommandManager)),i(4,(0,o.inject)(l.PreferredRemoteKernelIdProvider))],m),t.LiveKernelSwitcher=m},24970:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookIPyWidgetCoordinator=void 0;const o=n(86700),s=n(66828),a=n(10053),c=n(20397),l=n(11642),u=n(35412),d=n(42080),p=n(41778),h=n(50867),f=n(29768),g=n(86563);class m{get controller(){if(!this._controller)throw new Error("No controller defined");return this._controller.controller}constructor(e,t){this.editor=e,this.pendingMessages=[],this.disposables=[],this._onDidReceiveMessage=new s.EventEmitter,this.changeController(t)}changeController(e){this._controller?.id!==e.id&&(this.controllerMessageHandler?.dispose(),this._controller=e,this.controllerMessageHandler=e.onDidReceiveMessage((t=>{t.editor===this.editor&&this.controller?.id===e.id&&(this.eventHandlerListening?(this.sendPendingMessages(),this._onDidReceiveMessage.fire(t.message)):this.pendingMessages.push(t.message))}),this,this.disposables))}dispose(){(0,c.disposeAllDisposables)(this.disposables)}get onDidReceiveMessage(){return this.eventHandlerListening=!0,setTimeout((()=>this.sendPendingMessages()),0),this._onDidReceiveMessage.event}postMessage(e){return this.controller.postMessage(e,this.editor)}asWebviewUri(e){return this.controller.asWebviewUri(e)}sendPendingMessages(){if(this.pendingMessages.length){let e=this.pendingMessages.shift();for(;e;)this._onDidReceiveMessage.fire(e),e=this.pendingMessages.shift()}}}let y=class{constructor(e,t,n,r){this.serviceContainer=e,this.disposableRegistry=t,this.notebook=n,this.controllerManager=r,this.messageCoordinators=new WeakMap,this.notebookDisposables=new WeakMap,this.notebookCommunications=new WeakMap,this.notebookEditors=new WeakMap}activate(){this.notebook.onDidChangeVisibleNotebookEditors(this.onDidChangeVisibleNotebookEditors,this,this.disposableRegistry),this.notebook.onDidCloseNotebookDocument(this.onDidCloseNotebookDocument,this,this.disposableRegistry),this.controllerManager.onControllerSelected(this.onDidSelectController,this,this.disposableRegistry)}onDidSelectController(e){const t=this.messageCoordinators.get(e.notebook);t&&(this.messageCoordinators.delete(e.notebook),this.notebook.notebookEditors.filter((t=>t.notebook===e.notebook)).forEach((t=>{const n=this.notebookCommunications.get(t);this.notebookCommunications.delete(t),n&&n.controller!==e.controller.controller&&(this.notebookCommunications.delete(t),n&&n.dispose())})),t?.dispose()),this.notebook.notebookEditors.filter((t=>t.notebook===e.notebook)).forEach((t=>this.initializeNotebookCommunication(t,e.controller)))}initializeNotebookCommunication(e,t){if(!(0,g.isJupyterNotebook)(e.notebook))return;const n=e.notebook;if(!t)return void(0,l.traceVerbose)(`No controller, hence notebook communications cannot be initialized for editor ${(0,u.getDisplayPath)(e.notebook.uri)}`);if(this.notebookCommunications.has(e))return void(0,l.traceVerbose)(`notebook communications already initialized for editor ${(0,u.getDisplayPath)(e.notebook.uri)}`);(0,l.traceVerbose)(`Initialize notebook communications for editor ${(0,u.getDisplayPath)(e.notebook.uri)}`);const r=new m(e,t);this.addNotebookDisposables(n,[r]),this.notebookCommunications.set(e,r),(0,l.traceVerbose)(`Resolving notebook UI Comms (resolve) for ${(0,u.getDisplayPath)(n.uri)}`);let i=this.messageCoordinators.get(n);i||(i=new f.CommonMessageCoordinator(n,this.serviceContainer),this.messageCoordinators.set(n,i)),i.attach(r)}addNotebookDisposables(e,t){const n=this.notebookDisposables.get(e)||[];n.push(...t),this.notebookDisposables.set(e,n)}async onDidChangeVisibleNotebookEditors(e){e.forEach((e=>{const t=this.controllerManager.getSelected(e.notebook);this.initializeNotebookCommunication(e,t)}))}onDidCloseNotebookDocument(e){const t=this.notebookEditors.get(e)||[];(0,c.disposeAllDisposables)(this.notebookDisposables.get(e)||[]),t.forEach((e=>this.notebookCommunications.get(e)?.dispose())),this.messageCoordinators.get(e)?.dispose(),this.messageCoordinators.delete(e)}};y=r([(0,o.injectable)(),i(0,(0,o.inject)(p.IServiceContainer)),i(1,(0,o.inject)(d.IDisposableRegistry)),i(2,(0,o.inject)(a.IVSCodeNotebook)),i(3,(0,o.inject)(h.IControllerRegistration))],y),t.NotebookIPyWidgetCoordinator=y},97555:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PreferredKernelConnectionService=void 0;const s=n(66828),a=n(38994),c=n(76385),l=n(94062),u=n(20397),d=n(86563),p=n(84570),h=n(5337),f=n(82010),g=o(n(52859)),m=n(99746),y=n(47891);function v(e,t){const n=s.workspace.getWorkspaceFolder(e.uri)?.uri||(1===s.workspace.workspaceFolders?.length?s.workspace.workspaceFolders[0].uri:void 0);return b(g.dirname(e.uri),t)||(n?b(n,t):void 0)}function b(e,t){const n=t.kernels.filter((e=>"startUsingPythonInterpreter"===e.kind)).map((e=>e)).filter((t=>(0,m.isParentPath)(t.interpreter.envPath?.fsPath||t.interpreter.uri.fsPath,e.fsPath))),r=n.find((e=>e.interpreter.envType===y.EnvironmentType.Venv&&".venv"===e.interpreter.envName?.toLowerCase()));if(r)return r;const i=n.find((e=>e.interpreter.envType===y.EnvironmentType.Venv&&".venv"===e.interpreter.envName?.toLowerCase()));if(i)return i;return n.find((e=>e.interpreter.envType===y.EnvironmentType.Venv&&".venv"===e.interpreter.envName?.toLowerCase()))||(n.length?n[0]:void 0)}t.PreferredKernelConnectionService=class{constructor(){this.disposables=[]}dispose(){(0,u.disposeAllDisposables)(this.disposables)}async findPreferredRemoteKernelConnection(e,t,n){return this.findPreferredRemoteKernelConnectionImpl(e,t,n,!1)}async findPreferredRemoteKernelConnectionImpl(e,t,n,r){const i=await h.ServiceContainer.instance.get(c.PreferredRemoteKernelIdProvider).getPreferredRemoteKernelId(e.uri),o=async()=>{let e=t.kernels.find((e=>"connectToLiveRemoteKernel"===e.kind&&e.id===i));if(e)return e;if("idle"===t.status)return;return await new Promise((e=>t.onDidChangeKernels((()=>{const r=t.kernels.find((e=>"connectToLiveRemoteKernel"===e.kind&&e.id===i));r&&e(r),("idle"===t.status||n.isCancellationRequested)&&e(void 0)}),this,this.disposables)))||void 0};if(i){const e=await o();if(e||r)return e}return this.findPreferredKernelSpecConnection(e,t,n,r)}async findPreferredLocalKernelSpecConnection(e,t,n){return this.findPreferredKernelSpecConnection(e,t,n,!1)}async findPreferredKernelSpecConnection(e,t,n,r){const i=(0,d.getNotebookMetadata)(e)?.kernelspec?.name,o=()=>{const n=i?t.kernels.filter((e=>("startUsingLocalKernelSpec"===e.kind||"startUsingRemoteKernelSpec"===e.kind)&&e.kernelSpec.name===i)):[];if(n.length||r)return n;const o=(0,f.getLanguageOfNotebookDocument)(e);return o?t.kernels.filter((e=>("startUsingLocalKernelSpec"===e.kind||"startUsingRemoteKernelSpec"===e.kind)&&e.kernelSpec.language&&(e.kernelSpec.language===o||(0,d.translateKernelLanguageToMonaco)(e.kernelSpec.language)===(0,d.translateKernelLanguageToMonaco)(o)))):void 0},s=o();if(Array.isArray(s)&&s.length){if(r&&s.length>1)return;return s[0]}if("idle"===t.status)return;const a=[];return new Promise((e=>t.onDidChangeKernels((()=>{if(n.isCancellationRequested)return e(void 0);const i=o();if(Array.isArray(i)&&i.length)return r&&i.length>1?e(void 0):e(i[0]);"idle"===t.status&&e(void 0)}),this,this.disposables))).finally((()=>(0,u.disposeAllDisposables)(a)))}async findPreferredPythonKernelConnection(e,t,n){return this.findPreferredPythonKernelConnectionImpl(e,t,n)}async findPreferredPythonKernelConnectionImpl(e,t,n){t=t||h.ServiceContainer.instance.get(l.IKernelFinder).registered.find((e=>e.kind===a.ContributedKernelFinderKind.LocalPythonEnvironment));const r=h.ServiceContainer.instance.get(p.IInterpreterService),i=v(e,t);if(i)return i;const o=await r.getActiveInterpreter(e.uri);if(!o)return;const s=()=>{if(!n.isCancellationRequested)return t.kernels.filter((e=>"startUsingPythonInterpreter"===e.kind)).map((e=>e)).find((e=>e.interpreter.id===o.id))};return s()||("discovering"===t.status?(await new Promise((n=>{t.onDidChangeStatus((()=>"idle"===t.status&&n()),this,this.disposables),t.onDidChangeKernels((()=>(v(e,t)||s())&&n()),this,this.disposables)})),v(e,t)||s()):void 0)}}},93796:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PythonEnvKernelConnectionCreator=void 0;const r=n(66828),i=n(88960),o=n(38994),s=n(94062),a=n(6491),c=n(20397),l=n(35412),u=n(84570),d=n(5337),p=n(11642),h=n(9959),f=n(50867);t.PythonEnvKernelConnectionCreator=class{dispose(){this.cancelTokeSource.dispose(),(0,c.disposeAllDisposables)(this.disposables)}constructor(e,t){this.notebook=e,this.disposables=[],d.ServiceContainer.instance.get(f.IControllerRegistration).onControllerSelected((e=>{e.notebook!==this.notebook||"startUsingPythonInterpreter"===e.controller.connection.kind&&e.controller.connection.interpreter&&e.controller.connection.interpreter.id===this.createdEnvId||this.cancelTokeSource.cancel()}),this,this.disposables),this.cancelTokeSource=(0,a.wrapCancellationTokens)(t)}async createPythonEnvFromKernelPicker(){let e;const t=await this.createPythonEnvironment();if(this.cancelTokeSource.token.isCancellationRequested||t.action)return(0,h.sendTelemetryEvent)(h.Telemetry.CreatePythonEnvironment,void 0,{failed:!0,reason:"cancelled"}),{action:t.action||"Cancel"};if(!t.interpreter)return(0,h.sendTelemetryEvent)(h.Telemetry.CreatePythonEnvironment,void 0,{failed:!0,reason:"cancelled"}),{action:"Cancel"};e=t.interpreter,(0,p.traceVerbose)(`Python Environment created ${e.id}`);const n=await this.waitForPythonKernel(t.interpreter);if(this.cancelTokeSource.token.isCancellationRequested)return(0,h.sendTelemetryEvent)(h.Telemetry.CreatePythonEnvironment,void 0,{failed:!0,reason:"cancelled"}),{action:"Cancel"};if(!n)return(0,h.sendTelemetryEvent)(h.Telemetry.CreatePythonEnvironment,void 0,{failed:!0,reason:"kernelConnectionNotCreated"}),(0,p.traceVerbose)(`Python Environment ${e.id} not found as a kernel`),{action:"Cancel"};(0,p.traceVerbose)(`Python Environment ${e.id} found as a kernel ${n.kind}:${n.id}`);const r=d.ServiceContainer.instance.get(s.IKernelDependencyService);let o=!0;return await r.installMissingDependencies({resource:this.notebook.uri,kernelConnection:n,ui:new i.DisplayOptions(!1),token:this.cancelTokeSource.token,ignoreCache:!0,cannotChangeKernels:!0,installWithoutPrompting:!0})!==s.KernelInterpreterDependencyResponse.ok&&(o=!1,(0,p.traceWarning)(`Dependencies not installed for new Python Env ${(0,l.getDisplayPath)(e.uri)} for notebook ${(0,l.getDisplayPath)(this.notebook.uri)}`)),(0,h.sendTelemetryEvent)(h.Telemetry.CreatePythonEnvironment,void 0,{dependenciesInstalled:o,envType:t.interpreter.envType}),{kernelConnection:n}}async waitForPythonKernel(e){const t=d.ServiceContainer.instance.get(s.IKernelFinder).registered.find((e=>e.kind===o.ContributedKernelFinderKind.LocalPythonEnvironment));if(t)return this.waitForPythonKernelFromFinder(e,t)}async waitForPythonKernelFromFinder(e,t){return t.kernels.find((t=>t.interpreter.id===e.id))||new Promise((n=>{const r=[];r.push(t.onDidChangeKernels((()=>{if(this.cancelTokeSource.token.isCancellationRequested)return;const i=t.kernels.find((t=>t.interpreter.id===e.id));return i?((0,c.disposeAllDisposables)(r),n(i)):void 0}),this,this.disposables)),r.push(this.cancelTokeSource.token.onCancellationRequested((()=>{(0,c.disposeAllDisposables)(r)})))})).then((t=>{if(!this.cancelTokeSource.token.isCancellationRequested)return t||(0,p.traceWarning)(`New Python Environment ${(0,l.getDisplayPath)(e.uri)} not found as a kernel`),t}))}async createPythonEnvironment(){const e=d.ServiceContainer.instance.get(u.IInterpreterService),t=new r.CancellationTokenSource;e.pauseInterpreterDetection(t.token);try{const n=await r.commands.executeCommand("python.createEnvironment",{showBackButton:!0});if("Cancel"===n?.action)return{action:"Cancel"};if("Back"===n?.action)return{action:"Back"};const i=n?.path;if(this.cancelTokeSource.token.isCancellationRequested)return{action:"Cancel"};if(!i)return(0,p.traceWarning)("Python Environment not created, either user cancelled the creation or there was an error in the Python Extension"),{action:"Cancel"};this.createdEnvId=i,(0,p.traceVerbose)(`Python Environment created ${i}`);const o=await e.getInterpreterDetails({path:i});return this.cancelTokeSource.token.isCancellationRequested?{action:"Cancel"}:(o||(0,p.traceWarning)(`No interpreter details for New Python Environment ${(0,l.getDisplayPath)(r.Uri.file(i))}`),this.createdEnvId=o?.id,{interpreter:o})}finally{t.cancel(),t.dispose()}}}},99229:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteKernelConnectionHandler=void 0;const o=n(86700),s=n(66828),a=n(50867),c=n(42080),l=n(58681),u=n(11642),d=n(94062),p=n(76385),h=n(94433);let f=class{constructor(e,t,n,r,i){this.disposables=e,this.kernelProvider=t,this.controllers=n,this.liveKernelTracker=r,this.preferredRemoteKernelIdProvider=i}activate(){this.kernelProvider.onDidStartKernel(this.onDidStartKernel,this,this.disposables),this.controllers.onControllerSelectionChanged(this.onNotebookControllerSelectionChanged,this,this.disposables)}onNotebookControllerSelectionChanged({selected:e,notebook:t,controller:n}){"connectToLiveRemoteKernel"===n.connection.kind&&n.connection.kernelModel.id&&(e?this.liveKernelTracker.trackKernelIdAsUsed(t.uri,n.connection.serverId,n.connection.kernelModel.id):this.liveKernelTracker.trackKernelIdAsNotUsed(t.uri,n.connection.serverId,n.connection.kernelModel.id)),(0,d.isLocalConnection)(n.connection)&&this.preferredRemoteKernelIdProvider.clearPreferredRemoteKernelId(t.uri).catch(l.noop)}onDidStartKernel(e){if(!e.resourceUri)return;const t=e.resourceUri;if("startUsingRemoteKernelSpec"===e.kernelConnectionMetadata.kind){const n=e.kernelConnectionMetadata.serverId,r=e.kernelSocket.subscribe((r=>{const i=r?.options.id;e.disposed||e.disposing||!i||((0,u.traceVerbose)(`Updating preferred kernel for remote notebook ${i}`),this.preferredRemoteKernelIdProvider.storePreferredRemoteKernelId(t,i).catch(l.noop),this.liveKernelTracker.trackKernelIdAsUsed(t,n,i))}));this.disposables.push(new s.Disposable((()=>r.unsubscribe())))}}};f=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IDisposableRegistry)),i(1,(0,o.inject)(d.IKernelProvider)),i(2,(0,o.inject)(a.IControllerRegistration)),i(3,(0,o.inject)(h.ILiveRemoteKernelConnectionUsageTracker)),i(4,(0,o.inject)(p.PreferredRemoteKernelIdProvider))],f),t.RemoteKernelConnectionHandler=f},35282:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteKernelControllerWatcher=void 0;const o=n(86700),s=n(46875),a=n(94433),c=n(94062),l=n(15925),u=n(42080),d=n(58681),p=n(11642),h=n(50867);let f=class{constructor(e,t,n,r){this.disposables=e,this.providerRegistry=t,this.uriStorage=n,this.controllers=r,this.handledProviders=new WeakSet}activate(){this.providerRegistry.onDidChangeProviders(this.addProviderHandlers,this,this.disposables),this.addProviderHandlers().catch(d.noop)}async addProviderHandlers(){(await this.providerRegistry.getProviders()).forEach((e=>{this.onProviderHandlesChanged(e).catch(d.noop),e.onDidChangeHandles&&!this.handledProviders.has(e)&&e.onDidChangeHandles(this.onProviderHandlesChanged.bind(this,e),this,this.disposables)}))}async onProviderHandlesChanged(e){if(!e.getHandles)return;const[t,n]=await Promise.all([e.getHandles(),this.uriStorage.getSavedUriList()]),r=new Map,i=[];await Promise.all(n.map((async n=>{if(n.uri===l.Settings.JupyterServerLocalLaunch)return;const o=(0,s.extractJupyterServerHandleAndId)(n.uri);o&&o.id===e.id&&(r.set(n.serverId,{uri:n.uri,providerId:o.id,handle:o.handle}),t.includes(o.handle)&&i.push(o.handle),t.includes(o.handle)?n.isValidated||n.serverId!==this.uriStorage.currentServerId||await this.uriStorage.setUriToRemote(n.uri,n.displayName??n.uri).catch(d.noop):await this.uriStorage.removeUri(n.uri))})));const o=t.filter((e=>!i.includes(e)));await Promise.all(o.map((async t=>{try{const n=await e.getServerUri(t),r=(0,s.generateUriFromRemoteProvider)(e.id,t);await this.uriStorage.setUriToRemote(r,n.displayName)}catch(e){(0,p.traceError)(`Failed to get server uri and add it to uri Storage for handle ${t}`,e)}}))),this.controllers.registered.forEach((e=>{const n=e.connection;if((0,c.isLocalConnection)(n))return;const i=r.get(n.serverId);i&&!t.includes(i.handle)&&((0,p.traceWarning)(`Deleting controller ${e.id} as it is associated with a server Id that has been removed`),e.dispose())}))}};f=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IDisposableRegistry)),i(1,(0,o.inject)(a.IJupyterUriProviderRegistration)),i(2,(0,o.inject)(a.IJupyterServerUriStorage)),i(3,(0,o.inject)(h.IControllerRegistration))],f),t.RemoteKernelControllerWatcher=f},79212:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteSwitcher=void 0;const o=n(86700),s=n(66828),a=n(10053),c=n(42080),l=n(25251),u=n(15925),d=n(27527),p=n(94433),h=n(15925),f=n(86563),g=n(58681),m=n(50867);let y=class{constructor(e,t,n,r,i,o,s,a,c){this.serverUriStorage=e,this.documentManager=t,this.notebook=n,this.commandManager=r,this.disposableRegistry=i,this.appShell=o,this.serverSelector=s,this.controllerRegistration=a,this.featuresManager=c,this.disposables=[],this.disposableRegistry.push(this)}dispose(){this.disposables.forEach((e=>e.dispose()))}activate(){const e=()=>{"Insiders"===this.featuresManager.features.kernelPickerType?(this.disposables.forEach((e=>e.dispose())),this.disposables=[]):this._registerStatusBar()};this.disposableRegistry.push(this.featuresManager.onDidChangeFeatures((()=>e()))),e()}_registerStatusBar(){this.disposables.push(this.commandManager.registerCommand(u.Commands.SelectNativeJupyterUriFromToolBar,this.onToolBarCommand,this)),this.statusBarItem=this.appShell.createStatusBarItem(s.StatusBarAlignment.Right,1e3),this.notebook.onDidChangeActiveNotebookEditor(this.updateStatusBar.bind(this),this.disposables),this.documentManager.onDidChangeActiveTextEditor(this.updateStatusBar.bind(this),this.disposables),this.serverUriStorage.onDidChangeUri(this.updateStatusBar.bind(this),this.disposables),this.controllerRegistration.onControllerSelected(this.updateStatusBar.bind(this),this,this.disposables),this.disposables.push(this.statusBarItem),this.updateStatusBar().catch(g.noop)}async onToolBarCommand(){await this.serverSelector.selectJupyterURI("nativeNotebookToolbar")}async updateStatusBar(){if(!this.notebook.activeNotebookEditor||!(0,f.isJupyterNotebook)(this.notebook.activeNotebookEditor.notebook))return void this.statusBarItem.hide();this.statusBarItem.show();const e=await this.serverUriStorage.getRemoteUri(),t=e&&e.isValidated&&e.uri!==h.Settings.JupyterServerLocalLaunch?l.DataScience.jupyterNativeNotebookUriStatusLabelForRemote:l.DataScience.jupyterNativeNotebookUriStatusLabelForLocal,n=e?.uri===h.Settings.JupyterServerLocalLaunch?"":` (${e})`,r=`${l.DataScience.specifyLocalOrRemoteJupyterServerForConnections}${n}`;this.statusBarItem.text=`$(debug-disconnect) ${t}`,this.statusBarItem.tooltip=r,this.statusBarItem.command={command:u.Commands.SelectJupyterURI,title:t,tooltip:r,arguments:[void 0,"nativeNotebookStatusBar"]},this.statusBarItem.command}};y=r([(0,o.injectable)(),i(0,(0,o.inject)(p.IJupyterServerUriStorage)),i(1,(0,o.inject)(a.IDocumentManager)),i(2,(0,o.inject)(a.IVSCodeNotebook)),i(3,(0,o.inject)(a.ICommandManager)),i(4,(0,o.inject)(c.IDisposableRegistry)),i(5,(0,o.inject)(a.IApplicationShell)),i(6,(0,o.inject)(d.JupyterServerSelector)),i(7,(0,o.inject)(m.IControllerRegistration)),i(8,(0,o.inject)(c.IFeaturesManager))],y),t.RemoteSwitcher=y},14809:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(52064),i=n(42700),o=n(89977),s=n(25928),a=n(50867),c=n(1396),l=n(19904),u=n(23712),d=n(97838),p=n(62075),h=n(19687),f=n(43863);t.registerTypes=function(e,t){e.addSingleton(a.IKernelRankingHelper,l.KernelRankingHelper),e.addSingleton(a.IControllerRegistration,s.ControllerRegistration),e.addBinding(a.IControllerRegistration,r.IExtensionSyncActivationService),e.addSingleton(a.IControllerDefaultService,i.ControllerDefaultService),e.addSingleton(a.IControllerPreferredService,f.ControllerPreferredServiceWrapper),e.addBinding(a.IControllerPreferredService,r.IExtensionSyncActivationService),e.add(o.ControllerPreferredService,o.ControllerPreferredService),e.addSingleton(d.ConnectionDisplayDataProvider,d.ConnectionDisplayDataProvider),e.addSingleton(a.INotebookKernelSourceSelector,u.NotebookKernelSourceSelector),e.addSingleton(r.IExtensionSyncActivationService,p.KernelSourceCommandHandler),e.addSingleton(r.IExtensionSyncActivationService,h.ServerConnectionControllerCommands),(0,c.registerTypes)(e,t)}},50867:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.INotebookKernelSourceSelector=t.PreferredKernelExactMatchReason=t.IControllerDefaultService=t.IKernelRankingHelper=t.IControllerPreferredService=t.IControllerRegistration=t.InteractiveControllerIdSuffix=void 0,t.InteractiveControllerIdSuffix=" (Interactive)",t.IControllerRegistration=Symbol("IControllerRegistration"),t.IControllerPreferredService=Symbol("IControllerPreferredService"),t.IKernelRankingHelper=Symbol("IKernelRankingHelper"),t.IControllerDefaultService=Symbol("IControllerDefaultService"),(n=t.PreferredKernelExactMatchReason||(t.PreferredKernelExactMatchReason={}))[n.NoMatch=0]="NoMatch",n[n.OnlyKernel=1]="OnlyKernel",n[n.WasPreferredInterpreter=2]="WasPreferredInterpreter",n[n.IsExactMatch=4]="IsExactMatch",n[n.IsNonPythonKernelLanguageMatch=8]="IsNonPythonKernelLanguageMatch",t.INotebookKernelSourceSelector=Symbol("INotebookKernelSourceSelector")},60322:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.VSCodeNotebookController=void 0;const i=n(66828),o=n(15925),s=n(20397),a=n(11642),c=n(35412),l=n(43138),u=n(25251),d=n(58681),p=n(47684),h=n(15925),f=n(9959),g=n(37853),m=n(30682),y=n(98729),v=n(94062),b=n(66690),w=n(88960),C=n(86563),S=n(99203),_=n(46799),k=n(6491),P=n(9016),I=n(14154),E=n(61239),T=n(90541),D=n(32378),x=n(35631);class R{get id(){return this.controller.id}get label(){return this.controller.label}get connection(){return this.kernelConnection}get viewType(){return this._viewType}get onNotebookControllerSelected(){return this._onNotebookControllerSelected.event}get onNotebookControllerSelectionChanged(){return this._onNotebookControllerSelectionChanged.event}get onDidReceiveMessage(){return this.controller.onDidReceiveMessage}get onDidDispose(){return this._onDidDispose.event}isAssociatedWithDocument(e){return this.associatedDocuments.has(e)}static create(e,t,n,r,i,o,s,a,c,l,u,d,p,h,f,g,m,y){return new R(e,t,n,r,i,o,s,a,c,l,u,d,p,h,f,g,m,y)}constructor(e,t,n,r,o,s,l,u,d,p,h,f,g,m,y,v,b,w){this.kernelConnection=e,this._viewType=n,this.notebookApi=r,this.commandManager=o,this.kernelProvider=s,this.context=l,this.languageService=d,this.workspace=p,this.configuration=h,this.documentManager=f,this.appShell=g,this.browser=m,this.extensionChecker=y,this.serviceContainer=v,this.displayDataProvider=b,this.featureManager=w,this._onNotebookControllerSelectionChanged=new i.EventEmitter,this.pendingCellAdditions=new Map,this._onDidDispose=new i.EventEmitter,this.disposables=[],this.notebookKernels=new WeakMap,this.isDisposed=!1,this.runningCellExecutions=new Map,this.associatedDocuments=new WeakMap,u.push(this),b.onDidChange((e=>{e.connectionId===this.connection.id&&this.updateDisplayData()}),this,this.disposables),this._onNotebookControllerSelected=new i.EventEmitter;const C=this.displayDataProvider.getDisplayData(this.connection);(0,a.traceVerbose)(`Creating notebook controller for ${e.kind} & view ${n} (id='${e.id}') with name '${C.label}'`),this.controller=this.notebookApi.createNotebookController(t,n,C.label,this.handleExecution.bind(this),this.getRendererScripts(),[]),this.updateDisplayData(),this.controller.interruptHandler=this.handleInterrupt.bind(this),this.controller.supportsExecutionOrder=!0,this.controller.supportedLanguages=this.languageService.getSupportedLanguages(e),this.controller.onDidChangeSelectedNotebooks(this.onDidChangeSelectedNotebooks,this,this.disposables),this.notebookApi.onDidCloseNotebookDocument((e=>{(0,a.traceInfoIfCI)(`Remove associated notebook ${(0,c.getDisplayPath)(e.uri)} from controller ${this.connection.kind}:${this.id} for ${this.viewType}`),this.associatedDocuments.delete(e)}),this,this.disposables)}updateConnection(e){"connectToLiveRemoteKernel"!==e.kind&&(this.controller.label=(0,y.getDisplayNameOrNameOfKernelConnection)(e))}asWebviewUri(e){return this.controller.asWebviewUri(e)}postMessage(e,t){const n=e&&"message"in e?e.message:"";return(0,a.traceInfoIfCI)(`${S.ConsoleForegroundColors.Green}Posting message to Notebook UI ${n}`),this.controller.postMessage(e,t)}setPendingCellAddition(e,t){if(this.viewType!==o.InteractiveWindowView)throw new Error("setPendingCellAddition only applies to the Interactive Window");this.pendingCellAdditions.set(e,t)}dispose(){if(this.isDisposed)return;const e=this.notebookApi.notebookDocuments.filter((e=>this.associatedDocuments.has(e))).map((e=>e.uri.toString()));(0,a.traceVerbose)(`Disposing controller ${this.id} associated with connection ${this.connection.id} ${e.length?"and documents "+e.join(", "):""}`),(0,a.traceInfoIfCI)(`Disposing controller ${this.id} associated with connection ${this.connection.id} ${e.length?"and documents "+e.join(", "):""} called from ${new Error("").stack}`),this.isDisposed=!0,this._onNotebookControllerSelected.dispose(),this._onNotebookControllerSelectionChanged.dispose(),this.controller.dispose(),this._onDidDispose.fire(),this._onDidDispose.dispose(),(0,s.disposeAllDisposables)(this.disposables)}updateDisplayData(){const e=this.displayDataProvider.getDisplayData(this.connection);this.controller.label=e.label,"Insiders"===this.featureManager.features.kernelPickerType&&e.serverDisplayName&&(this.controller.description=e.description?`${e.description} (${e.serverDisplayName})`:e.serverDisplayName),this.controller.kind=e.category}async handleExecution(e,t){e.length<1||(this.pendingCellAdditions.has(t)&&await this.pendingCellAdditions.get(t),e=e.filter((e=>!(e.index<0&&((0,a.traceWarning)(`Attempting to run a cell with index ${e.index}, kind ${e.kind}, text = ${e.document.getText()}`),1)))),this.workspace.isTrusted&&(await(0,E.initializeInteractiveOrNotebookTelemetryBasedOnUserAction)(t.uri,this.connection),await Promise.all(e.map((e=>this.executeCell(t,e))))))}warnWhenUsingOutdatedPython(){const e=this.kernelConnection.interpreter?.version;!e||e.major>=4||"startUsingLocalKernelSpec"!==this.kernelConnection.kind&&"startUsingPythonInterpreter"!==this.kernelConnection.kind||(e.major<3||3===e.major&&e.minor<=5)&&this.appShell.showWarningMessage(u.DataScience.warnWhenSelectingKernelWithUnSupportedPythonVersion,u.Common.learnMore).then((e=>{if(e===u.Common.learnMore)return this.browser.launch("https://aka.ms/jupyterUnSupportedPythonKernelVersions")}),d.noop)}async onDidChangeSelectedNotebooks(e){if((0,a.traceInfoIfCI)(`NotebookController selection event called for notebook ${e.notebook.uri.toString()} & controller ${this.connection.kind}:${this.id}. Selected ${e.selected} `),this.associatedDocuments.has(e.notebook)&&e.selected)return;if(!e.selected){const t=this.kernelProvider.get(e.notebook);return t?.kernelConnectionMetadata.id===this.kernelConnection.id&&((0,a.traceInfo)(`Disposing kernel ${this.kernelConnection.id} for notebook ${(0,c.getDisplayPath)(e.notebook.uri)} due to selection of another kernel or closing of the notebook`),t.dispose().catch(d.noop)),this.associatedDocuments.delete(e.notebook),void this._onNotebookControllerSelectionChanged.fire(e)}if(!(0,C.isJupyterNotebook)(e.notebook)&&e.notebook.notebookType!==o.InteractiveWindowView)return;if(!this.workspace.isTrusted)return;this.warnWhenUsingOutdatedPython();const t=(0,l.createDeferred)();(0,a.traceInfoIfCI)(`Controller ${this.connection.kind}:${this.id} associated with nb ${(0,c.getDisplayPath)(e.notebook.uri)}`),this.associatedDocuments.set(e.notebook,t.promise),await this.onDidSelectController(e.notebook),await this.updateCellLanguages(e.notebook),this._onNotebookControllerSelected.fire({notebook:e.notebook,controller:this}),this._onNotebookControllerSelectionChanged.fire(e),(0,a.traceVerbose)("Controller selection change completed"),t.resolve()}async updateCellLanguages(e){const t=this.controller.supportedLanguages;if(!t||0===t?.length)return;const n=(0,y.isPythonKernelConnection)(this.kernelConnection)?o.PYTHON_LANGUAGE:t[0];await Promise.all(e.getCells().filter((e=>e.kind===i.NotebookCellKind.Code)).map((async e=>{t.includes(e.document.languageId)||await i.languages.setTextDocumentLanguage(e.document,n).then(d.noop,d.noop)})))}getRendererScripts(){const e=[];return this.context.extensionMode!==i.ExtensionMode.Development&&this.context.extensionMode!==i.ExtensionMode.Test||e.push(i.Uri.joinPath(this.context.extensionUri,"out","webviews","webview-side","widgetTester","widgetTester.js")),e.push(i.Uri.joinPath(this.context.extensionUri,"out","webviews","webview-side","ipywidgetsKernel","dummy.js")),e.map((e=>new i.NotebookRendererScript(e)))}handleInterrupt(e){(0,a.traceVerbose)(`VS Code interrupted kernel for ${(0,c.getDisplayPath)(e.uri)}`),e.getCells().forEach((e=>(0,I.traceCellMessage)(e,"Cell cancellation requested"))),this.commandManager.executeCommand(h.Commands.InterruptKernel,{notebookEditor:{notebookUri:e.uri}}).then(d.noop,(e=>console.error(e)))}createCellExecutionIfNecessary(e,t){let n=this.runningCellExecutions.get(e.notebook);if(!n||n.cell===e){n?.end(void 0,void 0),n=P.CellExecutionCreator.getOrCreate(e,t),this.runningCellExecutions.set(e.notebook,n);const r=n.end.bind(n);n.end=(t,n)=>{this.runningCellExecutions.delete(e.notebook),r(t,n)}}return n}async executeCell(e,t){(0,a.traceVerbose)(`Execute Cell ${t.index} ${(0,c.getDisplayPath)(t.notebook.uri)}`);let n,r=this.createCellExecutionIfNecessary(t,new x.KernelController(this.controller)),i="start",o=new x.KernelController(this.controller),s=!1;try{return n=await this.connectToKernel(e,new w.DisplayOptions(!1)),s=!0,n&&n.controller.id!==o.id&&(o=n.controller,r=this.createCellExecutionIfNecessary(t,n.controller)),i="execution",n.controller.id===this.id&&this.updateKernelInfoInNotebookWhenAvailable(n,e),await this.kernelProvider.getKernelExecution(n).executeCell(t)}catch(n){(0,k.isCancellationError)(n)||(0,a.traceError)("Error in execution",n),s||(r.start(),r.clearOutput(t).then(d.noop,d.noop));const c=this.serviceContainer.get(T.IDataScienceErrorHandler);n=g.WrappedError.unwrap(n);const l=(0,k.isCancellationError)(n)||n instanceof b.KernelDeadError;await(0,I.endCellAndDisplayErrorsInCell)(t,o,await c.getErrorMessageForDisplayInCell(n,i,e.uri),l)}}async connectToKernel(e,t){return _.KernelConnector.connectToNotebookKernel(this.kernelConnection,this.serviceContainer,{resource:e.uri,notebook:e,controller:this.controller},t,this.disposables)}updateKernelInfoInNotebookWhenAvailable(e,t){if(this.notebookKernels.get(t)===e)return;this.notebookKernels.set(t,e);const n=[];this.notebookApi.onDidCloseNotebookDocument((e=>{e===t&&(0,s.disposeAllDisposables)(n)}),this,n);const r=e.onDisposed((()=>(0,s.disposeAllDisposables)(n))),i=e.onStatusChanged((async()=>{!e.disposed&&e.info&&this.associatedDocuments.has(t)&&(await j(this.featureManager,t,this.documentManager,e.kernelConnectionMetadata,e.info),"ok"===e.info.status&&(0,s.disposeAllDisposables)(n))}));n.push({dispose:()=>i.dispose()}),n.push({dispose:()=>r?.dispose()})}async onDidSelectController(e){const t=this.connection,n=this.kernelProvider.get(e);if(n&&(0,y.areKernelConnectionsEqual)(n.kernelConnectionMetadata,t))return void(0,a.traceInfo)("Switch kernel did not change kernel.");if((0,p.sendKernelTelemetryEvent)(e.uri,f.Telemetry.SwitchKernel),n){const t=(0,v.isLocalConnection)(this.kernelConnection)?f.Telemetry.SelectLocalJupyterKernel:f.Telemetry.SelectRemoteJupyterKernel;(0,p.sendKernelTelemetryEvent)(e.uri,t),this.notebookApi.notebookEditors.filter((t=>t.notebook===e)).forEach((e=>this.postMessage({message:m.IPyWidgetMessages.IPyWidgets_onKernelChanged,payload:void 0},e)))}if(await j(this.featureManager,e,this.documentManager,t),e.notebookType===o.InteractiveWindowView)return;const r=this.kernelProvider.getOrCreate(e,{metadata:t,controller:this.controller,resourceUri:e.uri});if((0,a.traceVerbose)(`KernelProvider switched kernel to id = ${r.kernelConnectionMetadata.id}`),(0,y.isPythonKernelConnection)(this.kernelConnection)&&!this.extensionChecker.isPythonExtensionInstalled)return;const s=this.serviceContainer.get(D.ITrustedKernelPaths);!this.configuration.getSettings(void 0).disableJupyterAutoStart&&(0,v.isLocalConnection)(this.kernelConnection)&&this.kernelConnection.kernelSpec.specFile&&s.isTrusted(i.Uri.file(this.kernelConnection.kernelSpec.specFile))&&this.connectToKernel(e,new w.DisplayOptions(!0)).catch(d.noop)}}async function j(e,t,n,r,o){let s=(0,C.getNotebookMetadata)(t)||{orig_nbformat:3};const{changed:a}=await(0,I.updateNotebookMetadata)(e,s,r,o);if(a){const e=new i.WorkspaceEdit,r=JSON.parse(JSON.stringify(t.metadata||{custom:{}}));r.custom=r.custom||{},r.custom.metadata=s,e.set(t.uri,[i.NotebookEdit.updateNotebookMetadata({...t.metadata||{},custom:r.custom})]),await n.applyEdit(e)}}r([(0,a.traceDecoratorVerbose)("VSCodeNotebookController::handleExecution",S.TraceOptions.BeforeCall)],R.prototype,"handleExecution",null),t.VSCodeNotebookController=R},32372:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CommandRegistry=void 0;const o=n(86700),s=n(10053),a=n(15925),c=n(42080),l=n(9959),u=n(3445),d=n(66317);let p=class{constructor(e,t,n,r){this.debuggingManager=e,this.vscNotebook=t,this.disposables=n,this.commandManager=r}activate(){this.disposables.push(this.commandManager.registerCommand(a.Commands.RunByLine,this.runByLine,this)),this.disposables.push(this.commandManager.registerCommand(a.Commands.RunByLineNext,this.runByLineNext,this)),this.disposables.push(this.commandManager.registerCommand(a.Commands.RunByLineStop,this.runByLineStop,this)),this.disposables.push(this.commandManager.registerCommand(a.Commands.RunAndDebugCell,this.runAndDebugCell,this))}async runByLine(e){(0,l.sendTelemetryEvent)(u.DebuggingTelemetry.clickedRunByLine),e??(e=this.getCellFromActiveEditor()),e&&await this.debuggingManager.tryToStartDebugging(d.KernelDebugMode.RunByLine,e)}async runByLineNext(e){e??(e=this.getCellFromActiveEditor()),e&&this.debuggingManager.runByLineNext(e)}async runByLineStop(e){e??(e=this.getCellFromActiveEditor()),e&&this.debuggingManager.runByLineStop(e)}async runAndDebugCell(e){(0,l.sendTelemetryEvent)(u.DebuggingTelemetry.clickedRunAndDebugCell),e??(e=this.getCellFromActiveEditor()),e&&await this.debuggingManager.tryToStartDebugging(d.KernelDebugMode.Cell,e)}getCellFromActiveEditor(){const e=this.vscNotebook.activeNotebookEditor;if(e){const t=e.selections[0];if(t)return e.notebook.cellAt(t.start)}}dispose(){this.disposables.forEach((e=>e.dispose()))}};p=r([(0,o.injectable)(),i(0,(0,o.inject)(d.INotebookDebuggingManager)),i(1,(0,o.inject)(s.IVSCodeNotebook)),i(2,(0,o.inject)(c.IDisposableRegistry)),i(3,(0,o.inject)(s.ICommandManager))],p),t.CommandRegistry=p},3445:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DebuggingTelemetry=t.pythonIWKernelDebugAdapter=t.pythonKernelDebugAdapter=void 0,t.pythonKernelDebugAdapter="Python Kernel Debug Adapter",t.pythonIWKernelDebugAdapter="Python Interactive Window Debug Adapter",(n=t.DebuggingTelemetry||(t.DebuggingTelemetry={})).clickedOnSetup="DATASCIENCE.DEBUGGING.CLICKED_ON_SETUP",n.closedModal="DATASCIENCE.DEBUGGING.CLOSED_MODAL",n.ipykernel6Status="DATASCIENCE.DEBUGGING.IPYKERNEL6_STATUS",n.clickedRunByLine="DATASCIENCE.DEBUGGING.CLICKED_RUNBYLINE",n.successfullyStartedRunByLine="DATASCIENCE.DEBUGGING.SUCCESSFULLY_STARTED_RUNBYLINE",n.successfullyStartedIWJupyterDebugger="DATASCIENCE.DEBUGGING.SUCCESSFULLY_STARTED_IW_JUPYTER",n.clickedRunAndDebugCell="DATASCIENCE.DEBUGGING.CLICKED_RUN_AND_DEBUG_CELL",n.successfullyStartedRunAndDebugCell="DATASCIENCE.DEBUGGING.SUCCESSFULLY_STARTED_RUN_AND_DEBUG_CELL",n.endedSession="DATASCIENCE.DEBUGGING.ENDED_SESSION"},33648:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebugCellController=t.isDebugpyAttachRequest=t.isJustMyCodeNotification=void 0;const r=n(58681),i=n(11642),o=n(9959),s=n(3445),a=n(57566);function c(e){return e.includes("Frame skipped from debugging during step-in")}function l(e){return"debugpyAttach"===e.event}t.isJustMyCodeNotification=c,t.isDebugpyAttachRequest=l,t.DebugCellController=class{constructor(e,t,n,r){this.debugAdapter=e,this.debugCell=t,this.execution=n,this.commandManager=r,(0,o.sendTelemetryEvent)(s.DebuggingTelemetry.successfullyStartedRunAndDebugCell)}trace(e,t){(0,i.traceVerbose)(`[Debug-Cell] ${e}: ${t}`)}async willSendEvent(e){return l(e)?(this.trace("intercept","debugpyAttach request for subprocess, not supported"),!0):!("output"!==e.event||!c(e.body.output)||(this.trace("intercept","justMyCode notification"),0))}async willSendRequest(e){"configurationDone"===e.command&&(await(0,a.cellDebugSetup)(this.execution,this.debugAdapter),this.commandManager.executeCommand("notebook.cell.execute",{ranges:[{start:this.debugCell.index,end:this.debugCell.index+1}],document:this.debugCell.notebook.uri}).then(r.noop,r.noop))}}},83332:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResetKernelController=void 0;const r=n(11642);t.ResetKernelController=class{constructor(e){this.debugAdapter=e}trace(e,t){(0,r.traceVerbose)(`[Debug-Reset] ${e}: ${t}`)}async willSendRequest(e){"attach"===e.command&&(this.trace("attach","Continuing paused kernel threads if needed"),(await this.debugAdapter.debugInfo()).stoppedThreads.forEach((e=>this.debugAdapter.continueDirect(e))))}}},46503:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestartController=void 0;const r=n(11642),i=n(66317);t.RestartController=class{constructor(e,t,n,r){this.mode=e,this.debugAdapter=t,this.debugCell=n,this.serviceContainer=r,this.debuggingManager=this.serviceContainer.get(i.INotebookDebuggingManager)}trace(e,t){(0,r.traceVerbose)(`[Debug-Restart] ${e}: ${t}`)}error(e,t){(0,r.traceError)(`[Debug-Restart] ${e}: ${t}`)}async willSendResponse(e){"initialize"===e.command&&e.body&&(e.body.supportsRestartRequest=!0)}async willSendRequest(e){if("restart"===e.command)return this.trace("restart","Handling restart request"),setTimeout((()=>{this.debugAdapter.disconnect().then((()=>(this.trace("restart","doRestart"),this.debuggingManager.tryToStartDebugging(this.mode,this.debugCell,!0)))).catch((e=>{this.error("restart",`Error restarting: ${e}`)}))}),0),{command:e.command,request_seq:e.seq,seq:e.seq,success:!0,type:"response"}}}},32844:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RunByLineController=void 0;const s=n(66828),a=n(15925),c=n(86563),l=n(58681),u=n(11642),d=o(n(15948)),p=n(9959),h=n(3445),f=n(57566),g=n(33648);t.RunByLineController=class{constructor(e,t,n,r,i){this.debugAdapter=e,this.debugCell=t,this.commandManager=n,this.execution=r,this.settings=i,(0,p.sendTelemetryEvent)(h.DebuggingTelemetry.successfullyStartedRunByLine)}continue(){if("number"!=typeof this.lastPausedThreadId)return(0,u.traceVerbose)("No paused thread, can't do RBL"),void this.stop();this.debugAdapter.stepIn(this.lastPausedThreadId).then(l.noop,l.noop)}stop(){(0,u.traceInfoIfCI)("RunbylineController::stop()"),this.execution.executeHidden("pass").then(l.noop,l.noop),this.debugAdapter.disconnect().then(l.noop,l.noop)}getMode(){return this.debugAdapter.getConfiguration().__mode}async willSendEvent(e){return"stopped"===e.event&&(this.lastPausedThreadId=e.body.threadId,await this.handleStoppedEvent(this.lastPausedThreadId))?(this.trace("intercepted","handled stop event"),!0):!("output"!==e.event||!(0,g.isJustMyCodeNotification)(e.body.output)||(this.trace("intercept","justMyCode notification"),0))}async willSendRequest(e){(0,u.traceInfoIfCI)(`willSendRequest: ${e.command}`),"configurationDone"===e.command&&await this.initializeExecute()}async handleStoppedEvent(e){return!!await this.shouldStepIn(e)&&(this.debugAdapter.stepIn(e).then(l.noop,l.noop),!0)}async shouldStepIn(e){const t=await this.debugAdapter.stackTrace({threadId:e,startFrame:0,levels:1});if(t&&t.stackFrames[0]){const e=t.stackFrames[0],n=new s.Position(e.line,e.column);return this.lastPausePosition?.isEqual(n)?(this.trace("intercept","working around duplicate stop event"),!0):(this.lastPausePosition=n,!!e.source&&e.source.path!==this.debugCell.document.uri.toString())}return!1}trace(e,t){(0,u.traceVerbose)(`[Debug-RBL] ${e}: ${t}`)}async initializeExecute(){await(0,f.cellDebugSetup)(this.execution,this.debugAdapter);const e=this.debugCell.document.getText().splitLines({trim:!1,removeEmptyEntries:!1}),t=[];if((0,c.parseForComments)(e,(()=>(0,l.noop)()),((e,n)=>{0!==e.trim().length&&t.push(n)})),t.sort(),0!==t.length){const e={line:t[0]+1};await this.debugAdapter.setBreakpoints({source:{name:d.basename(this.debugCell.notebook.uri.path),path:this.debugCell.document.uri.toString()},breakpoints:[e],sourceModified:!1}),this.settings.getSettings(this.debugCell.notebook.uri).showVariableViewWhenDebugging&&this.commandManager.executeCommand(a.Commands.OpenVariableView).then(l.noop,l.noop)}this.commandManager.executeCommand("notebook.cell.execute",{ranges:[{start:this.debugCell.index,end:this.debugCell.index+1}],document:this.debugCell.notebook.uri}).then(l.noop,l.noop)}}},51346:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebugLocationTracker=void 0;const r=n(66828);t.DebugLocationTracker=class{constructor(e){this._sessionId=e,this.topMostFrameId=0,this.sequenceNumbersOfRequestsPendingResponses=new Set,this.waitingForStackTrace=!1,this.debugLocationUpdatedEvent=new r.EventEmitter,this.sessionEndedEmitter=new r.EventEmitter,this.DebugLocation=void 0}get sessionId(){return this._sessionId}get sessionEnded(){return this.sessionEndedEmitter.event}get debugLocationUpdated(){return this.debugLocationUpdatedEvent.event}get debugLocation(){return this._debugLocation}onDidSendMessage(e){if(this.isResponseForRequestToFetchAllFrames(e)){const t=e.body?.stackFrames[0];this.topMostFrameId=t?.id,this.sequenceNumbersOfRequestsPendingResponses.delete(e.request_seq),this.waitingForStackTrace&&(this.DebugLocation={lineNumber:t?.line,fileName:this.normalizeFilePath(t?.source?.path),column:t.column},this.waitingForStackTrace=!1)}this.isStopEvent(e)&&(this.waitingForStackTrace=!0),this.isContinueEvent(e)&&(this.DebugLocation=void 0,this.waitingForStackTrace=!1)}onWillStopSession(){this.sessionEndedEmitter.fire(this)}onWillReceiveMessage(e){this.isRequestToFetchAllFrames(e)&&this.sequenceNumbersOfRequestsPendingResponses.add(e.seq)}set DebugLocation(e){const t=this._debugLocation;this._debugLocation=e,this._debugLocation!==t&&this.debugLocationUpdatedEvent.fire()}normalizeFilePath(e){return e.replace(/\\/g,"/")}isStopEvent(e){return"event"===e.type&&"stopped"===e.event}isContinueEvent(e){if("event"===e.type){if("continue"===e.event)return!0}else if("response"===e.type&&"continue"===e.command)return!0;return!1}isResponseForRequestToFetchAllFrames(e){return"response"===e.type&&"stackTrace"===e.command&&e.body?.stackFrames[0]&&this.sequenceNumbersOfRequestsPendingResponses.has(e.request_seq)}isRequestToFetchAllFrames(e){return"request"===e.type&&"stackTrace"===e.command&&(0===e.arguments.startFrame||void 0===e.arguments.startFrame)}}},35962:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugLocationTrackerFactory=void 0;const o=n(86700),s=n(66828),a=n(10053),c=n(42080),l=n(51346);let u=class{constructor(e,t){this.disposableRegistry=t,this.activeTrackers=new WeakMap,this.updatedEmitter=new s.EventEmitter,t.push(e.registerDebugAdapterTrackerFactory("python",this))}createDebugAdapterTracker(e){const t=new l.DebugLocationTracker(e.id);return this.activeTrackers.set(e,t),t.sessionEnded((()=>this.activeTrackers.delete(e)),this,this.disposableRegistry),t.debugLocationUpdated(this.onLocationUpdated,this,this.disposableRegistry),this.onLocationUpdated(),t}get updated(){return this.updatedEmitter.event}getLocation(e){const t=this.activeTrackers.get(e);if(t)return t.debugLocation}onLocationUpdated(){this.updatedEmitter.fire()}};u=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IDebugService)),i(1,(0,o.inject)(c.IDisposableRegistry))],u),t.DebugLocationTrackerFactory=u},3856:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Debugger=void 0,t.Debugger=class{constructor(e,t,n){this.document=e,this.config=t,this.session=n}}},6410:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DebuggerVariables=void 0;const c=n(86700),l=s(n(15948)),u=s(n(52859)),d=n(66828),p=n(94062),h=n(50068),f=n(68650),g=n(10053),m=n(15925),y=n(42080),v=n(58681),b=n(11642),w=n(9959),C=n(66317),S=n(51346),_=new Set(["In","Out","exit","quit"]);let k=class extends S.DebugLocationTracker{constructor(e,t,n,r,i,o,s){super(void 0),this.debugService=e,this.debuggingManager=t,this.configService=n,this.vscNotebook=r,this.varScriptGenerator=i,this.dfScriptGenerator=o,this.kernelProvider=s,this.refreshEventEmitter=new d.EventEmitter,this.lastKnownVariables=[],this.importedGetVariableInfoScriptsIntoKernel=new Set,this.watchedNotebooks=new Map,this.debuggingStarted=!1,this.currentVariablesReference=0,this.currentSeqNumsForVariables=new Set,this.debuggingManager.onDoneDebugging((()=>this.refreshEventEmitter.fire()),this)}get refreshRequired(){return this.refreshEventEmitter.event}get active(){return(void 0!==this.debugService.activeDebugSession||this.activeNotebookIsDebugging())&&this.debuggingStarted}async getVariables(e,t){t&&this.watchKernel(t);const n=t&&this.kernelProvider.getKernelExecution(t),r={executionCount:n?n.executionCount:e.executionCount,pageStartIndex:0,pageResponse:[],totalCount:0,refreshCount:e.refreshCount};if(this.active){const t=e.sortColumn,n=(n,r)=>{const i=n[t]?n[t]:"",o=r[t]?r[t]:"";return e.sortAscending?i.localeCompare(o,void 0,{sensitivity:"base"}):o.localeCompare(i,void 0,{sensitivity:"base"})};this.lastKnownVariables.sort(n);const i=e.startIndex?e.startIndex:0,o=e.pageSize?e.pageSize:100;r.pageStartIndex=i;for(let e=i;e<i+o&&e<this.lastKnownVariables.length;e+=1){const t=this.lastKnownVariables[e].truncated?await this.getFullVariable(this.lastKnownVariables[e]):this.lastKnownVariables[e];this.lastKnownVariables[e]=t,r.pageResponse.push(t)}r.totalCount=this.lastKnownVariables.length}return r}async getMatchingVariable(e,t){if(this.active){const n=this.lastKnownVariables.find((t=>t.name===e));return n&&t?.resourceUri&&".ipynb"===u.extname(t?.resourceUri).toLowerCase()&&(0,w.sendTelemetryEvent)(w.Telemetry.RunByLineVariableHover),n}}async getDataFrameInfo(e,t,n,r){if(!this.active)return e;r&&(e=await this.getFullVariable(e)),t&&this.watchKernel(t);let i=e.name;n&&(i=`${e.name}${n}`);const{cleanupCode:o,initializeCode:s,code:a}=await this.dfScriptGenerator.generateCodeToGetDataFrameInfo({isDebugging:!0,variableName:i}),c=await this.evaluate({code:a,cleanupCode:o,initializeCode:s,frameId:e.frameId}),u=t?.notebook;let d=u?l.basename(u.uri.path):"";return!d&&this.debugLocation?.fileName&&(d=l.basename(this.debugLocation.fileName)),c?{...e,...JSON.parse(c.result),maximumRowChunkSize:100,fileName:d}:e}async getDataFrameRows(e,t,n,r,i){if(n-t>100)throw new Error("Debugger cannot provide more than 100 rows at once");if(!this.debugService.activeDebugSession||void 0===e.columns)return{data:[]};r&&this.watchKernel(r);let o=e.name;i&&(o=`${e.name}${i}`);const{cleanupCode:s,initializeCode:a,code:c}=await this.dfScriptGenerator.generateCodeToGetDataFrameRows({isDebugging:!0,variableName:o,startIndex:t,endIndex:n}),l=await this.evaluate({code:c,cleanupCode:s,initializeCode:a,frameId:e.frameId});return(0,f.parseDataFrame)(JSON.parse(l.result))}onWillReceiveMessage(e){super.onWillReceiveMessage(e),"request"===e.type&&"variables"===e.command&&e.arguments&&this.currentVariablesReference===e.arguments.variablesReference&&this.currentSeqNumsForVariables.add(e.seq)}onDidSendMessage(e){if(super.onDidSendMessage(e),"response"===e.type&&"initialize"===e.command)this.debuggingStarted=!0;else if("event"===e.type&&"stopped"===e.event&&this.activeNotebookIsDebugging())this.handleNotebookVariables(e).ignoreErrors();else if("response"===e.type&&"scopes"===e.command&&e.body&&e.body.scopes){const t=e.body.scopes[0].variablesReference;t!==this.currentVariablesReference&&(this.currentVariablesReference=t,this.currentSeqNumsForVariables.clear())}else if("response"===e.type&&"variables"===e.command&&e.body)this.currentSeqNumsForVariables.has(e.request_seq)&&this.updateVariables(void 0,e),this.monkeyPatchDataViewableVariables(e);else if("event"===e.type&&"terminated"===e.event){this.lastKnownVariables=[],this.topMostFrameId=0,this.debuggingStarted=!1,this.refreshEventEmitter.fire();const e=this.debugService.activeDebugSession?.id;e&&this.importedGetVariableInfoScriptsIntoKernel.delete(e)}}watchKernel(e){const t=e.notebook?.uri.toString();if(t&&!this.watchedNotebooks.has(t)){const n=[];n.push(e.onRestarted(this.resetImport.bind(this,t))),n.push(e.onDisposed((()=>{this.resetImport(t),n.forEach((e=>e.dispose())),this.watchedNotebooks.delete(t)}))),this.watchedNotebooks.set(t,n)}}resetImport(e){this.importedGetVariableInfoScriptsIntoKernel.delete(e)}async evaluate({code:e,cleanupCode:t,frameId:n,initializeCode:r}){if(this.debugService.activeDebugSession){const i={frameId:n=this.topMostFrameId||n,context:"repl",format:{rawString:!0}};(0,b.traceVerbose)(`Evaluating in debugger : ${this.debugService.activeDebugSession.id}: ${e}`);try{r&&await this.debugService.activeDebugSession.customRequest("evaluate",{...i,expression:r});const n=await this.debugService.activeDebugSession.customRequest("evaluate",{...i,expression:e});return n&&"None"!==n.result?n:void(0,b.traceError)(`Cannot evaluate ${e}`)}finally{t&&await this.debugService.activeDebugSession.customRequest("evaluate",{...i,expression:t})}}throw Error("Debugger is not active, cannot evaluate.")}async getFullVariable(e){const{initializeCode:t,code:n,cleanupCode:r}=await this.varScriptGenerator.generateCodeToGetVariableInfo({isDebugging:!0,variableName:e.name}),i=await this.evaluate({code:n,initializeCode:t,cleanupCode:r,frameId:e.frameId});return i&&i.result?{...e,truncated:!1,...JSON.parse(i.result)}:e}monkeyPatchDataViewableVariables(e){e.body.variables.forEach((e=>{e.type&&h.DataViewableTypes.has(e.type)&&(e.__vscodeVariableMenuContext="viewableInDataViewer")}))}updateVariables(e,t){const n=this.configService.getSettings(e).variableExplorerExclude?this.configService.getSettings().variableExplorerExclude?.split(";"):[],r=t.body.variables.filter((e=>!(!(e.name&&e.type&&e.value)||n&&n.includes(e.type)||e.name.startsWith("_")||_.has(e.name)||"NoneType"===e.type)));this.lastKnownVariables=r.map((e=>(0,h.convertDebugProtocolVariableToIJupyterVariable)(e))),this.refreshEventEmitter.fire()}activeNotebookIsDebugging(){const e=this.vscNotebook.activeNotebookEditor;return!!e&&this.debuggingManager.isDebugging(e.notebook)}async handleNotebookVariables(e){const t=this.vscNotebook.activeNotebookEditor?.notebook,n=e.body.threadId;if(t){const e=this.debuggingManager.getDebugSession(t);if(e){const r=await e.customRequest("stackTrace",{threadId:n,startFrame:0,levels:1});if(r&&r.stackFrames[0]){const n=r.stackFrames[0];let i;if(this.debuggingManager.getDebugMode(t)===C.KernelDebugMode.RunByLine){const r=this.debuggingManager.getDebugCell(t);n.source&&r&&n.source.path===r.document.uri.toString()&&(i=await e.customRequest("scopes",{frameId:n.id}))}else{const r=l.basename(t.uri.toString());n.source&&n.source.path&&n.source.path.includes(r)&&(i=await e.customRequest("scopes",{frameId:n.id}))}i&&(i.scopes.forEach((t=>{e.customRequest("variables",{variablesReference:t.variablesReference}).then(v.noop,v.noop)})),this.refreshEventEmitter.fire())}}}}};k=o([(0,c.injectable)(),a(0,(0,c.inject)(C.IJupyterDebugService)),a(0,(0,c.named)(m.Identifiers.MULTIPLEXING_DEBUGSERVICE)),a(1,(0,c.inject)(C.INotebookDebuggingManager)),a(2,(0,c.inject)(y.IConfigurationService)),a(3,(0,c.inject)(g.IVSCodeNotebook)),a(4,(0,c.inject)(y.IVariableScriptGenerator)),a(5,(0,c.inject)(y.IDataFrameScriptGenerator)),a(6,(0,c.inject)(p.IKernelProvider))],k),t.DebuggerVariables=k},4177:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DebuggingManager=void 0;const c=n(86700),l=n(66828),u=n(94062),d=n(10053),p=n(15925),h=n(29444),f=n(83599),g=n(42080),m=n(25251),y=n(58681),v=n(41778),b=n(11642),w=n(56297),C=s(n(15948)),S=n(9959),_=n(50867),k=n(3445),P=n(33648),I=n(46503),E=n(32844),T=n(3856),D=n(40157),x=n(66317),R=n(57566),j=n(34045);let N=class extends D.DebuggingManagerBase{constructor(e,t,n,r,i,o,s,a,c){super(e,t,n,r,i,c),this.configurationService=o,this.platform=s,this.debugService=a,this.notebookToRunByLineController=new Map,this.runByLineCells=new h.ContextKey(p.EditorContexts.RunByLineCells,n),this.runByLineDocuments=new h.ContextKey(p.EditorContexts.RunByLineDocuments,n),this.debugDocuments=new h.ContextKey(p.EditorContexts.DebugDocuments,n)}activate(){super.activate(),this.disposables.push(l.debug.registerDebugAdapterDescriptorFactory(k.pythonKernelDebugAdapter,{createDebugAdapterDescriptor:async e=>this.createDebugAdapterDescriptor(e)}))}getDebugMode(e){return this.notebookToRunByLineController.get(e)?.getMode()}onDidStopDebugging(e){super.onDidStopDebugging(e),this.notebookToRunByLineController.delete(e),this.updateRunByLineContextKeys(),this.updateDebugContextKey()}updateRunByLineContextKeys(){const e=[],t=[];this.notebookToRunByLineController.forEach((n=>{e.push(n.debugCell.document.uri),t.push(n.debugCell.notebook.uri)})),this.runByLineCells.set(e).ignoreErrors(),this.runByLineDocuments.set(t).ignoreErrors()}updateDebugContextKey(){const e=new w.ResourceSet;this.notebookToDebugAdapter.forEach(((t,n)=>e.add(n.uri))),this.notebookInProgress.forEach((t=>e.add(t.uri))),this.debugDocuments.set(Array.from(e.values())).ignoreErrors()}async tryToStartDebugging(e,t,n=!1){if((0,b.traceInfo)(`Starting debugging with mode ${e}`),!n){const e=await this.checkIpykernelAndPrompt(t);if(e!==R.IpykernelCheckResult.Ok)return void(0,b.traceInfo)(`Ipykernel check failed: ${R.IpykernelCheckResult[e]}`)}e!==x.KernelDebugMode.RunByLine&&e!==x.KernelDebugMode.Cell||await this.startDebuggingCell(e,t)}runByLineNext(e){const t=this.notebookToRunByLineController.get(e.notebook);t&&t.debugCell.document.uri.toString()===e.document.uri.toString()&&t.continue()}runByLineStop(e){const t=this.notebookToRunByLineController.get(e.notebook);t&&((0,S.sendTelemetryEvent)(k.DebuggingTelemetry.endedSession,void 0,{reason:"withKeybinding"}),t.stop())}async startDebuggingCell(e,t){const n=t.notebook,r=this.configurationService.getSettings(n.uri),i={type:k.pythonKernelDebugAdapter,name:C.basename(n.uri.toString()),request:"attach",justMyCode:e!==x.KernelDebugMode.Cell||r.debugJustMyCode,__mode:e,__cellIndex:t.index,__notebookUri:n.uri.toString()},o=e===x.KernelDebugMode.RunByLine?{suppressDebugStatusbar:!0,suppressDebugToolbar:!0,suppressDebugView:!0,suppressSaveBeforeStart:!0}:{suppressSaveBeforeStart:!0};return this.startDebuggingConfig(i,o)}async createDebugAdapterDescriptor(e){const t=e.configuration;(0,R.assertIsDebugConfig)(t);const n=t.__notebookUri,r=this.vscNotebook.notebookDocuments.find((e=>e.uri.toString()===n));if(r)if(this.notebookInProgress.has(r))(0,b.traceInfo)("Cannot start debugging. Already debugging this notebook");else if(this.isDebugging(r))(0,b.traceInfo)("Cannot start debugging. Already debugging this notebook document.");else{this.notebookToDebugger.set(r,new T.Debugger(r,t,e));try{return this.notebookInProgress.add(r),this.updateDebugContextKey(),await this.doCreateDebugAdapterDescriptor(t,e,r)}finally{this.notebookInProgress.delete(r),this.updateDebugContextKey()}}else(0,b.traceInfo)(`Cannot start debugging. Notebook ${n} not found.`)}async doCreateDebugAdapterDescriptor(e,t,n){const r=await this.ensureKernelIsRunning(n);if(r?.session){const i=new j.KernelDebugAdapter(t,n,r.session,r,this.platform,this.debugService);if(e.__mode===x.KernelDebugMode.RunByLine&&"number"==typeof e.__cellIndex){const t=n.cellAt(e.__cellIndex),o=new E.RunByLineController(i,t,this.commandManager,this.kernelProvider.getKernelExecution(r),this.configurationService);i.addDebuggingDelegates([o,new I.RestartController(x.KernelDebugMode.RunByLine,i,t,this.serviceContainer)]),this.notebookToRunByLineController.set(n,o),this.updateRunByLineContextKeys()}else if(e.__mode===x.KernelDebugMode.Cell&&"number"==typeof e.__cellIndex){const t=n.cellAt(e.__cellIndex),o=new P.DebugCellController(i,t,this.kernelProvider.getKernelExecution(r),this.commandManager);i.addDebuggingDelegates([o,new I.RestartController(x.KernelDebugMode.Cell,i,t,this.serviceContainer)])}return this.trackDebugAdapter(n,i),this.updateDebugContextKey(),new l.DebugAdapterInlineImplementation(i)}this.appShell.showInformationMessage(m.DataScience.kernelWasNotStarted).then(y.noop,y.noop)}};N=o([(0,c.injectable)(),a(0,(0,c.inject)(u.IKernelProvider)),a(1,(0,c.inject)(_.IControllerRegistration)),a(2,(0,c.inject)(d.ICommandManager)),a(3,(0,c.inject)(d.IApplicationShell)),a(4,(0,c.inject)(d.IVSCodeNotebook)),a(5,(0,c.inject)(g.IConfigurationService)),a(6,(0,c.inject)(f.IPlatformService)),a(7,(0,c.inject)(d.IDebugService)),a(8,(0,c.inject)(v.IServiceContainer))],N),t.DebuggingManager=N},40157:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebuggingManagerBase=void 0;const r=n(66828),i=n(42080),o=n(25251),s=n(58681),a=n(11642),c=n(9959),l=n(3445),u=n(57566),d=n(46799),p=n(88960);t.DebuggingManagerBase=class{constructor(e,t,n,i,o,s){this.kernelProvider=e,this.controllerRegistration=t,this.commandManager=n,this.appShell=i,this.vscNotebook=o,this.serviceContainer=s,this.notebookToDebugger=new Map,this.notebookToDebugAdapter=new Map,this.notebookInProgress=new Set,this.disposables=[],this._doneDebugging=new r.EventEmitter}activate(){this.disposables.push(r.debug.onDidTerminateDebugSession(this.endSession.bind(this)),r.workspace.onDidCloseNotebookDocument((async e=>{const t=this.notebookToDebugger.get(e);t&&(await r.debug.stopDebugging(t.session),this.onDidStopDebugging(e))})))}getDebugCell(e){return this.notebookToDebugAdapter.get(e)?.debugCell}get onDoneDebugging(){return this._doneDebugging.event}dispose(){this.disposables.forEach((e=>e.dispose()))}isDebugging(e){return this.notebookToDebugger.has(e)}getDebugSession(e){const t=this.notebookToDebugger.get(e);if(t)return t.session}getDebugAdapter(e){return this.notebookToDebugAdapter.get(e)}onDidStopDebugging(e){}async startDebuggingConfig(e,t){(0,a.traceInfoIfCI)(`Attempting to start debugging with config ${JSON.stringify(e)}`);try{await r.debug.startDebugging(void 0,e,t)}catch(e){(0,a.traceError)(`Can't start debugging (${e})`),this.appShell.showErrorMessage(o.DataScience.cantStartDebugging).then(s.noop,s.noop)}}trackDebugAdapter(e,t){this.notebookToDebugAdapter.set(e,t),this.disposables.push(t.onDidEndSession(this.endSession.bind(this)))}async endSession(e){(0,a.traceInfo)(`Ending debug session ${e.id}`),this._doneDebugging.fire();for(const[t,n]of this.notebookToDebugger.entries())if(n&&e.id===n.session.id){this.notebookToDebugger.delete(t),this.notebookToDebugAdapter.delete(t),this.onDidStopDebugging(t);break}}getDebuggerByUri(e){for(const[t,n]of this.notebookToDebugger.entries())if(e===t)return n}async ensureKernelIsRunning(e){"Stable"===this.serviceContainer.get(i.IFeaturesManager).features.kernelPickerType&&await this.controllerRegistration.loaded;const t=this.controllerRegistration.getSelected(e);let n=this.kernelProvider.get(e);return t&&(!n||n&&"unknown"===n.status)&&(n=await d.KernelConnector.connectToNotebookKernel(t.connection,this.serviceContainer,{notebook:e,controller:t.controller,resource:e.uri},new p.DisplayOptions(!1),this.disposables,"jupyterExtension")),n}findEditorForCell(e){const t=e.notebook.uri.toString();return r.window.visibleNotebookEditors.find((e=>e.notebook.uri.toString()===t))}async checkIpykernelAndPrompt(e,t=!0){const n=this.findEditorForCell(e);if(!n)return this.appShell.showErrorMessage(o.DataScience.noNotebookToDebug).then(s.noop,s.noop),u.IpykernelCheckResult.Unknown;const r=await this.checkForIpykernel6(n.notebook);switch(r){case u.IpykernelCheckResult.NotInstalled:break;case u.IpykernelCheckResult.Outdated:case u.IpykernelCheckResult.Unknown:this.promptInstallIpykernel6().then(s.noop,s.noop);break;case u.IpykernelCheckResult.ControllerNotSelected:if(t)return await this.commandManager.executeCommand("notebook.selectKernel",{notebookEditor:n}),await this.checkIpykernelAndPrompt(e,!1)}return r}async checkForIpykernel6(e){try{let t=this.kernelProvider.get(e);if(!t){const n=this.controllerRegistration.getSelected(e);if(!n)return u.IpykernelCheckResult.ControllerNotSelected;t=this.kernelProvider.getOrCreate(e,{metadata:n.connection,controller:n?.controller,resourceUri:e.uri})}const n=this.kernelProvider.getKernelExecution(t),r=await(0,u.isUsingIpykernel6OrLater)(n);return(0,c.sendTelemetryEvent)(l.DebuggingTelemetry.ipykernel6Status,void 0,{status:r===u.IpykernelCheckResult.Ok?"installed":"notInstalled"}),r}catch(e){(0,a.traceError)("Debugging: Could not check for ipykernel 6",e)}return u.IpykernelCheckResult.Unknown}async promptInstallIpykernel6(){await this.appShell.showInformationMessage(o.DataScience.needIpykernel6,{modal:!0},o.DataScience.setup)===o.DataScience.setup?((0,c.sendTelemetryEvent)(l.DebuggingTelemetry.clickedOnSetup),this.appShell.openUrl("https://github.com/microsoft/vscode-jupyter/wiki/Setting-Up-Run-by-Line-and-Debugging-for-Notebooks")):(0,c.sendTelemetryEvent)(l.DebuggingTelemetry.closedModal)}}},66317:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.IDebugLocationTracker=t.IDebugLocationTrackerFactory=t.KernelDebugMode=t.INotebookDebuggingManager=t.IJupyterDebugService=void 0,t.IJupyterDebugService=Symbol("IJupyterDebugService"),t.INotebookDebuggingManager=Symbol("INotebookDebuggingManager"),(n=t.KernelDebugMode||(t.KernelDebugMode={}))[n.RunByLine=0]="RunByLine",n[n.Cell=1]="Cell",n[n.InteractiveWindow=2]="InteractiveWindow",t.IDebugLocationTrackerFactory=Symbol("IDebugLocationTrackerFactory"),t.IDebugLocationTracker=Symbol("IDebugLocationTracker")},57566:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDebugEventMsg=t.cellDebugSetup=t.shortNameMatchesLongName=t.isShortNamePath=t.getMessageSourceAndHookIt=t.assertIsInteractiveWindowDebugConfig=t.assertIsDebugConfig=t.isUsingIpykernel6OrLater=t.IpykernelCheckResult=void 0;const r=n(66317);var i;function o(e){const t=e;if(void 0===t.__notebookUri||void 0===t.__mode||(t.__mode===r.KernelDebugMode.Cell||t.__mode===r.KernelDebugMode.InteractiveWindow||t.__mode===r.KernelDebugMode.RunByLine)&&void 0===t.__cellIndex)throw new Error("Invalid launch configuration")}!function(e){e[e.Unknown=0]="Unknown",e[e.Ok=1]="Ok",e[e.Outdated=2]="Outdated",e[e.NotInstalled=3]="NotInstalled",e[e.ControllerNotSelected=4]="ControllerNotSelected"}(i=t.IpykernelCheckResult||(t.IpykernelCheckResult={})),t.isUsingIpykernel6OrLater=async function(e){const t=await e.executeHidden("import builtins\nimport ipykernel\nbuiltins.print(ipykernel.__version__)");if(t[0].text){const e=t[0].text.toString().split(".");return Number(e[0])>=6?i.Ok:i.Outdated}return i.Unknown},t.assertIsDebugConfig=o,t.assertIsInteractiveWindowDebugConfig=function(e){if(o(e),e.__mode!==r.KernelDebugMode.InteractiveWindow)throw new Error("Invalid launch configuration")},t.getMessageSourceAndHookIt=function(e,t){switch(e.type){case"event":const n=e;switch(n.event){case"output":case"loadedSource":t(n.body);break;case"breakpoint":t(n.body.breakpoint)}break;case"request":const r=e;switch(r.command){case"setBreakpoints":const e=r.arguments,n=e.breakpoints;if(n&&n.length){const r=n[0].line;n.forEach((n=>{t(n,{...e.source})}));const i={source:e.source,line:r};t(i),e.source=i.source}break;case"breakpointLocations":case"source":case"gotoTargets":t(r.arguments)}break;case"response":const i=e;if(i.success&&i.body)switch(i.command){case"stackTrace":i.body.stackFrames.forEach((e=>{t(e)}));break;case"loadedSources":i.body.sources.forEach((e=>{const n={source:e};t(n),e.path=n.source.path}));break;case"scopes":i.body.scopes.forEach((e=>{t(e)}));break;case"setFunctionBreakpoints":case"setBreakpoints":i.body.breakpoints.forEach((e=>{t(e)}))}}},t.isShortNamePath=function(e){return/~\d+\\/.test(e)},t.shortNameMatchesLongName=function(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/~\d+\\\\/g,"[^\\\\]+\\\\"),"i").test(t)},t.cellDebugSetup=async function(e,t){await e.executeHidden("import debugpy\ndebugpy.debug_this_thread()"),await t.dumpAllCells()},t.isDebugEventMsg=function(e){return!!e.header&&"debug_event"===e.header.msg_type}},34045:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelDebugAdapter=void 0;const s=n(11642),a=o(n(15948)),c=n(79626);class l extends c.KernelDebugAdapterBase{constructor(){super(...arguments),this.cellToFile=new Map}async dumpCell(e){const t=this.notebookDocument.cellAt(e);try{const e=await this.session.customRequest("dumpCell",{code:t.document.getText().replace(/\r\n/g,"\n")}),n=a.normalize(e.sourcePath);this.fileToCell.set(n,t.document.uri),this.cellToFile.set(t.document.uri.toString(),n)}catch(e){(0,s.traceError)(e)}}translateRealLocationToDebuggerLocation(e){const t=e.source;if(t&&t.path){const e=this.cellToFile.get(t.path);e&&(t.path=e)}}getDumpFilesForDeletion(){return Array.from(this.cellToFile.values())}}t.KernelDebugAdapter=l},79626:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelDebugAdapterBase=void 0;const s=n(66828),a=n(98729),c=n(58681),l=n(11642),u=o(n(15948)),d=n(9959),p=n(3445),h=n(83332),f=n(57566);t.KernelDebugAdapterBase=class{constructor(e,t,n,r,i,o){this.session=e,this.notebookDocument=t,this.jupyterSession=n,this.kernel=r,this.platformService=i,this.debugService=o,this.fileToCell=new Map,this.sendMessage=new s.EventEmitter,this.endSession=new s.EventEmitter,this.disposables=[],this.delegates=[],this.onDidSendMessage=this.sendMessage.event,this.onDidEndSession=this.endSession.event,this.disconnected=!1,(0,l.traceInfoIfCI)("Creating kernel debug adapter for debugging notebooks");const a=this.session.configuration;(0,f.assertIsDebugConfig)(a),this.configuration=a,this.debugCell=t.cellAt(a.__cellIndex),this.addDebuggingDelegates([new h.ResetKernelController(this)]),this.jupyterSession.kernel?.iopubMessage.connect(this.onIOPubMessage,this),this.disposables.push(new s.Disposable((()=>this.jupyterSession.kernel?.iopubMessage.disconnect(this.onIOPubMessage,this)))),this.kernel&&(this.kernel.addHook("willRestart",(()=>this.disconnect()),this,this.disposables),this.kernel.addHook("interruptCompleted",(()=>this.disconnect()),this,this.disposables),this.disposables.push(this.kernel.onDisposed((()=>{this.disconnected||(s.debug.stopDebugging(this.session).then(c.noop,c.noop),this.disconnect().ignoreErrors(),(0,d.sendTelemetryEvent)(p.DebuggingTelemetry.endedSession,void 0,{reason:"onKernelDisposed"}))})))),this.disposables.push(s.notebooks.onDidChangeNotebookCellExecutionState((e=>{this.configuration.__cellIndex!==e.cell.index||e.state!==s.NotebookCellExecutionState.Idle||this.disconnected||((0,d.sendTelemetryEvent)(p.DebuggingTelemetry.endedSession,void 0,{reason:"normally"}),this.disconnect().ignoreErrors())}),this,this.disposables)),this.disposables.push(s.workspace.onDidChangeNotebookDocument((e=>{e.contentChanges.forEach((e=>{e.removedCells.forEach((e=>{e===this.debugCell&&this.disconnect().ignoreErrors()}))}))}),this,this.disposables)),this.disposables.push(this.debugService.onDidTerminateDebugSession((e=>{e===this.session&&this.disconnect().ignoreErrors()})))}addDebuggingDelegates(e){this.delegates.push(...e)}trace(e,t){(0,l.traceVerbose)(`[Debug] ${e}: ${t}`)}async onIOPubMessage(e,t){if((0,l.traceInfoIfCI)(`Debug IO Pub message: ${JSON.stringify(t)}`),(0,f.isDebugEventMsg)(t)){this.trace("event",JSON.stringify(t));for(const e of this.delegates??[])if(await(e?.willSendEvent?.(t.content)))return;this.sendMessage.fire(t.content)}}handleMessage(e){this.handleClientMessageAsync(e).ignoreErrors()}async handleClientMessageAsync(e){try{if((0,l.traceInfoIfCI)(`KernelDebugAdapter::handleMessage ${JSON.stringify(e,void 0," ")}`),"request"===e.type&&"setBreakpoints"===e.command){const t=e.arguments;if(t.source&&t.source.path&&0===t.source.path.indexOf("vscode-notebook-cell:")){const e=this.notebookDocument.getCells().find((e=>e.document.uri.toString()===t.source.path));e&&await this.dumpCell(e.index)}}if("request"===e.type)for(const t of this.delegates??[]){const n=await(t?.willSendRequest?.(e));if(n)return this.trace("response",JSON.stringify(n)),void this.sendMessage.fire(n)}await this.sendMessageToJupyterSession(e)}catch(e){(0,l.traceError)(`KernelDebugAdapter::handleMessage failure: ${e}`)}}getConfiguration(){return this.configuration}stepIn(e){return this.session.customRequest("stepIn",{threadId:e})}async debugInfo(){return await this.session.customRequest("debugInfo")}continueDirect(e){this.jupyterSession.requestDebug({seq:0,type:"request",command:"continue",arguments:{threadId:e}})}async disconnect(){if(!this.disconnected){if(this.disconnected=!0,this.debugService.activeDebugSession===this.session)try{await Promise.all([this.deleteDumpedFiles().catch((e=>(0,l.traceWarning)("Error deleting temporary debug files.",e))),this.session.customRequest("disconnect",{restart:!1})])}catch(e){(0,l.traceError)("Failed to disconnect debug session",e)}this.endSession.fire(this.session)}}dispose(){this.disposables.forEach((e=>e.dispose()))}stackTrace(e){return this.session.customRequest("stackTrace",e)}setBreakpoints(e){return this.session.customRequest("setBreakpoints",e)}async dumpAllCells(){await Promise.all(this.notebookDocument.getCells().map((async e=>{e.kind===s.NotebookCellKind.Code&&await this.dumpCell(e.index)})))}lookupCellByLongName(e){if(this.platformService.isWindows){e=u.normalize(e);for(let[t,n]of this.fileToCell.entries())if((0,f.isShortNamePath)(t)&&(0,f.shortNameMatchesLongName)(t,e))return n}}async sendMessageToJupyterSession(e){if(this.jupyterSession.disposed||"dead"===this.jupyterSession.status)(0,l.traceInfo)(`Skipping sending message ${e.type} because session is disposed`);else if(this.trace("to kernel",JSON.stringify(e)),"request"===e.type){const t=await this.sendRequestToJupyterSession(e);t&&this.sendMessage.fire(t)}else{if("response"===e.type){(0,f.getMessageSourceAndHookIt)(e,this.translateRealLocationToDebuggerLocation.bind(this));const t=e;return this.jupyterSession.requestDebug({seq:t.seq,type:"request",command:t.command},!0).done}(0,l.traceError)(`Unknown message type to send ${e.type}`)}}async sendRequestToJupyterSession(e){(0,f.getMessageSourceAndHookIt)(e,this.translateRealLocationToDebuggerLocation.bind(this)),this.trace("to kernel, mapped",JSON.stringify(e));const t=e,n=this.jupyterSession.requestDebug({seq:t.seq,type:"request",command:t.command,arguments:t.arguments},!0),r=(await n.done).content;(0,f.getMessageSourceAndHookIt)(r,this.translateDebuggerLocationToRealLocation.bind(this));for(const e of this.delegates??[])await(e?.willSendResponse?.(r));return this.trace("response",JSON.stringify(r)),r}translateDebuggerLocationToRealLocation(e,t){if((t=e?.source??t)&&t.path){const e=this.fileToCell.get(t.path)??this.lookupCellByLongName(t.path);e&&(t.name=u.basename(e.path),t.path=e.toString())}}async deleteDumpedFiles(){const e=this.getDumpFilesForDeletion();if(this.jupyterSession&&e.length){const t=`import os as _VSCODE_os\n_VSCODE_fileList = [${e.map((e=>'"'+e.replace(/\\/g,"\\\\")+'"')).join(",")}]\nfor file in _VSCODE_fileList:\n    try:\n        _VSCODE_os.remove(file)\n    except:\n        pass\ndel _VSCODE_fileList\ndel _VSCODE_os`;await(0,a.executeSilently)(this.jupyterSession,t,{traceErrors:!0,traceErrorsMessage:"Error deleting temporary debugging files"})}}}},40371:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MultiplexingDebugService=void 0;const o=n(86700),s=n(66828),a=n(66317),c=n(10053),l=n(15925),u=n(42080),d=n(58681);let p=class{constructor(e,t,n,r){this.commandManager=t,this.vscodeDebugService=n,this.jupyterDebugService=r,this.sessionChangedEvent=new s.EventEmitter,this.sessionStartedEvent=new s.EventEmitter,this.sessionTerminatedEvent=new s.EventEmitter,this.sessionCustomEvent=new s.EventEmitter,e.push(n.onDidTerminateDebugSession(this.endedDebugSession.bind(this))),e.push(n.onDidStartDebugSession(this.startedDebugSession.bind(this))),e.push(n.onDidChangeActiveDebugSession(this.changedDebugSession.bind(this))),e.push(n.onDidReceiveDebugSessionCustomEvent(this.gotCustomEvent.bind(this))),r&&(e.push(r.onDidTerminateDebugSession(this.endedDebugSession.bind(this))),e.push(r.onDidStartDebugSession(this.startedDebugSession.bind(this))),e.push(r.onDidChangeActiveDebugSession(this.changedDebugSession.bind(this))),e.push(r.onDidReceiveDebugSessionCustomEvent(this.gotCustomEvent.bind(this))))}get activeDebugSession(){return this.activeService.activeDebugSession}get activeDebugConsole(){return this.activeService.activeDebugConsole}get breakpoints(){return this.activeService.breakpoints}get onDidChangeActiveDebugSession(){return this.sessionChangedEvent.event}get onDidStartDebugSession(){return this.sessionStartedEvent.event}get onDidReceiveDebugSessionCustomEvent(){return this.sessionCustomEvent.event}get onDidTerminateDebugSession(){return this.sessionTerminatedEvent.event}get onDidChangeBreakpoints(){return this.activeService.onDidChangeBreakpoints}get onBreakpointHit(){if(!this.jupyterDebugService)throw new Error("No jupyter debugger service");return this.jupyterDebugService.onBreakpointHit}startRunByLine(e){if(this.lastStartedService=this.jupyterDebugService,!this.jupyterDebugService)throw new Error("No jupyter debugger service");return this.jupyterDebugService.startRunByLine(e)}registerDebugConfigurationProvider(e,t){const n=this.vscodeDebugService.registerDebugConfigurationProvider(e,t);if(this.jupyterDebugService){const r=this.jupyterDebugService.registerDebugConfigurationProvider(e,t);return this.combineDisposables(n,r)}return n}registerDebugAdapterTrackerFactory(e,t){const n=this.vscodeDebugService.registerDebugAdapterTrackerFactory(e,t);if(this.jupyterDebugService){const r=this.jupyterDebugService.registerDebugAdapterTrackerFactory(e,t);return this.combineDisposables(n,r)}return n}startDebugging(e,t,n){return this.lastStartedService=this.vscodeDebugService,this.vscodeDebugService.startDebugging(e,t,n)}addBreakpoints(e){return this.activeService.addBreakpoints(e)}removeBreakpoints(e){return this.activeService.removeBreakpoints(e)}getStack(){if(!this.jupyterDebugService)throw new Error("No jupyter debugger service");if(this.lastStartedService===this.jupyterDebugService)return this.jupyterDebugService.getStack();throw new Error("Requesting jupyter specific stack when not debugging.")}step(){if(!this.jupyterDebugService)throw new Error("No jupyter debugger service");if(this.lastStartedService===this.jupyterDebugService)return this.jupyterDebugService.step();throw new Error("Requesting jupyter specific step when not debugging.")}continue(){if(!this.jupyterDebugService)throw new Error("No jupyter debugger service");if(this.lastStartedService===this.jupyterDebugService)return this.jupyterDebugService.continue();throw new Error("Requesting jupyter specific step when not debugging.")}requestVariables(){if(!this.jupyterDebugService)throw new Error("No jupyter debugger service");if(this.lastStartedService===this.jupyterDebugService)return this.jupyterDebugService.requestVariables();throw new Error("Requesting jupyter specific variables when not debugging.")}stop(){this.jupyterDebugService&&this.lastStartedService===this.jupyterDebugService?this.jupyterDebugService.stop():this.commandManager.executeCommand("workbench.action.debug.stop").then(d.noop,d.noop)}get activeService(){return this.lastStartedService?this.lastStartedService:this.vscodeDebugService}combineDisposables(e,t){return{dispose:()=>{e.dispose(),t.dispose()}}}endedDebugSession(e){this.sessionTerminatedEvent.fire(e),this.lastStartedService=void 0}startedDebugSession(e){this.sessionStartedEvent.fire(e)}changedDebugSession(e){this.sessionChangedEvent.fire(e)}gotCustomEvent(e){this.sessionCustomEvent.fire(e)}};p=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IDisposableRegistry)),i(1,(0,o.inject)(c.ICommandManager)),i(2,(0,o.inject)(c.IDebugService)),i(3,(0,o.optional)()),i(3,(0,o.inject)(a.IJupyterDebugService)),i(3,(0,o.named)(l.Identifiers.RUN_BY_LINE_DEBUGSERVICE))],p),t.MultiplexingDebugService=p},13057:function(e,t,n){"use strict";var r=n(48764).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},c=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExportBase=void 0;const l=n(86700),u=a(n(15948)),d=n(88960),p=n(98729),h=n(94062),f=n(86563),g=n(83599),m=n(38124),y=n(62440),v=n(11642),b=n(74064),w=n(40453);let C=class{constructor(e,t,n,r){this.kernelProvider=e,this.fs=t,this.filePicker=n,this.exportUtil=r}async export(e,t,n,r){}async executeCommand(e,t,n,i,o){const s=this.kernelProvider.get(e);if(s&&(s.session||await s.start(new d.DisplayOptions(!1)),s.session)&&s.session.isServerSession()){const i=s.session;let o=await this.exportUtil.getContent(e),a="";switch(n){case y.ExportFormat.html:a=".html";break;case y.ExportFormat.pdf:a=".pdf";break;case y.ExportFormat.python:a=".py"}await s.session.invokeWithFileSynced(o,(async e=>{const o=`${await this.getCWD(s)}/${e.filePath}`,c=await i.createTempfile(a),l=await(0,p.executeSilently)(i,`!jupyter nbconvert ${o} --to ${n} --output ${u.basename(c)}`),d=this.parseStreamOutput(l);if(this.isExportFailed(d))throw new Error(d||`Failed to export to ${n}`);if(d&&(0,v.traceLog)(d),n===y.ExportFormat.pdf){const e=await i.getContents(c,"base64"),n=this.b64toBlob(e.content,"application/pdf"),o=await n.arrayBuffer();await this.fs.writeFile(t,r.from(o)),await i.deleteTempfile(c)}else{const e=await i.getContents(c,"text");await this.fs.writeFile(t,e.content),await i.deleteTempfile(c)}}))}}b64toBlob(e,t){t=t||"",e=(e=e.replace(/^[^,]+,/,"")).replace(/\s/g,"");const n=atob(e);let r=[];for(let e=0;e<n.length;e+=512){const t=n.slice(e,e+512);let i=new Array(t.length);for(let e=0;e<t.length;e++)i[e]=t.charCodeAt(e);const o=new Uint8Array(i);r.push(o)}return new Blob(r,{type:t})}isExportFailed(e){return!e||/Traceback \(most recent call last\)/g.exec(e)}parseStreamOutput(e){if(0===e.length)return;const t=e[0];return"stdout"===t.name||"stream"===t.output_type?(0,f.concatMultilineString)(t.text).trim():void 0}async getCWD(e){const t=await(0,p.executeSilently)(e.session,"import os;os.getcwd();");if(0===t.length)return;const n=t[0];return"execute_result"===n.output_type?n.data["text/plain"]:void 0}};s([(0,b.reportAction)(w.ReportableAction.PerformingExport)],C.prototype,"executeCommand",null),C=s([(0,l.injectable)(),c(0,(0,l.inject)(h.IKernelProvider)),c(1,(0,l.inject)(g.IFileSystem)),c(2,(0,l.inject)(y.IExportDialog)),c(3,(0,l.inject)(m.ExportUtilBase))],C),t.ExportBase=C},982:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExportDialog=t.PythonExtensions=t.HTMLExtensions=t.PDFExtensions=void 0;const c=n(86700),l=s(n(15948)),u=n(66828),d=n(10053),p=s(n(25251)),h=n(62440),f=n(42080);t.PDFExtensions={PDF:["pdf"]},t.HTMLExtensions={HTML:["html","htm"]},t.PythonExtensions={Python:["py"]};let g=class{constructor(e,t,n){this.applicationShell=e,this.workspaceService=t,this.isWebExtension=n}async showDialog(e,n,r){let i,o={};switch(e){case h.ExportFormat.python:o=t.PythonExtensions,i=".py";break;case h.ExportFormat.pdf:i=".pdf",o=t.PDFExtensions;break;case h.ExportFormat.html:i=".html",o=t.HTMLExtensions;break;case h.ExportFormat.ipynb:i=".ipynb",o[p.DataScience.exportDialogFilter]=["ipynb"];break;default:return}const s=r||!n?r||"":`${l.basename(n.path,l.extname(n.path))}${i}`,a={defaultUri:await this.getDefaultUri(n,s),saveLabel:p.DataScience.exportButtonTitle,filters:o};return this.applicationShell.showSaveDialog(a)}async getDefaultUri(e,t){if(e&&"untitled"===e.scheme&&this.isWebExtension)return;if(!e||"file"===e.scheme||"untitled"===e.scheme||"vscode-interactive"===e.scheme)return u.Uri.file(l.join(await this.workspaceService.computeWorkingDirectory(e),t));const n=l.join(l.dirname(e.path),t);return u.Uri.parse(`${e.scheme}://${n}`).with({authority:e.authority})}};g=o([(0,c.injectable)(),a(0,(0,c.inject)(d.IApplicationShell)),a(1,(0,c.inject)(d.IWorkspaceService)),a(2,(0,c.inject)(f.IsWebExtension))],g),t.ExportDialog=g},9255:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExportFileOpener=void 0;const c=n(86700),l=n(66828),u=n(9959),d=n(10053),p=n(15925),h=n(83599),f=n(42080),g=s(n(25251)),m=n(58681),y=n(62440);let v=class{constructor(e,t,n,r){this.documentManager=e,this.fs=t,this.applicationShell=n,this.browserService=r}async openFile(e,t,n=!1){if(e===y.ExportFormat.python)await this.openPythonFile(t,n),(0,u.sendTelemetryEvent)(p.Telemetry.ExportNotebookAs,void 0,{format:e,successful:!0,opened:!0});else{const r=await this.askOpenFile(t,n);(0,u.sendTelemetryEvent)(p.Telemetry.ExportNotebookAs,void 0,{format:e,successful:!0,opened:r})}}async openPythonFile(e,t){let n;if(t)n=await this.documentManager.showTextDocument(e);else{const t=await this.fs.readFile(e);await this.fs.delete(e);const r=await this.documentManager.openTextDocument({language:p.PYTHON_LANGUAGE,content:t});n=await this.documentManager.showTextDocument(r)}await n.edit((e=>{e.insert(new l.Position(n.document.lineCount,0),"\n")}))}async askOpenFile(e,t){const n=g.DataScience.openExportFileYes,r=[n,g.DataScience.openExportFileNo];return await this.applicationShell.showInformationMessage(g.DataScience.openExportedFileMessage,...r).then((e=>e))===n&&(t?this.documentManager.showTextDocument(e).then(m.noop,m.noop):this.browserService.launch(e.toString()),!0)}};v=o([(0,c.injectable)(),a(0,(0,c.inject)(d.IDocumentManager)),a(1,(0,c.inject)(h.IFileSystem)),a(2,(0,c.inject)(d.IApplicationShell)),a(3,(0,c.inject)(f.IBrowserService))],v),t.ExportFileOpener=v},93385:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExportToHTML=void 0;const o=n(86700),s=n(62440);let a=class{constructor(e){this.exportBase=e}async export(e,t,n,r){await this.exportBase.executeCommand(e,t,s.ExportFormat.html,n,r)}};a=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IExportBase))],a),t.ExportToHTML=a},33628:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExportToPDF=void 0;const o=n(86700),s=n(62440);let a=class{constructor(e){this.exportBase=e}async export(e,t,n,r){await this.exportBase.executeCommand(e,t,s.ExportFormat.pdf,n,r)}};a=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IExportBase))],a),t.ExportToPDF=a},18661:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExportToPython=void 0;const o=n(86700),s=n(62440);let a=class{constructor(e){this.exportBase=e}async export(e,t,n,r){await this.exportBase.executeCommand(e,t,s.ExportFormat.python,n,r)}};a=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IExportBase))],a),t.ExportToPython=a},87354:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExportToPythonPlain=void 0;const o=n(86700),s=n(66828),a=n(83599),c=n(42080),l=n(86563);let u=class{constructor(e,t,n){this.fs=e,this.configuration=t,this.platform=n}async writeFile(e,t){await this.fs.writeFile(e,t)}getEOL(){return this.platform.isWindows?"\r\n":"\n"}async export(e,t,n){if(n.isCancellationRequested)return;const r=this.exportDocument(e);await this.writeFile(t,r)}exportDocument(e){return e.getCells().filter((e=>!e.metadata.isInteractiveWindowMessageCell)).reduce(((e,t)=>e+this.exportCell(t)),"")}exportCell(e){if(e.document.lineCount){const t=this.cellMarker(e),n=this.getEOL();switch(e.kind){case s.NotebookCellKind.Code:return`${t}${n}${this.exportCodeCell(e)}${n}${n}`;case s.NotebookCellKind.Markup:return`${t} [markdown]${n}${this.exportMarkdownCell(e)}${n}${n}`}}return""}exportCodeCell(e){let t=e.document.getText().splitLines({trim:!1,removeEmptyEntries:!1});const n="commentMagics"===this.configuration.getSettings(e.notebook.uri).pythonExportMethod;return(0,l.appendLineFeed)(t,this.getEOL(),n?d:void 0).join("")}exportMarkdownCell(e){let t=e.document.getText().splitLines({trim:!1,removeEmptyEntries:!1});return(0,l.appendLineFeed)(t,this.getEOL(),p).join("")}cellMarker(e){const t=this.configuration.getSettings(e.notebook.uri);return e.metadata.interactiveWindowCellMarker??t.defaultCellMarker}};function d(e){return/^\s*!/.test(e)||/^\s*%/.test(e)?`# ${e}`:e}function p(e){return`# ${e}`}u=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IFileSystem)),i(1,(0,o.inject)(c.IConfigurationService)),i(2,(0,o.inject)(a.IPlatformService))],u),t.ExportToPythonPlain=u},38124:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExportUtilBase=void 0;const o=n(86700),s=n(66828),a=n(42080),c=n(62440);let l=class{constructor(e,t){this.extensions=e,this.filePicker=t}async getContent(e){const t=this.extensions.getExtension("vscode.ipynb");if(!t)throw new Error("Unable to export notebook as the built-in vscode.ipynb extension is currently unavailable.");t.isActive||await t.activate();const n=e.getCells().map((e=>{const t=new s.NotebookCellData(e.kind,e.document.getText(),e.document.languageId);return t.metadata=e.metadata,t.mime=e.mime,t.outputs=[...e.outputs],t})),r=new s.NotebookData(n);return r.metadata=e.metadata,t.exports.exportNotebook(r)}async getTargetFile(e,t,n){return await this.filePicker.showDialog(e,t,n)}};l=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IExtensions)),i(1,(0,o.inject)(c.IExportDialog))],l),t.ExportUtilBase=l},13749:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.FileConverter=void 0;const c=n(86700),l=n(66828),u=n(9959),d=n(10053),p=n(15925),h=n(42080),f=s(n(25251)),g=n(58681),m=n(11642),y=n(70835),v=n(9255),b=n(38124),w=n(62440);let C=class{constructor(e,t,n,r,i,o,s,a,c,l){this.exportToPythonPlain=e,this.exportToPDF=t,this.exportToHTML=n,this.exportToPython=r,this.filePicker=i,this.exportUtil=o,this.progressReporter=s,this.applicationShell=a,this.exportFileOpener=c,this.configuration=l}async importIpynb(e){const t=this.progressReporter.createProgressIndicator(f.DataScience.importingIpynb,!0);try{const n=await l.workspace.openNotebookDocument(e);await this.exportImpl(w.ExportFormat.python,n,void 0,t.token)}finally{t.dispose()}}async export(e,t,n,r){const i=this.progressReporter.createProgressIndicator(f.DataScience.exportingToFormat(e.toString()),!0);try{await this.exportImpl(e,t,n,i.token,r)}finally{i.dispose()}i.token.isCancellationRequested&&(0,u.sendTelemetryEvent)(p.Telemetry.ExportNotebookAs,void 0,{format:e,cancelled:!0})}async exportImpl(e,t,n,r,i){try{let o=await this.exportUtil.getTargetFile(e,t.uri,n);if(!o)return;await this.performExport(e,t,o,r,i)}catch(t){(0,m.traceError)("Export failed",t),(0,u.sendTelemetryEvent)(p.Telemetry.ExportNotebookAsFailed,void 0,{format:e}),e===w.ExportFormat.pdf&&(0,m.traceError)(f.DataScience.exportToPDFDependencyMessage),this.showExportFailed(f.DataScience.exportFailedGeneralMessage)}}async performExport(e,t,n,r,i){e===w.ExportFormat.python&&"nbconvert"!==this.configuration.getSettings(t.uri).pythonExportMethod?await this.performPlainExport(e,t,n,r):await this.performNbConvertExport(t,e,n,i,r),n&&this.openExportedFile(e,n).catch(g.noop)}async openExportedFile(e,t){await this.exportFileOpener.openFile(e,t,!0).catch(g.noop)}async performPlainExport(e,t,n,r){return n&&e===w.ExportFormat.python&&await this.exportToPythonPlain.export(t,n,r),n}async performNbConvertExport(e,t,n,r,i){try{return await this.exportToFormat(e,n,t,r,i)}finally{}}async exportToFormat(e,t,n,r,i){switch(n){case w.ExportFormat.python:return await this.exportToPython.export(e,t,r,i);case w.ExportFormat.pdf:return await this.exportToPDF.export(e,t,r,i);case w.ExportFormat.html:return await this.exportToHTML.export(e,t,r,i)}}showExportFailed(e){this.applicationShell.showErrorMessage(`${f.DataScience.failedExportMessage} ${e}`).then}};C=o([(0,c.injectable)(),a(0,(0,c.inject)(w.IExport)),a(0,(0,c.named)(w.ExportFormat.python)),a(1,(0,c.inject)(w.INbConvertExport)),a(1,(0,c.named)(w.ExportFormat.pdf)),a(2,(0,c.inject)(w.INbConvertExport)),a(2,(0,c.named)(w.ExportFormat.html)),a(3,(0,c.inject)(w.INbConvertExport)),a(3,(0,c.named)(w.ExportFormat.python)),a(4,(0,c.inject)(w.IExportDialog)),a(5,(0,c.inject)(b.ExportUtilBase)),a(6,(0,c.inject)(y.ProgressReporter)),a(7,(0,c.inject)(d.IApplicationShell)),a(8,(0,c.inject)(v.ExportFileOpener)),a(9,(0,c.inject)(h.IConfigurationService))],C),t.FileConverter=C},62440:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.IExportDialog=t.IExport=t.IExportBase=t.INbConvertExport=t.IFileConverter=t.ExportFormat=void 0,(n=t.ExportFormat||(t.ExportFormat={})).pdf="pdf",n.html="html",n.python="python",n.ipynb="ipynb",t.IFileConverter=Symbol("IFileConverter"),t.INbConvertExport=Symbol("INbConvertExport"),t.IExportBase=Symbol("IExportBase"),t.IExport=Symbol("IExport"),t.IExportDialog=Symbol("IExportDialog")},20402:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookCellLanguageService=t.LastSavedNotebookCellLanguage=void 0;const o=n(86700),s=n(77886),a=n(10053),c=n(15925),l=n(42080),u=n(85446),d=n(98729),p=n(86563),h=n(82010);t.LastSavedNotebookCellLanguage="DATASCIENCE.LAST_SAVED_CELL_LANGUAGE";let f=class{constructor(e,t,n,r){this.vscNotebook=e,this.disposables=t,this.globalMemento=n,this.pythonExtensionChecker=r}getPreferredLanguage(e){const t=e?.language_info?.name||e?.kernelspec?.language||this.lastSavedNotebookCellLanguage,n=this.pythonExtensionChecker.isPythonExtensionInstalled?c.PYTHON_LANGUAGE:"plaintext";return(0,p.translateKernelLanguageToMonaco)(t||n)}activate(){this.vscNotebook.onDidSaveNotebookDocument(this.onDidSaveNotebookDocument,this,this.disposables)}getSupportedLanguages(e){if((0,d.isPythonKernelConnection)(e))return c.LanguagesSupportedByPythonkernel;{const t=(0,p.translateKernelLanguageToMonaco)((0,d.getKernelConnectionLanguage)(e)||"");return t&&c.VSCodeKnownNotebookLanguages.includes(t.toLowerCase())?[t,"raw"]:[]}}get lastSavedNotebookCellLanguage(){return this.globalMemento.get(t.LastSavedNotebookCellLanguage)}async onDidSaveNotebookDocument(e){if(!(0,p.isJupyterNotebook)(e))return;const n=(0,h.getLanguageOfNotebookDocument)(e);n&&n!==this.lastSavedNotebookCellLanguage&&await this.globalMemento.update(t.LastSavedNotebookCellLanguage,n)}};r([(0,u.swallowExceptions)("Saving last saved cell language")],f.prototype,"onDidSaveNotebookDocument",null),f=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IVSCodeNotebook)),i(1,(0,o.inject)(l.IDisposableRegistry)),i(2,(0,o.inject)(l.IMemento)),i(2,(0,o.named)(l.GLOBAL_MEMENTO)),i(3,(0,o.inject)(s.IPythonExtensionChecker))],f),t.NotebookCellLanguageService=f},71806:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyNotebookCellLanguageService=void 0;const o=n(86700),s=n(66828),a=n(10053),c=n(15925),l=n(11642),u=n(42080),d=n(58681),p=n(58880),h=n(86563),f=n(50867);let g=class{constructor(e,t,n){this.notebook=e,this.disposables=t,this.controllerRegistration=n}activate(){this.controllerRegistration.onControllerSelected(this.onDidChangeNotebookController,this,this.disposables)}async onDidChangeNotebookController(e){const t=e.notebook,n=e.controller.connection;if(!(0,h.isJupyterNotebook)(t))return;const r=this.notebook.notebookEditors.find((e=>e.notebook===t));if(!r)return;const i=t.getCells().filter((e=>e.kind===s.NotebookCellKind.Code&&0===e.document.getText().trim().length)),o=t.getCells().filter((e=>e.kind===s.NotebookCellKind.Code)).length;if(0===i.length||i.length!==o)return;let a;const u=n.kind;switch(n.kind){case"connectToLiveRemoteKernel":a=n.kernelModel.language;break;case"startUsingRemoteKernelSpec":case"startUsingLocalKernelSpec":a=n.kernelSpec.language;break;case"startUsingPythonInterpreter":a=c.PYTHON_LANGUAGE;break;default:return void(0,l.traceError)(`Unsupported kernel kind encountered ${u}`)}if(!a)return;const f=(0,h.translateKernelLanguageToMonaco)(a);(0,p.chainWithPendingUpdates)(r.notebook,(async()=>{await i.map((async e=>{if(f.toLowerCase()!==e.document.languageId)return s.languages.setTextDocumentLanguage(e.document,f).then(d.noop,d.noop)}))})).then(d.noop,d.noop)}};g=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IVSCodeNotebook)),i(1,(0,o.inject)(u.IDisposableRegistry)),i(2,(0,o.inject)(f.IControllerRegistration))],g),t.EmptyNotebookCellLanguageService=g},82010:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLanguageOfNotebookDocument=void 0;const r=n(66828),i=n(98729),o=n(86563),s=n(11642);t.getLanguageOfNotebookDocument=function(e){try{return(0,i.getLanguageInNotebookMetadata)((0,o.getNotebookMetadata)(e))||e.getCells().find((e=>e.kind===r.NotebookCellKind.Code))?.document.languageId}catch(e){(0,s.traceWarning)("Failed to determine language of first cell",e)}}},15018:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookCommandListener=void 0,n(8513);const o=n(86700),s=n(66828),a=n(10053),c=n(42080),l=n(15925),u=n(58681),d=n(20402),p=n(88960),h=n(94062),f=n(35412),g=n(25251),m=n(11642),y=n(85249),v=n(41778),b=n(14154),w=n(58880),C=n(90541),S=n(86563),_=n(46799),k=n(50867);let P=class{constructor(e,t,n,r,i,o,s,a,c,l,u){this.disposableRegistry=e,this.notebooks=t,this.commandManager=n,this.languageService=r,this.applicationShell=i,this.configurationService=o,this.kernelProvider=s,this.controllerRegistration=a,this.errorHandler=c,this.notebookEditorProvider=l,this.serviceContainer=u,this.kernelInterruptedDontAskToRestart=!1,this.pendingRestartInterrupt=new WeakMap}register(e){this.disposableRegistry.push(e.registerCommand(l.Commands.NotebookEditorRemoveAllCells,(()=>this.removeAllCells()))),this.disposableRegistry.push(e.registerCommand(l.Commands.NotebookEditorRunAllCells,(()=>this.runAllCells()))),this.disposableRegistry.push(e.registerCommand(l.Commands.NotebookEditorAddCellBelow,(()=>this.addCellBelow()))),this.disposableRegistry.push(this.commandManager.registerCommand(l.Commands.NotebookEditorCollapseAllCells,this.collapseAll,this)),this.disposableRegistry.push(this.commandManager.registerCommand(l.Commands.NotebookEditorExpandAllCells,this.expandAll,this)),this.disposableRegistry.push(e.registerCommand(l.Commands.NotebookEditorRestartKernel,(e=>{e&&"notebookEditor"in e?this.restartKernel(e?.notebookEditor?.notebookUri).ignoreErrors():this.restartKernel(e).ignoreErrors()}))),this.disposableRegistry.push(e.registerCommand(l.Commands.InterruptKernel,(e=>this.interruptKernel(e?.notebookEditor?.notebookUri)))),this.disposableRegistry.push(e.registerCommand(l.Commands.RestartKernel,(e=>this.restartKernel(e?.notebookEditor?.notebookUri))))}runAllCells(){this.notebooks.activeNotebookEditor&&this.commandManager.executeCommand("notebook.execute").then(u.noop,u.noop)}addCellBelow(){this.notebooks.activeNotebookEditor&&this.commandManager.executeCommand("notebook.cell.insertCodeCellBelow").then(u.noop,u.noop)}removeAllCells(){const e=this.notebooks.activeNotebookEditor?.notebook;if(!e)return;const t=this.languageService.getPreferredLanguage((0,S.getNotebookMetadata)(e));(0,w.chainWithPendingUpdates)(e,(n=>{const r=s.NotebookEdit.replaceCells(new s.NotebookRange(0,e.cellCount),[new s.NotebookCellData(s.NotebookCellKind.Code,"",t)]);n.set(e.uri,[r])})).then(u.noop,u.noop)}collapseAll(){const e=this.notebooks.activeNotebookEditor?.notebook;e&&(0,w.chainWithPendingUpdates)(e,(t=>{e.getCells().forEach(((n,r)=>{const i={...n.metadata||{},inputCollapsed:!0,outputCollapsed:!0};t.set(e.uri,[s.NotebookEdit.updateCellMetadata(r,i)])}))})).then(u.noop,u.noop)}expandAll(){const e=this.notebooks.activeNotebookEditor?.notebook;e&&(0,w.chainWithPendingUpdates)(e,(t=>{e.getCells().forEach(((n,r)=>{const i={...n.metadata||{},inputCollapsed:!1,outputCollapsed:!0};t.set(e.uri,[s.NotebookEdit.updateCellMetadata(r,i)])}))})).then(u.noop,u.noop)}async interruptKernel(e){const t=e??this.notebookEditorProvider.activeNotebookEditor?.notebook.uri,n=s.workspace.notebookDocuments.find((e=>e.uri.toString()===t?.toString()));if(void 0===n)return;(0,m.traceVerbose)(`Command interrupted kernel for ${(0,f.getDisplayPath)(n.uri)}`);const r=this.kernelProvider.get(n);r?await this.wrapKernelMethod("interrupt",r):(0,m.traceInfo)("Interrupt requested & no kernel.")}async restartKernel(e){const t=e??this.notebookEditorProvider.activeNotebookEditor?.notebook.uri,n=s.workspace.notebookDocuments.find((e=>e.uri.toString()===t?.toString()));if(void 0===n)return;const r=this.kernelProvider.get(n);if(r)if((0,m.traceVerbose)(`Interrupt kernel command handler for ${(0,f.getDisplayPath)(n.uri)}`),await this.shouldAskForRestart(n.uri)){const e=g.DataScience.restartKernelMessage,t=g.DataScience.restartKernelMessageYes,i=g.DataScience.restartKernelMessageDontAskAgain,o=await this.applicationShell.showInformationMessage(e,{modal:!0},t,i);o===i?(await this.disableAskForRestart(n.uri),this.wrapKernelMethod("restart",r).ignoreErrors()):o===t&&this.wrapKernelMethod("restart",r).ignoreErrors()}else this.wrapKernelMethod("restart",r).ignoreErrors()}async wrapKernelMethod(e,t){const n=t.notebook,r=this.pendingRestartInterrupt.get(t);if(r)return r;const i=(async()=>{const r=this.kernelProvider.getKernelExecution(t).pendingCells[0],i=this.controllerRegistration.getSelected(n);try{if(!i)throw new Error("No kernel associated with the notebook");await _.KernelConnector.wrapKernelMethod(i.connection,e,t.creator,this.serviceContainer,{resource:t.resourceUri,notebook:n,controller:i.controller},new p.DisplayOptions(!1),this.disposableRegistry)}catch(n){r?await(0,b.endCellAndDisplayErrorsInCell)(r,t.controller,await this.errorHandler.getErrorMessageForDisplayInCell(n,e,t.resourceUri),!1):this.applicationShell.showErrorMessage(n.toString()).then(u.noop,u.noop)}})();return i.finally((()=>{this.pendingRestartInterrupt.get(t)===i&&this.pendingRestartInterrupt.delete(t)})),this.pendingRestartInterrupt.set(t,i),i}async shouldAskForRestart(e){if(this.kernelInterruptedDontAskToRestart)return!1;const t=this.configurationService.getSettings(e);return t&&!0===t.askForKernelRestart}async disableAskForRestart(e){this.configurationService.getSettings(e)&&this.configurationService.updateSetting("askForKernelRestart",!1,void 0,s.ConfigurationTarget.Global).ignoreErrors()}};P=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IDisposableRegistry)),i(1,(0,o.inject)(a.IVSCodeNotebook)),i(2,(0,o.inject)(a.ICommandManager)),i(3,(0,o.inject)(d.NotebookCellLanguageService)),i(4,(0,o.inject)(a.IApplicationShell)),i(5,(0,o.inject)(c.IConfigurationService)),i(6,(0,o.inject)(h.IKernelProvider)),i(7,(0,o.inject)(k.IControllerRegistration)),i(8,(0,o.inject)(C.IDataScienceErrorHandler)),i(9,(0,o.inject)(y.INotebookEditorProvider)),i(10,(0,o.inject)(v.IServiceContainer))],P),t.NotebookCommandListener=P},40539:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookEditorProvider=void 0;const o=n(86700),s=n(66828),a=n(10053);n(8513);const c=n(86563),l=n(52859),u=n(72728);let d=class{constructor(e){this.vscodeNotebook=e,this.providers=new Set}registerEmbedNotebookProvider(e){this.providers.add(e)}findNotebookEditor(e){const t=e?(0,l.getComparisonKey)(e,!0):"false",n="notebook"===(0,c.getResourceType)(e)?this.vscodeNotebook.notebookDocuments.find((e=>(0,l.getComparisonKey)(e.uri,!0)===t)):void 0,r=n&&this.vscodeNotebook.activeNotebookEditor?.notebook===n?this.vscodeNotebook.activeNotebookEditor:void 0;if(r)return r;for(let t of this.providers){const n=t.findNotebookEditor(e);if(n)return n}}get activeNotebookEditor(){return this.findNotebookEditor(s.window.activeNotebookEditor?.notebook.uri)||this.findNotebookEditor(s.window.activeTextEditor?.document.uri)}findAssociatedNotebookDocument(e){const t=(0,u.getOSType)()===u.OSType.Windows;let n=this.vscodeNotebook.notebookDocuments.find((n=>t?n.uri.path.toLowerCase()===e.path.toLowerCase():n.uri.path===e.path));if(n)return n;for(let t of this.providers){const n=t.findAssociatedNotebookDocument(e);if(n)return n}}};d=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IVSCodeNotebook))],d),t.NotebookEditorProvider=d},24451:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookTracebackFormatter=void 0;const i=n(86700),o=n(15925),s=n(35412),a=n(25251),c=n(11642),l=/(;32m[ ->]*?)(\d+)(.*)/g;let u=class{format(e,t){return e.notebook.notebookType!==o.JupyterNotebookView?t:t.map((t=>this.modifyTracebackFrameIPython(e,t)))}modifyTracebackFrameIPython(e,t){return/^[Cell|Input|File].*?\n.*/.test(t)?this.modifyTracebackFrameIPython8(e,t):t}modifyTracebackFrameIPython8(e,t){t=(t=(t=t.replace(/\u001b\[4\dm/g,"")).replace(/\u001b\[38;.*?\d+m/g,"[39m")).replace(/(;32m[ ->]*?)(\d+)(.*)\n/g,((e,t,n,r)=>`${t}${n}${r=r.replace(/\u001b\[3\d+m/g,"[39m")}\n`)),(0,c.traceInfoIfCI)(`Trace frame to match: ${t}`);const n=(t,n)=>{const r=t.replace(l,((t,n,r,i)=>{const o=parseInt(r,10);return`${n}<a href='${e.document.uri.toString()}?line=${o-1}'>${o}</a>${i}`})),i=a.DataScience.cellAtFormat((0,s.getFilePath)(e.document.uri),e.index+1);return r.replace(/.*?\n/,`[1;32m${i}[0m in [0;36m${n}\n`)},r=/^Input.*?\[.*32mIn\s+\[(\d+).*?0;36m(.*?)\n.*/.exec(t);if(r&&r.length>1)return n(t,r[2]);const i=/Cell.*?\[.*32mIn\s+\[(\d+)\]\,\s+line\s+([(\d+)])(.*?)\n.*/gm.exec(t);return i&&i.length>1?n(t,i[2]):t}};u=r([(0,i.injectable)()],u),t.NotebookTracebackFormatter=u},6039:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterServerSelectorCommand=void 0;const o=n(86700),s=n(66828),a=n(10053),c=n(15925),l=n(11642),u=n(27527),d=n(94433);let p=class{constructor(e,t,n){this.commandManager=e,this.serverSelector=t,this.serverUriStorage=n,this.disposables=[]}activate(){this.disposables.push(this.commandManager.registerCommand(c.Commands.SelectJupyterURI,this.selectJupyterUri,this)),this.disposables.push(this.commandManager.registerCommand(c.Commands.ClearSavedJupyterUris,this.clearJupyterUris,this))}dispose(){this.disposables.forEach((e=>e.dispose()))}async selectJupyterUri(e=!0,t="commandPalette"){t instanceof s.Uri?((0,l.traceInfo)(`Setting Jupyter Server URI to remote: ${t}`),await this.serverSelector.setJupyterURIToRemote(t.toString(!0))):this.serverSelector.selectJupyterURI(t).ignoreErrors()}async clearJupyterUris(){return this.serverUriStorage.clearUriList()}};p=r([(0,o.injectable)(),i(0,(0,o.inject)(a.ICommandManager)),i(1,(0,o.inject)(u.JupyterServerSelector)),i(2,(0,o.inject)(d.IJupyterServerUriStorage))],p),t.JupyterServerSelectorCommand=p},24411:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(94062),i=n(7214),o=n(52064),s=n(15925),a=n(42080),c=n(14398),l=n(33916),u=n(84390),d=n(24970),p=n(99229),h=n(35282),f=n(79212),g=n(14809),m=n(32372),y=n(6410),v=n(4177),b=n(66317),w=n(35962),C=n(40371),S=n(13057),_=n(982),k=n(9255),P=n(93385),I=n(33628),E=n(18661),T=n(87354),D=n(38124),x=n(13749),R=n(62440),j=n(20402),N=n(71806),M=n(15018),O=n(40539),A=n(24451),L=n(6039),F=n(9641),U=n(85249);t.registerTypes=function(e,t){(0,g.registerTypes)(e,t),e.addSingleton(o.IExtensionSyncActivationService,f.RemoteSwitcher),e.addSingleton(o.IExtensionSyncActivationService,l.KernelFilterUI),e.addSingleton(c.KernelFilterService,c.KernelFilterService),e.addSingleton(o.IExtensionSyncActivationService,u.LiveKernelSwitcher),e.addSingleton(U.INotebookEditorProvider,O.NotebookEditorProvider),e.addSingleton(o.IExtensionSyncActivationService,h.RemoteKernelControllerWatcher),e.addSingleton(r.ITracebackFormatter,A.NotebookTracebackFormatter),e.addSingleton(d.NotebookIPyWidgetCoordinator,d.NotebookIPyWidgetCoordinator),e.addBinding(d.NotebookIPyWidgetCoordinator,o.IExtensionSyncActivationService),e.addSingleton(o.IExtensionSyncActivationService,p.RemoteKernelConnectionHandler),e.addSingleton(o.IExtensionSyncActivationService,L.JupyterServerSelectorCommand),e.addSingleton(a.IDataScienceCommandListener,M.NotebookCommandListener),e.addSingleton(o.IExtensionSyncActivationService,F.InterpreterPackageTracker),e.addSingleton(j.NotebookCellLanguageService,j.NotebookCellLanguageService),e.addBinding(j.NotebookCellLanguageService,o.IExtensionSyncActivationService),e.addSingleton(o.IExtensionSyncActivationService,N.EmptyNotebookCellLanguageService),e.addSingleton(b.INotebookDebuggingManager,v.DebuggingManager,void 0,[o.IExtensionSyncActivationService]),e.addSingleton(b.IJupyterDebugService,C.MultiplexingDebugService,s.Identifiers.MULTIPLEXING_DEBUGSERVICE),e.addSingleton(b.IDebugLocationTracker,w.DebugLocationTrackerFactory,void 0,[b.IDebugLocationTrackerFactory]),e.addSingleton(i.IJupyterVariables,y.DebuggerVariables,s.Identifiers.DEBUGGER_VARIABLES),e.addSingleton(o.IExtensionSyncActivationService,m.CommandRegistry),e.addSingleton(k.ExportFileOpener,k.ExportFileOpener),e.addSingleton(R.IExportBase,S.ExportBase),e.addSingleton(R.IExportDialog,_.ExportDialog),e.addSingleton(R.IFileConverter,x.FileConverter),e.addSingleton(R.IExport,T.ExportToPythonPlain,R.ExportFormat.python),e.addSingleton(R.INbConvertExport,P.ExportToHTML,R.ExportFormat.html),e.addSingleton(R.INbConvertExport,I.ExportToPDF,R.ExportFormat.pdf),e.addSingleton(R.INbConvertExport,E.ExportToPython,R.ExportFormat.python),e.addSingleton(D.ExportUtilBase,D.ExportUtilBase)}},9641:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterPackageTracker=void 0;const o=n(86700),s=n(77886),a=n(42080),c=n(58681),l=n(84570),u=n(83902),d=n(50867),p=n(61239),h=n(58301);let f=class{constructor(e,t,n,r,i,o,s,a){this.packages=e,this.installer=t,this.extensions=n,this.pythonExtensionChecker=r,this.disposables=i,this.interpreterService=o,this.apiProvider=s,this.notebookControllerManager=a}activate(){this.notebookControllerManager.onControllerSelected(this.onNotebookControllerSelected,this,this.disposables),this.interpreterService.onDidChangeInterpreter(this.trackPackagesOfActiveInterpreter,this,this.disposables),this.installer?.onInstalled(this.onDidInstallPackage,this,this.disposables),this.extensions.onDidChange(this.trackUponActivation,this,this.disposables),this.trackUponActivation().catch(c.noop),this.apiProvider.onDidActivatePythonExtension(this.trackUponActivation,this,this.disposables)}async onNotebookControllerSelected(e){e.controller.connection.interpreter&&(await(0,p.trackKernelResourceInformation)(e.notebook.uri,{kernelConnection:e.controller.connection}),await this.packages.trackPackages(e.controller.connection.interpreter))}async trackUponActivation(){this.activeInterpreterTrackedUponActivation||this.pythonExtensionChecker.isPythonExtensionActive&&(this.activeInterpreterTrackedUponActivation=!0,await this.trackPackagesOfActiveInterpreter())}async trackPackagesOfActiveInterpreter(){if(!this.pythonExtensionChecker.isPythonExtensionActive)return;const e=await this.interpreterService.getActiveInterpreter(void 0);e&&await this.packages.trackPackages(e)}async onDidInstallPackage(e){if(this.pythonExtensionChecker.isPythonExtensionActive)if((0,c.isResource)(e.resource)){const t=await this.interpreterService.getActiveInterpreter(e.resource);await this.packages.trackPackages(t,!0)}else await this.packages.trackPackages(e.resource,!0)}};f=r([(0,o.injectable)(),i(0,(0,o.inject)(h.IInterpreterPackages)),i(1,(0,o.inject)(u.IInstaller)),i(1,(0,o.optional)()),i(2,(0,o.inject)(a.IExtensions)),i(3,(0,o.inject)(s.IPythonExtensionChecker)),i(4,(0,o.inject)(a.IDisposableRegistry)),i(5,(0,o.inject)(l.IInterpreterService)),i(6,(0,o.inject)(s.IPythonApiProvider)),i(7,(0,o.inject)(d.IControllerRegistration))],f),t.InterpreterPackageTracker=f},26657:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendKernelListTelemetry=void 0;const r=n(15925),i=n(9959);t.sendKernelListTelemetry=function(e){const t={kernelSpecCount:0,localKernelSpecCount:0,remoteKernelSpecCount:0,kernelInterpreterCount:0,kernelLiveCount:0};e.forEach((e=>{switch(e.kind){case"connectToLiveRemoteKernel":t.kernelLiveCount+=1;break;case"startUsingRemoteKernelSpec":t.localKernelSpecCount+=1,t.kernelSpecCount+=1;break;case"startUsingLocalKernelSpec":t.remoteKernelSpecCount+=1,t.kernelSpecCount+=1;break;case"startUsingPythonInterpreter":t.kernelInterpreterCount+=1}})),(0,i.sendTelemetryEvent)(r.Telemetry.KernelCount,{...t})}},85249:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INotebookEditorProvider=t.INotebookCompletionProvider=t.INotebookKernelResolver=void 0,t.INotebookKernelResolver=Symbol("INotebookKernelResolver"),t.INotebookCompletionProvider=Symbol("INotebookCompletionProvider"),t.INotebookEditorProvider=Symbol("INotebookEditorProvider")},52064:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IExtensionSyncActivationService=t.IExtensionSingleActivationService=t.IExtensionActivationManager=void 0,t.IExtensionActivationManager=Symbol("IExtensionActivationManager"),t.IExtensionSingleActivationService=Symbol("IExtensionSingleActivationService"),t.IExtensionSyncActivationService=Symbol("IExtensionSyncActivationService")},24353:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},c=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterService=t.InterpreterSelector=t.PythonExtensionChecker=t.PythonApiProvider=t.serializePythonEnvironment=t.pythonEnvToJupyterEnv=t.deserializePythonEnvironment=void 0;const l=n(66828),u=n(77886),d=a(n(25251)),p=n(86700),h=n(9959),f=n(10053),g=n(15925),m=n(42080),y=n(43138),v=n(11642),b=n(35412),w=n(46031),C=n(47891),S=n(99203),_=n(58681),k=n(11386),P=n(74075),I=n(37716),E=n(6101),T=n(83599);function D(e,t){if(e){const n={...e,sysPrefix:e.sysPrefix||"",uri:l.Uri.file(e.path||""),id:t||e.id,envPath:e.envPath?l.Uri.file(e.envPath):void 0,displayPath:"displayPath"in e&&"string"==typeof e.displayPath?l.Uri.file(e.displayPath):void 0};return delete n.path,e.envPath||delete n.envPath,n}}function x(e){const t=e.tools,n=[["Conda",C.EnvironmentType.Conda],["Pyenv",C.EnvironmentType.Pyenv],["Pipenv",C.EnvironmentType.Pipenv],["Poetry",C.EnvironmentType.Poetry],["VirtualEnvWrapper",C.EnvironmentType.VirtualEnvWrapper],["VirtualEnv",C.EnvironmentType.VirtualEnv],["Venv",C.EnvironmentType.Venv]];let r=t.length?t[0]:C.EnvironmentType.Unknown;if("Conda"===e.environment?.type)r=C.EnvironmentType.Conda;else{for(const[e,i]of n)if(t.includes(e)){r=i;break}r===C.EnvironmentType.Unknown&&"VirtualEnvironment"===e.environment?.type&&(r=C.EnvironmentType.VirtualEnv)}if(e.executable.uri)return{id:e.id,sysPrefix:e.executable.sysPrefix||"",envPath:e.environment?.folderUri,displayPath:e.environment?.folderUri||l.Uri.file(e.path),envName:e.environment?.name||"",uri:e.executable.uri,displayName:e.environment?.name||"",envType:r,version:e.version?{major:e.version.major,minor:e.version.minor,patch:e.version.micro,raw:e.version.sysVersion}:void 0};(0,v.traceWarning)(`Python environment ${e.id} excluded as Uri is undefined`)}t.deserializePythonEnvironment=D,t.pythonEnvToJupyterEnv=x,t.serializePythonEnvironment=function(e){if(e){const t=Object.assign({},e,{path:(0,b.getFilePath)(e.uri),envPath:e.envPath?(0,b.getFilePath)(e.envPath):void 0,displayPath:e.displayPath?(0,b.getFilePath)(e.displayPath):void 0});return delete t.uri,t}};let R=class{get onDidActivatePythonExtension(){return this.didActivatePython.event}get pythonExtensionHooked(){return this._pythonExtensionHooked.promise}constructor(e,t,n,r){this.extensions=e,this.disposables=t,this.extensionChecker=n,this.workspace=r,this.api=(0,y.createDeferred)(),this.didActivatePython=new l.EventEmitter,this._pythonExtensionHooked=(0,y.createDeferred)(),this.extensionChecker.isPythonExtensionInstalled||this.extensions.onDidChange((async()=>{this.extensionChecker.isPythonExtensionInstalled&&await this.registerHooks()}),this,this.disposables),this.disposables.push(this.didActivatePython)}getApi(){return this.init().catch(_.noop),this.api.promise}async getNewApi(){return await this.init(),this.extensions.getExtension(g.PythonExtension)?.exports}setApi(e){!this.api.resolved&&this.workspace.isTrusted&&this.api.resolve(e)}async init(){this.initialized||(this.extensions.getExtension(g.PythonExtension)?await this.registerHooks():await this.extensionChecker.showPythonExtensionInstallRequiredPrompt(),this.initialized=!0)}async registerHooks(){if(this.hooksRegistered)return;const e=this.extensions.getExtension(g.PythonExtension);if(!e)return;let t=!1;if(!e.isActive)try{await e.activate(),t=!0}catch(e){return(0,v.traceError)("Failed activating the python extension: ",e),void this.api.reject(new I.PythonExtensionActicationFailedError(e))}this.hooksRegistered||(this.hooksRegistered=!0,t&&this.didActivatePython.fire(),e.exports?.jupyter?e.exports.jupyter.registerHooks():((0,v.traceError)("Python extension is not exporting the jupyter API"),this.api.reject(new E.PythonExtensionApiNotExportedError)),this._pythonExtensionHooked.resolve())}};R=s([(0,p.injectable)(),c(0,(0,p.inject)(m.IExtensions)),c(1,(0,p.inject)(m.IDisposableRegistry)),c(2,(0,p.inject)(u.IPythonExtensionChecker)),c(3,(0,p.inject)(f.IWorkspaceService))],R),t.PythonApiProvider=R;let j=r=class{get onPythonExtensionInstallationStatusChanged(){return this.pythonExtensionInstallationStatusChanged.event}constructor(e,t,n,r,i){this.extensions=e,this.appShell=t,this.commandManager=n,this.workspace=r,this.disposables=i,this.pythonExtensionInstallationStatusChanged=new l.EventEmitter,this.extensions.onDidChange(this.extensionsChangeHandler.bind(this),this,this.disposables),this.previousInstallState=this.isPythonExtensionInstalled}get isPythonExtensionInstalled(){return void 0!==this.extensions.getExtension(g.PythonExtension)}get isPythonExtensionActive(){return!0===this.extensions.getExtension(g.PythonExtension)?.isActive}async directlyInstallPythonExtension(){return this.commandManager.executeCommand("workbench.extensions.installExtension",g.PythonExtension,{context:{skipWalkthrough:!0}})}async showPythonExtensionInstallRequiredPrompt(){if(!this.workspace.isTrusted)return;r.promptDisplayed=!0;const e=d.Common.bannerLabelYes;(0,h.sendTelemetryEvent)(g.Telemetry.PythonExtensionNotInstalled,void 0,{action:"displayed"}),await this.appShell.showInformationMessage(d.DataScience.pythonExtensionRequired,{modal:!0},e)===e?((0,h.sendTelemetryEvent)(g.Telemetry.PythonExtensionNotInstalled,void 0,{action:"download"}),await this.installPythonExtension()):(0,h.sendTelemetryEvent)(g.Telemetry.PythonExtensionNotInstalled,void 0,{action:"dismissed"})}async installPythonExtension(){this.commandManager.executeCommand("extension.open",g.PythonExtension).then(_.noop,_.noop)}async extensionsChangeHandler(){const e=this.isPythonExtensionInstalled;e!==this.previousInstallState&&(this.pythonExtensionInstallationStatusChanged.fire(e?"installed":"uninstalled"),this.previousInstallState=e)}};j=r=s([(0,p.injectable)(),c(0,(0,p.inject)(m.IExtensions)),c(1,(0,p.inject)(f.IApplicationShell)),c(2,(0,p.inject)(f.ICommandManager)),c(3,(0,p.inject)(f.IWorkspaceService)),c(4,(0,p.inject)(m.IDisposableRegistry))],j),t.PythonExtensionChecker=j;let N=class{constructor(e){this.apiProvider=e}async getSuggestions(e){const[t,n]=await Promise.all([this.apiProvider.getApi(),this.apiProvider.getNewApi()]);let r=t.getKnownSuggestions?t.getKnownSuggestions(e):await t.getSuggestions(e);const i=[];return await Promise.all(r.map((async e=>{const t=await n.environments.resolveEnvironment(e.interpreter.path);if(!t)return;const r=D(e.interpreter,t?.id);r&&i.push({...e,interpreter:r})}))),i}};N=s([(0,p.injectable)(),c(0,(0,p.inject)(u.IPythonApiProvider))],N),t.InterpreterSelector=N;let M=class{get status(){return this._status}set status(e){this._status!==e&&(this._status=e,this._onDidChangeStatus.fire())}constructor(e,t,n,r,i,o){this.apiProvider=e,this.extensionChecker=t,this.disposables=n,this.workspace=r,this.context=i,this.fs=o,this.didChangeInterpreter=new l.EventEmitter,this.didChangeInterpreters=new l.EventEmitter,this._onDidRemoveInterpreter=new l.EventEmitter,this.onDidRemoveInterpreter=this._onDidRemoveInterpreter.event,this.interpreterListCachePromise=void 0,this._status="idle",this._onDidChangeStatus=new l.EventEmitter,this.onDidChangeStatus=this._onDidChangeStatus.event,this.refreshPromises=new P.PromiseMonitor,this.pauseEnvDetection=!1,this.onResumeEnvDetection=new l.EventEmitter,this._interpreters=new Map,this.workspaceCachedActiveInterpreter=new Set,this.pythonEnvHashes=new Map,this.pendingEventTriggers=new Set,this.extensionChecker.isPythonExtensionInstalled&&(this.extensionChecker.isPythonExtensionActive||this.apiProvider.onDidActivatePythonExtension((()=>{this.builtListOfInterpretersAtLeastOnce=!1,this.hookupOnDidChangeInterpreterEvent(),this.buildListOfInterpretersForFirstTime()}),this,this.disposables)),this.workspace.onDidChangeWorkspaceFolders(this.onDidChangeWorkspaceFolders,this,n),this.disposables.push(this._onDidChangeStatus),this.disposables.push(this.refreshPromises),this.disposables.push(this.onResumeEnvDetection),this.refreshPromises.onStateChange((()=>{this.status=this.refreshPromises.isComplete?"idle":"refreshing"})),this.workspace.onDidGrantWorkspaceTrust((()=>this.populateCachedListOfInterpreters(!0).catch(_.noop)),this,this.disposables)}get onDidChangeInterpreter(){return this.hookupOnDidChangeInterpreterEvent(),this.didChangeInterpreter.event}get onDidChangeInterpreters(){return this.hookupOnDidChangeInterpreterEvent(),this.didChangeInterpreters.event}get resolvedEnvironments(){return this.hookupOnDidChangeInterpreterEvent(),Array.from(this._interpreters.values()).map((e=>e.resolved))}get environments(){return this.getApi().catch(_.noop),this.hookupOnDidChangeInterpreterEvent(),this.api?.environments?.known||[]}getInterpreters(){if(this.hookupOnDidChangeInterpreterEvent(),!this.interpreterListCachePromise){this.getInterpretersCancellation?.cancel(),this.getInterpretersCancellation?.dispose();const e=this.getInterpretersCancellation=new l.CancellationTokenSource;this.interpreterListCachePromise=this.getInterpretersImpl(e.token),this.interpreterListCachePromise.finally((()=>e.dispose())),this.refreshPromises.push(this.interpreterListCachePromise)}return this.interpreterListCachePromise}pauseInterpreterDetection(e){e.isCancellationRequested||(this.pauseEnvDetection=!0,e.onCancellationRequested((()=>{this.pauseEnvDetection=!1,this.triggerPendingEvents()}),this,this.disposables))}async refreshInterpreters(e=!1){const t=(async()=>{const t=await this.getApi();if(t)try{await t.environments.refreshEnvironments({forceRefresh:e}),this.interpreterListCachePromise=void 0,await this.getInterpreters(),(0,v.traceVerbose)("Refreshed Environments")}catch(e){(0,v.traceError)("Failed to refresh the list of interpreters")}})();this.refreshPromises.push(t),this.refreshPromises.push(t.then((()=>(0,y.sleep)(1e3)))),await t}async getActiveInterpreter(e){const t=new k.StopWatch;this.hookupOnDidChangeInterpreterEvent(),e||1!==this.workspace.workspaceFolders?.length||(e=this.workspace.workspaceFolders[0].uri),this.workspace.workspaceFolders?.length&&(e=this.workspace.getWorkspaceFolder(e)?.uri||this.workspace.workspaceFolders[0].uri);const n=this.workspace.getWorkspaceFolderIdentifier(e),r=this.getApi().then((async t=>{if(!t)return;const n=t.environments.getActiveEnvironmentPath(e);(0,v.traceInfoIfCI)(`Active Environment Path for ${(0,b.getDisplayPath)(e)} is ${JSON.stringify(n)}`);const r=await t.environments.resolveEnvironment(n);return(0,v.traceInfoIfCI)(`Resolved Active Environment for ${(0,b.getDisplayPath)(e)} is ${JSON.stringify(r)}`),this.trackResolvedEnvironment(r,!1)}));return r.then((()=>{this.workspaceCachedActiveInterpreter.has(n)||(this.workspaceCachedActiveInterpreter.add(n),(0,h.sendTelemetryEvent)(g.Telemetry.ActiveInterpreterListingPerf,{duration:t.elapsedTime},{firstTime:!0}))})).catch((e=>{(0,v.traceWarning)(`Failed to get active interpreter from Python for workspace ${n}`,e)})),(g.isCI||[l.ExtensionMode.Development,l.ExtensionMode.Test].includes(this.context.extensionMode))&&r.then((t=>(0,v.traceInfo)(`Active Interpreter in Python API for resource '${(0,b.getDisplayPath)(e)}' is ${(0,b.getDisplayPath)(t?.uri)}, EnvType: ${t?.envType}, EnvName: '${t?.envName}', Version: ${t?.version?.raw}`))).catch(_.noop),r}getInterpreterHash(e){return this.pythonEnvHashes.get(e)}async getInterpreterDetails(e){this.hookupOnDidChangeInterpreterEvent();try{return await this.getApi().then((async t=>{if(!t)return;const n=t.environments.known.find((t=>(0,_.isUri)(e)?(0,w.areInterpreterPathsSame)(t.executable.uri,e):(0,w.areInterpreterPathsSame)(l.Uri.file(t.path),l.Uri.file(e.path))));if(n){const r=await t.environments.resolveEnvironment(n),i=this.trackResolvedEnvironment(r,!1);return(0,v.traceVerbose)(`Interpreter details for ${(0,b.getDisplayPath)((0,_.isUri)(e)?e:l.Uri.file(e.path))} from Python is ${JSON.stringify(r)} and our mapping is ${JSON.stringify(i)}`),i}(0,v.traceWarning)(`No interpreter with path ${(0,b.getDisplayPath)((0,_.isUri)(e)?e:l.Uri.file(e.path))} found in Python API, will convert Uri path to string as Id ${(0,_.isUri)(e)?e:l.Uri.file(e.path)}`);const r=await t.environments.resolveEnvironment((0,_.isUri)(e)?e.fsPath:e.path);return this.trackResolvedEnvironment(r,!1)}))}catch(t){return void(0,v.traceWarning)(`Failed to get Python interpreter details from Python Extension API for ${"string"==typeof e?e:(0,b.getDisplayPath)((0,_.isUri)(e)?e:l.Uri.file(e.path))}`,t)}}trackResolvedEnvironment(e,t){if(e){const n=x(e);if(!n)return;return(0,w.getInterpreterHash)(n).then((e=>{this.pythonEnvHashes.set(n.id,e)})).catch(_.noop),this._interpreters.get(e.id)&&(0,_.areObjectsWithUrisTheSame)(n,this._interpreters.get(e.id)?.resolved)||(this._interpreters.set(e.id,{resolved:n}),t&&this.triggerEventIfAllowed(this.didChangeInterpreters)),n}}triggerEventIfAllowed(e){if(!this.pauseEnvDetection)return e.fire(),this.pendingEventTriggers.delete(e),void this.triggerPendingEvents();this.pendingEventTriggers.add(e)}triggerPendingEvents(){Array.from(this.pendingEventTriggers).forEach((e=>e.fire())),this.pendingEventTriggers.clear()}async getApi(){if(this.extensionChecker.isPythonExtensionInstalled)return this.apiPromise||(this.apiPromise=this.apiProvider.getNewApi(),this.apiPromise.then((e=>e?this.api=e:void 0)).catch(_.noop)),this.apiPromise}onDidChangeWorkspaceFolders(){this.interpreterListCachePromise=void 0}populateCachedListOfInterpreters(e){e&&(this.interpreterListCachePromise=void 0);const t=this.getInterpreters().catch(_.noop);return this.refreshPromises.push(t),this.refreshPromises.push(t.then((()=>(0,y.sleep)(1e3)))),t}async getInterpretersImpl(e,t=0){this.extensionChecker.isPythonExtensionInstalled&&(this.builtListOfInterpretersAtLeastOnce=!0);const n=[],r=new k.StopWatch;let i=!1;return await this.getApi().then((async t=>{if(!t||e.isCancellationRequested)return[];let o=t.environments.known.length;try{const i=r.elapsedTime;if(await t.environments.refreshEnvironments(),e.isCancellationRequested)return;const o=r.elapsedTime;(0,v.traceVerbose)(`Full interpreter list after refreshing (total ${o}ms, resolve ${i}ms, refresh ${o-i}ms) is length: ${t.environments.known.length}, ${t.environments.known.map((e=>`${e.id}:${e.environment?.name}:${e.tools.join(",")}:${(0,b.getDisplayPath)(e.executable.uri)}:${e.path}`)).join(", ")}`),await Promise.all(t.environments.known.map((async e=>{try{const r=await t.environments.resolveEnvironment(e),i=this.trackResolvedEnvironment(r,!0);(0,v.traceVerbose)(`Python environment for ${e.id} is ${r?.id} from Python Extension API is ${JSON.stringify(r)} and translated is ${JSON.stringify(i)}`),i?n.push(i):(0,v.traceError)(`Failed to get env details from Python API for ${e.id} without an error`)}catch(t){(0,v.traceError)(`Failed to get env details from Python API for ${e.id}`,t)}}))),this.triggerEventIfAllowed(this.didChangeInterpreters)}catch(e){(0,v.traceError)("Failed to refresh list of interpreters and get their details",e)}o<t.environments.known.length&&(i=!0)})),e.isCancellationRequested?[]:i&&t<10?((0,v.traceVerbose)(`List of interpreters changed after a while, will need to rebuild it again, counter = ${t}`),this.getInterpretersImpl(e,t++)):((0,v.traceVerbose)(`Full interpreter list is length: ${n.length}, ${n.map((e=>`${e.id}:${e.displayName}:${e.envType}:${(0,b.getDisplayPath)(e.uri)}`)).join(", ")}`),n)}buildListOfInterpretersForFirstTime(){this.builtListOfInterpretersAtLeastOnce||(this.extensionChecker.isPythonExtensionActive&&(this.builtListOfInterpretersAtLeastOnce=!0,this.populateCachedListOfInterpreters().catch(_.noop)),this.extensionChecker.onPythonExtensionInstallationStatusChanged((e=>{"installed"===e&&this.extensionChecker.isPythonExtensionActive&&this.populateCachedListOfInterpreters().catch(_.noop)}),this,this.disposables))}async isPythonEnvValid(e,t){const n=t.executable.uri?this.fs.exists(t.executable.uri):new Promise((()=>(0,_.noop)()));n.catch(_.noop);const r=e.environments.resolveEnvironment(t).then((e=>!!e)).catch((()=>!1));return r.catch(_.noop),Promise.race([n,r])}hookupOnDidChangeInterpreterEvent(){this.eventHandlerAdded||(this.buildListOfInterpretersForFirstTime(),this.getApi().then((e=>{!this.eventHandlerAdded&&e&&(this.eventHandlerAdded=!0,e.environments.onDidChangeActiveEnvironmentPath((()=>{(0,v.traceVerbose)("Detected change in Active Python environment via Python API"),this.interpreterListCachePromise=void 0,this.workspaceCachedActiveInterpreter.clear(),this.triggerEventIfAllowed(this.didChangeInterpreter)}),this,this.disposables),e.environments.onDidChangeEnvironments((async t=>{const n="remove"===t.type&&await this.isPythonEnvValid(e,t.env);"remove"!==t.type||n||this._interpreters.delete(t.env.id),(0,v.traceVerbose)(`Python API env change detected, ${t.type} => '${t.env.id}'`),this.populateCachedListOfInterpreters(!0).finally((()=>{"remove"!==t.type||n||this._interpreters.has(t.env.id)||(this.triggerEventIfAllowed(this.didChangeInterpreter),this.triggerEventIfAllowed(this.didChangeInterpreters),this._onDidRemoveInterpreter.fire({id:t.env.id}))}))}),this,this.disposables))})).catch(_.noop))}};s([(0,v.traceDecoratorVerbose)("Get Active Interpreter",S.TraceOptions.Arguments|S.TraceOptions.BeforeCall|S.TraceOptions.ReturnValue)],M.prototype,"getActiveInterpreter",null),s([(0,v.traceDecoratorVerbose)("Get Interpreter details",S.TraceOptions.Arguments|S.TraceOptions.BeforeCall)],M.prototype,"getInterpreterDetails",null),M=s([(0,p.injectable)(),c(0,(0,p.inject)(u.IPythonApiProvider)),c(1,(0,p.inject)(u.IPythonExtensionChecker)),c(2,(0,p.inject)(m.IDisposableRegistry)),c(3,(0,p.inject)(f.IWorkspaceService)),c(4,(0,p.inject)(m.IExtensionContext)),c(5,(0,p.inject)(T.IFileSystem))],M),t.InterpreterService=M},50968:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(47931),i=n(84570),o=n(24353),s=n(77886);t.registerTypes=function(e){e.addSingleton(s.IPythonApiProvider,o.PythonApiProvider),e.addSingleton(s.IPythonExtensionChecker,o.PythonExtensionChecker),e.addSingleton(i.IInterpreterService,o.InterpreterService),e.addSingleton(r.IInterpreterSelector,o.InterpreterSelector)}},77886:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterProductToInstall=t.IPythonExtensionChecker=t.IPythonApiProvider=void 0,t.IPythonApiProvider=Symbol("IPythonApi"),t.IPythonExtensionChecker=Symbol("IPythonExtensionChecker"),(n=t.JupyterProductToInstall||(t.JupyterProductToInstall={})).jupyter="jupyter",n.ipykernel="ipykernel",n.notebook="notebook",n.kernelspec="kernelspec",n.nbconvert="nbconvert",n.pandas="pandas",n.pip="pip"},959:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseApplicationEnvironment=void 0;const s=o(n(66828));t.BaseApplicationEnvironment=class{get appName(){return s.env.appName}get vscodeVersion(){return s.version}get appRoot(){return s.env.appRoot}get language(){return s.env.language}get sessionId(){return s.env.sessionId}get machineId(){return s.env.machineId}get uiKind(){return s.env.uiKind}get extensionName(){return this.packageJson.displayName}get extensionVersion(){return this.packageJson.version}get shell(){return s.env.shell}get packageJson(){return n(4147)}get channel(){return this.appName.indexOf("Insider")>0||this.appName.indexOf("Code - OSS Dev")>=0?"insiders":"stable"}get uriScheme(){return s.env.uriScheme}}},88814:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationEnvironment=void 0;const i=n(86700),o=n(959);let s=class extends o.BaseApplicationEnvironment{get userSettingsFile(){}get userCustomKeybindingsFile(){}};s=r([(0,i.injectable)()],s),t.ApplicationEnvironment=s},42959:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationShell=void 0;const i=n(86700),o=n(66828),s=n(58681);let a=class{get activeColorTheme(){return o.window.activeColorTheme}get onDidChangeWindowState(){return o.window.onDidChangeWindowState}showInformationMessage(e,t,...n){return o.window.showInformationMessage(e,t,...n)}showWarningMessage(e,t,...n){return o.window.showWarningMessage(e,t,...n)}showErrorMessage(e,t,...n){return o.window.showErrorMessage(e,t,...n)}showQuickPick(e,t,n){return o.window.showQuickPick(e,t,n)}showOpenDialog(e){return o.window.showOpenDialog(e)}showSaveDialog(e){return o.window.showSaveDialog(e)}showInputBox(e,t){return o.window.showInputBox(e,t)}openUrl(e){o.env.openExternal(o.Uri.parse(e)).then(s.noop,s.noop)}setStatusBarMessage(e,t){return o.window.setStatusBarMessage(e,t)}createStatusBarItem(e,t){return o.window.createStatusBarItem(e,t)}showWorkspaceFolderPick(e){return o.window.showWorkspaceFolderPick(e)}withProgress(e,t){return o.window.withProgress(e,t)}withProgressCustomIcon(e,t){const n=(new o.CancellationTokenSource).token,r=this.createStatusBarItem(o.StatusBarAlignment.Left),i={report:t=>{r.text=`${e} ${t.message}`}};return r.show(),t(i,n).then((e=>(r.dispose(),e)))}createQuickPick(){return o.window.createQuickPick()}createInputBox(){return o.window.createInputBox()}createTreeView(e,t){return o.window.createTreeView(e,t)}createOutputChannel(e){return o.window.createOutputChannel(e)}};a=r([(0,i.injectable)()],a),t.ApplicationShell=a},57703:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ClipboardService=void 0;const i=n(86700),o=n(66828);let s=class{async readText(){return o.env.clipboard.readText()}async writeText(e){await o.env.clipboard.writeText(e)}};s=r([(0,i.injectable)()],s),t.ClipboardService=s},8917:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.CommandManager=void 0;const i=n(86700),o=n(66828),s=n(9959),a=n(15925),c=new Set(["setContext"]);let l=class{registerCommand(e,t,n){return c.add(e),o.commands.registerCommand(e,((...r)=>((0,s.sendTelemetryEvent)(a.Telemetry.CommandExecuted,void 0,{command:e}),n?t.call(n,...r):t(...r))),n)}registerTextEditorCommand(e,t,n){return c.add(e),o.commands.registerTextEditorCommand(e,((r,i,...o)=>((0,s.sendTelemetryEvent)(a.Telemetry.CommandExecuted,void 0,{command:e}),n?t.call(n,r,i,...o):t(r,i,...o))),n)}executeCommand(e,...t){return c.has(e)||(0,s.sendTelemetryEvent)(a.Telemetry.CommandExecuted,void 0,{command:e}),o.commands.executeCommand(e,...t)}getCommands(e){return o.commands.getCommands(e)}};l=r([(0,i.injectable)()],l),t.CommandManager=l},61847:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugService=void 0;const o=n(86700),s=n(66828),a=n(11642);let c=r=class{get activeDebugConsole(){return s.debug.activeDebugConsole}get activeDebugSession(){return(0,a.traceInfoIfCI)(`Getting active debug session, ${s.debug.activeDebugSession?.name}`),s.debug.activeDebugSession}get breakpoints(){return s.debug.breakpoints}get onDidChangeActiveDebugSession(){return s.debug.onDidChangeActiveDebugSession}get onDidStartDebugSession(){return s.debug.onDidStartDebugSession}get onDidReceiveDebugSessionCustomEvent(){return s.debug.onDidReceiveDebugSessionCustomEvent}get onDidTerminateDebugSession(){return s.debug.onDidTerminateDebugSession}get onDidChangeBreakpoints(){return s.debug.onDidChangeBreakpoints}registerDebugConfigurationProvider(e,t){return s.debug.registerDebugConfigurationProvider(e,t)}registerDebugAdapterTrackerFactory(e,t){return s.debug.registerDebugAdapterTrackerFactory(e,t)}startDebugging(e,t,n){return s.debug.startDebugging(e,t,n)}addBreakpoints(e){s.debug.addBreakpoints(e)}removeBreakpoints(e){s.debug.removeBreakpoints(e)}};c.instance=new r,c=r=i([(0,o.injectable)()],c),t.DebugService=c},52100:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentManager=void 0;const i=n(86700),o=n(66828);let s=class{get textDocuments(){return o.workspace.textDocuments}get activeTextEditor(){return o.window.activeTextEditor}get visibleTextEditors(){return o.window.visibleTextEditors}get onDidChangeActiveTextEditor(){return o.window.onDidChangeActiveTextEditor}get onDidChangeTextDocument(){return o.workspace.onDidChangeTextDocument}get onDidChangeVisibleTextEditors(){return o.window.onDidChangeVisibleTextEditors}get onDidChangeTextEditorSelection(){return o.window.onDidChangeTextEditorSelection}get onDidChangeTextEditorOptions(){return o.window.onDidChangeTextEditorOptions}get onDidChangeTextEditorViewColumn(){return o.window.onDidChangeTextEditorViewColumn}get onDidOpenTextDocument(){return o.workspace.onDidOpenTextDocument}get onDidCloseTextDocument(){return o.workspace.onDidCloseTextDocument}get onDidSaveTextDocument(){return o.workspace.onDidSaveTextDocument}showTextDocument(e,t,n){return o.window.showTextDocument(e,t,n)}openTextDocument(e){return o.workspace.openTextDocument(e)}applyEdit(e){return o.workspace.applyEdit(e)}createTextEditorDecorationType(e){return o.window.createTextEditorDecorationType(e)}};s=r([(0,i.injectable)()],s),t.DocumentManager=s},71886:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptedStorage=void 0;const o=n(86700),s=n(66828),a=n(15925),c=n(11642),l=n(42080);let u=class{constructor(e){this.extensionContext=e,this.testingState=new Map}async store(e,t,n){if(a.isCI&&this.extensionContext.extensionMode!==s.ExtensionMode.Production)this.testingState.set(`${e}#${t}`,n||"");else if(n)await this.extensionContext.secrets.store(`${e}.${t}`,n);else try{await this.extensionContext.secrets.delete(`${e}.${t}`)}catch(e){(0,c.traceError)(e)}}async retrieve(e,t){if(a.isCI&&this.extensionContext.extensionMode!==s.ExtensionMode.Production)return this.testingState.get(`${e}#${t}`);try{return await this.extensionContext.secrets.get(`${e}.${t}`)}catch(n){try{return void await this.extensionContext.secrets.delete(`${e}.${t}`)}catch(e){(0,c.traceError)(e)}}}};u=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IExtensionContext))],u),t.EncryptedStorage=u},31104:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.Extensions=void 0;const i=n(86700),o=n(66828),s=n(25251),a=n(15925),c=n(12189),l=n(11642);let u=class{get all(){return o.extensions.all}get onDidChange(){return o.extensions.onDidChange}getExtension(e){return o.extensions.getExtension(e)}async determineExtensionFromCallStack(){const e=(new Error).stack;if(e){const t=this.getExtension(a.JVSC_EXTENSION_ID).extensionUri.toString().toLowerCase(),n=e.split("\n").map((e=>{const t=/\((.*)\)/.exec(e);if(t)return t[1]})).filter((e=>e&&e.toLowerCase().startsWith("http"))).filter((e=>e&&!e.toLowerCase().startsWith(t)));(0,c.parseStack)(new Error("Ex")).forEach((e=>{const r=e.getFileName();r&&!r.toLowerCase().startsWith(t)&&n.push(r)}));for(const e of n){const t=this.all.find((t=>t.id!==a.JVSC_EXTENSION_ID&&e.startsWith(t.extensionUri.toString())));if(t)return{extensionId:t.id,displayName:t.packageJSON.displayName}}(0,l.traceError)("Unable to determine the caller of the extension API for trace stack.",e)}return{extensionId:a.unknownExtensionId,displayName:s.DataScience.unknownPackage}}};u=r([(0,i.injectable)()],u),t.Extensions=u},94106:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.VSCodeNotebook=void 0;const o=n(86700),s=n(66828),a=n(42080),c=n(43138),l=n(85446),u=n(10053);let d=class{get onDidCloseNotebookDocument(){return this._onDidCloseNotebookDocument.event}get onDidChangeNotebookCellExecutionState(){return s.notebooks.onDidChangeNotebookCellExecutionState}get notebookDocuments(){return s.workspace.notebookDocuments}get notebookEditors(){return s.window.visibleNotebookEditors}get activeNotebookEditor(){return s.window.activeNotebookEditor}constructor(e,t){this.env=e,this.diposables=t,this._onDidCloseNotebookDocument=new s.EventEmitter,this.onDidChangeNotebookEditorSelection=s.window.onDidChangeNotebookEditorSelection,this.onDidChangeActiveNotebookEditor=s.window.onDidChangeActiveNotebookEditor,this.onDidOpenNotebookDocument=s.workspace.onDidOpenNotebookDocument,s.workspace.onDidCloseNotebookDocument((e=>this._onDidCloseNotebookDocument.fire(e)),this,this.diposables),this.onDidChangeVisibleNotebookEditors=s.window.onDidChangeVisibleNotebookEditors,this.onDidSaveNotebookDocument=s.workspace.onDidSaveNotebookDocument}async openNotebookDocument(e,t){return"string"==typeof e?s.workspace.openNotebookDocument(e,t):s.workspace.openNotebookDocument(e)}async showNotebookDocument(e,t){return s.window.showNotebookDocument(e,t)}registerNotebookSerializer(e,t,n){return s.workspace.registerNotebookSerializer(e,t,n)}createNotebookController(e,t,n,r,i,o){return s.notebooks.createNotebookController(e,t,n,r,i)}async closeActiveNotebooks(){const e=new Set(this.notebookDocuments);for(;s.window.activeNotebookEditor;)e.add(s.window.activeNotebookEditor.notebook),await s.commands.executeCommand("workbench.action.revertAndCloseActiveEditor"),await(0,c.sleep)(10);e.forEach((e=>this._onDidCloseNotebookDocument.fire(e)))}};r([(0,l.testOnlyMethod)()],d.prototype,"closeActiveNotebooks",null),d=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IApplicationEnvironment)),i(1,(0,o.inject)(a.IDisposableRegistry))],d),t.VSCodeNotebook=d},10053:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IEncryptedStorage=t.IVSCodeNotebook=t.IClipboard=t.ILanguageService=t.IWebviewViewProvider=t.IWebviewPanelProvider=t.IWebviewPanel=t.IWebviewView=t.IWebview=t.IWebviewViewMessageListener=t.IWebviewPanelMessageListener=t.IApplicationEnvironment=t.IDebugService=t.ITerminalManager=t.IWorkspaceService=t.IDocumentManager=t.ICommandManager=t.IApplicationShell=void 0,t.IApplicationShell=Symbol("IApplicationShell"),t.ICommandManager=Symbol("ICommandManager"),t.IDocumentManager=Symbol("IDocumentManager"),t.IWorkspaceService=Symbol("IWorkspaceService"),t.ITerminalManager=Symbol("ITerminalManager"),t.IDebugService=Symbol("IDebugManager"),t.IApplicationEnvironment=Symbol("IApplicationEnvironment"),t.IWebviewPanelMessageListener=Symbol("IWebviewPanelMessageListener"),t.IWebviewViewMessageListener=Symbol("IWebviewViewMessageListener"),t.IWebview=Symbol("IWebview"),t.IWebviewView=Symbol("IWebviewView"),t.IWebviewPanel=Symbol("IWebviewPanel"),t.IWebviewPanelProvider=Symbol("IWebviewPanelProvider"),t.IWebviewViewProvider=Symbol("IWebviewViewProvider"),t.ILanguageService=Symbol("ILanguageService"),t.IClipboard=Symbol("IClipboard"),t.IVSCodeNotebook=Symbol("IVSCodeNotebook"),t.IEncryptedStorage=Symbol("IEncryptedStorage")},90536:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseWorkspaceService=void 0;const s=o(n(15948)),a=n(66828),c=n(72728);t.BaseWorkspaceService=class{get onDidChangeConfiguration(){return a.workspace.onDidChangeConfiguration}get rootFolder(){const e=Array.isArray(a.workspace.workspaceFolders)&&a.workspace.workspaceFolders.length>0?a.workspace.workspaceFolders[0]:void 0;if(e)return e.uri}get workspaceFolders(){return a.workspace.workspaceFolders}get onDidChangeWorkspaceFolders(){return a.workspace.onDidChangeWorkspaceFolders}get hasWorkspaceFolders(){return Array.isArray(a.workspace.workspaceFolders)&&a.workspace.workspaceFolders.length>0}get workspaceFile(){return a.workspace.workspaceFile}getConfiguration(e,t){return a.workspace.getConfiguration(e,t||null)}getWorkspaceFolder(e){return e?a.workspace.getWorkspaceFolder(e):void 0}asRelativePath(e,t){return a.workspace.asRelativePath(e,t)}get isTrusted(){return a.workspace.isTrusted}get onDidGrantWorkspaceTrust(){return a.workspace.onDidGrantWorkspaceTrust}createFileSystemWatcher(e,t,n,r){return a.workspace.createFileSystemWatcher(e,n,n,r)}findFiles(e,t,n,r){return a.workspace.findFiles(e,t,n,r)}getWorkspaceFolderIdentifier(e,t=""){const n=e?a.workspace.getWorkspaceFolder(e):a.workspace.workspaceFolders?a.workspace.workspaceFolders[0]:void 0;return n?s.normalize((0,c.getOSType)()===c.OSType.Windows?n.uri.path.toUpperCase():n.uri.path):t}}},78163:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceService=void 0;const a=n(86700),c=n(90536),l=s(n(52859)),u=n(35412);let d=class extends c.BaseWorkspaceService{async computeWorkingDirectory(e){if(e){const t=(0,u.getFilePath)(e);return t.includes(".")?(0,u.getFilePath)(l.dirname(e)):t}return(e=this.getWorkspaceFolder(e)?.uri||this.rootFolder)?(0,u.getFilePath)(e):"."}};d=o([(0,a.injectable)()],d),t.WorkspaceService=d},68778:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncDisposableRegistry=void 0;const i=n(86700);let o=class{constructor(){this._list=[]}async dispose(){const e=this._list.map((e=>e.dispose()));await Promise.all(e),this._list=[]}push(e){e&&this._list.push(e)}get list(){return this._list}};o=r([(0,i.injectable)()],o),t.AsyncDisposableRegistry=o},6491:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cancellation=t.wrapCancellationTokens=t.createPromiseFromCancellation=t.isCancellationError=void 0;const r=n(66828),i=n(20397),o=n(43138),s=n(25251);t.isCancellationError=function(e,t=!1){return!("object"!=typeof e||!e)&&(e instanceof r.CancellationError||!(!t||!e.message.includes("Canceled")&&!e.message.includes(s.Common.canceled)))},t.createPromiseFromCancellation=function(e){return new Promise(((t,n)=>{e.token&&e.token.onCancellationRequested((()=>{if(e.token.isCancellationRequested){if("resolve"===e.cancelAction)return t(e.defaultValue);if("reject"===e.cancelAction)return n(new r.CancellationError)}}))}))},t.wrapCancellationTokens=function(...e){const t=new r.CancellationTokenSource,n=[];for(const r of e)r&&(r.isCancellationRequested&&t.cancel(),r.onCancellationRequested((()=>t.cancel()),void 0,n));const o=t.dispose.bind(t);return t.dispose=()=>{o(),(0,i.disposeAllDisposables)(n)},t},function(e){function t(e){return!!e&&e.isCancellationRequested}e.race=function(e,t){if(t){const n=(0,o.createDeferred)();return t.onCancellationRequested((()=>{n.completed||n.reject(new r.CancellationError)})),t.isCancellationRequested?n.reject(new r.CancellationError):e(t).then((e=>{n.completed||n.resolve(e)})).catch((e=>{n.completed||n.reject(e)})),n.promise}return e()},e.isCanceled=t,e.throwIfCanceled=function(e){if(t(e))throw new r.CancellationError}}(t.Cancellation||(t.Cancellation={}))},44998:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigMigration=void 0;const r=n(66828),i=n(11642);class o{constructor(e){this.jupyterConfig=e}async migrateSettings(){const e=[];for(let t of Object.keys(o.migratedSettings))e.push(...this.migrateSetting(t,o.migratedSettings[t]));try{await Promise.all(e)}catch(e){s(e)}}migrateSetting(e,t){const n=this.jupyterConfig.inspect(e),i=this.jupyterConfig.inspect(t),o=[];if(void 0!==n?.workspaceValue){let a=Promise.resolve();void 0===i?.workspaceValue&&(a=this.jupyterConfig.update(t,n.workspaceValue,r.ConfigurationTarget.Workspace)),o.push(a.then((()=>this.jupyterConfig.update(e,void 0,r.ConfigurationTarget.Workspace)),s))}if(void 0!==n?.workspaceFolderValue){let a=Promise.resolve();void 0===i?.workspaceFolderValue&&(a=this.jupyterConfig.update(t,n.workspaceFolderValue,r.ConfigurationTarget.WorkspaceFolder)),o.push(a.then((()=>this.jupyterConfig.update(e,void 0,r.ConfigurationTarget.WorkspaceFolder)),s))}if(void 0!==n?.globalValue){let a=Promise.resolve();void 0===i?.globalValue&&(a=this.jupyterConfig.update(t,n.globalValue,r.ConfigurationTarget.Global)),o.push(a.then((()=>this.jupyterConfig.update(e,void 0,r.ConfigurationTarget.Global)),s))}return o}}function s(e){(0,i.traceWarning)("Error migrating Jupyter configuration",e)}t.ConfigMigration=o,o.migratedSettings={interactiveWindowMode:"interactiveWindow.creationMode",interactiveWindowViewColumn:"interactiveWindow.viewColumn",sendSelectionToInteractiveWindow:"interactiveWindow.textEditor.executeSelection",magicCommandsAsComments:"interactiveWindow.textEditor.magicCommandsAsComments",enableAutoMoveToNextCell:"interactiveWindow.textEditor.autoMoveToNextCell",newCellOnRunLast:"interactiveWindow.textEditor.autoAddNewCell",pythonCellFolding:"interactiveWindow.textEditor.cellFolding",enableCellCodeLens:"interactiveWindow.codeLens.enable",addGotoCodeLenses:"interactiveWindow.codeLens.enableGotoCell",codeLenses:"interactiveWindow.codeLens.commands",debugCodeLenses:"interactiveWindow.codeLes.debugCommands",codeRegularExpression:"interactiveWindow.cellMarker.codeRegex",markdownRegularExpression:"interactiveWindow.cellMarker.markdownRegex",decorateCells:"interactiveWindow.cellMarker.decorateCells",defaultCellMarker:"interactiveWindow.cellMarker.default"}},23562:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterSettings=void 0;const i=n(66828);n(8513);const o=n(99203),s=n(15925),a=n(85446),c=n(44998);class l{get onDidChange(){return this._changeEmitter.event}constructor(e,t,n,r){this._systemVariablesCtor=t,this._type=n,this._workspace=r,this.logging={level:"error"},this.allowUnauthorizedRemoteConnection=!1,this.jupyterInterruptTimeout=1e4,this.jupyterLaunchTimeout=6e4,this.jupyterLaunchRetries=3,this.notebookFileRoot="",this.useDefaultConfigForJupyter=!1,this.searchForJupyter=!1,this.sendSelectionToInteractiveWindow=!1,this.markdownRegularExpression="",this.codeRegularExpression="",this.errorBackgroundColor="",this.ignoreVscodeTheme=!1,this.variableExplorerExclude="",this.decorateCells=!1,this.enableCellCodeLens=!1,this.askForLargeDataFrames=!1,this.enableAutoMoveToNextCell=!1,this.askForKernelRestart=!1,this.generateSVGPlots=!1,this.codeLenses="",this.debugCodeLenses="",this.debugpyDistPath="",this.stopOnFirstLineWhileDebugging=!1,this.magicCommandsAsComments=!1,this.pythonExportMethod="direct",this.stopOnError=!1,this.remoteDebuggerPort=0,this.addGotoCodeLenses=!1,this.runStartupCommands=[],this.debugJustMyCode=!1,this.defaultCellMarker="",this.themeMatplotlibPlots=!1,this.variableQueries=[],this.disableJupyterAutoStart=!1,this.enablePythonKernelLogging=!1,this.jupyterCommandLineArguments=[],this.widgetScriptSources=[],this.interactiveWindowMode="multiple",this.pythonCellFolding=!0,this.interactiveWindowViewColumn="secondGroup",this.disableZMQSupport=!1,this.forceIPyKernelDebugger=!1,this.verboseLogging=!1,this.showVariableViewWhenDebugging=!0,this.newCellOnRunLast=!0,this.pythonCompletionTriggerCharacters="",this.logKernelOutputSeparately=!1,this.poetryPath="",this.excludeUserSitePackages=!1,this.enableExtendedKernelCompletions=!1,this.useOldKernelResolve=!1,this.variableTooltipFields={python:{Tensor:["shape","dtype","device"]}},this._changeEmitter=new i.EventEmitter,this._disposables=[],this._workspaceRoot=e,this.initialize(),r&&!1===r.isTrusted&&(this.disableJupyterAutoStart=!0)}static getInstance(e,t,n,r){const i=l.getSettingsUriAndTarget(e,r).uri,o=i?i.path:"";let s=l.jupyterSettings.get(o);return s?"web"===s._type&&"node"===n&&(s._systemVariablesCtor=t,s._type=n):(s=new l(i,t,n,r),l.jupyterSettings.set(o,s)),s}static getSettingsUriAndTarget(e,t){const n=e?t.getWorkspaceFolder(e):void 0;let r=n?n.uri:void 0;return!r&&Array.isArray(t.workspaceFolders)&&t.workspaceFolders.length>0&&(r=t.workspaceFolders[0].uri),{uri:r,target:r?i.ConfigurationTarget.WorkspaceFolder:i.ConfigurationTarget.Global}}static dispose(){if(!(0,s.isTestExecution)())throw new Error("Dispose can only be called from unit tests");l.jupyterSettings.forEach((e=>e&&e.dispose())),l.jupyterSettings.clear()}dispose(){this._disposables.forEach((e=>e&&e.dispose())),this._disposables=[]}createSystemVariables(e){return new this._systemVariablesCtor(e,this._workspaceRoot,this._workspace)}toJSON(){const e={};return this.getSerializableKeys().forEach((t=>e[t]=this[t])),e}update(e,t){const n=this.createSystemVariables(void 0),r=n.resolveAny(e.get("logging"));r&&(r.level=function(e){switch(e){case"info":return o.LogLevel.Info;case"warn":return o.LogLevel.Warn;case"off":return"off";case"debug":return o.LogLevel.Debug;case"verbose":return o.LogLevel.Trace;case"everything":return o.LogLevel.Everything;default:return o.LogLevel.Error}}(r.level),this.logging?Object.assign(this.logging,r):this.logging=r);const i=n.resolveAny(e.get("experiments"));this.experiments?Object.assign(this.experiments,i):this.experiments=i,this.experiments=this.experiments?this.experiments:{enabled:!0,optInto:[],optOutFrom:[]};const s=(e,t)=>{const r=c.ConfigMigration.migratedSettings[e],i=r&&void 0!==t.get(r)?t.get(r):t.get(e),o=n.resolveAny(i);("variableTooltipFields"!==e||o)&&(this[e]=o)};this.getSerializableKeys().filter((e=>"experiments"!==e&&"logging"!==e&&"kernelPickerType"!==e)).forEach((t=>s(t,e))),t&&s("poetryPath",t)}onWorkspaceFoldersChanged(){const e=this._workspace.workspaceFolders.map((e=>e.uri.path)),t=Array.from(l.jupyterSettings.keys()).filter((t=>e.indexOf(t)<0));if(t.length>0)for(const e of t)l.jupyterSettings.delete(e)}initialize(){const e=()=>{const e=this._workspace.getConfiguration("jupyter",this._workspaceRoot),t=this._workspace.getConfiguration("python",this._workspaceRoot);this.update(e,t),this.debounceChangeNotification()};this._disposables.push(this._workspace.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this)),this._disposables.push(this._workspace.onDidChangeConfiguration((t=>{t.affectsConfiguration("jupyter")&&e(),t.affectsConfiguration("python.poetryPath")&&e()})));const t=this._workspace.getConfiguration("jupyter",this._workspaceRoot),n=this._workspace.getConfiguration("python",this._workspaceRoot);t&&(this.update(t,n),this.migrateSettings(t).ignoreErrors())}async migrateSettings(e){const t=new c.ConfigMigration(e);await t.migrateSettings()}debounceChangeNotification(){this._changeEmitter.fire()}fireChangeNotification(){this._changeEmitter.fire()}getSerializableKeys(){return Object.getOwnPropertyNames(this).filter((e=>!e.startsWith("_")))}}l.jupyterSettings=new Map,r([(0,a.debounceSync)(1)],l.prototype,"debounceChangeNotification",null),t.JupyterSettings=l},89312:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseConfigurationService=void 0;const r=n(66828),i=n(10053),o=n(23562),s=n(15925);t.BaseConfigurationService=class{constructor(e){this.serviceContainer=e,this.workspaceService=this.serviceContainer.get(i.IWorkspaceService)}async updateSectionSetting(e,t,n,i,s){let a={uri:i,target:s||r.ConfigurationTarget.WorkspaceFolder};"jupyter"===e&&s!==r.ConfigurationTarget.Global&&(a=o.JupyterSettings.getSettingsUriAndTarget(i,this.workspaceService));const c=this.workspaceService.getConfiguration(e,a.uri),l=c.inspect(t);void 0!==l&&(s===r.ConfigurationTarget.Global&&l.globalValue===n||s===r.ConfigurationTarget.Workspace&&l.workspaceValue===n||s===r.ConfigurationTarget.WorkspaceFolder&&l.workspaceFolderValue===n)||(await c.update(t,n,s),s&&await this.verifySetting(c,s,t,n))}async updateSetting(e,t,n,r){return this.updateSectionSetting("jupyter",e,t,n,r)}async verifySetting(e,t,n,i){if((0,s.isTestExecution)()&&!(0,s.isUnitTestExecution)()){let o=0;do{const s=e.inspect(n);if(!s&&void 0===i)break;if(s&&void 0!==i&&(t===r.ConfigurationTarget.Global?s.globalValue:t===r.ConfigurationTarget.Workspace?s.workspaceValue:s.workspaceFolderValue)===i)break;await new Promise((e=>setTimeout(e,250))),o+=1}while(o<20)}}}},89316:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationService=void 0;const o=n(86700),s=n(41778),a=n(23562),c=n(471),l=n(89312);let u=class extends l.BaseConfigurationService{constructor(e){super(e)}getSettings(e){return a.JupyterSettings.getInstance(e,c.SystemVariables,"web",this.workspaceService)}};u=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IServiceContainer))],u),t.ConfigurationService=u},15925:function(e,t,n){"use strict";var r,i,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.WIDGET_MIMETYPE=t.defaultNotebookFormat=t.DataScienceStartupTime=t.JupyterCommands=t.Telemetry=t.RegExpValues=t.EditorContexts=t.CodeLensCommands=t.Commands=t.CommandSource=t.VSCodeKnownNotebookLanguages=t.jupyterLanguageToMonacoLanguageMapping=t.KnownKernelLanguageAliases=t.LanguagesSupportedByPythonkernel=t.PylanceExtension=t.RendererExtension=t.PythonExtension=t.DefaultTheme=t.JupyterDaemonModule=t.JUPYTER_OUTPUT_CHANNEL=t.CodeSnippets=t.Identifiers=t.setUnitTestExecution=t.isUnitTestExecution=t.setTestExecution=t.isTestExecution=t.setCI=t.isCI=t.Settings=t.HelpLinks=t.STANDARD_OUTPUT_CHANNEL=t.DEFAULT_INTERPRETER_SETTING=t.AppinsightsKey=t.JVSC_EXTENSION_ID=t.NOTEBOOK_SELECTOR=t.InteractiveWindowView=t.JupyterNotebookView=t.InteractiveScheme=t.InteractiveInputScheme=t.GITHUB_ISSUE_MARKDOWN_FILE=t.PYTHON_ALLFILES=t.PYTHON=t.PYTHON_CELL=t.PYTHON_FILE_ANY_SCHEME=t.PYTHON_FILE=t.PYTHON_UNTITLED=t.NotebookCellScheme=t.JUPYTER_LANGUAGE=t.MARKDOWN_LANGUAGE=t.PYTHON_LANGUAGE=void 0,t.unknownExtensionId=t.WIDGET_VERSION_NON_PYTHON_KERNELS=t.WIDGET_STATE_MIMETYPE=void 0,t.PYTHON_LANGUAGE="python",t.MARKDOWN_LANGUAGE="markdown",t.JUPYTER_LANGUAGE="jupyter",t.NotebookCellScheme="vscode-notebook-cell",t.PYTHON_UNTITLED={scheme:"untitled",language:t.PYTHON_LANGUAGE},t.PYTHON_FILE={scheme:"file",language:t.PYTHON_LANGUAGE},t.PYTHON_FILE_ANY_SCHEME={language:t.PYTHON_LANGUAGE},t.PYTHON_CELL={scheme:t.NotebookCellScheme,language:t.PYTHON_LANGUAGE},t.PYTHON=[t.PYTHON_UNTITLED,t.PYTHON_FILE,t.PYTHON_CELL],t.PYTHON_ALLFILES=[{language:t.PYTHON_LANGUAGE}],t.GITHUB_ISSUE_MARKDOWN_FILE=[{language:t.MARKDOWN_LANGUAGE,scheme:"untitled",pattern:"**/issue.md"}],t.InteractiveInputScheme="vscode-interactive-input",t.InteractiveScheme="vscode-interactive",t.JupyterNotebookView="jupyter-notebook",t.InteractiveWindowView="interactive",t.NOTEBOOK_SELECTOR=[{language:t.PYTHON_LANGUAGE,notebookType:t.JupyterNotebookView},{scheme:t.InteractiveInputScheme,language:t.PYTHON_LANGUAGE},{scheme:t.InteractiveScheme,language:t.PYTHON_LANGUAGE},{scheme:t.NotebookCellScheme,language:t.PYTHON_LANGUAGE}],t.JVSC_EXTENSION_ID="ms-toolsai.jupyter",t.AppinsightsKey="0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255",t.DEFAULT_INTERPRETER_SETTING="python",t.STANDARD_OUTPUT_CHANNEL="STANDARD_OUTPUT_CHANNEL",s(n(91083),t),(i=t.HelpLinks||(t.HelpLinks={})).PythonInteractiveHelpLink="https://aka.ms/pyaiinstall",i.JupyterDataRateHelpLink="https://aka.ms/AA5ggm0",(r=t.Settings||(t.Settings={})).JupyterServerLocalLaunch="local",r.JupyterServerRemoteLaunch="remote",r.JupyterServerUriList="jupyter.jupyterServer.uriList",r.JupyterServerRemoteLaunchUriListKey="remote-uri-list",r.JupyterServerRemoteLaunchUriSeparator="\r",r.JupyterServerRemoteLaunchNameSeparator="\n",r.JupyterServerRemoteLaunchUriEqualsDisplayName="same",r.JupyterServerRemoteLaunchService=t.JVSC_EXTENSION_ID,r.JupyterServerUriListMax=10,r.IntellisenseTimeout=2e3,t.isCI=!1,t.setCI=function(e){t.isCI=e};let a=!1;t.isTestExecution=function(){return a||l()},t.setTestExecution=function(e){a=e};let c=!1;function l(){return c}var u,d,p,h,f,g,m,y,v;t.isUnitTestExecution=l,t.setUnitTestExecution=function(e){c=e},function(e){e.GeneratedThemeName="ipython-theme",e.RawPurpose="raw",e.MatplotLibDefaultParams="_VSCode_defaultMatplotlib_Params",e.MatplotLibFigureFormats="_VSCode_matplotLib_FigureFormats",e.DefaultCodeCellMarker="# %%",e.DefaultCommTarget="jupyter.widget",e.ALL_VARIABLES="ALL_VARIABLES",e.KERNEL_VARIABLES="KERNEL_VARIABLES",e.DEBUGGER_VARIABLES="DEBUGGER_VARIABLES",e.PYTHON_VARIABLES_REQUESTER="PYTHON_VARIABLES_REQUESTER",e.MULTIPLEXING_DEBUGSERVICE="MULTIPLEXING_DEBUGSERVICE",e.RUN_BY_LINE_DEBUGSERVICE="RUN_BY_LINE_DEBUGSERVICE",e.REMOTE_URI="https://remote/",e.REMOTE_URI_ID_PARAM="id",e.REMOTE_URI_HANDLE_PARAM="uriHandle"}(u=t.Identifiers||(t.Identifiers={})),(v=t.CodeSnippets||(t.CodeSnippets={})).ChangeDirectory=["{0}","{1}","import os as _VSCODE_os","try:","\t_VSCODE_os.chdir(_VSCODE_os.path.join(_VSCODE_os.getcwd(), '{2}'))","\tprint(_VSCODE_os.getcwd())","except:","\tpass","del _VSCODE_os",""],v.ChangeDirectoryCommentIdentifier="# ms-toolsai.jupyter added",v.ImportIPython="{0}\nfrom IPython import get_ipython\n\n{1}",v.MatplotLibInit=`import matplotlib\n%matplotlib inline\n${u.MatplotLibDefaultParams} = dict(matplotlib.rcParams)\n`,v.AppendSVGFigureFormat=`import matplotlib_inline.backend_inline\n${u.MatplotLibFigureFormats} = matplotlib_inline.backend_inline.InlineBackend.instance().figure_formats\n${u.MatplotLibFigureFormats}.add('svg')\nmatplotlib_inline.backend_inline.set_matplotlib_formats(*${u.MatplotLibFigureFormats})`,v.UpdateCWDAndPath='import os as _VSCODE_os\nimport sys as _VSCODE_sys\n%cd "{0}"\nif _VSCODE_os.getcwd() not in _VSCODE_sys.path:\n    _VSCODE_sys.path.insert(0, _VSCODE_os.getcwd())\n\ndel _VSCODE_sys\ndel _VSCODE_os',v.DisableJedi="%config Completer.use_jedi = False",t.JUPYTER_OUTPUT_CHANNEL="JUPYTER_OUTPUT_CHANNEL",t.JupyterDaemonModule="vscode_datascience_helpers.jupyter_daemon",t.DefaultTheme="Default Light+",t.PythonExtension="ms-python.python",t.RendererExtension="ms-toolsai.jupyter-renderers",t.PylanceExtension="ms-python.vscode-pylance",t.LanguagesSupportedByPythonkernel=["python","html","xml","javascript","markdown","latex","shellscript","bat","powershell","kusto","ruby","sql","perl","raw"],t.KnownKernelLanguageAliases=new Map([["qsharp","q#"],["csharp","c#"],["fsharp","f#"],["c++11","c++"],["c++12","c++"],["c++14","c++"]]),t.jupyterLanguageToMonacoLanguageMapping=new Map([["bash","shellscript"],["c#","csharp"],["f#","fsharp"],["q#","qsharp"],["c++11","c++"],["c++12","c++"],["c++14","c++"]]),t.VSCodeKnownNotebookLanguages=["python","r","julia","c++","c#","f#","q#","powershell","java","scala","haskell","bash","cling","rust","sas","sos","ocaml"],(y=t.CommandSource||(t.CommandSource={})).auto="auto",y.ui="ui",y.codelens="codelens",y.commandPalette="commandpalette",function(e){e.RunAllCells="jupyter.runallcells",e.RunAllCellsAbove="jupyter.runallcellsabove",e.RunCellAndAllBelow="jupyter.runcellandallbelow",e.RunAllCellsAbovePalette="jupyter.runallcellsabove.palette",e.RunCellAndAllBelowPalette="jupyter.runcurrentcellandallbelow.palette",e.RunToLine="jupyter.runtoline",e.RunFromLine="jupyter.runfromline",e.RunCell="jupyter.runcell",e.RunCurrentCell="jupyter.runcurrentcell",e.RunCurrentCellAdvance="jupyter.runcurrentcelladvance",e.CreateNewInteractive="jupyter.createnewinteractive",e.ImportNotebook="jupyter.importnotebook",e.ImportNotebookFile="jupyter.importnotebookfile",e.SelectJupyterURI="jupyter.selectjupyteruri",e.SelectNativeJupyterUriFromToolBar="jupyter.selectNativeJupyterUriFromToolBar",e.ExportFileAsNotebook="jupyter.exportfileasnotebook",e.ExportFileAndOutputAsNotebook="jupyter.exportfileandoutputasnotebook",e.InterruptKernel="jupyter.interruptkernel",e.RestartKernel="jupyter.restartkernel",e.NotebookEditorRemoveAllCells="jupyter.notebookeditor.removeallcells",e.NotebookEditorRestartKernel="jupyter.notebookeditor.restartkernel",e.NotebookEditorRunAllCells="jupyter.notebookeditor.runallcells",e.NotebookEditorRunSelectedCell="jupyter.notebookeditor.runselectedcell",e.NotebookEditorAddCellBelow="jupyter.notebookeditor.addcellbelow",e.ExpandAllCells="jupyter.expandallcells",e.CollapseAllCells="jupyter.collapseallcells",e.ExportOutputAsNotebook="jupyter.exportoutputasnotebook",e.ExecSelectionInInteractiveWindow="jupyter.execSelectionInteractive",e.RunFileInInteractiveWindows="jupyter.runFileInteractive",e.DebugFileInInteractiveWindows="jupyter.debugFileInteractive",e.AddCellBelow="jupyter.addcellbelow",e.DebugCurrentCellPalette="jupyter.debugcurrentcell.palette",e.DebugCell="jupyter.debugcell",e.DebugStepOver="jupyter.debugstepover",e.DebugContinue="jupyter.debugcontinue",e.DebugStop="jupyter.debugstop",e.RunCurrentCellAndAddBelow="jupyter.runcurrentcellandaddbelow",e.InsertCellBelowPosition="jupyter.insertCellBelowPosition",e.InsertCellBelow="jupyter.insertCellBelow",e.InsertCellAbove="jupyter.insertCellAbove",e.DeleteCells="jupyter.deleteCells",e.SelectCell="jupyter.selectCell",e.SelectCellContents="jupyter.selectCellContents",e.ExtendSelectionByCellAbove="jupyter.extendSelectionByCellAbove",e.ExtendSelectionByCellBelow="jupyter.extendSelectionByCellBelow",e.MoveCellsUp="jupyter.moveCellsUp",e.MoveCellsDown="jupyter.moveCellsDown",e.ChangeCellToMarkdown="jupyter.changeCellToMarkdown",e.ChangeCellToCode="jupyter.changeCellToCode",e.GotoNextCellInFile="jupyter.gotoNextCellInFile",e.GotoPrevCellInFile="jupyter.gotoPrevCellInFile",e.ScrollToCell="jupyter.scrolltocell",e.CreateNewNotebook="jupyter.createnewnotebook",e.ViewJupyterOutput="jupyter.viewOutput",e.ExportAsPythonScript="jupyter.exportAsPythonScript",e.ExportToHTML="jupyter.exportToHTML",e.ExportToPDF="jupyter.exportToPDF",e.Export="jupyter.export",e.NativeNotebookExport="jupyter.notebookeditor.export",e.LatestExtension="jupyter.latestExtension",e.EnableLoadingWidgetsFrom3rdPartySource="jupyter.enableLoadingWidgetScriptsFromThirdPartySource",e.NotebookEditorExpandAllCells="jupyter.notebookeditor.expandallcells",e.NotebookEditorCollapseAllCells="jupyter.notebookeditor.collapseallcells",e.EnableDebugLogging="jupyter.enableDebugLogging",e.ResetLoggingLevel="jupyter.resetLoggingLevel",e.ShowDataViewer="jupyter.showDataViewer",e.RefreshDataViewer="jupyter.refreshDataViewer",e.ClearSavedJupyterUris="jupyter.clearSavedJupyterUris",e.OpenVariableView="jupyter.openVariableView",e.OpenOutlineView="jupyter.openOutlineView",e.InteractiveClearAll="jupyter.interactive.clearAllCells",e.InteractiveGoToCode="jupyter.interactive.goToCode",e.InteractiveCopyCell="jupyter.interactive.copyCell",e.InteractiveExportAsNotebook="jupyter.interactive.exportasnotebook",e.InteractiveExportAs="jupyter.interactive.exportas",e.RunByLine="jupyter.runByLine",e.RunAndDebugCell="jupyter.runAndDebugCell",e.RunByLineNext="jupyter.runByLineNext",e.RunByLineStop="jupyter.runByLineStop",e.ReplayPylanceLog="jupyter.replayPylanceLog",e.ReplayPylanceLogStep="jupyter.replayPylanceLogStep",e.InstallPythonExtensionViaKernelPicker="jupyter.installPythonExtensionViaKernelPicker",e.InstallPythonViaKernelPicker="jupyter.installPythonViaKernelPicker",e.SwitchToRemoteKernels="jupyter.switchToRemoteKernels"}(d=t.Commands||(t.Commands={})),(m=t.CodeLensCommands||(t.CodeLensCommands={})).DefaultDesignLenses=[d.RunCurrentCell,d.RunAllCellsAbove,d.DebugCell],m.DefaultDebuggingLenses=[d.DebugContinue,d.DebugStop,d.DebugStepOver],m.DebuggerCommands=[d.DebugContinue,d.DebugStop,d.DebugStepOver],(g=t.EditorContexts||(t.EditorContexts={})).HasCodeCells="jupyter.hascodecells",g.IsInteractiveActive="jupyter.isinteractiveactive",g.OwnsSelection="jupyter.ownsSelection",g.HaveNativeCells="jupyter.havenativecells",g.HaveNative="jupyter.havenative",g.IsNativeActive="jupyter.isnativeactive",g.IsInteractiveOrNativeActive="jupyter.isinteractiveornativeactive",g.IsPythonOrNativeActive="jupyter.ispythonornativeactive",g.IsPythonOrInteractiveActive="jupyter.ispythonorinteractiveeactive",g.IsPythonOrInteractiveOrNativeActive="jupyter.ispythonorinteractiveornativeeactive",g.CanRestartNotebookKernel="jupyter.notebookeditor.canrestartNotebookkernel",g.CanInterruptNotebookKernel="jupyter.notebookeditor.canInterruptNotebookKernel",g.CanRestartInteractiveWindowKernel="jupyter.interactive.canRestartNotebookKernel",g.CanInterruptInteractiveWindowKernel="jupyter.interactive.canInterruptNotebookKernel",g.RunByLineCells="jupyter.notebookeditor.runByLineCells",g.RunByLineDocuments="jupyter.notebookeditor.runByLineDocuments",g.DebugDocuments="jupyter.notebookeditor.debugDocuments",g.IsPythonNotebook="jupyter.ispythonnotebook",g.IsJupyterKernelSelected="jupyter.kernel.isjupyter",g.IsDataViewerActive="jupyter.dataViewerActive",g.HasNativeNotebookOrInteractiveWindowOpen="jupyter.hasNativeNotebookOrInteractiveWindowOpen",g.ZmqAvailable="jupyter.zmqavailable",g.ReplayLogLoaded="jupyter.replayLogLoaded",(f=t.RegExpValues||(t.RegExpValues={})).PythonCellMarker=/^(#\s*%%|#\s*\<codecell\>|#\s*In\[\d*?\]|#\s*In\[ \])/,f.PythonMarkdownCellMarker=/^(#\s*%%\s*\[markdown\]|#\s*\<markdowncell\>)/,f.UrlPatternRegEx="(?<PREFIX>https?:\\/\\/)((\\(.+\\s+or\\s+(?<IP>.+)\\))|(?<LOCAL>[^\\s]+))(?<REST>:.+)",f.HttpPattern=/https?:\/\//,f.ShapeSplitterRegEx=/.*,\s*(\d+).*/,f.SvgHeightRegex=/(\<svg.*height=\")(.*?)\"/,f.SvgWidthRegex=/(\<svg.*width=\")(.*?)\"/,f.SvgSizeTagRegex=/\<svg.*tag=\"sizeTag=\{(.*),\s*(.*)\}\"/,(h=t.Telemetry||(t.Telemetry={})).ImportNotebook="DATASCIENCE.IMPORT_NOTEBOOK",h.RunCurrentCell="DATASCIENCE.RUN_CURRENT_CELL",h.RunCurrentCellAndAdvance="DATASCIENCE.RUN_CURRENT_CELL_AND_ADVANCE",h.RunAllCells="DATASCIENCE.RUN_ALL_CELLS",h.RunAllCellsAbove="DATASCIENCE.RUN_ALL_CELLS_ABOVE",h.RunCellAndAllBelow="DATASCIENCE.RUN_CELL_AND_ALL_BELOW",h.RunCurrentCellAndAddBelow="DATASCIENCE.RUN_CURRENT_CELL_AND_ADD_BELOW",h.InsertCellBelowPosition="DATASCIENCE.RUN_INSERT_CELL_BELOW_POSITION",h.InsertCellBelow="DATASCIENCE.RUN_INSERT_CELL_BELOW",h.InsertCellAbove="DATASCIENCE.RUN_INSERT_CELL_ABOVE",h.DeleteCells="DATASCIENCE.RUN_DELETE_CELLS",h.SelectCell="DATASCIENCE.RUN_SELECT_CELL",h.SelectCellContents="DATASCIENCE.RUN_SELECT_CELL_CONTENTS",h.ExtendSelectionByCellAbove="DATASCIENCE.RUN_EXTEND_SELECTION_BY_CELL_ABOVE",h.ExtendSelectionByCellBelow="DATASCIENCE.RUN_EXTEND_SELECTION_BY_CELL_BELOW",h.MoveCellsUp="DATASCIENCE.RUN_MOVE_CELLS_UP",h.MoveCellsDown="DATASCIENCE.RUN_MOVE_CELLS_DOWN",h.ChangeCellToMarkdown="DATASCIENCE.RUN_CHANGE_CELL_TO_MARKDOWN",h.ChangeCellToCode="DATASCIENCE.RUN_CHANGE_CELL_TO_CODE",h.GotoNextCellInFile="DATASCIENCE.GOTO_NEXT_CELL_IN_FILE",h.GotoPrevCellInFile="DATASCIENCE.GOTO_PREV_CELL_IN_FILE",h.RunSelectionOrLine="DATASCIENCE.RUN_SELECTION_OR_LINE",h.RunToLine="DATASCIENCE.RUN_TO_LINE",h.RunFromLine="DATASCIENCE.RUN_FROM_LINE",h.SelectJupyterURI="DATASCIENCE.SELECT_JUPYTER_URI",h.EnterJupyterURI="DATASCIENCE.ENTER_JUPYTER_URI",h.SelectLocalJupyterKernel="DATASCIENCE.SELECT_LOCAL_JUPYTER_KERNEL",h.SelectRemoteJupyterKernel="DATASCIENCE.SELECT_REMOTE_JUPYTER_KERNEL",h.SetJupyterURIToLocal="DATASCIENCE.SET_JUPYTER_URI_LOCAL",h.SetJupyterURIToUserSpecified="DATASCIENCE.SET_JUPYTER_URI_USER_SPECIFIED",h.SetJupyterURIUIDisplayed="DATASCIENCE.SET_JUPYTER_URI_UI_DISPLAYED",h.Interrupt="DATASCIENCE.INTERRUPT",h.ExportPythonFileInteractive="DATASCIENCE.EXPORT_PYTHON_FILE",h.ExportPythonFileAndOutputInteractive="DATASCIENCE.EXPORT_PYTHON_FILE_AND_OUTPUT",h.ClickedExportNotebookAsQuickPick="DATASCIENCE.CLICKED_EXPORT_NOTEBOOK_AS_QUICK_PICK",h.ExportNotebookAs="DATASCIENCE.EXPORT_NOTEBOOK_AS",h.ExportNotebookAsCommand="DATASCIENCE.EXPORT_NOTEBOOK_AS_COMMAND",h.ExportNotebookAsFailed="DATASCIENCE.EXPORT_NOTEBOOK_AS_FAILED",h.FailedToCreateNotebookController="DATASCIENCE.FAILED_TO_CREATE_CONTROLLER",h.FailedToCreateNotebookCellExecution="DATASCIENCE.FAILED_TO_CREATE_CELL_EXECUTION",h.StartJupyter="DS_INTERNAL.JUPYTERSTARTUPCOST",h.ConnectRemoteJupyterViaLocalHost="DS_INTERNAL.CONNECTREMOTEJUPYTER_VIA_LOCALHOST",h.ConnectFailedJupyter="DS_INTERNAL.CONNECTFAILEDJUPYTER",h.ConnectRemoteFailedJupyter="DS_INTERNAL.CONNECTREMOTEFAILEDJUPYTER",h.StartSessionFailedJupyter="DS_INTERNAL.START_SESSION_FAILED_JUPYTER",h.ConnectRemoteSelfCertFailedJupyter="DS_INTERNAL.CONNECTREMOTESELFCERTFAILEDJUPYTER",h.ConnectRemoteExpiredCertFailedJupyter="DS_INTERNAL.CONNECTREMOTEEXPIREDCERTFAILEDJUPYTER",h.SelfCertsMessageEnabled="DATASCIENCE.SELFCERTSMESSAGEENABLED",h.SelfCertsMessageClose="DATASCIENCE.SELFCERTSMESSAGECLOSE",h.ShiftEnterBannerShown="DS_INTERNAL.SHIFTENTER_BANNER_SHOWN",h.EnableInteractiveShiftEnter="DATASCIENCE.ENABLE_INTERACTIVE_SHIFT_ENTER",h.DisableInteractiveShiftEnter="DATASCIENCE.DISABLE_INTERACTIVE_SHIFT_ENTER",h.StartShowDataViewer="DATASCIENCE.START_SHOW_DATA_EXPLORER",h.ShowDataViewer="DATASCIENCE.SHOW_DATA_EXPLORER",h.ShowDataViewerRowsLoaded="DATASCIENCE.SHOW_DATA_EXPLORER_ROWS_LOADED",h.FailedShowDataViewer="DATASCIENCE.FAILED_SHOW_DATA_EXPLORER",h.RefreshDataViewer="DATASCIENCE.REFRESH_DATA_VIEWER",h.RunFileInteractive="DATASCIENCE.RUN_FILE_INTERACTIVE",h.DebugFileInteractive="DATASCIENCE.DEBUG_FILE_INTERACTIVE",h.PandasNotInstalled="DS_INTERNAL.SHOW_DATA_NO_PANDAS",h.PandasTooOld="DS_INTERNAL.SHOW_DATA_PANDAS_TOO_OLD",h.PandasOK="DS_INTERNAL.SHOW_DATA_PANDAS_OK",h.PandasInstallCanceled="DS_INTERNAL.SHOW_DATA_PANDAS_INSTALL_CANCELED",h.DataScienceSettings="DS_INTERNAL.SETTINGS",h.VariableExplorerVariableCount="DS_INTERNAL.VARIABLE_EXPLORER_VARIABLE_COUNT",h.AddCellBelow="DATASCIENCE.ADD_CELL_BELOW",h.GetPasswordFailure="DS_INTERNAL.GET_PASSWORD_FAILURE",h.GetPasswordSuccess="DS_INTERNAL.GET_PASSWORD_SUCCESS",h.OpenPlotViewer="DATASCIENCE.OPEN_PLOT_VIEWER",h.DebugCurrentCell="DATASCIENCE.DEBUG_CURRENT_CELL",h.CodeLensAverageAcquisitionTime="DS_INTERNAL.CODE_LENS_ACQ_TIME",h.DocumentWithCodeCells="DS_INTERNAL.DOCUMENT_WITH_CODE_CELLS",h.SelectJupyterInterpreter="DS_INTERNAL.SELECT_JUPYTER_INTERPRETER",h.SelectJupyterInterpreterCommand="DATASCIENCE.SELECT_JUPYTER_INTERPRETER_Command",h.NumberOfSavedRemoteKernelIds="DS_INTERNAL.NUMBER_OF_REMOTE_KERNEL_IDS_SAVED",h.WaitForIdleJupyter="DS_INTERNAL.WAIT_FOR_IDLE_JUPYTER",h.PerceivedJupyterStartupNotebook="DS_INTERNAL.PERCEIVED_JUPYTER_STARTUP_NOTEBOOK",h.GetActivatedEnvironmentVariables="DS_INTERNAL.GET_ACTIVATED_ENV_VARIABLES",h.WebviewStartup="DS_INTERNAL.WEBVIEW_STARTUP",h.VariableExplorerFetchTime="DS_INTERNAL.VARIABLE_EXPLORER_FETCH_TIME",h.KernelSpec="DS_INTERNAL.JUPYTER_KERNEL_SPEC",h.FailedToUpdateKernelSpec="DS_INTERNAL.FAILED_TO_UPDATE_JUPYTER_KERNEL_SPEC",h.CellOutputMimeType="DS_INTERNAL.CELL_OUTPUT_MIME_TYPE",h.JupyterApiUsage="DATASCIENCE.JUPYTER_API_USAGE",h.JupyterKernelApiUsage="DATASCIENCE.JUPYTER_KERNEL_API_USAGE",h.JupyterKernelApiAccess="DATASCIENCE.JUPYTER_KERNEL_API_ACCESS",h.JupyterKernelSpecEnumeration="DATASCIENCE.JUPYTER_KERNEL_SPEC_FETCH_FAILURE",h.JupyterKernelHiddenViaFilter="DATASCIENCE.JUPYTER_KERNEL_HIDDEN_VIA_FILTER",h.JupyterKernelFilterUsed="DATASCIENCE.JUPYTER_KERNEL_FILTER_USED",h.JupyterInstalledButNotKernelSpecModule="DS_INTERNAL.JUPYTER_INTALLED_BUT_NO_KERNELSPEC_MODULE",h.CreateNewNotebook="DATASCIENCE.NATIVE.CREATE_NEW_NOTEBOOK",h.DebugStepOver="DATASCIENCE.DEBUG_STEP_OVER",h.DebugContinue="DATASCIENCE.DEBUG_CONTINUE",h.DebugStop="DATASCIENCE.DEBUG_STOP",h.OpenNotebookAll="DATASCIENCE.NATIVE.OPEN_NOTEBOOK_ALL",h.JupyterNotInstalledErrorShown="DATASCIENCE.JUPYTER_NOT_INSTALLED_ERROR_SHOWN",h.RegisterInterpreterAsKernel="DS_INTERNAL.JUPYTER_REGISTER_INTERPRETER_AS_KERNEL",h.UserInstalledJupyter="DATASCIENCE.USER_INSTALLED_JUPYTER",h.UserInstalledPandas="DATASCIENCE.USER_INSTALLED_PANDAS",h.UserDidNotInstallJupyter="DATASCIENCE.USER_DID_NOT_INSTALL_JUPYTER",h.UserDidNotInstallPandas="DATASCIENCE.USER_DID_NOT_INSTALL_PANDAS",h.KernelSpecLanguage="DATASCIENCE.KERNEL_SPEC_LANGUAGE",h.KernelSpecNotFound="DS_INTERNAL.KERNEL_SPEC_NOT_FOUND",h.KernelLauncherPerf="DS_INTERNAL.KERNEL_LAUNCHER_PERF",h.AmbiguousGlobalKernelSpec="GLOBAL_PYTHON_KERNELSPEC",h.PreferredKernel="DS_INTERNAL.PREFERRED_KERNEL",h.RankKernelsPerf="DS_INTERNAL.RANK_KERNELS_PERF",h.KernelListingPerf="DS_INTERNAL.KERNEL_LISTING_PERF",h.ActiveInterpreterListingPerf="DS_INTERNAL.ACTIVE_INTERPRETER_LISTING_PERF",h.PythonModuleInstall="DS_INTERNAL.PYTHON_MODULE_INSTALL",h.PythonNotInstalled="DS_INTERNAL.PYTHON_NOT_INSTALLED",h.PythonExtensionNotInstalled="DS_INTERNAL.PYTHON_EXTENSION_NOT_INSTALLED",h.PythonExtensionInstalledViaKernelPicker="DS_INTERNAL.PYTHON_EXTENSION_INSTALLED_VIA_KERNEL_PICKER",h.JupyterCommandLineNonDefault="DS_INTERNAL.JUPYTER_CUSTOM_COMMAND_LINE",h.NewFileForInteractiveWindow="DS_INTERNAL.NEW_FILE_USED_IN_INTERACTIVE",h.CreateInteractiveWindow="DS_INTERNAL.CREATED_INTERACTIVE_WINDOW",h.IPyWidgetLoadSuccess="DS_INTERNAL.IPYWIDGET_LOAD_SUCCESS",h.IPyWidgetLoadFailure="DS_INTERNAL.IPYWIDGET_LOAD_FAILURE",h.IPyWidgetWidgetVersionNotSupportedLoadFailure="DS_INTERNAL.IPYWIDGET_WIDGET_VERSION_NOT_SUPPORTED_LOAD_FAILURE",h.IPyWidgetExtensionJsInfo="DS_INTERNAL.IPYWIDGET_EXTENSIONJS_INFO",h.IPyWidgetNbExtensionCopyTime="DS_INTERNAL.IPYWIDGET_TIME_TO_COPY_NBEXTENSIONS_DIR",h.HashedIPyWidgetNameUsed="DS_INTERNAL.IPYWIDGET_USED_BY_USER",h.VSCNotebookCellTranslationFailed="DS_INTERNAL.VSCNOTEBOOK_CELL_TRANSLATION_FAILED",h.HashedIPyWidgetScriptDiscoveryError="DS_INTERNAL.IPYWIDGET_DISCOVERY_ERRORED",h.DiscoverIPyWidgetNamesPerf="DS_INTERNAL.IPYWIDGET_DISCOVER_WIDGETS_NB_EXTENSIONS",h.IPyWidgetPromptToUseCDN="DS_INTERNAL.IPYWIDGET_PROMPT_TO_USE_CDN",h.IPyWidgetPromptToUseCDNSelection="DS_INTERNAL.IPYWIDGET_PROMPT_TO_USE_CDN_SELECTION",h.IPyWidgetOverhead="DS_INTERNAL.IPYWIDGET_OVERHEAD",h.IPyWidgetRenderFailure="DS_INTERNAL.IPYWIDGET_RENDER_FAILURE",h.IPyWidgetUnhandledMessage="DS_INTERNAL.IPYWIDGET_UNHANDLED_MESSAGE",h.RawKernelInfoResponse="DS_INTERNAL.RAWKERNEL_INFO_RESPONSE",h.RawKernelSessionStartNoIpykernel="DS_INTERNAL.RAWKERNEL_SESSION_NO_IPYKERNEL",h.RawKernelProcessLaunch="DS_INTERNAL.RAWKERNEL_PROCESS_LAUNCH",h.RawKernelSessionShutdown="DS_INTERNAL.RAWKERNEL_SESSION_SHUTDOWN",h.RawKernelSessionKernelProcessExited="DS_INTERNAL.RAWKERNEL_SESSION_KERNEL_PROCESS_EXITED",h.RawKernelSessionDisposed="DS_INTERNAL.RAWKERNEL_SESSION_DISPOSED",h.RunByLineVariableHover="DATASCIENCE.RUN_BY_LINE_VARIABLE_HOVER",h.InteractiveFileTooltipsPerf="DS_INTERNAL.INTERACTIVE_FILE_TOOLTIPS_PERF",h.NativeVariableViewLoaded="DS_INTERNAL.NATIVE_VARIABLE_VIEW_LOADED",h.NativeVariableViewMadeVisible="DS_INTERNAL.NATIVE_VARIABLE_VIEW_MADE_VISIBLE",h.NotebookStart="DATASCIENCE.NOTEBOOK_START",h.NotebookInterrupt="DATASCIENCE.NOTEBOOK_INTERRUPT",h.NotebookRestart="DATASCIENCE.NOTEBOOK_RESTART",h.SwitchKernel="DS_INTERNAL.SWITCH_KERNEL",h.KernelCount="DS_INTERNAL.KERNEL_COUNT",h.ExecuteCell="DATASCIENCE.EXECUTE_CELL",h.CommandExecuted="DS_INTERNAL.COMMAND_EXECUTED",h.DataViewerSliceEnablementStateChanged="DATASCIENCE.DATA_VIEWER_SLICE_ENABLEMENT_STATE_CHANGED",h.DataViewerDataDimensionality="DATASCIENCE.DATA_VIEWER_DATA_DIMENSIONALITY",h.DataViewerSliceOperation="DATASCIENCE.DATA_VIEWER_SLICE_OPERATION",h.RecommendExtension="DATASCIENCE.RECOMMENT_EXTENSION",h.CreatePythonEnvironment="DATASCIENCE.CREATE_PYTHON_ENVIRONMENT",h.PythonVariableFetchingCodeFailure="DATASCIENCE.PYTHON_VARIABLE_FETCHING_CODE_FAILURE",h.InteractiveWindowDebugSetupCodeFailure="DATASCIENCE.INTERACTIVE_WINDOW_DEBUG_SETUP_CODE_FAILURE",h.KernelCrash="DATASCIENCE.KERNEL_CRASH",h.RunTest="DS_INTERNAL.RUNTEST",h.PreferredKernelExactMatch="DS_INTERNAL.PREFERRED_KERNEL_EXACT_MATCH",h.JupyterInstalled="JUPYTER_IS_INSTALLED",h.NoActiveKernelSession="DATASCIENCE.NO_ACTIVE_KERNEL_SESSION",h.DataViewerUsingInterpreter="DATAVIEWER.USING_INTERPRETER",h.DataViewerUsingKernel="DATAVIEWER.USING_KERNEL",h.DataViewerWebviewLoaded="DATAVIEWER.WEBVIEW_LOADED",h.PlotViewerWebviewLoaded="PLOTVIEWER.WEBVIEW_LOADED",(p=t.JupyterCommands||(t.JupyterCommands={})).NotebookCommand="notebook",p.ConvertCommand="nbconvert",p.KernelSpecCommand="kernelspec",t.DataScienceStartupTime=Symbol("DataScienceStartupTime"),t.defaultNotebookFormat={major:4,minor:2},t.WIDGET_MIMETYPE="application/vnd.jupyter.widget-view+json",t.WIDGET_STATE_MIMETYPE="application/vnd.jupyter.widget-state+json",t.WIDGET_VERSION_NON_PYTHON_KERNELS=7,t.unknownExtensionId="unknown"},29444:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextKey=void 0,t.ContextKey=class{get value(){return this.lastValue}constructor(e,t){this.name=e,this.commandManager=t}async set(e){this.lastValue!==e&&(this.lastValue=e,await this.commandManager.executeCommand("setContext",this.name,this.lastValue))}}},46729:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.computeHash=t.CryptoUtils=void 0;const i=n(86700);let o=class{async createHash(e,t="SHA-256"){return l(e,t)}};o=r([(0,i.injectable)()],o),t.CryptoUtils=o;const s={};let a,c=!1;async function l(e,t){const n=e.includes("/")||e.includes("\\")||e.endsWith(".interactive");if(n&&s[e])return s[e];const r=await async function(e,t){const n=(new TextEncoder).encode(e),r=await a.subtle.digest({name:t},n);return Array.from(new Uint8Array(r)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(e,t);return n&&!c&&(Object.keys(s).length>1e4&&(c=!0),s[e]=r),r}a="object"==typeof window?window.crypto:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self.crypto:n(63826).webcrypto,t.computeHash=l},62392:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataFrameScriptGenerator=void 0;const a=n(86700),c=n(83599),l=n(42080),u=n(52859),d=s(n(66518)),p="_VSCODE_getDataFrame",h=d.default`
                            try:
                                del _VSCODE_getDataFrame
                            except:
                                pass
                            `;let f=r=class{constructor(e,t){this.fs=e,this.context=t}async generateCodeToGetDataFrameInfo(e){const t=await this.getContentsOfDataFrameScript(),n=e.isDebugging?"True":"False",r=`${p}("info", ${n}, ${e.variableName})`;return e.isDebugging?{initializeCode:t,code:r,cleanupCode:h}:{code:`${t}\n\n${r}\n\n${h}`}}async generateCodeToGetDataFrameRows(e){const t=await this.getContentsOfDataFrameScript(),n=e.isDebugging?"True":"False",r=`${p}("rows", ${n}, ${e.variableName}, ${e.startIndex}, ${e.endIndex})`;return e.isDebugging?{initializeCode:t,code:r,cleanupCode:h}:{code:`${t}\n\n${r}\n\n${h}`}}async getContentsOfDataFrameScript(){if(r.contentsOfDataFrameScript)return r.contentsOfDataFrameScript;const e=(0,u.joinPath)(this.context.extensionUri,"pythonFiles","vscode_datascience_helpers","dataframes","vscodeDataFrame.py"),t=await this.fs.readFile(e);return r.contentsOfDataFrameScript=t,t}};f=r=i([(0,a.injectable)(),o(0,(0,a.inject)(c.IFileSystem)),o(1,(0,a.inject)(l.IExtensionContext))],f),t.DataFrameScriptGenerator=f},65738:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Experiments=void 0,t.Experiments||(t.Experiments={})},44974:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentService=void 0;const o=n(86700),s=n(59035),a=n(10053),c=n(15925),l=n(11642),u=n(42080),d=n(25251),p=n(65738),h=n(8209);let f=class{get enabled(){return this.settings.experiments.enabled}constructor(e,t,n,r){this.configurationService=e,this.appEnvironment=t,this.globalState=n,this.output=r,this._optInto=[],this._optOutFrom=[],this.settings=e.getSettings(void 0);const i=this.settings.experiments.optInto,o=this.settings.experiments.optOutFrom;if(this._optInto=i.filter((e=>!e.endsWith("control"))),this._optOutFrom=o.filter((e=>!e.endsWith("control"))),!this.enabled)return;let a;a="insiders"===this.appEnvironment.channel?s.TargetPopulation.Insiders:s.TargetPopulation.Public;const u=new h.ExperimentationTelemetry;this.experimentationService=(0,s.getExperimentationService)(c.JVSC_EXTENSION_ID,this.appEnvironment.packageJson.version,a,u,this.globalState),(0,l.traceVerbose)(`Experimentation service retrieved: ${this.experimentationService}`),this.logExperiments()}async activate(){this.experimentationService&&await this.experimentationService.initializePromise}async inExperiment(e){if(!this.experimentationService)return!1;switch(this.getOptInOptOutStatus(e)){case"optOut":return!1;case"optIn":return await this.experimentationService.isCachedFlightEnabled(e.toString()),!0;default:return this.experimentationService.isCachedFlightEnabled(e.toString())}}async getExperimentValue(e){if(this.experimentationService&&!this._optOutFrom.includes(e))return this.experimentationService.getTreatmentVariableAsync("vscode",e)}logExperiments(){this.experimentationService&&!this.logged&&(this.logged=!0,this.globalState.get("VSCode.ABExp.FeatureData",{features:[]}).features.forEach((e=>{e.toLowerCase().startsWith("jupyter")&&this.output.appendLine(d.Experiments.inGroup(e))})),this.getExperimentsUserHasManuallyOptedInto().forEach((e=>{this.output.appendLine(d.Experiments.inGroup(e.toString()))})))}getOptInOptOutStatus(e){if(this.experimentationService)return this._optOutFrom.includes(e.toString())?"optOut":this._optInto.includes(e.toString())?"optIn":void 0}getExperimentsUserHasManuallyOptedInto(){return Object.values(p.Experiments).filter((e=>"optIn"===this.getOptInOptOutStatus(e)))}};f=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IConfigurationService)),i(1,(0,o.inject)(a.IApplicationEnvironment)),i(2,(0,o.inject)(u.IMemento)),i(2,(0,o.named)(u.GLOBAL_MEMENTO)),i(3,(0,o.inject)(u.IOutputChannel)),i(3,(0,o.named)(c.STANDARD_OUTPUT_CHANNEL))],f),t.ExperimentService=f},8209:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentationTelemetry=void 0;const r=n(9959);t.ExperimentationTelemetry=class{setSharedProperty(e,t){(0,r.setSharedProperty)(e,t)}postEvent(e,t){const n={};t.forEach(((e,t)=>{n[t]=e})),(0,r.sendTelemetryEvent)(e,void 0,n)}}},8513:()=>{"use strict";String.prototype.splitLines=function(e={removeEmptyEntries:!0,trim:!0}){let t=this.split(/\r?\n/g);return e&&e.trim&&(t=t.map((e=>e.trim()))),e&&e.removeEmptyEntries&&(t=t.filter((e=>e.length>0))),t},String.prototype.toCommandArgument=function(){return this?this.indexOf(" ")>=0&&!this.startsWith('"')&&!this.endsWith('"')?`"${this}"`:this.toString():this},String.prototype.fileToCommandArgument=function(){return this?this.toCommandArgument().replace(/\\/g,"/"):this},String.prototype.trimQuotes=function(){return this?this.replace(/(^['"])|(['"]$)/g,""):this},Promise.prototype.ignoreErrors=function(){this.catch((()=>{}))},String.prototype.format||(String.prototype.format=function(){const e=arguments;return this.replace(/{(\d+)}/g,((t,n)=>void 0===e[n]?t:e[n]))})},8523:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureManager=void 0;const o=n(86700),s=n(10053),a=n(11642),c=n(58802),l=n(25251),u=n(42080),d=n(39054),p=[{doNotDisplayPromptStateKey:"SHOW_DEPRECATED_FEATURE_PROMPT_FORMAT_ON_SAVE",message:l.Deprecated.SHOW_DEPRECATED_FEATURE_PROMPT_FORMAT_ON_SAVE,moreInfoUrl:"https://github.com/Microsoft/vscode-python/issues/309",setting:{setting:"formatting.formatOnSave",values:["true",!0]}},{doNotDisplayPromptStateKey:"SHOW_DEPRECATED_FEATURE_PROMPT_LINT_ON_TEXT_CHANGE",message:l.Deprecated.SHOW_DEPRECATED_FEATURE_PROMPT_LINT_ON_TEXT_CHANGE,moreInfoUrl:"https://github.com/Microsoft/vscode-python/issues/313",setting:{setting:"linting.lintOnTextChange",values:["true",!0]}},{doNotDisplayPromptStateKey:"SHOW_DEPRECATED_FEATURE_PROMPT_FOR_AUTO_COMPLETE_PRELOAD_MODULES",message:l.Deprecated.SHOW_DEPRECATED_FEATURE_PROMPT_FOR_AUTO_COMPLETE_PRELOAD_MODULES,moreInfoUrl:"https://github.com/Microsoft/vscode-python/issues/1704",setting:{setting:"autoComplete.preloadModules"}}];let h=class{get features(){return this._features}set features(e){e.kernelPickerType!==this._features.kernelPickerType&&(this._features=e,this._onDidChangeFeatures.fire())}constructor(e,t,n,r,i){this.persistentStateFactory=e,this.cmdMgr=t,this.configService=n,this.workspace=r,this.appShell=i,this._onDidChangeFeatures=new d.Emitter,this.onDidChangeFeatures=this._onDidChangeFeatures.event,this._features={kernelPickerType:"Stable"},this.disposables=[],this._updateFeatures(),this.disposables.push(this.configService.getSettings().onDidChange((()=>{this._updateFeatures()}))),this.disposables.push(this.workspace.onDidChangeConfiguration((()=>{this._updateFeatures()})))}_updateFeatures(){const e="mru"===this.workspace.getConfiguration("notebook.kernelPicker").get("type")?"Insiders":"Stable";this.features={kernelPickerType:e}}dispose(){this.disposables.forEach((e=>e.dispose()))}initialize(){p.forEach(this.registerDeprecation.bind(this))}registerDeprecation(e){Array.isArray(e.commands)&&e.commands.forEach((t=>{this.disposables.push(this.cmdMgr.registerCommand(t,(()=>this.notifyDeprecation(e)),this))})),e.setting&&this.checkAndNotifyDeprecatedSetting(e)}async notifyDeprecation(e){const t=this.persistentStateFactory.createGlobalPersistentState(e.doNotDisplayPromptStateKey,!0);if(!t.value)return;const n="Learn more",r="Never show again",i=await this.appShell.showInformationMessage(e.message,n,r);if(i)switch(i){case n:(0,c.launch)(e.moreInfoUrl);break;case r:await t.updateValue(!1);break;default:throw new Error("Selected option not supported.")}}checkAndNotifyDeprecatedSetting(e){let t=!1;Array.isArray(this.workspace.workspaceFolders)&&this.workspace.workspaceFolders.length>0?this.workspace.workspaceFolders.forEach((n=>{t||(t=this.isDeprecatedSettingAndValueUsed(this.workspace.getConfiguration("jupyter",n.uri),e.setting))})):t=this.isDeprecatedSettingAndValueUsed(this.workspace.getConfiguration("jupyter"),e.setting),t&&this.notifyDeprecation(e).catch((e=>(0,a.traceVerbose)("Jupyter Extension: notifyDeprecation",e)))}isDeprecatedSettingAndValueUsed(e,t){if(!e.has(t.setting))return!1;const n=e.get(t.setting);return Array.isArray(t.values)&&0!==t.values.length?Array.isArray(t.values)&&0!==t.values.length?t.values.indexOf(e.get(t.setting))>=0:void 0!==n&&(!Array.isArray(n)||n.length>0):!Array.isArray(n)||n.length>0}};h=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IPersistentStateFactory)),i(1,(0,o.inject)(s.ICommandManager)),i(2,(0,o.inject)(u.IConfigurationService)),i(3,(0,o.inject)(s.IWorkspaceService)),i(4,(0,o.inject)(s.IApplicationShell))],h),t.FeatureManager=h},20397:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disposeAllDisposables=void 0,t.disposeAllDisposables=function(e=[]){for(;e.length;){const t=e.shift();if(t)try{t.dispose()}catch{}}}},58802:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserService=t.launch=void 0;const i=n(86700),o=n(66828),s=n(58681);function a(e){o.env.openExternal(o.Uri.parse(e)).then(s.noop,s.noop)}t.launch=a;let c=class{launch(e){a(e)}};c=r([(0,i.injectable)()],c),t.BrowserService=c},54443:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpClient=void 0;const c=n(86700),l=n(10053),u=n(11642),d=s(n(54098));let p=class{constructor(e){this.requestOptions={};const t=e.getConfiguration("http").get("proxy","");t&&(this.requestOptions={headers:{proxy:t}})}async downloadFile(e){return d.fetch(e,this.requestOptions)}async exists(e){try{return 200===(await this.downloadFile(e)).status}catch(t){return(0,u.traceVerbose)(`HttpClient - Failure checking for file ${e}: ${t}`),!1}}};p=o([(0,c.injectable)(),a(0,(0,c.inject)(l.IWorkspaceService))],p),t.HttpClient=p},61885:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PersistentStateFactory=t.PersistentState=void 0;const o=n(86700),s=n(42080);class a{constructor(e,t,n,r){this.storage=e,this.key=t,this.defaultValue=n,this.expiryDurationMs=r}get value(){if(this.expiryDurationMs){const e=this.storage.get(this.key,{data:this.defaultValue});return!e||!e.expiry||e.expiry<Date.now()?this.defaultValue:e.data}return this.storage.get(this.key,this.defaultValue)}async updateValue(e){this.expiryDurationMs?await this.storage.update(this.key,{data:e,expiry:Date.now()+this.expiryDurationMs}):await this.storage.update(this.key,e)}}t.PersistentState=a;let c=class{constructor(e,t){this.globalState=e,this.workspaceState=t}createGlobalPersistentState(e,t,n){return new a(this.globalState,e,t,n)}createWorkspacePersistentState(e,t,n){return new a(this.workspaceState,e,t,n)}};c=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IMemento)),i(0,(0,o.named)(s.GLOBAL_MEMENTO)),i(1,(0,o.inject)(s.IMemento)),i(1,(0,o.named)(s.WORKSPACE_MEMENTO))],c),t.PersistentStateFactory=c},59052:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isFileNotFoundError=void 0;const s=o(n(66828));var a;!function(e){const t=s.FileSystemError.FileNotFound().name,n=s.FileSystemError.FileExists().name,r=s.FileSystemError.FileIsADirectory().name,i=s.FileSystemError.FileNotADirectory().name,o=s.FileSystemError.NoPermissions().name,a=[t,n,r,i,o];e.isFileNotFound=function(e){return function(e,t){if(a.includes(e.name))return e.name===t}(e,t)}}(a||(a={})),t.isFileNotFoundError=function(e){const t=a.isFileNotFound(e);return void 0!==t?t:function(e,t){const n=e.code;if(n)return"ENOENT"===n}(e)}},67646:function(e,t,n){"use strict";var r=n(48764).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},c=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FileSystem=t.ENCODING=void 0;const u=n(86700),d=a(n(66828)),p=n(42080),h=a(n(52859)),f=l(n(71171)),g=n(59052),m=n(11642),y=n(46729);t.ENCODING="utf8";let v=class{constructor(e,t){this.extensionContext=e,this.httpClient=t,this.vscfs=d.workspace.fs}arePathsSame(e,t){return h.isEqual(e,t)}async getFiles(e){return(await this.vscfs.readDirectory(e)).filter((e=>e[1]===d.FileType.File)).map((e=>d.Uri.file(e[0])))}async copy(e,t,n){await this.vscfs.copy(e,t,n)}async createDirectory(e){await this.vscfs.createDirectory(e)}async delete(e){await this.vscfs.delete(e)}async readFile(e){const n=await this.vscfs.readFile(e);return r.from(n).toString(t.ENCODING)}async stat(e){return this.vscfs.stat(e)}async writeFile(e,t){const n="string"==typeof t?r.from(t):t;return this.vscfs.writeFile(e,n)}async createTemporaryFile(e){const t=h.joinPath(this.extensionContext.globalStorageUri,"tmp");await this.vscfs.createDirectory(t);const n=h.joinPath(t,`${e.prefix}-${(0,f.default)()}.${e.fileExtension}`);return await this.writeFile(n,""),{file:n,dispose:()=>this.vscfs.delete(n)}}async exists(e,t){if("http"===e.scheme.toLowerCase()||"https"===e.scheme.toLowerCase())return this.httpClient.exists(e.toString());let n;try{n=await this.stat(e)}catch(t){return(0,g.isFileNotFoundError)(t)||(0,m.traceError)(`stat() failed for "${e}"`,t),!1}return void 0===t||(t===d.FileType.Unknown?n.type===d.FileType.Unknown:(n.type&t)===t)}async getFileHash(e){const t=await this.stat(e),n=`${t.ctime}-${t.mtime}`;return(0,y.computeHash)(n,"SHA-512")}};v=s([(0,u.injectable)(),c(0,(0,u.inject)(p.IExtensionContext)),c(1,(0,u.inject)(p.IHttpClient))],v),t.FileSystem=v},99746:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isParentPath=t.arePathsSame=t.normCasePath=void 0;const s=n(72728),a=o(n(15948));function c(e){return(0,s.getOSType)()===s.OSType.Windows?a.normalize(e).toUpperCase():a.normalize(e)}t.normCasePath=c,t.arePathsSame=function(e,t){return c(e)===c(t)},t.isParentPath=function(e,t){return t.endsWith(a.sep)||(t+=a.sep),e.endsWith(a.sep)||(e+=a.sep),c(e).startsWith(c(t))}},35412:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getDisplayPath=t.getFilePath=void 0;const s=o(n(15948)),a=o(n(52859)),c=n(72728);function l(e){const t=(0,c.getOSType)()===c.OSType.Windows;if(e){const n=a.originalFSPath(e);return n&&n.startsWith(s.sep)&&n.length>1&&n[1]!==s.sep&&t?n.slice(1):n||""}return""}function u(e,t,n){const r=(0,c.getOSType)()===c.OSType.Windows;if(e&&t&&a.isEqualOrParent(e,t,!0)){const n=a.relativePath(t,e);if(n)return r?n.replace(/\//g,"\\"):n}if(e&&n&&a.isEqualOrParent(e,n,!0)){let t=a.relativePath(n,e);if(t)return t=r?t.replace(/\//g,"\\"):t,`~${s.sep}${t}`}return l(e)}t.getFilePath=l,t.getDisplayPath=function(e,t=[],n){const r=u(e,void 0,n),i=t.map((t=>u(e,t.uri,n)));let o=r;return[r,...i].forEach((e=>{e.length<o.length&&(o=e)})),o}},76102:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformService=void 0;const i=n(86700),o=n(72728);let s=class{constructor(){this.osType=o.OSType.Unknown}get tempDir(){}get homeDir(){}get pathVariableName(){return""}get isWindows(){return this.osType===o.OSType.Windows}get isMac(){return this.osType===o.OSType.OSX}get isLinux(){return this.osType===o.OSType.Linux}};s=r([(0,i.injectable)()],s),t.PlatformService=s},63658:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(76102),i=n(83599);t.registerTypes=function(e){e.addSingleton(i.IPlatformService,r.PlatformService)}},83599:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFileSystem=t.IPlatformService=void 0,t.IPlatformService=Symbol("IPlatformService"),t.IFileSystem=Symbol("IFileSystem")},54952:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(44974),i=n(8523),o=n(61885),s=n(42080),a=n(63658),c=n(31104),l=n(46729),u=n(71886),d=n(10053),p=n(52100),h=n(94106),f=n(57703),g=n(68778),m=n(19450),y=n(58802),v=n(61847),b=n(54443),w=n(62392),C=n(37419);t.registerTypes=function(e){e.addSingletonInstance(s.IsWindows,!1),e.addSingleton(s.IExperimentService,r.ExperimentService),e.addSingleton(s.IFeaturesManager,i.FeatureManager),e.addSingleton(s.IPersistentStateFactory,o.PersistentStateFactory),e.addSingleton(s.IExtensions,c.Extensions),e.addSingleton(s.ICryptoUtils,l.CryptoUtils),e.addSingleton(d.IEncryptedStorage,u.EncryptedStorage),e.addSingleton(d.IDocumentManager,p.DocumentManager),e.addSingleton(d.IDebugService,v.DebugService),e.addSingleton(d.IVSCodeNotebook,h.VSCodeNotebook),e.addSingleton(d.IClipboard,f.ClipboardService),e.addSingleton(s.IAsyncDisposableRegistry,g.AsyncDisposableRegistry),e.addSingleton(m.IMultiStepInputFactory,m.MultiStepInputFactory),e.addSingleton(s.IBrowserService,y.BrowserService),e.addSingleton(s.IHttpClient,b.HttpClient),e.addSingleton(s.IDataFrameScriptGenerator,w.DataFrameScriptGenerator),e.addSingleton(s.IVariableScriptGenerator,C.VariableScriptGenerator),(0,a.registerTypes)(e)}},42080:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.IDataFrameScriptGenerator=t.IVariableScriptGenerator=t.IDataScienceCommandListener=t.IExperimentService=t.IAsyncDisposableRegistry=t.ICryptoUtils=t.IFeaturesManager=t.IJupyterExtensionBanner=t.IBrowserService=t.IExtensions=t.IExtensionContext=t.IHttpClient=t.IConfigurationService=t.IRandom=t.IPersistentStateFactory=t.BannerType=t.WORKSPACE_MEMENTO=t.GLOBAL_MEMENTO=t.IMemento=t.IDisposableRegistry=t.IsWindows=t.IOutputChannel=t.IsPreRelease=t.IsWebExtension=t.IsDevMode=t.IsCodeSpace=void 0,t.IsCodeSpace=Symbol("IsCodeSpace"),t.IsDevMode=Symbol("IsDevMode"),t.IsWebExtension=Symbol("IsWebExtension"),t.IsPreRelease=Symbol("IsPreRelease"),t.IOutputChannel=Symbol("IOutputChannel"),t.IsWindows=Symbol("IS_WINDOWS"),t.IDisposableRegistry=Symbol("IDisposableRegistry"),t.IMemento=Symbol("IGlobalMemento"),t.GLOBAL_MEMENTO=Symbol("IGlobalMemento"),t.WORKSPACE_MEMENTO=Symbol("IWorkspaceMemento"),(n=t.BannerType||(t.BannerType={}))[n.InsidersNotebookSurvey=0]="InsidersNotebookSurvey",n[n.ExperimentNotebookSurvey=1]="ExperimentNotebookSurvey",t.IPersistentStateFactory=Symbol("IPersistentStateFactory"),t.IRandom=Symbol("IRandom"),t.IConfigurationService=Symbol("IConfigurationService"),t.IHttpClient=Symbol("IHttpClient"),t.IExtensionContext=Symbol("ExtensionContext"),t.IExtensions=Symbol("IExtensions"),t.IBrowserService=Symbol("IBrowserService"),t.IJupyterExtensionBanner=Symbol("IJupyterExtensionBanner"),t.IFeaturesManager=Symbol("IFeaturesManager"),t.ICryptoUtils=Symbol("ICryptoUtils"),t.IAsyncDisposableRegistry=Symbol("IAsyncDisposableRegistry"),t.IExperimentService=Symbol("IExperimentService"),t.IDataScienceCommandListener=Symbol("IDataScienceCommandListener"),t.IVariableScriptGenerator=Symbol("IVariableScriptGenerator"),t.IDataFrameScriptGenerator=Symbol("IDataFrameScriptGenerator")},86563:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.parseSemVer=t.removeLinesFromFrontAndBack=t.removeLinesFromFrontAndBackNoConcat=t.generateMarkdownFromCodeLines=t.appendLineFeed=t.stripComments=t.parseForComments=t.formatStreamText=t.splitMultilineString=t.concatMultilineString=t.getAssociatedJupyterNotebook=t.getNotebookFormat=t.getNotebookMetadata=t.isJupyterNotebook=t.generateNewNotebookUri=t.translateKernelLanguageToMonaco=t.traceCellResults=t.pruneCell=t.getResourceType=t.AllowedCellOutputKeys=void 0;const s=n(36625),a=o(n(52859)),c=n(66828),l=n(15925),u=n(11642),d=n(25251);function p(e){let n;switch(e.output_type){case"stream":case"error":case"execute_result":case"display_data":n=t.AllowedCellOutputKeys[e.output_type];break;default:return e}const r={...e};for(const t of Object.keys(e))n.has(t)||delete r[t];return r}function h(e){return"string"==typeof e?e===l.JupyterNotebookView||e===l.InteractiveWindowView:e.notebookType===l.JupyterNotebookView||e.notebookType===l.InteractiveWindowView}function f(e){if(Array.isArray(e))return e;const t=e.toString();if(t.length>0){const e=t.split("\n");return e.map(((t,n)=>n<e.length-1?`${t}\n`:t)).filter((e=>e.length>0))}return[]}t.AllowedCellOutputKeys={stream:new Set(Object.keys({output_type:"stream",name:"stdout",text:""})),error:new Set(Object.keys({output_type:"error",ename:"",evalue:"",traceback:[""]})),display_data:new Set(Object.keys({output_type:"display_data",data:{},metadata:{}})),execute_result:new Set(Object.keys({output_type:"execute_result",execution_count:0,data:{},metadata:{}}))},t.getResourceType=function(e){return e&&a.extname(e).toLowerCase().endsWith("ipynb")?"notebook":"interactive"},t.pruneCell=function(e){const t={...e,source:f(e.source)};if("code"!==t.cell_type)delete t.outputs,delete t.execution_count;else if(t.cell_type){const e=t;e.outputs=e.outputs?e.outputs.map(p):[]}return t},t.traceCellResults=function(e,t){if(t.length>0&&"code"===t[0].data.cell_type){const n=t[0].data,r=n.outputs&&n.outputs[0]?"evalue"in n.outputs[0]:void 0;if(r)(0,u.traceError)(`${e} Error : ${r}`);else if(n.outputs&&n.outputs[0])if(n.outputs[0].output_type.includes("image"))(0,u.traceInfo)(`${e} Output: image`);else{const t=n.outputs[0].data,r=n.outputs[0].text;(0,u.traceInfo)(`${e} Output: ${r||JSON.stringify(t)}`)}}else(0,u.traceInfo)(`${e} no output.`)},t.translateKernelLanguageToMonaco=function(e){return 2===(e=e.toLowerCase()).length&&e.endsWith("#")?`${e.substring(0,1)}sharp`:l.jupyterLanguageToMonacoLanguageMapping.get(e)||e},t.generateNewNotebookUri=function(e,t,n,r){const i=`${d.DataScience.untitledNotebookFileName}-${e}.ipynb`;return r?c.Uri.file(i).with({scheme:"untitled",path:i}):c.Uri.joinPath(t?c.Uri.file(t):c.Uri.file(n),i).with({scheme:"untitled"})},t.isJupyterNotebook=h,t.getNotebookMetadata=function(e){const t=e.metadata?.custom;return JSON.parse(JSON.stringify(t?.metadata||{}))},t.getNotebookFormat=function(e){const t=e.metadata?.custom;return{nbformat:t?.nbformat,nbformat_minor:t?.nbformat_minor}},t.getAssociatedJupyterNotebook=function(e){return c.workspace.notebookDocuments.find((t=>h(t)&&t.getCells().some((t=>t.document===e))))},t.concatMultilineString=function(e){if(Array.isArray(e)){let t="";for(let n=0;n<e.length;n+=1){const r=e[n];t=n<e.length-1&&!r.endsWith("\n")?t.concat(`${r}\n`):t.concat(r)}return t}return e.toString()},t.splitMultilineString=f,t.formatStreamText=function(e){return function(e){for(e=e.replace(/\r+\n/gm,"\n");e.search(/\r[^$]/g)>-1;){var t=e.match(/^(.*)\r+/m)[1],n=e.match(/\r+(.*)$/m)[1];n+=t.slice(n.length,t.length),e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,n)}return e}(function(e){let t=e;do{t=(e=t).replace(/[^\n]\x08/gm,"")}while(t.length<e.length);return e}(e))};const g="'''",m='"""';function y(e,t,n){let r,i,o=0;for(const s of e){const e=s.trim(),a=e.startsWith(g)?g:e.startsWith(m)?m:void 0,c=e.includes(g)?g:e.includes(m)?m:void 0;if(i)i===c&&(i=void 0),n(s,o);else if(r)r===a&&(r=void 0),r&&t(s,o);else if(c&&!a){const t=e.indexOf(c);i=e.lastIndexOf(c)!==t?void 0:c,n(s,o)}else if(a){const n=e.indexOf(a,3);r=n>=0?void 0:a,e.length>3&&t(e.slice(3,n>=0?n:void 0),o)}else e.startsWith("#")?t(e.slice(1),o):n(s,o);o+=1}}function v(e,t="\n",n){return e.map(((r,i)=>{const o=n?n(r):r;return i===e.length-1?`${o}`:`${o}${t}`}))}function b(e){let t=e.length,n=-1;return e.forEach(((e,r)=>{e.trim()&&(t=r,n<0&&(n=r))})),n>=0?e.slice(n,t+1):[]}t.parseForComments=y,t.stripComments=function(e){let t="";return y(e.splitLines({trim:!1,removeEmptyEntries:!1}),(e=>{}),(e=>t=t.concat(`${e}\n`))),t},t.appendLineFeed=v,t.generateMarkdownFromCodeLines=function(e){return v(function(e){const t=[];return y(e,(e=>t.push(e)),(e=>{})),t}(e.slice(e.length>1?1:0)))},t.removeLinesFromFrontAndBackNoConcat=b,t.removeLinesFromFrontAndBack=function(e){return b(Array.isArray(e)?e:e.splitLines({trim:!1,removeEmptyEntries:!1})).join("\n")},t.parseSemVer=function(e){const t=/^\s*(\d+)\.(\d+)\.(.+)\s*$/.exec(e);if(t&&t.length>2){const e=parseInt(t[1],10),n=parseInt(t[2],10),r=parseInt(t[3],10);return(0,s.parse)(`${e}.${n}.${r}`,!0)??void 0}}},43138:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseChain=t.flattenIterator=t.chain=t.NEVER=t.createDeferredFromPromise=t.createDeferred=t.isPromise=t.waitForCondition=t.waitForPromise=t.sleep=void 0,t.sleep=async function(e){return new Promise((t=>{setTimeout((()=>t(e)),e)}))},t.waitForPromise=async function(e,t){return new Promise(((n,r)=>{const i=setTimeout((()=>n(null)),t);e.then((e=>{clearTimeout(i),n(e)})).catch((e=>{clearTimeout(i),r(e)}))}))},t.waitForCondition=async function(e,t,n){return new Promise((r=>{let i;const o=setTimeout((()=>i(!1)),t),s=setInterval((()=>{e().then((e=>{e&&i(!0)})).catch((e=>i(!1)))}),n);i=e=>{clearTimeout(o),clearInterval(s),r(e)}}))},t.isPromise=function(e){return"function"==typeof e?.then&&"function"==typeof e?.catch};class n{get value(){return this._value}constructor(e=null){this.scope=e,this._resolved=!1,this._rejected=!1,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}resolve(e){this._value=e,this._resolve.apply(this.scope?this.scope:this,arguments),this._resolved=!0}reject(e){this._reject.apply(this.scope?this.scope:this,arguments),this._rejected=!0}get promise(){return this._promise}get resolved(){return this._resolved}get rejected(){return this._rejected}get completed(){return this._rejected||this._resolved}}function r(e=null){return new n(e)}async function i(e,t){const n=void 0===t?-1:t;try{return{index:n,result:await e.next(),err:null}}catch(e){return{index:n,err:e,result:null}}}t.createDeferred=r,t.createDeferredFromPromise=function(e){const t=r();return e.then(t.resolve.bind(t)).catch(t.reject.bind(t)),t},t.NEVER=new Promise((()=>{})),t.chain=async function*(e,n){const r=e.map(i);let o=e.length;for(;o>0;){const{index:s,result:a,err:c}=await Promise.race(r);null!==c?(r[s]=t.NEVER,o-=1,void 0!==n&&await n(c,s)):a.done?(r[s]=t.NEVER,o-=1,void 0!==a.value&&(yield a.value)):(r[s]=i(e[s],s),yield a.value)}},t.flattenIterator=async function(e){const t=[];let n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t},t.PromiseChain=class{constructor(){this.currentPromise=Promise.resolve(void 0)}async chain(e){const t=r(),n=this.currentPromise;return this.currentPromise=this.currentPromise.then((async()=>{try{const n=await e();t.resolve(n)}catch(e){throw t.reject(e),e}})),await n,t.promise}chainFinally(e){const t=r();return this.currentPromise=this.currentPromise.finally((()=>e().then((e=>t.resolve(e))).catch((e=>t.reject(e))))),t.promise}}},47440:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InMemoryCache=t.clearCache=t.getCacheKeyFromFunctionArgs=t.getGlobalCacheStore=t.DataWithExpiry=void 0,n(8513);const r=new Map;class i{constructor(e,t){this._data=t,this.expiryTime=e+Date.now()}get expired(){const e=this.expiryTime<=Date.now();return e&&(this._data=void 0),e}get data(){return this.expired&&(this._data=void 0),this._data}}t.DataWithExpiry=i;const o=new Map;t.getGlobalCacheStore=function(){return o},t.getCacheKeyFromFunctionArgs=function(e,t){return`KeyPrefix=${e}-Args=${t.map((e=>`${JSON.stringify(e)}`)).join("-Arg-Separator-")}`},t.clearCache=function(){o.clear(),r.clear()},t.InMemoryCache=class{constructor(e,t=""){this.expiryDurationMs=e,this.cacheKey=t}get hasData(){const e=o.get(this.cacheKey);return!(!e||e.expired)}get data(){if(this.hasData)return o.get(this.cacheKey)?.data}set data(e){const t=new i(this.expiryDurationMs,e);o.set(this.cacheKey,t)}clear(){o.delete(this.cacheKey)}}},85446:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chainable=t.testOnlyMethod=t.trace=t.swallowExceptions=t.cache=t.makeDebounceAsyncDecorator=t.makeDebounceDecorator=t.debounceAsync=t.debounceSync=void 0,n(8513);const r=n(15925),i=n(43138),o=n(47440),s=n(58681),a=n(11642),c=n(23279);function l(e){return function(t,n,r){const i=r.value,o=c((function(){return i.apply(this,arguments)}),e,{});r.value=o}}function u(e){return function(t,n,r){const o=r.value,a={started:!1,deferred:void 0,timer:void 0};r.value=function(){const t=a.deferred;if(t&&a.started)return t.promise;const n=t&&t.completed,r=a.deferred=!t||n?(0,i.createDeferred)():t;return r.promise.catch(s.noop),a.timer&&clearTimeout(a.timer),a.timer=setTimeout((async()=>{a.started=!0,o.apply(this).then((e=>{a.started=!1,r.resolve(e)})).catch((e=>{a.started=!1,r.reject(e)}))}),e||0),r.promise}}}t.debounceSync=function(e){return(0,r.isTestExecution)()&&(e=void 0),l(e)},t.debounceAsync=function(e){return(0,r.isTestExecution)()&&(e=void 0),u(e)},t.makeDebounceDecorator=l,t.makeDebounceAsyncDecorator=u;const d=(0,o.getGlobalCacheStore)();t.cache=function(e){return function(t,n,i){const s=i.value,c=`Cache_Method_Output_${"constructor"in t&&t.constructor.name?t.constructor.name:""}.${n}`;i.value=async function(...t){if((0,r.isTestExecution)())return s.apply(this,t);const n=(0,o.getCacheKeyFromFunctionArgs)(c,t),i=d.get(n);if(i&&!i.expired)return(0,a.traceVerbose)(`Cached data exists ${n}`),Promise.resolve(i.data);const l=s.apply(this,t);return l.then((t=>d.set(n,new o.DataWithExpiry(e,t)))).ignoreErrors(),l}}},t.swallowExceptions=function(e){return function(t,n,i){const o=i.value,s=`Jupyter Extension (Error in ${e||n}, method:${n}):`;i.value=function(...e){try{const t=o.apply(this,e);if(t&&"function"==typeof t.then&&"function"==typeof t.catch)return t.catch((e=>{(0,r.isTestExecution)()||(0,a.traceError)(s,e)}))}catch(e){if((0,r.isTestExecution)())return;(0,a.traceError)(s,e)}}}},t.trace=function(e,t){return function(n,r,i){const o=i.value;return i.value=function(...i){const a={kind:"Class",name:n&&n.constructor?n.constructor.name:"",args:i,methodName:r,target:n},c=this;return(0,s.tracing)((t=>e(a,t)),(()=>o.apply(c,i)),t)},i}},t.testOnlyMethod=function(){return function(e,t,n){const i=n.value;return n.value=function(...e){if(!(0,r.isTestExecution)())throw new Error(`Function: ${t} can only be called from test code`);return i.apply(this,e)},n}},t.chainable=function(){return function(e,t,n){const r=n.value,i=`chainedPromiseFor_${t}`;return n.value=async function(...e){let t=this[i];t=t?t.then((()=>r.apply(this,e))):r.apply(this,e),this[i]=t;const n=t.then((e=>e)).catch((e=>{throw this[i]=void 0,e}));return n.catch(s.noop),n},n}}},62624:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lazy=void 0;class n{constructor(e){this.executor=e,this._didRun=!1}hasValue(){return this._didRun}getValue(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}map(e){return new n((()=>e(this.getValue())))}}t.Lazy=n},25251:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Products=t.Installer=t.Deprecated=t.WebViews=t.DataScience=t.DataScienceSurveyBanner=t.InsidersNativeNotebooksSurveyBanner=t.InteractiveShiftEnterBanner=t.Logging=t.OutputChannelNames=t.Experiments=t.Common=void 0;const r=n(66828),i=n(35412);var o,s,a,c,l,u;(u=t.Common||(t.Common={})).bannerLabelYes=r.l10n.t("Yes"),u.bannerLabelNo=r.l10n.t("No"),u.canceled=r.l10n.t("Canceled"),u.cancel=r.l10n.t("Cancel"),u.ok=r.l10n.t("Ok"),u.refresh=r.l10n.t("Refresh"),u.refreshing=r.l10n.t("Refreshing..."),u.install=r.l10n.t("Install"),u.loadingExtension=r.l10n.t("Jupyter Extension loading..."),u.handleExtensionActivationError=r.l10n.t("Extension activation failed, run the 'Developer: Toggle Developer Tools' command for more information."),u.doNotShowAgain=r.l10n.t("Do not show again"),u.reload=r.l10n.t("Reload"),u.moreInfo=r.l10n.t("More Info"),u.learnMore=r.l10n.t("Learn more"),u.and=r.l10n.t("and"),u.reportThisIssue=r.l10n.t("Report this issue"),u.clickHereForMoreInfoWithHtml=e=>r.l10n.t("Click <a href='{0}'>here</a> for more info.",e),(t.Experiments||(t.Experiments={})).inGroup=e=>r.l10n.t("User belongs to experiment group '{0}'",e),(t.OutputChannelNames||(t.OutputChannelNames={})).jupyter=r.l10n.t("Jupyter"),(t.Logging||(t.Logging={})).currentWorkingDirectory="cwd:",(t.InteractiveShiftEnterBanner||(t.InteractiveShiftEnterBanner={})).bannerMessage=r.l10n.t("Would you like shift-enter to send code to the new Interactive Window experience?"),(t.InsidersNativeNotebooksSurveyBanner||(t.InsidersNativeNotebooksSurveyBanner={})).bannerMessage=r.l10n.t("Can you please take a minute to tell us about your notebooks experience in VS Code?"),(l=t.DataScienceSurveyBanner||(t.DataScienceSurveyBanner={})).bannerLabelYes=r.l10n.t("Yes, take survey now"),l.bannerLabelNo=r.l10n.t("No, thanks"),(c=t.DataScience||(t.DataScience={})).warnWhenSelectingKernelWithUnSupportedPythonVersion=r.l10n.t("The version of Python associated with the selected kernel is no longer supported. Please consider selecting a different kernel."),c.installingPythonExtension=r.l10n.t("Installing Python extension and locating kernels."),c.pythonExtensionRequired=r.l10n.t("The Python Extension is required to perform that task. Click Yes to open Python Extension installation page."),c.rendererExtensionRequired=r.l10n.t("The Renderer Extension is required to view IPyWidgets. Click Yes to open Jupyter Notebook Renderer Extension installation page."),c.rendererExtension1015Required=r.l10n.t("The installed version of the Renderer Extension is outdated and requires and update to view IPyWidgets. Click Yes to open Jupyter Notebook Renderer Extension installation page."),c.pythonExtensionInstalled=r.l10n.t("Python Extension is now installed. Some features might not be available until a notebook or interactive window session is restarted."),c.unknownServerUri=r.l10n.t("Server URL cannot be used. Did you uninstall an extension that provided a Jupyter server connection?"),c.uriProviderDescriptionFormat=(e,t)=>r.l10n.t("{0} (From {1} extension)",e,t),c.unknownPackage=r.l10n.t("unknown"),c.interactiveWindowTitleFormat=e=>r.l10n.t("Interactive - {0}",e),c.interactiveWindowModeBannerTitle=r.l10n.t({message:"Do you want to open a new Interactive Window for this file? [More Information](command:workbench.action.openSettings?%5B%22jupyter.interactiveWindowMode%22%5D).",args:[],comment:'The string "command:workbench.action.openSettings?%5B%22jupyter.interactiveWindowMode%22%5D" should not be translated. It is a command that opens the settings page with the "jupyter.interactiveWindowMode" setting selected.'}),c.interactiveWindowModeBannerSwitchYes=r.l10n.t("Yes"),c.interactiveWindowModeBannerSwitchNo=r.l10n.t("No"),c.dataExplorerTitle=r.l10n.t("Data Viewer"),c.badWebPanelFormatString=e=>r.l10n.t({message:"<html><body><h1>{0} is not a valid file name</h1></body></html>",args:[e],comment:["Only translate the text within the HTML tags"]}),c.installingMissingDependencies=r.l10n.t("Installing missing dependencies"),c.validatingKernelDependencies=r.l10n.t("Validating kernel dependencies"),c.performingExport=r.l10n.t("Performing Export"),c.exportNotebookToPython=r.l10n.t("Exporting Notebook to Python"),c.sessionDisposed=r.l10n.t("Cannot execute code, session has been disposed."),c.passwordFailure=r.l10n.t("Failed to connect to password protected server. Check that password is correct."),c.exportDialogFilter=r.l10n.t("Jupyter Notebooks"),c.exportDialogComplete=e=>r.l10n.t("Notebook written to {0}",e),c.exportDialogFailed=e=>r.l10n.t("Failed to export notebook. {0}",e),c.exportOpenQuestion1=r.l10n.t("Open in editor"),c.runCellLensCommandTitle=r.l10n.t("Run Cell"),c.importDialogTitle=r.l10n.t("Import Jupyter Notebook"),c.importDialogFilter="Jupyter Notebooks",c.notebookCheckForImportNo=r.l10n.t("Later"),c.libraryRequiredToLaunchJupyterNotInstalled=e=>r.l10n.t("Running cells requires {0} package.",e),c.librariesRequiredToLaunchJupyterNotInstalled=e=>r.l10n.t("Running cells requires {0} package.",e),c.libraryRequiredToLaunchJupyterNotInstalledInterpreter=(e,t)=>r.l10n.t("Running cells with '{0}' requires the {1} package.",e,t),c.libraryRequiredToLaunchJupyterKernelNotInstalledInterpreter=(e,t)=>r.l10n.t("Running cells with '{0}' requires the {1} package.",e,t),c.libraryRequiredToLaunchJupyterKernelNotInstalledInterpreterAndRequiresUpdate=(e,t)=>r.l10n.t("Running cells with '{0}' requires the {1} package to be installed or requires an update.",e,t),c.librariesRequiredToLaunchJupyterNotInstalledInterpreter=(e,t)=>r.l10n.t("Running cells with '{0}' requires the {1} package.",e,t),c.installPackageInstructions=(e,t)=>r.l10n.t("Run the following command to install '{0}' into the Python environment. \nCommand: '{1}'",e,t),c.selectJupyterInterpreter=r.l10n.t("Select an Interpreter to start Jupyter"),c.jupyterInstall=r.l10n.t("Install"),c.currentlySelectedJupyterInterpreterForPlaceholder=e=>r.l10n.t("current: {0}",e),c.jupyterNotSupported=e=>r.l10n.t("Jupyter cannot be started. Error attempting to locate Jupyter: {0}",e),c.jupyterNotebookNotInstalledOrNotFound=e=>{if(e){const t=function(e){const t=e.displayName||e.envName||"",n=(0,i.getDisplayPath)(e.uri);return t?` ${t} (${n})`:n}(e);return r.l10n.t("Failed to start Jupyter Server as the packages 'jupyter' and 'notebook' could not be located in the Python environment '{0}'.",t)}return r.l10n.t("Failed to start Jupyter Server as the packages 'jupyter' and 'notebook' could not be located in the Python environment.")},c.jupyterNotSupportedBecauseOfEnvironment=(e,t)=>r.l10n.t("Activating {0} to run Jupyter failed with {1}",e,t),c.jupyterNbConvertNotSupported=r.l10n.t("Jupyter nbconvert is not installed"),c.jupyterLaunchTimedOut=r.l10n.t("The Jupyter notebook server failed to launch in time"),c.jupyterLaunchNoURL=r.l10n.t("Failed to find the URL of the launched Jupyter notebook server"),c.jupyterSelfCertFail=e=>r.l10n.t("The security certificate used by server {0} was not issued by a trusted certificate authority.\r\nThis may indicate an attempt to steal your information.\r\nDo you want to enable the Allow Unauthorized Remote Connection setting for this workspace to allow you to connect?",e),c.jupyterExpiredCertFail=e=>r.l10n.t("The security certificate used by server {0} has expired.\r\nThis may indicate an attempt to steal your information.\r\nDo you want to enable the Allow Unauthorized Remote Connection setting for this workspace to allow you to connect?",e),c.jupyterSelfCertFailErrorMessageOnly=r.l10n.t("The security certificate used by server was not issued by a trusted certificate authority.\r\nThis may indicate an attempt to steal your information."),c.jupyterSelfCertExpiredErrorMessageOnly=r.l10n.t("The security certificate used by server has expired.\r\nThis may indicate an attempt to steal your information."),c.jupyterSelfCertEnable=r.l10n.t("Yes, connect anyways"),c.jupyterSelfCertClose=r.l10n.t("No, close the connection"),c.pythonInteractiveHelpLink=r.l10n.t("See <https://aka.ms/pyaiinstall> for help on installing Jupyter."),c.importingFormat=e=>r.l10n.t("Importing {0}",e),c.startingJupyter=r.l10n.t("Starting Jupyter server"),c.connectingToKernel=e=>r.l10n.t("Connecting to kernel: {0}",e),c.connectingToJupyter=r.l10n.t("Connecting to Jupyter server"),c.exportingFormat=e=>r.l10n.t("Exporting {0}",e),c.runAllCellsLensCommandTitle=r.l10n.t("Run All Cells"),c.runAllCellsAboveLensCommandTitle=r.l10n.t("Run Above"),c.runCellAndAllBelowLensCommandTitle=r.l10n.t("Run Below"),c.restartKernelMessage=r.l10n.t("Do you want to restart the Jupyter kernel? All variables will be lost."),c.restartKernelMessageYes=r.l10n.t("Restart"),c.restartKernelMessageDontAskAgain=r.l10n.t("Don't Ask Again"),c.automaticallyReconnectingToAKernelProgressMessage=e=>r.l10n.t("Reconnecting to the kernel {0}",e),c.restartingKernelStatus=e=>r.l10n.t("Restarting Kernel {0}",e),c.interruptingKernelFailed=r.l10n.t("Kernel interrupt failed. Jupyter server is hung. Please reload VS Code."),c.sessionStartFailedWithKernel=e=>r.l10n.t({message:"Failed to start the Kernel '{0}'. \nView Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel']}),c.failedToStartJupyter=e=>r.l10n.t({message:"Failed to start Jupyter in the environment '{0}'. \nView Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel']}),c.failedToStartJupyterWithErrorInfo=(e,t)=>r.l10n.t({message:"Failed to start Jupyter in the environment '{0}'. \n{1} \nView Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e,t],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel']}),c.failedToStartJupyterDueToOutdatedTraitlets=(e,t)=>r.l10n.t({message:"Failed to start Jupyter in the environment '{0}' possibly due to an outdated version of 'traitlets'. \n{1} \nConsider updating the 'traitlets' module to '5.1.1' or later. \nView Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e,t],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel',"Do not translate the text 'traitlets', that is a Python module name"]}),c.failedToStartKernel=r.l10n.t("Failed to start the Kernel."),c.failedToRestartKernel=r.l10n.t("Failed to restart the Kernel."),c.failedToInterruptKernel=r.l10n.t("Failed to interrupt the Kernel."),c.rawKernelStartFailedDueToTimeout=e=>r.l10n.t({message:"Unable to start Kernel '{0}' due to connection timeout. \nView Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel']}),c.viewJupyterLogForFurtherInfo=r.l10n.t({message:"View Jupyter [log](command:jupyter.viewOutput) for further details.",comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel']}),c.kernelDied=e=>r.l10n.t({message:"The kernel died. Error: {0}... View Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel']}),c.kernelDiedWithoutError=e=>r.l10n.t({message:"The kernel '{0}' died. Click [here](https://aka.ms/vscodeJupyterKernelCrash) for more info. View Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel',"Do not translate the link https://aka.ms/vscodeJupyterKernelCrash"]}),c.failedToStartAnUntrustedKernelSpec=(e,t)=>r.l10n.t({message:"The kernel '{0}' was not started as it is located in an insecure location '{1}'.  \nClick [here](https://aka.ms/JupyterTrustedKernelPaths) for further details, optionally update the setting [jupyter.kernels.trusted](command:workbench.action.openSettings?[\"jupyter.kernels.trusted\"]) to trust the kernel.",args:[e,t],comment:['Do not translate the text "jupyter.kernels.trusted", that is a setting in VS Code','Do not translate the text command:workbench.action.openSettings?["jupyter.kernels.trusted"], that is a command Id that will be used by VS Code to open the output panel',"Do not translate the link https://aka.ms/JupyterTrustedKernelPaths"]}),c.kernelDiedWithoutErrorAndAutoRestarting=e=>r.l10n.t({message:"The kernel '{0}' died and is being automatically restarted by Jupyter. Click [here](https://aka.ms/vscodeJupyterKernelCrash) for more info. View Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel',"Do not translate the link https://aka.ms/vscodeJupyterKernelCrash"]}),c.kernelCrashedDueToCodeInCurrentOrPreviousCell=r.l10n.t({message:"The Kernel crashed while executing code in the the current cell or a previous cell. Please review the code in the cell(s) to identify a possible cause of the failure. Click <a href='https://aka.ms/vscodeJupyterKernelCrash'>here</a> for more info. View Jupyter [log](command:jupyter.viewOutput) for further details.",comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel',"Do not translate the link https://aka.ms/vscodeJupyterKernelCrash"]}),c.kernelDisconnected=e=>r.l10n.t("Unable to connect to the kernel '{0}', please verify the Jupyter Server connection. View Jupyter [log](command:jupyter.viewOutput) for further details.",e),c.cannotRunCellKernelIsDead=e=>r.l10n.t("Cannot run cells, as the kernel '{0}' is dead.",e),c.showJupyterLogs=r.l10n.t("Show Jupyter Logs."),c.restartKernel=r.l10n.t("Restart Kernel"),c.reloadRequired=r.l10n.t("Please reload the window for new settings to take effect."),c.restartedKernelHeader=e=>r.l10n.t("Restarted {0}",e),c.restartingKernelCustomHeader=e=>r.l10n.t("_Restarting {0}..._",e),c.restartingKernelHeader=r.l10n.t("_Restarting kernel..._"),c.startingNewKernelHeader=r.l10n.t("_Connecting to kernel..._"),c.startingNewKernelCustomHeader=e=>r.l10n.t("_Connecting to {0}..._",e),c.jupyterSelectURIPrompt=r.l10n.t("Enter the URL of the running Jupyter server"),c.jupyterSelectURIQuickPickTitle=r.l10n.t("Enter the URL of the running Jupyter server"),c.jupyterSelectURIQuickPickTitleOld=r.l10n.t("Pick how to connect to Jupyter"),c.jupyterSelectURIQuickPickPlaceholder=r.l10n.t("Choose an option"),c.jupyterSelectURIQuickPickCurrent=e=>r.l10n.t("Current: {0}",e),c.jupyterSelectURINoneLabel=r.l10n.t("None"),c.jupyterSelectURINoneDetail=r.l10n.t("Do not connect to any remote Jupyter server"),c.jupyterSelectURIMRUDetail=e=>r.l10n.t("Last Connection: {0}",e.toLocaleString()),c.jupyterSelectURINewLabel=r.l10n.t("Existing"),c.jupyterSelectURINewDetail=r.l10n.t("Specify the URL of an existing server"),c.jupyterSelectURIInvalidURI=r.l10n.t("Invalid URL specified"),c.jupyterSelectURIRunningDetailFormat=(e,t)=>r.l10n.t("Last connection {0}. {1} existing connections.",e.toLocaleString(),t.toString()),c.jupyterSelectUserAndPasswordTitle=r.l10n.t("Enter your user name and password to connect to Jupyter Hub"),c.jupyterRenameServer=r.l10n.t("Change Server Display Name (Leave Blank To Use URL)"),c.jupyterSelectUserPrompt=r.l10n.t("Enter your user name"),c.jupyterSelectPasswordPrompt=r.l10n.t("Enter your password"),c.pythonNotInstalled=r.l10n.t("Python is not installed. \nPlease download and install Python in order to execute cells in this notebook. \nOnce installed please reload VS Code."),c.jupyterNotebookFailure=e=>r.l10n.t("Jupyter notebook failed to launch. \r\n{0}",e),c.remoteJupyterServerProvidedBy3rdPartyExtensionNoLongerValid=e=>r.l10n.t("The remote Jupyter Server contributed by the extension '{0}' is no longer available.",e),c.remoteJupyterConnectionFailedWithServerWithError=(e,t)=>r.l10n.t("Failed to connect to the remote Jupyter Server '{0}'. Verify the server is running and reachable. ({1}).",e,t),c.remoteJupyterConnectionFailedWithServer=e=>r.l10n.t("Failed to connect to the remote Jupyter Server '{0}'. Verify the server is running and reachable.",e),c.remoteJupyterConnectionFailedWithoutServerWithError=e=>r.l10n.t("Connection failure. Verify the server is running and reachable. ({0}).",e),c.remoteJupyterConnectionFailedWithoutServerWithErrorWeb=e=>r.l10n.t("Connection failure. Verify the server is running and reachable from a browser. ({0}). \nWhen connecting from vscode.dev Jupyter servers must be started with specific options to connect. \nClick [here](https://aka.ms/vscjremoteweb) for more information.",e),c.removeRemoteJupyterConnectionButtonText=r.l10n.t("Forget Connection"),c.jupyterNotebookRemoteConnectFailedWeb=e=>r.l10n.t("Failed to connect to remote Jupyter server.\r\nCheck that the Jupyter Server URL can be reached from a browser.\r\n{0}. Click [here](https://aka.ms/vscjremoteweb) for more information.",e),c.packageNotInstalledWindowsLongPathNotEnabledError=(e,t)=>r.l10n.t("Support for Windows Long Path has not been enabled, hence the package {0} could not be installed into the Python Environment '{1}'.\nPlease ensure that support for Windows Long Path is enabled.\nSee [here](https://pip.pypa.io/warnings/enable-long-paths) for more information.",e,t),c.changeRemoteJupyterConnectionButtonText=r.l10n.t("Manage Connections"),c.rawConnectionBrokenError=r.l10n.t("Direct kernel connection broken"),c.jupyterServerCrashed=e=>r.l10n.t("Jupyter server crashed. Unable to connect. \r\nError code from Jupyter: {0}",e.toString()),c.jupyterKernelSpecModuleNotFound=e=>r.l10n.t("'Kernelspec' module not installed in the selected interpreter ({0}).\n Please re-install or update 'jupyter'.",e),c.interruptKernelStatus=r.l10n.t("Interrupting Jupyter Kernel"),c.exportPythonQuickPickLabel=r.l10n.t("Python Script"),c.exportHTMLQuickPickLabel=r.l10n.t("HTML"),c.exportPDFQuickPickLabel=r.l10n.t("PDF"),c.restartKernelAfterInterruptMessage=r.l10n.t("Interrupting the kernel timed out. Do you want to restart the kernel instead? All variables will be lost."),c.documentMismatch=e=>r.l10n.t("Cannot run cells, duplicate documents for {0} found.",e),c.jupyterGetVariablesBadResults=r.l10n.t("Failed to fetch variable info from the Jupyter server."),r.l10n.t("Failure to create an 'Interactive' window. Try reinstalling the Python Extension."),c.jupyterGetVariablesExecutionError=e=>r.l10n.t("Failure during variable extraction: \r\n{0}",e),c.selectKernel=r.l10n.t("Change Kernel"),c.selectDifferentKernel=r.l10n.t("Select a different Kernel"),c.kernelFilterPlaceholder=r.l10n.t("Choose the kernels that are available in the kernel picker."),c.recommendedKernelCategoryInQuickPick=r.l10n.t("Recommended"),c.createPythonEnvironmentInQuickPick=r.l10n.t("Create Python Environment"),c.selectDifferentJupyterInterpreter=r.l10n.t("Change Interpreter"),c.pandasTooOldForViewingFormat=(e,t)=>r.l10n.t({message:"Python package 'pandas' is version {0}. Version {1} or greater is required for viewing data.",args:[e,t],comment:["Do not translate 'pandas' as that is a Python module name"]}),c.pandasRequiredForViewing=e=>r.l10n.t({message:"Python package 'pandas' version {0} (or above) is required for viewing data.",args:[e],comment:["Do not translate 'pandas' as that is a Python module name"]}),c.tooManyColumnsMessage=r.l10n.t("Variables with over a 1000 columns may take a long time to display. Are you sure you wish to continue?"),c.tooManyColumnsYes=r.l10n.t("Yes"),c.tooManyColumnsNo=r.l10n.t("No"),c.tooManyColumnsDontAskAgain=r.l10n.t("Don't Ask Again"),c.plotViewerTitle=r.l10n.t("Plots"),c.exportPlotTitle=r.l10n.t("Save plot image"),c.pdfFilter="PDF",c.pngFilter="PNG",c.svgFilter="SVG",c.exportImageFailed=e=>r.l10n.t("Error exporting image: {0}",e),c.jupyterDataRateExceeded=r.l10n.t({message:"Cannot view variable because data rate exceeded. Please restart your server with a higher data rate limit. For example, --NotebookApp.iopub_data_rate_limit=10000000000.0",comment:["Do not translate the text --NotebookApp.iopub_data_rate_limit=10000000000.0 as that is a command argument."]}),c.addCellBelowCommandTitle=r.l10n.t("Add cell"),c.debugCellCommandTitle=r.l10n.t("Debug Cell"),c.debugStepOverCommandTitle=r.l10n.t("Step over"),c.debugContinueCommandTitle=r.l10n.t("Continue"),c.debugStopCommandTitle=r.l10n.t("Stop"),c.runCurrentCellAndAddBelow=r.l10n.t("Run current cell and add empty cell below"),c.jupyterDebuggerNotInstalledError=e=>r.l10n.t("Pip module {0} is required for debugging cells. You will need to install it to debug cells.",e),c.jupyterDebuggerOutputParseError=e=>r.l10n.t("Unable to parse {0} output, please log an issue with https://github.com/microsoft/vscode-jupyter",e),c.cellStopOnErrorMessage=r.l10n.t("Cell was canceled due to an error in a previous cell."),c.scrollToCellTitleFormatMessage=e=>r.l10n.t("Go to [{0}]",e.toString()),c.instructionComments=e=>r.l10n.t("# To add a new cell, type '{0}'\n# To add a new markdown cell, type '{0} [markdown]'\n",e),c.untitledNotebookFileName=r.l10n.t("Untitled"),c.exportButtonTitle=r.l10n.t("Export"),c.exportAsQuickPickPlaceholder=r.l10n.t("Export As..."),c.openExportedFileMessage=r.l10n.t("Would you like to open the exported file?"),c.openExportFileYes=r.l10n.t("Yes"),c.openExportFileNo=r.l10n.t("No"),c.exportFailedGeneralMessage=r.l10n.t({message:"Please check the 'Jupyter' [output](command:jupyter.viewOutput) panel for further details.",comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel']}),c.exportToPDFDependencyMessage=r.l10n.t('If you have not installed xelatex (TeX) you will need to do so before you can export to PDF, for further instructions please look https://nbconvert.readthedocs.io/en/latest/install.html#installing-tex. \r\nTo avoid installing xelatex (TeX) you might want to try exporting to HTML and using your browsers "Print to PDF" feature.'),c.failedExportMessage=r.l10n.t("Export failed."),c.startingJupyterLogMessage=(e,t)=>r.l10n.t("Starting Jupyter from {0} with arguments {1}",e,t),c.waitingForJupyterSessionToBeIdle=r.l10n.t("Waiting for Jupyter Session to be idle"),c.gettingListOfKernelsForLocalConnection=r.l10n.t("Fetching Kernels"),c.gettingListOfKernelsForRemoteConnection=r.l10n.t("Fetching Kernels"),c.gettingListOfKernelSpecs=r.l10n.t("Fetching Kernel specs"),c.startingJupyterNotebook=r.l10n.t("Starting Jupyter Notebook"),c.registeringKernel=r.l10n.t("Registering Kernel"),c.jupyterCommandLineReloadQuestion=r.l10n.t("Please reload the window when changing the Jupyter command line."),c.jupyterCommandLineReloadAnswer=r.l10n.t("Reload"),c.connectingToJupyterUri=e=>r.l10n.t("Connecting to Jupyter server at {0}",e),c.createdNewNotebook=e=>r.l10n.t("{0}: Creating new notebook ",e),c.createdNewKernel=(e,t)=>r.l10n.t("{0}: Kernel started: {1}",e,t),c.kernelInvalid=e=>r.l10n.t("Kernel {0} is not usable. Check the Jupyter output tab for more information.",e),c.jupyterSelectURIRemoteLabel=r.l10n.t("Existing"),c.jupyterSelectURIQuickPickTitleRemoteOnly=r.l10n.t("Pick an already running Jupyter server"),c.jupyterSelectURIRemoteDetail=r.l10n.t("Specify the URL of an existing server"),c.removeRemoteJupyterServerEntryInQuickPick=r.l10n.t("Remove"),c.specifyLocalOrRemoteJupyterServerForConnections=r.l10n.t("Specify Jupyter Server for Connections"),c.jupyterNativeNotebookUriStatusLabelForLocal=r.l10n.t("Jupyter Server: Local"),c.jupyterNativeNotebookUriStatusLabelForRemote=r.l10n.t("Jupyter Server: Remote"),c.loadClassFailedWithNoInternet=(e,t)=>r.l10n.t("Error loading {0}:{1}. Internet connection required for loading 3rd party widgets.",e,t),c.useCDNForWidgetsNoInformation=r.l10n.t("Widgets require us to download supporting files from a 3rd party website."),c.enableCDNForWidgetsSetting=(e,t)=>r.l10n.t("Widgets require us to download supporting files from a 3rd party website. (Error loading {0}:{1}).",e,t),c.enableCDNForWidgetsButton=r.l10n.t("Enable Downloads"),c.unhandledMessage=(e,t)=>r.l10n.t("Unhandled kernel message from a widget: {0} : {1}",e,t),c.cdnWidgetScriptNotAccessibleWarningMessage=(e,t)=>r.l10n.t("Unable to download widget '{0}' from 3rd party website {1}, due to network access. Expected behavior may be affected. Click [here](https://aka.ms/PVSCIPyWidgets) for more information.",e,t),c.widgetScriptNotFoundOnCDNWidgetMightNotWork=(e,t,n)=>r.l10n.t("Unable to find widget '{0}' version '{1}' from configured widget sources {2}. Expected behavior may be affected. Click [here](https://aka.ms/PVSCIPyWidgets) for more information.",e,t,n),c.insecureSessionMessage=r.l10n.t("Connecting over HTTP without a token may be an insecure connection. Do you want to connect to a possibly insecure server?"),c.insecureSessionDenied=r.l10n.t("Denied connection to insecure server."),c.selectKernelForEditor=r.l10n.t("[Select a kernel](command:_notebook.selectKernel) to run cells."),c.needIpykernel6=r.l10n.t("Ipykernel setup required for this feature"),c.setup=r.l10n.t("Setup"),c.showDataViewerFail=r.l10n.t("Failed to create the Data Viewer. Check the Jupyter tab of the Output window for more info."),c.defaultNotebookName=r.l10n.t("default"),c.recommendExtensionForNotebookLanguage=(e,t)=>r.l10n.t("The {0} extension is recommended for notebooks targeting the language '{1}'",e,t),c.kernelWasNotStarted=r.l10n.t("Kernel was not started. A kernel session is needed to start debugging."),c.noNotebookToDebug=r.l10n.t("No active notebook document to debug."),c.cantStartDebugging=r.l10n.t("Can't start debugging."),c.restartNotSupported=r.l10n.t("Restarting is not supported in the interactive window."),c.importingIpynb=r.l10n.t("Importing notebook file"),c.exportingToFormat=e=>r.l10n.t("Exporting to {0}",e),c.kernelCategoryForJupyterSession=e=>r.l10n.t("({0}) Jupyter Session",e),c.kernelPrefixForRemote=r.l10n.t("(Remote)"),c.kernelDefaultRemoteDisplayName=r.l10n.t("Remote"),c.kernelCategoryForJupyterKernel=r.l10n.t("Jupyter Kernel"),c.kernelCategoryForRemoteJupyterKernel=e=>r.l10n.t("({0}) Jupyter Kernel",e),c.kernelCategoryForConda=r.l10n.t("Conda Env"),c.kernelCategoryForPoetry=r.l10n.t("Poetry Env"),c.kernelCategoryForPipEnv=r.l10n.t("Pipenv Env"),c.kernelCategoryForPyEnv=r.l10n.t("PyEnv Env"),c.kernelCategoryForGlobal=r.l10n.t("Global Env"),c.kernelCategoryForVirtual=r.l10n.t("Virtual Env"),c.fileSeemsToBeInterferingWithKernelStartup=e=>r.l10n.t("The file '{0}' seems to be overriding built in modules and interfering with the startup of the kernel. Consider renaming the file and starting the kernel again.",e),c.moduleSeemsToBeInterferingWithKernelStartup=e=>r.l10n.t("The module '{0}' seems to be overriding built in modules and interfering with the startup of the kernel. Consider renaming the folder and starting the kernel again.",e),c.pipCondaInstallHoverWarning=(e,t)=>r.l10n.t("'!{0} install' could install packages into the wrong environment. [More info]({1})",e,t),c.percentPipCondaInstallInsteadOfBang=e=>r.l10n.t({message:"Use '%{0} install' instead of '!{0} install'",args:[e],comment:['Do not translate the string within quotes, such as "%{0} install" and "!{0} install" as that is a Jupyter Shell Magic command']}),c.replacePipCondaInstallCodeAction=e=>r.l10n.t("Replace with '%{0} install'",e),c.failedToStartKernelDueToMissingModule=e=>r.l10n.t("The kernel failed to start due to the missing module '{0}'. Consider installing this module.",e),c.failedToStartKernelDueToImportFailure=e=>r.l10n.t("The kernel failed to start as the module '{0}' could not be imported.",e),c.failedToStartKernelDueToImportFailureFromFile=(e,t)=>r.l10n.t("The kernel failed to start as '{0}' could not be imported from '{1}'.",e,t),c.failedToStartKernelDueToUnknownDllLoadFailure=r.l10n.t("The kernel failed to start as a dll could not be loaded."),c.failedToStartKernelDueToDllLoadFailure=e=>r.l10n.t("The kernel failed to start as the dll '{0}' could not be loaded.",e),c.failedToStartKernelDueToWin32APIFailure=r.l10n.t("The kernel failed to start due to an error with the Win32api module. Consider (re) installing this module."),c.failedToStartKernelDueToPyZmqFailure=r.l10n.t({message:"The kernel failed to start due to an error with the 'pyzmq' module. Consider re-installing this module.",comment:['Do not translate the string "pyzmq" as that is a Python module.']}),c.failedToStartKernelDueToOldIPython=r.l10n.t("The kernel failed to start due to an outdated version of IPython. Consider updating this module to the latest version."),c.failedToStartKernelDueToOldIPyKernel=r.l10n.t("The kernel failed to start due to an outdated version of IPyKernel. Consider updating this module to the latest version."),c.failedToStartKernelDueToMissingPythonEnv=e=>r.l10n.t("The kernel failed to start as the Python Environment '{0}' is no longer available. Consider selecting another kernel or refreshing the list of Python Environments.",e),c.matplotlibWidgetInsteadOfOther=r.l10n.t("'%matplotlib' widget works best inside of VS Code"),c.matplotlibWidgetCodeActionTitle=r.l10n.t("More info"),c.allowExtensionToUseJupyterKernelApi=(e,t)=>r.l10n.t("Do you want to give the extension '{0}' access to the Jupyter Kernels? Clicking '{1}' would allow this extension to execute code against the Jupyter Kernels.",e,t),c.thanksForUsingJupyterKernelApiPleaseRegisterWithUs=r.l10n.t("Thanks for trying the Jupyter API. Please file an issue on our repo to use this API in production. This would prevent us from breaking your extension when updating the API (as it is still a work in progress)."),c.activatingPythonEnvironment=e=>r.l10n.t("Activating Python Environment '{0}'",e),c.cellAtFormat=(e,t)=>r.l10n.t("{0} Cell {1}",e,t),c.jupyterServerConsoleOutputChannel=r.l10n.t("Jupyter Server Console"),c.kernelConsoleOutputChannel=e=>r.l10n.t("{0} Kernel Console Output",e),c.webNotSupported=r.l10n.t("Operation not supported in web version of Jupyter Extension."),c.validationErrorMessageForRemoteUrlProtocolNeedsToBeHttpOrHttps=r.l10n.t("Has to be http(s)"),c.pickRemoteKernelTitle=r.l10n.t("Select a Remote Kernel"),c.pickRemoteKernelPlaceholder=r.l10n.t("type to filter"),c.failedToInstallPythonExtension=r.l10n.t("Failed to install the Python Extension."),c.filesPossiblyOverridingPythonModulesMayHavePreventedKernelFromStarting=e=>r.l10n.t("Some of the following files found in the working directory may have prevented the Kernel from starting. Consider renaming them.",e),c.listOfFilesWithLinksThatMightNeedToBeRenamed=e=>r.l10n.t("File(s): {0} might need to be renamed.",e),c.failedToGetVersionOfPandas=r.l10n.t("Failed to get version of Pandas to use the Data Viewer."),c.failedToInstallPandas=r.l10n.t("Failed to install Pandas to use the Data Viewer."),c.localKernelSpecs=r.l10n.t("Jupyter Kernel..."),c.localPythonEnvironments=r.l10n.t("Python Environments..."),c.UserJupyterServerUrlProviderDisplayName=r.l10n.t("Existing Jupyter Server..."),c.UserJupyterServerUrlProviderDetail=r.l10n.t("Connect to an existing Jupyter Server"),c.UserJupyterServerUrlAlreadyExistError=r.l10n.t("A Jupyter Server with this URL already exists"),c.universalRemoteKernelFinderDisplayName=e=>r.l10n.t("Remote - {0}",e),c.remoteKernelFinderDisplayName=r.l10n.t("Current Remote"),c.kernelPickerSelectKernelTitle=r.l10n.t("Select Kernel"),c.kernelPickerSelectLocalKernelSpecTitle=r.l10n.t("Select a Jupyter Kernel"),c.kernelPickerSelectPythonEnvironmentTitle=r.l10n.t("Select a Python Environment"),c.kernelPickerSelectKernelFromRemoteTitle=e=>r.l10n.t("Select a Kernel from {0}",e),c.installPythonExtensionViaKernelPickerTitle=r.l10n.t("Install Python Extension"),c.installPythonTitle=r.l10n.t("Install Python"),c.failedToFetchKernelSpecsRemoteErrorMessageForQuickPickLabel=r.l10n.t({message:"$(error) Unable to connect to the remote server",comment:"Do not translate the string $(error) as that is a VS Code icon."}),c.failedToFetchKernelSpecsRemoteErrorMessageForQuickPickDetail=r.l10n.t("Ensure the server is running and reachable."),(a=t.WebViews||(t.WebViews={})).collapseSingle=r.l10n.t("Collapse"),a.expandSingle=r.l10n.t("Expand"),a.noRowsInDataViewer=r.l10n.t("No rows match current filter"),a.sliceIndexError=r.l10n.t({message:"Index {0} out of range for axis {1} with {2} elements",comment:["Do not translate the strings {0}, {1} and {2} as they are variable names and will be replaced later"]}),a.sliceMismatchedAxesError=r.l10n.t({message:"Expected {0} axes, got {1} in slice expression",comment:["Do not translate the strings {0} and {2} as they are variable names and will be replaced later"]}),a.fetchingDataViewer=r.l10n.t("Fetching data ..."),a.dataViewerHideFilters=r.l10n.t("Hide filters"),a.dataViewerShowFilters=r.l10n.t("Show filters"),a.refreshDataViewer=r.l10n.t("Refresh data viewer"),a.sliceSummaryTitle=r.l10n.t("SLICING"),a.sliceData=r.l10n.t("Slice Data"),a.sliceSubmitButton=r.l10n.t("Apply"),a.sliceDropdownAxisLabel=r.l10n.t("Axis"),a.sliceDropdownIndexLabel=r.l10n.t("Index"),a.variableExplorerNameColumn=r.l10n.t("Name"),a.variableExplorerTypeColumn=r.l10n.t("Type"),a.variableExplorerCountColumn=r.l10n.t("Size"),a.variableExplorerValueColumn=r.l10n.t("Value"),a.collapseVariableExplorerLabel=r.l10n.t("Variables"),a.variableLoadingValue=r.l10n.t("Loading..."),a.showDataExplorerTooltip=r.l10n.t("Show variable snapshot in data viewer"),a.noRowsInVariableExplorer=r.l10n.t("No variables defined"),a.loadingRowsInVariableExplorer=r.l10n.t("Loading variables"),a.previousPlot=r.l10n.t("Previous"),a.nextPlot=r.l10n.t("Next"),a.panPlot=r.l10n.t("Pan"),a.zoomInPlot=r.l10n.t("Zoom in"),a.zoomOutPlot=r.l10n.t("Zoom out"),a.exportPlot=r.l10n.t("Export to different formats"),a.deletePlot=r.l10n.t("Remove"),a.selectedImageListLabel=r.l10n.t("Selected Image"),a.selectedImageLabel=r.l10n.t("Image"),a.errorOutputExceedsLinkToOpenFormatString=r.l10n.t({message:"Output exceeds the <a href={0}>size limit</a>. Open the full output data <a href={1}>in a text editor</a>",comment:['Do not translate the the Hyperlink text "<a href={0}>size limit</a>" and "<a href={1}>in a text editor</a>". However the text inside those tags can be translated']}),(s=t.Deprecated||(t.Deprecated={})).SHOW_DEPRECATED_FEATURE_PROMPT_FORMAT_ON_SAVE=r.l10n.t({message:"The setting 'python.formatting.formatOnSave' is deprecated, please use 'editor.formatOnSave'.",comment:['Do not translate the string "python.formatting.formatOnSave" as that is a setting in VS Code','Do not translate the string "editor.formatOnSave" as that is a setting in VS Code']}),s.SHOW_DEPRECATED_FEATURE_PROMPT_LINT_ON_TEXT_CHANGE=r.l10n.t({message:"The setting 'python.linting.lintOnTextChange' is deprecated, please enable 'python.linting.lintOnSave' and 'files.autoSave'.",comment:['Do not translate the string "python.linting.lintOnTextChange" as that is a setting in VS Code','Do not translate the string "python.linting.lintOnSave" as that is a setting in VS Code']}),s.SHOW_DEPRECATED_FEATURE_PROMPT_FOR_AUTO_COMPLETE_PRELOAD_MODULES=r.l10n.t({message:"The setting 'python.autoComplete.preloadModules' is deprecated, please consider using Pylance Language Server ('python.languageServer' setting).",comment:['Do not translate the string "python.autoComplete.preloadModules" as that is a setting in VS Code','Do not translate the string "python.languageServer" as that is a setting in VS Code']}),(o=t.Installer||(t.Installer={})).noCondaOrPipInstaller=r.l10n.t("There is no Conda or Pip installer available in the selected environment."),o.noPipInstaller=r.l10n.t("There is no Pip installer available in the selected environment."),o.searchForHelp=r.l10n.t("Search for help"),(t.Products||(t.Products={})).installingModule=e=>r.l10n.t("Installing {0}",e)},58681:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.areObjectsWithUrisTheSame=t.isWeb=t.isNotebookCell=t.isUri=t.isResource=t.tracing=t.swallowExceptions=t.noop=void 0;const r=n(15925),i=n(43138),o=n(11386);function s(){}function a(e){if(!e)return!1;const t=e;return"string"==typeof t.path&&"string"==typeof t.scheme}function c(e,t){return a(t)?t.toString():t}t.noop=s,t.swallowExceptions=function(e){try{const t=e();(0,i.isPromise)(t)&&t.catch(s)}catch{}},t.tracing=function(e,t,n){const r=new o.StopWatch;try{n&&e(void 0);const o=t();return(0,i.isPromise)(o)?o.then((t=>(e({elapsed:r.elapsedTime,returnValue:t}),t))).catch((t=>{e({elapsed:r.elapsedTime,err:t})})):e({elapsed:r.elapsedTime,returnValue:o}),o}catch(t){throw e({elapsed:r.elapsedTime,err:t}),t}},t.isResource=function(e){if(!e)return!0;const t=e;return"string"==typeof t.path&&"string"==typeof t.scheme},t.isUri=a,t.isNotebookCell=function(e){const t=a(e)?e:e.uri;return t.scheme.includes(r.NotebookCellScheme)||t.scheme.includes(r.InteractiveInputScheme)},t.isWeb=function(){return"web"==="web".toString()},t.areObjectsWithUrisTheSame=function(e,t){return e===t||!(e&&!t)&&JSON.stringify(e,c)===JSON.stringify(t,c)}},19450:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MultiStepInputFactory=t.IMultiStepInputFactory=t.MultiStepInput=t.InputFlowAction=void 0;const o=n(86700),s=n(66828),a=n(10053),c=n(20397),l=n(43138);class u{}t.InputFlowAction=u,u.back=new u,u.cancel=new u,u.resume=new u;class d{constructor(e){this.shell=e,this.steps=[]}run(e,t){return this.stepThrough(e,t)}async showQuickPick(e){return this.showLazyLoadQuickPick(e).selection}showLazyLoadQuickPick({title:e,step:t,totalSteps:n,items:r,activeItem:i,placeholder:o,buttons:a,shouldResume:d,matchOnDescription:p,matchOnDetail:h,acceptFilterBoxTextAsSelection:f,startBusy:g,stopBusy:m,validate:y,onDidTriggerItemButton:v,onDidTriggerButton:b,supportBackInFirstStep:w,onDidChangeItems:C,ignoreFocusOut:S}){const _=[],k=(0,l.createDeferred)(),P=this.shell.createQuickPick();return P.title=e,P.step=t,P.totalSteps=n,P.placeholder=o,P.ignoreFocusOut=S??!0,P.items=r,m&&(P.busy=g??!1,m((()=>{P.enabled&&(P.busy=!1)}),this,_)),C&&(P.keepScrollPosition=!0,C((e=>{P.items=e}),this,_)),v&&P.onDidTriggerItemButton((e=>v(e)),void 0,_),P.matchOnDescription=p||!1,P.matchOnDetail=h||!1,P.activeItems=i?[i]:[],P.buttons=[...this.steps.length>1||w?[s.QuickInputButtons.Back]:[],...a||[]],_.push(P.onDidTriggerButton((e=>{e===s.QuickInputButtons.Back?k.reject(u.back):b?b(e):k.resolve(e)})),P.onDidChangeSelection((async e=>{const t=e.length?e[0].label:"";let n=!!t;if(t&&y&&e.length){P.enabled=!1,P.busy=!0;const t=await y(e[0]);t&&(n=!1,await this.shell.showErrorMessage(t,{modal:!0})),P.enabled=!0,P.busy=!1}n&&k.resolve(e[0])})),P.onDidHide((()=>{(async()=>{k.reject(d&&await d()?u.resume:u.cancel)})().catch(k.reject)}))),f&&_.push(P.onDidAccept((async()=>{if(!P.busy){const e=y?await y(P):void 0;e?(P.enabled=!1,P.busy=!0,await this.shell.showErrorMessage(e),P.enabled=!0,P.busy=!1):k.resolve(P.value)}}))),this.current&&this.current.dispose(),this.current=P,this.current.show(),k.promise.finally((()=>(0,c.disposeAllDisposables)(_))),{quickPick:P,selection:k.promise}}async showInputBox({title:e,step:t,totalSteps:n,value:r,prompt:i,validate:o,password:a,buttons:c,shouldResume:l}){const d=[];try{return await new Promise(((p,h)=>{const f=this.shell.createInputBox();f.title=e,f.step=t,f.totalSteps=n,f.password=!!a,f.value=r||"",f.prompt=i,f.ignoreFocusOut=!0,f.buttons=[...this.steps.length>1?[s.QuickInputButtons.Back]:[],...c||[]],d.push(f.onDidTriggerButton((e=>{e===s.QuickInputButtons.Back?h(u.back):p(e)})),f.onDidAccept((async()=>{const e=f.value;f.enabled=!1,f.busy=!0;const t=await o(e);t?(f.validationMessage=t,f.show()):(f.validationMessage="",p(e)),f.enabled=!0,f.busy=!1})),f.onDidChangeValue((async()=>{f.validationMessage=""})),f.onDidHide((()=>{(async()=>{f.busy||h(l&&await l()?u.resume:u.cancel)})().catch(h)}))),this.current&&this.current.dispose(),this.current=f,this.current.show()}))}finally{d.forEach((e=>e.dispose()))}}async stepThrough(e,t){let n=e;for(;n;){this.steps.push(n),this.current&&(this.current.enabled=!1,this.current.busy=!0);try{n=await n(this,t)}catch(e){if(e===u.back)this.steps.pop(),n=this.steps.pop();else if(e===u.resume)n=this.steps.pop();else{if(e!==u.cancel)throw e;n=void 0}if(!n)return e}}this.current&&this.current.dispose()}}t.MultiStepInput=d,t.IMultiStepInputFactory=Symbol("IMultiStepInputFactory");let p=class{constructor(e){this.shell=e}create(){return new d(this.shell)}};p=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IApplicationShell))],p),t.MultiStepInputFactory=p},13730:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openAndShowNotebook=void 0;const r=n(66828);t.openAndShowNotebook=async function(e){const t=await r.workspace.openNotebookDocument(e);await r.window.showNotebookDocument(t)}},72728:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.untildify=t.getOSType=t.OSType=void 0,function(e){e.Unknown="Unknown",e.Windows="Windows",e.OSX="OSX",e.Linux="Linux"}(n=t.OSType||(t.OSType={})),t.getOSType=function(e="web"){return/^win/.test(e)?n.Windows:/^darwin/.test(e)?n.OSX:/^linux/.test(e)?n.Linux:n.Unknown},t.untildify=function(e,t){return e.replace(/^~(?=$|\/|\\)/,t)}},74075:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseMonitor=void 0;const r=n(66828);t.PromiseMonitor=class{constructor(){this.promises=new Set,this._onStateChange=new r.EventEmitter,this.onStateChange=this._onStateChange.event}get isComplete(){return 0===this.promises.size}dispose(){this._onStateChange.dispose()}push(e){this.promises.add(e),this._onStateChange.fire(),e.finally((()=>{this.promises.delete(e),this.isComplete&&this._onStateChange.fire()}))}}},58323:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stripAnsi=t.buildDataViewerFilterRegex=t.verboseRegExp=void 0,t.verboseRegExp=function(e,t){return e=(e=e.replace(/(^| {2})# .*$/gm,"")).replace(/\s+?/g,""),RegExp(e,t)};const r=/[\.\+\?\^\$\{\}\(\)\|\[\]\\]/;t.buildDataViewerFilterRegex=function(e){let t="";return e.startsWith("=")?e=`^${e.substr(1).trim()}$`:r.test(e)||(e=`^.*${e}.*$`,t="i"),new RegExp(e,t)},t.stripAnsi=function(e){if("string"!=typeof e)throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);let t=n(14277);return t.default&&(t=t.default),e.replace(t(),"")}},81014:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeDataViews=t.serializeDataViews=void 0,t.serializeDataViews=function(e){if(!e||!Array.isArray(e)||0===e.length)return;const t=[];for(let n=0;n<e.length;n+=1){const r=e[n];if("buffer"in r&&"byteOffset"in r){const e=Array.apply(null,new Uint8Array(r.buffer));t.push({...r,byteLength:r.byteLength,byteOffset:r.byteOffset,buffer:e})}else t.push([...new Uint8Array(r)])}return t},t.deserializeDataViews=function(e){if(!Array.isArray(e)||0===e.length)return e;const t=[];for(let n=0;n<e.length;n+=1){const r=e[n];if("buffer"in r&&"byteOffset"in r){const e=new Uint8Array(r.buffer).buffer,n=new DataView(e,r.byteOffset,r.byteLength);t.push(n)}else{const e=new Uint8Array(r).buffer;t.push(e)}}return t}},11386:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StopWatch=void 0,t.StopWatch=class{constructor(){this.started=(new Date).getTime()}get elapsedTime(){return(new Date).getTime()-this.started}reset(){this.started=(new Date).getTime()}}},98708:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNumber=t.isObject=t.isString=t.isArray=void 0;const n="number";t.isArray=function(e){return Array.isArray?Array.isArray(e):!(!e||typeof e.length!==n||e.constructor!==Array)},t.isString=function(e){return"string"==typeof e||e instanceof String},t.isObject=function(e){return!("object"!=typeof e||null===e||Array.isArray(e)||e instanceof RegExp||e instanceof Date)},t.isNumber=function(e){return(typeof e===n||e instanceof Number)&&!isNaN(e)}},37419:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VariableScriptGenerator=void 0;const a=n(86700),c=n(83599),l=n(42080),u=n(52859),d=s(n(66518)),p="_VSCODE_getVariable",h=d.default`
                            try:
                                del _VSCODE_getVariable
                            except:
                                pass
                            `;let f=r=class{constructor(e,t){this.fs=e,this.context=t}async generateCodeToGetVariableInfo(e){const t=await this.getContentsOfScript(),n=e.isDebugging?"True":"False",r=`${p}("info", ${n}, ${e.variableName})`;return e.isDebugging?{initializeCode:t,code:r,cleanupCode:h}:{code:`${t}\n\n${r}\n\n${h}`}}async generateCodeToGetVariableProperties(e){const t=await this.getContentsOfScript(),n=e.isDebugging?"True":"False",r=`${p}("properties", ${n}, ${e.variableName}, ${e.stringifiedAttributeNameList})`;return e.isDebugging?{initializeCode:t,code:r,cleanupCode:h}:{code:`${t}\n\n${r}\n\n${h}`}}async generateCodeToGetVariableTypes(e){const t=`${await this.getContentsOfScript()}\n\n_VSCODE_rwho_ls = %who_ls\n`,n=e.isDebugging?"True":"False",r=d.default`
        try:
            del _VSCODE_rwho_ls
        except:
            pass
        `,i=`${p}("types", ${n}, _VSCODE_rwho_ls)`;return e.isDebugging?{initializeCode:t,code:i,cleanupCode:`${h}\n${r}`}:{code:`${t}${i}\n\n${h}\n${r}`}}async getContentsOfScript(){if(r.contentsOfScript)return r.contentsOfScript;const e=(0,u.joinPath)(this.context.extensionUri,"pythonFiles","vscode_datascience_helpers","getVariableInfo","vscodeGetVariableInfo.py"),t=await this.fs.readFile(e);return r.contentsOfScript=t,t}};f=r=i([(0,a.injectable)(),o(0,(0,a.inject)(c.IFileSystem)),o(1,(0,a.inject)(l.IExtensionContext))],f),t.VariableScriptGenerator=f},26264:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractSystemVariables=void 0;const s=o(n(98708));t.AbstractSystemVariables=class{resolve(e){return s.isString(e)?this.__resolveString(e):s.isArray(e)?this.__resolveArray(e):s.isObject(e)?this.__resolveLiteral(e):e}resolveAny(e){return s.isString(e)?this.__resolveString(e):s.isArray(e)?this.__resolveAnyArray(e):s.isObject(e)?this.__resolveAnyLiteral(e):e}__resolveString(e){return e.replace(/\$\{(.*?)\}/g,((e,t)=>{const n=this[t];return s.isString(n)?n:e&&(e.indexOf("env.")>0||e.indexOf("env:")>0)?"":e}))}__resolveLiteral(e){const t=Object.create(null);return Object.keys(e).forEach((n=>{const r=e[n];t[n]=this.resolve(r)})),t}__resolveAnyLiteral(e){const t=Object.create(null);return Object.keys(e).forEach((n=>{const r=e[n];t[n]=this.resolveAny(r)})),t}__resolveArray(e){return e.map((e=>this.__resolveString(e)))}__resolveAnyArray(e){return e.map((e=>this.resolveAny(e)))}}},471:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemVariables=void 0;const r=n(66828),i=n(26264);class o extends i.AbstractSystemVariables{constructor(e,t,n,i){super();const o=n&&e?n.getWorkspaceFolder(e):void 0;this._workspaceFolder=o?o.uri.path:t||"",this._filePath=e?e.path:void 0,i&&i.activeTextEditor&&(this._lineNumber=i.activeTextEditor.selection.anchor.line+1,this._selectedText=i.activeTextEditor.document.getText(new r.Range(i.activeTextEditor.selection.start,i.activeTextEditor.selection.end)))}get cwd(){return this.workspaceFolder}get workspaceRoot(){return this._workspaceFolder}get workspaceFolder(){return this._workspaceFolder}get file(){return this._filePath}get lineNumber(){return this._lineNumber}get selectedText(){return this._selectedText}}t.SystemVariables=o},91083:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPreReleaseVersion=t.MillisecondsInADay=t.HiddenFileFormatString=void 0,t.HiddenFileFormatString="_HiddenFile_{0}.py",t.MillisecondsInADay=864e5,t.isPreReleaseVersion=function(){try{return"false"}catch{return"true"}}},29629:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createOutputWithErrorMessageForDisplay=t.analyzeKernelErrors=t.KernelFailureReason=t.getLastFrameFromPythonTraceback=t.getLastTwoLinesFromPythonTracebackWithErrorMessage=t.getErrorMessageFromPythonTraceback=t.getTelemetrySafeErrorMessageFromPythonTraceback=t.ErrorUtils=void 0;const s=n(66828),a=n(35412),c=n(25251),l=n(30002),u=n(37853),d=o(n(52859));function p(e=""){if(!e)return;const t=e.trim().split("\n").map((e=>e.trim())).filter((e=>e.trim().length)).reverse();return 0!==t.length&&t[0].includes("Error")?[t.length>1?t[1]:"",t[0]]:void 0}var h;function f(e){const t=(e=e.replace(/"/g,"'")).match(/'[^\\']*(\\'[^\\']*)*'/g),n=e.match(/\((.*?)\)/g);let r,i;return t&&t[0].length>2&&(r=t[0],r=r.substring(1,r.length-1)),n&&n[0].length>2&&(i=n[0],i=i.substring(1,i.length-1)),r?{moduleName:r,fileName:i}:void 0}t.ErrorUtils=class{static outputHasModuleNotInstalledError(e,t){return!(!t||!(t.indexOf(`No module named ${e}`)>0||t.indexOf(`No module named '${e}'`)>0))}},t.getTelemetrySafeErrorMessageFromPythonTraceback=function(e=""){if(!e)return;const t=`${e.trim()}: `.split("\n").filter((e=>e.trim().length)).reverse();if(0===t.length)return;const n=t[0],r=((n.match(/\S+Error: /g)?n:void 0)||"").split(":");return r.length&&r[0].endsWith("Error")?r[0]:void 0},t.getErrorMessageFromPythonTraceback=function(e=""){const t=p(e);return t?t[1]:void 0},t.getLastTwoLinesFromPythonTracebackWithErrorMessage=p,t.getLastFrameFromPythonTraceback=function(e){if(!e)return;const t=(Array.isArray(e)?e[0]:e).split("\n").map((e=>e.trim().toLowerCase())).filter((e=>e.length)).reverse().find((e=>e.startsWith("file ")&&e.includes(", line ")&&e.includes(".py")&&e.includes(".py")));if(!t)return;const n=(t.substring(0,t.lastIndexOf(".py"))+".py").replace(/\\/g,"/").split("/"),r=n.indexOf("site-packages");let i=r>=0&&n.length>r+1?n[r+1]:"";const o=n.reverse();return o.length<2?void 0:{fileName:o[0],folderName:o[1],packageName:i}},function(e){e.importWin32apiFailure="importWin32apiFailure",e.zmqModuleFailure="zmqModuleFailure",e.oldIPythonFailure="oldIPythonFailure",e.oldIPyKernelFailure="oldIPyKernelFailure",e.overridingBuiltinModules="overridingBuiltinModules",e.importFailure="importFailure",e.moduleNotFoundFailure="moduleNotFound",e.dllLoadFailure="dllLoadFailure",e.jupyterStartFailure="jupyterStartFailure",e.jupyterStartFailureOutdatedTraitlets="jupyterStartFailureOutdatedTraitlets",e.pythonEnvironmentMissing="pythonEnvironmentMissing"}(h=t.KernelFailureReason||(t.KernelFailureReason={})),t.analyzeKernelErrors=function(e,t,n,r="",i=[]){const o=t instanceof u.BaseError?t.stdErr||t.stack||"":t.toString(),g=p(o),m=o.toLowerCase();if(m.includes("ImportError: No module named 'win32api'".toLowerCase()))return{reason:h.importWin32apiFailure,message:c.DataScience.failedToStartKernelDueToWin32APIFailure,moreInfoLink:"https://aka.ms/kernelFailuresWin32Api",telemetrySafeTags:["win32api"]};if(m.includes("ImportError: DLL load failed".toLowerCase())&&m.includes("win32api"))return{reason:h.importWin32apiFailure,message:c.DataScience.failedToStartKernelDueToWin32APIFailure,moreInfoLink:"https://aka.ms/kernelFailuresWin32Api",telemetrySafeTags:["dll.load.failed","win32api"]};if(m.includes("ImportError: DLL load failed".toLowerCase())){const e=g&&g[0].toLowerCase().startsWith("import")?g[0].substring("import".length).trim():void 0;return{reason:h.dllLoadFailure,moduleName:e,message:e?c.DataScience.failedToStartKernelDueToDllLoadFailure(e):c.DataScience.failedToStartKernelDueToUnknownDllLoadFailure,moreInfoLink:"https://aka.ms/kernelFailuresDllLoad",telemetrySafeTags:["dll.load.failed"]}}if(m.includes("AssertionError: Couldn't find Class NSProcessInfo".toLowerCase()))return{reason:h.oldIPythonFailure,message:c.DataScience.failedToStartKernelDueToOldIPython,moreInfoLink:"https://aka.ms/kernelFailuresOldIPython",telemetrySafeTags:["oldipython"]};if(m.includes("NotImplementedError".toLowerCase())&&m.includes("asyncio".toLowerCase())&&m.includes("events.py".toLowerCase()))return{reason:h.oldIPyKernelFailure,message:c.DataScience.failedToStartKernelDueToOldIPyKernel,moreInfoLink:"https://aka.ms/kernelFailuresOldIPyKernel",telemetrySafeTags:["oldipykernel"]};{const e=[];if(m.includes("ImportError: cannot import name".toLowerCase())&&m.includes("from partially initialized module".toLowerCase())&&m.includes("zmq.backend.cython".toLowerCase())&&e.push("zmq.backend.cython"),m.includes("zmq".toLowerCase())&&m.includes("cython".toLowerCase())&&m.includes("__init__.py".toLowerCase())&&e.push("zmq.cython"),m.includes("zmq.error.ZMQError")&&e.push("zmq.error"),e.length)return{reason:h.zmqModuleFailure,message:c.DataScience.failedToStartKernelDueToPyZmqFailure,moreInfoLink:"https://aka.ms/kernelFailuresPyzmq",telemetrySafeTags:e}}if(g&&g[1].toLowerCase().startsWith("importerror")){const t=f(g[1]);if(t&&r){const n=function(e,t,n,r){if(r&&0!==n.length&&t&&!t.toLowerCase().startsWith(r)&&n.some((e=>t.toLowerCase().startsWith(e.uri.fsPath.toLowerCase()))))return{reason:h.overridingBuiltinModules,fileName:t,moduleName:e,message:c.DataScience.fileSeemsToBeInterferingWithKernelStartup((0,a.getDisplayPath)(s.Uri.file(t),n||[])),moreInfoLink:"https://aka.ms/kernelFailuresOverridingBuiltInModules",telemetrySafeTags:["import.error","override.modules"]}}(t.moduleName,t.fileName,e,r);return n||{reason:h.importFailure,moduleName:t.moduleName,fileName:t.fileName,message:t.fileName?c.DataScience.failedToStartKernelDueToImportFailureFromFile(t.moduleName,t.fileName):c.DataScience.failedToStartKernelDueToImportFailure(t.moduleName),moreInfoLink:t.fileName?"https://aka.ms/kernelFailuresModuleImportErrFromFile":"https://aka.ms/kernelFailuresModuleImportErr",telemetrySafeTags:["import.error"]}}}const y="No module named".toLowerCase(),v="is not a package".toLowerCase();if(m.includes(y)&&!v){const e=o.splitLines().map((e=>e.trim())).filter((e=>e.length)).find((e=>e.toLowerCase().includes(y))),t=e?e.substring(e.toLowerCase().indexOf(y)+y.length).trim():"";if(e)return{reason:h.moduleNotFoundFailure,moduleName:t,message:c.DataScience.failedToStartKernelDueToMissingModule(t),moreInfoLink:"https://aka.ms/kernelFailuresMissingModule",telemetrySafeTags:["module.notfound.error"]}}else{if(m.includes(y)&&v){const e=o.splitLines().map((e=>e.trim())).filter((e=>e.length)).find((e=>e.toLowerCase().includes(y)));let t=e?e.substring(e.toLowerCase().indexOf(y)+y.length).trim():"",n="",r="";t.split("'").length>2&&(n=t.split("'").slice(-2)[0]||"",n=n?`${n}.py`:"",r=n||"",t=t.split("'")[1]||t);const s=i.filter((e=>"__init__.py"===d.basename(e).toLowerCase())).map((e=>d.basename(d.dirname(e))));return t&&n&&t!==n&&i.some((e=>d.basename(e).toLowerCase()===n.toLowerCase()))?{reason:h.overridingBuiltinModules,fileName:n,moduleName:t,message:c.DataScience.fileSeemsToBeInterferingWithKernelStartup(n),moreInfoLink:"https://aka.ms/kernelFailuresOverridingBuiltInModules",telemetrySafeTags:["import.error","override.modules"]}:t&&s&&t!==r&&s.some((e=>e.toLowerCase()===r.toLowerCase()))?{reason:h.overridingBuiltinModules,folderName:r,moduleName:t,message:c.DataScience.moduleSeemsToBeInterferingWithKernelStartup(r),moreInfoLink:"https://aka.ms/kernelFailuresOverridingBuiltInModules",telemetrySafeTags:["import.error","override.modules"]}:{reason:h.moduleNotFoundFailure,moduleName:t,message:c.DataScience.failedToStartKernelDueToMissingModule(t),moreInfoLink:"https://aka.ms/kernelFailuresMissingModule",telemetrySafeTags:["module.notfound.error"]}}if(t instanceof u.BaseError&&"invalidkernel"===t.category&&i.length){const e=d.basename(i[0]);return{reason:h.overridingBuiltinModules,fileName:e,moduleName:d.basename(i[0],".py"),message:c.DataScience.fileSeemsToBeInterferingWithKernelStartup(e),moreInfoLink:"https://aka.ms/kernelFailuresOverridingBuiltInModules",telemetrySafeTags:["import.error","override.modules"]}}if(g&&g[1].toLowerCase().startsWith("ModuleNotFoundError".toLowerCase())){const e=f(g[1]);if(e)return{reason:h.moduleNotFoundFailure,moduleName:e.moduleName,message:c.DataScience.failedToStartKernelDueToMissingModule(e.moduleName),moreInfoLink:"https://aka.ms/kernelFailuresMissingModule",telemetrySafeTags:["module.notfound.error"]}}}if(t instanceof l.JupyterConnectError){let e=o.splitLines().map((e=>e.trim())).reverse().find((e=>e.toLowerCase().includes("error: ")));const r="AttributeError: 'Namespace' object has no attribute '_flags'",i=["jupyter.startup.failure"];let s,a=h.jupyterStartFailure,l=t.message.splitLines({removeEmptyEntries:!0,trim:!0}).reverse().find((e=>e.toLowerCase().includes("error: ")));if(l=l||(t.stdErr||"").splitLines({removeEmptyEntries:!0,trim:!0}).reverse().find((e=>e.toLowerCase().includes("error: "))),m.includes(r.toLowerCase())?(a=h.jupyterStartFailureOutdatedTraitlets,e=c.DataScience.failedToStartJupyterDueToOutdatedTraitlets(n||"",l||""),i.push("outdated.traitlets"),s="https://aka.ms/kernelFailuresJupyterTrailtletsOutdated"):(e=l?c.DataScience.failedToStartJupyterWithErrorInfo(n||"",l):c.DataScience.failedToStartJupyter(n||""),s=void 0),e)return{reason:a,message:e,pythonError:l,moreInfoLink:s,telemetrySafeTags:i}}},t.createOutputWithErrorMessageForDisplay=function(e){if(!e)return;const t=/\[([^\[\]]*)\]\((.*?)\)/gm;let n;for(;null!==(n=t.exec(e));)3===n.length&&(e=e.replace(n[0],`<a href='${n[2]}'>${n[1]}</a>`));const r=e.splitLines({removeEmptyEntries:!1,trim:!1}).map((e=>`[1;31m${e}`)).join("\n");return new s.NotebookCellOutput([s.NotebookCellOutputItem.error({message:"",name:"",stack:r})])}},93988:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorTags=void 0;const r=n(29629),i=[function(e,t=[]){e.includes("ChildProcess.exithandler".toLowerCase())&&t.push("childproc.exit")},function(e,t=[]){e.includes("KernelRestarter: restart failed".toLowerCase())&&t.push("KernelRestarter.failed")}];t.getErrorTags=function(e){const t=[];let n=Array.isArray(e)?e[0].toLowerCase():e.toLowerCase();i.forEach((e=>e(n,t)));const o=(0,r.analyzeKernelErrors)([],n,void 0);return o?.telemetrySafeTags.length&&t.push(...o.telemetrySafeTags),Array.from(new Set(t)).join(",")}},12189:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.parseStack=t.populateTelemetryWithErrorInfo=void 0;const s=n(83300),a=o(n(77911)),c=n(96434),l=n(93988),u=n(29629),d=n(37853);function p(e){if(e.stack&&Array.isArray(e.stack)){const t={...e,stack:e.stack.join("\n")};return a.parse.call(a,t)}return a.parse.call(a,e)}function h(e){const t=[];return"string"==typeof e.getTypeName()&&e.getTypeName().length>0&&t.push(e.getTypeName()),"string"==typeof e.getMethodName()&&e.getMethodName().length>0&&t.push(e.getMethodName()),"string"==typeof e.getFunctionName()&&e.getFunctionName().length>0&&(2===t.length&&t.join(".")===e.getFunctionName()||t.push(e.getFunctionName())),t.join(".")}t.populateTelemetryWithErrorInfo=async function(e,t){e.failed=!0,e.failureCategory=e.failureCategory||(0,d.getErrorCategory)(t);const n=!s.FetchError&&"TypeError"===t?.name&&"Failed to fetch"===t?.message,r=n?TypeError:s.FetchError,i=(n||void 0!==s.FetchError)&&function(e,t){return t?e instanceof t||e instanceof d.WrappedError&&e.originalException instanceof t:(console.error("Error type is not defined",e),!1)}(t,r);"unknown"===e.failureCategory&&i&&(e.failureCategory="fetcherror"),e.stackTrace=function(e){let t="";for(const n of p(e)){const e=n.getFileName();if(e){const r=n.getLineNumber(),i=n.getColumnNumber();t+=`\n\tat ${h(n)} ${e}:${r}:${i}`}else t+="\n\tat <anonymous>"}return t.trim().replace(/\\/g,"/")}(t),"string"==typeof t&&(e.failureSubCategory="errorisstring");const o=t.stdErr?t.stdErr:t.stack||"";if(!o)return;e.failureSubCategory=e.failureSubCategory||(0,l.getErrorTags)(o);const a=(0,u.getLastFrameFromPythonTraceback)(o);a&&([e.pythonErrorFile,e.pythonErrorFolder,e.pythonErrorPackage]=await Promise.all([Promise.resolve(e.pythonErrorFile||(0,c.getTelemetrySafeHashedString)(a.fileName)),Promise.resolve(e.pythonErrorFolder||(0,c.getTelemetrySafeHashedString)(a.folderName)),Promise.resolve(e.pythonErrorPackage||(0,c.getTelemetrySafeHashedString)(a.packageName))]))},t.parseStack=p},58659:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InteractiveCellResultError=void 0;class n extends Error{constructor(e){super("Cell failed to execute"),this.cell=e}}t.InteractiveCellResultError=n},30002:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterConnectError=void 0;const r=n(37853);class i extends r.BaseError{constructor(e,t,n){super("jupyterconnection",e+(t?`\n${t}`:"")),this.interpreter=n}}t.JupyterConnectError=i},89112:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterDataRateLimitError=void 0;const r=n(25251),i=n(37853);class o extends i.BaseError{constructor(){super("unknown",r.DataScience.jupyterDataRateExceeded)}}t.JupyterDataRateLimitError=o},44501:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterExpiredCertsError=void 0;const r=n(37853);class i extends r.BaseError{constructor(e){super("jupyterexpiredcert",e)}}t.JupyterExpiredCertsError=i},41779:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterInstallError=void 0;const r=n(37853);class i extends r.BaseError{constructor(e){super("jupyterinstall",e)}}t.JupyterInstallError=i},79079:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterNotebookNotInstalled=void 0;const r=n(37853);class i extends r.BaseError{constructor(e,t,n){super("jupyternotebooknotinstalled",e+(t?`\n${t}`:"")),this.interpreter=n}}t.JupyterNotebookNotInstalled=i},84079:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterSelfCertsError=void 0;const r=n(37853);class i extends r.BaseError{constructor(e){super("jupyterselfcert",e)}static isSelfCertsError(e){return e.message.indexOf("reason: self signed certificate")>=0}}t.JupyterSelfCertsError=i},50689:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterSelfCertsExpiredError=void 0;const r=n(37853);class i extends r.BaseError{constructor(e){super("jupyterselfexpiredcert",e)}static isSelfCertsExpiredError(e){return e.message.indexOf("reason: certificate has expired")>=0}}t.JupyterSelfCertsExpiredError=i},95739:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalJupyterServerConnectionError=void 0;const r=n(25251),i=n(37853);class o extends i.BaseError{constructor(e){super("localjupyterserverconnection",r.DataScience.jupyterNotebookFailure(e.message||e.toString())),this.originalError=e}}t.LocalJupyterServerConnectionError=o},4169:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.NotSupportedInWebError=void 0;const s=n(37853),a=o(n(25251));class c extends s.BaseError{constructor(){super("nodeonly",a.DataScience.webNotSupported)}}t.NotSupportedInWebError=c},37716:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PythonExtensionActicationFailedError=void 0;const r=n(37853);class i extends r.WrappedError{constructor(e){super("Python Extension failed to activate",e,"pythonExtension")}}t.PythonExtensionActicationFailedError=i},6101:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PythonExtensionApiNotExportedError=void 0;const r=n(37853);class i extends r.BaseError{constructor(){super("pythonExtension","Python Extension API not exported")}}t.PythonExtensionApiNotExportedError=i},79515:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PythonExtensionNotInstalledError=void 0;const r=n(37853);class i extends r.WrappedError{constructor(){super("Python Extension not installed",void 0,"pythonExtension")}}t.PythonExtensionNotInstalledError=i},54990:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteJupyterServerConnectionError=void 0;const r=n(25251),i=n(37853);class o extends i.BaseError{constructor(e,t,n){super("remotejupyterserverconnection",r.DataScience.remoteJupyterConnectionFailedWithServerWithError(s(e),n.message||n.toString())),this.url=e,this.serverId=t,this.originalError=n,this.baseUrl=s(e)}}function s(e){const t=new URL(e);return`${t.protocol}//${t.host}/`}t.RemoteJupyterServerConnectionError=o},65864:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionDisposedError=void 0;const r=n(25251),i=n(37853);class o extends i.BaseError{constructor(){super("sessionDisposed",r.DataScience.sessionDisposed)}}t.SessionDisposedError=o},37853:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorCategory=t.WrappedError=t.BaseError=void 0;class n extends Error{constructor(e,t){super(t),this.category=e}}t.BaseError=n;class r extends n{constructor(e,t,n){super(n||i(t),e),this.originalException=t,t&&(this.stack=`${new Error("").stack}\n\n${t.stack}`)}static from(e,t){return t instanceof n?t:new r(e,t)}static unwrap(e){return e?(e instanceof r&&e.originalException&&e.originalException instanceof n&&(e=e.originalException),e):e}}function i(e){return e&&e instanceof n?e.category:"unknown"}t.WrappedError=r,t.getErrorCategory=i},47931:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IInterpreterSelector=void 0,t.IInterpreterSelector=Symbol("IInterpreterSelector")},84570:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IInterpreterService=void 0,t.IInterpreterService=Symbol("IInterpreterService")},32653:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterPackages=void 0;const i=n(86700);let o=class{async listPackages(e){return[]}async getPackageVersions(e){return new Map}async getPackageVersion(e,t){}trackPackages(e,t){}};o=r([(0,i.injectable)()],o),t.InterpreterPackages=o},58301:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IInterpreterPackages=t.IReservedPythonNamedProvider=void 0,t.IReservedPythonNamedProvider=Symbol("IReservedPythonNamedProvider"),t.IInterpreterPackages=Symbol("IInterpreterPackages")},17835:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceInterpreterTracker=void 0;const s=n(42080),a=n(10053),c=n(86700),l=n(84570),u=n(77886),d=n(46031);let p=r=class{constructor(e,t,n,i,o){this.extensions=e,this.workspaceService=t,this.pythonExtensionChecker=n,this.disposables=i,this.interpreterService=o,r.getWorkspaceIdentifier=this.workspaceService.getWorkspaceFolderIdentifier.bind(this.workspaceService)}activate(){this.trackActiveInterpreters(),this.extensions.onDidChange(this.trackActiveInterpreters,this,this.disposables)}static isActiveWorkspaceInterpreter(e,t){if(!t)return;const n=r.getWorkspaceIdentifier(e),i=r.workspaceInterpreters.get(n);return i?(0,d.areInterpreterPathsSame)(i,t.uri):void 0}trackActiveInterpreters(){!this.trackingInterpreters&&this.pythonExtensionChecker.isPythonExtensionActive&&(this.trackingInterpreters=!0,this.interpreterService.onDidChangeInterpreter((async()=>{const e=Array.isArray(this.workspaceService.workspaceFolders)?this.workspaceService.workspaceFolders.map((e=>e.uri)):[];await Promise.all(e.map((async e=>{try{const t=this.workspaceService.getWorkspaceFolderIdentifier(e),n=await this.interpreterService.getActiveInterpreter(e);r.workspaceInterpreters.set(t,n?.uri)}catch(e){}})))}),this,this.disposables))}};p.workspaceInterpreters=new Map,p.getWorkspaceIdentifier=()=>"",p=r=i([(0,c.injectable)(),o(0,(0,c.inject)(s.IExtensions)),o(1,(0,c.inject)(a.IWorkspaceService)),o(2,(0,c.inject)(u.IPythonExtensionChecker)),o(3,(0,c.inject)(s.IDisposableRegistry)),o(4,(0,c.inject)(l.IInterpreterService))],p),t.WorkspaceInterpreterTracker=p},5337:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceContainer=void 0;const o=n(17187),s=n(86700),a=n(11642);try{(0,s.decorate)((0,s.injectable)(),o.EventEmitter)}catch(e){(0,a.traceWarning)("Failed to decorate EventEmitter for DI (possibly already decorated by another Extension)",e)}let c=r=class{static get instance(){return r._instance}constructor(e){this.container=e,r._instance=this}get(e,t){return t?this.container.getNamed(e,t):this.container.get(e)}getAll(e,t){return t?this.container.getAllNamed(e,t):this.container.getAll(e)}tryGet(e,t){try{return t?this.container.getNamed(e,t):this.container.get(e)}catch{}}};c=r=i([(0,s.injectable)()],c),t.ServiceContainer=c},39667:(e,t,n)=>{"use strict";void 0===Reflect.metadata&&n(28660)},33796:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceManager=void 0;const i=n(86700),o=n(85446);let s=class{getContainer(){return this.container}constructor(e){this.container=e}add(e,t,n,r){n?this.container.bind(e).to(t).whenTargetNamed(n):this.container.bind(e).to(t),r&&r.forEach((t=>{this.addBinding(e,t)}))}addFactory(e,t){this.container.bind(e).toFactory(t)}addBinding(e,t){this.container.bind(t).toService(e)}addSingleton(e,t,n,r){n?this.container.bind(e).to(t).inSingletonScope().whenTargetNamed(n):this.container.bind(e).to(t).inSingletonScope(),r&&r.forEach((t=>{this.addBinding(e,t)}))}addSingletonInstance(e,t,n){n?this.container.bind(e).toConstantValue(t).whenTargetNamed(n):this.container.bind(e).toConstantValue(t)}get(e,t){return t?this.container.getNamed(e,t):this.container.get(e)}tryGet(e,t){try{return t?this.container.getNamed(e,t):this.container.get(e)}catch{}}getAll(e,t){return t?this.container.getAllNamed(e,t):this.container.getAll(e)}rebind(e,t,n){n?this.container.rebind(e).to(t).whenTargetNamed(n):this.container.rebind(e).to(t)}rebindSingleton(e,t,n){n?this.container.rebind(e).to(t).inSingletonScope().whenTargetNamed(n):this.container.rebind(e).to(t).inSingletonScope()}rebindInstance(e,t,n){n?this.container.rebind(e).toConstantValue(t).whenTargetNamed(n):this.container.rebind(e).toConstantValue(t)}dispose(){this.container.unbindAll(),this.container.unload()}};r([(0,o.testOnlyMethod)()],s.prototype,"getContainer",null),s=r([(0,i.injectable)()],s),t.ServiceManager=s},41778:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IServiceContainer=t.IServiceManager=void 0,t.IServiceManager=Symbol("IServiceManager"),t.IServiceContainer=Symbol("IServiceContainer")},91057:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleLogger=void 0;const r=n(17693),i=n(35960);function o(e,t,...n){const o=0===[...n].length?i(t):i(t,...n);return e?`${e} ${(0,r.getTimeForLogging)()}: ${o}`:o}t.ConsoleLogger=class{constructor(e){this.prefix=e}traceLog(e,...t){console.log(i(`${this.prefix||""} ${e}`,...t))}traceError(e,...t){console.error(o("error",`${this.prefix||""} ${e}`,...t))}traceWarn(e,...t){console.warn(o("warn",`${this.prefix||""} ${e}`,...t))}traceInfo(e,...t){console.info(o("info",`${this.prefix||""} ${e}`,...t))}traceVerbose(e,...t){console.log(o("verbose",`${this.prefix||""} ${e}`,...t))}traceEverything(e,...t){console.log(o("everything",`${this.prefix||""} ${e}`,...t))}}},11642:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logTo=t.tracing=t.createTracingDecorator=t.ignoreLogging=t.logValue=t.traceDecoratorWarn=t.traceDecoratorInfo=t.traceDecoratorError=t.traceDecoratorVerbose=t.traceInfoIfCI=t.traceVerbose=t.traceEverything=t.traceInfo=t.traceWarning=t.traceError=t.traceLog=t.setHomeDirectory=t.setLoggingLevel=t.registerLogger=void 0;const r=n(15925),i=n(99203),o=n(85446),s=n(58681),a=n(17693);let c="";const l=i.TraceOptions.Arguments|i.TraceOptions.ReturnValue;let u=[];t.registerLogger=function(e){return u.push(e),{dispose:()=>{u=u.filter((t=>t!==e))}}};const d=new Map([["error",i.LogLevel.Error],["warn",i.LogLevel.Warn],["info",i.LogLevel.Info],["debug",i.LogLevel.Debug],["everything",i.LogLevel.Everything],["none",i.LogLevel.Off],["off",i.LogLevel.Off],[void 0,i.LogLevel.Error]]);let p=i.LogLevel.Debug;function h(e,...t){p<=i.LogLevel.Error&&u.forEach((n=>n.traceError(e,...t)))}function f(e,...t){p<=i.LogLevel.Warn&&u.forEach((n=>n.traceWarn(e,...t)))}function g(e,...t){p<=i.LogLevel.Info&&u.forEach((n=>n.traceInfo(e,...t)))}function m(e,...t){p<=i.LogLevel.Trace&&u.forEach((n=>n.traceVerbose(e,...t)))}t.setLoggingLevel=function(e){p="number"==typeof e?e:d.get(e)??i.LogLevel.Error},t.setHomeDirectory=function(e){c=e.toLowerCase()},t.traceLog=function(e,...t){u.forEach((n=>n.traceLog(e,...t)))},t.traceError=h,t.traceWarning=f,t.traceInfo=g,t.traceEverything=function(e,...t){p<=i.LogLevel.Everything&&u.forEach((n=>n.traceEverything(e,...t)))},t.traceVerbose=m,t.traceInfoIfCI=function(e,...t){r.isCI&&g(e,...t)},t.traceDecoratorVerbose=function(e,t=l){return v({message:e,opts:t,level:i.LogLevel.Trace})},t.traceDecoratorError=function(e){return v({message:e,opts:l,level:i.LogLevel.Error})},t.traceDecoratorInfo=function(e){return v({message:e,opts:l,level:i.LogLevel.Info})},t.traceDecoratorWarn=function(e){return v({message:e,opts:l,level:i.LogLevel.Warn})};const y=new WeakMap;function v(e){return(0,o.trace)(((t,n)=>w(e,n,t)),(e.opts&i.TraceOptions.BeforeCall)>0)}function b(e){const t=c?e.toLowerCase().indexOf(c):-1;return-1===t?e:`~${e.substring(t+c.length)}`}function w(e,t,n){const r=function(e,t,n){n=function(e){let{kind:t,name:n,args:r}=e;return t&&""!==t||(t="Function"),n&&""!==n||(n="<anon>"),r||(r=[]),{kind:t,name:n,args:r,methodName:e.methodName||"",target:e.target||void 0}}(n);const r=[e.message];return r.push(`${n.kind} name = ${n.name}`.trim()),t?(r.push(`completed in ${t.elapsed}ms`),r.push(`has a ${t.returnValue?"truthy":"falsy"} return value`)):r[r.length-1]=`${r[r.length-1]} (started execution)`,(e.opts&i.TraceOptions.Arguments)===i.TraceOptions.Arguments&&(e.level===i.LogLevel.Trace?r.push((0,a.argsToLogString)(n.args.map(((e,t)=>n?function(e,t,n,r){if(function(e){if(!e)return!1;const t=e;return"string"==typeof t.path&&"string"==typeof t.scheme}(n))return b(n.path);if(!n)return n;const i=y.get(e)?.get(t),o=i?.find((e=>e.parameterIndex===r));if(!o)return"string"==typeof n?b(n):n;if("ignore"in o&&o.ignore)return"";let s=n;return"propertyOfParameterToLog"in o&&o.propertyOfParameterToLog&&(s=n[o.propertyOfParameterToLog]),"string"==typeof s?b(s):s}(n.target,n.methodName,e,t):e)))):r.push((0,a.argsToLogString)(n.args))),t&&(e.opts&i.TraceOptions.ReturnValue)===i.TraceOptions.ReturnValue&&r.push((0,a.returnValueToLogString)(t.returnValue)),r.join(", ")}(e,t,n);t?void 0===t.err?e.level&&e.level===i.LogLevel.Error||(e.level?C(e.level,r):C(i.LogLevel.Info,r)):C(i.LogLevel.Error,r,t.err):e.level&&e.level!==i.LogLevel.Error&&C(e.level,r)}function C(e,t,...n){switch(e){case i.LogLevel.Error:h(t,...n);break;case i.LogLevel.Warn:f(t,...n);break;case i.LogLevel.Info:g(t,...n);break;case i.LogLevel.Debug:case i.LogLevel.Trace:m(t,...n)}}t.logValue=function(e){return(t,n,r)=>{y.has(t)||y.set(t,new Map);let i=y.get(t);i||y.set(t,i=new Map),i.has(n)||i.set(n,[]),i.get(n).push({parameterIndex:r,propertyOfParameterToLog:e})}},t.ignoreLogging=function(){return(e,t,n)=>{y.has(e)||y.set(e,new Map);let r=y.get(e);r||y.set(e,r=new Map),r.has(t)||r.set(t,[]),r.get(t).push({parameterIndex:n,ignore:!0})}},t.createTracingDecorator=v,t.tracing=function(e,t,n){return(0,s.tracing)((t=>w(e,t,n)),t,(e.opts&i.TraceOptions.BeforeCall)>0)},t.logTo=C},75409:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutputChannelLogger=void 0;const r=n(17693),i=n(35960);function o(e,t,...n){return e?`${e} ${(0,r.getTimeForLogging)()}: ${i(t,...n)}`:i(t,...n)}t.OutputChannelLogger=class{constructor(e){this.channel=e}traceLog(e,...t){this.channel.appendLine(i(e,...t))}traceError(e,...t){this.channel.appendLine(o("error",e,...t))}traceWarn(e,...t){this.channel.appendLine(o("warn",e,...t))}traceInfo(e,...t){this.channel.appendLine(o("info",e,...t))}traceVerbose(e,...t){this.channel.appendLine(o("debug",e,...t))}traceEverything(e,...t){this.channel.appendLine(o("everything",e,...t))}}},28413:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OutputCommandListener=void 0;const o=n(86700),s=n(15925),a=n(42080);let c=class{constructor(e,t){this.jupyterOutput=e,this.disposableRegistry=t}register(e){this.disposableRegistry.push(e.registerCommand(s.Commands.ViewJupyterOutput,this.viewJupyterOutput,this))}viewJupyterOutput(){this.jupyterOutput.show(!0)}};c=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IOutputChannel)),i(0,(0,o.named)(s.JUPYTER_OUTPUT_CHANNEL)),i(1,(0,o.inject)(a.IDisposableRegistry))],c),t.OutputCommandListener=c},99203:(e,t)=>{"use strict";var n,r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleForegroundColors=t.TraceOptions=t.LogLevel=void 0,(i=t.LogLevel||(t.LogLevel={}))[i.Error=40]="Error",i[i.Warn=30]="Warn",i[i.Info=20]="Info",i[i.Debug=10]="Debug",i[i.Trace=5]="Trace",i[i.Everything=1]="Everything",i[i.Off=100]="Off",(r=t.TraceOptions||(t.TraceOptions={}))[r.None=0]="None",r[r.Arguments=1]="Arguments",r[r.ReturnValue=2]="ReturnValue",r[r.BeforeCall=4]="BeforeCall",(n=t.ConsoleForegroundColors||(t.ConsoleForegroundColors={})).Green="[32m",n.Red="[31m"},17693:(e,t)=>{"use strict";function n(e,t){if(Array.isArray(e))return e.map((e=>n(e,t))).join(", ");if(void 0===e)return"undefined";if(null===e)return"null";try{return e&&e.path?`<Uri:${e.path}>`:JSON.stringify(e)}catch{return`<${t} cannot be serialized for logging>`}}Object.defineProperty(t,"__esModule",{value:!0}),t.getTimeForLogging=t.returnValueToLogString=t.argsToLogString=void 0,t.argsToLogString=function(e){if(!e)return"";try{return e.map(((e,t)=>`Arg ${t+1}: ${n(e,"argument")}`)).join(", ")}catch{return""}},t.returnValueToLogString=function(e){return`Return Value: ${n(e,"Return value")}`},t.getTimeForLogging=function(){const e=new Date;return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}.${String(e.getMilliseconds()).padStart(3,"0")}`}},74064:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportAction=t.disposeRegisteredReporters=t.registerReporter=void 0;const r=n(11642),i=new Set;function o(e){try{i.forEach((t=>t.report(e)))}catch(e){(0,r.traceError)("Failed to report progress",e)}}t.registerReporter=function(e){i.add(e)},t.disposeRegisteredReporters=function(){i.clear()},t.reportAction=function(e){return function(t,n,r){const i=r.value;r.value=async function(...t){return o({action:e,phase:"started"}),i.apply(this,t).finally((()=>{o({action:e,phase:"completed"})}))}}}},72584:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelProgressReporter=void 0;const s=n(86700),a=n(66828),c=n(6491),l=n(20397),u=n(42080),d=n(43138),p=n(58681),h=n(11642),f=n(52859),g=n(83964);let m=r=class{constructor(e){this.kernelResourceProgressReporter=new Map,e.push(this),r.instance=this}activate(){}dispose(){(0,l.disposeAllDisposables)(Array.from(r.disposables))}static createProgressReporter(e,t,n){if(!r.instance)return new a.Disposable(p.noop);const i=e?(0,f.getComparisonKey)(e):"";return r.instance.kernelResourceProgressReporter.has(i)?r.reportProgress(e,t):r.createProgressReporterInternal(i,t,n)}static wrapAndReportProgress(e,t,n){const i=e?(0,f.getComparisonKey)(e):"";if(!r.instance)return n();const o=r.reportProgressInternal(i,t);return n().finally((()=>o?.dispose()))}static reportProgress(e,t){const n=(0,g.getUserMessageForAction)(t)||t,i=e?(0,f.getComparisonKey)(e):"";return n?r.reportProgressInternal(i,n||""):new a.Disposable((()=>p.noop))}static reportProgressInternal(e,t){if(!r.instance)return new a.Disposable(p.noop);let n=r.instance.kernelResourceProgressReporter.get(e);if(n||(n={title:t,pendingProgress:[],progressList:[],dispose:p.noop},r.instance.kernelResourceProgressReporter.set(e,n)),n.reporter)n.progressList.push(t),n.reporter.report({message:t});else{if(n.progressList.includes(t))return new a.Disposable(p.noop);n.pendingProgress.push(t)}return{dispose:()=>{try{if(!n)return;const i=n.progressList.findIndex((e=>e===t));if(i>=0&&n.progressList.splice(i),n.progressList.length>0){const e=n.progressList[n.progressList.length-1];e!==n.title&&n.reporter&&n.reporter.report({message:e})}else r.instance.kernelResourceProgressReporter.delete(e),n.dispose()}catch(t){(0,h.traceError)(`Failed to dispose Progress reporter for ${e}`,t)}}}}static createProgressReporterInternal(e,t,n){const i=(0,d.createDeferred)(),o=new a.Disposable((()=>i.resolve())),s=r.instance.kernelResourceProgressReporter.get(e)||{title:t,pendingProgress:[],progressList:[],tokenSources:[],dispose:()=>{o.dispose()}};let l=!1;const u=()=>{l||(l=!0,a.window.withProgress({location:a.ProgressLocation.Notification,title:t},(async(n,s)=>{const a=r.instance.kernelResourceProgressReporter.get(e);if(a){for(a.reporter=n;a.pendingProgress.length>0;){const e=a.pendingProgress.shift();e===t?a.progressList.push(e):e!==t&&e&&(a.progressList.push(e),n.report({message:e}))}await Promise.race([(0,c.createPromiseFromCancellation)({token:s,cancelAction:"resolve",defaultValue:!0}),i.promise]),r.instance.kernelResourceProgressReporter.get(e)===a&&r.instance.kernelResourceProgressReporter.delete(e),r.disposables.delete(o)}})).then(p.noop,p.noop))};return r.instance.kernelResourceProgressReporter.set(e,{...s,dispose:()=>o.dispose(),show:u}),r.disposables.add(o),s.pendingProgress.push(t),n||u(),{dispose:()=>o.dispose(),show:u}}};m.disposables=new Set,m=r=i([(0,s.injectable)(),o(0,(0,s.inject)(u.IDisposableRegistry))],m),t.KernelProgressReporter=m},83964:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserMessageForAction=void 0;const r=n(25251),i=n(40453),o={[i.ReportableAction.JupyterSessionWaitForIdleSession]:r.DataScience.waitingForJupyterSessionToBeIdle,[i.ReportableAction.KernelsGetKernelForRemoteConnection]:r.DataScience.gettingListOfKernelsForRemoteConnection,[i.ReportableAction.KernelsGetKernelSpecs]:r.DataScience.gettingListOfKernelSpecs,[i.ReportableAction.KernelsRegisterKernel]:r.DataScience.registeringKernel,[i.ReportableAction.NotebookConnect]:r.DataScience.connectingToJupyter,[i.ReportableAction.NotebookStart]:r.DataScience.startingJupyterNotebook,[i.ReportableAction.InstallingMissingDependencies]:r.DataScience.installingMissingDependencies,[i.ReportableAction.ExportNotebookToPython]:r.DataScience.exportNotebookToPython,[i.ReportableAction.PerformingExport]:r.DataScience.performingExport};t.getUserMessageForAction=function(e){return o[e]}},70835:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressReporter=void 0;const o=n(86700),s=n(66828),a=n(10053),c=n(43138),l=n(58681),u=n(74064),d=n(83964);let p=class{get currentAction(){return 0===this.currentActions.length?void 0:this.currentActions[this.currentActions.length-1]}constructor(e){this.appShell=e,this.progressReporters=[],this.actionPhases=new Map,this.currentActions=[],(0,u.registerReporter)(this)}createProgressIndicator(e,t=!1){const n=new s.CancellationTokenSource,r=(0,c.createDeferred)(),i={location:s.ProgressLocation.Notification,cancellable:t,title:e};return this.appShell.withProgress(i,(async(e,t)=>{t.onCancellationRequested((()=>{t.isCancellationRequested&&n.cancel(),r.resolve()})),n.token.onCancellationRequested((()=>{r.resolve()})),this.progressReporters.push(e),await r.promise})).then(l.noop,l.noop),{token:n.token,dispose:()=>r.resolve()}}report(e){if(0!==this.progressReporters.length&&(this.actionPhases.set(e.action,e.phase),"started"===e.phase&&this.currentActions.push(e.action),this.currentAction)){for(;this.actionPhases.get(this.currentAction)&&"started"!==this.actionPhases.get(this.currentAction);)this.actionPhases.delete(this.currentAction),this.currentActions.pop();this.updateProgressMessage()}}updateProgressMessage(){if(!this.currentAction||0===this.progressReporters.length)return;const e=(0,d.getUserMessageForAction)(this.currentAction);e&&this.progressReporters.forEach((t=>t.report({message:e})))}};p=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IApplicationShell))],p),t.ProgressReporter=p},40453:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ReportableAction=void 0,(n=t.ReportableAction||(t.ReportableAction={})).KernelsGetKernelForRemoteConnection="KernelsGetKernelForRemoteConnection",n.KernelsRegisterKernel="KernelsRegisterKernel",n.KernelsGetKernelSpecs="KernelsGetKernelSpecs",n.NotebookStart="NotebookStart",n.NotebookConnect="NotebookConnect",n.JupyterSessionWaitForIdleSession="JupyterSessionWaitForIdleSession",n.InstallingMissingDependencies="InstallingMissingDependencies",n.ExportNotebookToPython="ExportNotebookToPython",n.PerformingExport="PerformingExport"},47891:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentType=void 0,(n=t.EnvironmentType||(t.EnvironmentType={})).Unknown="Unknown",n.Conda="Conda",n.VirtualEnv="VirtualEnv",n.Pipenv="PipEnv",n.Pyenv="Pyenv",n.Venv="Venv",n.Poetry="Poetry",n.VirtualEnvWrapper="VirtualEnvWrapper"},46031:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getNormalizedInterpreterPath=t.areInterpreterPathsSame=t.getInterpreterHash=void 0;const s=n(66828),a=o(n(52859)),c=n(72728),l=n(35412),u=n(96434);function d(e=s.Uri.file(""),t=(0,c.getOSType)(),n=!1){let r=(0,l.getFilePath)(e);return n&&(r=r.toLowerCase()),r.endsWith("/bin/python")&&[c.OSType.Linux,c.OSType.OSX].includes(t)&&r.endsWith("/bin/python")&&r.split("/").length>4?s.Uri.file(r.replace("/bin/python","/python")):s.Uri.file(r)}t.getInterpreterHash=function(e){const t=d(e.uri);return(0,u.getTelemetrySafeHashedString)(t.path)},t.areInterpreterPathsSame=function(e=s.Uri.file(""),t=s.Uri.file(""),n=(0,c.getOSType)(),r=!1){const i=d(e,n,n==c.OSType.Windows||r),o=d(t,n,n==c.OSType.Windows||r);return i===o||a.isEqual(i,o,!0)},t.getNormalizedInterpreterPath=d},11311:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(88814),i=n(42959),o=n(8917),s=n(10053),a=n(89316),c=n(50968),l=n(54952),u=n(42080),d=n(70835),p=n(78163),h=n(52064),f=n(28413),g=n(83599),m=n(67646),y=n(72584),v=n(80208),b=n(22670),w=n(32653),C=n(58301),S=n(17835);t.registerTypes=function(e){e.addSingleton(g.IFileSystem,m.FileSystem),e.addSingleton(s.ICommandManager,o.CommandManager),e.addSingleton(s.IWorkspaceService,p.WorkspaceService),e.addSingleton(s.IApplicationShell,i.ApplicationShell),e.addSingleton(s.IApplicationEnvironment,r.ApplicationEnvironment),e.addSingleton(u.IConfigurationService,a.ConfigurationService),e.addSingleton(u.IDataScienceCommandListener,f.OutputCommandListener),e.addSingleton(d.ProgressReporter,d.ProgressReporter),(0,l.registerTypes)(e),(0,c.registerTypes)(e),e.addSingleton(h.IExtensionSyncActivationService,y.KernelProgressReporter),e.addSingleton(C.IInterpreterPackages,w.InterpreterPackages),e.addSingleton(h.IExtensionSyncActivationService,S.WorkspaceInterpreterTracker),e.add(s.IWebviewViewProvider,b.WebviewViewProvider),e.add(s.IWebviewPanelProvider,v.WebviewPanelProvider)}},2161:(e,t)=>{"use strict";var n,r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.SliceOperationSource=t.CheckboxState=t.EventName=void 0,(i=t.EventName||(t.EventName={})).EXTENSION_LOAD="EXTENSION.LOAD",i.ENVFILE_VARIABLE_SUBSTITUTION="ENVFILE_VARIABLE_SUBSTITUTION",i.ENVFILE_WORKSPACE="ENVFILE_WORKSPACE",i.HASHED_PACKAGE_NAME="HASHED_PACKAGE_NAME",i.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_REQUEST="OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_REQUEST_EX",i.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_ERROR="OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_ERROR_EX",i.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_SUCCESS="OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_SUCCESS_EX",(r=t.CheckboxState||(t.CheckboxState={})).Checked="checked",r.Unchecked="unchecked",(n=t.SliceOperationSource||(t.SliceOperationSource={})).Dropdown="dropdown",n.TextBox="textbox",n.Checkbox="checkbox"},96434:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTelemetrySafeHashedString=t.getTelemetrySafeVersion=void 0;const r=n(46729),i=n(11642);t.getTelemetrySafeVersion=function(e){try{const[t,n,r]=`${e.trim()}...`.split(".").map((e=>parseInt(e,10)));if(isNaN(t))return;return isNaN(n)?t.toString():isNaN(r)?`${t}.${n}`:`${t}.${n}.${r}`}catch(t){(0,i.traceError)(`Failed to parse version ${e}`,t)}},t.getTelemetrySafeHashedString=async function(e){return(0,r.computeHash)(e,"SHA-256")}},68125:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SharedPropertyMapping=t.captureUsageTelemetry=t.capturePerfTelemetry=t.sendTelemetryEvent=t.clearTelemetryReporter=t.setTelemetryReporter=t.getTelemetryReporter=t._resetSharedProperties=t.setSharedProperty=t.isTelemetryDisabled=t.waitBeforeSending=t.Telemetry=t.JupyterCommands=void 0;const s=n(15925),a=n(11642),c=n(11386),l=n(58681),u=n(25472),d=n(12189);var p=n(15925);Object.defineProperty(t,"JupyterCommands",{enumerable:!0,get:function(){return p.JupyterCommands}}),Object.defineProperty(t,"Telemetry",{enumerable:!0,get:function(){return p.Telemetry}}),t.waitBeforeSending="waitBeforeSending",t.isTelemetryDisabled=function(e){return!1===e.getConfiguration("telemetry").inspect("enableTelemetry").globalValue};const h={};let f;async function g(){if(f)return f;const e=s.JVSC_EXTENSION_ID,t=n(66828).extensions.getExtension(e).packageJSON.version,r=(await Promise.resolve().then((()=>o(n(58331))))).default;return f=new r(e,t,s.AppinsightsKey,!0)}function m(e,n){let r={};return Object.getOwnPropertyNames(n).forEach((i=>{if(void 0!==n[i]&&null!==n[i]&&i!==t.waitBeforeSending)try{r[i]="string"==typeof n[i]?n[i]:"object"==typeof n[i]?"object":n[i].toString()}catch(t){(0,a.traceError)(`Failed to serialize ${i} for ${e}`,t)}})),r}t.setSharedProperty=function(e,t){const n=e;(0,s.isUnitTestExecution)()&&n.startsWith("ds_")||(void 0===t?delete h[n]:h[n]=t)},t._resetSharedProperties=function(){for(const e of Object.keys(h))delete h[e]},t.getTelemetryReporter=g,t.setTelemetryReporter=function(e){f=e},t.clearTelemetryReporter=function(){f=void 0};const y=[];function v(e,t,r,i){(0,s.isTestExecution)()||async function(){try{return void 0!==n(66828)&&void 0!==await g()}catch{return!1}}().then((n=>{n&&((0,u.isPromise)(r?.waitBeforeSending)||y.length?(y.push({eventName:e,measures:t,properties:r,ex:i,queueEverythingUntilCompleted:r?.waitBeforeSending}),b()):w(e,t,r,i))})).ignoreErrors()}function b(){if(0===y.length)return;const e=y[0];let t;function n(){t&&clearTimeout(t),0!==y.length&&y[0]===e&&(y.shift(),w(e.eventName,e.measures,e.properties,e.ex),b())}if(!e.queueEverythingUntilCompleted)return n();t=setTimeout((()=>n()),3e4),e.queueEverythingUntilCompleted.finally((()=>n())).catch(l.noop)}function w(e,t,n,r){const i=g();let o={},s=e;r?(o={},Object.assign(o,h),Object.assign(o,n||{}),(0,d.populateTelemetryWithErrorInfo)(o,r).then((()=>{o=m(s,o),i.then((e=>e.sendTelemetryEvent(s,o,t))).ignoreErrors()})).ignoreErrors()):(n&&(o=m(s,n)),Object.assign(o,h),i.then((e=>e.sendTelemetryEvent(s,o,t))).ignoreErrors()),(0,a.traceEverything)(`Telemetry Event : ${s} Measures: ${JSON.stringify(t)} Props: ${JSON.stringify(o)} `)}t.sendTelemetryEvent=v;const C=new Set;t.capturePerfTelemetry=function(e,t){return function(n,r,i){const o=i.value;return i.value=function(...n){const r=t||{},i=new c.StopWatch,s=`${e.toString()}${JSON.stringify(r)}`,a=!C.has(s);C.add(s);const l=o.apply(this,n);return l&&"function"==typeof l.then&&"function"==typeof l.catch?l.then((t=>{const n={...r};return a&&(n.firstTime=a),v(e,i?{duration:i?.elapsedTime}:void 0,n),t})).catch((t=>{const n={...r};n.failed=!0,v(e,i?{duration:i?.elapsedTime}:{},n,t)})):v(e,i?{duration:i?.elapsedTime}:void 0,r),l},i}},t.captureUsageTelemetry=function(e,t){return function(n,r,i){const o=i.value;return i.value=function(...n){return v(e,void 0,t),o.apply(this,n)},i}},t.SharedPropertyMapping=class{}},80772:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendErrorTelemetry=t.sendStartupTelemetry=void 0;const r=n(10053),i=n(15925),o=n(11642),s=n(68125),a=n(2161);async function c(e,t){const n=e.get(r.IWorkspaceService),i=n.hasWorkspaceFolders?n.workspaceFolders.length:0;t.workspaceFolderCount=i}t.sendStartupTelemetry=async function(e,t,n,r){if(!(0,i.isTestExecution)())try{await e,t.totalActivateTime=n.elapsedTime,await c(r,t),(0,s.sendTelemetryEvent)(a.EventName.EXTENSION_LOAD,t)}catch(e){(0,o.traceError)("sendStartupTelemetry() failed.",e)}},t.sendErrorTelemetry=async function(e,t,n){try{let r={};if(n)try{await c(n,t)}catch(e){(0,o.traceError)("getActivationTelemetryProps() failed.",e)}(0,s.sendTelemetryEvent)(a.EventName.EXTENSION_LOAD,t,r,e)}catch(e){(0,o.traceError)("sendErrorTelemetry() failed.",e)}}},10499:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getContextualPropsForTelemetry=t.deleteTrackedInformation=t.updatePythonPackages=t.initializeGlobals=t.pythonEnvironmentsByHash=t.trackedInfo=void 0;const i=r(n(50361)),o=n(96434),s=n(43138),a=n(86563),c=n(52859),l=n(11642);let u;function d(e,n){if(!e.pythonEnvironmentPath)return;const r=(0,s.createDeferred)();e.waitBeforeSending=r.promise,n&&(n.waitBeforeSending=r.promise),async function(e){if(!u)return(0,l.traceError)("Python package provider is not initialized."),"{}";let n;if(n="interpreter"in e?e.interpreter:t.pythonEnvironmentsByHash.get(e.interpreterHash),!n)return"{}";const r=await u(n);return r&&0!==r.size?JSON.stringify(Object.fromEntries(r)):"{}"}({interpreterHash:e.pythonEnvironmentPath}).then((t=>{e.pythonEnvironmentPackages=t||e.pythonEnvironmentPackages,n&&(n.pythonEnvironmentPackages=t||n.pythonEnvironmentPackages)})).catch((()=>{})).finally((()=>{r.resolve(),e.waitBeforeSending=void 0,n&&(n.waitBeforeSending=void 0)}))}t.trackedInfo=new Map,t.pythonEnvironmentsByHash=new Map,t.initializeGlobals=function(e){u=e},t.updatePythonPackages=d,t.deleteTrackedInformation=function(e){t.trackedInfo.delete((0,c.getComparisonKey)(e))},t.getContextualPropsForTelemetry=async function(e){if(!e)return{};const n=t.trackedInfo.get((0,c.getComparisonKey)(e)),r=(0,a.getResourceType)(e);if(!n&&r)return{resourceType:r,resourceHash:e?await(0,o.getTelemetrySafeHashedString)(e.toString()):void 0};if(!n)return{};const s=(0,i.default)(n[0]);return d(n[0],s),s}},78357:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeExecutionHelperBase=void 0,n(8513);const r=n(66828),i=n(10053),o=n(15925),s=n(58681);t.CodeExecutionHelperBase=class{constructor(e){this.documentManager=e.get(i.IDocumentManager),this.applicationShell=e.get(i.IApplicationShell)}async normalizeLines(e,t){throw Error("Not Implemented")}async getFileToExecute(){const e=this.documentManager.activeTextEditor;if(e)if(e.document.isUntitled)this.applicationShell.showErrorMessage("The active file needs to be saved before it can be run").then(s.noop,s.noop);else{if(e.document.languageId===o.PYTHON_LANGUAGE)return e.document.isDirty&&await e.document.save(),e.document.uri;this.applicationShell.showErrorMessage("The active file is not a Python source file").then(s.noop,s.noop)}else this.applicationShell.showErrorMessage("No open file to run in terminal").then(s.noop,s.noop)}getSelectedTextToExecute(e){if(!e)return;const t=e.selection;let n;return n=t.isEmpty?e.document.lineAt(t.start.line).text:t.isSingleLine?this.getSingleLineSelectionText(e):this.getMultiLineSelectionText(e),n}async saveFileIfDirty(e){const t=this.documentManager.textDocuments.filter((t=>t.uri.path===e.path));1===t.length&&t[0].isDirty&&await t[0].save()}getSingleLineSelectionText(e){const t=e.selection,n=new r.Range(t.start,t.end),i=e.document.getText(n),o=e.document.lineAt(t.start.line).text;return i.trim()===o.trim()?o:i}getMultiLineSelectionText(e){const t=e.selection,n=new r.Range(t.start,t.end),i=e.document.getText(n),o=new r.Range(new r.Position(t.start.line,0),new r.Position(t.end.line,e.document.lineAt(t.end.line).text.length)),s=e.document.getText(o);if(i.trim()===s.trim())return s;const a=e.document.lineAt(t.start.line).text,c=new r.Range(t.start,new r.Position(t.start.line,a.length)),l=e.document.getText(c);return l.trimLeft()===a.trimLeft()?a+i.substr(l.length):i}}},83176:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CodeExecutionHelper=void 0;const o=n(86700),s=n(41778),a=n(78357);let c=class extends a.CodeExecutionHelperBase{constructor(e){super(e)}};c=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IServiceContainer))],c),t.CodeExecutionHelper=c},12234:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(83176),i=n(89275);t.registerTypes=function(e){e.addSingleton(i.ICodeExecutionHelper,r.CodeExecutionHelper)}},89275:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ICodeExecutionHelper=t.ICodeExecutionService=void 0,t.ICodeExecutionService=Symbol("ICodeExecutionService"),t.ICodeExecutionHelper=Symbol("ICodeExecutionHelper")},11959:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCachedComputed=t.Cache=void 0;const r=n(66828);t.Cache=class{constructor(e){this.task=e,this.result=null}get(){if(this.result)return this.result;const e=new r.CancellationTokenSource,t=this.task(e.token);return this.result={promise:t,dispose:()=>{this.result=null,e.cancel(),e.dispose()}},this.result}},t.LRUCachedComputed=class{constructor(e){this.computeFn=e,this.lastCache=void 0,this.lastArgKey=void 0}get(e){const t=JSON.stringify(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this.computeFn(e)),this.lastCache}}},3499:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWindowsDriveLetter=t.isEqualOrParent=t.getRoot=t.toPosixPath=t.toSlashes=t.isPathSeparator=void 0;const r=n(15948),i=n(13715);function o(e){return 47===e||92===e}function s(e){return e.replace(/[\\/]/g,r.posix.sep)}function a(e){return e>=65&&e<=90||e>=97&&e<=122}t.isPathSeparator=o,t.toSlashes=s,t.toPosixPath=function(e){return-1===e.indexOf("/")&&(e=s(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),e},t.getRoot=function(e,t=r.posix.sep){if(!e)return"";const n=e.length,i=e.charCodeAt(0);if(o(i)){if(o(e.charCodeAt(1))&&!o(e.charCodeAt(2))){let r=3;const i=r;for(;r<n&&!o(e.charCodeAt(r));r++);if(i!==r&&!o(e.charCodeAt(r+1)))for(r+=1;r<n;r++)if(o(e.charCodeAt(r)))return e.slice(0,r+1).replace(/[\\/]/g,t)}return t}if(a(i)&&58===e.charCodeAt(1))return o(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let s=e.indexOf("://");if(-1!==s)for(s+=3;s<n;s++)if(o(e.charCodeAt(s)))return e.slice(0,s+1);return""},t.isEqualOrParent=function(e,t,n,o=r.sep){if(e===t)return!0;if(!e||!t)return!1;if(t.length>e.length)return!1;if(n){if(!(0,i.startsWithIgnoreCase)(e,t))return!1;if(t.length===e.length)return!0;let n=t.length;return t.charAt(t.length-1)===o&&n--,e.charAt(n)===o}return t.charAt(t.length-1)!==o&&(t+=o),0===e.indexOf(t)},t.isWindowsDriveLetter=a},56297:(e,t,n)=>{"use strict";var r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceSet=t.ResourceMap=t.UriIterator=t.PathIterator=t.ConfigKeysIterator=t.StringIterator=void 0;const o=n(13715);t.StringIterator=class{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){return e.charCodeAt(0)-this._value.charCodeAt(this._pos)}value(){return this._value[this._pos]}},t.ConfigKeysIterator=class{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(46===this._value.charCodeAt(this._to)){if(!e)break;this._from++}else e=!1;return this}cmp(e){return this._caseSensitive?(0,o.compareSubstring)(e,this._value,0,e.length,this._from,this._to):(0,o.compareSubstringIgnoreCase)(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}};class s{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const e=this._value.charCodeAt(t);if(!(47===e||this._splitOnBackslash&&92===e))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(47===t||this._splitOnBackslash&&92===t){if(!e)break;this._from++}else e=!1}return this}cmp(e){return this._caseSensitive?(0,o.compareSubstring)(e,this._value,0,e.length,this._from,this._to):(0,o.compareSubstringIgnoreCase)(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}t.PathIterator=s,t.UriIterator=class{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new s(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return 3===this._states[this._stateIdx]&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return 3===this._states[this._stateIdx]&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(1===this._states[this._stateIdx])return(0,o.compareIgnoreCase)(e,this._value.scheme);if(2===this._states[this._stateIdx])return(0,o.compareIgnoreCase)(e,this._value.authority);if(3===this._states[this._stateIdx])return this._pathIterator.cmp(e);if(4===this._states[this._stateIdx])return(0,o.compare)(e,this._value.query);if(5===this._states[this._stateIdx])return(0,o.compare)(e,this._value.fragment);throw new Error}value(){if(1===this._states[this._stateIdx])return this._value.scheme;if(2===this._states[this._stateIdx])return this._value.authority;if(3===this._states[this._stateIdx])return this._pathIterator.value();if(4===this._states[this._stateIdx])return this._value.query;if(5===this._states[this._stateIdx])return this._value.fragment;throw new Error}};class a{constructor(e,t){this.uri=e,this.value=t}}class c{constructor(e,t){this[r]="ResourceMap",e instanceof c?(this.map=new Map(e.map),this.toKey=t??c.defaultToKey):(this.map=new Map,this.toKey=e??c.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),new a(e,t)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){void 0!==t&&(e=e.bind(t));for(let[t,n]of this.map)e(n.value,n.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(r=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}}t.ResourceMap=c,c.defaultToKey=e=>e.toString();class l{constructor(e,t){this[i]="ResourceSet",e&&"function"!=typeof e?(this._map=new c(t),e.forEach(this.add,this)):this._map=new c(e)}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,t){this._map.forEach(((n,r)=>e.call(t,r,r,this)))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(i=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}t.ResourceSet=l},15948:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.delimiter=t.sep=t.toNamespacedPath=t.parse=t.format=t.extname=t.basename=t.dirname=t.relative=t.resolve=t.join=t.isAbsolute=t.normalize=t.posix=t.win32=void 0;const s=o(n(92527)),a=46,c=47,l=92,u=58;class d extends Error{constructor(e,t,n){let r;"string"==typeof t&&0===t.indexOf("not ")?(r="must not be",t=t.replace(/^not /,"")):r="must be";const i=-1!==e.indexOf(".")?"property":"argument";let o=`The "${e}" ${i} ${r} of type ${t}`;o+=". Received type "+typeof n,super(o),this.code="ERR_INVALID_ARG_TYPE"}}function p(e,t){if("string"!=typeof e)throw new d(t,"string",e)}function h(e){return e===c||e===l}function f(e){return e===c}function g(e){return e>=65&&e<=90||e>=97&&e<=122}function m(e,t,n,r){let i="",o=0,s=-1,l=0,u=0;for(let d=0;d<=e.length;++d){if(d<e.length)u=e.charCodeAt(d);else{if(r(u))break;u=c}if(r(u)){if(s===d-1||1===l);else if(2===l){if(i.length<2||2!==o||i.charCodeAt(i.length-1)!==a||i.charCodeAt(i.length-2)!==a){if(i.length>2){const e=i.lastIndexOf(n);-1===e?(i="",o=0):(i=i.slice(0,e),o=i.length-1-i.lastIndexOf(n)),s=d,l=0;continue}if(0!==i.length){i="",o=0,s=d,l=0;continue}}t&&(i+=i.length>0?`${n}..`:"..",o=2)}else i.length>0?i+=`${n}${e.slice(s+1,d)}`:i=e.slice(s+1,d),o=d-s-1;s=d,l=0}else u===a&&-1!==l?++l:l=-1}return i}function y(e,t){if(null===t||"object"!=typeof t)throw new d("pathObject","Object",t);const n=t.dir||t.root,r=t.base||`${t.name||""}${t.ext||""}`;return n?n===t.root?`${n}${r}`:`${n}${e}${r}`:r}t.win32={resolve(...e){let t="",n="",r=!1;for(let i=e.length-1;i>=-1;i--){let o;if(i>=0){if(o=e[i],p(o,"path"),0===o.length)continue}else 0===t.length?o=s.cwd():(o=s.env[`=${t}`]||s.cwd(),(void 0===o||o.slice(0,2).toLowerCase()!==t.toLowerCase()&&o.charCodeAt(2)===l)&&(o=`${t}\\`));const a=o.length;let c=0,d="",f=!1;const m=o.charCodeAt(0);if(1===a)h(m)&&(c=1,f=!0);else if(h(m))if(f=!0,h(o.charCodeAt(1))){let e=2,t=e;for(;e<a&&!h(o.charCodeAt(e));)e++;if(e<a&&e!==t){const n=o.slice(t,e);for(t=e;e<a&&h(o.charCodeAt(e));)e++;if(e<a&&e!==t){for(t=e;e<a&&!h(o.charCodeAt(e));)e++;e!==a&&e===t||(d=`\\\\${n}\\${o.slice(t,e)}`,c=e)}}}else c=1;else g(m)&&o.charCodeAt(1)===u&&(d=o.slice(0,2),c=2,a>2&&h(o.charCodeAt(2))&&(f=!0,c=3));if(d.length>0)if(t.length>0){if(d.toLowerCase()!==t.toLowerCase())continue}else t=d;if(r){if(t.length>0)break}else if(n=`${o.slice(c)}\\${n}`,r=f,f&&t.length>0)break}return n=m(n,!r,"\\",h),r?`${t}\\${n}`:`${t}${n}`||"."},normalize(e){p(e,"path");const t=e.length;if(0===t)return".";let n,r=0,i=!1;const o=e.charCodeAt(0);if(1===t)return f(o)?"\\":e;if(h(o))if(i=!0,h(e.charCodeAt(1))){let i=2,o=i;for(;i<t&&!h(e.charCodeAt(i));)i++;if(i<t&&i!==o){const s=e.slice(o,i);for(o=i;i<t&&h(e.charCodeAt(i));)i++;if(i<t&&i!==o){for(o=i;i<t&&!h(e.charCodeAt(i));)i++;if(i===t)return`\\\\${s}\\${e.slice(o)}\\`;i!==o&&(n=`\\\\${s}\\${e.slice(o,i)}`,r=i)}}}else r=1;else g(o)&&e.charCodeAt(1)===u&&(n=e.slice(0,2),r=2,t>2&&h(e.charCodeAt(2))&&(i=!0,r=3));let s=r<t?m(e.slice(r),!i,"\\",h):"";return 0!==s.length||i||(s="."),s.length>0&&h(e.charCodeAt(t-1))&&(s+="\\"),void 0===n?i?`\\${s}`:s:i?`${n}\\${s}`:`${n}${s}`},isAbsolute(e){p(e,"path");const t=e.length;if(0===t)return!1;const n=e.charCodeAt(0);return h(n)||t>2&&g(n)&&e.charCodeAt(1)===u&&h(e.charCodeAt(2))},join(...e){if(0===e.length)return".";let n,r;for(let t=0;t<e.length;++t){const i=e[t];p(i,"path"),i.length>0&&(void 0===n?n=r=i:n+=`\\${i}`)}if(void 0===n)return".";let i=!0,o=0;if("string"==typeof r&&h(r.charCodeAt(0))){++o;const e=r.length;e>1&&h(r.charCodeAt(1))&&(++o,e>2&&(h(r.charCodeAt(2))?++o:i=!1))}if(i){for(;o<n.length&&h(n.charCodeAt(o));)o++;o>=2&&(n=`\\${n.slice(o)}`)}return t.win32.normalize(n)},relative(e,n){if(p(e,"from"),p(n,"to"),e===n)return"";const r=t.win32.resolve(e),i=t.win32.resolve(n);if(r===i)return"";if((e=r.toLowerCase())===(n=i.toLowerCase()))return"";let o=0;for(;o<e.length&&e.charCodeAt(o)===l;)o++;let s=e.length;for(;s-1>o&&e.charCodeAt(s-1)===l;)s--;const a=s-o;let c=0;for(;c<n.length&&n.charCodeAt(c)===l;)c++;let u=n.length;for(;u-1>c&&n.charCodeAt(u-1)===l;)u--;const d=u-c,h=a<d?a:d;let f=-1,g=0;for(;g<h;g++){const t=e.charCodeAt(o+g);if(t!==n.charCodeAt(c+g))break;t===l&&(f=g)}if(g!==h){if(-1===f)return i}else{if(d>h){if(n.charCodeAt(c+g)===l)return i.slice(c+g+1);if(2===g)return i.slice(c+g)}a>h&&(e.charCodeAt(o+g)===l?f=g:2===g&&(f=3)),-1===f&&(f=0)}let m="";for(g=o+f+1;g<=s;++g)g!==s&&e.charCodeAt(g)!==l||(m+=0===m.length?"..":"\\..");return c+=f,m.length>0?`${m}${i.slice(c,u)}`:(i.charCodeAt(c)===l&&++c,i.slice(c,u))},toNamespacedPath(e){if("string"!=typeof e)return e;if(0===e.length)return"";const n=t.win32.resolve(e);if(n.length<=2)return e;if(n.charCodeAt(0)===l){if(n.charCodeAt(1)===l){const e=n.charCodeAt(2);if(63!==e&&e!==a)return`\\\\?\\UNC\\${n.slice(2)}`}}else if(g(n.charCodeAt(0))&&n.charCodeAt(1)===u&&n.charCodeAt(2)===l)return`\\\\?\\${n}`;return e},dirname(e){p(e,"path");const t=e.length;if(0===t)return".";let n=-1,r=0;const i=e.charCodeAt(0);if(1===t)return h(i)?e:".";if(h(i)){if(n=r=1,h(e.charCodeAt(1))){let i=2,o=i;for(;i<t&&!h(e.charCodeAt(i));)i++;if(i<t&&i!==o){for(o=i;i<t&&h(e.charCodeAt(i));)i++;if(i<t&&i!==o){for(o=i;i<t&&!h(e.charCodeAt(i));)i++;if(i===t)return e;i!==o&&(n=r=i+1)}}}}else g(i)&&e.charCodeAt(1)===u&&(n=t>2&&h(e.charCodeAt(2))?3:2,r=n);let o=-1,s=!0;for(let n=t-1;n>=r;--n)if(h(e.charCodeAt(n))){if(!s){o=n;break}}else s=!1;if(-1===o){if(-1===n)return".";o=n}return e.slice(0,o)},basename(e,t){void 0!==t&&p(t,"ext"),p(e,"path");let n,r=0,i=-1,o=!0;if(e.length>=2&&g(e.charCodeAt(0))&&e.charCodeAt(1)===u&&(r=2),void 0!==t&&t.length>0&&t.length<=e.length){if(t===e)return"";let s=t.length-1,a=-1;for(n=e.length-1;n>=r;--n){const c=e.charCodeAt(n);if(h(c)){if(!o){r=n+1;break}}else-1===a&&(o=!1,a=n+1),s>=0&&(c===t.charCodeAt(s)?-1==--s&&(i=n):(s=-1,i=a))}return r===i?i=a:-1===i&&(i=e.length),e.slice(r,i)}for(n=e.length-1;n>=r;--n)if(h(e.charCodeAt(n))){if(!o){r=n+1;break}}else-1===i&&(o=!1,i=n+1);return-1===i?"":e.slice(r,i)},extname(e){p(e,"path");let t=0,n=-1,r=0,i=-1,o=!0,s=0;e.length>=2&&e.charCodeAt(1)===u&&g(e.charCodeAt(0))&&(t=r=2);for(let c=e.length-1;c>=t;--c){const t=e.charCodeAt(c);if(h(t)){if(!o){r=c+1;break}}else-1===i&&(o=!1,i=c+1),t===a?-1===n?n=c:1!==s&&(s=1):-1!==n&&(s=-1)}return-1===n||-1===i||0===s||1===s&&n===i-1&&n===r+1?"":e.slice(n,i)},format:y.bind(null,"\\"),parse(e){p(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;const n=e.length;let r=0,i=e.charCodeAt(0);if(1===n)return h(i)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(h(i)){if(r=1,h(e.charCodeAt(1))){let t=2,i=t;for(;t<n&&!h(e.charCodeAt(t));)t++;if(t<n&&t!==i){for(i=t;t<n&&h(e.charCodeAt(t));)t++;if(t<n&&t!==i){for(i=t;t<n&&!h(e.charCodeAt(t));)t++;t===n?r=t:t!==i&&(r=t+1)}}}}else if(g(i)&&e.charCodeAt(1)===u){if(n<=2)return t.root=t.dir=e,t;if(r=2,h(e.charCodeAt(2))){if(3===n)return t.root=t.dir=e,t;r=3}}r>0&&(t.root=e.slice(0,r));let o=-1,s=r,c=-1,l=!0,d=e.length-1,f=0;for(;d>=r;--d)if(i=e.charCodeAt(d),h(i)){if(!l){s=d+1;break}}else-1===c&&(l=!1,c=d+1),i===a?-1===o?o=d:1!==f&&(f=1):-1!==o&&(f=-1);return-1!==c&&(-1===o||0===f||1===f&&o===c-1&&o===s+1?t.base=t.name=e.slice(s,c):(t.name=e.slice(s,o),t.base=e.slice(s,c),t.ext=e.slice(o,c))),t.dir=s>0&&s!==r?e.slice(0,s-1):t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},t.posix={resolve(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const i=r>=0?e[r]:s.cwd();p(i,"path"),0!==i.length&&(t=`${i}/${t}`,n=i.charCodeAt(0)===c)}return t=m(t,!n,"/",f),n?`/${t}`:t.length>0?t:"."},normalize(e){if(p(e,"path"),0===e.length)return".";const t=e.charCodeAt(0)===c,n=e.charCodeAt(e.length-1)===c;return 0===(e=m(e,!t,"/",f)).length?t?"/":n?"./":".":(n&&(e+="/"),t?`/${e}`:e)},isAbsolute:e=>(p(e,"path"),e.length>0&&e.charCodeAt(0)===c),join(...e){if(0===e.length)return".";let n;for(let t=0;t<e.length;++t){const r=e[t];p(r,"path"),r.length>0&&(void 0===n?n=r:n+=`/${r}`)}return void 0===n?".":t.posix.normalize(n)},relative(e,n){if(p(e,"from"),p(n,"to"),e===n)return"";if((e=t.posix.resolve(e))===(n=t.posix.resolve(n)))return"";const r=e.length,i=r-1,o=n.length-1,s=i<o?i:o;let a=-1,l=0;for(;l<s;l++){const t=e.charCodeAt(1+l);if(t!==n.charCodeAt(1+l))break;t===c&&(a=l)}if(l===s)if(o>s){if(n.charCodeAt(1+l)===c)return n.slice(1+l+1);if(0===l)return n.slice(1+l)}else i>s&&(e.charCodeAt(1+l)===c?a=l:0===l&&(a=0));let u="";for(l=1+a+1;l<=r;++l)l!==r&&e.charCodeAt(l)!==c||(u+=0===u.length?"..":"/..");return`${u}${n.slice(1+a)}`},toNamespacedPath:e=>e,dirname(e){if(p(e,"path"),0===e.length)return".";const t=e.charCodeAt(0)===c;let n=-1,r=!0;for(let t=e.length-1;t>=1;--t)if(e.charCodeAt(t)===c){if(!r){n=t;break}}else r=!1;return-1===n?t?"/":".":t&&1===n?"//":e.slice(0,n)},basename(e,t){void 0!==t&&p(t,"ext"),p(e,"path");let n,r=0,i=-1,o=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t===e)return"";let s=t.length-1,a=-1;for(n=e.length-1;n>=0;--n){const l=e.charCodeAt(n);if(l===c){if(!o){r=n+1;break}}else-1===a&&(o=!1,a=n+1),s>=0&&(l===t.charCodeAt(s)?-1==--s&&(i=n):(s=-1,i=a))}return r===i?i=a:-1===i&&(i=e.length),e.slice(r,i)}for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===c){if(!o){r=n+1;break}}else-1===i&&(o=!1,i=n+1);return-1===i?"":e.slice(r,i)},extname(e){p(e,"path");let t=-1,n=0,r=-1,i=!0,o=0;for(let s=e.length-1;s>=0;--s){const l=e.charCodeAt(s);if(l!==c)-1===r&&(i=!1,r=s+1),l===a?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=s+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)},format:y.bind(null,"/"),parse(e){p(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;const n=e.charCodeAt(0)===c;let r;n?(t.root="/",r=1):r=0;let i=-1,o=0,s=-1,l=!0,u=e.length-1,d=0;for(;u>=r;--u){const t=e.charCodeAt(u);if(t!==c)-1===s&&(l=!1,s=u+1),t===a?-1===i?i=u:1!==d&&(d=1):-1!==i&&(d=-1);else if(!l){o=u+1;break}}if(-1!==s){const r=0===o&&n?1:o;-1===i||0===d||1===d&&i===s-1&&i===o+1?t.base=t.name=e.slice(r,s):(t.name=e.slice(r,i),t.base=e.slice(r,s),t.ext=e.slice(i,s))}return o>0?t.dir=e.slice(0,o-1):n&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null},t.posix.win32=t.win32.win32=t.win32,t.posix.posix=t.win32.posix=t.posix,t.normalize="win32"===s.platform?t.win32.normalize:t.posix.normalize,t.isAbsolute="win32"===s.platform?t.win32.isAbsolute:t.posix.isAbsolute,t.join="win32"===s.platform?t.win32.join:t.posix.join,t.resolve="win32"===s.platform?t.win32.resolve:t.posix.resolve,t.relative="win32"===s.platform?t.win32.relative:t.posix.relative,t.dirname="win32"===s.platform?t.win32.dirname:t.posix.dirname,t.basename="win32"===s.platform?t.win32.basename:t.posix.basename,t.extname="win32"===s.platform?t.win32.extname:t.posix.extname,t.format="win32"===s.platform?t.win32.format:t.posix.format,t.parse="win32"===s.platform?t.win32.parse:t.posix.parse,t.toNamespacedPath="win32"===s.platform?t.win32.toNamespacedPath:t.posix.toNamespacedPath,t.sep="win32"===s.platform?t.win32.sep:t.posix.sep,t.delimiter="win32"===s.platform?t.win32.delimiter:t.posix.delimiter},76300:(e,t,n)=>{"use strict";var r=n(34155);Object.defineProperty(t,"__esModule",{value:!0}),t.isAndroid=t.isEdge=t.isSafari=t.isFirefox=t.isChrome=t.isLittleEndian=t.OS=t.setTimeout0=t.translationsConfigFile=t.locale=t.Language=t.language=t.userAgent=t.platform=t.isCI=t.isIOS=t.isWebWorker=t.isWeb=t.isElectron=t.isNative=t.isLinuxSnap=t.isLinux=t.isMacintosh=t.isWindows=t.PlatformToString=t.isElectronSandboxed=t.globals=void 0;const i="en";let o,s,a,c,l=!1,u=!1,d=!1,p=!1,h=!1,f=!1,g=!1,m=!1,y=!1,v=i;t.globals="object"==typeof self?self:"object"==typeof n.g?n.g:{},c=void 0!==t.globals.vscode&&void 0!==t.globals.vscode.process?t.globals.vscode.process:r;const b="string"==typeof c?.versions?.electron,w=b&&"renderer"===c?.type;if(t.isElectronSandboxed=w&&c?.sandboxed,"object"!=typeof navigator||w)if("object"==typeof c){l="win32"===c.platform,u="darwin"===c.platform,d="linux"===c.platform,p=d&&!!c.env.SNAP&&!!c.env.SNAP_REVISION,g=b,y=!!c.env.CI||!!c.env.BUILD_ARTIFACTSTAGINGDIRECTORY,o=i,v=i;const e=c.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e),n=t.availableLanguages["*"];o=t.locale,v=n||i,s=t._translationsConfigFile}catch(e){}h=!0}else console.error("Unable to resolve platform.");else a=navigator.userAgent,l=a.indexOf("Windows")>=0,u=a.indexOf("Macintosh")>=0,m=(a.indexOf("Macintosh")>=0||a.indexOf("iPad")>=0||a.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,d=a.indexOf("Linux")>=0,f=!0,o=navigator.language,v=o;t.PlatformToString=function(e){switch(e){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}};let C=0;var S;u?C=1:l?C=3:d&&(C=2),t.isWindows=l,t.isMacintosh=u,t.isLinux=d,t.isLinuxSnap=p,t.isNative=h,t.isElectron=g,t.isWeb=f,t.isWebWorker=f&&"function"==typeof t.globals.importScripts,t.isIOS=m,t.isCI=y,t.platform=C,t.userAgent=a,t.language=v,(S=t.Language||(t.Language={})).value=function(){return t.language},S.isDefaultVariant=function(){return 2===t.language.length?"en"===t.language:t.language.length>=3&&"e"===t.language[0]&&"n"===t.language[1]&&"-"===t.language[2]},S.isDefault=function(){return"en"===t.language},t.locale=o,t.translationsConfigFile=s,t.setTimeout0=(()=>{if("function"==typeof t.globals.postMessage&&!t.globals.importScripts){let e=[];t.globals.addEventListener("message",(t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,r=e.length;n<r;n++){const r=e[n];if(r.id===t.data.vscodeScheduleAsyncWork)return e.splice(n,1),void r.callback()}}));let n=0;return r=>{const i=++n;e.push({id:i,callback:r}),t.globals.postMessage({vscodeScheduleAsyncWork:i},"*")}}return e=>setTimeout(e)})(),t.OS=u||m?2:l?1:3;let _=!0,k=!1;t.isLittleEndian=function(){if(!k){k=!0;const e=new Uint8Array(2);e[0]=1,e[1]=2;const t=new Uint16Array(e.buffer);_=513===t[0]}return _},t.isChrome=!!(t.userAgent&&t.userAgent.indexOf("Chrome")>=0),t.isFirefox=!!(t.userAgent&&t.userAgent.indexOf("Firefox")>=0),t.isSafari=!!(!t.isChrome&&t.userAgent&&t.userAgent.indexOf("Safari")>=0),t.isEdge=!!(t.userAgent&&t.userAgent.indexOf("Edg/")>=0),t.isAndroid=!!(t.userAgent&&t.userAgent.indexOf("Android")>=0)},92527:(e,t,n)=>{"use strict";var r=n(34155);Object.defineProperty(t,"__esModule",{value:!0}),t.arch=t.platform=t.env=t.cwd=void 0;const i=n(76300);let o;if(void 0!==i.globals.vscode&&void 0!==i.globals.vscode.process){const e=i.globals.vscode.process;o={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd:()=>e.cwd()}}else o={get platform(){return"web"},get arch(){return r.arch},get env(){return r.env},cwd:()=>r.env.VSCODE_CWD||r.cwd()};t.cwd=o.cwd,t.env=o.env,t.platform=o.platform,t.arch=o.arch},52859:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.DataUri=t.addTrailingPathSeparator=t.removeTrailingPathSeparator=t.hasTrailingPathSeparator=t.isEqualAuthority=t.isAbsolutePath=t.resolvePath=t.relativePath=t.normalizePath=t.joinPath=t.dirname=t.extname=t.basename=t.basenameOrAuthority=t.getComparisonKey=t.isEqualOrParent=t.isEqual=t.extUriIgnorePathCase=t.extUriBiasedIgnorePathCase=t.extUri=t.ExtUri=t.originalFSPath=void 0;const s=n(66828),a=o(n(3499)),c=o(n(15948)),l=n(76300),u=n(13715),d=n(25982);function p(e){return l.isWeb?e?.path||"":e?.fsPath||""}t.originalFSPath=p;class h{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:(0,u.compare)(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t||!(!e||!t)&&this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:void 0}).toString()}ignorePathCasing(e){return this._ignorePathCasing(e)}isEqualOrParent(e,n,r=!1,i=(l.isWindows?"\\":"/")){if(e.scheme===n.scheme){if(e.scheme===d.Schemas.file)return a.isEqualOrParent(p(e),p(n),this._ignorePathCasing(e),i)&&e.query===n.query&&(r||e.fragment===n.fragment);if((0,t.isEqualAuthority)(e.authority,n.authority))return a.isEqualOrParent(e.path,n.path,this._ignorePathCasing(e),"/")&&e.query===n.query&&(r||e.fragment===n.fragment)}return!1}joinPath(e,...t){return s.Uri.joinPath(e,...t)}basenameOrAuthority(e){return(0,t.basename)(e)||e.authority}basename(e,t){return c.posix.basename(e.path,t)}extname(e){return c.posix.extname(e.path)}dirname(e){if(0===e.path.length)return e;let t;return e.scheme===d.Schemas.file?t=s.Uri.file(c.dirname(p(e))).path:(t=c.posix.dirname(e.path),e.authority&&t.length&&47!==t.charCodeAt(0)&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return t=e.scheme===d.Schemas.file?s.Uri.file(c.normalize(p(e))).path:c.posix.normalize(e.path),e.with({path:t})}relativePath(e,n){if(e.scheme!==n.scheme||!(0,t.isEqualAuthority)(e.authority,n.authority))return;if(e.scheme===d.Schemas.file){const t=c.relative(p(e),p(n));return l.isWindows?a.toSlashes(t):t}let r=e.path||"/",i=n.path||"/";if(this._ignorePathCasing(e)){let e=0;for(const t=Math.min(r.length,i.length);e<t&&(r.charCodeAt(e)===i.charCodeAt(e)||r.charAt(e).toLowerCase()===i.charAt(e).toLowerCase());e++);r=i.substr(0,e)+r.substr(e)}return c.posix.relative(r,i)}resolvePath(e,t){if(e.scheme===d.Schemas.file){const n=s.Uri.file(c.resolve(p(e),t));return e.with({authority:n.authority,path:n.path})}return t=a.toPosixPath(t),e.with({path:c.posix.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&"/"===e.path[0]}isEqualAuthority(e,t){return e===t||void 0!==e&&void 0!==t&&(0,u.equalsIgnoreCase)(e,t)}hasTrailingPathSeparator(e,t=c.sep){if(e.scheme===d.Schemas.file){const n=p(e);return n.length>a.getRoot(n).length&&n[n.length-1]===t}{const t=e.path;return t.length>1&&47===t.charCodeAt(t.length-1)&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,n=c.sep){return(0,t.hasTrailingPathSeparator)(e,n)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,n=c.sep){let r=!1;if(e.scheme===d.Schemas.file){const t=p(e);r=void 0!==t&&t.length===a.getRoot(t).length&&t[t.length-1]===n}else{n="/";const t=e.path;r=1===t.length&&47===t.charCodeAt(t.length-1)}return r||(0,t.hasTrailingPathSeparator)(e,n)?e:e.with({path:e.path+"/"})}}var f;t.ExtUri=h,t.extUri=new h((()=>!1)),t.extUriBiasedIgnorePathCase=new h((e=>e.scheme!==d.Schemas.file||!l.isLinux)),t.extUriIgnorePathCase=new h((e=>!0)),t.isEqual=t.extUri.isEqual.bind(t.extUri),t.isEqualOrParent=t.extUri.isEqualOrParent.bind(t.extUri),t.getComparisonKey=t.extUri.getComparisonKey.bind(t.extUri),t.basenameOrAuthority=t.extUri.basenameOrAuthority.bind(t.extUri),t.basename=t.extUri.basename.bind(t.extUri),t.extname=t.extUri.extname.bind(t.extUri),t.dirname=t.extUri.dirname.bind(t.extUri),t.joinPath=t.extUri.joinPath.bind(t.extUri),t.normalizePath=t.extUri.normalizePath.bind(t.extUri),t.relativePath=t.extUri.relativePath.bind(t.extUri),t.resolvePath=t.extUri.resolvePath.bind(t.extUri),t.isAbsolutePath=t.extUri.isAbsolutePath.bind(t.extUri),t.isEqualAuthority=t.extUri.isEqualAuthority.bind(t.extUri),t.hasTrailingPathSeparator=t.extUri.hasTrailingPathSeparator.bind(t.extUri),t.removeTrailingPathSeparator=t.extUri.removeTrailingPathSeparator.bind(t.extUri),t.addTrailingPathSeparator=t.extUri.addTrailingPathSeparator.bind(t.extUri),(f=t.DataUri||(t.DataUri={})).META_DATA_LABEL="label",f.META_DATA_DESCRIPTION="description",f.META_DATA_SIZE="size",f.META_DATA_MIME="mime",f.parseMetaData=function(e){const t=new Map;e.path.substring(e.path.indexOf(";")+1,e.path.lastIndexOf(";")).split(";").forEach((e=>{const[n,r]=e.split(":");n&&r&&t.set(n,r)}));const n=e.path.substring(0,e.path.indexOf(";"));return n&&t.set(f.META_DATA_MIME,n),t}},13715:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.InvisibleCharacters=t.AmbiguousCharacters=t.startsWithIgnoreCase=t.equalsIgnoreCase=t.isLowerAsciiLetter=t.compareSubstringIgnoreCase=t.compareIgnoreCase=t.compareSubstring=t.compare=void 0;const i=n(11959),o=n(62624);function s(e,t,n=0,r=e.length,i=0,o=t.length){for(;n<r&&i<o;n++,i++){let r=e.charCodeAt(n),o=t.charCodeAt(i);if(r<o)return-1;if(r>o)return 1}const s=r-n,a=o-i;return s<a?-1:s>a?1:0}function a(e,t,n=0,r=e.length,i=0,o=t.length){for(;n<r&&i<o;n++,i++){let a=e.charCodeAt(n),l=t.charCodeAt(i);if(a===l)continue;if(a>=128||l>=128)return s(e.toLowerCase(),t.toLowerCase(),n,r,i,o);c(a)&&(a-=32),c(l)&&(l-=32);const u=a-l;if(0!==u)return u}const a=r-n,l=o-i;return a<l?-1:a>l?1:0}function c(e){return e>=97&&e<=122}t.compare=function(e,t){return e<t?-1:e>t?1:0},t.compareSubstring=s,t.compareIgnoreCase=function(e,t){return a(e,t,0,e.length,0,t.length)},t.compareSubstringIgnoreCase=a,t.isLowerAsciiLetter=c,t.equalsIgnoreCase=function(e,t){return e.length===t.length&&0===a(e,t)},t.startsWithIgnoreCase=function(e,t){const n=t.length;return!(t.length>e.length)&&0===a(e,t,0,n)};class l{static getInstance(e){return l.cache.get(Array.from(e))}static getLocales(){return l._locales.getValue()}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}t.AmbiguousCharacters=l,r=l,l.ambiguousCharacterData=new o.Lazy((()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))),l.cache=new i.LRUCachedComputed((e=>{function t(e){const t=new Map;for(let n=0;n<e.length;n+=2)t.set(e[n],e[n+1]);return t}function n(e,t){if(!e)return t;const n=new Map;for(const[r,i]of e)t.has(r)&&n.set(r,i);return n}const i=r.ambiguousCharacterData.getValue();let o,s=e.filter((e=>!e.startsWith("_")&&e in i));0===s.length&&(s=["_default"]);for(const e of s)o=n(o,t(i[e]));const a=function(e,t){const n=new Map(e);for(const[e,r]of t)n.set(e,r);return n}(t(i._common),o);return new l(a)})),l._locales=new o.Lazy((()=>Object.keys(l.ambiguousCharacterData.getValue()).filter((e=>!e.startsWith("_")))));class u{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(u.getRawData())),this._data}static isInvisibleCharacter(e){return u.getData().has(e)}static get codePoints(){return u.getData()}}t.InvisibleCharacters=u,u._data=void 0},25982:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Schemas=void 0,(n=t.Schemas||(t.Schemas={})).inMemory="inmemory",n.vscode="vscode",n.internal="private",n.walkThrough="walkThrough",n.walkThroughSnippet="walkThroughSnippet",n.http="http",n.https="https",n.file="file",n.mailto="mailto",n.untitled="untitled",n.data="data",n.command="command",n.vscodeRemote="vscode-remote",n.vscodeRemoteResource="vscode-remote-resource",n.vscodeUserData="vscode-userdata",n.vscodeCustomEditor="vscode-custom-editor",n.vscodeNotebook="vscode-notebook",n.vscodeNotebookCell="vscode-notebook-cell",n.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",n.vscodeNotebookCellOutput="vscode-notebook-cell-output",n.vscodeInteractive="vscode-interactive",n.vscodeInteractiveInput="vscode-interactive-input",n.vscodeSettings="vscode-settings",n.vscodeWorkspaceTrust="vscode-workspace-trust",n.vscodeTerminal="vscode-terminal",n.webviewPanel="webview-panel",n.vscodeWebview="vscode-webview",n.extension="extension",n.vscodeFileResource="vscode-file",n.tmp="tmp",n.vsls="vsls"},42173:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Webview=void 0,n(8513);const s=n(66828),a=n(11642),c=n(15925),l=o(n(25251));t.Webview=class{get loadFailed(){return this.loadFailedEmitter.event}constructor(e,t,n,r=[]){this.fs=e,this.disposableRegistry=t,this.options=n,this.loadFailedEmitter=new s.EventEmitter;const i={enableScripts:!0,localResourceRoots:[this.options.rootPath,this.options.cwd,...r]};n.webviewHost?(this.webviewHost=n.webviewHost,this.webviewHost.webview.options=i):this.webviewHost=this.createWebview(i),this.loadPromise=this.load()}asWebviewUri(e){if(!this.webviewHost?.webview)throw new Error("WebView not initialized, too early to get a Uri");return this.webviewHost.webview.asWebviewUri(e)}postMessage(e){this.webviewHost?.webview&&this.webviewHost?.webview.postMessage(e)}async generateLocalReactHtml(){if(!this.webviewHost?.webview)throw new Error("WebView not initialized, too early to get a Uri");const e=this.webviewHost.webview.asWebviewUri(this.options.cwd).toString(),t=this.options.scripts.map((e=>this.webviewHost.webview.asWebviewUri(e))),n=this.webviewHost.webview.asWebviewUri(this.options.rootPath).toString();return`<!doctype html>\n        <html lang="en">\n            <head>\n                <meta charset="utf-8">\n                <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">\n                <meta http-equiv="Content-Security-Policy" content="img-src 'self' data: https: http: blob: ${this.webviewHost.webview.cspSource}; default-src 'unsafe-inline' 'unsafe-eval' data: https: http: blob: ${this.webviewHost.webview.cspSource};">\n                <meta name="theme-color" content="#000000">\n                <meta name="theme" content="${c.Identifiers.GeneratedThemeName}"/>\n                <title>VS Code Python React UI</title>\n                <base href="${e}${e.endsWith("/")?"":"/"}"/>\n                </head>\n            <body>\n                <noscript>You need to enable JavaScript to run this app.</noscript>\n                <div id="root"></div>\n                <script type="text/javascript">\n                    // Public path that will be used by webpack.\n                    window.__PVSC_Public_Path = "${n}/";\n                    function resolvePath(relativePath) {\n                        if (relativePath && relativePath[0] == '.' && relativePath[1] != '.') {\n                            return "${e}" + relativePath.substring(1);\n                        }\n\n                        return "${e}" + relativePath;\n                    }\n                    function forceTestMiddleware() {\n                        return false;\n                    }\n                <\/script>\n                ${t.map((e=>`<script type="text/javascript" src="${e}"><\/script>`)).join("\n")}\n            </body>\n        </html>`}async load(){try{this.webviewHost?.webview&&((await Promise.all(this.options.scripts.map((e=>this.fs.exists(e))))).every((e=>!0===e))?(this.webviewHost.webview.html=await this.generateLocalReactHtml(),this.postLoad(this.webviewHost)):this.webviewHost.webview.html=l.DataScience.badWebPanelFormatString(this.options.scripts.join(", ")))}catch(e){(0,a.traceError)(`Error Loading WebviewPanel: ${e}`),this.loadFailedEmitter.fire()}}}},92660:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewHost=void 0,n(8513);const a=n(66828),c=n(15925),l=n(11642),u=n(43138),d=n(85446),p=s(n(25251)),h=n(11386),f=n(30682),g=n(9959),m=n(72728);class y{get onDidDispose(){return this._onDidDisposeWebviewPanel.event}constructor(e,t,n,r){this.configService=e,this.workspaceService=t,this.rootPath=n,this.scripts=r,this.disposed=!1,this.themeIsDarkPromise=(0,u.createDeferred)(),this.webviewInit=(0,u.createDeferred)(),this._disposables=[],this.startupStopwatch=new h.StopWatch,this.onMessageListeners=[],this._onDidDisposeWebviewPanel=new a.EventEmitter,this.onDataScienceSettingsChanged=async()=>{const e=JSON.stringify(await this.generateDataScienceExtraSettings());this.postMessageInternal(f.SharedMessages.UpdateSettings,e).ignoreErrors()},this.onWebViewLoadFailed=async()=>{this.dispose()},this.onPossibleSettingsChange=async e=>{if(e.affectsConfiguration("workbench.colorTheme")||e.affectsConfiguration("editor.fontSize")||e.affectsConfiguration("editor.fontFamily")||e.affectsConfiguration("editor.cursorStyle")||e.affectsConfiguration("editor.cursorBlinking")||e.affectsConfiguration("editor.autoClosingBrackets")||e.affectsConfiguration("editor.autoClosingQuotes")||e.affectsConfiguration("editor.autoSurround")||e.affectsConfiguration("editor.autoIndent")||e.affectsConfiguration("editor.scrollBeyondLastLine")||e.affectsConfiguration("editor.fontLigatures")||e.affectsConfiguration("editor.scrollbar.verticalScrollbarSize")||e.affectsConfiguration("editor.scrollbar.horizontalScrollbarSize")||e.affectsConfiguration("files.autoSave")||e.affectsConfiguration("files.autoSaveDelay")||e.affectsConfiguration("jupyter.widgetScriptSources")){const e=await this.generateDataScienceExtraSettings();if(e){const t=JSON.stringify(e);this.postMessageInternal(f.SharedMessages.UpdateSettings,t).ignoreErrors()}}},this._disposables.push(this.workspaceService.onDidChangeConfiguration(this.onPossibleSettingsChange,this)),this._disposables.push(this.configService.getSettings(void 0).onDidChange(this.onDataScienceSettingsChanged.bind(this)))}dispose(){this.disposed||(this.disposed=!0,this._disposables.forEach((e=>e.dispose()))),this.webviewInit=void 0,this._onDidDisposeWebviewPanel.fire()}getHTMLById(e){if(this.activeHTMLRequest)throw new Error("getHTMLById request already in progress");return this.activeHTMLRequest=(0,u.createDeferred)(),this.postMessageInternal(f.InteractiveWindowMessages.GetHTMLByIdRequest,e).ignoreErrors(),this.activeHTMLRequest.promise}addMessageListener(e){this.onMessageListeners.push(e)}removeMessageListener(e){const t=this.onMessageListeners.indexOf(e);t>=0&&this.onMessageListeners.splice(t,1)}asWebviewUri(e){if(!this.webview)throw new Error("asWebViewUri called too early");return this.webview?.asWebviewUri(e)}postMessage(e,t){return this.postMessageInternal(e.toString(),t)}onMessage(e,t){switch(e){case f.SharedMessages.Started:this.webViewRendered();break;case f.InteractiveWindowMessages.GetHTMLByIdResponse:this.activeHTMLRequest&&(this.activeHTMLRequest.resolve(t),this.activeHTMLRequest=void 0)}this.onMessageListeners.forEach((n=>{n(e,t)}))}async loadWebview(e,t){if(this.disposed=!1,this.webviewInit=this.webviewInit||(0,u.createDeferred)(),(0,l.traceInfo)("Loading webview. View is "+(this.webview?"set":"notset")),void 0===this.webview){const n=await this.generateDataScienceExtraSettings();(0,l.traceInfo)("Loading web view...");const r=this.workspaceService.getWorkspaceFolder(e)?.uri;this.webview=await this.provideWebview(e,n,r,t),this._disposables.push(this.webview.loadFailed(this.onWebViewLoadFailed,this)),(0,l.traceInfo)("Webview panel created.")}this.onDataScienceSettingsChanged().ignoreErrors(),this.sendLocStrings().ignoreErrors()}async generateDataScienceExtraSettings(){const e=this.owningResource,t=this.workspaceService.getConfiguration("editor"),n=this.workspaceService.getConfiguration("workbench"),r=n?n.get("colorTheme",c.DefaultTheme):c.DefaultTheme,i=a.extensions.getExtension(c.PythonExtension);return{...JSON.parse(JSON.stringify(this.configService.getSettings(e))),extraSettings:{editor:{cursor:this.getValue(t,"cursorStyle","line"),cursorBlink:this.getValue(t,"cursorBlinking","blink"),autoClosingBrackets:this.getValue(t,"autoClosingBrackets","languageDefined"),autoClosingQuotes:this.getValue(t,"autoClosingQuotes","languageDefined"),autoSurround:this.getValue(t,"autoSurround","languageDefined"),autoIndent:this.getValue(t,"autoIndent",!1),fontLigatures:this.getValue(t,"fontLigatures",!1),scrollBeyondLastLine:this.getValue(t,"scrollBeyondLastLine",!0),verticalScrollbarSize:this.getValue(t,"scrollbar.verticalScrollbarSize",14),horizontalScrollbarSize:this.getValue(t,"scrollbar.horizontalScrollbarSize",10),fontSize:this.getValue(t,"fontSize",14),fontFamily:this.getValue(t,"fontFamily","Consolas, 'Courier New', monospace")},theme:r,hasPythonExtension:void 0!==i,isWeb:(0,m.getOSType)()===m.OSType.Unknown}}}async sendLocStrings(){const e={collapseSingle:p.WebViews.collapseSingle,expandSingle:p.WebViews.expandSingle,openExportFileYes:p.DataScience.openExportFileYes,openExportFileNo:p.DataScience.openExportFileNo,noRowsInDataViewer:p.WebViews.noRowsInDataViewer,sliceIndexError:p.WebViews.sliceIndexError,sliceMismatchedAxesError:p.WebViews.sliceMismatchedAxesError,filterRowsTooltip:p.WebViews.sliceMismatchedAxesError,fetchingDataViewer:p.WebViews.fetchingDataViewer,dataViewerHideFilters:p.WebViews.dataViewerHideFilters,dataViewerShowFilters:p.WebViews.dataViewerShowFilters,refreshDataViewer:p.WebViews.refreshDataViewer,clearFilters:p.WebViews.refreshDataViewer,sliceSummaryTitle:p.WebViews.sliceSummaryTitle,sliceData:p.WebViews.sliceData,sliceSubmitButton:p.WebViews.sliceSubmitButton,sliceDropdownAxisLabel:p.WebViews.sliceDropdownAxisLabel,sliceDropdownIndexLabel:p.WebViews.sliceDropdownIndexLabel,variableExplorerNameColumn:p.WebViews.variableExplorerNameColumn,variableExplorerTypeColumn:p.WebViews.variableExplorerTypeColumn,variableExplorerCountColumn:p.WebViews.variableExplorerCountColumn,variableExplorerValueColumn:p.WebViews.variableExplorerValueColumn,collapseVariableExplorerLabel:p.WebViews.collapseVariableExplorerLabel,variableLoadingValue:p.WebViews.variableLoadingValue,showDataExplorerTooltip:p.WebViews.showDataExplorerTooltip,noRowsInVariableExplorer:p.WebViews.noRowsInVariableExplorer,loadingRowsInVariableExplorer:p.WebViews.loadingRowsInVariableExplorer,previousPlot:p.WebViews.previousPlot,nextPlot:p.WebViews.nextPlot,panPlot:p.WebViews.panPlot,zoomInPlot:p.WebViews.zoomInPlot,zoomOutPlot:p.WebViews.zoomOutPlot,exportPlot:p.WebViews.exportPlot,deletePlot:p.WebViews.deletePlot,selectedImageListLabel:p.WebViews.selectedImageListLabel,selectedImageLabel:p.WebViews.selectedImageLabel};this.postMessageInternal(f.SharedMessages.LocInit,JSON.stringify(e)).ignoreErrors()}async postMessageInternal(e,t){this.webviewInit&&(await this.webviewInit.promise,this.webview?.postMessage({type:e.toString(),payload:t}))}webViewRendered(){this.webviewInit&&!this.webviewInit.resolved&&((0,g.sendTelemetryEvent)(c.Telemetry.WebviewStartup,{duration:this.startupStopwatch.elapsedTime}),this.webviewInit.resolve(),(0,l.traceInfo)("Web view react rendered")),this.sendLocStrings().ignoreErrors(),this.onDataScienceSettingsChanged().ignoreErrors()}getValue(e,t,n){return e?e.get(t,n):n}}o([(0,d.testOnlyMethod)()],y.prototype,"getHTMLById",null),o([(0,d.testOnlyMethod)()],y.prototype,"addMessageListener",null),o([(0,d.testOnlyMethod)()],y.prototype,"removeMessageListener",null),t.WebviewHost=y},78086:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewPanelHost=void 0,n(8513);const r=n(92660);class i extends r.WebviewHost{get isDisposed(){return this.disposed}get webPanel(){if(this.webview)return this.webview}constructor(e,t,n,r,i,o,s,a){super(e,n,i,o),this.configService=e,this.provider=t,this.workspaceService=n,this._title=s,this.viewColumn=a,this.viewState={visible:!1,active:!1},this.webPanelViewStateChanged=e=>{const t=e.isVisible(),n=e.isActive(),r={visible:t,active:n},i={visible:this.viewState.visible,active:this.viewState.active};this.viewState.visible=t,this.viewState.active=n,this.onViewStateChanged({current:r,previous:i})},this.messageListener=r(this.onMessage.bind(this),this.webPanelViewStateChanged.bind(this),this.dispose.bind(this))}async show(e){this.isDisposed||this.webPanel&&await this.webPanel.show(e)}dispose(){this.isDisposed||this.webPanel&&this.webPanel.close(),super.dispose()}get title(){return this._title}setTitle(e){this._title=e,!this.isDisposed&&this.webPanel&&this.webPanel.setTitle(e)}onViewStateChanged(e){}async provideWebview(e,t,n,r){return this.provider.create({viewColumn:this.viewColumn,listener:this.messageListener,title:this.title,rootPath:this.rootPath,scripts:this.scripts,settings:t,cwd:e,webviewHost:r,additionalPaths:n?[n]:[]})}}t.WebviewPanelHost=i},80208:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewPanelProvider=void 0;const c=n(86700),l=n(66828),u=n(83599),d=n(42080),p=s(n(15948)),h=n(42173);class f extends h.Webview{get panel(){return this.webviewHost}get panelOptions(){return this.options}constructor(e,t,n,r=[]){super(e,t,n,r)}async show(e){await this.loadPromise,this.panel&&(e?this.panel.visible||this.panel.reveal(this.panel.viewColumn,e):this.panel.active||this.panel.reveal(this.panel.viewColumn,e))}close(){this.panel&&this.panel.dispose()}get viewColumn(){return this.panel?.viewColumn}isVisible(){return!!this.panel&&this.panel.visible}isActive(){return!!this.panel&&this.panel.active}setTitle(e){this.panelOptions.title=e,this.panel&&(this.panel.title=e)}createWebview(e){return l.window.createWebviewPanel(this.panelOptions.title.toLowerCase().replace(" ",""),this.panelOptions.title,{viewColumn:this.panelOptions.viewColumn,preserveFocus:!0},{retainContextWhenHidden:!0,enableFindWidget:!0,...e})}postLoad(e){this.disposableRegistry.push(e.onDidDispose((()=>{this.webviewHost=void 0,this.panelOptions.listener.dispose().ignoreErrors()}))),this.disposableRegistry.push(e.webview.onDidReceiveMessage((e=>{this.panelOptions.listener.onMessage(e.type,e.payload)}))),this.disposableRegistry.push(e.onDidChangeViewState((e=>{this.panelOptions.listener.onChangeViewState(this)}))),this.panelOptions.listener.onChangeViewState(this)}}let g=class{constructor(e,t,n){this.disposableRegistry=e,this.fs=t,this.context=n}async create(e){const t=[l.Uri.file(p.join(this.context.extensionPath,"tmp"))];return Array.isArray(e.additionalPaths)&&t.push(...e.additionalPaths),new f(this.fs,this.disposableRegistry,e,t)}};g=o([(0,c.injectable)(),a(0,(0,c.inject)(d.IDisposableRegistry)),a(1,(0,c.inject)(u.IFileSystem)),a(2,(0,c.inject)(d.IExtensionContext))],g),t.WebviewPanelProvider=g},87486:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewViewHost=void 0,n(8513);const r=n(92660);class i extends r.WebviewHost{get isDisposed(){return this.disposed}get webviewView(){return this.webview&&this.webview}constructor(e,t,n,r,i,o){super(e,t,i,o),this.configService=e,this.workspaceService=t,this.provider=r,this.messageListener=n(this.onMessage.bind(this),this.dispose.bind(this))}async provideWebview(e,t,n,r){if(!r)throw new Error("WebviewViews must be passed an initial VS Code Webview");return this.provider.create({additionalPaths:n?[n]:[],rootPath:this.rootPath,cwd:e,listener:this.messageListener,scripts:this.scripts,settings:t,webviewHost:r})}}t.WebviewViewHost=i},22670:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewViewProvider=void 0;const o=n(86700),s=n(66828),a=n(83599),c=n(42080),l=n(42173);class u extends l.Webview{get visible(){return!!this.webviewHost&&this.webviewHost.visible}get onDidChangeVisibility(){return this._onDidChangeVisibility.event}constructor(e,t,n,r=[]){super(e,t,n,r),this.panelOptions=n,this._onDidChangeVisibility=new s.EventEmitter}createWebview(e){throw new Error("Webview Views must be passed in an initial view")}postLoad(e){this.disposableRegistry.push(e.onDidDispose((()=>{this.webviewHost=void 0,this.panelOptions.listener.dispose().ignoreErrors()}))),this.disposableRegistry.push(e.webview.onDidReceiveMessage((e=>{this.panelOptions.listener.onMessage(e.type,e.payload)}))),this.disposableRegistry.push(e.onDidChangeVisibility((()=>{this._onDidChangeVisibility.fire()}))),this._onDidChangeVisibility.fire()}}let d=class{constructor(e,t){this.disposableRegistry=e,this.fs=t}async create(e){return new u(this.fs,this.disposableRegistry,e)}};d=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IDisposableRegistry)),i(1,(0,o.inject)(a.IFileSystem))],d),t.WebviewViewProvider=d},46498:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionActivationManager=void 0;const o=n(86700),s=n(52064),a=n(11642);let c=class{constructor(e,t){this.singleActivationServices=e,this.syncActivationServices=t}dispose(){}activateSync(){this.syncActivationServices.map((e=>e.activate()))}async activate(){await Promise.all([this.singleActivationServices.map((async e=>{const t=e.activate();if(t&&t.then)return t.catch(a.traceError)}))])}};c=r([(0,o.injectable)(),i(0,(0,o.optional)()),i(0,(0,o.multiInject)(s.IExtensionSingleActivationService)),i(1,(0,o.optional)()),i(1,(0,o.multiInject)(s.IExtensionSyncActivationService))],c),t.ExtensionActivationManager=c},73381:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalActivation=void 0;const o=n(86700),s=n(10053),a=n(15925),c=n(29444);n(8513);const l=n(42080),u=n(85446),d=n(58681),p=n(15925),h=n(99216),f=n(94523),g=n(9959);let m=class{constructor(e,t,n,r,i,o,s){this.commandManager=e,this.disposableRegistry=t,this.configuration=n,this.documentManager=r,this.workspace=i,this.rawSupported=o,this.commandListeners=s,this.isDisposed=!1,this.startTime=Date.now(),this.onSettingsChanged=()=>{const e=this.configuration.getSettings(void 0).sendSelectionToInteractiveWindow;new c.ContextKey(p.EditorContexts.OwnsSelection,this.commandManager).set(e).catch(d.noop)}}get activationStartTime(){return this.startTime}activate(){this.onSettingsChanged(),this.changeHandler=this.configuration.getSettings(void 0).onDidChange(this.onSettingsChanged.bind(this)),this.disposableRegistry.push(this),this.disposableRegistry.push(this.documentManager.onDidChangeActiveTextEditor((()=>this.onChangedActiveTextEditor()))),this.onChangedActiveTextEditor(),this.sendSettingsTelemetry().ignoreErrors(),this.computeZmqAvailable(),this.commandListeners&&this.commandListeners.forEach((e=>e.register(this.commandManager)))}async dispose(){this.changeHandler&&(this.changeHandler.dispose(),this.changeHandler=void 0)}computeZmqAvailable(){new c.ContextKey(p.EditorContexts.ZmqAvailable,this.commandManager).set(!!this.rawSupported&&this.rawSupported.isSupported).then(d.noop,d.noop)}onChangedActiveTextEditor(){const e=new c.ContextKey(p.EditorContexts.HasCodeCells,this.commandManager),t=this.documentManager.activeTextEditor;t&&t.document.languageId===a.PYTHON_LANGUAGE?e.set((0,f.hasCells)(t.document,this.configuration.getSettings())).catch(d.noop):e.set(!1).catch(d.noop)}async sendSettingsTelemetry(){const e=this.configuration.getSettings(),t=this.workspace.getConfiguration("jupyter");if(t){const n=Object.keys(e),r={};for(const i of n){const n=e[i];if(!i.startsWith("_")&&"function"!=typeof n)if("string"==typeof n&&"interactiveWindow.creationMode"!==i){const e=t.inspect(`${i}`);e&&e.defaultValue!==n?r[i]="non-default":r[i]="default"}else r[i]=n}(0,g.sendTelemetryEvent)(a.Telemetry.DataScienceSettings,void 0,{settingsJson:JSON.stringify(r)})}}};r([(0,u.debounceAsync)(1),(0,u.swallowExceptions)("Sending DataScience Settings Telemetry failed")],m.prototype,"sendSettingsTelemetry",null),m=r([(0,o.injectable)(),i(0,(0,o.inject)(s.ICommandManager)),i(1,(0,o.inject)(l.IDisposableRegistry)),i(2,(0,o.inject)(l.IConfigurationService)),i(3,(0,o.inject)(s.IDocumentManager)),i(4,(0,o.inject)(s.IWorkspaceService)),i(5,(0,o.inject)(h.IRawNotebookSupportedService)),i(5,(0,o.optional)()),i(6,(0,o.multiInject)(l.IDataScienceCommandListener))],m),t.GlobalActivation=m},34383:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildApi=t.IExportedKernelServiceFactory=void 0;const r=n(66828),i=n(24319),o=n(46875),s=n(27527),a=n(94433),c=n(90391),l=n(77886),u=n(15925),d=n(42080),p=n(11642),h=n(50867),f=n(9959),g=n(58681),m=n(89977);function y(e,t){return new Promise((n=>{t.onDidChange((t=>{for(let r of t.added)"connectToLiveRemoteKernel"!==r.connection.kind&&"startUsingRemoteKernelSpec"!==r.connection.kind||r.connection.serverId===e&&n()}))}))}function v(e,t){e.determineExtensionFromCallStack().then((e=>{(0,f.sendTelemetryEvent)(u.Telemetry.JupyterApiUsage,void 0,{extensionId:e.extensionId,pemUsed:t})})).catch(g.noop)}t.IExportedKernelServiceFactory=Symbol("IExportedKernelServiceFactory"),t.buildApi=function(e,n,f,g){let b=!1;const w=f.get(d.IExtensions),C={ready:e.catch((e=>((0,p.traceError)("Failure during activation.",e),Promise.reject(e)))),registerPythonApi:e=>{b||(b=!0,f.get(l.IPythonApiProvider).setApi(e))},async showDataViewer(e,t){v(w,"showDataViewer");const n=f.get(c.IDataViewerFactory);await n.create(e,t)},registerRemoteServerProvider(e){v(w,"registerRemoteServerProvider"),f.get(a.IJupyterUriProviderRegistration).registerProvider(e)},getKernelService:async()=>(v(w,"getKernelService"),f.get(t.IExportedKernelServiceFactory).getService()),getSuggestedController:async(e,t,n)=>{v(w,"getSuggestedController");const r=f.get(h.IControllerRegistration),s=f.get(i.JupyterConnection),a=(0,o.generateUriFromRemoteProvider)(e,t),c=await(0,o.computeServerId)(a),l="Stable"===f.get(d.IFeaturesManager).features.kernelPickerType?f.get(h.IControllerPreferredService):(()=>{const e=f.get(m.ControllerPreferredService);return e.activate(),e})();if(void 0!==r.all.find((e=>("connectToLiveRemoteKernel"===e.kind||"startUsingRemoteKernelSpec"===e.kind)&&e.serverId===c))){await s.updateServerUri(a);const{controller:e}=await l.computePreferred(n,c);return e?.controller}{const e=y(c,r);await s.updateServerUri(a),await e;const{controller:t}=await l.computePreferred(n,c);return t?.controller}},addRemoteJupyterServer:async(e,t)=>{v(w,"addRemoteJupyterServer"),await new Promise((async n=>{const r=f.get(i.JupyterConnection),a=f.get(s.JupyterServerSelector),c=(0,o.generateUriFromRemoteProvider)(e,t),l=await(0,o.computeServerId)(c),u=f.get(h.IControllerRegistration),d=y(l,u);await r.updateServerUri(c),await a.setJupyterURIToRemote(c),void 0===u.all.find((e=>("connectToLiveRemoteKernel"===e.kind||"startUsingRemoteKernelSpec"===e.kind)&&e.serverId===l))?(await d,n()):n()}))}};return((0,u.isTestExecution)()||g.extensionMode===r.ExtensionMode.Development||g.extensionMode===r.ExtensionMode.Test)&&(C.serviceContainer=f,C.serviceManager=n),C}},81827:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ApiAccessService=t.PublishersAllowedWithPrompts=t.TrustedExtensionPublishers=void 0;const o=n(86700),s=n(66828),a=n(10053),c=n(15925),l=n(42080),u=n(43138),d=n(25251),p=n(9959),h=n(11642),f=n(58681),g="JUPYTER_API_ACCESS_INFORMATION";t.TrustedExtensionPublishers=new Set([c.JVSC_EXTENSION_ID.split(".")[0],"rchiodo","donjayamanne"]),t.PublishersAllowedWithPrompts=new Set([c.JVSC_EXTENSION_ID.split(".")[0],"rchiodo"]);let m=class{constructor(e,t,n){this.globalState=e,this.appShell=t,this.context=n,this.extensionAccess=new Map,this.promiseChain=new u.PromiseChain}async getAccessInformation(e){const n=e.extensionId&&e.extensionId!==c.unknownExtensionId&&e.extensionId.split(".")[0]||"";if(this.context.extensionMode===s.ExtensionMode.Test||!n)return(0,h.traceError)(`Publisher ${n} is allowed to access the Kernel API with a message.`),t.TrustedExtensionPublishers.has(n)&&!t.PublishersAllowedWithPrompts.has(n)||this.appShell.showInformationMessage(d.DataScience.thanksForUsingJupyterKernelApiPleaseRegisterWithUs).then(f.noop,f.noop),{extensionId:e.extensionId,accessAllowed:!0};if(t.TrustedExtensionPublishers.has(n))return{extensionId:e.extensionId,accessAllowed:!0};if(!t.PublishersAllowedWithPrompts.has(n))return this.appShell.showErrorMessage(`Please contact the Jupyter Extension to get access to the Kernel API. Publisher ${n}`).then(f.noop,f.noop),(0,h.traceError)(`Publisher ${n} is not allowed to access the Kernel API.`),{extensionId:e.extensionId,accessAllowed:!1};const r=this.globalState.get(g)?.find((t=>t.extensionId===e.extensionId));if(r)return(0,p.sendTelemetryEvent)(c.Telemetry.JupyterKernelApiAccess,void 0,{extensionId:e.extensionId,allowed:r.allowed}),{extensionId:e.extensionId,accessAllowed:"yes"===r.allowed};if(this.extensionAccess.get(e.extensionId))return this.extensionAccess.get(e.extensionId);const i=(async()=>{const t=d.DataScience.allowExtensionToUseJupyterKernelApi(`${e.displayName} (${e.extensionId})`,d.Common.bannerLabelYes),n=await this.appShell.showInformationMessage(t,{modal:!0},d.Common.bannerLabelYes,d.Common.bannerLabelNo)===d.Common.bannerLabelYes;return this.promiseChain.chainFinally((async()=>{let t=[...this.globalState.get(g,[])];return t=t.filter((t=>t.extensionId!==e.extensionId)),t.push({allowed:n?"yes":"no",extensionId:e.extensionId}),this.globalState.update(g,t)})).then(f.noop,f.noop),(0,p.sendTelemetryEvent)(c.Telemetry.JupyterKernelApiAccess,void 0,{extensionId:e.extensionId,allowed:n?"yes":"no"}),{extensionId:e.extensionId,accessAllowed:n}})();return this.extensionAccess.set(e.extensionId,i),i}};m=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IMemento)),i(0,(0,o.named)(l.GLOBAL_MEMENTO)),i(1,(0,o.inject)(a.IApplicationShell)),i(2,(0,o.inject)(l.IExtensionContext))],m),t.ApiAccessService=m},49612:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterKernelServiceFactory=void 0;const o=n(86700),s=n(66828),a=n(35908),c=n(94062),l=n(20397),u=n(11642),d=n(42080),p=n(43138),h=n(9959),f=n(81827),g=n(15925),m=n(46799),y=n(88960),v=n(41778),b=n(50867);let w=class{constructor(e,t,n,r,i,o,s,a){this.kernelProvider=e,this.kernelFinder=t,this.thirdPartyKernelProvider=n,this.disposables=r,this.controllerRegistration=i,this.apiAccess=o,this.extensions=s,this.serviceContainer=a,this.chainedApiAccess=new p.PromiseChain,this.extensionApi=new Map}async getService(){const e=await this.extensions.determineExtensionFromCallStack(),t=await this.chainedApiAccess.chainFinally((()=>this.apiAccess.getAccessInformation(e)));if(!t.accessAllowed)return;if(this.extensionApi.get(t.extensionId))return this.extensionApi.get(t.extensionId);const n=new C(t.extensionId,this.kernelProvider,this.kernelFinder,this.thirdPartyKernelProvider,this.disposables,this.controllerRegistration,this.serviceContainer);return this.extensionApi.set(t.extensionId,n),n}};w=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IKernelProvider)),i(1,(0,o.inject)(c.IKernelFinder)),i(2,(0,o.inject)(c.IThirdPartyKernelProvider)),i(3,(0,o.inject)(d.IDisposableRegistry)),i(4,(0,o.inject)(b.IControllerRegistration)),i(5,(0,o.inject)(f.ApiAccessService)),i(6,(0,o.inject)(d.IExtensions)),i(7,(0,o.inject)(v.IServiceContainer))],w),t.JupyterKernelServiceFactory=w;let C=class e{get onDidChangeKernelSpecifications(){return(0,h.sendTelemetryEvent)(g.Telemetry.JupyterKernelApiUsage,void 0,{extensionId:this.callingExtensionId,pemUsed:"onDidChangeKernelSpecifications"}),(0,u.traceVerbose)(`API called from ${this.callingExtensionId}`),this._onDidChangeKernelSpecifications.event}get onDidChangeKernels(){return(0,h.sendTelemetryEvent)(g.Telemetry.JupyterKernelApiUsage,void 0,{extensionId:this.callingExtensionId,pemUsed:"onDidChangeKernels"}),this._onDidChangeKernels.event}get status(){return this._status}get onDidChangeStatus(){return this._onDidChangeStatus.event}constructor(e,t,n,r,i,o,a){this.callingExtensionId=e,this.kernelProvider=t,this.kernelFinder=n,this.thirdPartyKernelProvider=r,this.disposables=i,this.controllerRegistration=o,this.serviceContainer=a,this._onDidChangeKernelSpecifications=new s.EventEmitter,this._onDidChangeKernels=new s.EventEmitter,this.translatedConnections=new WeakMap,this._onDidChangeStatus=new s.EventEmitter,this.kernelFinder.onDidChangeStatus((()=>{this._status=this.kernelFinder.status,this._onDidChangeStatus.fire()}),this,i),this.kernelProvider.onDidDisposeKernel((e=>{(0,u.traceInfoIfCI)(`Kernel ${e.kernelConnectionMetadata.id}, ${e.kernelConnectionMetadata.interpreter?.uri.toString()} disposed`),this._onDidChangeKernels.fire()}),this,i),this.kernelProvider.onDidStartKernel((e=>{(0,u.traceInfoIfCI)(`Kernel ${e.kernelConnectionMetadata.id}, ${e.kernelConnectionMetadata.interpreter?.uri.toString()} started`),this._onDidChangeKernels.fire()}),this,i),this.thirdPartyKernelProvider.onDidDisposeKernel((e=>{(0,u.traceInfoIfCI)(`Third party Kernel ${e.kernelConnectionMetadata.id}, ${e.kernelConnectionMetadata.interpreter?.uri.toString()} disposed`),this._onDidChangeKernels.fire()}),this,i),this.thirdPartyKernelProvider.onDidStartKernel((e=>{(0,u.traceInfoIfCI)(`Third party Kernel ${e.kernelConnectionMetadata.id}, ${e.kernelConnectionMetadata.interpreter?.uri.toString()} started`),this._onDidChangeKernels.fire()}),this,i),this.controllerRegistration.onDidChange((()=>this._onDidChangeKernelSpecifications.fire()),this,i)}async getKernelSpecifications(){return(0,h.sendTelemetryEvent)(g.Telemetry.JupyterKernelApiUsage,void 0,{extensionId:this.callingExtensionId,pemUsed:"getKernelSpecifications"}),this.kernelFinder.kernels.map((e=>this.translateKernelConnectionMetadataToExportedType(e)))}getActiveKernels(){(0,h.sendTelemetryEvent)(g.Telemetry.JupyterKernelApiUsage,void 0,{extensionId:this.callingExtensionId,pemUsed:"getActiveKernels"});const e=[],t=new Set;return this.kernelProvider.kernels.filter((e=>e.startedAtLeastOnce||"connectToLiveRemoteKernel"===e.kernelConnectionMetadata.kind)).forEach((n=>{const r=this.kernelProvider.get(n.notebook);r&&r.session?.kernelId&&t.add(r.session.kernelId),e.push({metadata:this.translateKernelConnectionMetadataToExportedType(n.kernelConnectionMetadata),uri:n.uri})})),this.thirdPartyKernelProvider.kernels.filter((e=>e.startedAtLeastOnce||"connectToLiveRemoteKernel"===e.kernelConnectionMetadata.kind)).forEach((n=>{const r=this.thirdPartyKernelProvider.get(n.uri);r&&r.session?.kernelId&&t.add(r.session.kernelId),e.push({metadata:this.translateKernelConnectionMetadataToExportedType(n.kernelConnectionMetadata),uri:n.uri})})),this.controllerRegistration.registered.forEach((n=>{n.controller.notebookType===g.JupyterNotebookView&&"connectToLiveRemoteKernel"===n.connection.kind&&n.connection.kernelModel.id&&!t.has(n.connection.kernelModel.id)&&e.push({metadata:n.connection,uri:void 0})})),e}getKernel(e){(0,h.sendTelemetryEvent)(g.Telemetry.JupyterKernelApiUsage,void 0,{extensionId:this.callingExtensionId,pemUsed:"getKernel"});const t=this.thirdPartyKernelProvider.get(e)??this.kernelProvider.get(e);if(t?.session?.kernel){const e=this.wrapKernelConnection(t);return{metadata:this.translateKernelConnectionMetadataToExportedType(t.kernelConnectionMetadata),connection:e}}}async startKernel(e,t){return(0,h.sendTelemetryEvent)(g.Telemetry.JupyterKernelApiUsage,void 0,{extensionId:this.callingExtensionId,pemUsed:"startKernel"}),this.startOrConnect(e,t)}async connect(e,t){return(0,h.sendTelemetryEvent)(g.Telemetry.JupyterKernelApiUsage,void 0,{extensionId:this.callingExtensionId,pemUsed:"connect"}),this.startOrConnect(e,t)}async startOrConnect(t,n){const r=this.kernelFinder.kernels.find((e=>e.id===t.id));if(!r)throw new Error("Not found");const i=await m.KernelConnector.connectToKernel(r,this.serviceContainer,{resource:n},new y.DisplayOptions(!1),this.disposables,"3rdPartyExtension");let o=e.wrappedKernelConnections.get(i);if(o)return o;if(!i?.session?.kernel)throw new Error("Not found");return this.wrapKernelConnection(i)}wrapKernelConnection(t){if(e.wrappedKernelConnections.get(t))return e.wrappedKernelConnections.get(t);const n={connection:new a.KernelConnectionWrapper(t,this.disposables),kernelSocket:new S(t)};return e.wrappedKernelConnections.set(t,n),n}translateKernelConnectionMetadataToExportedType(e){if(!this.translatedConnections.has(e)){const t=Object.freeze(c.BaseKernelConnectionMetadata.fromJSON(e.toJSON()));this.translatedConnections.set(e,t)}return this.translatedConnections.get(e)}};C.wrappedKernelConnections=new WeakMap,C=r([i(1,(0,o.inject)(c.IKernelProvider)),i(2,(0,o.inject)(c.IKernelFinder)),i(3,(0,o.inject)(c.IThirdPartyKernelProvider)),i(4,(0,o.inject)(d.IDisposableRegistry)),i(5,(0,o.inject)(b.IControllerRegistration)),i(6,(0,o.inject)(v.IServiceContainer))],C);class S{get ready(){return!!this.socket}get onDidChange(){return this._onDidSocketChange.event}constructor(e){this.disposables=[],this.receiveHooks=new Set,this.sendHooks=new Set,this._onDidSocketChange=new s.EventEmitter;const t=e.kernelSocket.subscribe((e=>{this.removeHooks(),this.socket=e?.socket,this.addHooks(),this._onDidSocketChange.fire()}));this.disposables.push(new s.Disposable((()=>t.unsubscribe())))}dispose(){(0,l.disposeAllDisposables)(this.disposables)}sendToRealKernel(e,t){this.socket?.sendToRealKernel(e,t)}addReceiveHook(e){this.receiveHooks.add(e)}removeReceiveHook(e){this.receiveHooks.delete(e)}addSendHook(e){this.sendHooks.add(e)}removeSendHook(e){this.sendHooks.delete(e)}removeHooks(){this.socket&&(this.receiveHooks.forEach((e=>this.socket?.removeReceiveHook(e))),this.sendHooks.forEach((e=>this.socket?.removeSendHook(e))))}addHooks(){this.socket&&(this.receiveHooks.forEach((e=>this.socket?.addReceiveHook(e))),this.sendHooks.forEach((e=>this.socket?.addSendHook(e))))}}},35908:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelConnectionWrapper=void 0;const r=n(58681),i=n(23429);class o extends i.BaseKernelConnectionWrapper{get possibleKernelConnection(){return this.kernel.session?.kernel===this._kernelConnection?this._kernelConnection:(this.stopHandlingKernelMessages(this._kernelConnection),this.kernel.session?.kernel?(this.startHandleKernelMessages(this.kernel.session.kernel),this._kernelConnection):void 0)}constructor(e,t){super(e.session.kernel,t),this.kernel=e;const n=()=>{this.statusChanged.emit(e.status),"dead"!==e.status||e.disposed||e.disposing||this.connectionStatusChanged.emit("disconnected")};e.onDisposed((()=>{n(),this.disposed.emit()}),this,t),e.onStarted(n,this,t),e.onRestarted(n,this,t),e.onStatusChanged(n,this,t),this.startHandleKernelMessages(e.session.kernel)}async shutdown(){"startUsingRemoteKernelSpec"!==this.kernel.kernelConnectionMetadata.kind&&"connectToLiveRemoteKernel"!==this.kernel.kernelConnectionMetadata.kind||await(this.kernel.session?.shutdown()),await this.kernel.dispose()}dispose(){this.kernel.dispose().catch(r.noop)}async interrupt(){if(this.stopHandlingKernelMessages(this.possibleKernelConnection),await this.kernel.interrupt(),!this.kernel.session?.kernel)throw new Error("Restart failed");this.startHandleKernelMessages(this.kernel.session.kernel)}async restart(){if(this.possibleKernelConnection&&this.stopHandlingKernelMessages(this.possibleKernelConnection),await this.kernel.restart(),!this.kernel.session?.kernel)throw new Error("Restart failed");this.startHandleKernelMessages(this.kernel.session.kernel)}startHandleKernelMessages(e){this._kernelConnection=e,super.startHandleKernelMessages(e)}}t.KernelConnectionWrapper=o},4188:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveEditorContextService=void 0;const o=n(86700),s=n(94062),a=n(10053),c=n(15925),l=n(29444),u=n(42080),d=n(58681),p=n(15925),h=n(135),f=n(86563),g=n(98729),m=n(50867);let y=class{constructor(e,t,n,r,i,o,s){this.interactiveProvider=e,this.docManager=t,this.commandManager=n,this.vscNotebook=i,this.kernelProvider=o,this.controllers=s,this.disposables=[],this.isPythonFileActive=!1,r.push(this),this.nativeContext=new l.ContextKey(c.EditorContexts.IsNativeActive,this.commandManager),this.canRestartNotebookKernelContext=new l.ContextKey(c.EditorContexts.CanRestartNotebookKernel,this.commandManager),this.canInterruptNotebookKernelContext=new l.ContextKey(c.EditorContexts.CanInterruptNotebookKernel,this.commandManager),this.canRestartInteractiveWindowKernelContext=new l.ContextKey(c.EditorContexts.CanRestartInteractiveWindowKernel,this.commandManager),this.canInterruptInteractiveWindowKernelContext=new l.ContextKey(c.EditorContexts.CanInterruptInteractiveWindowKernel,this.commandManager),this.interactiveContext=new l.ContextKey(c.EditorContexts.IsInteractiveActive,this.commandManager),this.interactiveOrNativeContext=new l.ContextKey(c.EditorContexts.IsInteractiveOrNativeActive,this.commandManager),this.pythonOrNativeContext=new l.ContextKey(c.EditorContexts.IsPythonOrNativeActive,this.commandManager),this.pythonOrInteractiveContext=new l.ContextKey(c.EditorContexts.IsPythonOrInteractiveActive,this.commandManager),this.pythonOrInteractiveOrNativeContext=new l.ContextKey(c.EditorContexts.IsPythonOrInteractiveOrNativeActive,this.commandManager),this.hasNativeNotebookCells=new l.ContextKey(c.EditorContexts.HaveNativeCells,this.commandManager),this.isPythonNotebook=new l.ContextKey(c.EditorContexts.IsPythonNotebook,this.commandManager),this.isJupyterKernelSelected=new l.ContextKey(c.EditorContexts.IsJupyterKernelSelected,this.commandManager),this.hasNativeNotebookOrInteractiveWindowOpen=new l.ContextKey(c.EditorContexts.HasNativeNotebookOrInteractiveWindowOpen,this.commandManager)}dispose(){this.disposables.forEach((e=>e.dispose()))}activate(){this.docManager.onDidChangeActiveTextEditor(this.onDidChangeActiveTextEditor,this,this.disposables),this.kernelProvider.onKernelStatusChanged(this.onDidKernelStatusChange,this,this.disposables),this.interactiveProvider&&(this.interactiveProvider.onDidChangeActiveInteractiveWindow(this.onDidChangeActiveInteractiveWindow,this,this.disposables),this.interactiveProvider.activeWindow&&this.onDidChangeActiveInteractiveWindow()),this.vscNotebook.activeNotebookEditor&&this.onDidChangeActiveNotebookEditor(this.vscNotebook.activeNotebookEditor),this.vscNotebook.onDidChangeActiveNotebookEditor(this.onDidChangeActiveNotebookEditor,this,this.disposables),this.docManager.activeTextEditor?.document.languageId===c.PYTHON_LANGUAGE&&this.onDidChangeActiveTextEditor(this.docManager.activeTextEditor),this.vscNotebook.onDidChangeNotebookEditorSelection(this.updateNativeNotebookInteractiveWindowOpenContext,this,this.disposables),this.vscNotebook.onDidOpenNotebookDocument(this.updateNativeNotebookInteractiveWindowOpenContext,this,this.disposables),this.vscNotebook.onDidCloseNotebookDocument(this.updateNativeNotebookInteractiveWindowOpenContext,this,this.disposables),this.controllers.onControllerSelectionChanged((()=>this.updateSelectedKernelContext()),this,this.disposables),this.updateSelectedKernelContext()}updateNativeNotebookCellContext(){const e=(this.vscNotebook.activeNotebookEditor?.notebook.cellCount||0)>0;this.hasNativeNotebookCells.set(e).ignoreErrors()}onDidChangeActiveInteractiveWindow(e){this.interactiveContext.set(!!e).ignoreErrors(),this.updateNativeNotebookInteractiveWindowOpenContext(),this.updateMergedContexts(),this.updateContextOfActiveInteractiveWindowKernel()}onDidChangeActiveNotebookEditor(e){const t=!!e&&e.notebook.notebookType===p.JupyterNotebookView;this.nativeContext.set(t).ignoreErrors(),this.isPythonNotebook.set(!(!e||!t)&&(0,g.isPythonNotebook)((0,f.getNotebookMetadata)(e.notebook))).ignoreErrors(),this.updateContextOfActiveNotebookKernel(e),this.updateContextOfActiveInteractiveWindowKernel(),this.updateNativeNotebookInteractiveWindowOpenContext(),this.updateNativeNotebookCellContext(),this.updateMergedContexts()}updateNativeNotebookInteractiveWindowOpenContext(){this.hasNativeNotebookOrInteractiveWindowOpen.set(this.vscNotebook.notebookDocuments.some((e=>e.notebookType===p.JupyterNotebookView||e.notebookType===p.InteractiveWindowView))).ignoreErrors()}updateContextOfActiveNotebookKernel(e){const t=e&&e.notebook.notebookType===p.JupyterNotebookView?this.kernelProvider.get(e.notebook):void 0;if(t){const e="unknown"!==t.status;this.canRestartNotebookKernelContext.set(!!e).ignoreErrors();const n="busy"===t.status;this.canInterruptNotebookKernelContext.set(!!n).ignoreErrors()}else this.canRestartNotebookKernelContext.set(!1).ignoreErrors(),this.canInterruptNotebookKernelContext.set(!1).ignoreErrors();this.updateSelectedKernelContext()}updateSelectedKernelContext(){const e=this.vscNotebook.activeNotebookEditor?.notebook||this.interactiveProvider?.getActiveOrAssociatedInteractiveWindow()?.notebookDocument;e&&(0,f.isJupyterNotebook)(e)&&this.controllers.getSelected(e)?this.isJupyterKernelSelected.set(!0).catch(d.noop):this.isJupyterKernelSelected.set(!1).catch(d.noop)}updateContextOfActiveInteractiveWindowKernel(){const e=this.interactiveProvider?.getActiveOrAssociatedInteractiveWindow()?.notebookDocument,t=e?this.kernelProvider.get(e):void 0;if(t){const e="unknown"!==t.status;this.canRestartInteractiveWindowKernelContext.set(!!e).ignoreErrors();const n="busy"===t.status;this.canInterruptInteractiveWindowKernelContext.set(!!n).ignoreErrors()}else this.canRestartInteractiveWindowKernelContext.set(!1).ignoreErrors(),this.canInterruptInteractiveWindowKernelContext.set(!1).ignoreErrors();this.updateSelectedKernelContext()}onDidKernelStatusChange({kernel:e}){const t=e.notebook;t.notebookType===p.InteractiveWindowView?this.updateContextOfActiveInteractiveWindowKernel():t.notebookType===p.JupyterNotebookView&&t===this.vscNotebook.activeNotebookEditor?.notebook&&this.updateContextOfActiveNotebookKernel(this.vscNotebook.activeNotebookEditor)}onDidChangeActiveTextEditor(e){this.isPythonFileActive=e?.document.languageId===c.PYTHON_LANGUAGE&&!(0,d.isNotebookCell)(e.document.uri),this.updateNativeNotebookCellContext(),this.updateMergedContexts(),this.updateContextOfActiveInteractiveWindowKernel()}updateMergedContexts(){this.interactiveOrNativeContext.set(!0===this.nativeContext.value||!0===this.interactiveContext.value).ignoreErrors(),this.pythonOrNativeContext.set(!0===this.nativeContext.value||!0===this.isPythonFileActive).ignoreErrors(),this.pythonOrInteractiveContext.set(!0===this.interactiveContext.value||!0===this.isPythonFileActive).ignoreErrors(),this.pythonOrInteractiveOrNativeContext.set(!0===this.nativeContext.value||!0===this.interactiveContext.value&&!0===this.isPythonFileActive).ignoreErrors()}};y=r([(0,o.injectable)(),i(0,(0,o.inject)(h.IInteractiveWindowProvider)),i(0,(0,o.optional)()),i(1,(0,o.inject)(a.IDocumentManager)),i(2,(0,o.inject)(a.ICommandManager)),i(3,(0,o.inject)(u.IDisposableRegistry)),i(4,(0,o.inject)(a.IVSCodeNotebook)),i(5,(0,o.inject)(s.IKernelProvider)),i(6,(0,o.inject)(m.IControllerRegistration))],y),t.ActiveEditorContextService=y},42750:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addClearCacheCommand=void 0;const r=n(66828),i=n(58681);t.addClearCacheCommand=function(e,t){t&&r.commands.registerCommand("dataScience.ClearCache",(()=>{for(const t of e.globalState.keys())e.globalState.update(t,void 0).then(i.noop,i.noop);for(const t of e.workspaceState.keys())e.workspaceState.update(t,void 0).then(i.noop,i.noop)}))}},22913:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getJupyterOutputChannel=void 0;const s=n(66828),a=o(n(25251));t.getJupyterOutputChannel=function(e,t,n){const r=s.workspace.getConfiguration("jupyter").get("logKernelOutputSeparately",!1);if(!e&&!r)return n;const i=s.window.createOutputChannel(a.DataScience.jupyterServerConsoleOutputChannel);t.push(i);const o={get(e,t){const r=e[t];if("function"==typeof r){if("append"===t)return(...e)=>(i.append(...e),n.append(...e));if("appendLine"===t)return(...e)=>(i.appendLine(...e),n.appendLine(...e))}return r}};return new Proxy(n,o)}},71263:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(42750);t.registerTypes=function(e,t){(0,r.addClearCacheCommand)(e,t)}},29591:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CommandRegistry=void 0;const o=n(86700),s=n(135),a=n(10053),c=n(83599),l=n(42080),u=n(62440),d=n(72716),p=n(50867),h=n(94062),f=n(97555);let g=class{constructor(e,t,n,r,i,o,s,a,c,l,u,p){this.disposables=e,this.workspace=t,this.commandManager=n,this.fileConverter=r,this.applicationShell=i,this.fs=o,this.notebooks=s,this.interactiveProvider=a,this.controllerSelection=c,this.controllerPreferred=l,this.kernelFinder=u,this.featureManager=p,this.exportCommand=new d.ExportCommands(this.commandManager,this.fileConverter,this.applicationShell,this.fs,this.notebooks,this.interactiveProvider,c,l,new f.PreferredKernelConnectionService,u,p),this.workspace.isTrusted||this.workspace.onDidGrantWorkspaceTrust(this.registerCommandsIfTrusted,this,this.disposables)}activate(){this.registerCommandsIfTrusted()}registerCommandsIfTrusted(){this.workspace.isTrusted&&this.exportCommand?.register()}};g=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IDisposableRegistry)),i(1,(0,o.inject)(a.IWorkspaceService)),i(2,(0,o.inject)(a.ICommandManager)),i(3,(0,o.inject)(u.IFileConverter)),i(4,(0,o.inject)(a.IApplicationShell)),i(5,(0,o.inject)(c.IFileSystem)),i(6,(0,o.inject)(a.IVSCodeNotebook)),i(7,(0,o.inject)(s.IInteractiveWindowProvider)),i(7,(0,o.optional)()),i(8,(0,o.inject)(p.IControllerRegistration)),i(9,(0,o.inject)(p.IControllerPreferredService)),i(10,(0,o.inject)(h.IKernelFinder)),i(11,(0,o.inject)(l.IFeaturesManager))],g),t.CommandRegistry=g},72716:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ExportCommands=void 0;const s=n(66828),a=o(n(25251)),c=n(11642),l=n(25251),u=n(58681),d=n(9959),p=n(15925),h=n(62440),f=n(86563),g=n(98729),m=n(38994);t.ExportCommands=class{constructor(e,t,n,r,i,o,s,a,c,l,u){this.commandManager=e,this.fileConverter=t,this.applicationShell=n,this.fs=r,this.notebooks=i,this.interactiveProvider=o,this.controllerRegistration=s,this.controllerPreferred=a,this.preferredKernel=c,this.kernelFinder=l,this.featureManager=u,this.disposables=[]}register(){this.registerCommand(p.Commands.ExportAsPythonScript,((e,t)=>this.export(e,h.ExportFormat.python,void 0,t))),this.registerCommand(p.Commands.ExportToHTML,((e,t,n)=>this.export(e,h.ExportFormat.html,t,n))),this.registerCommand(p.Commands.ExportToPDF,((e,t,n)=>this.export(e,h.ExportFormat.pdf,t,n))),this.registerCommand(p.Commands.Export,((e,t,n)=>this.export(e,void 0,t,n))),this.registerCommand(p.Commands.NativeNotebookExport,(e=>this.nativeNotebookExport(e)))}dispose(){this.disposables.forEach((e=>e.dispose()))}registerCommand(e,t){const n=this.commandManager.registerCommand(e,t,this);this.disposables.push(n)}async nativeNotebookExport(e){const t=(0,u.isUri)(e)?e:e?.notebookEditor?.notebookUri,n=t?this.notebooks.notebookDocuments.find((e=>this.fs.arePathsSame(e.uri,t))):this.notebooks.activeNotebookEditor?.notebook;if(n){let e;if("Insiders"===this.featureManager.features.kernelPickerType){const t=this.kernelFinder.registered.find((e=>e.kind===m.ContributedKernelFinderKind.LocalPythonEnvironment)),r=new s.CancellationTokenSource;try{e=t?await this.preferredKernel.findPreferredLocalKernelSpecConnection(n,t,r.token).then((e=>e?.interpreter)):void 0}finally{r.dispose()}}else e=this.controllerPreferred.getPreferred(n)?.connection.interpreter;const t=this.controllerRegistration.getSelected(n)?.connection.interpreter||e;return this.export(n,void 0,void 0,t)}return this.export(void 0,void 0,void 0,void 0)}async export(e,t,n,r){if(!e){if(!(e=this.notebooks.activeNotebookEditor?.notebook||this.interactiveProvider?.getActiveOrAssociatedInteractiveWindow()?.notebookDocument))return void(0,c.traceInfo)("Export called without a valid exportable document active");r=r||this.controllerRegistration.getSelected(e)?.connection.interpreter||this.controllerPreferred.getPreferred(e)?.connection.interpreter,t&&(0,d.sendTelemetryEvent)(p.Telemetry.ExportNotebookAsCommand,void 0,{format:t})}if(t)await this.fileConverter.export(t,e,n,r);else{const t=await this.showExportQuickPickMenu(e,n,r).then((e=>e));void 0!==t?t.handler():(0,d.sendTelemetryEvent)(p.Telemetry.ClickedExportNotebookAsQuickPick)}}getExportQuickPickItems(e,t,n){const r=[];return(n||e.metadata&&(0,g.isPythonNotebook)((0,f.getNotebookMetadata)(e)))&&r.push({label:l.DataScience.exportPythonQuickPickLabel,picked:!0,handler:()=>{(0,d.sendTelemetryEvent)(p.Telemetry.ClickedExportNotebookAsQuickPick,void 0,{format:h.ExportFormat.python}),this.commandManager.executeCommand(p.Commands.ExportAsPythonScript,e,n).then(u.noop,u.noop)}}),r.push({label:l.DataScience.exportHTMLQuickPickLabel,picked:!1,handler:()=>{(0,d.sendTelemetryEvent)(p.Telemetry.ClickedExportNotebookAsQuickPick,void 0,{format:h.ExportFormat.html}),this.commandManager.executeCommand(p.Commands.ExportToHTML,e,t,n).then(u.noop,u.noop)}},{label:l.DataScience.exportPDFQuickPickLabel,picked:!1,handler:()=>{(0,d.sendTelemetryEvent)(p.Telemetry.ClickedExportNotebookAsQuickPick,void 0,{format:h.ExportFormat.pdf}),this.commandManager.executeCommand(p.Commands.ExportToPDF,e,t,n).then(u.noop,u.noop)}}),r}async showExportQuickPickMenu(e,t,n){const r=this.getExportQuickPickItems(e,t,n),i={ignoreFocusOut:!1,matchOnDescription:!0,matchOnDetail:!0,placeHolder:a.DataScience.exportAsQuickPickPlaceholder};return this.applicationShell.showQuickPick(r,i)}}},85303:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ImportTracker=t.IImportTracker=void 0;const o=n(86700),s=n(66828),a=n(9959),c=n(10053),l=n(15925);n(8513);const u=n(20397),d=n(42080),p=n(58681),h=n(2161),f=n(96434),g=n(86563),m=n(56297),y=n(9959),v=/^\s*(from (?<fromImport>\w+)(?:\.\w+)* import \w+(?:, \w+)*(?: as \w+)?|import (?<importImport>\w+(?:, \w+)*)(?: as \w+)?)$/,b=(0,l.isTestExecution)();t.IImportTracker=Symbol("IImportTracker");let w=class{get isTelemetryDisabled(){return(0,y.isTelemetryDisabled)(this.workspace)}constructor(e,t,n){this.vscNotebook=e,this.workspace=n,this.pendingChecks=new m.ResourceMap,this.disposables=[],this.sentMatches=new Set,t.push(this),this.vscNotebook.onDidOpenNotebookDocument((e=>this.onOpenedOrClosedNotebookDocument(e,"onOpenCloseOrSave")),this.disposables),this.vscNotebook.onDidCloseNotebookDocument((e=>this.onOpenedOrClosedNotebookDocument(e,"onOpenCloseOrSave")),this.disposables),this.vscNotebook.onDidSaveNotebookDocument((e=>this.onOpenedOrClosedNotebookDocument(e,"onOpenCloseOrSave")),this.disposables),this.vscNotebook.onDidChangeNotebookCellExecutionState((e=>{e.state!=s.NotebookCellExecutionState.Pending||this.isTelemetryDisabled||this.checkNotebookCell(e.cell,"onExecution").ignoreErrors()}),this,t)}dispose(){(0,u.disposeAllDisposables)(this.disposables),this.pendingChecks.clear()}activate(){this.vscNotebook.notebookDocuments.forEach((e=>this.checkNotebookDocument(e,"onOpenCloseOrSave")))}getDocumentLines(e){const t=[];for(let n=0;n<Math.min(1e3,e.lineCount);n++){const r=e.lineAt(n);r.isEmptyOrWhitespace||t.push(r.text.trim())}return t}onOpenedOrClosedNotebookDocument(e,t){(0,g.isJupyterNotebook)(e)&&!this.isTelemetryDisabled&&this.scheduleCheck(e.uri,this.checkNotebookDocument.bind(this,e,t))}scheduleCheck(e,t){const n=this.pendingChecks.get(e);n&&(clearTimeout(n),this.pendingChecks.delete(e)),b?t():this.pendingChecks.set(e,setTimeout(t,5e3))}async checkNotebookDocument(e,t){(0,g.isJupyterNotebook)(e)&&!this.isTelemetryDisabled&&await Promise.all(e.getCells().map((async e=>this.checkNotebookCell(e,t))))}async checkNotebookCell(e,t){if((0,g.isJupyterNotebook)(e.notebook)&&e.kind===s.NotebookCellKind.Code&&e.document.languageId===l.PYTHON_LANGUAGE)try{const n=e.notebook.notebookType===l.JupyterNotebookView?"notebook":"interactive";await this.sendTelemetryForImports(this.getDocumentLines(e.document),n,t)}catch(e){if(!l.isCI)throw e}}lookForImports(e){const t=[];try{for(const n of e){if(!n.includes("import")&&!n.includes("from"))continue;const e=n?v.exec(n):null;null!==e&&void 0!==e.groups&&(void 0!==e.groups.fromImport?t.push(e.groups.fromImport):void 0!==e.groups.importImport&&t.push(...e.groups.importImport.split(",").map((e=>e.trim()))))}}catch(e){(0,p.noop)()}return t}async sendTelemetryForImports(e,t,n){await Promise.all(this.lookForImports(e).map((async e=>{const r=`${e}_${t||""}_${n}`;if(this.sentMatches.has(r))return;this.sentMatches.add(r);const i=await(0,f.getTelemetrySafeHashedString)(e);(0,a.sendTelemetryEvent)(h.EventName.HASHED_PACKAGE_NAME,void 0,{hashedNamev2:i,resourceType:t,when:n})})))}};w=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IVSCodeNotebook)),i(1,(0,o.inject)(d.IDisposableRegistry)),i(2,(0,o.inject)(c.IWorkspaceService))],w),t.ImportTracker=w},27011:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterExporter=void 0;const o=n(86700),s=n(66828),a=n(49691),c=n(10053),l=n(11642),u=n(83599),d=n(42080),p=n(86563),h=n(25251),f=n(15925),g=n(94433),m=n(13730),y=n(58681),v=n(90541);let b=class{constructor(e,t,n,r,i){this.jupyterExecution=e,this.configService=t,this.fileSystem=n,this.applicationShell=r,this.errorHandler=i,this.pruneCells=(e,t)=>e.map((e=>this.pruneCell(e,t))),this.pruneCell=(e,t)=>{const n=(0,p.pruneCell)({...e.data});return n.source=this.pruneSource(e.data.source,t),n},this.pruneSource=(e,t)=>{if(Array.isArray(e)&&e.length>0){if(t.isCell(e[0]))return e.slice(1)}else{const n=e.toString().split("\n").map((e=>`${e}\n`));if(n.length>0&&t.isCell(n[0]))return n.slice(1)}return e},this.extractPythonMainVersion=async()=>{const e=await this.jupyterExecution.getUsableJupyterPython();return e&&e.version?e.version.major:3}}dispose(){}async exportToFile(e,t,n=!0){const r=await this.translateToNotebook(e);try{const e=JSON.stringify(r,void 0,1);if(await this.fileSystem.writeFile(s.Uri.file(t),e),!n)return;const i=h.DataScience.exportOpenQuestion1;this.applicationShell.showInformationMessage(h.DataScience.exportDialogComplete(t),i).then((async e=>{try{e===i&&await(0,m.openAndShowNotebook)(s.Uri.file(t))}catch(e){await this.errorHandler.handleError(e)}}),y.noop)}catch(e){(0,l.traceError)("Error in exporting notebook file"),this.applicationShell.showInformationMessage(h.DataScience.exportDialogFailed(e)).then(y.noop,y.noop)}}async translateToNotebook(e,t){const n=await this.extractPythonMainVersion(),r={language_info:{codemirror_mode:{name:"ipython",version:n},file_extension:".py",mimetype:"text/x-python",name:"python",nbconvert_exporter:"python",pygments_lexer:`ipython${n}`,version:n},orig_nbformat:f.defaultNotebookFormat.major,kernelspec:t},i=new a.CellMatcher(this.configService.getSettings());return{cells:this.pruneCells(e,i),nbformat:f.defaultNotebookFormat.major,nbformat_minor:f.defaultNotebookFormat.minor,metadata:r}}};b=r([(0,o.injectable)(),i(0,(0,o.inject)(g.IJupyterExecution)),i(1,(0,o.inject)(d.IConfigurationService)),i(2,(0,o.inject)(u.IFileSystem)),i(3,(0,o.inject)(c.IApplicationShell)),i(4,(0,o.inject)(v.IDataScienceErrorHandler))],b),t.JupyterExporter=b},73584:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.mapJupyterKind=void 0,function(e){e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.Snippet=25]="Snippet"}(n||(n={})),t.mapJupyterKind=new Map([["method",n.Method],["function",n.Function],["constructor",n.Constructor],["field",n.Field],["variable",n.Variable],["class",n.Class],["struct",n.Struct],["interface",n.Interface],["module",n.Module],["property",n.Property],["event",n.Event],["operator",n.Operator],["unit",n.Unit],["value",n.Value],["constant",n.Constant],["enum",n.Enum],["enumMember",n.EnumMember],["keyword",n.Keyword],["text",n.Text],["color",n.Color],["file",n.File],["reference",n.Reference],["customcolor",n.Customcolor],["folder",n.Folder],["typeParameter",n.TypeParameter],["snippet",n.Snippet],["<unknown>",n.Field]])},43793:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookCellBangInstallDiagnosticsProvider=void 0;const o=n(86700),s=n(66828),a=n(10053),c=n(15925),l=n(20397),u=n(42080),d=n(25251),p=n(15925),h=n(86563),f=d.DataScience.percentPipCondaInstallInsteadOfBang("pip"),g=d.DataScience.percentPipCondaInstallInsteadOfBang("conda"),m=d.DataScience.matplotlibWidgetInsteadOfOther,y="Jupyter";let v=class{constructor(e,t,n){this.notebooks=e,this.documents=n,this.disposables=[],this.notebooksProcessed=new WeakMap,this.cellsToProcess=new Set,this.problems=s.languages.createDiagnosticCollection(y),this.disposables.push(this.problems),t.push(this)}dispose(){(0,l.disposeAllDisposables)(this.disposables),this.problems.dispose()}activate(){this.disposables.push(s.languages.registerCodeActionsProvider(c.PYTHON_LANGUAGE,this)),this.disposables.push(s.languages.registerHoverProvider(c.PYTHON_LANGUAGE,this)),this.documents.onDidChangeTextDocument((e=>{const t=(0,h.getAssociatedJupyterNotebook)(e.document);if(!t)return;const n=t.getCells().find((t=>t.document===e.document));n&&this.analyzeNotebookCell(n)}),this,this.disposables),this.notebooks.onDidCloseNotebookDocument((e=>{this.problems.delete(e.uri);const t=this.notebooksProcessed.get(e);this.notebooksProcessed.delete(e),t&&t.forEach(((e,t)=>this.problems.delete(s.Uri.parse(t))))}),this,this.disposables),this.notebooks.onDidOpenNotebookDocument((e=>this.analyzeNotebook(e)),this,this.disposables),s.workspace.onDidChangeNotebookDocument((e=>{const t=this.notebooksProcessed.get(e.notebook);e.contentChanges.forEach((e=>{e.removedCells.forEach((e=>{t?.delete(e.document.uri.toString())})),e.addedCells.forEach((e=>this.queueCellForProcessing(e)))})),e.cellChanges.forEach((e=>this.queueCellForProcessing(e.cell)))}),this,this.disposables),this.notebooks.notebookDocuments.map((e=>this.analyzeNotebook(e)))}provideHover(e,t,n){if((0,h.getAssociatedJupyterNotebook)(e)?.notebookType!==p.JupyterNotebookView)return;const r=this.problems.get(e.uri);if(!r)return;const i=r.find((e=>e.message===f||e.message===g));if(!i||!i.range.contains(t))return;const o=i.message===f?"pip":"conda";return new s.Hover(d.DataScience.pipCondaInstallHoverWarning(o,"https://aka.ms/jupyterCellMagicBangInstall"),i.range)}provideCodeActions(e,t,n,r){if(!(0,h.getAssociatedJupyterNotebook)(e))return[];const i=[];return n.diagnostics.forEach((t=>{switch(t.message){case f:i.push(this.createReplaceCodeAction(e,"pip",t));break;case g:i.push(this.createReplaceCodeAction(e,"conda",t));break;case m:i.push(this.createGotoWikiAction(e,s.Uri.parse("https://aka.ms/vscodejupytermatplotlibwidget"),t))}})),i}createReplaceCodeAction(e,t,n){const r=new s.CodeAction(d.DataScience.replacePipCondaInstallCodeAction(t),s.CodeActionKind.QuickFix);r.isPreferred=!0,r.diagnostics=[n];const i=new s.WorkspaceEdit;return i.replace(e.uri,new s.Range(n.range.start,new s.Position(n.range.start.line,n.range.start.character+1)),"%"),r.edit=i,r}createGotoWikiAction(e,t,n){const r=new s.CodeAction(d.DataScience.matplotlibWidgetCodeActionTitle,s.CodeActionKind.QuickFix);return r.isPreferred=!0,r.diagnostics=[n],r.command={title:d.DataScience.matplotlibWidgetCodeActionTitle,command:"vscode.open",arguments:[t]},r}analyzeNotebook(e){e.notebookType===p.JupyterNotebookView&&e.getCells().forEach(((e,t)=>t<100?this.queueCellForProcessing(e):void 0))}queueCellForProcessing(e){this.cellsToProcess.add(e),this.analyzeNotebookCells()}analyzeNotebookCells(){if(0===this.cellsToProcess.size)return;const e=this.cellsToProcess.values().next().value;this.cellsToProcess.delete(e),this.analyzeNotebookCell(e),setTimeout((()=>this.analyzeNotebookCells()),0)}analyzeNotebookCell(e){if(e.kind!==s.NotebookCellKind.Code||e.document.languageId!==c.PYTHON_LANGUAGE||e.notebook.isClosed||e.document.isClosed)return;if(this.notebooksProcessed.get(e.notebook)?.get(e.document.uri.toString())===e.document.version)return;this.problems.delete(e.document.uri);const t=this.notebooksProcessed.get(e.notebook)||new Map;t.set(e.document.uri.toString(),e.document.version),this.notebooksProcessed.set(e.notebook,t);for(let t=0;t<Math.min(e.document.lineCount,50);t++){const n=e.document.lineAt(t),r=n.text;if(r.trim().startsWith("!pip install")){const t=r.indexOf("!"),i=r.indexOf("l"),o=new s.Range(n.lineNumber,t,n.lineNumber,i+2);this.problems.set(e.document.uri,[{message:f,range:o,severity:s.DiagnosticSeverity.Error,source:y}])}else if(r.trim().startsWith("!conda install")){const t=r.indexOf("!"),i=r.indexOf("l"),o=new s.Range(n.lineNumber,t,n.lineNumber,i+2);this.problems.set(e.document.uri,[{message:g,range:o,severity:s.DiagnosticSeverity.Error,source:y}])}else if(r.trim().startsWith("%matplotlib")&&!r.trim().endsWith("widget")&&!r.trim().endsWith("inline")){const t=r.indexOf("%"),i=r.length,o=new s.Range(n.lineNumber,t,n.lineNumber,i);this.problems.set(e.document.uri,[{message:m,range:o,severity:s.DiagnosticSeverity.Warning,source:y}])}}}};v=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IVSCodeNotebook)),i(1,(0,o.inject)(u.IDisposableRegistry)),i(2,(0,o.inject)(a.IDocumentManager))],v),t.NotebookCellBangInstallDiagnosticsProvider=v},97800:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.filterCompletions=t.generateSortString=t.PythonKernelCompletionProvider=t.setIntellisenseTimeout=void 0;const o=n(86700),s=n(66828),a=n(6491),c=n(11642),l=n(35412),u=n(42080),d=n(43138),p=n(58681),h=n(11386),f=n(94062),g=n(85249),m=n(73584),y=n(15925),v=n(86563);let b=y.Settings.IntellisenseTimeout;t.setIntellisenseTimeout=function(e){b=e};let w=class{constructor(e,t,n,r,i){this.kernelProvider=e,this.notebookEditorProvider=t,this.notebookCompletionProvider=n,this.allowStringFilter=!1;const o=r.getSettings().pythonCompletionTriggerCharacters;this.allowStringFilter=null!=o&&(o.includes("'")||o.includes('"')),s.workspace.onDidChangeConfiguration((e=>{if(e.affectsConfiguration("jupyter.pythonCompletionTriggerCharacters")){const e=r.getSettings().pythonCompletionTriggerCharacters;this.allowStringFilter=null!=e&&(e.includes("'")||e.includes('"'))}}),this,i)}async provideCompletionItems(e,t,n,r){if(!(0,p.isNotebookCell)(e))return[];const i=this.notebookEditorProvider.findAssociatedNotebookDocument(e.uri);if(!i)return(0,c.traceError)(`Notebook not found for Cell ${(0,l.getDisplayPath)(e.uri)}`),[];const o=this.kernelProvider.get(i);if(!o||!o.session)return(0,c.traceVerbose)(`Live Notebook not available for ${(0,l.getDisplayPath)(i.uri)}`),[];(0,c.traceInfoIfCI)(`Notebook completion request for ${e.getText()}, ${e.offsetAt(t)}`);const[a,u]=await Promise.all([(0,d.waitForPromise)(this.getJupyterCompletion(o.session,e.getText(),e.offsetAt(t),n),b),(0,d.waitForPromise)(this.getPylanceCompletions(e,t,r,n),b)]);if(!a)return(0,c.traceInfoIfCI)("Notebook completions not found."),[];(0,c.traceInfoIfCI)(`Completions found, filtering the list: ${JSON.stringify(a)}.`);let h=[];const f=a.metadata?a.metadata._jupyter_types_experimental:[];return h=Array.isArray(f)&&f.length>=a.matches.length&&f.every((e=>"number"==typeof e.start&&"number"==typeof e.end&&"string"==typeof e.text))?f.map(((t,n)=>({label:t.text,itemText:t.text,range:new s.Range(e.positionAt(t.start),e.positionAt(t.end)),kind:t.type?m.mapJupyterKind.get(t.type):s.CompletionItemKind.Field,sortText:C(n)}))):a.matches.map(((e,t)=>({label:e,itemText:e,sortText:C(t)}))),S(r.triggerCharacter,this.allowStringFilter,h,u,e,t)}async getJupyterCompletion(e,t,n,r){const i=new h.StopWatch;if("busy"===e.status&&!(0,y.isTestExecution)())return{matches:[],cursor:{start:0,end:0},metadata:{}};const o=await Promise.race([e.requestComplete({code:t,cursor_pos:n}),(0,a.createPromiseFromCancellation)({defaultValue:void 0,cancelAction:"resolve",token:r})]);return(0,c.traceInfoIfCI)(`Got jupyter notebook completions. Is cancel? ${r?.isCancellationRequested}: ${o?JSON.stringify(o):"empty"}`),(0,c.traceVerbose)(`Jupyter completion time: ${i.elapsedTime}`),o&&o.content&&"matches"in o.content?{matches:o.content.matches,cursor:{start:o.content.cursor_start,end:o.content.cursor_end},metadata:o.content.metadata}:{matches:[],cursor:{start:0,end:0},metadata:{}}}async getPylanceCompletions(e,t,n,r){const i=(0,v.getAssociatedJupyterNotebook)(e);if(i&&this.notebookCompletionProvider)return this.notebookCompletionProvider.getCompletions(i,e,t,n,r)}};function C(e){return e>=300?"ZZZZZZZ":e<=25?`A${String.fromCharCode(65+e)}`:`${String.fromCharCode(65+Math.ceil(e/25))}${String.fromCharCode(65+e%25)}`}function S(e,t,n,r,i,o){let a=n;const l=0===o.character?void 0:new s.Range(o.line,o.character-1,o.line,o.character),u="."===(l?i.getText(l):void 0),d=i.getWordRangeAtPosition(u||"."===e?new s.Position(o.line,o.character-1):o),p=d&&l?d.union(l):void 0,h=i.lineAt(o.line).text,f=p?i.getText(p):h,g=f.endsWith(".")||u,m=t&&("'"==e||'"'==e||function(e,t){const n=e.indexOf('"'),r=e.indexOf("'"),i=e.lastIndexOf('"'),o=e.lastIndexOf("'"),s=n>=0?n:r,a=i>=0?i:o;return s>=0&&t.character>s&&t.character<=a}(h,o));if((0,c.traceInfoIfCI)(`Jupyter completions filtering applied: ${m} on ${h}`),a=a.map(((e,t)=>{if(e.itemText.startsWith("%")||e.itemText.startsWith("!"))return{...e,sortText:`ZZZ${e.sortText}`};if(m)return e;const n=f?e.itemText.indexOf(f):-1;let r,i,o;if(f&&g&&e.itemText.includes(f)){r=e.itemText.substring(e.itemText.indexOf(f)+(g?f.length:0)),i=e.itemText.substring(e.itemText.indexOf(f)+f.length);const t=("string"==typeof e.label?e.label.length:e.label.label.length)-i.length;o=e.range&&"start"in e.range?new s.Range(new s.Position(e.range.start.line,e.range.start.character+t),e.range.end):e.range}if(!i&&n>0){r=e.itemText.substring(e.itemText.indexOf(f)+(g?f.length:0)),i=e.itemText.substring(e.itemText.indexOf(f)+f.length);const t=("string"==typeof e.label?e.label.length:e.label.label.length)-i.length;o=e.range&&"start"in e.range?new s.Range(new s.Position(e.range.start.line,e.range.start.character+t),e.range.end):e.range}return r&&i&&o&&(e.label=r,e.itemText=i,e.insertText=i,e.filterText=g?`.${i}`:i,e.range=o,e.sortText=C(t)),e})),a=m?a.map((e=>e.itemText.endsWith("/")?{...e,command:{command:"editor.action.triggerSuggest",title:""}}:(e.itemText.includes(" ")&&(e.itemText=e.itemText.replace(/\\ /g," "),"string"==typeof e.label?e.label=e.label.replace(/\\ /g," "):e.label.label=e.label.label.replace(/\\ /g," ")),e))):a.filter((e=>!e.itemText.includes(".")&&!e.itemText.endsWith("/"))),r){const e=new Set(r.map((e=>e.label.toString())));a=a.filter((t=>!e.has(t.itemText)))}return(0,c.traceInfoIfCI)(`Jupyter completions for ${f} at pos ${o.line}:${o.character} with trigger: ${e}\n   ${n.map((e=>e.label)).join(",")}`),(0,c.traceInfoIfCI)(`Jupyter results for ${f} at pos ${o.line}:${o.character} with trigger: ${e}\n   ${a.map((e=>e.label)).join(",")}`),a}w=r([(0,o.injectable)(),i(0,(0,o.inject)(f.IKernelProvider)),i(1,(0,o.inject)(g.INotebookEditorProvider)),i(2,(0,o.inject)(g.INotebookCompletionProvider)),i(2,(0,o.optional)()),i(3,(0,o.inject)(u.IConfigurationService)),i(4,(0,o.inject)(u.IDisposableRegistry))],w),t.PythonKernelCompletionProvider=w,t.generateSortString=C,t.filterCompletions=S},73974:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonKernelCompletionProviderRegistration=void 0;const o=n(86700),s=n(66828),a=n(15925),c=n(42080),l=n(97800),u=[".","%"];let d=class{constructor(e,t,n){this.disposables=e,this.config=t,this.completionProvider=n}activate(){let e=this.config.getSettings().pythonCompletionTriggerCharacters?.split("")||u;(e.includes('"')||e.includes("'"))&&(e=[...e,"/"]),this.registerCompletionItemProvider(e)}registerCompletionItemProvider(e){const t=s.languages.registerCompletionItemProvider(a.NOTEBOOK_SELECTOR,this.completionProvider,...e);this.disposables.push(t)}};d=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IDisposableRegistry)),i(1,(0,o.inject)(c.IConfigurationService)),i(2,(0,o.inject)(l.PythonKernelCompletionProvider))],d),t.PythonKernelCompletionProviderRegistration=d},65108:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(52064),i=n(43793),o=n(97800),s=n(73974);t.registerTypes=function(e,t){e.addSingleton(r.IExtensionSyncActivationService,i.NotebookCellBangInstallDiagnosticsProvider),e.addSingleton(o.PythonKernelCompletionProvider,o.PythonKernelCompletionProvider),e.addSingleton(r.IExtensionSyncActivationService,s.PythonKernelCompletionProviderRegistration)}},66646:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonExtensionRestartNotification=void 0;const c=n(86700),l=s(n(25251)),u=n(77886),d=n(10053),p=n(42080),h=n(58681),f=n(94062);let g=class{constructor(e,t,n,r){this.extensionChecker=e,this.disposables=t,this.applicationShell=n,this.kernelProvider=r}activate(){this.extensionChecker.onPythonExtensionInstallationStatusChanged(this.onPythonExtensionInstallationStatusChanged,this,this.disposables)}async onPythonExtensionInstallationStatusChanged(e){"installed"===e&&this.anyKernelsAreActive()&&this.applicationShell.showInformationMessage(l.DataScience.pythonExtensionInstalled,l.Common.ok).then(h.noop,h.noop)}anyKernelsAreActive(){return this.kernelProvider.kernels.length>0}};g=o([(0,c.injectable)(),a(0,(0,c.inject)(u.IPythonExtensionChecker)),a(1,(0,c.inject)(p.IDisposableRegistry)),a(2,(0,c.inject)(d.IApplicationShell)),a(3,(0,c.inject)(f.IKernelProvider))],g),t.PythonExtensionRestartNotification=g},63521:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(52064),i=n(29591),o=n(4188),s=n(73381),a=n(94433),c=n(27011),l=n(49612),u=n(34383),d=n(81827),p=n(46498),h=n(71263),f=n(65108),g=n(66646),m=n(85303),y=n(89072);t.registerTypes=function(e,t,n){t.addSingleton(r.IExtensionSyncActivationService,s.GlobalActivation),t.addSingleton(r.IExtensionSyncActivationService,o.ActiveEditorContextService),t.addSingleton(r.IExtensionSyncActivationService,i.CommandRegistry),t.addSingleton(r.IExtensionSyncActivationService,m.ImportTracker),t.add(r.IExtensionActivationManager,p.ExtensionActivationManager),t.add(a.INotebookExporter,c.JupyterExporter),t.addSingleton(u.IExportedKernelServiceFactory,l.JupyterKernelServiceFactory),t.addSingleton(d.ApiAccessService,d.ApiAccessService),t.addSingleton(r.IExtensionSyncActivationService,g.PythonExtensionRestartNotification),(0,f.registerTypes)(t,n),(0,h.registerTypes)(e,n),t.addSingleton(r.IExtensionSyncActivationService,y.UserJupyterServerUrlProvider)}},89072:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.UserJupyterServerUrlProvider=t.UserJupyterServerUriListKey=void 0;const s=n(86700),a=o(n(71171)),c=n(66828),l=n(24319),u=n(46875),d=n(27527),p=n(94433),h=n(10053),f=n(15925),g=n(42080),m=n(25251),y=n(58681),v=n(11642),b=n(2219);t.UserJupyterServerUriListKey="user-jupyter-server-uri-list";const w="_builtin.jupyterServerUrlProvider.uriList";let C=class{constructor(e,t,n,r,i,o,s,a,l,u,d){this.clipboard=e,this.uriProviderRegistration=t,this.applicationShell=n,this.configService=r,this.jupyterConnection=i,this.isWebExtension=o,this.encryptedStorage=s,this.serverUriStorage=a,this.globalMemento=l,this.disposables=u,this.featuresManager=d,this.id="_builtin.jupyterServerUrlProvider",this.displayName=m.DataScience.UserJupyterServerUrlProviderDisplayName,this.detail=m.DataScience.UserJupyterServerUrlProviderDetail,this._onDidChangeHandles=new c.EventEmitter,this.onDidChangeHandles=this._onDidChangeHandles.event,this._servers=[],this._localDisposables=[],this.disposables.push(this)}activate(){const e=()=>{"Insiders"===this.featuresManager.features.kernelPickerType?this._activateProvider():(this._localDisposables.forEach((e=>e.dispose())),this._localDisposables=[])};this.disposables.push(this.featuresManager.onDidChangeFeatures((()=>e()))),e()}_activateProvider(){this._localDisposables.push(this.uriProviderRegistration.registerProvider(this)),this._servers=[],this._localDisposables.push(c.commands.registerCommand("dataScience.ClearUserProviderJupyterServerCache",(async()=>{await this.encryptedStorage.store(f.Settings.JupyterServerRemoteLaunchService,t.UserJupyterServerUriListKey,""),await this.globalMemento.update(w,[]),this._servers=[],this._onDidChangeHandles.fire()}))),this._initializeCachedServerInfo().then((async()=>{const e=await this.serverUriStorage.getSavedUriList(),t=[];for(const n of e){if(n.uri===f.Settings.JupyterServerLocalLaunch)continue;if((0,u.extractJupyterServerHandleAndId)(n.uri))continue;if(this._servers.find((e=>e.uri===n.uri)))continue;const e=this.parseUri(n.uri);e&&t.push({handle:(0,a.default)(),uri:n.uri,serverInfo:e})}this._servers.push(...t),this._onDidChangeHandles.fire()})).catch(y.noop)}async _initializeCachedServerInfo(){return this._cachedServerInfoInitialized||(this._cachedServerInfoInitialized=new Promise((async e=>{const n=this.globalMemento.get(w),r=await this.encryptedStorage.retrieve(f.Settings.JupyterServerRemoteLaunchService,t.UserJupyterServerUriListKey);if(!r||!n||0===n.length)return void e();const i=r.split(f.Settings.JupyterServerRemoteLaunchUriSeparator);if(0===i.length||i.length!==n.length)return(0,v.traceError)("Invalid server list, unable to retrieve server info"),void e();const o=[];for(let e=0;e<i.length;e+=1){const t=this.parseUri(i[e]);t?o.push({handle:n[e].handle,uri:i[e],serverInfo:t}):(0,v.traceError)("Unable to parse server info",t)}this._servers=o,e()}))),this._cachedServerInfoInitialized}getQuickPickEntryItems(){return[{default:!0,label:m.DataScience.jupyterSelectURIPrompt,detail:m.DataScience.jupyterSelectURINewDetail}]}async handleQuickPick(e,t){if(await this._cachedServerInfoInitialized,e.label!==m.DataScience.jupyterSelectURIPrompt)return;let n="";try{const e=await this.clipboard.readText().catch((()=>"")),t=c.Uri.parse(e.trim(),!0);n=e&&t&&t.scheme.toLowerCase().startsWith("http")?e:""}catch{}const r=[],i=c.window.createInputBox();return i.title=m.DataScience.jupyterSelectURIPrompt,i.value=n,i.ignoreFocusOut=!0,new Promise((e=>{t&&(i.buttons=[c.QuickInputButtons.Back],r.push(i.onDidTriggerButton((t=>{t===c.QuickInputButtons.Back?e("back"):e(void 0)}))));let n=!1;r.push(i.onDidAccept((async()=>{const t=i.value;try{for(let e of this._servers)if(e.uri===t)return void(i.validationMessage=m.DataScience.UserJupyterServerUrlAlreadyExistError)}catch(e){(0,v.traceError)("Failed to check if server already exists",e)}const r=await(0,d.validateSelectJupyterURI)(this.jupyterConnection,this.applicationShell,this.configService,this.isWebExtension,t);if(r)n&&i.show(),i.validationMessage=r;else{const n="",r=this.parseUri(t,(n||"").trim());if(r){const n=(0,a.default)();this._servers.push({handle:n,uri:t,serverInfo:r}),await this.updateMemento(),e(n)}else e(void 0)}})),i.onDidHide((()=>{n=!0,b.JupyterPasswordConnect.prompt||e(void 0)}))),i.show()})).finally((()=>{r.forEach((e=>e.dispose()))}))}parseUri(e,t){let n;try{n=new URL(e);const r=`${n.protocol}//${n.host}${"/lab"===n.pathname?"":n.pathname}`,i=`${n.searchParams.get("token")}`,o=""===i||"null"===i,s={Authorization:`token ${i}`},a=n.hostname;return{baseUrl:r,token:o?"":i,displayName:t||a,authorizationHeader:o?{}:s}}catch(e){return}}async getServerUri(e){const t=this._servers.find((t=>t.handle===e));if(!t)throw new Error("Server not found");return t.serverInfo}async getHandles(){return await this._initializeCachedServerInfo(),this._servers.map((e=>e.handle))}async removeHandle(e){this._servers=this._servers.filter((t=>t.handle!==e)),await this.updateMemento(),this._onDidChangeHandles.fire()}async updateMemento(){const e=this._servers.map((e=>`${e.uri}`)).join(f.Settings.JupyterServerRemoteLaunchUriSeparator),n=this._servers.map(((e,t)=>({index:t,handle:e.handle})));return await this.globalMemento.update(w,n),this.encryptedStorage.store(f.Settings.JupyterServerRemoteLaunchService,t.UserJupyterServerUriListKey,e)}dispose(){this._localDisposables.forEach((e=>e.dispose()))}};C=r([(0,s.injectable)(),i(0,(0,s.inject)(h.IClipboard)),i(1,(0,s.inject)(p.IJupyterUriProviderRegistration)),i(2,(0,s.inject)(h.IApplicationShell)),i(3,(0,s.inject)(g.IConfigurationService)),i(4,(0,s.inject)(l.JupyterConnection)),i(5,(0,s.inject)(g.IsWebExtension)),i(6,(0,s.inject)(h.IEncryptedStorage)),i(7,(0,s.inject)(p.IJupyterServerUriStorage)),i(8,(0,s.inject)(g.IMemento)),i(8,(0,s.named)(g.GLOBAL_MEMENTO)),i(9,(0,s.inject)(g.IDisposableRegistry)),i(10,(0,s.inject)(g.IFeaturesManager))],C),t.UserJupyterServerUrlProvider=C},9959:function(e,t,n){"use strict";var r,i,o,s,a,c,l,u,d,p,h,f,g,m,y,v,b,w,C,S,_,k,P,I,E,T,D,x,R,j,N,M,O,A,L,F,U,K,W,V,H,B,q,J,$,G,z,Y,Q,X,Z,ee,te,ne,re,ie,oe,se,ae,ce,le,ue,de,pe,he,fe,ge,me,ye,ve,be,we,Ce,Se,_e,ke,Pe,Ie,Ee,Te,De,xe,Re,je,Ne,Me,Oe,Ae,Le,Fe,Ue,Ke,We,Ve,He,Be,qe,Je,$e,Ge,ze,Ye,Qe,Xe,Ze,et,tt,nt,rt,it,ot,st,at,ct,lt,ut,dt,pt,ht,ft,gt,mt,yt,vt,bt,wt,Ct,St,_t,kt,Pt,It,Et,Tt,Dt,xt,Rt,jt,Nt,Mt,Ot,At,Lt,Ft,Ut,Kt,Wt,Vt,Ht,Bt,qt,Jt,$t,Gt,zt,Yt,Qt,Xt,Zt,en,tn,nn,rn,on,sn,an,cn,ln,un,dn,pn,hn,fn,gn,mn,yn,vn,bn=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),wn=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||bn(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.IEventNamePropertyMapping=t.CommonPropertyAndMeasureTypeNames=t.CommonProperties=void 0;const Cn=n(15925),Sn=n(2161),_n=n(3445);wn(n(68125),t),t.CommonProperties={duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0},failed:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureSubCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFile:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFolder:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorPackage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},stackTrace:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isamlcompute:{classification:"SystemMetaData",purpose:"FeatureInsight",comment:"Whether this is an AML compute instance. Common to all events."},isInsiderExtension:{classification:"SystemMetaData",purpose:"FeatureInsight",comment:"Whether this is the Insider version of the Jupyter extension or not. Common to all events."},isPythonExtensionInstalled:{classification:"SystemMetaData",purpose:"FeatureInsight",comment:"Whether Python extension is installed or not. Common to all events."},rawKernelSupported:{classification:"SystemMetaData",purpose:"FeatureInsight",comment:"Whether the raw kernel is supported or not. Common to all events."}},t.CommonPropertyAndMeasureTypeNames=["ResourceSpecificTelemetryProperties","DurationMeasurement","ResourceTypeTelemetryProperty","TelemetryErrorProperties"],t.IEventNamePropertyMapping=class{constructor(){this[r]={owner:"donjayamanne",feature:"N/A",source:"N/A",measures:{totalActivateTime:{classification:"SystemMetaData",purpose:"PerformanceAndHealth",isMeasurement:!0},workspaceFolderCount:{classification:"SystemMetaData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[i]={owner:"donjayamanne",feature:"N/A",source:"N/A"},this[o]={owner:"donjayamanne",feature:"N/A",source:"N/A"},this[s]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{hashedNamev2:{classification:"SystemMetaData",purpose:"FeatureInsight"},when:{classification:"SystemMetaData",purpose:"FeatureInsight"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}}},this[a]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{firstTime:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"}},measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[c]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{kind:{classification:"SystemMetaData",purpose:"FeatureInsight"}},measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[l]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{mimeType:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},when:{classification:"SystemMetaData",purpose:"FeatureInsight"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}}},this[u]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{envType:{classification:"SystemMetaData",purpose:"FeatureInsight"},failed:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},reason:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},source:{classification:"SystemMetaData",purpose:"FeatureInsight"}},measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[d]={owner:"IanMatthewHuff",source:"User Action",feature:["DataFrameViewer","VariableViewer"]},this[p]={owner:"IanMatthewHuff",source:"N/A",feature:["DataFrameViewer","VariableViewer"]},this[h]={owner:"IanMatthewHuff",source:"User Action",feature:["DataFrameViewer","VariableViewer"]},this[f]={owner:"amunger",feature:["InteractiveWindow"],source:"User Action",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[g]={owner:"amunger",feature:["InteractiveWindow"],source:"User Action",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[m]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{codeLensUpdateTime:{classification:"SystemMetaData",purpose:"PerformanceAndHealth",isMeasurement:!0},maxCellCount:{classification:"SystemMetaData",purpose:"FeatureInsight",isMeasurement:!0}}},this[y]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"],properties:{failed:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureSubCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFile:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFolder:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorPackage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},stackTrace:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"}}},this[v]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"]},this[b]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"],properties:{failed:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureSubCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFile:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFolder:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorPackage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},stackTrace:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"}}},this[w]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"]},this[C]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"]},this[S]={owner:"amunger",feature:"N/A",source:"N/A",properties:{settingsJson:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[_]={owner:"roblourens",feature:["Debugger"],source:"User Action"},this[k]={owner:"roblourens",feature:["Debugger"],source:"User Action"},this[P]={owner:"roblourens",feature:["Debugger"],source:"User Action"},this[I]={owner:"roblourens",feature:["Debugger"],source:"User Action"},this[E]={owner:"roblourens",feature:["Debugger"],source:"User Action"},this[T]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"],properties:{failed:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureSubCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFile:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFolder:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorPackage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},stackTrace:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failed:{classification:"CallstackOrException",purpose:"PerformanceAndHealth"},reason:{classification:"SystemMetaData",purpose:"PerformanceAndHealth",comment:"Reason for failure to fetch kernel specs"},sessionManagerReady:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},specsManagerReady:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},wasSessionManagerReady:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},wasSpecsManagerReady:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"}},measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[D]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"SystemMetaData",purpose:"FeatureInsight"},kernelConnectionType:{classification:"SystemMetaData",purpose:"FeatureInsight"},kernelLanguage:{classification:"SystemMetaData",purpose:"FeatureInsight"},envType:{classification:"SystemMetaData",purpose:"FeatureInsight"},isArgv0SameAsInterpreter:{classification:"SystemMetaData",purpose:"FeatureInsight"},argv0:{classification:"SystemMetaData",purpose:"FeatureInsight"},argv:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[x]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"],properties:{failed:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureSubCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFile:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFolder:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorPackage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},stackTrace:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},name:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},language:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"}}},this[R]={owner:"amunger",feature:["InteractiveWindow"],source:"User Action"},this[j]={owner:"amunger",feature:["InteractiveWindow"],source:"User Action"},this[N]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"],properties:{actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}},measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[M]={owner:"IanMatthewHuff",feature:["Import-Export","InteractiveWindow"],source:"User Action"},this[O]={owner:"IanMatthewHuff",feature:["Import-Export","InteractiveWindow"],source:"User Action"},this[A]={owner:"IanMatthewHuff",feature:["Import-Export","InteractiveWindow"],source:"User Action",properties:{format:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[L]={owner:"IanMatthewHuff",feature:["Import-Export"],source:"N/A",properties:{format:{classification:"SystemMetaData",purpose:"FeatureInsight"},cancelled:{classification:"SystemMetaData",purpose:"FeatureInsight"},successful:{classification:"SystemMetaData",purpose:"FeatureInsight"},opened:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[F]={owner:"IanMatthewHuff",feature:["Import-Export"],source:"User Action",properties:{scope:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[U]={owner:"IanMatthewHuff",feature:["Import-Export"],source:"User Action",properties:{format:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[K]={owner:"IanMatthewHuff",feature:["Import-Export"],source:"N/A",properties:{format:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[W]={owner:"donjayamanne",feature:"N/A",source:"N/A"},this[V]={owner:"donjayamanne",feature:"N/A",source:"N/A"},this[H]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"N/A"},this[B]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"N/A"},this[q]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"N/A"},this[J]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"N/A"},this[$]={owner:"donjayamanne",feature:"N/A",source:"N/A",measures:{nbformat:{classification:"PublicNonPersonalData",isMeasurement:!0,purpose:"FeatureInsight"},nbformat_minor:{classification:"PublicNonPersonalData",isMeasurement:!0,purpose:"FeatureInsight"}}},this[G]={owner:"IanMatthewHuff",feature:["PlotViewer"],source:"User Action"},this[z]={owner:"amunger",feature:["InteractiveWindow"],source:"User Action"},this[Y]={owner:"amunger",feature:["InteractiveWindow"],source:"User Action"},this[Q]={owner:"amunger",feature:["InteractiveWindow"],source:"User Action"},this[X]={owner:"amunger",feature:["InteractiveWindow"],source:"User Action"},this[Z]={owner:"amunger",feature:["InteractiveWindow"],source:"User Action"},this[ee]={owner:"amunger",feature:["InteractiveWindow"],source:"User Action"},this[te]={owner:"amunger",feature:["InteractiveWindow"],source:"User Action"},this[ne]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A"},this[re]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A"},this[ie]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[oe]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[se]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[ae]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[ce]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[le]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[ue]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[de]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[pe]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[he]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[fe]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[ge]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[me]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[ye]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[ve]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[be]={owner:"donjayamanne",feature:"N/A",source:"N/A"},this[we]={owner:"donjayamanne",feature:"N/A",source:"N/A"},this[Ce]={owner:"donjayamanne",source:"N/A",feature:["KernelPicker"],measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[Se]={owner:"donjayamanne",source:"N/A",feature:["KernelPicker"],measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[_e]={owner:"donjayamanne",source:"N/A",feature:["KernelPicker"],properties:{actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}}},this[ke]={owner:"donjayamanne",source:"N/A",feature:["KernelPicker"],properties:{actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}}},this[Pe]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"]},this[Ie]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"]},this[Ee]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"N/A"},this[Te]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"]},this[De]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"N/A"},this[xe]={owner:"IanMatthewHuff",feature:["KernelPicker"],source:"User Action",properties:{action:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[Re]={owner:"donjayamanne",feature:["KernelPicker"],source:"User Action",properties:{action:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[je]={owner:"donjayamanne",feature:["KernelPicker"],source:"User Action",properties:{action:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[Ne]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{action:{classification:"SystemMetaData",purpose:"FeatureInsight"},isModulePresent:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},moduleName:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},pythonEnvType:{classification:"SystemMetaData",purpose:"FeatureInsight"},resourceHash:{classification:"SystemMetaData",purpose:"FeatureInsight"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}},measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[Me]={owner:"donjayamanne",feature:["KernelPicker"],source:"N/A",properties:{commandSource:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[Oe]={owner:"donjayamanne",feature:["KernelPicker"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[Ae]={owner:"donjayamanne",feature:["KernelPicker"],source:"N/A",properties:{azure:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[Le]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A"},this[Fe]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"User Action",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[Ue]={owner:"IanMatthewHuff",source:"N/A",feature:["DataFrameViewer"],measures:{rows:{classification:"PublicNonPersonalData",purpose:"FeatureInsight",isMeasurement:!0},columns:{classification:"PublicNonPersonalData",purpose:"FeatureInsight",isMeasurement:!0}}},this[Ke]={owner:"IanMatthewHuff",source:"N/A",feature:["DataFrameViewer"],measures:{rowsTimer:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"}}},this[We]={owner:"IanMatthewHuff",feature:["DataFrameViewer","VariableViewer"],source:"N/A"},this[Ve]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"User Action"},this[He]={owner:"donjayamanne",feature:"N/A",source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[Be]={owner:"donjayamanne",feature:"N/A",source:"N/A"},this[qe]={owner:"IanMatthewHuff",feature:["VariableViewer"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[Je]={owner:"IanMatthewHuff",feature:["VariableViewer"],source:"N/A",measures:{variableCount:{classification:"PublicNonPersonalData",purpose:"FeatureInsight",isMeasurement:!0}}},this[$e]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"],measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[Ge]={owner:"IanMatthewHuff",feature:"N/A",source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[ze]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"],measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[Ye]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"]},this[Qe]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"],properties:{result:{classification:"SystemMetaData",purpose:"FeatureInsight"},envType:{classification:"SystemMetaData",purpose:"FeatureInsight"},envVersion:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[Xe]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"]},this[Ze]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"],properties:{kind:{classification:"SystemMetaData",purpose:"FeatureInsight"},language:{classification:"SystemMetaData",purpose:"FeatureInsight"},usesShell:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[et]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"]},this[tt]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"],properties:{failed:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureSubCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFile:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFolder:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorPackage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},stackTrace:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}},measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[nt]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{kernelConnectionType:{classification:"SystemMetaData",purpose:"FeatureInsight"},pythonPathDefined:{classification:"SystemMetaData",purpose:"FeatureInsight"},pythonEnvFound:{classification:"SystemMetaData",purpose:"FeatureInsight"},language:{classification:"SystemMetaData",purpose:"FeatureInsight"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},argv0:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[rt]={owner:"donjayamanne",feature:["KernelPicker"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[it]={owner:"donjayamanne",feature:["InteractiveWindow","Notebook","KernelPicker"],source:"N/A",properties:{resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"},hasActiveInterpreter:{classification:"SystemMetaData",purpose:"FeatureInsight"},language:{classification:"SystemMetaData",purpose:"FeatureInsight"},result:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[ot]={owner:"donjayamanne",feature:"N/A",source:"N/A"},this[st]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A"},this[at]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",properties:{hasKernel:{classification:"SystemMetaData",purpose:"FeatureInsight",comment:"If the kernel was known at the time of creation"},hasOwner:{classification:"SystemMetaData",purpose:"FeatureInsight",comment:"If the window was created for a text file"},mode:{classification:"SystemMetaData",purpose:"FeatureInsight",comment:"Creation mode: multiple, perfile or single"},restored:{classification:"SystemMetaData",purpose:"FeatureInsight",comment:"Was the window restored from a previous session"}}},this[ct]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],tags:["Widgets"],source:"N/A",properties:{cdnSearched:{classification:"SystemMetaData",purpose:"FeatureInsight"},hashedName:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},source:{classification:"SystemMetaData",purpose:"FeatureInsight"},moduleName:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},modelName:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},moduleVersion:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"}}},this[lt]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],tags:["Widgets"],source:"N/A",properties:{type:{classification:"SystemMetaData",purpose:"FeatureInsight"}},measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[ut]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],tags:["Widgets"],source:"N/A"},this[dt]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],tags:["Widgets"],source:"N/A",properties:{moduleHash:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},moduleVersion:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"}}},this[pt]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],tags:["Widgets"],source:"N/A",properties:{timedout:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},isOnline:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},moduleHash:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},moduleVersion:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"}}},this[ht]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],tags:["Widgets"],source:"N/A",properties:{moduleHash:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},moduleVersion:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"}}},this[ft]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],tags:["Widgets"],source:"N/A"},this[gt]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],tags:["Widgets"],source:"N/A",properties:{selection:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"}}},this[mt]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],tags:["Widgets"],source:"N/A",measures:{totalOverheadInMs:{classification:"SystemMetaData",purpose:"PerformanceAndHealth",isMeasurement:!0},numberOfMessagesWaitedOn:{classification:"SystemMetaData",purpose:"PerformanceAndHealth",isMeasurement:!0},averageWaitTime:{classification:"SystemMetaData",purpose:"PerformanceAndHealth",isMeasurement:!0},numberOfRegisteredHooks:{classification:"SystemMetaData",purpose:"FeatureInsight",isMeasurement:!0}}},this[yt]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],tags:["Widgets"],source:"N/A"},this[vt]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],tags:["Widgets"],source:"N/A",properties:{msg_type:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"}}},this[bt]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"N/A",tags:["KernelStartup"],measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0},attempts:{classification:"SystemMetaData",purpose:"PerformanceAndHealth",isMeasurement:!0}},properties:{actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"},timedout:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"}}},this[wt]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"N/A",tags:["KernelStartup"],measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[Ct]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"User Action",tags:["Cell Execution"],properties:{actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"},failed:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureSubCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFile:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFolder:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorPackage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},stackTrace:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"}}},this[St]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"N/A",tags:["KernelStartup"],properties:{actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"},failed:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureSubCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFile:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFolder:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorPackage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},stackTrace:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"}}},this[_t]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"N/A",properties:{actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}}},this[kt]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"User Action",properties:{result:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"},failed:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureSubCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFile:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFolder:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorPackage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},stackTrace:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}},measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[Pt]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"User Action",properties:{resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"},failed:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureSubCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFile:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFolder:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorPackage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},stackTrace:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}},measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[It]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"N/A",properties:{resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"},actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}},measures:{reason:{classification:"SystemMetaData",isMeasurement:!0,purpose:"PerformanceAndHealth"}}},this[Et]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"N/A",properties:{exitReason:{classification:"CallstackOrException",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"},actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}},measures:{exitCode:{classification:"CallstackOrException",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[Tt]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"N/A",properties:{isRequestToShutdownRestartSession:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},stacktrace:{classification:"CallstackOrException",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"},actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}}},this[Dt]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"N/A",properties:{stacktrace:{classification:"CallstackOrException",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"},actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}}},this[xt]={owner:"roblourens",feature:["Debugger"],source:"User Action"},this[Rt]={owner:"donjayamanne",feature:["KernelPicker"],source:"N/A",measures:{kernelSpecCount:{classification:"SystemMetaData",purpose:"FeatureInsight",isMeasurement:!0},kernelInterpreterCount:{classification:"SystemMetaData",purpose:"FeatureInsight",isMeasurement:!0},kernelLiveCount:{classification:"SystemMetaData",purpose:"FeatureInsight",isMeasurement:!0},localKernelSpecCount:{classification:"SystemMetaData",purpose:"PerformanceAndHealth",isMeasurement:!0},remoteKernelSpecCount:{classification:"SystemMetaData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[jt]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"N/A",properties:{outputType:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"}}},this[Nt]={owner:"donjayamanne",feature:["KernelPicker"],source:"N/A",measures:{count:{classification:"SystemMetaData",purpose:"FeatureInsight",isMeasurement:!0}}},this[Mt]={owner:"IanMatthewHuff",feature:["InteractiveWindow"],tags:["IntelliSense"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}},properties:{isResultNull:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[Ot]={owner:"IanMatthewHuff",feature:["VariableViewer"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[At]={owner:"IanMatthewHuff",feature:["VariableViewer"],source:"N/A"},this[Lt]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[Ft]={owner:"IanMatthewHuff",feature:["PlotViewer"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[Ut]={owner:"amunger",feature:"N/A",source:"N/A",properties:{command:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[Kt]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"User Action",properties:{newState:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[Wt]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"N/A",measures:{numberOfDimensions:{classification:"SystemMetaData",purpose:"FeatureInsight",isMeasurement:!0}}},this[Vt]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"User Action",properties:{source:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[Ht]={owner:"IanMatthewHuff",feature:["KernelPicker"],source:"N/A",properties:{failed:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureSubCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFile:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFolder:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorPackage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},stackTrace:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kind:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"}}},this[Bt]={owner:"donjayamanne",feature:[],source:"N/A",properties:{failed:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureSubCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFile:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFolder:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorPackage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},stackTrace:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"}}},this[qt]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{failed:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},reason:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},dependenciesInstalled:{classification:"SystemMetaData",purpose:"FeatureInsight"},envType:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[Jt]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{extensionId:{classification:"SystemMetaData",purpose:"FeatureInsight"},action:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[$t]={owner:"roblourens",feature:["Debugger"],source:"User Action"},this[Gt]={owner:"roblourens",feature:["Debugger"],source:"User Action"},this[zt]={owner:"roblourens",feature:["Debugger"],properties:{status:{classification:"SystemMetaData",purpose:"FeatureInsight"}},source:"N/A"},this[Yt]={owner:"roblourens",feature:["Debugger"],source:"User Action"},this[Qt]={owner:"roblourens",feature:["Debugger"],source:"N/A"},this[Xt]={owner:"roblourens",feature:["Debugger"],source:"N/A"},this[Zt]={owner:"roblourens",feature:["Debugger"],source:"User Action"},this[en]={owner:"roblourens",feature:["Debugger"],source:"N/A"},this[tn]={owner:"roblourens",feature:["Debugger"],source:"N/A",properties:{reason:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[nn]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{extensionId:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},pemUsed:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"}}},this[rn]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{extensionId:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},pemUsed:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"}}},this[on]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{extensionId:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},allowed:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[sn]={owner:"IanMatthewHuff",feature:["VariableViewer"],source:"N/A"},this[an]={owner:"roblourens",feature:["InteractiveWindow","Debugger"],source:"N/A"},this[cn]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"N/A",properties:{actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}}},this[ln]={owner:"donjayamanne",source:"N/A",feature:["KernelPicker"]},this[un]={owner:"donjayamanne",source:"User Action",feature:["KernelPicker"]},this[dn]={owner:"amunger",feature:"N/A",source:"N/A",properties:{testName:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},testResult:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},perfWarmup:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},commitHash:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},timedCheckpoints:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"}}},this[pn]={owner:"donjayamanne",feature:["KernelPicker"],source:"N/A",measures:{matchedReason:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[hn]={owner:"donjayamanne",feature:"N/A",source:"N/A",measures:{frontEndVersion:{classification:"SystemMetaData",isMeasurement:!0,purpose:"PerformanceAndHealth"}},properties:{detection:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},failed:{classification:"CallstackOrException",purpose:"PerformanceAndHealth"},frontEnd:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},reason:{classification:"CallstackOrException",purpose:"PerformanceAndHealth"}}},this[fn]={owner:"donjayamanne",feature:["Notebook","Notebook"],tags:["Widgets"],source:"N/A",measures:{requireEntryPointCount:{classification:"SystemMetaData",isMeasurement:!0,purpose:"PerformanceAndHealth"}},properties:{failed:{classification:"CallstackOrException",purpose:"PerformanceAndHealth"},failure:{classification:"CallstackOrException",purpose:"PerformanceAndHealth"},patternUsedToRegisterRequireConfig:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},widgetFolderNameHash:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[gn]={owner:"donjayamanne",feature:["Notebook","Notebook"],tags:["Widgets"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[mn]={owner:"donjayamanne",feature:["DataFrameViewer"],source:"N/A"},this[yn]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"N/A"},this[vn]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"N/A"}}},r=Sn.EventName.EXTENSION_LOAD,i=Sn.EventName.ENVFILE_VARIABLE_SUBSTITUTION,o=Sn.EventName.ENVFILE_WORKSPACE,s=Sn.EventName.HASHED_PACKAGE_NAME,a=Cn.Telemetry.ActiveInterpreterListingPerf,c=Cn.Telemetry.KernelListingPerf,l=Cn.Telemetry.CellOutputMimeType,u=Cn.Telemetry.GetActivatedEnvironmentVariables,d=Sn.EventName.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_REQUEST,p=Sn.EventName.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_ERROR,h=Sn.EventName.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_SUCCESS,f=Cn.Telemetry.AddCellBelow,g=Cn.Telemetry.CodeLensAverageAcquisitionTime,m=Cn.Telemetry.DocumentWithCodeCells,y=Cn.Telemetry.ConnectFailedJupyter,v=Cn.Telemetry.ConnectRemoteJupyterViaLocalHost,b=Cn.Telemetry.ConnectRemoteFailedJupyter,w=Cn.Telemetry.ConnectRemoteSelfCertFailedJupyter,C=Cn.Telemetry.ConnectRemoteExpiredCertFailedJupyter,S=Cn.Telemetry.DataScienceSettings,_=Cn.Telemetry.DebugContinue,k=Cn.Telemetry.DebugCurrentCell,P=Cn.Telemetry.DebugStepOver,I=Cn.Telemetry.DebugStop,E=Cn.Telemetry.DebugFileInteractive,T=Cn.Telemetry.JupyterKernelSpecEnumeration,D=Cn.Telemetry.KernelSpec,x=Cn.Telemetry.FailedToUpdateKernelSpec,R=Cn.Telemetry.DisableInteractiveShiftEnter,j=Cn.Telemetry.EnableInteractiveShiftEnter,N=Cn.Telemetry.PerceivedJupyterStartupNotebook,M=Cn.Telemetry.ExportPythonFileInteractive,O=Cn.Telemetry.ExportPythonFileAndOutputInteractive,A=Cn.Telemetry.ClickedExportNotebookAsQuickPick,L=Cn.Telemetry.ExportNotebookAs,F=Cn.Telemetry.ImportNotebook,U=Cn.Telemetry.ExportNotebookAsCommand,K=Cn.Telemetry.ExportNotebookAsFailed,W=Cn.Telemetry.GetPasswordFailure,V=Cn.Telemetry.GetPasswordSuccess,H=Cn.Telemetry.PandasNotInstalled,B=Cn.Telemetry.PandasTooOld,q=Cn.Telemetry.PandasOK,J=Cn.Telemetry.PandasInstallCanceled,$=Cn.Telemetry.OpenNotebookAll,G=Cn.Telemetry.OpenPlotViewer,z=Cn.Telemetry.RunAllCells,Y=Cn.Telemetry.RunSelectionOrLine,Q=Cn.Telemetry.RunCurrentCell,X=Cn.Telemetry.RunAllCellsAbove,Z=Cn.Telemetry.RunCellAndAllBelow,ee=Cn.Telemetry.RunCurrentCellAndAdvance,te=Cn.Telemetry.RunFileInteractive,ne=Cn.Telemetry.RunToLine,re=Cn.Telemetry.RunFromLine,ie=Cn.Telemetry.InsertCellBelowPosition,oe=Cn.Telemetry.InsertCellBelow,se=Cn.Telemetry.InsertCellAbove,ae=Cn.Telemetry.DeleteCells,ce=Cn.Telemetry.SelectCell,le=Cn.Telemetry.SelectCellContents,ue=Cn.Telemetry.ExtendSelectionByCellAbove,de=Cn.Telemetry.ExtendSelectionByCellBelow,pe=Cn.Telemetry.MoveCellsUp,he=Cn.Telemetry.MoveCellsDown,fe=Cn.Telemetry.ChangeCellToMarkdown,ge=Cn.Telemetry.ChangeCellToCode,me=Cn.Telemetry.GotoNextCellInFile,ye=Cn.Telemetry.GotoPrevCellInFile,ve=Cn.Telemetry.RunCurrentCellAndAddBelow,be=Cn.Telemetry.SelfCertsMessageClose,we=Cn.Telemetry.SelfCertsMessageEnabled,Ce=Cn.Telemetry.SelectJupyterURI,Se=Cn.Telemetry.EnterJupyterURI,_e=Cn.Telemetry.SelectLocalJupyterKernel,ke=Cn.Telemetry.SelectRemoteJupyterKernel,Pe=Cn.Telemetry.JupyterNotInstalledErrorShown,Ie=Cn.Telemetry.UserInstalledJupyter,Ee=Cn.Telemetry.UserInstalledPandas,Te=Cn.Telemetry.UserDidNotInstallJupyter,De=Cn.Telemetry.UserDidNotInstallPandas,xe=Cn.Telemetry.PythonNotInstalled,Re=Cn.Telemetry.PythonExtensionNotInstalled,je=Cn.Telemetry.PythonExtensionInstalledViaKernelPicker,Ne=Cn.Telemetry.PythonModuleInstall,Me=Cn.Telemetry.SetJupyterURIUIDisplayed,Oe=Cn.Telemetry.SetJupyterURIToLocal,Ae=Cn.Telemetry.SetJupyterURIToUserSpecified,Le=Cn.Telemetry.ShiftEnterBannerShown,Fe=Cn.Telemetry.StartShowDataViewer,Ue=Cn.Telemetry.ShowDataViewer,Ke=Cn.Telemetry.ShowDataViewerRowsLoaded,We=Cn.Telemetry.FailedShowDataViewer,Ve=Cn.Telemetry.RefreshDataViewer,He=Cn.Telemetry.StartJupyter,Be=Cn.Telemetry.JupyterInstalledButNotKernelSpecModule,qe=Cn.Telemetry.VariableExplorerFetchTime,Je=Cn.Telemetry.VariableExplorerVariableCount,$e=Cn.Telemetry.WaitForIdleJupyter,Ge=Cn.Telemetry.WebviewStartup,ze=Cn.Telemetry.RegisterInterpreterAsKernel,Ye=Cn.Telemetry.SelectJupyterInterpreterCommand,Qe=Cn.Telemetry.SelectJupyterInterpreter,Xe=Cn.Telemetry.StartSessionFailedJupyter,Ze=Cn.Telemetry.KernelSpecLanguage,et=Cn.Telemetry.KernelSpecNotFound,tt=Cn.Telemetry.KernelLauncherPerf,nt=Cn.Telemetry.AmbiguousGlobalKernelSpec,rt=Cn.Telemetry.RankKernelsPerf,it=Cn.Telemetry.PreferredKernel,ot=Cn.Telemetry.JupyterCommandLineNonDefault,st=Cn.Telemetry.NewFileForInteractiveWindow,at=Cn.Telemetry.CreateInteractiveWindow,ct=Cn.Telemetry.HashedIPyWidgetNameUsed,lt=Cn.Telemetry.DiscoverIPyWidgetNamesPerf,ut=Cn.Telemetry.HashedIPyWidgetScriptDiscoveryError,dt=Cn.Telemetry.IPyWidgetLoadSuccess,pt=Cn.Telemetry.IPyWidgetLoadFailure,ht=Cn.Telemetry.IPyWidgetWidgetVersionNotSupportedLoadFailure,ft=Cn.Telemetry.IPyWidgetPromptToUseCDN,gt=Cn.Telemetry.IPyWidgetPromptToUseCDNSelection,mt=Cn.Telemetry.IPyWidgetOverhead,yt=Cn.Telemetry.IPyWidgetRenderFailure,vt=Cn.Telemetry.IPyWidgetUnhandledMessage,bt=Cn.Telemetry.RawKernelInfoResponse,wt=Cn.Telemetry.RawKernelProcessLaunch,Ct=Cn.Telemetry.ExecuteCell,St=Cn.Telemetry.NotebookStart,_t=Cn.Telemetry.SwitchKernel,kt=Cn.Telemetry.NotebookInterrupt,Pt=Cn.Telemetry.NotebookRestart,It=Cn.Telemetry.RawKernelSessionStartNoIpykernel,Et=Cn.Telemetry.RawKernelSessionKernelProcessExited,Tt=Cn.Telemetry.RawKernelSessionShutdown,Dt=Cn.Telemetry.RawKernelSessionDisposed,xt=Cn.Telemetry.RunByLineVariableHover,Rt=Cn.Telemetry.KernelCount,jt=Cn.Telemetry.VSCNotebookCellTranslationFailed,Nt=Cn.Telemetry.NumberOfSavedRemoteKernelIds,Mt=Cn.Telemetry.InteractiveFileTooltipsPerf,Ot=Cn.Telemetry.NativeVariableViewLoaded,At=Cn.Telemetry.NativeVariableViewMadeVisible,Lt=Cn.Telemetry.DataViewerWebviewLoaded,Ft=Cn.Telemetry.PlotViewerWebviewLoaded,Ut=Cn.Telemetry.CommandExecuted,Kt=Cn.Telemetry.DataViewerSliceEnablementStateChanged,Wt=Cn.Telemetry.DataViewerDataDimensionality,Vt=Cn.Telemetry.DataViewerSliceOperation,Ht=Cn.Telemetry.FailedToCreateNotebookController,Bt=Cn.Telemetry.FailedToCreateNotebookCellExecution,qt=Cn.Telemetry.CreatePythonEnvironment,Jt=Cn.Telemetry.RecommendExtension,$t=_n.DebuggingTelemetry.clickedOnSetup,Gt=_n.DebuggingTelemetry.closedModal,zt=_n.DebuggingTelemetry.ipykernel6Status,Yt=_n.DebuggingTelemetry.clickedRunByLine,Qt=_n.DebuggingTelemetry.successfullyStartedRunByLine,Xt=_n.DebuggingTelemetry.successfullyStartedIWJupyterDebugger,Zt=_n.DebuggingTelemetry.clickedRunAndDebugCell,en=_n.DebuggingTelemetry.successfullyStartedRunAndDebugCell,tn=_n.DebuggingTelemetry.endedSession,nn=Cn.Telemetry.JupyterKernelApiUsage,rn=Cn.Telemetry.JupyterApiUsage,on=Cn.Telemetry.JupyterKernelApiAccess,sn=Cn.Telemetry.PythonVariableFetchingCodeFailure,an=Cn.Telemetry.InteractiveWindowDebugSetupCodeFailure,cn=Cn.Telemetry.KernelCrash,ln=Cn.Telemetry.JupyterKernelHiddenViaFilter,un=Cn.Telemetry.JupyterKernelFilterUsed,dn=Cn.Telemetry.RunTest,pn=Cn.Telemetry.PreferredKernelExactMatch,hn=Cn.Telemetry.JupyterInstalled,fn=Cn.Telemetry.IPyWidgetExtensionJsInfo,gn=Cn.Telemetry.IPyWidgetNbExtensionCopyTime,mn=Cn.Telemetry.NoActiveKernelSession,yn=Cn.Telemetry.DataViewerUsingInterpreter,vn=Cn.Telemetry.DataViewerUsingKernel},81274:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseDataViewerDependencyImplementation=void 0;const i=n(25251),o=n(21378),s=n(86563),a=n(9959),c=n(59985),l=n(83902),u=n(66828),d=n(6491),p=n(11642);class h{constructor(e,t){this.applicationShell=e,this.isCodeSpace=t}async getVersion(e,t){try{const n=await this._getVersion(e,t);return"string"==typeof n?(0,s.parseSemVer)(n):n}catch(e){return void(0,p.traceWarning)(i.DataScience.failedToGetVersionOfPandas,e.message)}}async promptInstall(e,t,n){let r=n?i.DataScience.pandasTooOldForViewingFormat(n,o.pandasMinimumVersionSupportedByVariableViewer):i.DataScience.pandasRequiredForViewing(o.pandasMinimumVersionSupportedByVariableViewer);if((this.isCodeSpace?i.Common.install:await this.applicationShell.showErrorMessage(r,{modal:!0},i.Common.install))!==i.Common.install)throw(0,a.sendTelemetryEvent)(a.Telemetry.UserDidNotInstallPandas),new Error(r);await this._doInstall(e,t)}async checkOrInstall(e){const t=new u.CancellationTokenSource;try{const n=await this.getVersion(e,t.token);if(d.Cancellation.isCanceled(t.token))return void(0,a.sendTelemetryEvent)(a.Telemetry.PandasInstallCanceled);if(n){if(n.compare(o.pandasMinimumVersionSupportedByVariableViewer)>0)return void(0,a.sendTelemetryEvent)(a.Telemetry.PandasOK);(0,a.sendTelemetryEvent)(a.Telemetry.PandasTooOld);const r=`${n.major}.${n.minor}.${n.build}`;await this.promptInstall(e,t,r)}(0,a.sendTelemetryEvent)(a.Telemetry.PandasNotInstalled),await this.promptInstall(e,t)}finally{t.dispose()}}}r([(0,a.capturePerfTelemetry)(a.Telemetry.PythonModuleInstall,{action:"displayed",moduleName:c.ProductNames.get(l.Product.pandas)})],h.prototype,"promptInstall",null),t.BaseDataViewerDependencyImplementation=h},21378:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pandasMinimumVersionSupportedByVariableViewer=void 0,t.pandasMinimumVersionSupportedByVariableViewer="0.20.0"},32613:function(e,t,n){"use strict";var r=n(34155),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},c=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataViewer=void 0,n(8513);const l=n(86700),u=n(66828),d=n(9959),p=n(89112),h=n(19058),f=n(90391),g=n(14783),m=n(2161),y=n(10053),v=n(15925),b=n(11642),w=n(42080),C=a(n(25251)),S=n(11386),_=n(78086),k=n(58681),P=n(52859),I=n(90541),E="JupyterDataViewerPreferredViewColumn";let T=class extends _.WebviewPanelHost{get active(){return!!this.webPanel?.isActive()}get refreshPending(){return this.pendingRowsCount>0}get onDidDisposeDataViewer(){return this._onDidDisposeDataViewer.event}get onDidChangeDataViewerViewState(){return this._onDidChangeDataViewerViewState.event}constructor(e,t,n,r,i,o,s){const a=(0,P.joinPath)(s.extensionUri,"out","webviews","webview-side","viewers");super(t,e,n,((e,t,n)=>new h.DataViewerMessageListener(e,t,n)),a,[(0,P.joinPath)(a,"dataExplorer.js")],C.DataScience.dataExplorerTitle,i.get(E)??u.ViewColumn.One),this.applicationShell=r,this.globalMemento=i,this.errorHandler=o,this.context=s,this.pendingRowsCount=0,this.sentDataViewerSliceDimensionalityTelemetry=!1,this._onDidDisposeDataViewer=new u.EventEmitter,this._onDidChangeDataViewerViewState=new u.EventEmitter,this.onDidDispose(this.dataViewerDisposed,this)}async showData(e,t){if(!this.isDisposed){this.dataProvider=e,await super.loadWebview(u.Uri.file(r.cwd())).catch(b.traceError),super.setTitle(t),await super.show(!0);let n=await this.prepDataFrameInfo();if(n.shape&&n.shape.length>2){this.maybeSendSliceDataDimensionalityTelemetry(n.shape.length);const e=(0,g.preselectedSliceExpression)(n.shape);n=await this.getDataFrameInfo(e)}this.postMessage(f.DataViewerMessages.InitializeData,n).ignoreErrors()}}get kernel(){if(this.dataProvider&&"kernel"in this.dataProvider)return this.dataProvider.kernel}dataViewerDisposed(){this._onDidDisposeDataViewer.fire(this)}async refreshData(){const e=this.currentSliceExpression;this.dataFrameInfoPromise=void 0;let t=await this.getDataFrameInfo(void 0,!0);if(void 0!==e&&void 0!==t.shape)if((0,g.isValidSliceExpression)(e,t.shape))t=await this.getDataFrameInfo(e);else{const e=(0,g.preselectedSliceExpression)(t.shape);t=await this.getDataFrameInfo(e)}(0,b.traceInfo)(`Refreshing data viewer for variable ${t.name}`),this.postMessage(f.DataViewerMessages.InitializeData,t).ignoreErrors()}dispose(){super.dispose(),this.dataProvider&&(this.dataProvider.dispose(),this.dataProvider=void 0)}async onViewStateChanged(e){e.current.active&&e.current.visible&&e.previous.active&&e.current.visible&&await this.globalMemento.update(E,this.webPanel?.viewColumn),this._onDidChangeDataViewerViewState.fire()}get owningResource(){}onMessage(e,t){switch(e){case f.DataViewerMessages.GetAllRowsRequest:this.getAllRows(t).ignoreErrors();break;case f.DataViewerMessages.GetRowsRequest:this.getRowChunk(t).ignoreErrors();break;case f.DataViewerMessages.GetSliceRequest:this.getSlice(t).ignoreErrors();break;case f.DataViewerMessages.RefreshDataViewer:this.refreshData().ignoreErrors(),(0,d.sendTelemetryEvent)(v.Telemetry.RefreshDataViewer);break;case f.DataViewerMessages.SliceEnablementStateChanged:(0,d.sendTelemetryEvent)(v.Telemetry.DataViewerSliceEnablementStateChanged,void 0,{newState:t.newState?m.CheckboxState.Checked:m.CheckboxState.Unchecked})}super.onMessage(e,t)}getDataFrameInfo(e,t){return this.dataFrameInfoPromise&&e===this.currentSliceExpression||(this.dataFrameInfoPromise=this.dataProvider?this.dataProvider.getDataFrameInfo(e,t):Promise.resolve({}),this.currentSliceExpression=e),this.dataFrameInfoPromise}async prepDataFrameInfo(){this.rowsTimer=new S.StopWatch;const e=await this.getDataFrameInfo();try{(0,d.sendTelemetryEvent)(v.Telemetry.ShowDataViewer,void 0,{rows:e.rowCount?e.rowCount:0,columns:e.columns?e.columns.length:0}),this.pendingRowsCount=e.rowCount?e.rowCount:0}catch{(0,k.noop)()}return e}async getAllRows(e){return this.wrapRequest((async()=>{if(this.dataProvider){const t=await this.dataProvider.getAllRows(e);return this.pendingRowsCount=0,this.postMessage(f.DataViewerMessages.GetAllRowsResponse,t)}}))}getSlice(e){return this.wrapRequest((async()=>{if(this.dataProvider){const t=await this.getDataFrameInfo(e.slice);return t.shape?.length&&this.maybeSendSliceDataDimensionalityTelemetry(t.shape.length),(0,d.sendTelemetryEvent)(v.Telemetry.DataViewerSliceOperation,void 0,{source:e.source}),this.postMessage(f.DataViewerMessages.InitializeData,t)}}))}getRowChunk(e){return this.wrapRequest((async()=>{if(this.dataProvider){const t=await this.getDataFrameInfo(e.sliceExpression),n=await this.dataProvider.getRows(e.start,Math.min(e.end,t.rowCount?t.rowCount:0),e.sliceExpression);return this.pendingRowsCount=Math.max(0,this.pendingRowsCount-n.length),this.postMessage(f.DataViewerMessages.GetRowsResponse,{rows:n,start:e.start,end:e.end})}}))}async wrapRequest(e){try{return await e()}catch(e){if(e instanceof p.JupyterDataRateLimitError){(0,b.traceError)(e.message);const t=C.DataScience.pythonInteractiveHelpLink;this.applicationShell.showErrorMessage(C.DataScience.jupyterDataRateExceeded,t).then((e=>{e===t&&this.applicationShell.openUrl(v.HelpLinks.JupyterDataRateHelpLink)}),k.noop),this.dispose()}(0,b.traceError)(e),this.errorHandler.handleError(e).then(k.noop,k.noop)}finally{this.sendElapsedTimeTelemetry()}}sendElapsedTimeTelemetry(){this.rowsTimer&&0===this.pendingRowsCount&&(0,d.sendTelemetryEvent)(v.Telemetry.ShowDataViewerRowsLoaded,void 0,{rowsTimer:this.rowsTimer.elapsedTime})}maybeSendSliceDataDimensionalityTelemetry(e){this.sentDataViewerSliceDimensionalityTelemetry||((0,d.sendTelemetryEvent)(v.Telemetry.DataViewerDataDimensionality,{numberOfDimensions:e}),this.sentDataViewerSliceDimensionalityTelemetry=!0)}};s([(0,d.capturePerfTelemetry)(v.Telemetry.DataViewerWebviewLoaded)],T.prototype,"showData",null),T=s([(0,l.injectable)(),c(0,(0,l.inject)(y.IWebviewPanelProvider)),c(1,(0,l.inject)(w.IConfigurationService)),c(2,(0,l.inject)(y.IWorkspaceService)),c(3,(0,l.inject)(y.IApplicationShell)),c(4,(0,l.inject)(w.IMemento)),c(4,(0,l.named)(w.GLOBAL_MEMENTO)),c(5,(0,l.inject)(I.IDataScienceErrorHandler)),c(6,(0,l.inject)(w.IExtensionContext))],T),t.DataViewer=T},724:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataViewerChecker=void 0;const r=n(66828),i=n(25251),o=n(90391);t.DataViewerChecker=class{constructor(e,t){this.configuration=e,this.applicationShell=t}async isRequestedColumnSizeAllowed(e,t){if(e>o.ColumnWarningSize&&await this.shouldAskForLargeData(t)){const e=i.DataScience.tooManyColumnsMessage,t=i.DataScience.tooManyColumnsYes,n=i.DataScience.tooManyColumnsNo,r=i.DataScience.tooManyColumnsDontAskAgain,o=await this.applicationShell.showWarningMessage(e,t,n,r);return o===r&&await this.disableAskForLargeData(),o===t}return!0}async shouldAskForLargeData(e){const t=e?this.configuration.getSettings(e):this.configuration.getSettings();return t&&!0===t.askForLargeDataFrames}async disableAskForLargeData(e){const t=e?this.configuration.getSettings(e):this.configuration.getSettings();t&&(t.askForLargeDataFrames=!1,this.configuration.updateSetting("askForLargeDataFrames",!1,void 0,r.ConfigurationTarget.Global).ignoreErrors())}}},97480:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataViewerCommandRegistry=void 0;const o=n(86700),s=n(66828),a=n(50068),c=n(7214),l=n(10053),u=n(15925),d=n(83599),p=n(42080),h=n(25251),f=n(58681),g=n(72728),m=n(84570),y=n(11642),v=n(9959),b=n(2161),w=n(90541),C=n(724),S=n(90391);let _=class{constructor(e,t,n,r,i,o,s,a,c,l,u,d,p){this.disposables=e,this.commandManager=t,this.debugService=n,this.jupyterVariableDataProviderFactory=o,this.dataViewerFactory=s,this.variableProvider=a,this.workspace=c,this.errorHandler=l,this.dataViewerDependencyService=u,this.interpreterService=d,this.platformService=p,this.dataViewerChecker=new C.DataViewerChecker(r,i),this.workspace.isTrusted||this.workspace.onDidGrantWorkspaceTrust(this.registerCommandsIfTrusted,this,this.disposables)}activate(){this.registerCommandsIfTrusted()}registerCommandsIfTrusted(){this.workspace.isTrusted&&this.registerCommand(u.Commands.ShowDataViewer,this.onVariablePanelShowDataViewerRequest)}registerCommand(e,t){const n=this.commandManager.registerCommand(e,t,this);this.disposables.push(n)}async onVariablePanelShowDataViewerRequest(e){if((0,v.sendTelemetryEvent)(b.EventName.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_REQUEST),this.debugService?.activeDebugSession&&this.variableProvider&&this.jupyterVariableDataProviderFactory&&this.dataViewerFactory)try{if(this.debugService.activeDebugSession.configuration&&this.dataViewerDependencyService&&this.interpreterService){const e=await this.getDebugAdapterPython(this.debugService.activeDebugSession.configuration);e&&await this.dataViewerDependencyService.checkAndInstallMissingDependencies(e)}const t=(0,a.convertDebugProtocolVariableToIJupyterVariable)(e.variable),n=await this.variableProvider.getFullVariable(t),r=await this.jupyterVariableDataProviderFactory.create(n),i=(await r.getDataFrameInfo())?.columns?.length;if(i&&await this.dataViewerChecker.isRequestedColumnSizeAllowed(i)){const e=`${h.DataScience.dataExplorerTitle} - ${n.name}`;await this.dataViewerFactory.create(r,e),(0,v.sendTelemetryEvent)(b.EventName.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_SUCCESS)}}catch(e){(0,v.sendTelemetryEvent)(b.EventName.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_ERROR,void 0,void 0,e),(0,y.traceError)(e),this.errorHandler.handleError(e).then(f.noop,f.noop)}}async getDebugAdapterPython(e){if(!this.interpreterService)return void(0,y.traceInfo)("Interpreter Service missing when trying getDebugAdapterPython");let t="";if(void 0!==e.debugAdapterPython?((0,y.traceInfo)("Found debugAdapterPython on Debug Configuration to use"),t=e.debugAdapterPython):e.pythonPath&&((0,y.traceInfo)("Found pythonPath on Debug Configuration to use"),t=e.pythonPath),t){let e=t;return e.startsWith("~")&&this.platformService.homeDir&&(e=(0,g.untildify)(e,this.platformService.homeDir.path)),this.interpreterService.getInterpreterDetails(s.Uri.file(e))}return this.interpreterService.getActiveInterpreter()}};_=r([(0,o.injectable)(),i(0,(0,o.inject)(p.IDisposableRegistry)),i(1,(0,o.inject)(l.ICommandManager)),i(2,(0,o.inject)(l.IDebugService)),i(2,(0,o.optional)()),i(3,(0,o.inject)(p.IConfigurationService)),i(4,(0,o.inject)(l.IApplicationShell)),i(5,(0,o.inject)(S.IJupyterVariableDataProviderFactory)),i(5,(0,o.optional)()),i(6,(0,o.inject)(S.IDataViewerFactory)),i(6,(0,o.optional)()),i(7,(0,o.inject)(c.IJupyterVariables)),i(7,(0,o.optional)()),i(7,(0,o.named)(u.Identifiers.DEBUGGER_VARIABLES)),i(8,(0,o.inject)(l.IWorkspaceService)),i(9,(0,o.inject)(w.IDataScienceErrorHandler)),i(10,(0,o.inject)(S.IDataViewerDependencyService)),i(10,(0,o.optional)()),i(11,(0,o.inject)(m.IInterpreterService)),i(11,(0,o.optional)()),i(12,(0,o.inject)(d.IPlatformService))],_),t.DataViewerCommandRegistry=_},96663:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataViewerDependencyService=void 0;const o=n(86700),s=n(10053),a=n(42080),c=n(11461);let l=class{constructor(e,t){this.withKernel=new c.KernelDataViewerDependencyImplementation(e,t)}async checkAndInstallMissingDependencies(e){return this.withKernel.checkAndInstallMissingDependencies(e)}};l=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IApplicationShell)),i(1,(0,o.inject)(a.IsCodeSpace))],l),t.DataViewerDependencyService=l},48334:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataViewerFactory=void 0,n(8513);const s=n(86700),a=n(9959),c=n(90391),l=o(n(23279)),u=n(10053),d=n(29444),p=n(42080),h=n(41778),f=n(58681),g=n(15925);let m=class{constructor(e,t,n,r){this.serviceContainer=e,this.disposables=n,this.commandManager=r,this.knownViewers=new Set,this.refreshDataViewer=(0,l.default)((()=>{for(const e of this.knownViewers)e.active&&e.refreshData().then(f.noop,f.noop)}),1e3),t.push(this),this.viewContext=new d.ContextKey(g.EditorContexts.IsDataViewerActive,this.commandManager),this.disposables.push(this.commandManager.registerCommand(g.Commands.RefreshDataViewer,this.refreshDataViewer,this))}async dispose(){for(const e of this.knownViewers)e.dispose()}async create(e,t){let n;const r=this.serviceContainer.get(c.IDataViewer);try{this.knownViewers.add(r),r.onDidDisposeDataViewer(this.updateOpenDataViewers,this,this.disposables),r.onDidChangeDataViewerViewState(this.updateViewStateContext,this,this.disposables),await r.showData(e,t),n=r}finally{n||r.dispose()}return n}get activeViewer(){return[...this.knownViewers.values()].find((e=>e.active))}updateOpenDataViewers(e){this.knownViewers.delete(e)}async updateViewStateContext(){let e=!1;this.knownViewers.forEach((t=>{t.active&&(e=!0)})),await this.viewContext.set(e)}};r([(0,a.capturePerfTelemetry)(g.Telemetry.StartShowDataViewer)],m.prototype,"create",null),m=r([(0,s.injectable)(),i(0,(0,s.inject)(h.IServiceContainer)),i(1,(0,s.inject)(p.IAsyncDisposableRegistry)),i(2,(0,s.inject)(p.IDisposableRegistry)),i(3,(0,s.inject)(u.ICommandManager))],m),t.DataViewerFactory=m},19058:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataViewerMessageListener=void 0,n(8513),t.DataViewerMessageListener=class{constructor(e,t,n){this.disposedCallback=n,this.callback=e,this.viewChanged=t}async dispose(){this.disposedCallback()}onMessage(e,t){this.callback(e,t)}onChangeViewState(e){this.viewChanged(e)}}},64752:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterVariableDataProvider=void 0,n(8513);const s=n(86700),a=n(90391),c=n(7214),l=n(11642),u=n(15925),d=n(35412),p=n(58681);let h=r=class{constructor(e,t){this.variableManager=e,this.dependencyService=t,this.initialized=!1}get kernel(){return this._kernel}static getNormalizedColumns(e){return e.map((e=>{let t;switch(e.type){case"bool":t=a.ColumnType.Bool;break;case"integer":case"int32":case"int64":case"float":case"float32":case"float64":case"number":t=a.ColumnType.Number;break;default:t=a.ColumnType.String}return{key:e.key,type:t}}))}static parseShape(e){try{if(e.startsWith("(")&&e.endsWith(")"))return e.substring(1,e.length-1).split(",").map((e=>parseInt(e)))}catch(t){(0,l.traceError)(`Could not parse IJupyterVariable with malformed shape: ${e}`)}}dispose(){}setDependencies(e,t){this._kernel=t,this.variable=e}async getDataFrameInfo(e,t){let n={};await this.ensureInitialized();let i=this.variable;return i&&((e||t)&&(i=await this.variableManager.getDataFrameInfo(i,this._kernel,e,t)),n={columns:i.columns?r.getNormalizedColumns(i.columns):i.columns,indexColumn:i.indexColumn,rowCount:i.rowCount,dataDimensionality:i.dataDimensionality,shape:r.parseShape(i.shape),sliceExpression:e,type:i.type,maximumRowChunkSize:i.maximumRowChunkSize,name:i.name,fileName:(0,d.getFilePath)(i.fileName)}),t&&(this.variable=i),n}async getAllRows(e){let t=[];return await this.ensureInitialized(),this.variable&&this.variable.rowCount&&(t=(await this.variableManager.getDataFrameRows(this.variable,0,this.variable.rowCount,this._kernel,e)).data),t}async getRows(e,t,n){let r=[];return await this.ensureInitialized(),this.variable&&this.variable.rowCount&&(r=(await this.variableManager.getDataFrameRows(this.variable,e,t,this._kernel,n)).data),r}async ensureInitialized(){!this.initialized&&this.variable&&(this.initialized=!0,this._kernel?.kernelConnectionMetadata&&this.dependencyService&&await this.dependencyService.checkAndInstallMissingDependencies((0,p.isWeb)()?this._kernel:this._kernel?.kernelConnectionMetadata.interpreter||this._kernel),this.variable=await this.variableManager.getDataFrameInfo(this.variable,this._kernel))}};h=r=i([(0,s.injectable)(),o(0,(0,s.inject)(c.IJupyterVariables)),o(0,(0,s.named)(u.Identifiers.ALL_VARIABLES)),o(1,(0,s.inject)(a.IDataViewerDependencyService)),o(1,(0,s.optional)())],h),t.JupyterVariableDataProvider=h},70997:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterVariableDataProviderFactory=void 0,n(8513);const o=n(86700),s=n(41778),a=n(90391);let c=class{constructor(e){this.serviceContainer=e}async create(e,t){const n=this.serviceContainer.get(a.IJupyterVariableDataProvider);return n.setDependencies(e,t),n}};c=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IServiceContainer))],c),t.JupyterVariableDataProviderFactory=c},11461:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelDataViewerDependencyImplementation=t.kernelGetPandasVersion=void 0;const r=n(11642),i=n(25251),o=n(47891),s=n(9959),a=n(98729),c=n(81274);t.kernelGetPandasVersion="import pandas as _VSCODE_pandas;print(_VSCODE_pandas.__version__);del _VSCODE_pandas";class l extends c.BaseDataViewerDependencyImplementation{async execute(e,t){const n=await(0,a.executeSilently)(t.session,e),o=n.find((e=>"error"===e.output_type));return o&&(0,r.traceWarning)(i.DataScience.failedToGetVersionOfPandas,o.message),n.map((e=>e.text?.toString()))}async _getVersion(e){return(await this.execute(t.kernelGetPandasVersion,e)).map((e=>e?e.toString():void 0)).find((e=>e))}async _doInstall(e){const t=`${function(e){const t=e.kernelConnectionMetadata.interpreter?.envType;return t===o.EnvironmentType.Conda?"%conda":"%pip"}(e)} install pandas`;try{await this.execute(t,e),(0,s.sendTelemetryEvent)(s.Telemetry.UserInstalledPandas)}catch(e){throw(0,s.sendTelemetryEvent)(s.Telemetry.UserInstalledPandas,void 0,void 0,e),new Error(i.DataScience.failedToInstallPandas)}}async checkAndInstallMissingDependencies(e){if((0,s.sendTelemetryEvent)(s.Telemetry.DataViewerUsingKernel),!function(e){return Boolean(e.session)}(e))throw(0,s.sendTelemetryEvent)(s.Telemetry.NoActiveKernelSession),new Error("No no active kernel session.");await this.checkOrInstall(e)}}t.KernelDataViewerDependencyImplementation=l},90391:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IDataViewerDependencyService=t.IJupyterVariableDataProviderFactory=t.IJupyterVariableDataProvider=t.IDataViewer=t.IDataViewerFactory=t.ColumnType=t.DataViewerMessages=t.DataViewerRowStates=t.ColumnWarningSize=t.MaxStringCompare=t.CellFetchSizeSubsequent=t.CellFetchSizeFirst=t.CellFetchAllLimit=void 0;const r=n(30682);var i,o,s;t.CellFetchAllLimit=1e5,t.CellFetchSizeFirst=1e5,t.CellFetchSizeSubsequent=1e6,t.MaxStringCompare=200,t.ColumnWarningSize=1e3,(s=t.DataViewerRowStates||(t.DataViewerRowStates={})).Fetching="fetching",s.Skipped="skipped",(o=t.DataViewerMessages||(t.DataViewerMessages={})).Started=r.SharedMessages.Started,o.UpdateSettings=r.SharedMessages.UpdateSettings,o.InitializeData="init",o.GetAllRowsRequest="get_all_rows_request",o.GetAllRowsResponse="get_all_rows_response",o.GetRowsRequest="get_rows_request",o.GetRowsResponse="get_rows_response",o.CompletedData="complete",o.GetSliceRequest="get_slice_request",o.RefreshDataViewer="refresh_data_viewer",o.SliceEnablementStateChanged="slice_enablement_state_changed",(i=t.ColumnType||(t.ColumnType={})).String="string",i.Number="number",i.Bool="bool",t.IDataViewerFactory=Symbol("IDataViewerFactory"),t.IDataViewer=Symbol("IDataViewer"),t.IJupyterVariableDataProvider=Symbol("IJupyterVariableDataProvider"),t.IJupyterVariableDataProviderFactory=Symbol("IJupyterVariableDataProviderFactory"),t.IDataViewerDependencyService=Symbol("IDataViewerDependencyService")},6243:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.IPyWidgetRendererComms=void 0;const o=n(86700),s=n(66828),a=n(94062),c=n(50867),l=n(15925),u=n(20397),d=n(58681),p=n(11642);let h=class{constructor(e,t){this.kernelProvider=e,this.controllers=t,this.disposables=[],this.widgetOutputsPerNotebook=new WeakMap}dispose(){(0,u.disposeAllDisposables)(this.disposables)}activate(){const e=s.notebooks.createRendererMessaging("jupyter-ipywidget-renderer");e.onDidReceiveMessage(this.onDidReceiveMessage.bind(this,e),this,this.disposables),this.kernelProvider.onDidStartKernel(this.onDidStartKernel,this,this.disposables)}onDidStartKernel(e){this.hookupKernel(e),e.onStarted((()=>this.hookupKernel(e)),this,this.disposables),e.onRestarted((()=>this.hookupKernel(e)),this,this.disposables)}hookupKernel(e){this.widgetOutputsPerNotebook.delete(e.notebook);const t=e.session?.kernel,r=e.session?.kernel?.iopubMessage;if(!r)return;const i=n(76240),o=(n,r)=>{n===t&&(i.KernelMessage.isDisplayDataMsg(r)||i.KernelMessage.isUpdateDisplayDataMsg(r)||i.KernelMessage.isExecuteReplyMsg(r)||i.KernelMessage.isExecuteResultMsg(r))&&this.trackModelId(e.notebook,r)};r.connect(o),this.disposables.push(new s.Disposable((()=>r.disconnect(o))))}trackModelId(e,t){const n=t.content;if(n.data&&"object"==typeof n.data&&l.WIDGET_MIMETYPE in n.data){const t=n.data[l.WIDGET_MIMETYPE];if(t&&"model_id"in t){const n=this.widgetOutputsPerNotebook.get(e)||new Set;n.add(t.model_id),this.widgetOutputsPerNotebook.set(e,n)}}}onDidReceiveMessage(e,{editor:t,message:n}){n&&"object"==typeof n&&"query-widget-state"===n.command&&this.queryWidgetState(e,t,n),n&&"object"==typeof n&&"ipywidget-renderer-loaded"===n.command&&this.sendWidgetVersionAndState(e,t)}queryWidgetState(e,t,n){const r=this.widgetOutputsPerNotebook.get(t.notebook),i=!!this.controllers.getSelected(t.notebook),o=!!r?.has(n.model_id);e.postMessage({command:"query-widget-state",model_id:n.model_id,hasWidgetState:o,kernelSelected:i},t).then(d.noop,d.noop)}sendWidgetVersionAndState(e,t){const n=this.kernelProvider.get(t.notebook),r=n?.ipywidgetsVersion;n?.ipywidgetsVersion&&(0,p.traceVerbose)(`IPyWidget version in Kernel is ${n?.ipywidgetsVersion}.`);const i=!!this.controllers.getSelected(t.notebook);e.postMessage({command:"ipywidget-renderer-init",version:r,widgetState:void 0,kernelSelected:i},t).then(d.noop,d.noop)}};h=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IKernelProvider)),i(1,(0,o.inject)(c.IControllerRegistration))],h),t.IPyWidgetRendererComms=h},55635:function(e,t,n){"use strict";var r=n(48764).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},c=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PlotSaveHandler=t.imageExtensionForMimeType=t.svgMimeType=void 0;const l=n(86700),u=n(66828),d=a(n(15948)),p=n(10053),h=n(11642),f=n(35412),g=n(83599),m=n(25251);t.svgMimeType="image/svg+xml",t.imageExtensionForMimeType={"image/png":"png","image/jpeg":"jpeg","image/gif":"gif",[t.svgMimeType]:"svg"};let y=class{constructor(e,t,n){this.shell=e,this.fs=t,this.workspace=n}async savePlot(e,n,r){if(e.isClosed)return;const i=function(e,t,n){for(const r of e.getCells())for(const e of r.outputs)if(e.id===t&&e.items.find((e=>e.mime===n)))return e}(e,n,r);if(!i)return(0,h.traceError)(`No plot to save ${(0,f.getDisplayPath)(e.uri)}, id: ${n} for ${r}`);if(!(r.toLowerCase()in t.imageExtensionForMimeType))return(0,h.traceError)(`Unsupported MimeType ${(0,f.getDisplayPath)(e.uri)}, id: ${n} for ${r}`);const o=await this.getSaveTarget(i,r);o&&(o.path.toLowerCase().endsWith("pdf")?await this.saveAsPdf(i,o):await this.saveAsImage(i,o))}getSaveTarget(e,n){const r=t.imageExtensionForMimeType[n.toLowerCase()],i={};e.items.find((e=>e.mime.toLowerCase()===t.svgMimeType))&&(i[m.DataScience.pdfFilter]=["pdf"],i[m.DataScience.svgFilter]=["svg"]),"png"===r&&(i[m.DataScience.pngFilter]=["png"]),0===Object.keys(i).length&&(i.Images=[r]);const o=(this.workspace.workspaceFolders?.length||0)>0?this.workspace.workspaceFolders[0].uri:void 0,s=`output.${r}`,a=o?u.Uri.joinPath(o,s):u.Uri.file(s);return this.shell.showSaveDialog({defaultUri:a,saveLabel:m.DataScience.exportPlotTitle,filters:i})}async saveAsImage(e,n){const i=d.extname(n.path).substring(1),o=Object.keys(t.imageExtensionForMimeType).find((e=>t.imageExtensionForMimeType[e]===i)),s=e.items.find((e=>e.mime===o));if(!s)throw new Error(`Unsupported MimeType ${n.toString()}, available mime Types: ${e.items.map((e=>e.mime)).join(", ")}`);await this.fs.writeFile(n,r.from(s.data))}async saveAsPdf(e,t){return(0,h.traceError)("Save as PDF is not yet supported on the web.")}};y=s([(0,l.injectable)(),c(0,(0,l.inject)(p.IApplicationShell)),c(1,(0,l.inject)(g.IFileSystem)),c(2,(0,l.inject)(p.IWorkspaceService))],y),t.PlotSaveHandler=y},94981:function(e,t,n){"use strict";var r=n(48764).Buffer,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.getPngDimensions=t.PlotViewHandler=void 0;const s=n(86700),a=n(11642),c=n(35412),l=n(45047);let u=class{constructor(e){this.plotViewProvider=e}async openPlot(e,t){if(e.isClosed)return;const n=d(e,t,"image/svg+xml");let i;if(n)i=(new TextDecoder).decode(n.data);else{const n=d(e,t,"image/png");if(!n)return(0,a.traceError)(`No SVG or PNG Plot to open ${(0,c.getDisplayPath)(e.uri)}, id: ${t}`);i=function(e){const t=r.from(e.data),n=t.toString("base64"),i=p(t);return`<?xml version="1.0" encoding="utf-8" standalone="no"?>\n<svg height="${i.height}" width="${i.width}" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g>\n        <image xmlns="http://www.w3.org/2000/svg" x="0" y="0" height="100%" width="100%" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="data:image/png;base64,${n}"/>\n    </g>\n</svg>`}(n)}i&&await this.plotViewProvider.showPlot(i)}};function d(e,t,n){for(const r of e.getCells())for(const e of r.outputs)if(e.id===t)return e.items.find((e=>e.mime===n))}function p(e){if(!function(e){return 137===e[0]&&80===e[1]&&78===e[2]&&71===e[3]&&13===e[4]&&10===e[5]&&26===e[6]&&10===e[7]&&e.length>29}(e))throw new Error("The buffer is not a valid png");return{width:e.readUInt32BE(16),height:e.readUInt32BE(20)}}u=i([(0,s.injectable)(),o(0,(0,s.inject)(l.IPlotViewerProvider))],u),t.PlotViewHandler=u,t.getPngDimensions=p},95185:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RendererCommunication=void 0;const o=n(86700),s=n(66828),a=n(15925),c=n(20397),l=n(58681),u=n(94981),d=n(86522);let p=class{constructor(e,t){this.plotSaveHandler=e,this.plotViewHandler=t,this.disposables=[]}dispose(){(0,c.disposeAllDisposables)(this.disposables)}async activate(){const e=s.extensions.getExtension(a.RendererExtension);e&&(e.isActive||await e.activate(),e.exports.onDidReceiveMessage((({editor:e,message:t})=>{const n=e.notebook||s.window.activeNotebookEditor?.notebook;n&&("saveImageAs"===t.type?this.plotSaveHandler.savePlot(n,t.outputId,t.mimeType).catch(l.noop):"openImageInPlotViewer"===t.type&&this.plotViewHandler.openPlot(n,t.outputId).catch(l.noop))}),this,this.disposables))}};p=r([(0,o.injectable)(),i(0,(0,o.inject)(d.IPlotSaveHandler)),i(1,(0,o.inject)(u.PlotViewHandler))],p),t.RendererCommunication=p},86522:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IPlotSaveHandler=void 0,t.IPlotSaveHandler=Symbol("IPlotSaveHandler")},16798:function(e,t,n){"use strict";var r=n(34155),i=n(48764).Buffer,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return s(t,e),t},l=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PlotViewer=void 0,n(8513);const u=n(86700),d=c(n(15948)),p=n(66828),h=n(11642),f=n(48233),g=n(45047),m=n(10053),y=n(42080),v=n(83599),b=c(n(25251)),w=n(78086),C=n(52859),S=n(58681),_=n(9959),k=n(11386);let P=class extends w.WebviewPanelHost{constructor(e,t,n,i,o,s){const a=new k.StopWatch,c=(0,C.joinPath)(s.extensionUri,"out","webviews","webview-side","viewers");super(t,e,n,((e,t,n)=>new f.PlotViewerMessageListener(e,t,n)),c,[(0,C.joinPath)(c,"plotViewer.js")],b.DataScience.plotViewerTitle,p.ViewColumn.One),this.applicationShell=i,this.fs=o,this.context=s,this.closedEvent=new p.EventEmitter,this.removedEvent=new p.EventEmitter,this.addPlot=async e=>{this.isDisposed||(await super.show(!1),this.postMessage(g.PlotViewerMessages.SendPlot,e).ignoreErrors())},super.loadWebview(p.Uri.file(r.cwd())).catch(h.traceError).finally((()=>{(0,_.sendTelemetryEvent)(_.Telemetry.PlotViewerWebviewLoaded,{duration:a.elapsedTime})}))}get closed(){return this.closedEvent.event}get removed(){return this.removedEvent.event}async show(){if(!this.isDisposed)return super.show(!0)}dispose(){super.dispose(),this.removedEvent.dispose(),this.closedEvent&&this.closedEvent.fire(this)}get owningResource(){}onMessage(e,t){switch(e){case g.PlotViewerMessages.CopyPlot:this.copyPlot(t.toString()).ignoreErrors();break;case g.PlotViewerMessages.ExportPlot:this.exportPlot(t).ignoreErrors();break;case g.PlotViewerMessages.RemovePlot:this.removePlot(t)}super.onMessage(e,t)}removePlot(e){this.removedEvent.fire(e)}copyPlot(e){return Promise.resolve()}async exportPlot(e){(0,h.traceInfo)("exporting plot...");const t={};t[b.DataScience.pngFilter]=["png"],t[b.DataScience.svgFilter]=["svg"];const n=await this.applicationShell.showSaveDialog({saveLabel:b.DataScience.exportPlotTitle,filters:t});try{if(n)if(".png"===d.extname(n.path).toLowerCase()){const t=i.from(e.png.replace("data:image/png;base64",""),"base64");await this.fs.writeFile(n,t)}else await this.fs.writeFile(n,e.svg)}catch(e){(0,h.traceError)(e),this.applicationShell.showErrorMessage(b.DataScience.exportImageFailed(e.toString())).then(S.noop,S.noop)}}};P=a([(0,u.injectable)(),l(0,(0,u.inject)(m.IWebviewPanelProvider)),l(1,(0,u.inject)(y.IConfigurationService)),l(2,(0,u.inject)(m.IWorkspaceService)),l(3,(0,u.inject)(m.IApplicationShell)),l(4,(0,u.inject)(v.IFileSystem)),l(5,(0,u.inject)(y.IExtensionContext))],P),t.PlotViewer=P},48233:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlotViewerMessageListener=void 0,n(8513),t.PlotViewerMessageListener=class{constructor(e,t,n){this.disposedCallback=n,this.callback=e,this.viewChanged=t}async dispose(){this.disposedCallback()}onMessage(e,t){this.callback(e,t)}onChangeViewState(e){this.viewChanged&&this.viewChanged(e)}}},93704:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PlotViewerProvider=void 0,n(8513);const o=n(86700),s=n(45047),a=n(42080),c=n(41778),l=n(9959);let u=class{constructor(e,t){this.serviceContainer=e,this.imageList=[],this.closedViewer=()=>{this.currentViewer&&(this.currentViewer=void 0),this.currentViewerClosed&&(this.currentViewerClosed.dispose(),this.currentViewerClosed=void 0)},this.removedPlot=e=>{this.imageList.splice(e,1)},t.push(this)}async dispose(){this.currentViewer&&this.currentViewer.dispose()}async showPlot(e){this.imageList.push(e);const t=this.currentViewer?[e]:this.imageList,n=await this.getOrCreate();await Promise.all(t.map(n.addPlot))}async getOrCreate(){return this.currentViewer||(this.currentViewer=this.serviceContainer.get(s.IPlotViewer),this.currentViewerClosed=this.currentViewer.closed(this.closedViewer),this.currentViewer.removed(this.removedPlot),(0,l.sendTelemetryEvent)(l.Telemetry.OpenPlotViewer),await this.currentViewer.show()),this.currentViewer}};u=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IServiceContainer)),i(1,(0,o.inject)(a.IAsyncDisposableRegistry))],u),t.PlotViewerProvider=u},45047:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IPlotViewer=t.IPlotViewerProvider=t.IPlotViewerMapping=t.PlotViewerMessages=void 0;const r=n(30682);var i;!function(e){e.Started=r.SharedMessages.Started,e.UpdateSettings=r.SharedMessages.UpdateSettings,e.SendPlot="send_plot",e.CopyPlot="copy_plot",e.ExportPlot="export_plot",e.RemovePlot="remove_plot"}(i=t.PlotViewerMessages||(t.PlotViewerMessages={})),t.IPlotViewerMapping=class{},i.Started,i.UpdateSettings,i.SendPlot,i.CopyPlot,i.ExportPlot,i.RemovePlot,t.IPlotViewerProvider=Symbol("IPlotViewerProvider"),t.IPlotViewer=Symbol("IPlotViewer")},61480:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(52891),i=n(55231),o=n(67726),s=n(64752),a=n(70997),c=n(90391),l=n(97480),u=n(79708),d=n(48334),p=n(32613),h=n(52064),f=n(96663),g=n(45047),m=n(16798),y=n(93704),v=n(55635),b=n(94981),w=n(95185),C=n(86522),S=n(6243);t.registerTypes=function(e){e.addSingleton(h.IExtensionSyncActivationService,w.RendererCommunication),e.addSingleton(h.IExtensionSyncActivationService,l.DataViewerCommandRegistry),e.add(c.IDataViewer,p.DataViewer),e.addSingleton(c.IDataViewerFactory,d.DataViewerFactory),e.addSingleton(c.IDataViewerDependencyService,f.DataViewerDependencyService),e.add(g.IPlotViewer,m.PlotViewer),e.addSingleton(g.IPlotViewerProvider,y.PlotViewerProvider),e.addSingleton(C.IPlotSaveHandler,v.PlotSaveHandler),e.addSingleton(b.PlotViewHandler,b.PlotViewHandler),e.addSingleton(i.INotebookWatcher,u.NotebookWatcher),e.addSingleton(h.IExtensionSyncActivationService,r.VariableViewActivationService),e.addSingleton(h.IExtensionSyncActivationService,S.IPyWidgetRendererComms),e.addSingleton(i.IVariableViewProvider,o.VariableViewProvider),e.add(c.IJupyterVariableDataProvider,s.JupyterVariableDataProvider),e.addSingleton(c.IJupyterVariableDataProviderFactory,a.JupyterVariableDataProviderFactory)}},79708:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookWatcher=void 0;const o=n(86700),s=n(66828);n(8513);const a=n(94062),c=n(135),l=n(10053),u=n(42080),d=n(90391),p=n(15925),h=n(86563);var f;!function(e){e[e.executed=0]="executed",e[e.restarted=1]="restarted"}(f||(f={}));let g=class{get onDidChangeActiveNotebook(){return this._onDidChangeActiveNotebook.event}get onDidFinishExecutingActiveNotebook(){return this._onDidFinisheExecutingActiveNotebook.event}get onDidRestartActiveNotebook(){return this._onDidRestartActiveNotebook.event}get activeKernel(){const e=this.notebooks.activeNotebookEditor?.notebook,t=e?.notebookType==p.JupyterNotebookView?this.kernelProvider.get(e):void 0;if(t)return t;const n=this.getActiveInteractiveWindowDocument(),r=n?this.kernelProvider.get(n):void 0;if(r)return r;const i=this.dataViewerFactory.activeViewer;return i?this.kernelProvider.kernels.find((e=>e===i.kernel)):void 0}get activeNotebookExecutionCount(){const e=this.activeKernel?.notebook;return e?this._executionCountTracker.get(e):void 0}constructor(e,t,n,r,i){this.interactiveWindowProvider=e,this.kernelProvider=t,this.dataViewerFactory=n,this.disposables=r,this.notebooks=i,this._onDidFinisheExecutingActiveNotebook=new s.EventEmitter,this._onDidChangeActiveNotebook=new s.EventEmitter,this._onDidRestartActiveNotebook=new s.EventEmitter,this._executionCountTracker=new WeakMap,this.notebooks.onDidChangeActiveNotebookEditor(this.activeEditorChanged,this,this.disposables),this.notebooks.onDidCloseNotebookDocument(this.notebookEditorClosed,this,this.disposables),this.kernelProvider.onDidRestartKernel((e=>{this.handleRestart({state:f.restarted,notebook:e.notebook})}),this,this.disposables),i.onDidChangeNotebookCellExecutionState(this.onDidChangeNotebookCellExecutionState,this,this.disposables)}getActiveInteractiveWindowDocument(){const e=this.interactiveWindowProvider.getActiveOrAssociatedInteractiveWindow();if(e)return this.notebooks.notebookDocuments.find((t=>t===e?.notebookDocument))}onDidChangeNotebookCellExecutionState(e){(0,h.isJupyterNotebook)(e.cell.notebook)&&e.state===s.NotebookCellExecutionState.Idle&&this.handleExecute({notebook:e.cell.notebook,state:f.executed,cell:e.cell})}handleExecute(e){this.isNonSilentExecution(e)&&(void 0!==e.cell?.executionSummary?.executionOrder&&this._executionCountTracker.set(e.notebook,e.cell.executionSummary?.executionOrder),this.isActiveNotebookEvent(e)&&void 0!==e.cell?.executionSummary?.executionOrder)&&this.activeKernel&&0===this.kernelProvider.getKernelExecution(this.activeKernel).pendingCells.length&&this._onDidFinisheExecutingActiveNotebook.fire({executionCount:e.cell.executionSummary?.executionOrder})}handleRestart(e){this._executionCountTracker.delete(e.notebook),this.isActiveNotebookEvent(e)&&this._onDidRestartActiveNotebook.fire()}notebookEditorClosed(e){this._executionCountTracker.delete(e)}activeEditorChanged(e){const t={};if(e&&(0,h.isJupyterNotebook)(e.notebook)){const n=this._executionCountTracker.get(e.notebook);n&&(t.executionCount=n)}this._onDidChangeActiveNotebook.fire(t)}isNonSilentExecution(e){return!(e.state!==f.executed||!e.cell||!e.cell.executionSummary?.executionOrder)}isActiveNotebookEvent(e){return this.activeKernel?.notebook===e.notebook}};g=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IInteractiveWindowProvider)),i(1,(0,o.inject)(a.IKernelProvider)),i(2,(0,o.inject)(d.IDataViewerFactory)),i(3,(0,o.inject)(u.IDisposableRegistry)),i(4,(0,o.inject)(l.IVSCodeNotebook))],g),t.NotebookWatcher=g},55231:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IVariableViewProvider=t.INotebookWatcher=t.IVariableViewPanelMapping=void 0;const r=n(30682);t.IVariableViewPanelMapping=class{},r.InteractiveWindowMessages.ForceVariableRefresh,r.InteractiveWindowMessages.SettingsUpdated,r.InteractiveWindowMessages.Activate,r.InteractiveWindowMessages.ShowDataViewer,r.InteractiveWindowMessages.GetVariablesRequest,r.InteractiveWindowMessages.GetVariablesResponse,r.InteractiveWindowMessages.VariableExplorerToggle,r.InteractiveWindowMessages.SetVariableExplorerHeight,r.InteractiveWindowMessages.VariableExplorerHeightResponse,r.InteractiveWindowMessages.OpenLink,r.InteractiveWindowMessages.VariablesComplete,r.SharedMessages.UpdateSettings,r.SharedMessages.LocInit,r.InteractiveWindowMessages.FinishCell,r.InteractiveWindowMessages.UpdateVariableViewExecutionCount,r.InteractiveWindowMessages.GetHTMLByIdRequest,r.InteractiveWindowMessages.GetHTMLByIdResponse,r.InteractiveWindowMessages.RestartKernel,t.INotebookWatcher=Symbol("INotebookWatcher"),t.IVariableViewProvider=Symbol("IVariableViewProvider")},56715:function(e,t,n){"use strict";var r=n(34155),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.VariableView=void 0,n(8513);const c=n(66828),l=n(52859),u=n(9959),d=n(70166),p=n(30682),h=n(29444),f=n(11642),g=a(n(25251)),m=n(724),y=n(87486),v=n(85446),b=n(58681);class w extends y.WebviewViewHost{get owningResource(){}constructor(e,t,n,r,i,o,s,a,c,u,p,h){const f=(0,l.joinPath)(r.extensionUri,"out","webviews","webview-side","viewers");super(e,t,((e,t)=>new d.VariableViewMessageListener(e,t)),n,f,[(0,l.joinPath)(f,"variableView.js")]),this.variables=i,this.disposables=o,this.appShell=s,this.jupyterVariableDataProviderFactory=a,this.dataViewerFactory=c,this.notebookWatcher=u,this.commandManager=p,this.documentManager=h,this.notebookWatcher.onDidFinishExecutingActiveNotebook(this.activeNotebookExecuted,this,this.disposables),this.notebookWatcher.onDidChangeActiveNotebook(this.activeNotebookChanged,this,this.disposables),this.notebookWatcher.onDidRestartActiveNotebook(this.activeNotebookRestarted,this,this.disposables),this.variables.refreshRequired(this.sendRefreshMessage,this,this.disposables),this.documentManager.onDidChangeActiveTextEditor(this.activeTextEditorChanged,this,this.disposables),this.dataViewerChecker=new m.DataViewerChecker(e,s)}async load(e){await super.loadWebview(c.Uri.file(r.cwd()),e).catch(f.traceError),this.webviewView&&this.disposables.push(this.webviewView.onDidChangeVisibility((()=>{this.handleVisibilityChanged()}))),this.handleVisibilityChanged()}get title(){return"variableView"}onMessage(e,t){switch(e){case p.InteractiveWindowMessages.GetVariablesRequest:this.handleMessage(e,t,this.requestVariables);break;case p.InteractiveWindowMessages.ShowDataViewer:this.handleMessage(e,t,this.showDataViewer)}super.onMessage(e,t)}handleMessage(e,t,n){const r=t;n.bind(this)(r)}handleVisibilityChanged(){const e=new h.ContextKey("jupyter.variableViewVisible",this.commandManager);let t=!1;this.webviewView&&(t=this.webviewView.visible),e.set(t).ignoreErrors(),t&&((0,u.sendTelemetryEvent)(u.Telemetry.NativeVariableViewMadeVisible),void 0!==this.notebookWatcher.activeNotebookExecutionCount?this.postMessage(p.InteractiveWindowMessages.UpdateVariableViewExecutionCount,{executionCount:this.notebookWatcher.activeNotebookExecutionCount}).ignoreErrors():this.postMessage(p.InteractiveWindowMessages.ForceVariableRefresh).ignoreErrors())}async showDataViewer(e){try{if(this.notebookWatcher.activeKernel&&await this.dataViewerChecker.isRequestedColumnSizeAllowed(e.columnSize,this.owningResource)){const t=await this.jupyterVariableDataProviderFactory.create(e.variable,this.notebookWatcher.activeKernel),n=`${g.DataScience.dataExplorerTitle} - ${e.variable.name}`;return await this.dataViewerFactory.create(t,n)}}catch(e){(0,f.traceError)(e),(0,u.sendTelemetryEvent)(u.Telemetry.FailedShowDataViewer),this.appShell.showErrorMessage(g.DataScience.showDataViewerFail).then(b.noop,b.noop)}}async requestVariables(e){const t=this.notebookWatcher.activeKernel;if(t){const n=await this.variables.getVariables(e,t);this.postMessage(p.InteractiveWindowMessages.GetVariablesResponse,n).ignoreErrors(),(0,u.sendTelemetryEvent)(u.Telemetry.VariableExplorerVariableCount,{variableCount:n.totalCount})}else{const t={executionCount:e.executionCount,pageStartIndex:-1,pageResponse:[],totalCount:0,refreshCount:e.refreshCount};this.postMessage(p.InteractiveWindowMessages.GetVariablesResponse,t).ignoreErrors()}}async activeNotebookExecuted(e){this.postMessage(p.InteractiveWindowMessages.UpdateVariableViewExecutionCount,{executionCount:e.executionCount}).ignoreErrors()}async activeNotebookChanged(e){e.executionCount?this.postMessage(p.InteractiveWindowMessages.UpdateVariableViewExecutionCount,{executionCount:e.executionCount}).ignoreErrors():this.postMessage(p.InteractiveWindowMessages.UpdateVariableViewExecutionCount,{executionCount:0}).ignoreErrors(),this.postMessage(p.InteractiveWindowMessages.ForceVariableRefresh).ignoreErrors()}activeTextEditorChanged(){this.postMessage(p.InteractiveWindowMessages.ForceVariableRefresh).ignoreErrors()}async activeNotebookRestarted(){this.postMessage(p.InteractiveWindowMessages.RestartKernel).ignoreErrors()}async sendRefreshMessage(){this.postMessage(p.InteractiveWindowMessages.ForceVariableRefresh).ignoreErrors()}}s([(0,u.capturePerfTelemetry)(u.Telemetry.NativeVariableViewLoaded)],w.prototype,"load",null),s([(0,v.swallowExceptions)()],w.prototype,"showDataViewer",null),s([(0,v.swallowExceptions)()],w.prototype,"requestVariables",null),t.VariableView=w},52891:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.VariableViewActivationService=void 0;const o=n(86700),s=n(66828),a=n(42080),c=n(55231);let l=class{constructor(e,t){this.extensionContext=e,this.variableViewProvider=t}activate(){this.extensionContext.subscriptions.push(s.window.registerWebviewViewProvider(this.variableViewProvider.viewType,this.variableViewProvider,{webviewOptions:{retainContextWhenHidden:!1}}))}};l=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IExtensionContext)),i(1,(0,o.inject)(c.IVariableViewProvider))],l),t.VariableViewActivationService=l},70166:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VariableViewMessageListener=void 0,t.VariableViewMessageListener=class{constructor(e,t){this.disposedCallback=t,this.callback=e}async dispose(){this.disposedCallback()}onMessage(e,t){this.callback(e,t)}}},67726:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.VariableViewProvider=void 0;const o=n(86700),s=n(7214),a=n(10053),c=n(15925),l=n(42080),u=n(43138),d=n(90391),p=n(55231),h=n(56715);let f=class{get activeVariableView(){if(!(0,c.isTestExecution)())throw new Error("activeVariableView only for test code");return this.variableView?Promise.resolve(this.variableView):(this.activeVariableViewPromise=(0,u.createDeferred)(),this.activeVariableViewPromise.promise)}constructor(e,t,n,r,i,o,s,a,c,l,u,d){this.configuration=e,this.workspaceService=t,this.webviewViewProvider=n,this.context=r,this.variables=i,this.disposables=o,this.appShell=s,this.jupyterVariableDataProviderFactory=a,this.dataViewerFactory=c,this.notebookWatcher=l,this.commandManager=u,this.documentManager=d,this.viewType="jupyterViewVariables"}async resolveWebviewView(e,t,n){e.webview.options={enableScripts:!0},this.variableView=new h.VariableView(this.configuration,this.workspaceService,this.webviewViewProvider,this.context,this.variables,this.disposables,this.appShell,this.jupyterVariableDataProviderFactory,this.dataViewerFactory,this.notebookWatcher,this.commandManager,this.documentManager),this.activeVariableViewPromise&&this.activeVariableViewPromise.resolve(this.variableView),await this.variableView.load(e)}};f=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IConfigurationService)),i(1,(0,o.inject)(a.IWorkspaceService)),i(2,(0,o.inject)(a.IWebviewViewProvider)),i(3,(0,o.inject)(l.IExtensionContext)),i(4,(0,o.inject)(s.IJupyterVariables)),i(4,(0,o.named)(c.Identifiers.ALL_VARIABLES)),i(5,(0,o.inject)(l.IDisposableRegistry)),i(6,(0,o.inject)(a.IApplicationShell)),i(7,(0,o.inject)(d.IJupyterVariableDataProviderFactory)),i(8,(0,o.inject)(d.IDataViewerFactory)),i(9,(0,o.inject)(p.INotebookWatcher)),i(10,(0,o.inject)(a.ICommandManager)),i(11,(0,o.inject)(a.IDocumentManager))],f),t.VariableViewProvider=f},14783:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidSliceExpression=t.validateSliceExpression=t.fullSliceExpression=t.preselectedSliceExpression=t.sliceRegEx=void 0;const r=n(65634);function i(e,n){if(e.startsWith("[")&&e.endsWith("]")){let i;const o=e.substring(1,e.length-1).split(",").map(((e,r)=>{const o=t.sliceRegEx.exec(e);if(o?.groups?.Start&&!o.groups.Stop){const e=parseInt(o.groups.Start),t=n[r];return(e>=0&&e>=t||e<0&&e<-t)&&(i={shapeIndex:r,value:e}),e}}));if(i){const{shapeIndex:e,value:t}=i,o=(0,r.getLocString)("sliceIndexError","Index {0} out of range for axis {1} with {2} elements");return(0,r.format)(o,t.toString(),e.toString(),n[e].toString())}if(o&&o.length!==n.length){const e=(0,r.getLocString)("sliceMismatchedAxesError","Expected {0} axes, got {1} in slice expression");return(0,r.format)(e,n.length.toString(),o.length.toString())}}return""}t.sliceRegEx=/^\s*((?<StartRange>-?\d+:)|(?<StopRange>-?:\d+)|(?:(?<Start>-?\d+)(?::(?<Stop>-?\d+))?(?::(?<Step>-?\d+))?))\s*$/,t.preselectedSliceExpression=function(e){let t=e.length-2;return"["+e.map((()=>t>0?(t-=1,"0"):":")).join(", ")+"]"},t.fullSliceExpression=function(e){return"["+e.map((()=>":")).join(", ")+"]"},t.validateSliceExpression=i,t.isValidSliceExpression=function(e,t){return""===i(e,t)}},65634:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.format=t.storeLocStrings=t.getLocString=void 0,t.getLocString=function(e,t){return n&&n.hasOwnProperty(e)?n[e]:t},t.storeLocStrings=function(e){n=e},t.format=function(e,...t){return e.replace(/{(\d+)}/g,((e,n)=>void 0===t[n]?e:t[n]))}},84564:(e,t,n)=>{"use strict";var r=n(47418),i=n(57129),o=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function d(e){return(e||"").toString().replace(o,"")}var p=[["#","hash"],["?","query"],function(e,t){return g(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],h={hash:1,query:1};function f(e){var t,r=("undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{}).location||{},i={},o=typeof(e=e||r);if("blob:"===e.protocol)i=new y(unescape(e.pathname),{});else if("string"===o)for(t in i=new y(e,{}),h)delete i[t];else if("object"===o){for(t in e)t in h||(i[t]=e[t]);void 0===i.slashes&&(i.slashes=a.test(e.href))}return i}function g(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function m(e,t){e=(e=d(e)).replace(s,""),t=t||{};var n,r=l.exec(e),i=r[1]?r[1].toLowerCase():"",o=!!r[2],a=!!r[3],c=0;return o?a?(n=r[2]+r[3]+r[4],c=r[2].length+r[3].length):(n=r[2]+r[4],c=r[2].length):a?(n=r[3]+r[4],c=r[3].length):n=r[4],"file:"===i?c>=2&&(n=n.slice(2)):g(i)?n=r[4]:i?o&&(n=n.slice(2)):c>=2&&g(t.protocol)&&(n=r[4]),{protocol:i,slashes:o||g(i),slashesCount:c,rest:n}}function y(e,t,n){if(e=(e=d(e)).replace(s,""),!(this instanceof y))return new y(e,t,n);var o,a,c,l,h,v,b=p.slice(),w=typeof t,C=this,S=0;for("object"!==w&&"string"!==w&&(n=t,t=null),n&&"function"!=typeof n&&(n=i.parse),o=!(a=m(e||"",t=f(t))).protocol&&!a.slashes,C.slashes=a.slashes||o&&t.slashes,C.protocol=a.protocol||t.protocol||"",e=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||u.test(e))||!a.slashes&&(a.protocol||a.slashesCount<2||!g(C.protocol)))&&(b[3]=[/(.*)/,"pathname"]);S<b.length;S++)"function"!=typeof(l=b[S])?(c=l[0],v=l[1],c!=c?C[v]=e:"string"==typeof c?~(h="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"==typeof l[2]?(C[v]=e.slice(0,h),e=e.slice(h+l[2])):(C[v]=e.slice(h),e=e.slice(0,h))):(h=c.exec(e))&&(C[v]=h[1],e=e.slice(0,h.index)),C[v]=C[v]||o&&l[3]&&t[v]||"",l[4]&&(C[v]=C[v].toLowerCase())):e=l(e,C);n&&(C.query=n(C.query)),o&&t.slashes&&"/"!==C.pathname.charAt(0)&&(""!==C.pathname||""!==t.pathname)&&(C.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],o=!1,s=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),s++):s&&(0===r&&(o=!0),n.splice(r,1),s--);return o&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(C.pathname,t.pathname)),"/"!==C.pathname.charAt(0)&&g(C.protocol)&&(C.pathname="/"+C.pathname),r(C.port,C.protocol)||(C.host=C.hostname,C.port=""),C.username=C.password="",C.auth&&(~(h=C.auth.indexOf(":"))?(C.username=C.auth.slice(0,h),C.username=encodeURIComponent(decodeURIComponent(C.username)),C.password=C.auth.slice(h+1),C.password=encodeURIComponent(decodeURIComponent(C.password))):C.username=encodeURIComponent(decodeURIComponent(C.auth)),C.auth=C.password?C.username+":"+C.password:C.username),C.origin="file:"!==C.protocol&&g(C.protocol)&&C.host?C.protocol+"//"+C.host:"null",C.href=C.toString()}y.prototype={set:function(e,t,n){var o=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||i.parse)(t)),o[e]=t;break;case"port":o[e]=t,r(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,c.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(t){var s="pathname"===e?"/":"#";o[e]=t.charAt(0)!==s?s+t:t}else o[e]=t;break;case"username":case"password":o[e]=encodeURIComponent(t);break;case"auth":var a=t.indexOf(":");~a?(o.username=t.slice(0,a),o.username=encodeURIComponent(decodeURIComponent(o.username)),o.password=t.slice(a+1),o.password=encodeURIComponent(decodeURIComponent(o.password))):o.username=encodeURIComponent(decodeURIComponent(t))}for(var l=0;l<p.length;l++){var u=p[l];u[4]&&(o[u[1]]=o[u[1]].toLowerCase())}return o.auth=o.password?o.username+":"+o.password:o.username,o.origin="file:"!==o.protocol&&g(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"==typeof e||(e=i.stringify);var t,n=this,r=n.host,o=n.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var s=o+(n.protocol&&n.slashes||g(n.protocol)?"//":"");return n.username?(s+=n.username,n.password&&(s+=":"+n.password),s+="@"):n.password?(s+=":"+n.password,s+="@"):"file:"!==n.protocol&&g(n.protocol)&&!r&&"/"!==n.pathname&&(s+="@"),(":"===r[r.length-1]||c.test(n.hostname)&&!n.port)&&(r+=":"),s+=r+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(s+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(s+=n.hash),s}},y.extractProtocol=m,y.location=f,y.trimLeft=d,y.qs=i,e.exports=y},45327:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,i=t;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},85217:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},71171:(e,t,n)=>{var r=n(85217),i=n(45327);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},81169:(e,t,n)=>{"use strict";e.exports=n(39054)},39054:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.BrowserMessageWriter=t.BrowserMessageReader=void 0,n(25669).default.install();const o=n(23870);i(n(23870),t);class s extends o.AbstractMessageReader{constructor(e){super(),this._onData=new o.Emitter,this._messageListener=e=>{this._onData.fire(e.data)},e.addEventListener("error",(e=>this.fireError(e))),e.onmessage=this._messageListener}listen(e){return this._onData.event(e)}}t.BrowserMessageReader=s;class a extends o.AbstractMessageWriter{constructor(e){super(),this.context=e,this.errorCount=0,e.addEventListener("error",(e=>this.fireError(e)))}write(e){try{return this.context.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}}t.BrowserMessageWriter=a,t.createMessageConnection=function(e,t,n,r){return void 0===n&&(n=o.NullLogger),o.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,o.createMessageConnection)(e,t,n,r)}},25669:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(30147),i=n(83911),o=n(27135),s=n(75530);class a extends s.AbstractMessageBuffer{constructor(e="utf-8"){super(e),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return a.emptyBuffer}fromString(e,t){return(new TextEncoder).encode(e)}toString(e,t){return"ascii"===t?this.asciiDecoder.decode(e):new TextDecoder(t).decode(e)}asNative(e,t){return void 0===t?e:e.slice(0,t)}allocNative(e){return new Uint8Array(e)}}a.emptyBuffer=new Uint8Array(0);class c{constructor(e){this.socket=e,this._onData=new o.Emitter,this._messageListener=e=>{e.data.arrayBuffer().then((e=>{this._onData.fire(new Uint8Array(e))}),(()=>{(0,r.default)().console.error("Converting blob to array buffer failed.")}))},this.socket.addEventListener("message",this._messageListener)}onClose(e){return this.socket.addEventListener("close",e),i.Disposable.create((()=>this.socket.removeEventListener("close",e)))}onError(e){return this.socket.addEventListener("error",e),i.Disposable.create((()=>this.socket.removeEventListener("error",e)))}onEnd(e){return this.socket.addEventListener("end",e),i.Disposable.create((()=>this.socket.removeEventListener("end",e)))}onData(e){return this._onData.event(e)}}class l{constructor(e){this.socket=e}onClose(e){return this.socket.addEventListener("close",e),i.Disposable.create((()=>this.socket.removeEventListener("close",e)))}onError(e){return this.socket.addEventListener("error",e),i.Disposable.create((()=>this.socket.removeEventListener("error",e)))}onEnd(e){return this.socket.addEventListener("end",e),i.Disposable.create((()=>this.socket.removeEventListener("end",e)))}write(e,t){if("string"==typeof e){if(void 0!==t&&"utf-8"!==t)throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${t}`);this.socket.send(e)}else this.socket.send(e);return Promise.resolve()}end(){this.socket.close()}}const u=new TextEncoder,d=Object.freeze({messageBuffer:Object.freeze({create:e=>new a(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{if("utf-8"!==t.charset)throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${t.charset}`);return Promise.resolve(u.encode(JSON.stringify(e,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{if(!(e instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(t.charset).decode(e)))}})}),stream:Object.freeze({asReadableStream:e=>new c(e),asWritableStream:e=>new l(e)}),console,timer:Object.freeze({setTimeout(e,t,...n){const r=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(e,...t){const n=setTimeout(e,0,...t);return{dispose:()=>clearTimeout(n)}},setInterval(e,t,...n){const r=setInterval(e,t,...n);return{dispose:()=>clearInterval(r)}}})});function p(){return d}!function(e){e.install=function(){r.default.install(d)}}(p||(p={})),t.default=p},23870:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFormat=t.TraceValues=t.Trace=t.ProgressType=t.ProgressToken=t.createMessageConnection=t.NullLogger=t.ConnectionOptions=t.ConnectionStrategy=t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=t.CancellationToken=t.CancellationTokenSource=t.Emitter=t.Event=t.Disposable=t.LRUCache=t.Touch=t.LinkedMap=t.ParameterStructures=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.ErrorCodes=t.ResponseError=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType0=t.RequestType=t.Message=t.RAL=void 0,t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=void 0;const r=n(20839);Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return r.Message}}),Object.defineProperty(t,"RequestType",{enumerable:!0,get:function(){return r.RequestType}}),Object.defineProperty(t,"RequestType0",{enumerable:!0,get:function(){return r.RequestType0}}),Object.defineProperty(t,"RequestType1",{enumerable:!0,get:function(){return r.RequestType1}}),Object.defineProperty(t,"RequestType2",{enumerable:!0,get:function(){return r.RequestType2}}),Object.defineProperty(t,"RequestType3",{enumerable:!0,get:function(){return r.RequestType3}}),Object.defineProperty(t,"RequestType4",{enumerable:!0,get:function(){return r.RequestType4}}),Object.defineProperty(t,"RequestType5",{enumerable:!0,get:function(){return r.RequestType5}}),Object.defineProperty(t,"RequestType6",{enumerable:!0,get:function(){return r.RequestType6}}),Object.defineProperty(t,"RequestType7",{enumerable:!0,get:function(){return r.RequestType7}}),Object.defineProperty(t,"RequestType8",{enumerable:!0,get:function(){return r.RequestType8}}),Object.defineProperty(t,"RequestType9",{enumerable:!0,get:function(){return r.RequestType9}}),Object.defineProperty(t,"ResponseError",{enumerable:!0,get:function(){return r.ResponseError}}),Object.defineProperty(t,"ErrorCodes",{enumerable:!0,get:function(){return r.ErrorCodes}}),Object.defineProperty(t,"NotificationType",{enumerable:!0,get:function(){return r.NotificationType}}),Object.defineProperty(t,"NotificationType0",{enumerable:!0,get:function(){return r.NotificationType0}}),Object.defineProperty(t,"NotificationType1",{enumerable:!0,get:function(){return r.NotificationType1}}),Object.defineProperty(t,"NotificationType2",{enumerable:!0,get:function(){return r.NotificationType2}}),Object.defineProperty(t,"NotificationType3",{enumerable:!0,get:function(){return r.NotificationType3}}),Object.defineProperty(t,"NotificationType4",{enumerable:!0,get:function(){return r.NotificationType4}}),Object.defineProperty(t,"NotificationType5",{enumerable:!0,get:function(){return r.NotificationType5}}),Object.defineProperty(t,"NotificationType6",{enumerable:!0,get:function(){return r.NotificationType6}}),Object.defineProperty(t,"NotificationType7",{enumerable:!0,get:function(){return r.NotificationType7}}),Object.defineProperty(t,"NotificationType8",{enumerable:!0,get:function(){return r.NotificationType8}}),Object.defineProperty(t,"NotificationType9",{enumerable:!0,get:function(){return r.NotificationType9}}),Object.defineProperty(t,"ParameterStructures",{enumerable:!0,get:function(){return r.ParameterStructures}});const i=n(96184);Object.defineProperty(t,"LinkedMap",{enumerable:!0,get:function(){return i.LinkedMap}}),Object.defineProperty(t,"LRUCache",{enumerable:!0,get:function(){return i.LRUCache}}),Object.defineProperty(t,"Touch",{enumerable:!0,get:function(){return i.Touch}});const o=n(83911);Object.defineProperty(t,"Disposable",{enumerable:!0,get:function(){return o.Disposable}});const s=n(27135);Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return s.Event}}),Object.defineProperty(t,"Emitter",{enumerable:!0,get:function(){return s.Emitter}});const a=n(13881);Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return a.CancellationTokenSource}}),Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return a.CancellationToken}});const c=n(56525);Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return c.MessageReader}}),Object.defineProperty(t,"AbstractMessageReader",{enumerable:!0,get:function(){return c.AbstractMessageReader}}),Object.defineProperty(t,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return c.ReadableStreamMessageReader}});const l=n(96654);Object.defineProperty(t,"MessageWriter",{enumerable:!0,get:function(){return l.MessageWriter}}),Object.defineProperty(t,"AbstractMessageWriter",{enumerable:!0,get:function(){return l.AbstractMessageWriter}}),Object.defineProperty(t,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return l.WriteableStreamMessageWriter}});const u=n(61343);Object.defineProperty(t,"ConnectionStrategy",{enumerable:!0,get:function(){return u.ConnectionStrategy}}),Object.defineProperty(t,"ConnectionOptions",{enumerable:!0,get:function(){return u.ConnectionOptions}}),Object.defineProperty(t,"NullLogger",{enumerable:!0,get:function(){return u.NullLogger}}),Object.defineProperty(t,"createMessageConnection",{enumerable:!0,get:function(){return u.createMessageConnection}}),Object.defineProperty(t,"ProgressToken",{enumerable:!0,get:function(){return u.ProgressToken}}),Object.defineProperty(t,"ProgressType",{enumerable:!0,get:function(){return u.ProgressType}}),Object.defineProperty(t,"Trace",{enumerable:!0,get:function(){return u.Trace}}),Object.defineProperty(t,"TraceValues",{enumerable:!0,get:function(){return u.TraceValues}}),Object.defineProperty(t,"TraceFormat",{enumerable:!0,get:function(){return u.TraceFormat}}),Object.defineProperty(t,"SetTraceNotification",{enumerable:!0,get:function(){return u.SetTraceNotification}}),Object.defineProperty(t,"LogTraceNotification",{enumerable:!0,get:function(){return u.LogTraceNotification}}),Object.defineProperty(t,"ConnectionErrors",{enumerable:!0,get:function(){return u.ConnectionErrors}}),Object.defineProperty(t,"ConnectionError",{enumerable:!0,get:function(){return u.ConnectionError}}),Object.defineProperty(t,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return u.CancellationReceiverStrategy}}),Object.defineProperty(t,"CancellationSenderStrategy",{enumerable:!0,get:function(){return u.CancellationSenderStrategy}}),Object.defineProperty(t,"CancellationStrategy",{enumerable:!0,get:function(){return u.CancellationStrategy}});const d=n(30147);t.RAL=d.default},13881:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationTokenSource=t.CancellationToken=void 0;const r=n(30147),i=n(67574),o=n(27135);var s;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:o.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:o.Event.None}),e.is=function(t){const n=t;return n&&(n===e.None||n===e.Cancelled||i.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}}(s=t.CancellationToken||(t.CancellationToken={}));const a=Object.freeze((function(e,t){const n=(0,r.default)().timer.setTimeout(e.bind(t),0);return{dispose(){n.dispose()}}}));class c{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||(this._emitter=new o.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new c),this._token}cancel(){this._token?this._token.cancel():this._token=s.Cancelled}dispose(){this._token?this._token instanceof c&&this._token.dispose():this._token=s.None}}},61343:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.ConnectionOptions=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.Trace=t.NullLogger=t.ProgressType=t.ProgressToken=void 0;const r=n(30147),i=n(67574),o=n(20839),s=n(96184),a=n(27135),c=n(13881);var l,u,d,p,h,f,g,m,y,v,b,w,C,S,_;!function(e){e.type=new o.NotificationType("$/cancelRequest")}(l||(l={})),function(e){e.is=function(e){return"string"==typeof e||"number"==typeof e}}(u=t.ProgressToken||(t.ProgressToken={})),function(e){e.type=new o.NotificationType("$/progress")}(d||(d={})),t.ProgressType=class{constructor(){}},function(e){e.is=function(e){return i.func(e)}}(p||(p={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Compact=2]="Compact",e[e.Verbose=3]="Verbose"}(h=t.Trace||(t.Trace={})),(_=t.TraceValues||(t.TraceValues={})).Off="off",_.Messages="messages",_.Compact="compact",_.Verbose="verbose",function(e){e.fromString=function(t){if(!i.string(t))return e.Off;switch(t=t.toLowerCase()){case"off":default:return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Compact:return"compact";case e.Verbose:return"verbose";default:return"off"}}}(h=t.Trace||(t.Trace={})),function(e){e.Text="text",e.JSON="json"}(t.TraceFormat||(t.TraceFormat={})),function(e){e.fromString=function(t){return i.string(t)&&"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(f=t.TraceFormat||(t.TraceFormat={})),function(e){e.type=new o.NotificationType("$/setTrace")}(g=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new o.NotificationType("$/logTrace")}(m=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(y=t.ConnectionErrors||(t.ConnectionErrors={}));class k extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,k.prototype)}}t.ConnectionError=k,function(e){e.is=function(e){const t=e;return t&&i.func(t.cancelUndispatched)}}(v=t.ConnectionStrategy||(t.ConnectionStrategy={})),function(e){e.Message=Object.freeze({createCancellationTokenSource:e=>new c.CancellationTokenSource}),e.is=function(e){const t=e;return t&&i.func(t.createCancellationTokenSource)}}(b=t.CancellationReceiverStrategy||(t.CancellationReceiverStrategy={})),function(e){e.Message=Object.freeze({sendCancellation:(e,t)=>e.sendNotification(l.type,{id:t}),cleanup(e){}}),e.is=function(e){const t=e;return t&&i.func(t.sendCancellation)&&i.func(t.cleanup)}}(w=t.CancellationSenderStrategy||(t.CancellationSenderStrategy={})),function(e){e.Message=Object.freeze({receiver:b.Message,sender:w.Message}),e.is=function(e){const t=e;return t&&b.is(t.receiver)&&w.is(t.sender)}}(C=t.CancellationStrategy||(t.CancellationStrategy={})),(t.ConnectionOptions||(t.ConnectionOptions={})).is=function(e){const t=e;return t&&(C.is(t.cancellationStrategy)||v.is(t.connectionStrategy))},function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(S||(S={})),t.createMessageConnection=function(e,n,v,b){const w=void 0!==v?v:t.NullLogger;let _=0,P=0,I=0;const E="2.0";let T;const D=new Map;let x;const R=new Map,j=new Map;let N,M,O=new s.LinkedMap,A=new Map,L=new Set,F=new Map,U=h.Off,K=f.Text,W=S.New;const V=new a.Emitter,H=new a.Emitter,B=new a.Emitter,q=new a.Emitter,J=new a.Emitter,$=b&&b.cancellationStrategy?b.cancellationStrategy:C.Message;function G(e){if(null===e)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+e.toString()}function z(e){}function Y(){return W===S.Listening}function Q(){return W===S.Closed}function X(){return W===S.Disposed}function Z(){W!==S.New&&W!==S.Listening||(W=S.Closed,H.fire(void 0))}function ee(){N||0===O.size||(N=(0,r.default)().timer.setImmediate((()=>{N=void 0,function(){if(0===O.size)return;const e=O.shift();try{o.Message.isRequest(e)?function(e){if(X())return;function t(t,r,i){const s={jsonrpc:E,id:e.id};t instanceof o.ResponseError?s.error=t.toJson():s.result=void 0===t?null:t,re(s,r,i),n.write(s).catch((()=>w.error("Sending response failed.")))}function r(t,r,i){const o={jsonrpc:E,id:e.id,error:t.toJson()};re(o,r,i),n.write(o).catch((()=>w.error("Sending response failed.")))}!function(e){if(U!==h.Off&&M)if(K===f.Text){let t;U!==h.Verbose&&U!==h.Compact||!e.params||(t=`Params: ${ne(e.params)}\n\n`),M.log(`Received request '${e.method} - (${e.id})'.`,t)}else oe("receive-request",e)}(e);const s=D.get(e.method);let a,c;s&&(a=s.type,c=s.handler);const l=Date.now();if(c||T){const s=e.id??String(Date.now()),u=$.receiver.createCancellationTokenSource(s);null!==e.id&&L.has(e.id)&&u.cancel(),null!==e.id&&F.set(s,u);try{let d;if(c)if(void 0===e.params){if(void 0!==a&&0!==a.numberOfParams)return void r(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines ${a.numberOfParams} params but received none.`),e.method,l);d=c(u.token)}else if(Array.isArray(e.params)){if(void 0!==a&&a.parameterStructures===o.ParameterStructures.byName)return void r(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by name but received parameters by position`),e.method,l);d=c(...e.params,u.token)}else{if(void 0!==a&&a.parameterStructures===o.ParameterStructures.byPosition)return void r(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by position but received parameters by name`),e.method,l);d=c(e.params,u.token)}else T&&(d=T(e.method,e.params,u.token));const p=d;d?p.then?p.then((n=>{F.delete(s),t(n,e.method,l)}),(t=>{F.delete(s),t instanceof o.ResponseError?r(t,e.method,l):t&&i.string(t.message)?r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,l):r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)})):(F.delete(s),t(d,e.method,l)):(F.delete(s),function(t,r,i){void 0===t&&(t=null);const o={jsonrpc:E,id:e.id,result:t};re(o,r,i),n.write(o).catch((()=>w.error("Sending response failed.")))}(d,e.method,l))}catch(n){F.delete(s),n instanceof o.ResponseError?t(n,e.method,l):n&&i.string(n.message)?r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${n.message}`),e.method,l):r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}}else r(new o.ResponseError(o.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,l)}(e):o.Message.isNotification(e)?function(e){if(X())return;let t,n;if(e.method===l.type.method){const t=e.params.id;return L.delete(t),void ie(e)}{const r=R.get(e.method);r&&(n=r.handler,t=r.type)}if(n||x)try{if(ie(e),n)if(void 0===e.params)void 0!==t&&0!==t.numberOfParams&&t.parameterStructures!==o.ParameterStructures.byName&&w.error(`Notification ${e.method} defines ${t.numberOfParams} params but received none.`),n();else if(Array.isArray(e.params)){const r=e.params;e.method===d.type.method&&2===r.length&&u.is(r[0])?n({token:r[0],value:r[1]}):(void 0!==t&&(t.parameterStructures===o.ParameterStructures.byName&&w.error(`Notification ${e.method} defines parameters by name but received parameters by position`),t.numberOfParams!==e.params.length&&w.error(`Notification ${e.method} defines ${t.numberOfParams} params but received ${r.length} arguments`)),n(...r))}else void 0!==t&&t.parameterStructures===o.ParameterStructures.byPosition&&w.error(`Notification ${e.method} defines parameters by position but received parameters by name`),n(e.params);else x&&x(e.method,e.params)}catch(t){t.message?w.error(`Notification handler '${e.method}' failed with message: ${t.message}`):w.error(`Notification handler '${e.method}' failed unexpectedly.`)}else B.fire(e)}(e):o.Message.isResponse(e)?function(e){if(!X())if(null===e.id)e.error?w.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):w.error("Received response message without id. No further error information provided.");else{const t=e.id,n=A.get(t);if(function(e,t){if(U!==h.Off&&M)if(K===f.Text){let n;if(U!==h.Verbose&&U!==h.Compact||(e.error&&e.error.data?n=`Error data: ${ne(e.error.data)}\n\n`:e.result?n=`Result: ${ne(e.result)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){const r=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";M.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${r}`,n)}else M.log(`Received response ${e.id} without active response promise.`,n)}else oe("receive-response",e)}(e,n),void 0!==n){A.delete(t);try{if(e.error){const t=e.error;n.reject(new o.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");n.resolve(e.result)}}catch(e){e.message?w.error(`Response handler '${n.method}' failed with message: ${e.message}`):w.error(`Response handler '${n.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void w.error("Received empty message.");w.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);const t=e;if(i.string(t.id)||i.number(t.id)){const e=t.id,n=A.get(e);n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{ee()}}()})))}e.onClose(Z),e.onError((function(e){V.fire([e,void 0,void 0])})),n.onClose(Z),n.onError((function(e){V.fire(e)}));const te=e=>{try{if(o.Message.isNotification(e)&&e.method===l.type.method){const t=e.params.id,r=G(t),i=O.get(r);if(o.Message.isRequest(i)){const o=b?.connectionStrategy,s=o&&o.cancelUndispatched?o.cancelUndispatched(i,z):void 0;if(s&&(void 0!==s.error||void 0!==s.result))return O.delete(r),F.delete(t),s.id=i.id,re(s,e.method,Date.now()),void n.write(s).catch((()=>w.error("Sending response for canceled message failed.")))}const s=F.get(t);if(void 0!==s)return s.cancel(),void ie(e);L.add(t)}!function(e,t){var n;o.Message.isRequest(t)?e.set(G(t.id),t):o.Message.isResponse(t)?e.set(null===(n=t.id)?"res-unknown-"+(++I).toString():"res-"+n.toString(),t):e.set("not-"+(++P).toString(),t)}(O,e)}finally{ee()}};function ne(e){if(null!=e)switch(U){case h.Verbose:return JSON.stringify(e,null,4);case h.Compact:return JSON.stringify(e);default:return}}function re(e,t,n){if(U!==h.Off&&M)if(K===f.Text){let r;U!==h.Verbose&&U!==h.Compact||(e.error&&e.error.data?r=`Error data: ${ne(e.error.data)}\n\n`:e.result?r=`Result: ${ne(e.result)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),M.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,r)}else oe("send-response",e)}function ie(e){if(U!==h.Off&&M&&e.method!==m.type.method)if(K===f.Text){let t;U!==h.Verbose&&U!==h.Compact||(t=e.params?`Params: ${ne(e.params)}\n\n`:"No parameters provided.\n\n"),M.log(`Received notification '${e.method}'.`,t)}else oe("receive-notification",e)}function oe(e,t){if(!M||U===h.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};M.log(n)}function se(){if(Q())throw new k(y.Closed,"Connection is closed.");if(X())throw new k(y.Disposed,"Connection is disposed.")}function ae(e){return void 0===e?null:e}function ce(e){return null===e?void 0:e}function le(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function ue(e,t){switch(e){case o.ParameterStructures.auto:return le(t)?ce(t):[ae(t)];case o.ParameterStructures.byName:if(!le(t))throw new Error("Received parameters by name but param is not an object literal.");return ce(t);case o.ParameterStructures.byPosition:return[ae(t)];default:throw new Error(`Unknown parameter structure ${e.toString()}`)}}function de(e,t){let n;const r=e.numberOfParams;switch(r){case 0:n=void 0;break;case 1:n=ue(e.parameterStructures,t[0]);break;default:n=[];for(let e=0;e<t.length&&e<r;e++)n.push(ae(t[e]));if(t.length<r)for(let e=t.length;e<r;e++)n.push(null)}return n}const pe={sendNotification:(e,...t)=>{let r,s;if(se(),i.string(e)){r=e;const n=t[0];let i=0,a=o.ParameterStructures.auto;o.ParameterStructures.is(n)&&(i=1,a=n);let c=t.length;const l=c-i;switch(l){case 0:s=void 0;break;case 1:s=ue(a,t[i]);break;default:if(a===o.ParameterStructures.byName)throw new Error(`Received ${l} parameters for 'by Name' notification parameter structure.`);s=t.slice(i,c).map((e=>ae(e)))}}else{const n=t;r=e.method,s=de(e,n)}const a={jsonrpc:E,method:r,params:s};return function(e){if(U!==h.Off&&M)if(K===f.Text){let t;U!==h.Verbose&&U!==h.Compact||(t=e.params?`Params: ${ne(e.params)}\n\n`:"No parameters provided.\n\n"),M.log(`Sending notification '${e.method}'.`,t)}else oe("send-notification",e)}(a),n.write(a).catch((()=>w.error("Sending notification failed.")))},onNotification:(e,t)=>{let n;return se(),i.func(e)?x=e:t&&(i.string(e)?(n=e,R.set(e,{type:void 0,handler:t})):(n=e.method,R.set(e.method,{type:e,handler:t}))),{dispose:()=>{void 0!==n?R.delete(n):x=void 0}}},onProgress:(e,t,n)=>{if(j.has(t))throw new Error(`Progress handler for token ${t} already registered`);return j.set(t,n),{dispose:()=>{j.delete(t)}}},sendProgress:(e,t,n)=>pe.sendNotification(d.type,{token:t,value:n}),onUnhandledProgress:q.event,sendRequest:(e,...t)=>{let r,s,a;if(se(),function(){if(!Y())throw new Error("Call listen() first.")}(),i.string(e)){r=e;const n=t[0],i=t[t.length-1];let l=0,u=o.ParameterStructures.auto;o.ParameterStructures.is(n)&&(l=1,u=n);let d=t.length;c.CancellationToken.is(i)&&(d-=1,a=i);const p=d-l;switch(p){case 0:s=void 0;break;case 1:s=ue(u,t[l]);break;default:if(u===o.ParameterStructures.byName)throw new Error(`Received ${p} parameters for 'by Name' request parameter structure.`);s=t.slice(l,d).map((e=>ae(e)))}}else{const n=t;r=e.method,s=de(e,n);const i=e.numberOfParams;a=c.CancellationToken.is(n[i])?n[i]:void 0}const l=_++;let u;return a&&(u=a.onCancellationRequested((()=>{const e=$.sender.sendCancellation(pe,l);return void 0===e?(w.log(`Received no promise from cancellation strategy when cancelling id ${l}`),Promise.resolve()):e.catch((()=>{w.log(`Sending cancellation messages for id ${l} failed`)}))}))),new Promise(((e,t)=>{const i={jsonrpc:E,id:l,method:r,params:s};let a={method:r,timerStart:Date.now(),resolve:t=>{e(t),$.sender.cleanup(l),u?.dispose()},reject:e=>{t(e),$.sender.cleanup(l),u?.dispose()}};!function(e){if(U!==h.Off&&M)if(K===f.Text){let t;U!==h.Verbose&&U!==h.Compact||!e.params||(t=`Params: ${ne(e.params)}\n\n`),M.log(`Sending request '${e.method} - (${e.id})'.`,t)}else oe("send-request",e)}(i);try{n.write(i).catch((()=>w.error("Sending request failed.")))}catch(e){a.reject(new o.ResponseError(o.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),a=null}a&&A.set(l,a)}))},onRequest:(e,t)=>{se();let n=null;return p.is(e)?(n=void 0,T=e):i.string(e)?(n=null,void 0!==t&&(n=e,D.set(e,{handler:t,type:void 0}))):void 0!==t&&(n=e.method,D.set(e.method,{type:e,handler:t})),{dispose:()=>{null!==n&&(void 0!==n?D.delete(n):T=void 0)}}},hasPendingResponse:()=>A.size>0,trace:async(e,t,n)=>{let r=!1,o=f.Text;void 0!==n&&(i.boolean(n)?r=n:(r=n.sendNotification||!1,o=n.traceFormat||f.Text)),U=e,K=o,M=U===h.Off?void 0:t,!r||Q()||X()||await pe.sendNotification(g.type,{value:h.toString(e)})},onError:V.event,onClose:H.event,onUnhandledNotification:B.event,onDispose:J.event,end:()=>{n.end()},dispose:()=>{if(X())return;W=S.Disposed,J.fire(void 0);const t=new o.ResponseError(o.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const e of A.values())e.reject(t);A=new Map,F=new Map,L=new Set,O=new s.LinkedMap,i.func(n.dispose)&&n.dispose(),i.func(e.dispose)&&e.dispose()},listen:()=>{se(),function(){if(Y())throw new k(y.AlreadyListening,"Connection is already listening")}(),W=S.Listening,e.listen(te)},inspect:()=>{(0,r.default)().console.log("inspect")}};return pe.onNotification(m.type,(e=>{if(U===h.Off||!M)return;const t=U===h.Verbose||U===h.Compact;M.log(e.message,t?e.verbose:void 0)})),pe.onNotification(d.type,(e=>{const t=j.get(e.token);t?t(e.value):q.fire(e)})),pe}},83911:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Disposable=void 0,(t.Disposable||(t.Disposable={})).create=function(e){return{dispose:e}}},27135:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=t.Event=void 0;const r=n(30147);!function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class i{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let n=!1;for(let r=0,i=this._callbacks.length;r<i;r++)if(this._callbacks[r]===e){if(this._contexts[r]===t)return this._callbacks.splice(r,1),void this._contexts.splice(r,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];const t=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,s=n.length;o<s;o++)try{t.push(n[o].apply(i[o],e))}catch(e){(0,r.default)().console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class o{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,n)=>{this._callbacks||(this._callbacks=new i),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);const r={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),r.dispose=o._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(r),r}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}t.Emitter=o,o._noop=function(){}},67574:(e,t)=>{"use strict";function n(e){return"string"==typeof e||e instanceof String}function r(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=r,t.stringArray=function(e){return r(e)&&e.every((e=>n(e)))}},96184:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=t.LinkedMap=t.Touch=void 0,function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last}(r=t.Touch||(t.Touch={}));class i{constructor(){this[n]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=r.None){const n=this._map.get(e);if(n)return t!==r.None&&this.touch(n,t),n.value}set(e,t,n=r.None){let i=this._map.get(e);if(i)i.value=t,n!==r.None&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case r.None:this.addItemLast(i);break;case r.First:this.addItemFirst(i);break;case r.Last:default:this.addItemLast(i)}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let r=this._head;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.key,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}values(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.value,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}entries(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:[t.key,t.value],done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}[(n=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===r.First||t===r.Last)if(t===r.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===r.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach(((t,n)=>{e.push([n,t])})),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}t.LinkedMap=i,t.LRUCache=class extends i{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=r.AsNew){return super.get(e,t)}peek(e){return super.get(e,r.None)}set(e,t){return super.set(e,t,r.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}},75530:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractMessageBuffer=void 0,t.AbstractMessageBuffer=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){const t="string"==typeof e?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(){if(0===this._chunks.length)return;let e=0,t=0,n=0,r=0;e:for(;t<this._chunks.length;){const i=this._chunks[t];for(n=0;n<i.length;){switch(i[n]){case 13:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case 10:switch(e){case 1:e=2;break;case 3:e=4,n++;break e;default:e=0}break;default:e=0}n++}r+=i.byteLength,t++}if(4!==e)return;const i=this._read(r+n),o=new Map,s=this.toString(i,"ascii").split("\r\n");if(s.length<2)return o;for(let e=0;e<s.length-2;e++){const t=s[e],n=t.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");const r=t.substr(0,n),i=t.substr(n+1).trim();o.set(r,i)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(0===e)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){const t=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(t)}if(this._chunks[0].byteLength>e){const t=this._chunks[0],n=this.asNative(t,e);return this._chunks[0]=t.slice(e),this._totalLength-=e,n}const t=this.allocNative(e);let n=0;for(;e>0;){const r=this._chunks[0];if(r.byteLength>e){const i=r.slice(0,e);t.set(i,n),n+=e,this._chunks[0]=r.slice(e),this._totalLength-=e,e-=e}else t.set(r,n),n+=r.byteLength,this._chunks.shift(),this._totalLength-=r.byteLength,e-=r.byteLength}return t}}},56525:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=void 0;const r=n(30147),i=n(67574),o=n(27135);var s;(t.MessageReader||(t.MessageReader={})).is=function(e){let t=e;return t&&i.func(t.listen)&&i.func(t.dispose)&&i.func(t.onError)&&i.func(t.onClose)&&i.func(t.onPartialMessage)};class a{constructor(){this.errorEmitter=new o.Emitter,this.closeEmitter=new o.Emitter,this.partialMessageEmitter=new o.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=a,function(e){e.fromOptions=function(e){let t,n;const i=new Map;let o;const s=new Map;if(void 0===e||"string"==typeof e)t=e??"utf-8";else{if(t=e.charset??"utf-8",void 0!==e.contentDecoder&&(n=e.contentDecoder,i.set(n.name,n)),void 0!==e.contentDecoders)for(const t of e.contentDecoders)i.set(t.name,t);if(void 0!==e.contentTypeDecoder&&(o=e.contentTypeDecoder,s.set(o.name,o)),void 0!==e.contentTypeDecoders)for(const t of e.contentTypeDecoders)s.set(t.name,t)}return void 0===o&&(o=(0,r.default)().applicationJson.decoder,s.set(o.name,o)),{charset:t,contentDecoder:n,contentDecoders:i,contentTypeDecoder:o,contentTypeDecoders:s}}}(s||(s={})),t.ReadableStreamMessageReader=class extends a{constructor(e,t){super(),this.readable=e,this.options=s.fromOptions(t),this.buffer=(0,r.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;const t=this.readable.onData((e=>{this.onData(e)}));return this.readable.onError((e=>this.fireError(e))),this.readable.onClose((()=>this.fireClose())),t}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){const e=this.buffer.tryReadHeaders();if(!e)return;const t=e.get("Content-Length");if(!t)throw new Error("Header must provide a Content-Length property.");const n=parseInt(t);if(isNaN(n))throw new Error("Content-Length value must be a number.");this.nextMessageLength=n}const e=this.buffer.tryReadBody(this.nextMessageLength);if(void 0===e)return void this.setPartialMessageTimer();let t;this.clearPartialMessageTimer(),this.nextMessageLength=-1,t=void 0!==this.options.contentDecoder?this.options.contentDecoder.decode(e):Promise.resolve(e),t.then((e=>{this.options.contentTypeDecoder.decode(e,this.options).then((e=>{this.callback(e)}),(e=>{this.fireError(e)}))}),(e=>{this.fireError(e)}))}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=(0,r.default)().timer.setTimeout(((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())}),this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}},96654:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=void 0;const r=n(30147),i=n(67574),o=n(80142),s=n(27135);var a;(t.MessageWriter||(t.MessageWriter={})).is=function(e){let t=e;return t&&i.func(t.dispose)&&i.func(t.onClose)&&i.func(t.onError)&&i.func(t.write)};class c{constructor(){this.errorEmitter=new s.Emitter,this.closeEmitter=new s.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=c,function(e){e.fromOptions=function(e){return void 0===e||"string"==typeof e?{charset:e??"utf-8",contentTypeEncoder:(0,r.default)().applicationJson.encoder}:{charset:e.charset??"utf-8",contentEncoder:e.contentEncoder,contentTypeEncoder:e.contentTypeEncoder??(0,r.default)().applicationJson.encoder}}}(a||(a={})),t.WriteableStreamMessageWriter=class extends c{constructor(e,t){super(),this.writable=e,this.options=a.fromOptions(t),this.errorCount=0,this.writeSemaphore=new o.Semaphore(1),this.writable.onError((e=>this.fireError(e))),this.writable.onClose((()=>this.fireClose()))}async write(e){return this.writeSemaphore.lock((async()=>this.options.contentTypeEncoder.encode(e,this.options).then((e=>void 0!==this.options.contentEncoder?this.options.contentEncoder.encode(e):e)).then((t=>{const n=[];return n.push("Content-Length: ",t.byteLength.toString(),"\r\n"),n.push("\r\n"),this.doWrite(e,n,t)}),(e=>{throw this.fireError(e),e}))))}async doWrite(e,t,n){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(n)}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}}},20839:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType=t.RequestType0=t.AbstractMessageSignature=t.ParameterStructures=t.ResponseError=t.ErrorCodes=void 0;const r=n(67574);var i,o;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3}(i=t.ErrorCodes||(t.ErrorCodes={}));class s extends Error{constructor(e,t,n){super(t),this.code=r.number(e)?e:i.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,s.prototype)}toJson(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),e}}t.ResponseError=s;class a{constructor(e){this.kind=e}static is(e){return e===a.auto||e===a.byName||e===a.byPosition}toString(){return this.kind}}t.ParameterStructures=a,a.auto=new a("auto"),a.byPosition=new a("byPosition"),a.byName=new a("byName");class c{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return a.auto}}t.AbstractMessageSignature=c,t.RequestType0=class extends c{constructor(e){super(e,0)}},t.RequestType=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.RequestType1=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.RequestType2=class extends c{constructor(e){super(e,2)}},t.RequestType3=class extends c{constructor(e){super(e,3)}},t.RequestType4=class extends c{constructor(e){super(e,4)}},t.RequestType5=class extends c{constructor(e){super(e,5)}},t.RequestType6=class extends c{constructor(e){super(e,6)}},t.RequestType7=class extends c{constructor(e){super(e,7)}},t.RequestType8=class extends c{constructor(e){super(e,8)}},t.RequestType9=class extends c{constructor(e){super(e,9)}},t.NotificationType=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.NotificationType0=class extends c{constructor(e){super(e,0)}},t.NotificationType1=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.NotificationType2=class extends c{constructor(e){super(e,2)}},t.NotificationType3=class extends c{constructor(e){super(e,3)}},t.NotificationType4=class extends c{constructor(e){super(e,4)}},t.NotificationType5=class extends c{constructor(e){super(e,5)}},t.NotificationType6=class extends c{constructor(e){super(e,6)}},t.NotificationType7=class extends c{constructor(e){super(e,7)}},t.NotificationType8=class extends c{constructor(e){super(e,8)}},t.NotificationType9=class extends c{constructor(e){super(e,9)}},(o=t.Message||(t.Message={})).isRequest=function(e){const t=e;return t&&r.string(t.method)&&(r.string(t.id)||r.number(t.id))},o.isNotification=function(e){const t=e;return t&&r.string(t.method)&&void 0===e.id},o.isResponse=function(e){const t=e;return t&&(void 0!==t.result||!!t.error)&&(r.string(t.id)||r.number(t.id)||null===t.id)}},30147:(e,t)=>{"use strict";let n;function r(){if(void 0===n)throw new Error("No runtime abstraction layer installed");return n}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");n=e}}(r||(r={})),t.default=r},80142:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Semaphore=void 0;const r=n(30147);t.Semaphore=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise(((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()}))}get active(){return this._active}runNext(){0!==this._waiting.length&&this._active!==this._capacity&&(0,r.default)().timer.setImmediate((()=>this.doRunNext()))}doRunNext(){if(0===this._waiting.length||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const t=e.thunk();t instanceof Promise?t.then((t=>{this._active--,e.resolve(t),this.runNext()}),(t=>{this._active--,e.reject(t),this.runNext()})):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}}},10152:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=void 0;const o=n(81169);i(n(81169),t),i(n(51661),t),t.createProtocolConnection=function(e,t,n,r){return(0,o.createMessageConnection)(e,t,n,r)}},51661:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.LSPErrorCodes=t.createProtocolConnection=void 0,i(n(39054),t),i(n(91674),t),i(n(66140),t),i(n(10542),t);var o,s=n(73767);Object.defineProperty(t,"createProtocolConnection",{enumerable:!0,get:function(){return s.createProtocolConnection}}),(o=t.LSPErrorCodes||(t.LSPErrorCodes={})).lspReservedErrorRangeStart=-32899,o.RequestFailed=-32803,o.ServerCancelled=-32802,o.ContentModified=-32801,o.RequestCancelled=-32800,o.lspReservedErrorRangeEnd=-32800},73767:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=void 0;const r=n(39054);t.createProtocolConnection=function(e,t,n,i){return r.ConnectionStrategy.is(i)&&(i={connectionStrategy:i}),(0,r.createMessageConnection)(e,t,n,i)}},66140:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolNotificationType=t.ProtocolNotificationType0=t.ProtocolRequestType=t.ProtocolRequestType0=t.RegistrationType=void 0;const r=n(39054);t.RegistrationType=class{constructor(e){this.method=e}};class i extends r.RequestType0{constructor(e){super(e)}}t.ProtocolRequestType0=i;class o extends r.RequestType{constructor(e){super(e,r.ParameterStructures.byName)}}t.ProtocolRequestType=o;class s extends r.NotificationType0{constructor(e){super(e)}}t.ProtocolNotificationType0=s;class a extends r.NotificationType{constructor(e){super(e,r.ParameterStructures.byName)}}t.ProtocolNotificationType=a},82918:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.CallHierarchyPrepareRequest=void 0;const r=n(66140);var i,o,s;(s=t.CallHierarchyPrepareRequest||(t.CallHierarchyPrepareRequest={})).method="textDocument/prepareCallHierarchy",s.type=new r.ProtocolRequestType(s.method),(o=t.CallHierarchyIncomingCallsRequest||(t.CallHierarchyIncomingCallsRequest={})).method="callHierarchy/incomingCalls",o.type=new r.ProtocolRequestType(o.method),(i=t.CallHierarchyOutgoingCallsRequest||(t.CallHierarchyOutgoingCallsRequest={})).method="callHierarchy/outgoingCalls",i.type=new r.ProtocolRequestType(i.method)},79891:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorPresentationRequest=t.DocumentColorRequest=void 0;const r=n(66140);var i;(i=t.DocumentColorRequest||(t.DocumentColorRequest={})).method="textDocument/documentColor",i.type=new r.ProtocolRequestType(i.method),(t.ColorPresentationRequest||(t.ColorPresentationRequest={})).type=new r.ProtocolRequestType("textDocument/colorPresentation")},85934:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationRequest=void 0;const r=n(66140);(t.ConfigurationRequest||(t.ConfigurationRequest={})).type=new r.ProtocolRequestType("workspace/configuration")},40764:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeclarationRequest=void 0;const r=n(66140);var i;(i=t.DeclarationRequest||(t.DeclarationRequest={})).method="textDocument/declaration",i.type=new r.ProtocolRequestType(i.method)},79824:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticRefreshRequest=t.WorkspaceDiagnosticRequest=t.DocumentDiagnosticRequest=t.DocumentDiagnosticReportKind=t.DiagnosticServerCancellationData=void 0;const r=n(39054),i=n(69533),o=n(66140);var s,a,c,l;(t.DiagnosticServerCancellationData||(t.DiagnosticServerCancellationData={})).is=function(e){const t=e;return t&&i.boolean(t.retriggerRequest)},(l=t.DocumentDiagnosticReportKind||(t.DocumentDiagnosticReportKind={})).Full="full",l.Unchanged="unchanged",(c=t.DocumentDiagnosticRequest||(t.DocumentDiagnosticRequest={})).method="textDocument/diagnostic",c.type=new o.ProtocolRequestType(c.method),c.partialResult=new r.ProgressType,(a=t.WorkspaceDiagnosticRequest||(t.WorkspaceDiagnosticRequest={})).method="workspace/diagnostic",a.type=new o.ProtocolRequestType(a.method),a.partialResult=new r.ProgressType,(s=t.DiagnosticRefreshRequest||(t.DiagnosticRefreshRequest={})).method="workspace/diagnostic/refresh",s.type=new o.ProtocolRequestType0(s.method)},37846:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.DidRenameFilesNotification=t.WillRenameFilesRequest=t.DidCreateFilesNotification=t.WillCreateFilesRequest=t.FileOperationPatternKind=void 0;const r=n(66140);var i,o,s,a,c,l,u;(u=t.FileOperationPatternKind||(t.FileOperationPatternKind={})).file="file",u.folder="folder",(l=t.WillCreateFilesRequest||(t.WillCreateFilesRequest={})).method="workspace/willCreateFiles",l.type=new r.ProtocolRequestType(l.method),(c=t.DidCreateFilesNotification||(t.DidCreateFilesNotification={})).method="workspace/didCreateFiles",c.type=new r.ProtocolNotificationType(c.method),(a=t.WillRenameFilesRequest||(t.WillRenameFilesRequest={})).method="workspace/willRenameFiles",a.type=new r.ProtocolRequestType(a.method),(s=t.DidRenameFilesNotification||(t.DidRenameFilesNotification={})).method="workspace/didRenameFiles",s.type=new r.ProtocolNotificationType(s.method),(o=t.DidDeleteFilesNotification||(t.DidDeleteFilesNotification={})).method="workspace/didDeleteFiles",o.type=new r.ProtocolNotificationType(o.method),(i=t.WillDeleteFilesRequest||(t.WillDeleteFilesRequest={})).method="workspace/willDeleteFiles",i.type=new r.ProtocolRequestType(i.method)},13394:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FoldingRangeRequest=void 0;const r=n(66140);var i;(i=t.FoldingRangeRequest||(t.FoldingRangeRequest={})).method="textDocument/foldingRange",i.type=new r.ProtocolRequestType(i.method)},82122:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImplementationRequest=void 0;const r=n(66140);var i;(i=t.ImplementationRequest||(t.ImplementationRequest={})).method="textDocument/implementation",i.type=new r.ProtocolRequestType(i.method)},29999:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlayHintRefreshRequest=t.InlayHintResolveRequest=t.InlayHintRequest=void 0;const r=n(66140);var i,o,s;(s=t.InlayHintRequest||(t.InlayHintRequest={})).method="textDocument/inlayHint",s.type=new r.ProtocolRequestType(s.method),(o=t.InlayHintResolveRequest||(t.InlayHintResolveRequest={})).method="inlayHint/resolve",o.type=new r.ProtocolRequestType(o.method),(i=t.InlayHintRefreshRequest||(t.InlayHintRefreshRequest={})).method="workspace/inlayHint/refresh",i.type=new r.ProtocolRequestType0(i.method)},55246:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineValueRefreshRequest=t.InlineValueRequest=void 0;const r=n(66140);var i,o;(o=t.InlineValueRequest||(t.InlineValueRequest={})).method="textDocument/inlineValue",o.type=new r.ProtocolRequestType(o.method),(i=t.InlineValueRefreshRequest||(t.InlineValueRefreshRequest={})).method="workspace/inlineValue/refresh",i.type=new r.ProtocolRequestType0(i.method)},10542:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceSymbolRequest=t.CodeActionResolveRequest=t.CodeActionRequest=t.DocumentSymbolRequest=t.DocumentHighlightRequest=t.ReferencesRequest=t.DefinitionRequest=t.SignatureHelpRequest=t.SignatureHelpTriggerKind=t.HoverRequest=t.CompletionResolveRequest=t.CompletionRequest=t.CompletionTriggerKind=t.PublishDiagnosticsNotification=t.WatchKind=t.RelativePattern=t.FileChangeType=t.DidChangeWatchedFilesNotification=t.WillSaveTextDocumentWaitUntilRequest=t.WillSaveTextDocumentNotification=t.TextDocumentSaveReason=t.DidSaveTextDocumentNotification=t.DidCloseTextDocumentNotification=t.DidChangeTextDocumentNotification=t.TextDocumentContentChangeEvent=t.DidOpenTextDocumentNotification=t.TextDocumentSyncKind=t.TelemetryEventNotification=t.LogMessageNotification=t.ShowMessageRequest=t.ShowMessageNotification=t.MessageType=t.DidChangeConfigurationNotification=t.ExitNotification=t.ShutdownRequest=t.InitializedNotification=t.InitializeErrorCodes=t.InitializeRequest=t.WorkDoneProgressOptions=t.TextDocumentRegistrationOptions=t.StaticRegistrationOptions=t.PositionEncodingKind=t.FailureHandlingKind=t.ResourceOperationKind=t.UnregistrationRequest=t.RegistrationRequest=t.DocumentSelector=t.NotebookCellTextDocumentFilter=t.NotebookDocumentFilter=t.TextDocumentFilter=void 0,t.TypeHierarchySubtypesRequest=t.TypeHierarchyPrepareRequest=t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.WillRenameFilesRequest=t.DidRenameFilesNotification=t.WillCreateFilesRequest=t.DidCreateFilesNotification=t.FileOperationPatternKind=t.LinkedEditingRangeRequest=t.ShowDocumentRequest=t.SemanticTokensRegistrationType=t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.TokenFormat=t.CallHierarchyPrepareRequest=t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=t.SelectionRangeRequest=t.DeclarationRequest=t.FoldingRangeRequest=t.ColorPresentationRequest=t.DocumentColorRequest=t.ConfigurationRequest=t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=t.TypeDefinitionRequest=t.ImplementationRequest=t.ApplyWorkspaceEditRequest=t.ExecuteCommandRequest=t.PrepareRenameRequest=t.RenameRequest=t.PrepareSupportDefaultBehavior=t.DocumentOnTypeFormattingRequest=t.DocumentRangeFormattingRequest=t.DocumentFormattingRequest=t.DocumentLinkResolveRequest=t.DocumentLinkRequest=t.CodeLensRefreshRequest=t.CodeLensResolveRequest=t.CodeLensRequest=t.WorkspaceSymbolResolveRequest=void 0,t.DidCloseNotebookDocumentNotification=t.DidSaveNotebookDocumentNotification=t.DidChangeNotebookDocumentNotification=t.NotebookCellArrayChange=t.DidOpenNotebookDocumentNotification=t.NotebookDocumentSyncRegistrationType=t.NotebookDocument=t.NotebookCell=t.ExecutionSummary=t.NotebookCellKind=t.DiagnosticRefreshRequest=t.WorkspaceDiagnosticRequest=t.DocumentDiagnosticRequest=t.DocumentDiagnosticReportKind=t.DiagnosticServerCancellationData=t.InlayHintRefreshRequest=t.InlayHintResolveRequest=t.InlayHintRequest=t.InlineValueRefreshRequest=t.InlineValueRequest=t.TypeHierarchySupertypesRequest=void 0;const r=n(66140),i=n(91674),o=n(69533),s=n(82122);Object.defineProperty(t,"ImplementationRequest",{enumerable:!0,get:function(){return s.ImplementationRequest}});const a=n(71589);Object.defineProperty(t,"TypeDefinitionRequest",{enumerable:!0,get:function(){return a.TypeDefinitionRequest}});const c=n(98744);Object.defineProperty(t,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return c.WorkspaceFoldersRequest}}),Object.defineProperty(t,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return c.DidChangeWorkspaceFoldersNotification}});const l=n(85934);Object.defineProperty(t,"ConfigurationRequest",{enumerable:!0,get:function(){return l.ConfigurationRequest}});const u=n(79891);Object.defineProperty(t,"DocumentColorRequest",{enumerable:!0,get:function(){return u.DocumentColorRequest}}),Object.defineProperty(t,"ColorPresentationRequest",{enumerable:!0,get:function(){return u.ColorPresentationRequest}});const d=n(13394);Object.defineProperty(t,"FoldingRangeRequest",{enumerable:!0,get:function(){return d.FoldingRangeRequest}});const p=n(40764);Object.defineProperty(t,"DeclarationRequest",{enumerable:!0,get:function(){return p.DeclarationRequest}});const h=n(5206);Object.defineProperty(t,"SelectionRangeRequest",{enumerable:!0,get:function(){return h.SelectionRangeRequest}});const f=n(21862);Object.defineProperty(t,"WorkDoneProgress",{enumerable:!0,get:function(){return f.WorkDoneProgress}}),Object.defineProperty(t,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return f.WorkDoneProgressCreateRequest}}),Object.defineProperty(t,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return f.WorkDoneProgressCancelNotification}});const g=n(82918);Object.defineProperty(t,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return g.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(t,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return g.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(t,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return g.CallHierarchyPrepareRequest}});const m=n(39434);Object.defineProperty(t,"TokenFormat",{enumerable:!0,get:function(){return m.TokenFormat}}),Object.defineProperty(t,"SemanticTokensRequest",{enumerable:!0,get:function(){return m.SemanticTokensRequest}}),Object.defineProperty(t,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return m.SemanticTokensDeltaRequest}}),Object.defineProperty(t,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return m.SemanticTokensRangeRequest}}),Object.defineProperty(t,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return m.SemanticTokensRefreshRequest}}),Object.defineProperty(t,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return m.SemanticTokensRegistrationType}});const y=n(75726);Object.defineProperty(t,"ShowDocumentRequest",{enumerable:!0,get:function(){return y.ShowDocumentRequest}});const v=n(26305);Object.defineProperty(t,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return v.LinkedEditingRangeRequest}});const b=n(37846);Object.defineProperty(t,"FileOperationPatternKind",{enumerable:!0,get:function(){return b.FileOperationPatternKind}}),Object.defineProperty(t,"DidCreateFilesNotification",{enumerable:!0,get:function(){return b.DidCreateFilesNotification}}),Object.defineProperty(t,"WillCreateFilesRequest",{enumerable:!0,get:function(){return b.WillCreateFilesRequest}}),Object.defineProperty(t,"DidRenameFilesNotification",{enumerable:!0,get:function(){return b.DidRenameFilesNotification}}),Object.defineProperty(t,"WillRenameFilesRequest",{enumerable:!0,get:function(){return b.WillRenameFilesRequest}}),Object.defineProperty(t,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return b.DidDeleteFilesNotification}}),Object.defineProperty(t,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return b.WillDeleteFilesRequest}});const w=n(73443);Object.defineProperty(t,"UniquenessLevel",{enumerable:!0,get:function(){return w.UniquenessLevel}}),Object.defineProperty(t,"MonikerKind",{enumerable:!0,get:function(){return w.MonikerKind}}),Object.defineProperty(t,"MonikerRequest",{enumerable:!0,get:function(){return w.MonikerRequest}});const C=n(83693);Object.defineProperty(t,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return C.TypeHierarchyPrepareRequest}}),Object.defineProperty(t,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return C.TypeHierarchySubtypesRequest}}),Object.defineProperty(t,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return C.TypeHierarchySupertypesRequest}});const S=n(55246);Object.defineProperty(t,"InlineValueRequest",{enumerable:!0,get:function(){return S.InlineValueRequest}}),Object.defineProperty(t,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return S.InlineValueRefreshRequest}});const _=n(29999);Object.defineProperty(t,"InlayHintRequest",{enumerable:!0,get:function(){return _.InlayHintRequest}}),Object.defineProperty(t,"InlayHintResolveRequest",{enumerable:!0,get:function(){return _.InlayHintResolveRequest}}),Object.defineProperty(t,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return _.InlayHintRefreshRequest}});const k=n(79824);Object.defineProperty(t,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return k.DiagnosticServerCancellationData}}),Object.defineProperty(t,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return k.DocumentDiagnosticReportKind}}),Object.defineProperty(t,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return k.DocumentDiagnosticRequest}}),Object.defineProperty(t,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return k.WorkspaceDiagnosticRequest}}),Object.defineProperty(t,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return k.DiagnosticRefreshRequest}});const P=n(47169);var I,E,T,D,x,R,j,N,M,O,A,L,F,U,K,W,V,H,B,q,J,$,G,z,Y,Q,X,Z,ee,te,ne,re,ie,oe,se,ae,ce,le,ue,de,pe,he,fe,ge;Object.defineProperty(t,"NotebookCellKind",{enumerable:!0,get:function(){return P.NotebookCellKind}}),Object.defineProperty(t,"ExecutionSummary",{enumerable:!0,get:function(){return P.ExecutionSummary}}),Object.defineProperty(t,"NotebookCell",{enumerable:!0,get:function(){return P.NotebookCell}}),Object.defineProperty(t,"NotebookDocument",{enumerable:!0,get:function(){return P.NotebookDocument}}),Object.defineProperty(t,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return P.NotebookDocumentSyncRegistrationType}}),Object.defineProperty(t,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return P.DidOpenNotebookDocumentNotification}}),Object.defineProperty(t,"NotebookCellArrayChange",{enumerable:!0,get:function(){return P.NotebookCellArrayChange}}),Object.defineProperty(t,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return P.DidChangeNotebookDocumentNotification}}),Object.defineProperty(t,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return P.DidSaveNotebookDocumentNotification}}),Object.defineProperty(t,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return P.DidCloseNotebookDocumentNotification}}),function(e){e.is=function(e){const t=e;return o.string(t.language)||o.string(t.scheme)||o.string(t.pattern)}}(I=t.TextDocumentFilter||(t.TextDocumentFilter={})),function(e){e.is=function(e){const t=e;return o.objectLiteral(t)&&(o.string(t.notebookType)||o.string(t.scheme)||o.string(t.pattern))}}(E=t.NotebookDocumentFilter||(t.NotebookDocumentFilter={})),function(e){e.is=function(e){const t=e;return o.objectLiteral(t)&&(o.string(t.notebook)||E.is(t.notebook))&&(void 0===t.language||o.string(t.language))}}(T=t.NotebookCellTextDocumentFilter||(t.NotebookCellTextDocumentFilter={})),function(e){e.is=function(e){if(!Array.isArray(e))return!1;for(let t of e)if(!o.string(t)&&!I.is(t)&&!T.is(t))return!1;return!0}}(D=t.DocumentSelector||(t.DocumentSelector={})),(t.RegistrationRequest||(t.RegistrationRequest={})).type=new r.ProtocolRequestType("client/registerCapability"),(t.UnregistrationRequest||(t.UnregistrationRequest={})).type=new r.ProtocolRequestType("client/unregisterCapability"),(ge=t.ResourceOperationKind||(t.ResourceOperationKind={})).Create="create",ge.Rename="rename",ge.Delete="delete",(fe=t.FailureHandlingKind||(t.FailureHandlingKind={})).Abort="abort",fe.Transactional="transactional",fe.TextOnlyTransactional="textOnlyTransactional",fe.Undo="undo",(he=t.PositionEncodingKind||(t.PositionEncodingKind={})).UTF8="utf-8",he.UTF16="utf-16",he.UTF32="utf-32",(t.StaticRegistrationOptions||(t.StaticRegistrationOptions={})).hasId=function(e){const t=e;return t&&o.string(t.id)&&t.id.length>0},(t.TextDocumentRegistrationOptions||(t.TextDocumentRegistrationOptions={})).is=function(e){const t=e;return t&&(null===t.documentSelector||D.is(t.documentSelector))},(pe=t.WorkDoneProgressOptions||(t.WorkDoneProgressOptions={})).is=function(e){const t=e;return o.objectLiteral(t)&&(void 0===t.workDoneProgress||o.boolean(t.workDoneProgress))},pe.hasWorkDoneProgress=function(e){const t=e;return t&&o.boolean(t.workDoneProgress)},(t.InitializeRequest||(t.InitializeRequest={})).type=new r.ProtocolRequestType("initialize"),(t.InitializeErrorCodes||(t.InitializeErrorCodes={})).unknownProtocolVersion=1,(t.InitializedNotification||(t.InitializedNotification={})).type=new r.ProtocolNotificationType("initialized"),(t.ShutdownRequest||(t.ShutdownRequest={})).type=new r.ProtocolRequestType0("shutdown"),(t.ExitNotification||(t.ExitNotification={})).type=new r.ProtocolNotificationType0("exit"),(t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={})).type=new r.ProtocolNotificationType("workspace/didChangeConfiguration"),(de=t.MessageType||(t.MessageType={})).Error=1,de.Warning=2,de.Info=3,de.Log=4,(t.ShowMessageNotification||(t.ShowMessageNotification={})).type=new r.ProtocolNotificationType("window/showMessage"),(t.ShowMessageRequest||(t.ShowMessageRequest={})).type=new r.ProtocolRequestType("window/showMessageRequest"),(t.LogMessageNotification||(t.LogMessageNotification={})).type=new r.ProtocolNotificationType("window/logMessage"),(t.TelemetryEventNotification||(t.TelemetryEventNotification={})).type=new r.ProtocolNotificationType("telemetry/event"),(ue=t.TextDocumentSyncKind||(t.TextDocumentSyncKind={})).None=0,ue.Full=1,ue.Incremental=2,(le=t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={})).method="textDocument/didOpen",le.type=new r.ProtocolNotificationType(le.method),(ce=t.TextDocumentContentChangeEvent||(t.TextDocumentContentChangeEvent={})).isIncremental=function(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0!==t.range&&(void 0===t.rangeLength||"number"==typeof t.rangeLength)},ce.isFull=function(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0===t.range&&void 0===t.rangeLength},(ae=t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={})).method="textDocument/didChange",ae.type=new r.ProtocolNotificationType(ae.method),(se=t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={})).method="textDocument/didClose",se.type=new r.ProtocolNotificationType(se.method),(oe=t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={})).method="textDocument/didSave",oe.type=new r.ProtocolNotificationType(oe.method),(ie=t.TextDocumentSaveReason||(t.TextDocumentSaveReason={})).Manual=1,ie.AfterDelay=2,ie.FocusOut=3,(re=t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={})).method="textDocument/willSave",re.type=new r.ProtocolNotificationType(re.method),(ne=t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={})).method="textDocument/willSaveWaitUntil",ne.type=new r.ProtocolRequestType(ne.method),(t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={})).type=new r.ProtocolNotificationType("workspace/didChangeWatchedFiles"),(te=t.FileChangeType||(t.FileChangeType={})).Created=1,te.Changed=2,te.Deleted=3,(t.RelativePattern||(t.RelativePattern={})).is=function(e){const t=e;return o.objectLiteral(t)&&(i.URI.is(t.baseUri)||i.WorkspaceFolder.is(t.baseUri))&&o.string(t.pattern)},(ee=t.WatchKind||(t.WatchKind={})).Create=1,ee.Change=2,ee.Delete=4,(t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={})).type=new r.ProtocolNotificationType("textDocument/publishDiagnostics"),(Z=t.CompletionTriggerKind||(t.CompletionTriggerKind={})).Invoked=1,Z.TriggerCharacter=2,Z.TriggerForIncompleteCompletions=3,(X=t.CompletionRequest||(t.CompletionRequest={})).method="textDocument/completion",X.type=new r.ProtocolRequestType(X.method),(Q=t.CompletionResolveRequest||(t.CompletionResolveRequest={})).method="completionItem/resolve",Q.type=new r.ProtocolRequestType(Q.method),(Y=t.HoverRequest||(t.HoverRequest={})).method="textDocument/hover",Y.type=new r.ProtocolRequestType(Y.method),(z=t.SignatureHelpTriggerKind||(t.SignatureHelpTriggerKind={})).Invoked=1,z.TriggerCharacter=2,z.ContentChange=3,(G=t.SignatureHelpRequest||(t.SignatureHelpRequest={})).method="textDocument/signatureHelp",G.type=new r.ProtocolRequestType(G.method),($=t.DefinitionRequest||(t.DefinitionRequest={})).method="textDocument/definition",$.type=new r.ProtocolRequestType($.method),(J=t.ReferencesRequest||(t.ReferencesRequest={})).method="textDocument/references",J.type=new r.ProtocolRequestType(J.method),(q=t.DocumentHighlightRequest||(t.DocumentHighlightRequest={})).method="textDocument/documentHighlight",q.type=new r.ProtocolRequestType(q.method),(B=t.DocumentSymbolRequest||(t.DocumentSymbolRequest={})).method="textDocument/documentSymbol",B.type=new r.ProtocolRequestType(B.method),(H=t.CodeActionRequest||(t.CodeActionRequest={})).method="textDocument/codeAction",H.type=new r.ProtocolRequestType(H.method),(V=t.CodeActionResolveRequest||(t.CodeActionResolveRequest={})).method="codeAction/resolve",V.type=new r.ProtocolRequestType(V.method),(W=t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={})).method="workspace/symbol",W.type=new r.ProtocolRequestType(W.method),(K=t.WorkspaceSymbolResolveRequest||(t.WorkspaceSymbolResolveRequest={})).method="workspaceSymbol/resolve",K.type=new r.ProtocolRequestType(K.method),(U=t.CodeLensRequest||(t.CodeLensRequest={})).method="textDocument/codeLens",U.type=new r.ProtocolRequestType(U.method),(F=t.CodeLensResolveRequest||(t.CodeLensResolveRequest={})).method="codeLens/resolve",F.type=new r.ProtocolRequestType(F.method),(L=t.CodeLensRefreshRequest||(t.CodeLensRefreshRequest={})).method="workspace/codeLens/refresh",L.type=new r.ProtocolRequestType0(L.method),(A=t.DocumentLinkRequest||(t.DocumentLinkRequest={})).method="textDocument/documentLink",A.type=new r.ProtocolRequestType(A.method),(O=t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={})).method="documentLink/resolve",O.type=new r.ProtocolRequestType(O.method),(M=t.DocumentFormattingRequest||(t.DocumentFormattingRequest={})).method="textDocument/formatting",M.type=new r.ProtocolRequestType(M.method),(N=t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={})).method="textDocument/rangeFormatting",N.type=new r.ProtocolRequestType(N.method),(j=t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={})).method="textDocument/onTypeFormatting",j.type=new r.ProtocolRequestType(j.method),(t.PrepareSupportDefaultBehavior||(t.PrepareSupportDefaultBehavior={})).Identifier=1,(R=t.RenameRequest||(t.RenameRequest={})).method="textDocument/rename",R.type=new r.ProtocolRequestType(R.method),(x=t.PrepareRenameRequest||(t.PrepareRenameRequest={})).method="textDocument/prepareRename",x.type=new r.ProtocolRequestType(x.method),(t.ExecuteCommandRequest||(t.ExecuteCommandRequest={})).type=new r.ProtocolRequestType("workspace/executeCommand"),(t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={})).type=new r.ProtocolRequestType("workspace/applyEdit")},26305:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedEditingRangeRequest=void 0;const r=n(66140);var i;(i=t.LinkedEditingRangeRequest||(t.LinkedEditingRangeRequest={})).method="textDocument/linkedEditingRange",i.type=new r.ProtocolRequestType(i.method)},73443:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=void 0;const r=n(66140);var i,o,s;(s=t.UniquenessLevel||(t.UniquenessLevel={})).document="document",s.project="project",s.group="group",s.scheme="scheme",s.global="global",(o=t.MonikerKind||(t.MonikerKind={})).$import="import",o.$export="export",o.local="local",(i=t.MonikerRequest||(t.MonikerRequest={})).method="textDocument/moniker",i.type=new r.ProtocolRequestType(i.method)},47169:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DidCloseNotebookDocumentNotification=t.DidSaveNotebookDocumentNotification=t.DidChangeNotebookDocumentNotification=t.NotebookCellArrayChange=t.DidOpenNotebookDocumentNotification=t.NotebookDocumentSyncRegistrationType=t.NotebookDocument=t.NotebookCell=t.ExecutionSummary=t.NotebookCellKind=void 0;const r=n(91674),i=n(69533),o=n(66140);var s,a,c,l,u,d,p,h,f,g;!function(e){e.Markup=1,e.Code=2,e.is=function(e){return 1===e||2===e}}(s=t.NotebookCellKind||(t.NotebookCellKind={})),function(e){e.create=function(e,t){const n={executionOrder:e};return!0!==t&&!1!==t||(n.success=t),n},e.is=function(e){const t=e;return i.objectLiteral(t)&&r.uinteger.is(t.executionOrder)&&(void 0===t.success||i.boolean(t.success))},e.equals=function(e,t){return e===t||null!=e&&null!=t&&e.executionOrder===t.executionOrder&&e.success===t.success}}(a=t.ExecutionSummary||(t.ExecutionSummary={})),function(e){function t(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(typeof e!=typeof n)return!1;if("object"!=typeof e)return!1;const r=Array.isArray(e),o=Array.isArray(n);if(r!==o)return!1;if(r&&o){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1}if(i.objectLiteral(e)&&i.objectLiteral(n)){const r=Object.keys(e),i=Object.keys(n);if(r.length!==i.length)return!1;if(r.sort(),i.sort(),!t(r,i))return!1;for(let i=0;i<r.length;i++){const o=r[i];if(!t(e[o],n[o]))return!1}}return!0}e.create=function(e,t){return{kind:e,document:t}},e.is=function(e){const t=e;return i.objectLiteral(t)&&s.is(t.kind)&&r.DocumentUri.is(t.document)&&(void 0===t.metadata||i.objectLiteral(t.metadata))},e.diff=function(e,n){const r=new Set;return e.document!==n.document&&r.add("document"),e.kind!==n.kind&&r.add("kind"),e.executionSummary!==n.executionSummary&&r.add("executionSummary"),void 0===e.metadata&&void 0===n.metadata||t(e.metadata,n.metadata)||r.add("metadata"),void 0===e.executionSummary&&void 0===n.executionSummary||a.equals(e.executionSummary,n.executionSummary)||r.add("executionSummary"),r}}(c=t.NotebookCell||(t.NotebookCell={})),(g=t.NotebookDocument||(t.NotebookDocument={})).create=function(e,t,n,r){return{uri:e,notebookType:t,version:n,cells:r}},g.is=function(e){const t=e;return i.objectLiteral(t)&&i.string(t.uri)&&r.integer.is(t.version)&&i.typedArray(t.cells,c.is)},(f=t.NotebookDocumentSyncRegistrationType||(t.NotebookDocumentSyncRegistrationType={})).method="notebookDocument/sync",f.type=new o.RegistrationType(f.method),(h=t.DidOpenNotebookDocumentNotification||(t.DidOpenNotebookDocumentNotification={})).method="notebookDocument/didOpen",h.type=new o.ProtocolNotificationType(h.method),(p=t.NotebookCellArrayChange||(t.NotebookCellArrayChange={})).is=function(e){const t=e;return i.objectLiteral(t)&&r.uinteger.is(t.start)&&r.uinteger.is(t.deleteCount)&&(void 0===t.cells||i.typedArray(t.cells,c.is))},p.create=function(e,t,n){const r={start:e,deleteCount:t};return void 0!==n&&(r.cells=n),r},(d=t.DidChangeNotebookDocumentNotification||(t.DidChangeNotebookDocumentNotification={})).method="notebookDocument/didChange",d.type=new o.ProtocolNotificationType(d.method),(u=t.DidSaveNotebookDocumentNotification||(t.DidSaveNotebookDocumentNotification={})).method="notebookDocument/didSave",u.type=new o.ProtocolNotificationType(u.method),(l=t.DidCloseNotebookDocumentNotification||(t.DidCloseNotebookDocumentNotification={})).method="notebookDocument/didClose",l.type=new o.ProtocolNotificationType(l.method)},21862:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=void 0;const r=n(39054),i=n(66140);var o,s,a;(a=t.WorkDoneProgress||(t.WorkDoneProgress={})).type=new r.ProgressType,a.is=function(e){return e===a.type},(s=t.WorkDoneProgressCreateRequest||(t.WorkDoneProgressCreateRequest={})).method="window/workDoneProgress/create",s.type=new i.ProtocolRequestType(s.method),(o=t.WorkDoneProgressCancelNotification||(t.WorkDoneProgressCancelNotification={})).method="window/workDoneProgress/cancel",o.type=new i.ProtocolNotificationType(o.method)},5206:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionRangeRequest=void 0;const r=n(66140);var i;(i=t.SelectionRangeRequest||(t.SelectionRangeRequest={})).method="textDocument/selectionRange",i.type=new r.ProtocolRequestType(i.method)},39434:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.SemanticTokensRegistrationType=t.TokenFormat=void 0;const r=n(66140);var i,o,s,a,c;(t.TokenFormat||(t.TokenFormat={})).Relative="relative",(c=t.SemanticTokensRegistrationType||(t.SemanticTokensRegistrationType={})).method="textDocument/semanticTokens",c.type=new r.RegistrationType(c.method),(a=t.SemanticTokensRequest||(t.SemanticTokensRequest={})).method="textDocument/semanticTokens/full",a.type=new r.ProtocolRequestType(a.method),(s=t.SemanticTokensDeltaRequest||(t.SemanticTokensDeltaRequest={})).method="textDocument/semanticTokens/full/delta",s.type=new r.ProtocolRequestType(s.method),(o=t.SemanticTokensRangeRequest||(t.SemanticTokensRangeRequest={})).method="textDocument/semanticTokens/range",o.type=new r.ProtocolRequestType(o.method),(i=t.SemanticTokensRefreshRequest||(t.SemanticTokensRefreshRequest={})).method="workspace/semanticTokens/refresh",i.type=new r.ProtocolRequestType0(i.method)},75726:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShowDocumentRequest=void 0;const r=n(66140);var i;(i=t.ShowDocumentRequest||(t.ShowDocumentRequest={})).method="window/showDocument",i.type=new r.ProtocolRequestType(i.method)},71589:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeDefinitionRequest=void 0;const r=n(66140);var i;(i=t.TypeDefinitionRequest||(t.TypeDefinitionRequest={})).method="textDocument/typeDefinition",i.type=new r.ProtocolRequestType(i.method)},83693:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeHierarchySubtypesRequest=t.TypeHierarchySupertypesRequest=t.TypeHierarchyPrepareRequest=void 0;const r=n(66140);var i,o,s;(s=t.TypeHierarchyPrepareRequest||(t.TypeHierarchyPrepareRequest={})).method="textDocument/prepareTypeHierarchy",s.type=new r.ProtocolRequestType(s.method),(o=t.TypeHierarchySupertypesRequest||(t.TypeHierarchySupertypesRequest={})).method="typeHierarchy/supertypes",o.type=new r.ProtocolRequestType(o.method),(i=t.TypeHierarchySubtypesRequest||(t.TypeHierarchySubtypesRequest={})).method="typeHierarchy/subtypes",i.type=new r.ProtocolRequestType(i.method)},98744:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=void 0;const r=n(66140);(t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={})).type=new r.ProtocolRequestType0("workspace/workspaceFolders"),(t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={})).type=new r.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")},69533:(e,t)=>{"use strict";function n(e){return"string"==typeof e||e instanceof String}function r(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.objectLiteral=t.typedArray=t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=r,t.stringArray=function(e){return r(e)&&e.every((e=>n(e)))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.objectLiteral=function(e){return null!==e&&"object"==typeof e}},91674:(e,t,n)=>{"use strict";var r,i,o,s,a,c,l,u,d,p,h,f,g,m,y,v,b,w,C,S,_,k,P,I,E,T,D,x;n.r(t),n.d(t,{AnnotatedTextEdit:()=>P,ChangeAnnotation:()=>_,ChangeAnnotationIdentifier:()=>k,CodeAction:()=>oe,CodeActionContext:()=>ie,CodeActionKind:()=>ne,CodeActionTriggerKind:()=>re,CodeDescription:()=>b,CodeLens:()=>se,Color:()=>d,ColorInformation:()=>p,ColorPresentation:()=>h,Command:()=>C,CompletionItem:()=>H,CompletionItemKind:()=>L,CompletionItemLabelDetails:()=>V,CompletionItemTag:()=>U,CompletionList:()=>B,CreateFile:()=>E,DeleteFile:()=>D,Diagnostic:()=>w,DiagnosticRelatedInformation:()=>m,DiagnosticSeverity:()=>y,DiagnosticTag:()=>v,DocumentHighlight:()=>Y,DocumentHighlightKind:()=>z,DocumentLink:()=>ce,DocumentSymbol:()=>te,DocumentUri:()=>r,EOL:()=>Pe,FoldingRange:()=>g,FoldingRangeKind:()=>f,FormattingOptions:()=>ae,Hover:()=>J,InlayHint:()=>be,InlayHintKind:()=>ye,InlayHintLabelPart:()=>ve,InlineValueContext:()=>me,InlineValueEvaluatableExpression:()=>ge,InlineValueText:()=>he,InlineValueVariableLookup:()=>fe,InsertReplaceEdit:()=>K,InsertTextFormat:()=>F,InsertTextMode:()=>W,Location:()=>l,LocationLink:()=>u,MarkedString:()=>q,MarkupContent:()=>A,MarkupKind:()=>O,OptionalVersionedTextDocumentIdentifier:()=>N,ParameterInformation:()=>$,Position:()=>a,Range:()=>c,RenameFile:()=>T,SelectionRange:()=>le,SemanticTokenModifiers:()=>de,SemanticTokenTypes:()=>ue,SemanticTokens:()=>pe,SignatureInformation:()=>G,SymbolInformation:()=>Z,SymbolKind:()=>Q,SymbolTag:()=>X,TextDocument:()=>ke,TextDocumentEdit:()=>I,TextDocumentIdentifier:()=>R,TextDocumentItem:()=>M,TextEdit:()=>S,URI:()=>i,VersionedTextDocumentIdentifier:()=>j,WorkspaceChange:()=>_e,WorkspaceEdit:()=>x,WorkspaceFolder:()=>we,WorkspaceSymbol:()=>ee,integer:()=>o,uinteger:()=>s}),function(e){e.is=function(e){return"string"==typeof e}}(r||(r={})),function(e){e.is=function(e){return"string"==typeof e}}(i||(i={})),function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647,e.is=function(t){return"number"==typeof t&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}}(o||(o={})),function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647,e.is=function(t){return"number"==typeof t&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}}(s||(s={})),function(e){e.create=function(e,t){return e===Number.MAX_VALUE&&(e=s.MAX_VALUE),t===Number.MAX_VALUE&&(t=s.MAX_VALUE),{line:e,character:t}},e.is=function(e){var t=e;return Ie.objectLiteral(t)&&Ie.uinteger(t.line)&&Ie.uinteger(t.character)}}(a||(a={})),function(e){e.create=function(e,t,n,r){if(Ie.uinteger(e)&&Ie.uinteger(t)&&Ie.uinteger(n)&&Ie.uinteger(r))return{start:a.create(e,t),end:a.create(n,r)};if(a.is(e)&&a.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments[".concat(e,", ").concat(t,", ").concat(n,", ").concat(r,"]"))},e.is=function(e){var t=e;return Ie.objectLiteral(t)&&a.is(t.start)&&a.is(t.end)}}(c||(c={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return Ie.defined(t)&&c.is(t.range)&&(Ie.string(t.uri)||Ie.undefined(t.uri))}}(l||(l={})),function(e){e.create=function(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}},e.is=function(e){var t=e;return Ie.defined(t)&&c.is(t.targetRange)&&Ie.string(t.targetUri)&&c.is(t.targetSelectionRange)&&(c.is(t.originSelectionRange)||Ie.undefined(t.originSelectionRange))}}(u||(u={})),function(e){e.create=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},e.is=function(e){var t=e;return Ie.objectLiteral(t)&&Ie.numberRange(t.red,0,1)&&Ie.numberRange(t.green,0,1)&&Ie.numberRange(t.blue,0,1)&&Ie.numberRange(t.alpha,0,1)}}(d||(d={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){var t=e;return Ie.objectLiteral(t)&&c.is(t.range)&&d.is(t.color)}}(p||(p={})),function(e){e.create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},e.is=function(e){var t=e;return Ie.objectLiteral(t)&&Ie.string(t.label)&&(Ie.undefined(t.textEdit)||S.is(t))&&(Ie.undefined(t.additionalTextEdits)||Ie.typedArray(t.additionalTextEdits,S.is))}}(h||(h={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(f||(f={})),function(e){e.create=function(e,t,n,r,i,o){var s={startLine:e,endLine:t};return Ie.defined(n)&&(s.startCharacter=n),Ie.defined(r)&&(s.endCharacter=r),Ie.defined(i)&&(s.kind=i),Ie.defined(o)&&(s.collapsedText=o),s},e.is=function(e){var t=e;return Ie.objectLiteral(t)&&Ie.uinteger(t.startLine)&&Ie.uinteger(t.startLine)&&(Ie.undefined(t.startCharacter)||Ie.uinteger(t.startCharacter))&&(Ie.undefined(t.endCharacter)||Ie.uinteger(t.endCharacter))&&(Ie.undefined(t.kind)||Ie.string(t.kind))}}(g||(g={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){var t=e;return Ie.defined(t)&&l.is(t.location)&&Ie.string(t.message)}}(m||(m={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(y||(y={})),function(e){e.Unnecessary=1,e.Deprecated=2}(v||(v={})),function(e){e.is=function(e){var t=e;return Ie.objectLiteral(t)&&Ie.string(t.href)}}(b||(b={})),function(e){e.create=function(e,t,n,r,i,o){var s={range:e,message:t};return Ie.defined(n)&&(s.severity=n),Ie.defined(r)&&(s.code=r),Ie.defined(i)&&(s.source=i),Ie.defined(o)&&(s.relatedInformation=o),s},e.is=function(e){var t,n=e;return Ie.defined(n)&&c.is(n.range)&&Ie.string(n.message)&&(Ie.number(n.severity)||Ie.undefined(n.severity))&&(Ie.integer(n.code)||Ie.string(n.code)||Ie.undefined(n.code))&&(Ie.undefined(n.codeDescription)||Ie.string(null===(t=n.codeDescription)||void 0===t?void 0:t.href))&&(Ie.string(n.source)||Ie.undefined(n.source))&&(Ie.undefined(n.relatedInformation)||Ie.typedArray(n.relatedInformation,m.is))}}(w||(w={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={title:e,command:t};return Ie.defined(n)&&n.length>0&&(i.arguments=n),i},e.is=function(e){var t=e;return Ie.defined(t)&&Ie.string(t.title)&&Ie.string(t.command)}}(C||(C={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){var t=e;return Ie.objectLiteral(t)&&Ie.string(t.newText)&&c.is(t.range)}}(S||(S={})),function(e){e.create=function(e,t,n){var r={label:e};return void 0!==t&&(r.needsConfirmation=t),void 0!==n&&(r.description=n),r},e.is=function(e){var t=e;return Ie.objectLiteral(t)&&Ie.string(t.label)&&(Ie.boolean(t.needsConfirmation)||void 0===t.needsConfirmation)&&(Ie.string(t.description)||void 0===t.description)}}(_||(_={})),function(e){e.is=function(e){var t=e;return Ie.string(t)}}(k||(k={})),function(e){e.replace=function(e,t,n){return{range:e,newText:t,annotationId:n}},e.insert=function(e,t,n){return{range:{start:e,end:e},newText:t,annotationId:n}},e.del=function(e,t){return{range:e,newText:"",annotationId:t}},e.is=function(e){var t=e;return S.is(t)&&(_.is(t.annotationId)||k.is(t.annotationId))}}(P||(P={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return Ie.defined(t)&&N.is(t.textDocument)&&Array.isArray(t.edits)}}(I||(I={})),function(e){e.create=function(e,t,n){var r={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(r.options=t),void 0!==n&&(r.annotationId=n),r},e.is=function(e){var t=e;return t&&"create"===t.kind&&Ie.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||Ie.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||Ie.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||k.is(t.annotationId))}}(E||(E={})),function(e){e.create=function(e,t,n,r){var i={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(i.options=n),void 0!==r&&(i.annotationId=r),i},e.is=function(e){var t=e;return t&&"rename"===t.kind&&Ie.string(t.oldUri)&&Ie.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||Ie.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||Ie.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||k.is(t.annotationId))}}(T||(T={})),function(e){e.create=function(e,t,n){var r={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(r.options=t),void 0!==n&&(r.annotationId=n),r},e.is=function(e){var t=e;return t&&"delete"===t.kind&&Ie.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||Ie.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||Ie.boolean(t.options.ignoreIfNotExists)))&&(void 0===t.annotationId||k.is(t.annotationId))}}(D||(D={})),function(e){e.is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((function(e){return Ie.string(e.kind)?E.is(e)||T.is(e)||D.is(e):I.is(e)})))}}(x||(x={}));var R,j,N,M,O,A,L,F,U,K,W,V,H,B,q,J,$,G,z,Y,Q,X,Z,ee,te,ne,re,ie,oe,se,ae,ce,le,ue,de,pe,he,fe,ge,me,ye,ve,be,we,Ce=function(){function e(e,t){this.edits=e,this.changeAnnotations=t}return e.prototype.insert=function(e,t,n){var r,i;if(void 0===n?r=S.insert(e,t):k.is(n)?(i=n,r=P.insert(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=P.insert(e,t,i)),this.edits.push(r),void 0!==i)return i},e.prototype.replace=function(e,t,n){var r,i;if(void 0===n?r=S.replace(e,t):k.is(n)?(i=n,r=P.replace(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=P.replace(e,t,i)),this.edits.push(r),void 0!==i)return i},e.prototype.delete=function(e,t){var n,r;if(void 0===t?n=S.del(e):k.is(t)?(r=t,n=P.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(t),n=P.del(e,r)),this.edits.push(n),void 0!==r)return r},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e.prototype.assertChangeAnnotations=function(e){if(void 0===e)throw new Error("Text edit change is not configured to manage change annotations.")},e}(),Se=function(){function e(e){this._annotations=void 0===e?Object.create(null):e,this._counter=0,this._size=0}return e.prototype.all=function(){return this._annotations},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.manage=function(e,t){var n;if(k.is(e)?n=e:(n=this.nextId(),t=e),void 0!==this._annotations[n])throw new Error("Id ".concat(n," is already in use."));if(void 0===t)throw new Error("No annotation provided for id ".concat(n));return this._annotations[n]=t,this._size++,n},e.prototype.nextId=function(){return this._counter++,this._counter.toString()},e}(),_e=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),void 0!==e?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Se(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach((function(e){if(I.is(e)){var n=new Ce(e.edits,t._changeAnnotations);t._textEditChanges[e.textDocument.uri]=n}}))):e.changes&&Object.keys(e.changes).forEach((function(n){var r=new Ce(e.changes[n]);t._textEditChanges[n]=r}))):this._workspaceEdit={}}return Object.defineProperty(e.prototype,"edit",{get:function(){return this.initDocumentChanges(),void 0!==this._changeAnnotations&&(0===this._changeAnnotations.size?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),e.prototype.getTextEditChange=function(e){if(N.is(e)){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t={uri:e.uri,version:e.version};if(!(r=this._textEditChanges[t.uri])){var n={textDocument:t,edits:i=[]};this._workspaceEdit.documentChanges.push(n),r=new Ce(i,this._changeAnnotations),this._textEditChanges[t.uri]=r}return r}if(this.initChanges(),void 0===this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var r;if(!(r=this._textEditChanges[e])){var i=[];this._workspaceEdit.changes[e]=i,r=new Ce(i),this._textEditChanges[e]=r}return r},e.prototype.initDocumentChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._changeAnnotations=new Se,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},e.prototype.initChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._workspaceEdit.changes=Object.create(null))},e.prototype.createFile=function(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var r,i,o;if(_.is(t)||k.is(t)?r=t:n=t,void 0===r?i=E.create(e,n):(o=k.is(r)?r:this._changeAnnotations.manage(r),i=E.create(e,n,o)),this._workspaceEdit.documentChanges.push(i),void 0!==o)return o},e.prototype.renameFile=function(e,t,n,r){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var i,o,s;if(_.is(n)||k.is(n)?i=n:r=n,void 0===i?o=T.create(e,t,r):(s=k.is(i)?i:this._changeAnnotations.manage(i),o=T.create(e,t,r,s)),this._workspaceEdit.documentChanges.push(o),void 0!==s)return s},e.prototype.deleteFile=function(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var r,i,o;if(_.is(t)||k.is(t)?r=t:n=t,void 0===r?i=D.create(e,n):(o=k.is(r)?r:this._changeAnnotations.manage(r),i=D.create(e,n,o)),this._workspaceEdit.documentChanges.push(i),void 0!==o)return o},e}();!function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return Ie.defined(t)&&Ie.string(t.uri)}}(R||(R={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return Ie.defined(t)&&Ie.string(t.uri)&&Ie.integer(t.version)}}(j||(j={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return Ie.defined(t)&&Ie.string(t.uri)&&(null===t.version||Ie.integer(t.version))}}(N||(N={})),function(e){e.create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},e.is=function(e){var t=e;return Ie.defined(t)&&Ie.string(t.uri)&&Ie.string(t.languageId)&&Ie.integer(t.version)&&Ie.string(t.text)}}(M||(M={})),function(e){e.PlainText="plaintext",e.Markdown="markdown",e.is=function(t){var n=t;return n===e.PlainText||n===e.Markdown}}(O||(O={})),function(e){e.is=function(e){var t=e;return Ie.objectLiteral(e)&&O.is(t.kind)&&Ie.string(t.value)}}(A||(A={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(L||(L={})),function(e){e.PlainText=1,e.Snippet=2}(F||(F={})),function(e){e.Deprecated=1}(U||(U={})),function(e){e.create=function(e,t,n){return{newText:e,insert:t,replace:n}},e.is=function(e){var t=e;return t&&Ie.string(t.newText)&&c.is(t.insert)&&c.is(t.replace)}}(K||(K={})),function(e){e.asIs=1,e.adjustIndentation=2}(W||(W={})),function(e){e.is=function(e){var t=e;return t&&(Ie.string(t.detail)||void 0===t.detail)&&(Ie.string(t.description)||void 0===t.description)}}(V||(V={})),function(e){e.create=function(e){return{label:e}}}(H||(H={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}(B||(B={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){var t=e;return Ie.string(t)||Ie.objectLiteral(t)&&Ie.string(t.language)&&Ie.string(t.value)}}(q||(q={})),function(e){e.is=function(e){var t=e;return!!t&&Ie.objectLiteral(t)&&(A.is(t.contents)||q.is(t.contents)||Ie.typedArray(t.contents,q.is))&&(void 0===e.range||c.is(e.range))}}(J||(J={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}($||($={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={label:e};return Ie.defined(t)&&(i.documentation=t),Ie.defined(n)?i.parameters=n:i.parameters=[],i}}(G||(G={})),function(e){e.Text=1,e.Read=2,e.Write=3}(z||(z={})),function(e){e.create=function(e,t){var n={range:e};return Ie.number(t)&&(n.kind=t),n}}(Y||(Y={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(Q||(Q={})),function(e){e.Deprecated=1}(X||(X={})),function(e){e.create=function(e,t,n,r,i){var o={name:e,kind:t,location:{uri:r,range:n}};return i&&(o.containerName=i),o}}(Z||(Z={})),function(e){e.create=function(e,t,n,r){return void 0!==r?{name:e,kind:t,location:{uri:n,range:r}}:{name:e,kind:t,location:{uri:n}}}}(ee||(ee={})),function(e){e.create=function(e,t,n,r,i,o){var s={name:e,detail:t,kind:n,range:r,selectionRange:i};return void 0!==o&&(s.children=o),s},e.is=function(e){var t=e;return t&&Ie.string(t.name)&&Ie.number(t.kind)&&c.is(t.range)&&c.is(t.selectionRange)&&(void 0===t.detail||Ie.string(t.detail))&&(void 0===t.deprecated||Ie.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))&&(void 0===t.tags||Array.isArray(t.tags))}}(te||(te={})),function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"}(ne||(ne={})),function(e){e.Invoked=1,e.Automatic=2}(re||(re={})),function(e){e.create=function(e,t,n){var r={diagnostics:e};return null!=t&&(r.only=t),null!=n&&(r.triggerKind=n),r},e.is=function(e){var t=e;return Ie.defined(t)&&Ie.typedArray(t.diagnostics,w.is)&&(void 0===t.only||Ie.typedArray(t.only,Ie.string))&&(void 0===t.triggerKind||t.triggerKind===re.Invoked||t.triggerKind===re.Automatic)}}(ie||(ie={})),function(e){e.create=function(e,t,n){var r={title:e},i=!0;return"string"==typeof t?(i=!1,r.kind=t):C.is(t)?r.command=t:r.edit=t,i&&void 0!==n&&(r.kind=n),r},e.is=function(e){var t=e;return t&&Ie.string(t.title)&&(void 0===t.diagnostics||Ie.typedArray(t.diagnostics,w.is))&&(void 0===t.kind||Ie.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||C.is(t.command))&&(void 0===t.isPreferred||Ie.boolean(t.isPreferred))&&(void 0===t.edit||x.is(t.edit))}}(oe||(oe={})),function(e){e.create=function(e,t){var n={range:e};return Ie.defined(t)&&(n.data=t),n},e.is=function(e){var t=e;return Ie.defined(t)&&c.is(t.range)&&(Ie.undefined(t.command)||C.is(t.command))}}(se||(se={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return Ie.defined(t)&&Ie.uinteger(t.tabSize)&&Ie.boolean(t.insertSpaces)}}(ae||(ae={})),function(e){e.create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){var t=e;return Ie.defined(t)&&c.is(t.range)&&(Ie.undefined(t.target)||Ie.string(t.target))}}(ce||(ce={})),function(e){e.create=function(e,t){return{range:e,parent:t}},e.is=function(t){var n=t;return Ie.objectLiteral(n)&&c.is(n.range)&&(void 0===n.parent||e.is(n.parent))}}(le||(le={})),function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator",e.decorator="decorator"}(ue||(ue={})),function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"}(de||(de={})),function(e){e.is=function(e){var t=e;return Ie.objectLiteral(t)&&(void 0===t.resultId||"string"==typeof t.resultId)&&Array.isArray(t.data)&&(0===t.data.length||"number"==typeof t.data[0])}}(pe||(pe={})),function(e){e.create=function(e,t){return{range:e,text:t}},e.is=function(e){var t=e;return null!=t&&c.is(t.range)&&Ie.string(t.text)}}(he||(he={})),function(e){e.create=function(e,t,n){return{range:e,variableName:t,caseSensitiveLookup:n}},e.is=function(e){var t=e;return null!=t&&c.is(t.range)&&Ie.boolean(t.caseSensitiveLookup)&&(Ie.string(t.variableName)||void 0===t.variableName)}}(fe||(fe={})),function(e){e.create=function(e,t){return{range:e,expression:t}},e.is=function(e){var t=e;return null!=t&&c.is(t.range)&&(Ie.string(t.expression)||void 0===t.expression)}}(ge||(ge={})),function(e){e.create=function(e,t){return{frameId:e,stoppedLocation:t}},e.is=function(e){var t=e;return Ie.defined(t)&&c.is(e.stoppedLocation)}}(me||(me={})),function(e){e.Type=1,e.Parameter=2,e.is=function(e){return 1===e||2===e}}(ye||(ye={})),function(e){e.create=function(e){return{value:e}},e.is=function(e){var t=e;return Ie.objectLiteral(t)&&(void 0===t.tooltip||Ie.string(t.tooltip)||A.is(t.tooltip))&&(void 0===t.location||l.is(t.location))&&(void 0===t.command||C.is(t.command))}}(ve||(ve={})),function(e){e.create=function(e,t,n){var r={position:e,label:t};return void 0!==n&&(r.kind=n),r},e.is=function(e){var t=e;return Ie.objectLiteral(t)&&a.is(t.position)&&(Ie.string(t.label)||Ie.typedArray(t.label,ve.is))&&(void 0===t.kind||ye.is(t.kind))&&void 0===t.textEdits||Ie.typedArray(t.textEdits,S.is)&&(void 0===t.tooltip||Ie.string(t.tooltip)||A.is(t.tooltip))&&(void 0===t.paddingLeft||Ie.boolean(t.paddingLeft))&&(void 0===t.paddingRight||Ie.boolean(t.paddingRight))}}(be||(be={})),function(e){e.is=function(e){var t=e;return Ie.objectLiteral(t)&&i.is(t.uri)&&Ie.string(t.name)}}(we||(we={}));var ke,Pe=["\n","\r\n","\r"];!function(e){function t(e,n){if(e.length<=1)return e;var r=e.length/2|0,i=e.slice(0,r),o=e.slice(r);t(i,n),t(o,n);for(var s=0,a=0,c=0;s<i.length&&a<o.length;){var l=n(i[s],o[a]);e[c++]=l<=0?i[s++]:o[a++]}for(;s<i.length;)e[c++]=i[s++];for(;a<o.length;)e[c++]=o[a++];return e}e.create=function(e,t,n,r){return new Ee(e,t,n,r)},e.is=function(e){var t=e;return!!(Ie.defined(t)&&Ie.string(t.uri)&&(Ie.undefined(t.languageId)||Ie.string(t.languageId))&&Ie.uinteger(t.lineCount)&&Ie.func(t.getText)&&Ie.func(t.positionAt)&&Ie.func(t.offsetAt))},e.applyEdits=function(e,n){for(var r=e.getText(),i=t(n,(function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n})),o=r.length,s=i.length-1;s>=0;s--){var a=i[s],c=e.offsetAt(a.range.start),l=e.offsetAt(a.range.end);if(!(l<=o))throw new Error("Overlapping edit");r=r.substring(0,c)+a.newText+r.substring(l,r.length),o=c}return r}}(ke||(ke={}));var Ie,Ee=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(void 0===this._lineOffsets){for(var e=[],t=this._content,n=!0,r=0;r<t.length;r++){n&&(e.push(r),n=!1);var i=t.charAt(r);n="\r"===i||"\n"===i,"\r"===i&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,r=t.length;if(0===r)return a.create(0,e);for(;n<r;){var i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}var o=n-1;return a.create(o,e-t[o])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.numberRange=function(e,n,r){return"[object Number]"===t.call(e)&&n<=e&&e<=r},e.integer=function(e){return"[object Number]"===t.call(e)&&-2147483648<=e&&e<=2147483647},e.uinteger=function(e){return"[object Number]"===t.call(e)&&0<=e&&e<=2147483647},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(Ie||(Ie={}))},59035:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(15654);t.getExperimentationService=r.getExperimentationService,t.getExperimentationServiceAsync=r.getExperimentationServiceAsync;var i=n(22560);t.TargetPopulation=i.TargetPopulation},55708:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MementoKeyValueStorage=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,t){return await this.mementoGlobalStorage.get(e)||t}setValue(e,t){this.mementoGlobalStorage.update(e,t)}}},4619:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,t){}getTreatmentVariableAsync(e,t){return Promise.resolve(void 0)}}},22560:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(66828);class i{constructor(e,t,n){this.extensionName=e,this.extensionVersion=t,this.targetPopulation=n}static trimVersionSuffix(e){return e.split(/\-[a-zA-Z0-9]+$/)[0]}getFilterValue(e){switch(e){case o.ApplicationVersion:return i.trimVersionSuffix(r.version);case o.Build:return r.env.appName;case o.ClientId:return r.env.machineId;case o.ExtensionName:return this.extensionName;case o.ExtensionVersion:return i.trimVersionSuffix(this.extensionVersion);case o.Language:return r.env.language;case o.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,t=Object.values(o);for(let n of t)e.set(n,this.getFilterValue(n));return e}}var o,s;t.VSCodeFilterProvider=i,function(e){e.Market="X-MSEdge-Market",e.CorpNet="X-FD-Corpnet",e.ApplicationVersion="X-VSCode-AppVersion",e.Build="X-VSCode-Build",e.ClientId="X-MSEdge-ClientId",e.ExtensionName="X-VSCode-ExtensionName",e.ExtensionVersion="X-VSCode-ExtensionVersion",e.Language="X-VSCode-Language",e.TargetPopulation="X-VSCode-TargetPopulation"}(o=t.Filters||(t.Filters={})),(s=t.TargetPopulation||(t.TargetPopulation={})).Team="team",s.Internal="internal",s.Insiders="insider",s.Public="public"},15654:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(22560),i=n(14802),o=n(66828),s=n(55708),a=n(4619);function c(e,t,n,c,l,...u){if(!l)throw new Error("Memento storage was not provided.");const d=o.workspace.getConfiguration("telemetry");if(!(void 0===o.env.isTelemetryEnabled?d.get("enableTelemetry",!0):o.env.isTelemetryEnabled))return new a.default;const p=[new r.VSCodeFilterProvider(e,t,n),...u],h=new s.MementoKeyValueStorage(l);return new i.ExperimentationService({filterProviders:p,telemetry:c,storageKey:"VSCode.ABExp.FeatureData",keyValueStorage:h,featuresTelemetryPropertyName:"VSCode.ABExp.Features",assignmentContextTelemetryPropertyName:"abexp.assignmentcontext",telemetryEventName:"query-expfeature",endpoint:"https://default.exp-tas.com/vscode/ab",refetchInterval:18e5})}t.getExperimentationService=c,t.getExperimentationServiceAsync=async function(e,t,n,r,i,...o){const s=c(e,t,n,r,i,...o);return await s.initializePromise,s}},63826:e=>{"use strict";e.exports=require("node:crypto")},66828:e=>{"use strict";e.exports=require("vscode")},21763:()=>{},4147:e=>{"use strict";e.exports=JSON.parse('{"name":"jupyter","displayName":"Jupyter","version":"2023.2.1200692131","description":"Jupyter notebook support, interactive programming and computing that supports Intellisense, debugging and more.","publisher":"ms-toolsai","author":{"name":"Microsoft Corporation"},"extensionPack":["ms-toolsai.jupyter-keymap","ms-toolsai.jupyter-renderers","ms-toolsai.vscode-jupyter-slideshow","ms-toolsai.vscode-jupyter-cell-tags"],"license":"MIT","homepage":"https://github.com/Microsoft/vscode-jupyter","repository":{"type":"git","url":"https://github.com/Microsoft/vscode-jupyter"},"bugs":{"url":"https://github.com/Microsoft/vscode-jupyter/issues"},"qna":"https://github.com/microsoft/vscode-jupyter/discussions","icon":"icon.png","galleryBanner":{"color":"#ffffff","theme":"light"},"engines":{"vscode":"^1.76.0"},"l10n":"./l10n","keywords":["jupyter","notebook","notebookKernelJupyterNotebook","multi-root ready","python"],"categories":["Extension Packs","Data Science","Machine Learning","Notebooks","Visualization"],"activationEvents":["onLanguage:python","onLanguage:jupyter","onNotebook:jupyter-notebook","onNotebook:interactive","onWebviewPanel:jupyter-variables","onWebviewPanel:jupyter"],"main":"./out/extension.node.js","browser":"./out/extension.web.bundle.js","capabilities":{"virtualWorkspaces":true,"untrustedWorkspaces":{"supported":"limited","description":"%capabilities.untrustedWorkspace.description%"}},"contributes":{"walkthroughs":[{"id":"jupyterWelcome","title":"%contributes.walkthroughs.jupyterWelcome.title%","description":"%contributes.walkthroughs.jupyterWelcome.description%","when":"workspacePlatform != webworker","steps":[{"id":"ipynb.newUntitledIpynb","title":"%contributes.walkthroughs.jupyterWelcome.steps.ipynb.newUntitledIpynb.title%","description":"%contributes.walkthroughs.jupyterWelcome.steps.ipynb.newUntitledIpynb.description%","media":{"svg":"resources/walkthroughs/opennotebook.svg","altText":"%contributes.walkthroughs.jupyterWelcome.steps.ipynb.newUntitledIpynb.media.altText%"},"completionEvents":["onCommand:ipynb.newUntitledIpynb","onCommand:jupyter.createnewinteractive","onCommand:workbench.action.files.openFolder","onCommand:workbench.action.files.openFileFolder"]},{"id":"jupyter.selectKernel","title":"%contributes.walkthroughs.jupyterWelcome.steps.jupyter.selectKernel.title%","description":"%contributes.walkthroughs.jupyterWelcome.steps.jupyter.selectKernel.description%","media":{"svg":"resources/walkthroughs/kernel.svg","altText":"%contributes.walkthroughs.jupyterWelcome.steps.jupyter.selectKernel.media.altText%"},"completionEvents":["onCommand:notebook.selectKernel"]},{"id":"jupyter.exploreAndDebug","title":"%contributes.walkthroughs.jupyterWelcome.steps.jupyter.exploreAndDebug.title%","description":"%contributes.walkthroughs.jupyterWelcome.steps.jupyter.exploreAndDebug.description%","media":{"svg":"resources/walkthroughs/data.svg","altText":"%contributes.walkthroughs.jupyterWelcome.steps.jupyter.exploreAndDebug.media.altText%"}},{"id":"jupyter.dataScienceLearnMore","title":"%contributes.walkthroughs.jupyterWelcome.steps.jupyter.dataScienceLearnMore.title%","description":"%contributes.walkthroughs.jupyterWelcome.steps.jupyter.dataScienceLearnMore.description%","media":{"svg":"resources/walkthroughs/learnmore.svg","altText":"%contributes.walkthroughs.jupyterWelcome.steps.jupyter.dataScienceLearnMore.media.altText%"}}]}],"keybindings":[{"command":"jupyter.execSelectionInteractive","key":"shift+enter","when":"editorTextFocus && editorLangId == python && !findInputFocussed && !replaceInputFocussed && jupyter.ownsSelection && !notebookEditorFocused"},{"command":"jupyter.runcurrentcelladvance","key":"shift+enter","when":"editorTextFocus && !editorHasSelection && jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.runcurrentcell","key":"ctrl+enter","when":"editorTextFocus && !editorHasSelection && jupyter.hascodecells && !notebookEditorFocused && !jupyter.havenativecells"},{"command":"jupyter.runcurrentcellandaddbelow","key":"alt+enter","when":"editorTextFocus && !editorHasSelection && jupyter.hascodecells && !notebookEditorFocused"},{"key":"shift+enter","when":"resourceScheme == \'vscode-interactive\' && notebookKernel =~ /^ms-toolsai.jupyter\\\\// || resourceScheme == \'vscode-interactive\' && !notebookKernel","command":"interactive.execute"},{"key":"escape","when":"resourceScheme == \'vscode-interactive\' && !editorHoverVisible && !suggestWidgetVisible && !isComposing && !inSnippetMode && !exceptionWidgetVisible && !selectionAnchorSet && !LinkedEditingInputVisible && !renameInputVisible && !editorHasSelection && !accessibilityHelpWidgetVisible && !breakpointWidgetVisible && !findWidgetVisible && !markersNavigationVisible && !parameterHintsVisible && !editorHasMultipleSelections && !notificationToastsVisible","command":"interactive.input.clear"},{"command":"jupyter.insertCellBelowPosition","key":"ctrl+; s","when":"editorTextFocus && jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.insertCellBelow","key":"ctrl+; b","when":"editorTextFocus && jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.insertCellAbove","key":"ctrl+; a","when":"editorTextFocus && jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.deleteCells","key":"ctrl+; x","when":"editorTextFocus && jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.extendSelectionByCellAbove","key":"ctrl+alt+shift+[","when":"editorTextFocus && jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.extendSelectionByCellBelow","key":"ctrl+alt+shift+]","when":"editorTextFocus && jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.moveCellsUp","key":"ctrl+; u","when":"editorTextFocus && jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.moveCellsDown","key":"ctrl+; d","when":"editorTextFocus && jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.changeCellToMarkdown","key":"ctrl+; m","when":"editorTextFocus && jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.changeCellToCode","key":"ctrl+; c","when":"editorTextFocus && jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.gotoNextCellInFile","key":"ctrl+alt+]","when":"editorTextFocus && jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.gotoPrevCellInFile","key":"ctrl+alt+[","when":"editorTextFocus && jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.selectCellContents","key":"ctrl+alt+\\\\","when":"editorTextFocus && jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.selectCell","key":"ctrl+alt+shift+\\\\","when":"editorTextFocus && jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.refreshDataViewer","key":"ctrl+r","mac":"cmd+r","when":"jupyter.dataViewerActive"},{"command":"jupyter.runAndDebugCell","key":"ctrl+alt+shift+enter","mac":"ctrl+shift+enter"},{"command":"jupyter.runByLine","key":"f10"},{"command":"jupyter.runByLineNext","key":"f10"},{"command":"jupyter.runByLineStop","key":"ctrl+enter"}],"commands":[{"command":"dataScience.ClearCache","title":"%jupyter.command.dataScience.clearCache.title%","category":"Jupyter (Dev)","enablement":"jupyter.development"},{"command":"dataScience.ClearUserProviderJupyterServerCache","title":"%jupyter.command.dataScience.clearUserProviderJupyterServerCache.title%","category":"Jupyter (Dev)","enablement":"jupyter.development"},{"command":"jupyter.replayPylanceLog","title":"%jupyter.command.jupyter.replayPylanceLog.title%","category":"Jupyter (Dev)","enablement":"jupyter.development && notebookType == jupyter-notebook && isWorkspaceTrusted && !jupyter.webExtension"},{"command":"jupyter.replayPylanceLogStep","title":"%jupyter.command.jupyter.replayPylanceLogStep.title%","category":"Jupyter (Dev)","icon":"$(debug-start)","enablement":"jupyter.development && notebookType == jupyter-notebook && isWorkspaceTrusted && jupyter.replayLogLoaded && !jupyter.webExtension"},{"command":"jupyter.filterKernels","title":"%jupyter.command.jupyter.filterKernels.title%","category":"Jupyter","enablement":"!jupyter.webExtension && config.notebook.kernelPicker.type != mru"},{"command":"jupyter.runByLine","title":"%jupyter.command.jupyter.runByLine.title%","icon":"$(debug-line-by-line)","category":"Jupyter","enablement":"notebookKernel =~ /^ms-toolsai.jupyter\\\\// && jupyter.ispythonnotebook && notebookCellType == code && isWorkspaceTrusted && resource not in jupyter.notebookeditor.debugDocuments || !notebookKernel && jupyter.ispythonnotebook && notebookCellType == code && isWorkspaceTrusted"},{"command":"jupyter.runAndDebugCell","title":"%jupyter.command.jupyter.debugCell.title%","icon":"$(debug-alt-small)","category":"Jupyter","enablement":"notebookKernel =~ /^ms-toolsai.jupyter\\\\// && jupyter.ispythonnotebook && notebookCellType == code && isWorkspaceTrusted && resource not in jupyter.notebookeditor.debugDocuments || !notebookKernel && jupyter.ispythonnotebook && notebookCellType == code && isWorkspaceTrusted"},{"command":"jupyter.runByLineNext","title":"%jupyter.command.jupyter.runByLineNext.title%","icon":"$(debug-line-by-line)","category":"Jupyter","enablement":"notebookCellResource in jupyter.notebookeditor.runByLineCells"},{"command":"jupyter.runByLineStop","title":"%jupyter.command.jupyter.runByLineStop.title%","icon":"$(debug-continue-small)","category":"Jupyter","enablement":"notebookCellResource in jupyter.notebookeditor.runByLineCells"},{"command":"jupyter.viewOutput","title":"%jupyter.command.jupyter.viewOutput.title%","category":"Jupyter"},{"command":"jupyter.notebookeditor.export","title":"%DataScience.notebookExportAs%","shortTitle":"%DataScience.notebookExportAs.shorttitle%","category":"Notebook","icon":{"light":"resources/light/export_to_python.svg","dark":"resources/dark/export_to_python.svg"},"enablement":"notebookType == jupyter-notebook && isWorkspaceTrusted && !jupyter.webExtension || notebookType == jupyter-notebook && isWorkspaceTrusted && jupyter.webExtension && notebookKernel =~ /^ms-toolsai.jupyter\\\\//"},{"command":"jupyter.export","title":"%DataScience.notebookExportAs%","category":"Jupyter","enablement":"isWorkspaceTrusted && !jupyter.webExtension || isWorkspaceTrusted && jupyter.webExtension && notebookKernel =~ /^ms-toolsai.jupyter\\\\//"},{"command":"jupyter.exportAsPythonScript","title":"%jupyter.command.jupyter.exportAsPythonScript.title%","category":"Jupyter","enablement":"isWorkspaceTrusted && !jupyter.webExtension || isWorkspaceTrusted && jupyter.webExtension && notebookKernel =~ /^ms-toolsai.jupyter\\\\//"},{"command":"jupyter.exportToHTML","title":"%jupyter.command.jupyter.exportToHTML.title%","category":"Jupyter","enablement":"isWorkspaceTrusted && !jupyter.webExtension || isWorkspaceTrusted && jupyter.webExtension && notebookKernel =~ /^ms-toolsai.jupyter\\\\//"},{"command":"jupyter.exportToPDF","title":"%jupyter.command.jupyter.exportToPDF.title%","category":"Jupyter","enablement":"isWorkspaceTrusted && !jupyter.webExtension || isWorkspaceTrusted && jupyter.webExtension && notebookKernel =~ /^ms-toolsai.jupyter\\\\//"},{"command":"jupyter.selectJupyterInterpreter","title":"%jupyter.command.jupyter.selectJupyterInterpreter.title%","category":"Jupyter","enablement":"isWorkspaceTrusted && !jupyter.webExtension"},{"command":"jupyter.runcurrentcell","title":"%jupyter.command.jupyter.runcurrentcell.title%","category":"Jupyter","enablement":"isWorkspaceTrusted"},{"command":"jupyter.debugcell","title":"%jupyter.command.jupyter.debugcell.title%","category":"Jupyter","enablement":"isWorkspaceTrusted"},{"command":"jupyter.debugstepover","title":"%jupyter.command.jupyter.debugstepover.title%","category":"Jupyter","enablement":"isWorkspaceTrusted"},{"command":"jupyter.debugstop","title":"%jupyter.command.jupyter.debugstop.title%","category":"Jupyter","enablement":"isWorkspaceTrusted"},{"command":"jupyter.debugcontinue","title":"%jupyter.command.jupyter.debugcontinue.title%","category":"Jupyter","enablement":"isWorkspaceTrusted"},{"command":"jupyter.insertCellBelowPosition","title":"%jupyter.command.jupyter.insertCellBelowPosition.title%","category":"Jupyter","enablement":"isWorkspaceTrusted && !jupyter.webExtension"},{"command":"jupyter.insertCellBelow","title":"%jupyter.command.jupyter.insertCellBelow.title%","category":"Jupyter","enablement":"!jupyter.webExtension"},{"command":"jupyter.insertCellAbove","title":"%jupyter.command.jupyter.insertCellAbove.title%","category":"Jupyter","enablement":"!jupyter.webExtension"},{"command":"jupyter.deleteCells","title":"%jupyter.command.jupyter.deleteCells.title%","category":"Jupyter","enablement":"!jupyter.webExtension"},{"command":"jupyter.selectCell","title":"%jupyter.command.jupyter.selectCell.title%","category":"Jupyter","enablement":"!jupyter.webExtension"},{"command":"jupyter.selectCellContents","title":"%jupyter.command.jupyter.selectCellContents.title%","category":"Jupyter","enablement":"!jupyter.webExtension"},{"command":"jupyter.extendSelectionByCellAbove","title":"%jupyter.command.jupyter.extendSelectionByCellAbove.title%","category":"Jupyter","enablement":"!jupyter.webExtension"},{"command":"jupyter.extendSelectionByCellBelow","title":"%jupyter.command.jupyter.extendSelectionByCellBelow.title%","category":"Jupyter","enablement":"!jupyter.webExtension"},{"command":"jupyter.moveCellsUp","title":"%jupyter.command.jupyter.moveCellsUp.title%","category":"Jupyter","enablement":"!jupyter.webExtension"},{"command":"jupyter.moveCellsDown","title":"%jupyter.command.jupyter.moveCellsDown.title%","category":"Jupyter","enablement":"!jupyter.webExtension"},{"command":"jupyter.changeCellToMarkdown","title":"%jupyter.command.jupyter.changeCellToMarkdown.title%","category":"Jupyter","enablement":"!jupyter.webExtension"},{"command":"jupyter.changeCellToCode","title":"%jupyter.command.jupyter.changeCellToCode.title%","category":"Jupyter","enablement":"!jupyter.webExtension"},{"command":"jupyter.gotoNextCellInFile","title":"%jupyter.command.jupyter.gotoNextCellInFile.title%","category":"Jupyter","enablement":"!jupyter.webExtension"},{"command":"jupyter.gotoPrevCellInFile","title":"%jupyter.command.jupyter.gotoPrevCellInFile.title%","category":"Jupyter","enablement":"!jupyter.webExtension"},{"command":"jupyter.runcurrentcelladvance","title":"%jupyter.command.jupyter.runcurrentcelladvance.title%","category":"Jupyter","enablement":"isWorkspaceTrusted"},{"command":"jupyter.runcurrentcellandallbelow.palette","title":"%jupyter.command.jupyter.runcurrentcellandallbelow.palette.title%","category":"Jupyter","enablement":"isWorkspaceTrusted"},{"command":"jupyter.runallcellsabove.palette","title":"%jupyter.command.jupyter.runallcellsabove.palette.title%","category":"Jupyter","enablement":"isWorkspaceTrusted"},{"command":"jupyter.debugcurrentcell.palette","title":"%jupyter.command.jupyter.debugcurrentcell.palette.title%","category":"Jupyter","enablement":"isWorkspaceTrusted && !jupyter.webExtension"},{"command":"jupyter.execSelectionInteractive","title":"%jupyter.command.jupyter.execSelectionInteractive.title%","category":"Jupyter","enablement":"isWorkspaceTrusted && !jupyter.webExtension"},{"command":"jupyter.createnewinteractive","title":"%jupyter.command.jupyter.createnewinteractive.title%","category":"Jupyter","enablement":"isWorkspaceTrusted"},{"command":"jupyter.runFileInteractive","title":"%jupyter.command.jupyter.runFileInteractive.title%","icon":"$(play)","category":"Jupyter","enablement":"isWorkspaceTrusted"},{"command":"jupyter.debugFileInteractive","title":"%jupyter.command.jupyter.debugFileInteractive.title%","category":"Jupyter","enablement":"isWorkspaceTrusted && !jupyter.webExtension"},{"command":"jupyter.runallcells","title":"%jupyter.command.jupyter.runallcells.title%","category":"Jupyter","enablement":"isWorkspaceTrusted"},{"command":"jupyter.runallcellsabove","title":"%jupyter.command.jupyter.runallcellsabove.title%","category":"Jupyter","enablement":"isWorkspaceTrusted"},{"command":"jupyter.runcellandallbelow","title":"%jupyter.command.jupyter.runcellandallbelow.title%","category":"Jupyter","enablement":"isWorkspaceTrusted"},{"command":"jupyter.runcell","title":"%jupyter.command.jupyter.runcell.title%","category":"Jupyter","enablement":"isWorkspaceTrusted"},{"command":"jupyter.runtoline","title":"%jupyter.command.jupyter.runtoline.title%","category":"Jupyter","enablement":"isWorkspaceTrusted && !jupyter.webExtension"},{"command":"jupyter.runfromline","title":"%jupyter.command.jupyter.runfromline.title%","category":"Jupyter","enablement":"isWorkspaceTrusted && !jupyter.webExtension"},{"command":"jupyter.selectjupyteruri","title":"%jupyter.command.jupyter.selectjupyteruri.title%","category":"Jupyter","enablement":"isWorkspaceTrusted"},{"command":"jupyter.importnotebook","title":"%jupyter.command.jupyter.importnotebook.title%","category":"Jupyter","enablement":"isWorkspaceTrusted && !jupyter.webExtension"},{"command":"jupyter.importnotebookfile","title":"%jupyter.command.jupyter.importnotebookfile.title%","category":"Jupyter","enablement":"isWorkspaceTrusted && !jupyter.webExtension"},{"command":"jupyter.exportoutputasnotebook","title":"%jupyter.command.jupyter.exportoutputasnotebook.title%","category":"Jupyter","enablement":"isWorkspaceTrusted && !jupyter.webExtension"},{"command":"jupyter.exportfileasnotebook","title":"%jupyter.command.jupyter.exportfileasnotebook.title%","category":"Jupyter","enablement":"isWorkspaceTrusted && !jupyter.webExtension"},{"command":"jupyter.exportfileandoutputasnotebook","title":"%jupyter.command.jupyter.exportfileandoutputasnotebook.title%","category":"Jupyter","enablement":"isWorkspaceTrusted && !jupyter.webExtension"},{"command":"jupyter.notebookeditor.undocells","title":"%jupyter.command.jupyter.undocells.title%","category":"Notebook","enablement":"!jupyter.webExtension"},{"command":"jupyter.notebookeditor.redocells","title":"%jupyter.command.jupyter.redocells.title%","category":"Notebook","enablement":"!jupyter.webExtension"},{"command":"jupyter.interruptkernel","title":"%jupyter.command.jupyter.interruptkernel.title%","shortTitle":"%jupyter.command.jupyter.interruptkernel.shorttitle%","category":"Jupyter","icon":{"light":"resources/light/interrupt.svg","dark":"resources/dark/interrupt.svg"},"enablement":"isWorkspaceTrusted && jupyter.interactive.canInterruptNotebookKernel"},{"command":"jupyter.restartkernel","title":"%jupyter.command.jupyter.restartkernel.title%","shortTitle":"%jupyter.command.jupyter.restartkernel.shorttitle%","category":"Jupyter","icon":{"light":"resources/light/restart-kernel.svg","dark":"resources/dark/restart-kernel.svg"},"enablement":"isWorkspaceTrusted && jupyter.interactive.canRestartNotebookKernel"},{"command":"jupyter.notebookeditor.restartkernel","title":"%jupyter.command.jupyter.restartkernel.title%","shortTitle":"%jupyter.command.jupyter.restartkernel.shorttitle%","category":"Notebook","icon":{"light":"resources/light/restart-kernel.svg","dark":"resources/dark/restart-kernel.svg"},"enablement":"notebookKernel =~ /^ms-toolsai.jupyter\\\\// && jupyter.notebookeditor.canrestartNotebookkernel && isWorkspaceTrusted"},{"command":"jupyter.selectNativeJupyterUriFromToolBar","title":"%jupyter.command.jupyter.selectjupyteruri.title%","category":"Jupyter","icon":"$(debug-disconnect)","enablement":"isWorkspaceTrusted && !jupyter.webExtension && config.notebook.kernelPicker.type != mru"},{"command":"jupyter.notebookeditor.addcellbelow","title":"%jupyter.command.jupyter.notebookeditor.addcellbelow.title%","category":"Notebook","enablement":"!jupyter.webExtension"},{"command":"jupyter.notebookeditor.removeallcells","title":"%jupyter.command.jupyter.notebookeditor.removeallcells.title%","category":"Notebook","enablement":"!jupyter.webExtension"},{"command":"jupyter.notebookeditor.expandallcells","title":"%jupyter.command.jupyter.notebookeditor.expandallcells.title%","category":"Notebook","enablement":"!jupyter.webExtension"},{"command":"jupyter.notebookeditor.collapseallcells","title":"%jupyter.command.jupyter.notebookeditor.collapseallcells.title%","category":"Notebook","enablement":"!jupyter.webExtension"},{"command":"jupyter.expandallcells","title":"%jupyter.command.jupyter.expandallcells.title%","shortTitle":"%jupyter.command.jupyter.expandallcells.shorttitle%","category":"Jupyter","icon":"$(expand-all)"},{"command":"jupyter.collapseallcells","title":"%jupyter.command.jupyter.collapseallcells.title%","shortTitle":"%jupyter.command.jupyter.collapseallcells.shorttitle%","category":"Jupyter","icon":"$(collapse-all)"},{"command":"jupyter.addcellbelow","title":"%jupyter.command.jupyter.addcellbelow.title%","category":"Jupyter","enablement":"!jupyter.webExtension"},{"command":"jupyter.createnewnotebook","title":"%jupyter.command.jupyter.createnewnotebook.title%","category":"Jupyter","enablement":"!jupyter.webExtension"},{"command":"jupyter.scrolltocell","title":"%jupyter.command.jupyter.scrolltocell.title%","category":"Jupyter","enablement":"!jupyter.webExtension"},{"command":"jupyter.latestExtension","title":"DataScience.latestExtension","category":"Jupyter","enablement":"!jupyter.webExtension"},{"command":"jupyter.enableDebugLogging","title":"%jupyter.command.jupyter.enableDebugLogging.title%","category":"Jupyter","enablement":"!jupyter.webExtension"},{"command":"jupyter.resetLoggingLevel","title":"%jupyter.command.jupyter.resetLoggingLevel.title%","enablement":"!jupyter.webExtension","category":"Jupyter"},{"command":"jupyter.showDataViewer","title":"%jupyter.command.jupyter.showDataViewer.title%","enablement":"!jupyter.webExtension","category":"Jupyter"},{"command":"jupyter.clearSavedJupyterUris","title":"%jupyter.command.jupyter.clearSavedJupyterUris.title%","category":"Jupyter"},{"command":"jupyter.openVariableView","title":"%jupyter.command.jupyter.openVariableView.title%","shortTitle":"%jupyter.command.jupyter.openVariableView.shorttitle%","icon":"$(variable-group)","category":"Jupyter","enablement":"notebookType == jupyter-notebook && isWorkspaceTrusted || notebookType == interactive && isWorkspaceTrusted"},{"command":"jupyter.openOutlineView","title":"%jupyter.command.jupyter.openOutlineView.title%","shortTitle":"%jupyter.command.jupyter.openOutlineView.shorttitle%","icon":"$(list-unordered)","category":"Jupyter","enablement":"notebookType == jupyter-notebook"},{"command":"jupyter.refreshDataViewer","title":"%DataScience.refreshDataViewerCommandPalette%","category":"Jupyter","enablement":"jupyter.dataViewerActive && isWorkspaceTrusted"},{"command":"jupyter.interactive.clearAllCells","title":"%DataScience.interactiveClearAllCells%","icon":"$(close)","category":"Jupyter"},{"command":"jupyter.interactive.goToCode","title":"%DataScience.interactiveGoToCode%","icon":"$(go-to-file)","category":"Jupyter"},{"command":"jupyter.interactive.exportasnotebook","title":"%DataScience.exportDialogTitle%","shortTitle":"%DataScience.exportAsNotebook.shorttitle%","icon":"$(save-as)","enablement":"notebookType == interactive","category":"Jupyter"},{"command":"jupyter.interactive.exportas","title":"%DataScience.notebookExport%","icon":{"light":"resources/light/export_to_python.svg","dark":"resources/dark/export_to_python.svg"},"enablement":"notebookType == interactive","category":"Jupyter"},{"command":"jupyter.interactive.copyCell","title":"%DataScience.interactiveCopyCell%","icon":"$(copy)","category":"Jupyter"},{"command":"jupyter.runInDedicatedExtensionHost","title":"%DataScience.runInDedicatedExtensionHost%","enablement":"!jupyter.webExtension","category":"Jupyter"},{"command":"jupyter.installPythonExtensionViaKernelPicker","title":"%DataScience.installPythonExtensionViaKernelPickerTitle%"},{"command":"jupyter.installPythonViaKernelPicker","title":"%DataScience.installPythonTitle%"},{"command":"jupyter.switchToRemoteKernels","title":"%DataScience.switchToRemoteKernelsTitle%"}],"submenus":[{"id":"editor.interactiveWindow.context","label":"Run in Interactive Window"}],"menus":{"editor/context":[{"submenu":"editor.interactiveWindow.context","group":"Jupyter2"},{"when":"editorFocus && editorLangId == python && resourceExtname == .ipynb && !notebookEditorFocused && isWorkspaceTrusted","command":"jupyter.importnotebook","group":"Jupyter3@1"},{"when":"editorFocus && editorLangId == python && jupyter.hascodecells && !notebookEditorFocused && isWorkspaceTrusted","command":"jupyter.exportfileasnotebook","group":"Jupyter3@2"},{"when":"editorFocus && editorLangId == python && jupyter.hascodecells && !notebookEditorFocused && isWorkspaceTrusted","command":"jupyter.exportfileandoutputasnotebook","group":"Jupyter3@3"}],"editor.interactiveWindow.context":[{"when":"editorFocus && editorLangId == python && jupyter.hascodecells && !notebookEditorFocused && isWorkspaceTrusted","command":"jupyter.runallcells","group":"Jupyter2"},{"when":"editorFocus && editorLangId == python && jupyter.hascodecells && !notebookEditorFocused && isWorkspaceTrusted","command":"jupyter.runcurrentcell","group":"Jupyter2"},{"when":"editorFocus && editorLangId == python && jupyter.hascodecells && !notebookEditorFocused && isWorkspaceTrusted","command":"jupyter.runcurrentcelladvance","group":"Jupyter2"},{"command":"jupyter.runFileInteractive","group":"Jupyter2","when":"editorFocus && editorLangId == python && !notebookEditorFocused && isWorkspaceTrusted"},{"command":"jupyter.runfromline","group":"Jupyter2","when":"editorFocus && editorLangId == python && !notebookEditorFocused && isWorkspaceTrusted"},{"command":"jupyter.runtoline","group":"Jupyter2","when":"editorFocus && editorLangId == python && !notebookEditorFocused && isWorkspaceTrusted"},{"command":"jupyter.execSelectionInteractive","group":"Jupyter2","when":"editorFocus && editorLangId == python && !notebookEditorFocused && isWorkspaceTrusted"}],"editor/title":[{"command":"jupyter.notebookeditor.restartkernel","title":"%jupyter.command.jupyter.restartkernel.title%","group":"navigation@1","when":"notebookKernel =~ /^ms-toolsai.jupyter\\\\// && notebookType == \'jupyter-notebook\' && isWorkspaceTrusted && jupyter.notebookeditor.canrestartNotebookkernel && config.notebook.globalToolbar != true"},{"command":"jupyter.openVariableView","title":"%jupyter.command.jupyter.openVariableView.title%","group":"navigation@2","when":"notebookKernel =~ /^ms-toolsai.jupyter\\\\// && notebookType == \'jupyter-notebook\' && isWorkspaceTrusted && config.notebook.globalToolbar != true && jupyter.ispythonnotebook"},{"command":"jupyter.openOutlineView","title":"%jupyter.command.jupyter.openOutlineView.title%","group":"navigation@3","when":"notebookKernel =~ /^ms-toolsai.jupyter\\\\// && notebookType == \'jupyter-notebook\' && config.jupyter.showOutlineButtonInNotebookToolbar && config.notebook.globalToolbar != true"},{"command":"jupyter.notebookeditor.export","title":"%DataScience.notebookExportAs%","group":"navigation@4","when":"notebookType == \'jupyter-notebook\' && isWorkspaceTrusted && config.notebook.globalToolbar != true"},{"command":"jupyter.selectNativeJupyterUriFromToolBar","title":"%jupyter.command.jupyter.selectjupyteruri.title%","group":"overflow@1000","when":"notebookType == \'jupyter-notebook\' && isWorkspaceTrusted && config.notebook.globalToolbar != true && config.notebook.kernelPicker.type != mru"}],"notebook/toolbar":[{"command":"jupyter.notebookeditor.restartkernel","group":"navigation/execute@1","when":"notebookKernel =~ /^ms-toolsai.jupyter\\\\// && notebookType == \'jupyter-notebook\' && isWorkspaceTrusted && jupyter.kernel.isjupyter"},{"command":"jupyter.openVariableView","group":"navigation@1","when":"notebookKernel =~ /^ms-toolsai.jupyter\\\\// && notebookType == \'jupyter-notebook\' && isWorkspaceTrusted && jupyter.ispythonnotebook && jupyter.kernel.isjupyter"},{"command":"jupyter.openOutlineView","group":"navigation@2","when":"notebookType == \'jupyter-notebook\' && config.jupyter.showOutlineButtonInNotebookToolbar"},{"command":"jupyter.notebookeditor.export","group":"Jupyter","when":"notebookType == \'jupyter-notebook\' && isWorkspaceTrusted"},{"command":"jupyter.replayPylanceLogStep","group":"navigation@1","when":"notebookType == \'jupyter-notebook\' && isWorkspaceTrusted && jupyter.replayLogLoaded"}],"notebook/cell/title":[{"command":"jupyter.runByLine","when":"notebookKernel =~ /^ms-toolsai.jupyter\\\\// && notebookType == jupyter-notebook && jupyter.ispythonnotebook && notebookCellType == code && isWorkspaceTrusted && resource not in jupyter.notebookeditor.runByLineDocuments || !notebookKernel && notebookType == jupyter-notebook && jupyter.ispythonnotebook && notebookCellType == code && isWorkspaceTrusted","group":"inline/cell@0"},{"command":"jupyter.runByLineNext","when":"notebookCellResource in jupyter.notebookeditor.runByLineCells","group":"inline/cell@0"},{"command":"jupyter.runByLineStop","when":"notebookCellResource in jupyter.notebookeditor.runByLineCells && notebookCellToolbarLocation == left","group":"inline/cell@1"},{"command":"jupyter.runByLineStop","when":"notebookCellResource in jupyter.notebookeditor.runByLineCells && notebookCellToolbarLocation == right","group":"inline/cell@0"}],"notebook/cell/execute":[{"command":"jupyter.runAndDebugCell","when":"notebookKernel =~ /^ms-toolsai.jupyter\\\\// && jupyter.ispythonnotebook && notebookCellType == code && isWorkspaceTrusted && resource not in jupyter.notebookeditor.debugDocuments || !notebookKernel && jupyter.ispythonnotebook && notebookCellType == code && isWorkspaceTrusted"}],"notebook/kernelSource":[{"command":"jupyter.installPythonExtensionViaKernelPicker","when":"jupyter.showInstallPythonExtensionCommand && config.notebook.kernelPicker.type != mru"},{"command":"jupyter.installPythonViaKernelPicker","when":"jupyter.showInstallPythonCommand && config.notebook.kernelPicker.type != mru"},{"command":"jupyter.switchToRemoteKernels","when":"jupyter.showingLocalOrWebEmpty && config.notebook.kernelPicker.type != mru"}],"interactive/toolbar":[{"command":"jupyter.interactive.clearAllCells","group":"navigation@0","when":"isWorkspaceTrusted && notebookKernel =~ /^ms-toolsai.jupyter\\\\// || isWorkspaceTrusted && !notebookKernel"},{"command":"jupyter.restartkernel","group":"navigation@1","when":"isWorkspaceTrusted && notebookKernel =~ /^ms-toolsai.jupyter\\\\// || isWorkspaceTrusted && !notebookKernel"},{"command":"jupyter.interruptkernel","group":"navigation@2","when":"isWorkspaceTrusted && notebookKernel =~ /^ms-toolsai.jupyter\\\\// || isWorkspaceTrusted && !notebookKernel"},{"command":"jupyter.openVariableView","group":"navigation@3","when":"isWorkspaceTrusted && notebookKernel =~ /^ms-toolsai.jupyter\\\\// || isWorkspaceTrusted && !notebookKernel"},{"command":"jupyter.interactive.exportasnotebook","group":"navigation@4","when":"isWorkspaceTrusted && notebookKernel =~ /^ms-toolsai.jupyter\\\\// || isWorkspaceTrusted && !notebookKernel"},{"command":"jupyter.interactive.exportas","group":"navigation@5","when":"isWorkspaceTrusted && notebookKernel =~ /^ms-toolsai.jupyter\\\\// || isWorkspaceTrusted && !notebookKernel"},{"command":"jupyter.expandallcells","group":"navigation@6","when":"isWorkspaceTrusted && notebookKernel =~ /^ms-toolsai.jupyter\\\\// || isWorkspaceTrusted && !notebookKernel"},{"command":"jupyter.collapseallcells","group":"navigation@7","when":"isWorkspaceTrusted && notebookKernel =~ /^ms-toolsai.jupyter\\\\// || isWorkspaceTrusted && !notebookKernel"}],"interactive/cell/title":[{"command":"jupyter.interactive.copyCell","group":"inline@0","when":"isWorkspaceTrusted && notebookKernel =~ /^ms-toolsai.jupyter\\\\// || isWorkspaceTrusted && !notebookKernel"},{"command":"jupyter.interactive.goToCode","group":"inline@1","when":"isWorkspaceTrusted && notebookKernel =~ /^ms-toolsai.jupyter\\\\// || isWorkspaceTrusted && !notebookKernel"}],"explorer/context":[{"when":"resourceLangId == python && !notebookEditorFocused && isWorkspaceTrusted","command":"jupyter.runFileInteractive","group":"Jupyter2"},{"when":"resourceExtname == .ipynb && isWorkspaceTrusted","command":"jupyter.importnotebookfile","group":"Jupyter"}],"commandPalette":[{"command":"jupyter.installPythonExtensionViaKernelPicker","when":"false"},{"command":"jupyter.installPythonViaKernelPicker","when":"false"},{"command":"jupyter.replayPylanceLog","title":"%jupyter.commandPalette.jupyter.replayPylanceLog.title%","when":"jupyter.development && isWorkspaceTrusted"},{"command":"jupyter.interactive.copyCell","when":"false"},{"command":"jupyter.exportAsPythonScript","title":"%jupyter.command.jupyter.exportAsPythonScript.title%","category":"Jupyter","when":"jupyter.isnativeactive && isWorkspaceTrusted && jupyter.ispythonnotebook && isWorkspaceTrusted"},{"command":"jupyter.refreshDataViewer","category":"Jupyter","when":"isWorkspaceTrusted"},{"command":"jupyter.exportToHTML","title":"%jupyter.command.jupyter.exportToHTML.title%","category":"Jupyter","when":"jupyter.isnativeactive && isWorkspaceTrusted"},{"command":"jupyter.exportToPDF","title":"%jupyter.command.jupyter.exportToPDF.title%","category":"Jupyter","when":"jupyter.isnativeactive && isWorkspaceTrusted"},{"command":"jupyter.insertCellBelowPosition","title":"%jupyter.command.jupyter.insertCellBelowPosition.title%","category":"Jupyter","when":"jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.insertCellBelow","title":"%jupyter.command.jupyter.insertCellBelow.title%","category":"Jupyter","when":"jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.insertCellAbove","title":"%jupyter.command.jupyter.insertCellAbove.title%","category":"Jupyter","when":"jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.deleteCells","title":"%jupyter.command.jupyter.deleteCells.title%","category":"Jupyter","when":"jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.selectCell","title":"%jupyter.command.jupyter.selectCell.title%","category":"Jupyter","when":"jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.selectCellContents","title":"%jupyter.command.jupyter.selectCellContents.title%","category":"Jupyter","when":"jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.extendSelectionByCellAbove","title":"%jupyter.command.jupyter.extendSelectionByCellAbove.title%","category":"Jupyter","when":"jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.extendSelectionByCellBelow","title":"%jupyter.command.jupyter.extendSelectionByCellBelow.title%","category":"Jupyter","when":"jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.moveCellsUp","title":"%jupyter.command.jupyter.moveCellsUp.title%","category":"Jupyter","when":"jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.moveCellsDown","title":"%jupyter.command.jupyter.moveCellsDown.title%","category":"Jupyter","when":"jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.changeCellToMarkdown","title":"%jupyter.command.jupyter.changeCellToMarkdown.title%","category":"Jupyter","when":"jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.changeCellToCode","title":"%jupyter.command.jupyter.changeCellToCode.title%","category":"Jupyter","when":"jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.gotoNextCellInFile","title":"%jupyter.command.jupyter.gotoNextCellInFile.title%","category":"Jupyter","when":"jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.gotoPrevCellInFile","title":"%jupyter.command.jupyter.gotoPrevCellInFile.title%","category":"Jupyter","when":"jupyter.hascodecells && !notebookEditorFocused"},{"command":"jupyter.runcurrentcell","title":"%jupyter.command.jupyter.runcurrentcell.title%","category":"Jupyter","when":"jupyter.hascodecells && jupyter.ispythonornativeactive && !jupyter.havenativecells && isWorkspaceTrusted"},{"command":"jupyter.runcurrentcelladvance","title":"%jupyter.command.jupyter.runcurrentcelladvance.title%","category":"Jupyter","when":"jupyter.hascodecells && jupyter.ispythonornativeactive && !jupyter.havenativecells && isWorkspaceTrusted"},{"command":"jupyter.runcurrentcellandallbelow.palette","title":"%jupyter.command.jupyter.runcurrentcellandallbelow.palette.title%","category":"Jupyter","when":"jupyter.hascodecells && jupyter.ispythonornativeactive && !jupyter.havenativecells && isWorkspaceTrusted"},{"command":"jupyter.runallcellsabove.palette","title":"%jupyter.command.jupyter.runallcellsabove.palette.title%","category":"Jupyter","when":"jupyter.hascodecells && jupyter.ispythonornativeactive && !jupyter.havenativecells && isWorkspaceTrusted"},{"command":"jupyter.debugcurrentcell.palette","title":"%jupyter.command.jupyter.debugcurrentcell.palette.title%","category":"Jupyter","when":"editorLangId == python && jupyter.hascodecells && isWorkspaceTrusted"},{"command":"jupyter.createnewinteractive","title":"%jupyter.command.jupyter.createnewinteractive.title%","category":"Jupyter","when":"isWorkspaceTrusted"},{"command":"jupyter.runallcells","title":"%jupyter.command.jupyter.runallcells.title%","category":"Jupyter","when":"jupyter.hascodecells && jupyter.ispythonornativeactive && isWorkspaceTrusted"},{"command":"jupyter.scrolltocell","title":"%jupyter.command.jupyter.scrolltocell.title%","category":"Jupyter","when":"false"},{"command":"jupyter.debugcell","title":"%jupyter.command.jupyter.debugcell.title%","category":"Jupyter","when":"config.noExists"},{"command":"jupyter.runcell","title":"%jupyter.command.jupyter.runcell.title%","category":"Jupyter","when":"config.noExists"},{"command":"jupyter.runFileInteractive","title":"%jupyter.command.jupyter.runFileInteractive.title%","category":"Jupyter","when":"editorLangId == python && !notebookEditorFocused && isWorkspaceTrusted"},{"command":"jupyter.debugFileInteractive","title":"%jupyter.command.jupyter.debugFileInteractive.title%","category":"Jupyter","when":"editorLangId == python && !notebookEditorFocused && isWorkspaceTrusted"},{"command":"jupyter.importnotebook","title":"%jupyter.command.jupyter.importnotebook.title%","category":"Jupyter","when":"isWorkspaceTrusted"},{"command":"jupyter.exportfileasnotebook","title":"%jupyter.command.jupyter.exportfileasnotebook.title%","category":"Jupyter","when":"jupyter.hascodecells && jupyter.ispythonorinteractiveeactive && !notebookEditorFocused && isWorkspaceTrusted"},{"command":"jupyter.exportfileandoutputasnotebook","title":"%jupyter.command.jupyter.exportfileandoutputasnotebook.title%","category":"Jupyter","when":"jupyter.hascodecells && jupyter.ispythonorinteractiveeactive && !notebookEditorFocused && isWorkspaceTrusted"},{"command":"jupyter.interruptkernel","title":"%jupyter.command.jupyter.interruptkernel.title%","category":"Jupyter","when":"jupyter.ispythonorinteractiveeactive && isWorkspaceTrusted"},{"command":"jupyter.restartkernel","title":"%jupyter.command.jupyter.restartkernel.title%","category":"Jupyter","when":"jupyter.ispythonorinteractiveeactive && isWorkspaceTrusted"},{"command":"jupyter.notebookeditor.removeallcells","title":"%jupyter.command.jupyter.notebookeditor.removeallcells.title%","category":"Notebook","when":"jupyter.havenativecells && jupyter.isnativeactive && isWorkspaceTrusted"},{"command":"jupyter.notebookeditor.restartkernel","title":"%jupyter.command.jupyter.restartkernel.title%","category":"Notebook","when":"jupyter.isnativeactive && isWorkspaceTrusted"},{"command":"jupyter.notebookeditor.addcellbelow","title":"%jupyter.command.jupyter.notebookeditor.addcellbelow.title%","category":"Notebook","when":"jupyter.isnativeactive && isWorkspaceTrusted"},{"command":"jupyter.notebookeditor.expandallcells","title":"%jupyter.command.jupyter.expandallcells.title%","category":"Notebook","when":"notebookEditorFocused && notebookType == \'jupyter-notebook\'"},{"command":"jupyter.notebookeditor.collapseallcells","title":"%jupyter.command.jupyter.collapseallcells.title%","category":"Notebook","when":"notebookEditorFocused && notebookType == \'jupyter-notebook\'"},{"command":"jupyter.expandallcells","title":"%jupyter.command.jupyter.expandallcells.title%","shortTitle":"%jupyter.command.jupyter.expandallcells.shorttitle%","category":"Jupyter","when":"jupyter.isinteractiveactive"},{"command":"jupyter.collapseallcells","title":"%jupyter.command.jupyter.collapseallcells.title%","shortTitle":"%jupyter.command.jupyter.collapseallcells.shorttitle%","category":"Jupyter","when":"jupyter.isinteractiveactive"},{"command":"jupyter.exportoutputasnotebook","title":"%jupyter.command.jupyter.exportoutputasnotebook.title%","category":"Jupyter","when":"jupyter.isinteractiveactive"},{"command":"jupyter.runcellandallbelow","category":"Jupyter","when":"config.noExists"},{"command":"jupyter.runallcellsabove","category":"Jupyter","when":"config.noExists"},{"command":"jupyter.debugcontinue","category":"Jupyter","when":"config.noExists"},{"command":"jupyter.debugstop","category":"Jupyter","when":"config.noExists"},{"command":"jupyter.debugstepover","category":"Jupyter","when":"config.noExists"},{"command":"jupyter.debugcell","category":"Jupyter","when":"config.noExists"},{"command":"jupyter.addcellbelow","title":"%jupyter.command.jupyter.addcellbelow.title%","category":"Jupyter","when":"jupyter.hascodecells && jupyter.ispythonornativeactive"},{"command":"jupyter.createnewnotebook","category":"Jupyter","when":"false"},{"command":"jupyter.runtoline","category":"Jupyter","when":"config.noExists"},{"command":"jupyter.runfromline","category":"Jupyter","when":"config.noExists"},{"command":"jupyter.execSelectionInteractive","category":"Jupyter","when":"editorLangId == python && !notebookEditorFocused && isWorkspaceTrusted"},{"command":"jupyter.latestExtension","title":"%DataScience.latestExtension%","category":"Jupyter","when":"false"},{"command":"jupyter.export","title":"%DataScience.notebookExportAs%","category":"Jupyter","when":"false"},{"command":"jupyter.notebookeditor.export","title":"%DataScience.notebookExportAs%","category":"Notebook","when":"false"},{"command":"jupyter.resetLoggingLevel","title":"%jupyter.command.jupyter.resetLoggingLevel.title%","category":"Jupyter","when":"config.jupyter.logging.level != error"},{"command":"jupyter.enableDebugLogging","title":"%jupyter.command.jupyter.enableDebugLogging.title%","category":"Jupyter","when":"config.jupyter.logging.level != debug"},{"command":"jupyter.showDataViewer","category":"Jupyter","when":"false"},{"command":"jupyter.openVariableView","title":"%jupyter.command.jupyter.openVariableView.title%","category":"Jupyter","when":"notebookType == jupyter-notebook && isWorkspaceTrusted"},{"command":"jupyter.openOutlineView","title":"%jupyter.command.jupyter.openOutlineView.title%","category":"Jupyter","when":"notebookType == jupyter-notebook && isWorkspaceTrusted"},{"command":"jupyter.selectNativeJupyterUriFromToolBar","title":"%jupyter.command.jupyter.selectjupyteruri.title%","when":"false"},{"command":"jupyter.interactive.goToCode","when":"false"},{"command":"jupyter.interactive.clearAllCells","when":"editorFocus && editorLangId == python || activeEditor == \'workbench.editor.interactive\'"},{"command":"jupyter.switchToRemoteKernels","when":"false"},{"command":"jupyter.selectjupyteruri","title":"%jupyter.command.jupyter.selectjupyteruri.title%","when":"isWorkspaceTrusted && config.notebook.kernelPicker.type != mru"},{"command":"jupyter.clearSavedJupyterUris","title":"%jupyter.command.jupyter.clearSavedJupyterUris.title%","when":"config.notebook.kernelPicker.type != mru"}],"debug/variables/context":[{"command":"jupyter.showDataViewer","group":"1_view","when":"debugProtocolVariableMenuContext == \'viewableInDataViewer\'"}],"editor/title/run":[{"command":"jupyter.runFileInteractive","group":"jupyter","when":"resourceLangId == python && !isInDiffEditor && !notebookEditorFocused && isWorkspaceTrusted"}]},"configuration":{"type":"object","title":"Jupyter","properties":{"jupyter.experiments.enabled":{"type":"boolean","default":true,"description":"%jupyter.configuration.jupyter.experiments.enabled.description%","scope":"machine"},"jupyter.showVariableViewWhenDebugging":{"type":"boolean","default":false,"description":"%jupyter.configuration.jupyter.showVariableViewWhenDebugging.description%","scope":"resource"},"jupyter.logging.level":{"type":"string","default":"debug","enum":["off","error","warn","info","debug","verbose","everything"],"description":"%jupyter.configuration.jupyter.logging.level.description%"},"jupyter.experiments.optInto":{"type":"array","default":[],"items":{"enum":[]},"markdownDescription":"%jupyter.configuration.jupyter.experiments.optInto.markdownDescription%","scope":"application"},"jupyter.experiments.optOutFrom":{"type":"array","default":[],"items":{"enum":[]},"markdownDescription":"%jupyter.configuration.jupyter.experiments.optOutFrom.markdownDescription%","scope":"application"},"jupyter.widgetScriptSources":{"type":"array","default":[],"items":{"type":"string","enum":["jsdelivr.com","unpkg.com"],"enumDescriptions":["%jupyter.configuration.jupyter.widgetScriptSources.items.enumDescriptions.0%","%jupyter.configuration.jupyter.widgetScriptSources.items.enumDescriptions.1%"]},"uniqueItems":true,"markdownDescription":"%jupyter.configuration.jupyter.widgetScriptSources.markdownDescription%","scope":"application"},"jupyter.askForLargeDataFrames":{"type":"boolean","default":true,"description":"%jupyter.configuration.jupyter.askForLargeDataFrames.description%","scope":"application"},"jupyter.askForKernelRestart":{"type":"boolean","default":true,"description":"%jupyter.configuration.jupyter.askForKernelRestart.description%"},"jupyter.exportWithOutputEnabled":{"type":"boolean","default":false,"description":"%jupyter.configuration.jupyter.exportWithOutputEnabled.description%","scope":"resource"},"jupyter.jupyterLaunchTimeout":{"type":"number","default":60000,"description":"%jupyter.configuration.jupyter.jupyterLaunchTimeout.description%"},"jupyter.jupyterLaunchRetries":{"type":"number","default":3,"description":"%jupyter.configuration.jupyter.jupyterLaunchRetries.description%"},"jupyter.jupyterCommandLineArguments":{"type":"array","default":[],"description":"%jupyter.configuration.jupyter.jupyterCommandLineArguments.description%","scope":"resource"},"jupyter.notebookFileRoot":{"type":"string","default":"${fileDirname}","description":"%jupyter.configuration.jupyter.notebookFileRoot.description%","scope":"resource"},"jupyter.searchForJupyter":{"type":"boolean","default":true,"deprecationMessage":"%jupyter.configuration.jupyter.searchForJupyter.deprecationMessage%","description":"%jupyter.configuration.jupyter.searchForJupyter.description%","scope":"resource"},"jupyter.useDefaultConfigForJupyter":{"type":"boolean","default":true,"description":"%jupyter.configuration.jupyter.useDefaultConfigForJupyter.description%"},"jupyter.jupyterInterruptTimeout":{"type":"number","default":10000,"description":"%jupyter.configuration.jupyter.jupyterInterruptTimeout.description%"},"jupyter.sendSelectionToInteractiveWindow":{"type":"boolean","default":false,"description":"%jupyter.configuration.jupyter.sendSelectionToInteractiveWindow.description%","deprecationMessage":"%jupyter.configuration.jupyter.sendSelectionToInteractiveWindow.deprecationMessage%","scope":"resource"},"jupyter.interactiveWindow.textEditor.executeSelection":{"type":"boolean","default":false,"description":"%jupyter.configuration.jupyter.sendSelectionToInteractiveWindow.description%","scope":"resource"},"jupyter.variableExplorerExclude":{"type":"string","default":"module;function;builtin_function_or_method;ABCMeta;type","description":"%jupyter.configuration.jupyter.variableExplorerExclude.description%","scope":"resource"},"jupyter.codeRegularExpression":{"type":"string","default":"^(#\\\\s*%%|#\\\\s*\\\\<codecell\\\\>|#\\\\s*In\\\\[\\\\d*?\\\\]|#\\\\s*In\\\\[ \\\\])","description":"%jupyter.configuration.jupyter.codeRegularExpression.description%","deprecationMessage":"%jupyter.configuration.jupyter.codeRegularExpression.deprecationMessage%","scope":"resource"},"jupyter.interactiveWindow.cellMarker.codeRegex":{"type":"string","default":"^(#\\\\s*%%|#\\\\s*\\\\<codecell\\\\>|#\\\\s*In\\\\[\\\\d*?\\\\]|#\\\\s*In\\\\[ \\\\])","description":"%jupyter.configuration.jupyter.codeRegularExpression.description%","scope":"resource"},"jupyter.defaultCellMarker":{"type":"string","default":"# %%","description":"%jupyter.configuration.jupyter.defaultCellMarker.description%","deprecationMessage":"%jupyter.configuration.jupyter.defaultCellMarker.deprecationMessage%","scope":"resource"},"jupyter.interactiveWindow.cellMarker.default":{"type":"string","default":"# %%","description":"%jupyter.configuration.jupyter.defaultCellMarker.description%","scope":"resource"},"jupyter.markdownRegularExpression":{"type":"string","default":"^(#\\\\s*%%\\\\s*\\\\[markdown\\\\]|#\\\\s*\\\\<markdowncell\\\\>)","description":"%jupyter.configuration.jupyter.markdownRegularExpression.description%","deprecationMessage":"%jupyter.configuration.jupyter.markdownRegularExpression.deprecationMessage%","scope":"resource"},"jupyter.interactiveWindow.cellMarker.markdownRegex":{"type":"string","default":"^(#\\\\s*%%\\\\s*\\\\[markdown\\\\]|#\\\\s*\\\\<markdowncell\\\\>)","description":"%jupyter.configuration.jupyter.markdownRegularExpression.description%","scope":"resource"},"jupyter.ignoreVscodeTheme":{"type":"boolean","default":false,"deprecationMessage":"%jupyter.configuration.jupyter.ignoreVscodeTheme.deprecationMessage%","description":"%jupyter.configuration.jupyter.ignoreVscodeTheme.description%"},"jupyter.themeMatplotlibPlots":{"type":"boolean","default":false,"description":"%jupyter.configuration.jupyter.themeMatplotlibPlots.description%"},"jupyter.decorateCells":{"type":"boolean","default":true,"description":"%jupyter.configuration.jupyter.decorateCells.description%","deprecationMessage":"%jupyter.configuration.jupyter.decorateCells.deprecationMessage%","scope":"resource"},"jupyter.interactiveWindow.cellMarker.decorateCells":{"type":"boolean","default":true,"description":"%jupyter.configuration.jupyter.decorateCells.description%","scope":"resource"},"jupyter.enableCellCodeLens":{"type":"boolean","default":true,"description":"%jupyter.configuration.jupyter.enableCellCodeLens.description%","deprecationMessage":"%jupyter.configuration.jupyter.enableCellCodeLens.deprecationMessage%","scope":"resource"},"jupyter.interactiveWindow.codeLens.enable":{"type":"boolean","default":true,"description":"%jupyter.configuration.jupyter.enableCellCodeLens.description%","scope":"resource"},"jupyter.enableAutoMoveToNextCell":{"type":"boolean","default":true,"description":"%jupyter.configuration.jupyter.enableAutoMoveToNextCell.description%","deprecationMessage":"%jupyter.configuration.jupyter.enableAutoMoveToNextCell.deprecationMessage%","scope":"resource"},"jupyter.interactiveWindow.textEditor.autoMoveToNextCell":{"type":"boolean","default":true,"description":"%jupyter.configuration.jupyter.enableAutoMoveToNextCell.description%","scope":"resource"},"jupyter.allowUnauthorizedRemoteConnection":{"type":"boolean","default":false,"description":"%jupyter.configuration.jupyter.allowUnauthorizedRemoteConnection.description%"},"jupyter.generateSVGPlots":{"type":"boolean","default":false,"description":"%jupyter.configuration.jupyter.generateSVGPlots.description%","deprecationMessage":"%jupyter.configuration.jupyter.generateSVGPlots.deprecationMessage%","scope":"resource"},"jupyter.codeLenses":{"type":"string","default":"jupyter.runcell, jupyter.runallcellsabove, jupyter.debugcell","description":"%jupyter.configuration.jupyter.codeLenses.description%","deprecationMessage":"%jupyter.configuration.jupyter.codeLenses.deprecationMessage%","scope":"resource"},"jupyter.interactiveWindow.codeLens.commands":{"type":"string","default":"jupyter.runcell, jupyter.runallcellsabove, jupyter.debugcell","description":"%jupyter.configuration.jupyter.codeLenses.description%","scope":"resource"},"jupyter.debugCodeLenses":{"type":"string","default":"jupyter.debugcontinue, jupyter.debugstop, jupyter.debugstepover","description":"%jupyter.configuration.jupyter.debugCodeLenses.description%","deprecationMessage":"%jupyter.configuration.jupyter.debugCodeLenses.deprecationMessage%","scope":"resource"},"jupyter.interactiveWindow.codeLes.debugCommands":{"type":"string","default":"jupyter.debugcontinue, jupyter.debugstop, jupyter.debugstepover","description":"%jupyter.configuration.jupyter.debugCodeLenses.description%","scope":"resource"},"jupyter.debugpyDistPath":{"type":"string","default":"","description":"%jupyter.configuration.jupyter.debugpyDistPath.description%","scope":"resource"},"jupyter.stopOnFirstLineWhileDebugging":{"type":"boolean","default":true,"description":"%jupyter.configuration.jupyter.stopOnFirstLineWhileDebugging.description%","scope":"resource"},"jupyter.remoteDebuggerPort":{"type":"number","default":-1,"description":"%jupyter.configuration.jupyter.remoteDebuggerPort.description%","deprecationMessage":"%jupyter.configuration.jupyter.remoteDebuggerPort.deprecationMessage%","scope":"resource"},"jupyter.disableJupyterAutoStart":{"type":"boolean","default":false,"description":"%jupyter.configuration.jupyter.disableJupyterAutoStart.description%"},"jupyter.addGotoCodeLenses":{"type":"boolean","default":true,"description":"%jupyter.configuration.jupyter.addGotoCodeLenses.description%","deprecationMessage":"%jupyter.configuration.jupyter.addGotoCodeLenses.deprecationMessage%","scope":"resource"},"jupyter.interactiveWindow.codeLens.enableGotoCell":{"type":"boolean","default":true,"description":"%jupyter.configuration.jupyter.addGotoCodeLenses.description%","scope":"resource"},"jupyter.variableQueries":{"type":"array","markdownDescription":"%jupyter.configuration.jupyter.variableQueries.markdownDescription%","deprecationMessage":"%jupyter.configuration.jupyter.variableQueries.deprecationMessage%","scope":"machine","examples":[[{"language":"python","query":"_rwho_ls = %who_ls\\\\nprint(_rwho_ls)","parseExpr":"\'(\\\\w+)\'"},{"language":"julia","query":"whos","parseExpr":"\'(\\\\w+)\'"}]]},"jupyter.kernels.filter":{"type":"array","items":{"type":"object","properties":{"type":{"enum":["jupyterKernelspec","pythonEnvironment"]},"path":{"type":"string","markdownDescription":"%jupyter.configuration.jupyter.kernels.filter.items.markdownDescription%"},"required":["type","path"]}},"markdownDescription":"%jupyter.configuration.jupyter.kernels.filter.markdownDescription%","scope":"machine-overridable","examples":[[{"type":"jupyterKernelspec","path":"/usr/share/jupyter/kernels/sample/kernelspec.json"},{"type":"jupyterKernelspec","path":"~/miniconda3/envs/sample/scripts/python.exe"}]]},"jupyter.kernels.trusted":{"type":"array","items":{"type":"string"},"default":[],"markdownDescription":"%jupyter.configuration.jupyter.kernels.trusted.markdownDescription%","scope":"machine"},"jupyter.interactiveWindowMode":{"type":"string","enum":["perFile","single","multiple"],"scope":"resource","description":"%jupyter.configuration.jupyter.interactiveWindowMode.description%","deprecationMessage":"%jupyter.configuration.jupyter.interactiveWindowMode.deprecationMessage%","default":"multiple"},"jupyter.interactiveWindow.creationMode":{"type":"string","enum":["perFile","single","multiple"],"scope":"resource","description":"%jupyter.configuration.jupyter.interactiveWindowMode.description%","default":"multiple"},"jupyter.pythonCellFolding":{"type":"boolean","default":true,"description":"%jupyter.configuration.jupyter.pythonCellFolding.description%","deprecationMessage":"%jupyter.configuration.jupyter.pythonCellFolding.deprecationMessage%","scope":"resource"},"jupyter.interactiveWindow.textEditor.cellFolding":{"type":"boolean","default":true,"description":"%jupyter.configuration.jupyter.pythonCellFolding.description%","scope":"resource"},"jupyter.interactiveWindowViewColumn":{"type":"string","enum":["beside","active","secondGroup"],"scope":"resource","description":"%jupyter.configuration.jupyter.interactiveWindowViewColumn.description%","deprecationMessage":"%jupyter.configuration.jupyter.interactiveWindowViewColumn.deprecationMessage%","default":"secondGroup"},"jupyter.interactiveWindow.viewColumn":{"type":"string","enum":["beside","active","secondGroup"],"scope":"resource","description":"%jupyter.configuration.jupyter.interactiveWindowViewColumn.description%","default":"secondGroup"},"jupyter.magicCommandsAsComments":{"type":"boolean","default":false,"description":"%jupyter.configuration.jupyter.magicCommandsAsComments.description%","deprecationMessage":"%jupyter.configuration.jupyter.magicCommandsAsComments.deprecationMessage%"},"jupyter.interactiveWindow.textEditor.magicCommandsAsComments":{"type":"boolean","default":false,"description":"%jupyter.configuration.jupyter.magicCommandsAsComments.description%"},"jupyter.pythonExportMethod":{"type":"string","enum":["direct","commentMagics","nbconvert"],"default":"direct","description":"%jupyter.configuration.jupyter.pythonExportMethod.description%","scope":"application"},"jupyter.runStartupCommands":{"type":"array","default":"","description":"%jupyter.configuration.jupyter.runStartupCommands.description%","scope":"application"},"jupyter.debugJustMyCode":{"type":"boolean","default":true,"description":"%jupyter.configuration.jupyter.debugJustMyCode.description%","scope":"resource"},"jupyter.showOutlineButtonInNotebookToolbar":{"type":"boolean","default":true,"description":"%jupyter.configuration.jupyter.showOutlineButtonInNotebookToolbar.description%"},"jupyter.newCellOnRunLast":{"type":"boolean","default":true,"description":"%jupyter.configuration.jupyter.newCellOnRunLast.description%","deprecationMessage":"%jupyter.configuration.jupyter.newCellOnRunLast.deprecationMessage%","scope":"resource"},"jupyter.interactiveWindow.textEditor.autoAddNewCell":{"type":"boolean","default":true,"description":"%jupyter.configuration.jupyter.newCellOnRunLast.description%","scope":"resource"},"jupyter.pythonCompletionTriggerCharacters":{"type":"string","default":".%\'\\"","description":"%jupyter.configuration.jupyter.pythonCompletionTriggerCharacters.description%","scope":"application"},"jupyter.logKernelOutputSeparately":{"type":"boolean","default":false,"description":"%jupyter.configuration.jupyter.logKernelOutputSeparately.description%"},"jupyter.excludeUserSitePackages":{"type":"boolean","default":false,"description":"%jupyter.configuration.jupyter.excludeUserSitePackages.description%","scope":"application"},"jupyter.enableExtendedKernelCompletions":{"type":"boolean","default":false,"markdownDescription":"%jupyter.configuration.jupyter.enableExtendedKernelCompletions.markdownDescription%","scope":"application"}}},"languages":[{"id":"raw"},{"id":"julia","aliases":["Julia","julia"],"extensions":[".jl"]}],"notebookPreload":[{"type":"jupyter-notebook","entrypoint":"./out/webviews/webview-side/ipywidgetsKernel/ipywidgetsKernel.js"},{"type":"interactive","entrypoint":"./out/webviews/webview-side/ipywidgetsKernel/ipywidgetsKernel.js"}],"notebookRenderer":[{"id":"jupyter-ipywidget-renderer","entrypoint":"./out/webviews/webview-side/ipywidgetsRenderer/ipywidgetsRenderer.js","displayName":"%jupyter.notebookRenderer.IPyWidget.displayName%","mimeTypes":["application/vnd.jupyter.widget-view+json"],"requiresMessaging":"always"}],"viewsContainers":{"activitybar":[{"id":"jupyter","title":"Jupyter","icon":"$(notebook)"}],"panel":[{"id":"jupyter-variables","title":"Jupyter","icon":"$(notebook)"}]},"views":{"jupyter-variables":[{"type":"webview","id":"jupyterViewVariables","name":"Variables","when":"jupyter.hasNativeNotebookOrInteractiveWindowOpen"}]},"debuggers":[{"type":"Python Kernel Debug Adapter","label":"%jupyter.debuggers.kernel%"},{"type":"Python Interactive Window Debug Adapter","label":"%jupyter.debuggers.interactive%"}]},"enabledApiProposals":["notebookControllerKind","notebookDeprecated","notebookMessaging","notebookMime","notebookCellExecutionState","portsAttributes","quickPickSortByLabel","notebookKernelSource","interactiveWindow","notebookControllerAffinityHidden"],"scripts":{"package":"gulp clean && gulp prePublishBundle && vsce package -o ms-toolsai-jupyter-insiders.vsix","packagePreRelease":"gulp clean && gulp prePublishBundle && vsce package --pre-release -o ms-toolsai-jupyter-insiders.vsix","prePublishBundleStable":"cross-env IS_PRE_RELEASE_VERSION_OF_JUPYTER_EXTENSION=false gulp prePublishBundle","prePublishBundlePreRelease":"cross-env IS_PRE_RELEASE_VERSION_OF_JUPYTER_EXTENSION=true gulp prePublishBundle","prePublishNonBundle":"gulp clean && gulp prePublishNonBundle","createNycFolder":"gulp createNycFolder","validateTranslationFiles":"gulp validateTranslationFiles","compile":"tsc -watch -p ./","compile-no-watch":"tsc -p ./","compiled":"deemon npm run compile","kill-compiled":"deemon --kill npm run compile","compile-webviews-watch":"webpack --config ./build/webpack/webpack.datascience-ui.config.js --watch","compile-web-watch":"webpack --mode development --config ./build/webpack/webpack.extension.web.config.js --stats-error-details --watch --progress","compile-web":"webpack --mode development --config ./build/webpack/webpack.extension.web.config.js","compile-web-test":"cross-env VSC_TEST_BUNDLE=true npm run compile-web","compile-web-test-watch":"cross-env VSC_TEST_BUNDLE=true npm run compile-web-watch","compile-webviews-watchd":"deemon npm run compile-webviews-watch","compile-widgetTester":"cross-env NODE_OPTIONS=--max_old_space_size=9096 webpack --config ./build/webpack/webpack.datascience-ui-widgetTester.config.js --watch","kill-compile-webviews-watchd":"deemon --kill npm run compile-webviews-watch","checkDependencies":"gulp checkDependencies","postinstall":"npm run download-api && node ./build/ci/postInstall.js","installPythonLibs":"gulp installPythonLibs","test:unittests":"mocha --config ./build/.mocha.unittests.js.json ./out/**/*.unit.test.js","test:functional":"mocha --require source-map-support/register --config ./build/.mocha.functional.json","test:functional:perf":"node --inspect-brk ./node_modules/mocha/bin/_mocha --require source-map-support/register --config ./build/.mocha.functional.perf.json","test:functional:memleak":"node --inspect-brk ./node_modules/mocha/bin/_mocha --require source-map-support/register --config ./build/.mocha.functional.json","test:functional:parallel":"cross-env VSC_JUPYTER_CI_TEST_PARALLEL=1 node ./build/ci/scripts/runFunctionalTests.js","test:cover:report":"nyc report --reporter=text --reporter=html --reporter=text-summary --reporter=cobertura","preTestJediLSP":"node ./out/test/languageServers/jedi/lspSetup.js","testJediLSP":"node ./out/test/languageServers/jedi/lspSetup.js && cross-env CODE_TESTS_WORKSPACE=src/test VSC_JUPYTER_CI_TEST_GREP=\'Language Server:\' node ./out/test/testBootstrap.node.js ./out/test/standardTest.node.js && node ./out/test/languageServers/jedi/lspTeardown.node.js","pretestNativeNotebooksInVSCode":"cross-env VSC_JUPYTER_CI_TEST_VSC_CHANNEL=insiders node ./out/test/datascience/dsTestSetup.js","testNativeNotebooksInVSCode":"cross-env CODE_TESTS_WORKSPACE=src/test/datascience VSC_JUPYTER_CI_TEST_VSC_CHANNEL=insiders TEST_FILES_SUFFIX=*.vscode.test,*.vscode.common.test VSC_JUPYTER_FORCE_LOGGING=1 VSC_JUPYTER_LOAD_EXPERIMENTS_FROM_FILE=true node ./out/test/testBootstrap.node.js ./out/test/standardTest.node.js","testNativeNotebooksInVSCodeWithoutTestSuffix":"cross-env CODE_TESTS_WORKSPACE=src/test/datascience VSC_JUPYTER_CI_TEST_VSC_CHANNEL=insiders VSC_JUPYTER_FORCE_LOGGING=1 VSC_JUPYTER_LOAD_EXPERIMENTS_FROM_FILE=true node ./out/test/testBootstrap.node.js ./out/test/standardTest.node.js","pretestNativeNotebooksWithoutPythonInVSCode":"cross-env VSC_JUPYTER_CI_TEST_VSC_CHANNEL=insiders node ./out/test/datascience/dsTestSetup.js","testNativeNotebooksWithoutPythonInVSCode":"cross-env CODE_TESTS_WORKSPACE=src/test/datascience VSC_JUPYTER_CI_TEST_VSC_CHANNEL=insiders TEST_FILES_SUFFIX=*.vscode.test,*.vscode.common.test VSC_JUPYTER_FORCE_LOGGING=1 VSC_JUPYTER_LOAD_EXPERIMENTS_FROM_FILE=true VSC_JUPYTER_CI_TEST_GREP=@nonPython VSC_JUPYTER_CI_TEST_DO_NOT_INSTALL_PYTHON_EXT=true node ./out/test/testBootstrap.node.js ./out/test/standardTest.node.js","testNativeNotebooksAndWebviews":"cross-env CODE_TESTS_WORKSPACE=src/test/datascience VSC_JUPYTER_CI_TEST_VSC_CHANNEL=insiders TEST_FILES_SUFFIX=*.vscode.test,*.vscode.common.test VSC_JUPYTER_FORCE_LOGGING=1 VSC_JUPYTER_CI_TEST_GREP=webview-test VSC_JUPYTER_LOAD_EXPERIMENTS_FROM_FILE=true node ./out/test/testBootstrap.node.js ./out/test/standardTest.node.js","testWebExtension":"node ./build/launchWebTest.js","launchWebExtension":"node ./build/launchWeb.js","testPerformance":"node ./out/test/perfTest.node.js","testSmoke":"node ./out/test/testBootstrap.node.js ./out/test/smokeTest.node.js","testSmokeLogged":"cross-env VSC_JUPYTER_FORCE_LOGGING=true VSC_JUPYTER_LOG_FILE=smoke-test.log node --no-force-async-hooks-checks ./out/test/testBootstrap.node.js ./out/test/smokeTest.node.js","lint":"eslint -c .eslintrc.js --ext .ts --ext .tsx src","prettier-fix":"prettier \'src/**/*.ts*\' --write && prettier \'build/**/*.js\' --write","clean":"gulp clean","updateBuildNumber":"gulp updateBuildNumber","webpack":"webpack","download-api":"vscode-dts dev","postdownload-api":"vscode-dts main","generateTelemetry":"gulp generateTelemetry","openInBrowser":"vscode-test-web --extensionDevelopmentPath=. ./src/test/datascience","startJupyterServer":"node build/preDebugWebTest.js","stopJupyterServer":"node build/postDebugWebTest.js","validateTelemetry":"gulp validateTelemetry","verifyUnhandledErrors":"gulp verifyUnhandledErrors","printTestResults":"gulp printTestResults","setup-precommit-hook":"husky install","webpack-analyze:node":"npx webpack --json --config build/webpack/webpack.extension.node.config.js > out/stats-node.json && yarn webpack-bundle-analyzer out/stats-node.json","webpack-analyze:web":"npx webpack --json --config build/webpack/webpack.extension.web.config.js > out/stats-web.json && yarn webpack-bundle-analyzer out/stats-web.json"},"dependencies":{"@enonic/fnv-plus":"^1.3.0","@fluentui/react":"^7.160.1","@jupyter-widgets/base":"4.0.0","@jupyter-widgets/controls":"3.0.0","@jupyter-widgets/schema":"0.4.0","@jupyterlab/coreutils":"5.1.17","@jupyterlab/nbformat":"3.1.17","@jupyterlab/services":"6.1.17","@lumino/widgets":"^1.28.0","@nteract/messaging":"^7.0.0","@vscode/extension-telemetry":"^0.6.2","@vscode/jupyter-lsp-middleware":"^0.2.50","ajv-keywords":"^3.5.2","ansi-to-html":"^0.6.7","bootstrap":"^4.3.1","bootstrap-less":"^3.3.8","cross-fetch":"^3.1.5","decompress-response":"^4.2.0","encoding":"^0.1.13","fast-deep-equal":"^2.0.1","format-util":"^1.0.5","fs-extra":"^4.0.3","glob":"^7.1.2","inversify":"^5.0.1","isomorphic-ws":"^4.0.1","jquery":"^3.6.0","jsonc-parser":"^2.0.3","lodash":"^4.17.21","marked":"^4.0.10","node-fetch":"^2.6.7","node-stream-zip":"^1.6.0","pdfkit":"^0.13.0","pidtree":"^0.6.0","portfinder":"^1.0.25","re-resizable":"~6.5.5","react":"^16.5.2","react-data-grid":"^6.0.2-0","react-dom":"^16.5.2","react-redux":"^7.1.1","react-svg-pan-zoom":"3.9.0","react-svgmt":"1.1.11","react-virtualized":"^9.21.1","redux":"^4.0.4","redux-logger":"^3.0.6","reflect-metadata":"^0.1.12","rxjs":"^6.5.4","rxjs-compat":"^6.5.4","safe-buffer":"^5.2.1","sanitize-filename":"^1.6.3","semver":"^5.5.0","slickgrid":"^2.4.17","source-map":"^0.7.3","stack-trace":"0.0.10","string-argv":"^0.3.1","strip-comments":"^2.0.1","styled-components":"^5.2.1","sudo-prompt":"^9.2.1","svg-inline-react":"^3.1.0","svg-to-pdfkit":"^0.1.8","tcp-port-used":"^1.0.1","tmp":"^0.0.29","uint64be":"^1.0.1","underscore":"^1.12.1","url-parse":"^1.5.10","uuid":"^3.3.2","vscode-debugprotocol":"^1.41.0","vscode-jsonrpc":"8.0.2-next.1","vscode-languageclient":"8.0.2-next.5","vscode-languageserver":"8.0.2-next.5","vscode-languageserver-protocol":"3.17.2-next.6","vscode-tas-client":"^0.1.27","ws":"^6.2.2","zeromq":"^6.0.0-beta.6"},"devDependencies":{"@actions/core":"^1.9.1","@actions/github":"^4.0.0","@actions/glob":"^0.3.0","@babel/cli":"^7.15.4","@babel/core":"^7.4.4","@babel/plugin-transform-runtime":"^7.4.4","@babel/polyfill":"^7.4.4","@babel/preset-env":"^7.1.0","@babel/preset-react":"^7.0.0","@babel/register":"^7.9.0","@istanbuljs/nyc-config-typescript":"^0.1.3","@octokit/core":"^3.2.4","@octokit/plugin-paginate-rest":"^2.7.0","@octokit/webhooks":"^7.21.0","@sinonjs/fake-timers":"^6.0.1","@types/ansi-regex":"^4.0.0","@types/chai":"^4.1.2","@types/chai-arrays":"^1.0.2","@types/chai-as-promised":"^7.1.0","@types/copy-webpack-plugin":"^6.0.0","@types/cors":"^2.8.6","@types/debug":"^4.1.5","@types/dedent":"^0.7.0","@types/del":"^4.0.0","@types/enzyme":"^3.1.14","@types/enzyme-adapter-react-16":"^1.0.3","@types/event-stream":"^3.3.33","@types/format-util":"^1.0.2","@types/fs-extra":"^5.0.1","@types/get-port":"^3.2.0","@types/glob":"^5.0.35","@types/html-webpack-plugin":"^3.2.0","@types/jsdom":"^16.2.13","@types/json2csv":"^5.0.3","@types/loadable__component":"^5.10.0","@types/loader-utils":"^1.1.3","@types/lodash":"^4.14.104","@types/md5":"^2.1.32","@types/memoize-one":"^4.1.1","@types/mocha":"^9.1.0","@types/nock":"^10.0.3","@types/node":"^16.18.6","@types/node-fetch":"^2.5.7","@types/pdfkit":"^0.11.0","@types/promisify-node":"^0.4.0","@types/react":"^16.4.14","@types/react-dom":"^16.0.8","@types/react-json-tree":"^0.6.8","@types/react-redux":"^7.1.5","@types/react-virtualized":"^9.21.2","@types/redux-logger":"^3.0.7","@types/semver":"^5.5.0","@types/shortid":"^0.0.29","@types/sinon":"^7.5.1","@types/sinonjs__fake-timers":"^6.0.1","@types/stack-trace":"0.0.29","@types/strip-comments":"^2.0.1","@types/svg-to-pdfkit":"^0.1.0","@types/tcp-port-used":"^1.0.0","@types/temp":"^0.8.32","@types/tmp":"^0.2.3","@types/url-parse":"^1.4.8","@types/uuid":"^3.4.3","@types/uuid-to-hex":"^1.1.0","@types/vscode-notebook-renderer":"^1.60.0","@types/webpack-bundle-analyzer":"^2.13.0","@types/webpack-env":"^1.16.3","@types/ws":"^6.0.1","@types/xml2js":"^0.4.2","@typescript-eslint/eslint-plugin":"^5.47.0","@typescript-eslint/eslint-plugin-tslint":"^5.47.0","@typescript-eslint/parser":"^5.47.0","@vscode/test-electron":"^2.2.0","@vscode/test-web":"^0.0.29","acorn":"^6.4.1","babel-polyfill":"^6.26.0","bufferutil":"^4.0.6","chai":"^4.3.0","chai-arrays":"^2.0.0","chai-as-promised":"^7.1.1","chai-exclude":"^2.0.2","clean-terminal-webpack-plugin":"^3.0.0","codecov":"^3.7.1","colors":"^1.2.1","copy-webpack-plugin":"^10.2.4","cors":"^2.8.5","cross-env":"^6.0.3","cross-spawn":"^6.0.5","css-loader":"^6.6.0","dedent":"^0.7.0","deemon":"^1.4.0","del":"^3.0.0","enzyme":"^3.7.0","enzyme-adapter-react-16":"^1.6.0","es-abstract":"^1.19.1","es5-ext":"^0.10.53","eslint":"^7.32.0","eslint-config-airbnb":"^18.2.0","eslint-config-prettier":"^6.15.0","eslint-plugin-header":"^3.1.1","eslint-plugin-import":"^2.25.4","eslint-plugin-jsdoc":"^31.0.4","eslint-plugin-jsx-a11y":"^6.3.1","eslint-plugin-local-rules":"file:build/eslint-rules","eslint-plugin-no-null":"^1.0.2","eslint-plugin-no-only-tests":"^2.6.0","eslint-plugin-prefer-arrow":"^1.2.2","eslint-plugin-prettier":"^3.1.2","eslint-plugin-react":"^7.22.0","eslint-plugin-react-hooks":"^4.0.0","expose-gc":"^1.0.0","expose-loader":"^3.1.0","express":"^4.17.1","fast-xml-parser":"^3.16.0","flat":"^5.0.1","fork-ts-checker-webpack-plugin":"^7.0.0","get-port":"^3.2.0","glob-parent":"^6.0.2","gulp":"^4.0.2","gulp-filter":"^5.1.0","gulp-rename":"^1.4.0","gulp-typescript":"^6.0.0-alpha.1","html-webpack-plugin":"^5.5.0","husky":"^7.0.0","jsdom":"^20.0.0","json2csv":"^5.0.7","jsonschema":"^1.4.1","keyv":"^4.1.0","less":"^3.9.0","less-loader":"^10.2.0","less-plugin-inline-urls":"^1.2.0","lolex":"^5.1.2","lru-cache":"^6.0.0","md5":"^2.3.0","mimic-response":"^4.0.0","mocha":"^9.2.2","mocha-junit-reporter":"^2.0.2","mocha-multi-reporters":"^1.1.7","nocache":"^2.1.0","nock":"^10.0.6","node-gyp-build":"^4.2.3","node-has-native-dependencies":"^1.0.2","node-html-parser":"^1.1.13","nyc":"^15.0.0","path-browserify":"^1.0.1","popper.js":"^1.16.1","postcss":"^8.4.6","postcss-import":"^14.0.2","postcss-loader":"^6.2.1","postcss-preset-env":"^7.3.1","prettier":"^2.0.2","process-nextick-args":"^2.0.1","range-inclusive":"^1.0.2","relative":"^3.0.2","remove-files-webpack-plugin":"^1.4.0","rewiremock":"^3.13.0","rimraf":"^3.0.2","screenshot-desktop":"^1.12.7","sinon":"^8.0.1","source-map-support":"^0.5.12","string_decoder":"~1.1.1","style-loader":"^3.3.1","svg-inline-loader":"^0.8.0","thread-loader":"^3.0.4","transform-loader":"^0.2.4","ts-loader":"^9.2.8","ts-mock-imports":"^1.3.0","ts-mockito":"^2.5.0","ts-node":"^8.3.0","tsconfig-paths-webpack-plugin":"^3.2.0","tslib":"^2.3.0","typemoq":"^2.1.0","typescript":"^4.9.4","unicode-properties":"^1.3.1","utf-8-validate":"^5.0.8","util":"^0.12.4","uuid-to-hex":"^1.1.1","vscode-dts":"^0.3.2","webpack":"^5.68.0","webpack-bundle-analyzer":"^4.5.0","webpack-cli":"^4.9.2","why-is-node-running":"^2.0.3","xml-js":"^1.6.11","yargs":"^17.3.1","yargs-parser":"^13.1.2"},"optionalDependencies":{"canvas":"^2.7.0","fsevents":"^2.3.2"},"overrides":{"json5":"2.2.2","simple-get@<3.1.1":"3.1.1","validator@<13.7.0":"13.7.0","jpeg-js@<0.4.4":"0.4.4","playwright-core":{"jpeg-js":"0.4.4"},"terser@<5.14.2":"5.14.2","glob-parent@<5.1.2":"5.1.2","jquery-ui@<1.13.2":"1.13.2","@jupyterlab/coreutils":{"url-parse":"$url-parse"},"d3-color":"3.1.0"}}')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__={};(()=>{"use strict";var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),e.deactivate=e.activate=void 0,__webpack_require__(39667),"undefined"==typeof requestAnimationFrame&&"undefined"==typeof setImmediate&&(self.setImmediate=e=>setTimeout(e),self.clearImmediate=e=>clearTimeout(e)),__webpack_require__(11642);const t={totalActivateTime:0,codeLoadingTime:0,startActivateTime:0,endActivateTime:0,workspaceFolderCount:0},n=new(__webpack_require__(11386).StopWatch),r=__webpack_require__(66828),i=__webpack_require__(34383),o=__webpack_require__(10053),s=__webpack_require__(11642),a=__webpack_require__(42080),c=__webpack_require__(43138),l=__webpack_require__(25251),u=__webpack_require__(41778),d=__webpack_require__(80772),p=__webpack_require__(58681),h=__webpack_require__(11311),f=__webpack_require__(9086),g=__webpack_require__(24411),m=__webpack_require__(95247),y=__webpack_require__(12234),v=__webpack_require__(63521),b=__webpack_require__(61480),w=__webpack_require__(52064),C=__webpack_require__(15925),S=__webpack_require__(22913),_=__webpack_require__(11642),k=__webpack_require__(51389),P=__webpack_require__(5337),I=__webpack_require__(33796),E=__webpack_require__(75409),T=__webpack_require__(91057),D=__webpack_require__(10499);let x;t.codeLoadingTime=n.elapsedTime,e.activate=async function(e){try{let s,R,j;return[s,R,j]=await async function(e,t,n){const s=(0,c.createDeferred)();try{!function(e){const t={location:r.ProgressLocation.Window,title:l.Common.loadingExtension};r.window.withProgress(t,(()=>e)).then(p.noop,p.noop)}(s.promise),n.startActivateTime=t.elapsedTime;const[c,d]=function(e){const t=new k.Container({skipBaseClassChecks:!0}),n=new I.ServiceManager(t),r=new P.ServiceContainer(t);return n.addSingletonInstance(u.IServiceContainer,r),n.addSingletonInstance(u.IServiceManager,n),n.addSingletonInstance(a.IDisposableRegistry,e.subscriptions),n.addSingletonInstance(a.IMemento,e.globalState,a.GLOBAL_MEMENTO),n.addSingletonInstance(a.IMemento,e.workspaceState,a.WORKSPACE_MEMENTO),n.addSingletonInstance(a.IExtensionContext,e),[n,r]}(e);x=d,(0,D.initializeGlobals)((()=>Promise.resolve(new Map)));const R=async function(e,t,n){return async function(e,t,n){const i=e.extensionMode===r.ExtensionMode.Development||r.workspace.getConfiguration("jupyter").get("development",!1);t.addSingletonInstance(a.IsDevMode,i),t.addSingletonInstance(a.IsWebExtension,!0),i&&r.commands.executeCommand("setContext","jupyter.development",!0).then(p.noop,p.noop),r.commands.executeCommand("setContext","jupyter.webExtension",!0).then(p.noop,p.noop),function(e,t,n){const i=r.window.createOutputChannel(l.OutputChannelNames.jupyter);(0,_.registerLogger)(new E.OutputChannelLogger(i)),t.addSingletonInstance(a.IOutputChannel,i,C.STANDARD_OUTPUT_CHANNEL),t.addSingletonInstance(a.IOutputChannel,(0,S.getJupyterOutputChannel)(n,e.subscriptions,i),C.JUPYTER_OUTPUT_CHANNEL),t.addSingletonInstance(a.IsCodeSpace,r.env.uiKind==r.UIKind.Web),i.appendLine(`${r.env.appName} (${r.version}, ${r.env.remoteName}, ${r.env.appHost})`),i.appendLine(`Jupyter Extension Version: ${e.extension.packageJSON.version}.`);const o=r.extensions.getExtension(C.PythonExtension);o?i.appendLine(`Python Extension Version: ${o.packageJSON.version}.`):i.appendLine("Python Extension not installed."),r.workspace.workspaceFolders&&0!==r.workspace.workspaceFolders.length?i.appendLine("Opened workspace folder."):i.appendLine("No workspace folder opened.")}(e,t,i),function(){if((0,C.isTestExecution)()){let e;C.isCI||(e="Jupyter Extension:"),(0,_.registerLogger)(new T.ConsoleLogger(e))}}(),(0,h.registerTypes)(t),(0,g.registerTypes)(t,i),(0,f.registerTypes)(t,i),(0,m.registerTypes)(t),(0,y.registerTypes)(t),(0,v.registerTypes)(e,t,i),(0,b.registerTypes)(t);const s=n.get(a.IExperimentService);await s.activate(),s.logExperiments();const c=t.get(o.IApplicationEnvironment),u=t.get(a.IConfigurationService).getSettings();(0,_.setLoggingLevel)(u.logging.level),u.onDidChange((()=>{(0,_.setLoggingLevel)(u.logging.level)})),n.get(o.ICommandManager).executeCommand("setContext","jupyter.vscode.channel",c.channel).then(p.noop,p.noop);const d=n.get(w.IExtensionActivationManager);e.subscriptions.push(d),d.activateSync();const k=d.activate(),P=n.get(a.IFeaturesManager);return P.initialize(),e.subscriptions.push(P),k}(e,t,n)}(e,c,d);return n.endActivateTime=t.elapsedTime,s.resolve(),[(0,i.buildApi)(R,c,d,e),R,d]}finally{s.completed||s.reject()}}(e,n,t),(0,d.sendStartupTelemetry)(R,t,n,j).ignoreErrors(),await R,s}catch(e){return await async function(e,t){(function(e){try{r.window.showErrorMessage(e).then(p.noop,p.noop)}catch(e){(0,s.traceError)("failed to notify user",e)}})(l.Common.handleExtensionActivationError),console.error("extension activation failed",e),(0,s.traceError)("extension activation failed",e),await(0,d.sendErrorTelemetry)(e,t,x)}(e,t),(0,s.traceError)("Failed to active the Jupyter Extension",e),{ready:Promise.resolve(),registerPythonApi:p.noop,registerRemoteServerProvider:p.noop,showDataViewer:()=>Promise.resolve(),getKernelService:()=>Promise.resolve(void 0),getSuggestedController:()=>Promise.resolve(void 0),addRemoteJupyterServer:()=>Promise.resolve(void 0)}}},e.deactivate=function(){if(x){const e=x.get(a.IAsyncDisposableRegistry);if(e)return e.dispose()}return Promise.resolve()}})(),module.exports=__webpack_exports__})();
//# sourceMappingURL=extension.web.bundle.js.map